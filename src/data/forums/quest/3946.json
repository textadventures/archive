{
  "Topic": {
    "TopicId": "3946",
    "ForumId": "10",
    "Title": "Timer problems?",
    "LastUpdated": "2013-10-03T22:08:57+01:00",
    "ReplyCount": 14
  },
  "Posts": [
    {
      "PostId": "26486",
      "UserId": 0,
      "Username": "markqz",
      "UserAvatar": null,
      "UserGravatar": "0fb9af02d52acc2f1c6c5b9d8ea69126",
      "EditableText": "Are there any known problems with timers? Currently I have a timer that activates when  &quot;Start timer when the game begins&quot; is selected, but doesn't activate when enabled by script. Has anyone else experienced this?\n\nThanks!\nMark",
      "EditableFormat": "bbcode",
      "HTML": "Are there any known problems with timers? Currently I have a timer that activates when  &quot;Start timer when the game begins&quot; is selected, but doesn't activate when enabled by script. Has anyone else experienced this?<br/><br/>Thanks!<br/>Mark",
      "PostDate": "2013-10-03T07:22:56+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26487",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Are you using the online editor or the downloaded desktop version? There are some know problems with timers when run in a web browser. I would not expect the problem you're reporting, though. Is it possible to share some code?",
      "EditableFormat": "bbcode",
      "HTML": "Are you using the online editor or the downloaded desktop version? There are some know problems with timers when run in a web browser. I would not expect the problem you're reporting, though. Is it possible to share some code?",
      "PostDate": "2013-10-03T10:58:57+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26490",
      "UserId": 0,
      "Username": "markqz",
      "UserAvatar": null,
      "UserGravatar": "0fb9af02d52acc2f1c6c5b9d8ea69126",
      "EditableText": "Here's the code that invokes the timer:\n[code:qqmvk4yt]\nAsk (&quot;Are you sure you don't want to use the scooter? Its a beautiful day&#46; (Yes/No)&quot;) {\n  DisableTurnScript (School Starts)\n  EnableTimer (timer1)\n  msg (&quot;And off we go&#46; We'll be there in a few minutes&#46; HONK! HONK!&quot;)\n  TextFX_Typewriter (&quot;Individual! There is a loooot of traffic this morning!&quot;, 200)\n}[/code:qqmvk4yt]\n\nHere's the timer code:\n\n[code:qqmvk4yt]msg (&quot;-- Timer script starts here --&quot;)\nMoveObject (player, school waiting)\nDecrementTime (12)\nEnableTurnScript (School Starts)[/code:qqmvk4yt]\n\nDon't be alarmed by the &quot;DecrementTime&quot; function -- it doesn't do anything with timing -- it decrements my own variable/attribute in game (game.timeleft).\n\nI thought the TextFX_Typewriter might be the culprit, but commenting it out doesn't help either.\n\nThe whole reason for this timer is to try to prevent a final report from being printed at the bottom of the screen until AFTER TextFX is finished. I've also tried putting the timer script inside a [b:qqmvk4yt]SetTimeout (21) {script}[/b:qqmvk4yt] command, but Quest ignored the timer and executed the code immediately.\n\nThanks!\nMark\n\nEdit: Forgot to mention, this the Windows 5.4.1 version.",
      "EditableFormat": "bbcode",
      "HTML": "Here's the code that invokes the timer:<br/><pre><code><br/>Ask (&quot;Are you sure you don't want to use the scooter? Its a beautiful day&#46; (Yes/No)&quot;) {<br/>  DisableTurnScript (School Starts)<br/>  EnableTimer (timer1)<br/>  msg (&quot;And off we go&#46; We'll be there in a few minutes&#46; HONK! HONK!&quot;)<br/>  TextFX_Typewriter (&quot;Individual! There is a loooot of traffic this morning!&quot;, 200)<br/>}</code></pre><br/><br/>Here's the timer code:<br/><br/><pre><code>msg (&quot;-- Timer script starts here --&quot;)<br/>MoveObject (player, school waiting)<br/>DecrementTime (12)<br/>EnableTurnScript (School Starts)</code></pre><br/><br/>Don't be alarmed by the &quot;DecrementTime&quot; function -- it doesn't do anything with timing -- it decrements my own variable/attribute in game (game.timeleft).<br/><br/>I thought the TextFX_Typewriter might be the culprit, but commenting it out doesn't help either.<br/><br/>The whole reason for this timer is to try to prevent a final report from being printed at the bottom of the screen until AFTER TextFX is finished. I've also tried putting the timer script inside a <span style=\"font-weight:bold;\">SetTimeout (21) {script}</span> command, but Quest ignored the timer and executed the code immediately.<br/><br/>Thanks!<br/>Mark<br/><br/>Edit: Forgot to mention, this the Windows 5.4.1 version.",
      "PostDate": "2013-10-03T14:51:48+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26491",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "What you've posted looks ok, but it's missing even where the timer name is set, so I can't even check that you're enabling the right timer. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> If you could either post the game file here or email it to me, I could take a look better. And I also can't see if the timer is being disabled somewhere else (as an example of things I'd look for). Or some other weird thing that nobody has seen before. I'm sure I could have an answer if I could run the file.",
      "EditableFormat": "bbcode",
      "HTML": "What you've posted looks ok, but it's missing even where the timer name is set, so I can't even check that you're enabling the right timer. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> If you could either post the game file here or email it to me, I could take a look better. And I also can't see if the timer is being disabled somewhere else (as an example of things I'd look for). Or some other weird thing that nobody has seen before. I'm sure I could have an answer if I could run the file.",
      "PostDate": "2013-10-03T15:59:22+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26492",
      "UserId": 0,
      "Username": "markqz",
      "UserAvatar": null,
      "UserGravatar": "0fb9af02d52acc2f1c6c5b9d8ea69126",
      "EditableText": "Here it is! Had to take out the semi-personal monikers and then (of course) retest.",
      "EditableFormat": "bbcode",
      "HTML": "Here it is! Had to take out the semi-personal monikers and then (of course) retest.<div><a href=\"/forumattachments/737/One Weird Day-mailing.aslx\">One Weird Day-mailing.aslx</a></div>",
      "PostDate": "2013-10-03T16:23:26+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26493",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "It does seem to be a bug. I suspect it has to do with enabling the timer in the context of an Ask. Let me play with it a bit and see if there is a workaround.",
      "EditableFormat": "bbcode",
      "HTML": "It does seem to be a bug. I suspect it has to do with enabling the timer in the context of an Ask. Let me play with it a bit and see if there is a workaround.",
      "PostDate": "2013-10-03T17:16:33+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26494",
      "UserId": 0,
      "Username": "markqz",
      "UserAvatar": null,
      "UserGravatar": "0fb9af02d52acc2f1c6c5b9d8ea69126",
      "EditableText": "Additional info.\n\nI just noticed that if, while waiting for the timer, I &quot;look at&quot; the Edsel, the timer finally kicks in. \n\nThanks,\nMark",
      "EditableFormat": "bbcode",
      "HTML": "Additional info.<br/><br/>I just noticed that if, while waiting for the timer, I &quot;look at&quot; the Edsel, the timer finally kicks in. <br/><br/>Thanks,<br/>Mark",
      "PostDate": "2013-10-03T17:24:40+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26495",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Yeah, I saw that, too. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> And if you move the EnableTimer outside the Ask, it works as well.",
      "EditableFormat": "bbcode",
      "HTML": "Yeah, I saw that, too. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> And if you move the EnableTimer outside the Ask, it works as well.",
      "PostDate": "2013-10-03T17:41:15+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26496",
      "UserId": 0,
      "Username": "markqz",
      "UserAvatar": null,
      "UserGravatar": "0fb9af02d52acc2f1c6c5b9d8ea69126",
      "EditableText": "It appears that Quest doesn't wait for a response to finish from &quot;Ask&quot; before it continues with code after the Ask.\n\nSo all the code after the Ask gets run, even if its actions depends on the results of the ask. \n\nThanks,\nMark",
      "EditableFormat": "bbcode",
      "HTML": "It appears that Quest doesn't wait for a response to finish from &quot;Ask&quot; before it continues with code after the Ask.<br/><br/>So all the code after the Ask gets run, even if its actions depends on the results of the ask. <br/><br/>Thanks,<br/>Mark",
      "PostDate": "2013-10-03T19:18:53+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26497",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Yes, that is the case. The Ask command just sets up the user interface to ask the question, with the passed script to be called when it's done. But the rest of the script containing the Ask does continue on.",
      "EditableFormat": "bbcode",
      "HTML": "Yes, that is the case. The Ask command just sets up the user interface to ask the question, with the passed script to be called when it's done. But the rest of the script containing the Ask does continue on.",
      "PostDate": "2013-10-03T19:32:30+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26498",
      "UserId": 0,
      "Username": "markqz",
      "UserAvatar": null,
      "UserGravatar": "0fb9af02d52acc2f1c6c5b9d8ea69126",
      "EditableText": "It also appears that &quot;Pause&quot; doesn't actually pause the code. Not sure what it else it be used for pausing. So I couldn't use it to roll my own typewriter style message.\n\nHmm, maybe ShowMenu will be better behaved, since it activates a modal window.\n\nThanks,\nMark",
      "EditableFormat": "bbcode",
      "HTML": "It also appears that &quot;Pause&quot; doesn't actually pause the code. Not sure what it else it be used for pausing. So I couldn't use it to roll my own typewriter style message.<br/><br/>Hmm, maybe ShowMenu will be better behaved, since it activates a modal window.<br/><br/>Thanks,<br/>Mark",
      "PostDate": "2013-10-03T19:44:30+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26499",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "There is no way to &quot;block&quot; in Quest. All the UI features - Ask, pause, showmenu - take scripts to be run when completed, but none of them stop at that point and wait. In fact, if you were to force the code to wait (e.g. put in an infinite loop), then it would lock up the game system entirely. Quest scripts are meant to complete before next input.",
      "EditableFormat": "bbcode",
      "HTML": "There is no way to &quot;block&quot; in Quest. All the UI features - Ask, pause, showmenu - take scripts to be run when completed, but none of them stop at that point and wait. In fact, if you were to force the code to wait (e.g. put in an infinite loop), then it would lock up the game system entirely. Quest scripts are meant to complete before next input.",
      "PostDate": "2013-10-03T20:04:47+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26500",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "This is a little bit of a hack, but it might suffice.\n\nCreate a function to be called when the timer is done:\n\n[code:2j0noem5]  &lt;function name=&quot;EdselDone&quot; parameters=&quot;s&quot;&gt;\n      msg (&quot;-- Timer script starts here --&quot;)\n      MoveObject (player, school waiting)\n      DecrementTime (12)\n      EnableTurnScript (School Starts)\n  &lt;/function&gt;[/code:2j0noem5]\n\nNote that the function *must* take a single parameter (which is unused).\n\nThen in your Ask script, have a line like this:\n\n [code:2j0noem5]  JS&#46;eval(&quot;setTimeout(\\&quot;ASLEvent('EdselDone', '')\\&quot;, 21*1000);&quot;)[/code:2j0noem5]\n\nThe &quot;21&quot; is the number of seconds you had in yours. &quot;EdselDone&quot; is the function to invoke when the timeout is done. This uses a JavaScript timeout instead of a Quest one. Note as well that invoking EdselDone will cause any turnscripts to run.\n\nThe ideal solution would be for the typewriter API to take the name of a &quot;completion&quot; function to call when the typewriter is done. I have already suggested this to Alex. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "This is a little bit of a hack, but it might suffice.<br/><br/>Create a function to be called when the timer is done:<br/><br/><pre><code>  &lt;function name=&quot;EdselDone&quot; parameters=&quot;s&quot;&gt;<br/>      msg (&quot;-- Timer script starts here --&quot;)<br/>      MoveObject (player, school waiting)<br/>      DecrementTime (12)<br/>      EnableTurnScript (School Starts)<br/>  &lt;/function&gt;</code></pre><br/><br/>Note that the function *must* take a single parameter (which is unused).<br/><br/>Then in your Ask script, have a line like this:<br/><br/> <pre><code>  JS&#46;eval(&quot;setTimeout(\\&quot;ASLEvent('EdselDone', '')\\&quot;, 21*1000);&quot;)</code></pre><br/><br/>The &quot;21&quot; is the number of seconds you had in yours. &quot;EdselDone&quot; is the function to invoke when the timeout is done. This uses a JavaScript timeout instead of a Quest one. Note as well that invoking EdselDone will cause any turnscripts to run.<br/><br/>The ideal solution would be for the typewriter API to take the name of a &quot;completion&quot; function to call when the typewriter is done. I have already suggested this to Alex. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2013-10-03T20:43:05+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26501",
      "UserId": 0,
      "Username": "markqz",
      "UserAvatar": null,
      "UserGravatar": "0fb9af02d52acc2f1c6c5b9d8ea69126",
      "EditableText": "Thanks for all your efforts!\n\nProbably I should throw in the towel on the typewriter idea for now. This has been a major detour.\n\nBut I still don't understand under what circumstances you would use &quot;Pause&quot; if it doesn't actually pause the script.\n\nI just discovered that &quot;show menu&quot; doesn't work at all inside the Exit's &quot;Script to run&quot; script. It does run inside the &quot;Look at&quot; object descriptions. ShowMenu seems to work, but that's deprecated.\n\nThanks,\nMark",
      "EditableFormat": "bbcode",
      "HTML": "Thanks for all your efforts!<br/><br/>Probably I should throw in the towel on the typewriter idea for now. This has been a major detour.<br/><br/>But I still don't understand under what circumstances you would use &quot;Pause&quot; if it doesn't actually pause the script.<br/><br/>I just discovered that &quot;show menu&quot; doesn't work at all inside the Exit's &quot;Script to run&quot; script. It does run inside the &quot;Look at&quot; object descriptions. ShowMenu seems to work, but that's deprecated.<br/><br/>Thanks,<br/>Mark",
      "PostDate": "2013-10-03T21:39:55+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26503",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "&quot;Pause&quot; means basically &quot;put up the message 'Press Any Key to Continue' and then run the passed script when they do.&quot; So it changes the UI to hide the entry line and show the Continue message. Then when the player presses a key, the script you pass in gets run, as an event-driven thing. Perhaps &quot;Pause&quot; is a bit of misnomer... <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "&quot;Pause&quot; means basically &quot;put up the message 'Press Any Key to Continue' and then run the passed script when they do.&quot; So it changes the UI to hide the entry line and show the Continue message. Then when the player presses a key, the script you pass in gets run, as an event-driven thing. Perhaps &quot;Pause&quot; is a bit of misnomer... <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2013-10-03T22:08:57+01:00",
      "LastEditDate": null
    }
  ]
}