{
  "Topic": {
    "TopicId": "lqohvexmpk6jhu3tmt6y1a",
    "ForumId": "10",
    "Title": "Self Description / Clothing",
    "LastUpdated": "2018-10-03T00:24:59.9541146Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "9e068add-ec73-4af0-b93b-d536eb3b7139",
      "UserId": 378821,
      "Username": "Svarii",
      "AvatarUrl": "https://i.imgur.com/cJ10zyPb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello!\r\nJust starting out with Quest making a TA game.  This program is awesome.\r\n\r\nI'm trying to generate a custom description for my character without using a complex series of nested if statement.\r\n\r\nI have put 2 wearable object on my character for testing.\r\nIn layer 2, I have a prison jumpsuit. Slot clothes\r\nIn layer 1, I have tighty whities. Slot underwear.\r\nI believe I can accomplish my description using the GetOuter function but I can't figure out how to use it properly.\r\n\r\nIf the player types 'look at me' I want it want it to display the outer most layer of clothing. The highest wear layer only. (ie. \"you are wearing a prison jumpsuit\") unless the player has removed the item, I want it to say something like, \"you're in your underwear\"\r\nAlso, I so not want the bottom layer of clothing displayed in the inventory pane.\r\n\r\nAnd while were on the subject, how do I prevent a player from putting on layer 1 items if layer 2 items are already on (and the reverse)?\r\n\r\nThanks in advanced!\r\n\r\nI'll go back to making rooms in my spaceship for now. :]",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello!<br>\nJust starting out with Quest making a TA game.  This program is awesome.</p>\n<p>I'm trying to generate a custom description for my character without using a complex series of nested if statement.</p>\n<p>I have put 2 wearable object on my character for testing.<br>\nIn layer 2, I have a prison jumpsuit. Slot clothes<br>\nIn layer 1, I have tighty whities. Slot underwear.<br>\nI believe I can accomplish my description using the GetOuter function but I can't figure out how to use it properly.</p>\n<p>If the player types 'look at me' I want it want it to display the outer most layer of clothing. The highest wear layer only. (ie. \"you are wearing a prison jumpsuit\") unless the player has removed the item, I want it to say something like, \"you're in your underwear\"<br>\nAlso, I so not want the bottom layer of clothing displayed in the inventory pane.</p>\n<p>And while were on the subject, how do I prevent a player from putting on layer 1 items if layer 2 items are already on (and the reverse)?</p>\n<p>Thanks in advanced!</p>\n<p>I'll go back to making rooms in my spaceship for now. :]</p>\n\n",
      "PostDate": "2018-10-03T00:24:59.9541146Z",
      "LastEditDate": "2018-10-03T02:52:43.911503Z",
      "link": null
    },
    {
      "PostId": "0dad365b-f598-4de0-83f3-6b313baa4911",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I am pretty sure GetOuter refers to the outer most numbers in a list or string, like FOIL, but I could be wrong. The Pixie may correct me.",
      "EditableFormat": "markdown",
      "HTML": "<p>I am pretty sure GetOuter refers to the outer most numbers in a list or string, like FOIL, but I could be wrong. The Pixie may correct me.</p>\n\n",
      "PostDate": "2018-10-03T03:31:21.6923118Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d6621368-da86-425f-a138-fa765a1f50aa",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The `ListClothes` function will give you a list of all clothes, so not quite what you want.\r\n\r\nYou should use `ListVisibleFor` to get a list of visible clothing, then `FormatList` to put it into a string.\r\n```\r\n    return (FormatList(ListVisibleFor(game.pov), \",\", \"and\", \"nothing\"))\r\n```\r\nI think that will show each item with \"(worn)\" after it, so it might look better if you do this:\r\n\r\n```\r\n    l = NewStringList()\r\n    foreach (obj, ListWornFor(game.pov)) {\r\n      list add (l, GetDisplayGarment(obj))\r\n    }\r\n    return (FormatList(l, \",\", \"and\", \"nothing\"))\r\n```\r\n\r\n\r\n> And while were on the subject, how do I prevent a player from putting on layer 1 items if layer 2 items are already on (and the reverse)?\r\n\r\nThat should be built in.",
      "EditableFormat": "markdown",
      "HTML": "<p>The <code>ListClothes</code> function will give you a list of all clothes, so not quite what you want.</p>\n<p>You should use <code>ListVisibleFor</code> to get a list of visible clothing, then <code>FormatList</code> to put it into a string.</p>\n<pre><code>    return (FormatList(ListVisibleFor(game.pov), \",\", \"and\", \"nothing\"))\n</code></pre>\n<p>I think that will show each item with \"(worn)\" after it, so it might look better if you do this:</p>\n<pre><code>    l = NewStringList()\n    foreach (obj, ListWornFor(game.pov)) {\n      list add (l, GetDisplayGarment(obj))\n    }\n    return (FormatList(l, \",\", \"and\", \"nothing\"))\n</code></pre>\n<blockquote>\n<p>And while were on the subject, how do I prevent a player from putting on layer 1 items if layer 2 items are already on (and the reverse)?</p>\n</blockquote>\n<p>That should be built in.</p>\n\n",
      "PostDate": "2018-10-03T07:47:46.5331038Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0332f7fc-11e9-4591-82d2-72cbeaf660f5",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> And while were on the subject, how do I prevent a player from putting on layer 1 items if layer 2 items are already on (and the reverse)?\r\n\r\nYou put them in the same slot.\r\n\r\nA wearable item's \"slot\" tells Quest which items cover each other up. So making underwear a separate slot tells Quest that it will only be covered up by other underwear, and you can see it even if the player is wearing clothes as well.\r\n\r\nYou need to change the slot on both items to \"clothes\".\r\n\r\nThen, you won't be able to take your underwear off without removing the jumpsuit first. And `GetOuterFor (player, \"clothes\")` will return the outermost object in that slot.\r\n\r\n> Also, I so not want the bottom layer of clothing displayed in the inventory pane.\r\n\r\nYou could have a turnscript to do something like:\r\n```\r\nouterclothes = NewStringList()\r\nunderclothes = FilterByAttribute (ScopeInventory(), \"worn\", true)\r\nforeach (garment, ListVisibleFor(player)) {\r\n  garment.scenery = false\r\n  list add (outerclothes, GetDisplayGarment(garment))\r\n  list remove (underclothes, garment)\r\n}\r\nforeach (garment, underclothes) {\r\n  garment.scenery = true\r\n}\r\nplayer.visibleclothes = FormatList (outerclothes, \", \", \", and\", \"nothing\")\r\n```\r\n\r\nThis makes your underwear into scenery (I _think_ the latest version of quest makes the scenery flag work for the inventory. If not, you'd have to change it to `garment.visible`, and there might be a little extra code needed)\r\n\r\nIt also sets up a string attribute, so in your description you can just say `\"You are wearing {player.visibleclothes}.\"`\r\n\r\nIf you're going to have other clothes you can find later, it probably makes more sense to come up with a set of slots representing parts of the body. So the slot for the underwear would be \"legs\", and the slot for the jumpsuit would be both \"legs\" and \"chest\".",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>And while were on the subject, how do I prevent a player from putting on layer 1 items if layer 2 items are already on (and the reverse)?</p>\n</blockquote>\n<p>You put them in the same slot.</p>\n<p>A wearable item's \"slot\" tells Quest which items cover each other up. So making underwear a separate slot tells Quest that it will only be covered up by other underwear, and you can see it even if the player is wearing clothes as well.</p>\n<p>You need to change the slot on both items to \"clothes\".</p>\n<p>Then, you won't be able to take your underwear off without removing the jumpsuit first. And <code>GetOuterFor (player, \"clothes\")</code> will return the outermost object in that slot.</p>\n<blockquote>\n<p>Also, I so not want the bottom layer of clothing displayed in the inventory pane.</p>\n</blockquote>\n<p>You could have a turnscript to do something like:</p>\n<pre><code>outerclothes = NewStringList()\nunderclothes = FilterByAttribute (ScopeInventory(), \"worn\", true)\nforeach (garment, ListVisibleFor(player)) {\n  garment.scenery = false\n  list add (outerclothes, GetDisplayGarment(garment))\n  list remove (underclothes, garment)\n}\nforeach (garment, underclothes) {\n  garment.scenery = true\n}\nplayer.visibleclothes = FormatList (outerclothes, \", \", \", and\", \"nothing\")\n</code></pre>\n<p>This makes your underwear into scenery (I <em>think</em> the latest version of quest makes the scenery flag work for the inventory. If not, you'd have to change it to <code>garment.visible</code>, and there might be a little extra code needed)</p>\n<p>It also sets up a string attribute, so in your description you can just say <code>\"You are wearing {player.visibleclothes}.\"</code></p>\n<p>If you're going to have other clothes you can find later, it probably makes more sense to come up with a set of slots representing parts of the body. So the slot for the underwear would be \"legs\", and the slot for the jumpsuit would be both \"legs\" and \"chest\".</p>\n\n",
      "PostDate": "2018-10-03T08:31:44.4525103Z",
      "LastEditDate": "2018-10-03T08:57:57.3142885Z",
      "link": null
    },
    {
      "PostId": "c4a0dddd-4959-49a0-b8d0-e2318d35a3b0",
      "UserId": 378821,
      "Username": "Svarii",
      "AvatarUrl": "https://i.imgur.com/cJ10zyPb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks everyone.  I've gotten pixies half to work basically exactly as posted.  (Have not worked on angels half yet)\r\n\r\nI'm trying to apply the same thing to NPC but it keeps saying there are wearing nothing.\r\n\r\nI have an NPC named Captain\r\n\r\nI think the problem is I don't know how to pass the Captain object to the function.  \r\n\r\nI tried to just change game.pov to Captain, this, this.Captain, ect\r\n(The script is on the NPC, \"Captain\")\r\n\r\nWhat is it suppose to be?",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks everyone.  I've gotten pixies half to work basically exactly as posted.  (Have not worked on angels half yet)</p>\n<p>I'm trying to apply the same thing to NPC but it keeps saying there are wearing nothing.</p>\n<p>I have an NPC named Captain</p>\n<p>I think the problem is I don't know how to pass the Captain object to the function.</p>\n<p>I tried to just change game.pov to Captain, this, this.Captain, ect<br>\n(The script is on the NPC, \"Captain\")</p>\n<p>What is it suppose to be?</p>\n\n",
      "PostDate": "2018-10-14T22:53:49.3005594Z",
      "LastEditDate": "2018-10-14T22:54:45.4906186Z",
      "link": null
    },
    {
      "PostId": "86ed164c-ce8e-471e-8a4b-a223b02d891c",
      "UserId": 378821,
      "Username": "Svarii",
      "AvatarUrl": "https://i.imgur.com/cJ10zyPb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So I found the function GetObject and changed game.pov to GetObject(Captain) which I thought would work but it says:\r\nError running script: Error Compiling expression.\r\nListWornFor(GetObject(Captain)) : FunctionCallElement: Could not find function GetObject(Element)\r\n\r\nI know this is something really simple but it's eluding me.\r\nHelp!",
      "EditableFormat": "markdown",
      "HTML": "<p>So I found the function GetObject and changed game.pov to GetObject(Captain) which I thought would work but it says:<br>\nError running script: Error Compiling expression.<br>\nListWornFor(GetObject(Captain)) : FunctionCallElement: Could not find function GetObject(Element)</p>\n<p>I know this is something really simple but it's eluding me.<br>\nHelp!</p>\n\n",
      "PostDate": "2018-10-16T06:57:28.8544093Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ebb7b79e-616e-4b03-a4a1-765eada350ce",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "GetObject turns a string containing an object (like `\"Captain\"`) into an object (`Captain`). You don't need to use it because your captain is already an object.\r\n\r\nMy script should just work if you change `game.pov` to `Captain`.\r\n\r\nIf it says he is wearing nothing, have you checked that he's actually wearing the items? Are the clothes inside the captain, and do they all have their `worn` attribute set to `true`?",
      "EditableFormat": "markdown",
      "HTML": "<p>GetObject turns a string containing an object (like <code>\"Captain\"</code>) into an object (<code>Captain</code>). You don't need to use it because your captain is already an object.</p>\n<p>My script should just work if you change <code>game.pov</code> to <code>Captain</code>.</p>\n<p>If it says he is wearing nothing, have you checked that he's actually wearing the items? Are the clothes inside the captain, and do they all have their <code>worn</code> attribute set to <code>true</code>?</p>\n\n",
      "PostDate": "2018-10-16T09:24:11.394544Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b8a11f13-7747-4ab6-b097-734aeacd22c9",
      "UserId": 378821,
      "Username": "Svarii",
      "AvatarUrl": "https://i.imgur.com/cJ10zyPb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I knew it was something simple.\r\nIt was the worn attribute.\r\nThanks!",
      "EditableFormat": "markdown",
      "HTML": "<p>I knew it was something simple.<br>\nIt was the worn attribute.<br>\nThanks!</p>\n\n",
      "PostDate": "2018-10-16T18:19:02.2368925Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
