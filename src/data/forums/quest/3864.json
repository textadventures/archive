{
  "Topic": {
    "TopicId": "3864",
    "ForumId": "10",
    "Title": "Updating a combat library on the wiki.",
    "LastUpdated": "2013-08-15T06:10:38+01:00",
    "ReplyCount": 1
  },
  "Posts": [
    {
      "PostId": "25863",
      "UserId": 0,
      "Username": "DokaNoker",
      "UserAvatar": null,
      "UserGravatar": "df6e32f0b7bdbdee2a0ffe48c7e30092",
      "EditableText": "Hi\nI use the Demo combat system on the wiki, but since i cannot be killed, i need help on how to update the library so it actually kills you\nHere's the code:\n[code:2ei1norn]&lt;?xml version=&quot;1&#46;0&quot;?&gt;\n&lt;library&gt;\n\n\n  &lt;!--\n  This library adds a basic magic system to quest&#46; It allows for three types of spells&#58;\n\n  nonattackspell&#58; Instant effect\n  lastingspell&#58; An on-going spell&#46; These last until another spell is cast\n  attackspell&#58; Instant effect, attacking anything of the &quot;monster&quot; type that is not dead\n\n  Attack spells must be of an element, and eight are already set up&#46; Monsters\n  can be assigned to elements too; they will be immune to that element, but take\n  four-fold damage from the opposed element&#46;\n\n  A &quot;Magic&quot; tab is added to the editor to make setting up spells and monsters as easy as possible&#46;\n  --&gt;\n\n  &lt;!--\n  Adding new elements involves a bit of effort&#46; This system requires that elements are added in pairs or opposites,\n  such as fire and frost&#46;\n  1&#46; Create a new type for both elements, named &#91;elemem&#93;_type\n  2&#46; In the data section, the object element_struct needs both elements added to both &quot;elements&quot; and\n      &quot;opposedelements&quot;, and for the latter you need to put them in both ways around (look at existing entries)\n  3&#46; You need to add both elements to the tab, both for &quot;monster&quot; and for &quot;attackspell&quot;&#46; Again, see existing\n      entries&#46;\n  --&gt;\n\n\n  &lt;!-- =================================================== --&gt;\n  &lt;!-- Templates --&gt;\n\n  &lt;!--\n  Using templates makes it easier to convert to other languages, but also for other users to word it how they want it&#46;\n  When templates are in the library that uses them (as here) the way to change the language is to\n  modify the template in the library, so really the only benefit is that all the text is together here&#46;\n  Also modify the default responses in the verbs!\n  --&gt;\n\n  &lt;template name=&quot;Learn&quot;&gt;learn&lt;/template&gt;\n  &lt;template name=&quot;Cast&quot;&gt;cast&lt;/template&gt;\n\n  &lt;template name=&quot;LookDead&quot;&gt;Oh, and it is dead&#46;&lt;/template&gt;\n  &lt;template name=&quot;SpellAlreadyKnown&quot;&gt;Er, you already know that one!&lt;/template&gt;\n  &lt;template name=&quot;SpellNotKnown&quot;&gt;Er, you don't know that one!&lt;/template&gt;\n  &lt;template name=&quot;NoMonstersPresent&quot;&gt;No monsters present&lt;/template&gt;\n\n  &lt;dynamictemplate name=&quot;SpellEnds&quot;&gt;&lt;!&#91;CDATA&#91;&quot;The &lt;i&gt;&quot; + GetDisplayAlias(object) + &quot;&lt;/i&gt; spell ends&#46;&quot;&#93;&#93;&gt;&lt;/dynamictemplate&gt;\n  &lt;dynamictemplate name=&quot;SpellCast&quot;&gt;&lt;!&#91;CDATA&#91;&quot;You cast &lt;i&gt;&quot; + GetDisplayAlias(object) + &quot;&lt;/i&gt;&#46;&quot;&#93;&#93;&gt;&lt;/dynamictemplate&gt;\n  &lt;dynamictemplate name=&quot;SpellLearnt&quot;&gt;&lt;!&#91;CDATA&#91;&quot;In a process that seems at once unfathomable, and yet familiar, the spell fades away, and you realise you are now able to cast the &lt;i&gt;&quot; + GetDisplayAlias(object) + &quot;&lt;/i&gt; spell&#46;&quot;&#93;&#93;&gt;&lt;/dynamictemplate&gt;\n\n\n\n  &lt;!-- =================================================== --&gt;\n  &lt;!-- Verbs --&gt;\n\n  &lt;verb&gt;\n    &lt;property&gt;learn&lt;/property&gt;\n    &lt;pattern&gt;&#91;Learn&#93;&lt;/pattern&gt;\n    &lt;defaultexpression&gt;&quot;You can't learn &quot; + object&#46;article + &quot;&#46;&quot;&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;cast&lt;/property&gt;\n    &lt;pattern&gt;&#91;Cast&#93;&lt;/pattern&gt;\n    &lt;defaultexpression&gt;&quot;You can't cast &quot; + object&#46;article + &quot;&#46;&quot;&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n\n  &lt;verb&gt;\n    &lt;property&gt;attack&lt;/property&gt;\n    &lt;pattern&gt;attack;fight;strike;kill&lt;/pattern&gt;\n    &lt;defaultexpression&gt;&quot;You can't attack &quot; + object&#46;article + &quot;&#46;&quot;&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n\n  &lt;verb&gt;\n    &lt;property&gt;equip&lt;/property&gt;\n    &lt;pattern&gt;equip;draw&lt;/pattern&gt;\n    &lt;defaultexpression&gt;&quot;You can't draw &quot; + object&#46;article + &quot;&#46;&quot;&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;unequip&lt;/property&gt;\n    &lt;pattern&gt;unequip;sheathe&lt;/pattern&gt;\n    &lt;defaultexpression&gt;&quot;You can't sheathe &quot; + object&#46;article + &quot;&#46;&quot;&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n\n  &lt;!-- =================================================== --&gt;\n  &lt;!-- Functions --&gt;\n\n  &lt;!--\n  Handles an attack on the given monster, using the given spell&#46;\n  Monster loses hit points according to the spell's powerrating&#46;\n  If they share an element, then no damage, if elements are opposed, damage is multplied by 4\n  Handles monsters with no elements too, but spell must have an element set&#46;\n  --&gt;\n  &lt;function name=&quot;SpellAttackMonster&quot; parameters=&quot;monster, spell&quot;&gt;&lt;!&#91;CDATA&#91;\n    do (monster, &quot;settoattack&quot;)\n    element = GetElement (monster)\n    handled = False\n    if (not element = Null) {\n      if (DoesInherit (spell, element + &quot;_type&quot;)) {\n        msg (&quot;&#46;&#46;&#46; &quot; + monster&#46;ignoreselement)\n        handled = True\n      }\n      msg (&quot;looking for &quot; + element)\n      if (DoesInherit (spell, StringDictionaryItem (element_struct&#46;opposedelements, element) + &quot;_type&quot;)) {\n        monster&#46;hitpoints = monster&#46;hitpoints -  4 * spell&#46;powerrating\n        handled = True\n        if (monster&#46;hitpoints &gt; 0) {\n          msg (&quot;&#46;&#46;&#46; &quot; + monster&#46;hurtbyelement)\n        }\n        else {\n          msg (&quot;&#46;&#46;&#46; &quot; + monster&#46;deathbyelement)\n          do (monster, &quot;makedead&quot;)\n        }\n      }\n    }\n\n    if (not handled) {\n      monster&#46;hitpoints = monster&#46;hitpoints -  spell&#46;powerrating\n      if (monster&#46;hitpoints &gt; 0) {\n        msg (&quot;&#46;&#46;&#46; &quot; + monster&#46;hurt)\n      }\n      else {\n        msg (&quot;&#46;&#46;&#46; &quot; + monster&#46;death)\n        do (monster, &quot;makedead&quot;)\n      }\n    }\n  &#93;&#93;&gt;&lt;/function&gt;\n\n\n  &lt;!--\n  Call this when a spell is cast, to ensure any on-going spells\n  are terminated&#46;\n  --&gt;\n  &lt;function name=&quot;CancelSpell&quot;&gt;&lt;!&#91;CDATA&#91;\n    if (HasObject (game&#46;pov, &quot;currentspell&quot;)) {\n      spell = game&#46;pov&#46;currentspell\n      msg (DynamicTemplate(&quot;SpellEnds&quot;, spell))\n      game&#46;pov&#46;currentspell = null\n      if (HasScript (spell, &quot;terminate&quot;)) {\n        do (spell, &quot;terminate&quot;)\n      }\n    }\n  &#93;&#93;&gt;&lt;/function&gt;\n\n\n\n\n  &lt;!--\n  Returns as a string the name of this object's element (or null)&#46;\n  --&gt;\n  &lt;function name=&quot;GetElement&quot; parameters=&quot;obj&quot; type=&quot;string&quot;&gt;&lt;!&#91;CDATA&#91;\n    result = Null\n    foreach (element, element_struct&#46;elements) {\n     type = element + &quot;_type&quot;\n      if (DoesInherit (obj, type)) {\n        result = element\n      }\n    }\n    return (result)\n  &#93;&#93;&gt;&lt;/function&gt;\n\n\n  &lt;!--\n  Describes casting\n  --&gt;\n  &lt;function name=&quot;DescribeCast&quot; parameters=&quot;spell&quot;&gt;&lt;!&#91;CDATA&#91;\n        if (HasString (spell, &quot;description&quot;)) {\n          msg (DynamicTemplate(&quot;SpellCast&quot;, spell) + &quot; &quot; + spell&#46;description)\n        }\n        else {\n          msg (DynamicTemplate(&quot;SpellCast&quot;, spell))\n        }\n  &#93;&#93;&gt;&lt;/function&gt;\n\n\n\n  &lt;!-- =================================================== --&gt;\n  &lt;!-- Turn Scripts --&gt;\n\n\n\n  &lt;turnscript name=&quot;attacktheplayerturnscript&quot;&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      foreach (attacker, element_struct&#46;attackers) {\n        do (attacker, &quot;attackplayer&quot;)\n      }\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n\n\n\n  &lt;!-- =================================================== --&gt;\n  &lt;!-- Object types --&gt;\n\n  &lt;type name=&quot;spell&quot;&gt;\n    &lt;displayverbs type=&quot;stringlist&quot;&gt;\n      &lt;value&gt;Learn&lt;/value&gt;\n    &lt;/displayverbs&gt;\n    &lt;inventoryverbs type=&quot;stringlist&quot;&gt;\n      &lt;value&gt;Learn&lt;/value&gt;\n    &lt;/inventoryverbs&gt;\n    &lt;drop type=&quot;boolean&quot;&gt;false&lt;/drop&gt;\n    &lt;take type=&quot;boolean&quot;&gt;false&lt;/take&gt;\n    &lt;usedefaultprefix type=&quot;boolean&quot;&gt;false&lt;/usedefaultprefix&gt;\n    &lt;learn type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      if (not this&#46;parent = game&#46;pov) {\n        this&#46;parent = game&#46;pov\n        this&#46;inventoryverbs = Split (&quot;Cast&quot;, &quot; &quot;)\n        msg (DynamicTemplate(&quot;SpellLearnt&quot;, this))\n      }\n      else {\n        msg (&quot;&#91;SpellAlreadyKnown&#93;&quot;)\n      }\n    &#93;&#93;&gt;&lt;/learn&gt;\n  &lt;/type&gt;\n\n\n\n  &lt;type name=&quot;attackspell&quot;&gt;\n    &lt;inherit name=&quot;spell&quot;/&gt;\n    &lt;cast type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      // Check the player has the spell\n      // If so iterate through all objects in the room\n      // Apply attack to those with the monster type that are not dead\n      if (this&#46;parent = game&#46;pov) {\n        DescribeCast (this)\n        flag = False\n        foreach (obj, ScopeVisibleNotHeld ()) {\n          if (DoesInherit (obj, &quot;monster&quot;) and not GetBoolean (obj, &quot;dead&quot;)) {\n            SpellAttackMonster (obj, this)\n            flag = True\n          }\n        }\n        if (not flag) {\n          msg (&quot;&#46;&#46;&#46; &#91;NoMonstersPresent&#93;&quot;)\n        }\n        CancelSpell ()\n      }\n      else {\n        msg (&quot;&#91;SpellNotKnown&#93;&quot;)\n      }\n    &#93;&#93;&gt;&lt;/cast&gt;\n  &lt;/type&gt;\n\n\n  &lt;type name=&quot;nonattackspell&quot;&gt;\n    &lt;inherit name=&quot;spell&quot;/&gt;\n    &lt;cast type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      if (this&#46;parent = game&#46;pov) {\n        DescribeCast (this)\n        do (this, &quot;spelleffect&quot;)\n        CancelSpell ()\n      }\n      else {\n        msg (&quot;&#91;SpellNotKnown&#93;&quot;)\n      }\n    &#93;&#93;&gt;&lt;/cast&gt;\n  &lt;/type&gt;\n\n\n  &lt;type name=&quot;lastingspell&quot;&gt;\n    &lt;inherit name=&quot;spell&quot;/&gt;\n    &lt;cast type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      if (this&#46;parent = game&#46;pov) {\n        DescribeCast (this)\n        do (this, &quot;spelleffect&quot;)\n        CancelSpell ()\n        game&#46;pov&#46;currentspell = this\n        game&#46;pov&#46;status = this&#46;status\n      }\n      else {\n        msg (&quot;&#91;SpellNotKnown&#93;&quot;)\n      }\n    &#93;&#93;&gt;&lt;/cast&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;weapon&quot;&gt;\n    &lt;attackbonus type=&quot;int&quot;&gt;0&lt;/attackbonus&gt;\n    &lt;damagebonus type=&quot;int&quot;&gt;0&lt;/damagebonus&gt;\n    &lt;damagedicenumber type=&quot;int&quot;&gt;1&lt;/damagedicenumber&gt;\n    &lt;damagedicesides type=&quot;int&quot;&gt;4&lt;/damagedicesides&gt;\n    &lt;take /&gt;\n    &lt;inventoryverbs type=&quot;stringlist&quot;&gt;\n      &lt;value&gt;Look at&lt;/value&gt;\n      &lt;value&gt;Drop&lt;/value&gt;\n      &lt;value&gt;Equip&lt;/value&gt;\n    &lt;/inventoryverbs&gt;\n    &lt;equip type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      if (this&#46;parent = game&#46;pov) {\n        if (not game&#46;pov&#46;equipped = fists and not game&#46;pov&#46;equipped = null) {\n          msg (&quot;You put away your &quot; + game&#46;pov&#46;equipped&#46;alias + &quot; and draw your &quot; + this&#46;alias + &quot;&#46;&quot;)\n        }\n        else {\n          msg (&quot;You draw your &quot; + this&#46;alias + &quot;&#46;&quot;)\n        }\n        game&#46;pov&#46;equipped = this\n        this&#46;inventoryverbs = Split (&quot;Look at;Drop;Unequip&quot;, &quot;;&quot;)\n        game&#46;pov&#46;equippedstatus = &quot;Wielding&#58; &quot; + this&#46;alias\n      }\n      else {\n        msg (&quot;You don't have it&#46;&quot;)\n      }\n    &#93;&#93;&gt;&lt;/equip&gt;\n    &lt;unequip type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      if (this&#46;parent = game&#46;pov) {\n        msg (&quot;You put away your &quot; + game&#46;pov&#46;equipped&#46;alias + &quot;&#46;&quot;)\n        game&#46;pov&#46;equipped = fists\n        this&#46;inventoryverbs = Split (&quot;Look at;Drop;Equip&quot;, &quot;;&quot;)\n        game&#46;pov&#46;equippedstatus = &quot;Wielding&#58; nothing&quot;\n      }\n      else {\n        msg (&quot;You don't have it&#46;&quot;)\n      }\n    &#93;&#93;&gt;&lt;/unequip&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;fire_type&quot;&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;frost_type&quot;&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;storm_type&quot;&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;earthmight_type&quot;&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;shadow_type&quot;&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;rainbow_type&quot;&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;divine_type&quot;&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;necrotic_type&quot;&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;monster&quot;&gt;\n    &lt;inherit name=&quot;weapon&quot;/&gt;\n    &lt;defence type=&quot;int&quot;&gt;0&lt;/defence&gt;\n    &lt;armour type=&quot;int&quot;&gt;0&lt;/armour&gt;\n    &lt;hitpoints type=&quot;int&quot;&gt;10&lt;/hitpoints&gt;\n    &lt;take type=&quot;boolean&quot;&gt;false&lt;/take&gt;\n    &lt;displayverbs type=&quot;stringlist&quot;&gt;\n      &lt;value&gt;Look at&lt;/value&gt;\n      &lt;value&gt;Attack&lt;/value&gt;\n    &lt;/displayverbs&gt;\n    &lt;!-- Call this when a monster dies for some housekeeping --&gt;\n    &lt;makedead type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      if (not GetBoolean (this, &quot;dead&quot;)) {\n        this&#46;alias = this&#46;alias + &quot; (dead)&quot;\n        if (HasString (this, &quot;lookwhendead&quot;)) {\n          monster&#46;look = this&#46;lookwhendead\n        }\n        else {\n          this&#46;look = this&#46;look + &quot; &#91;LookDead&#93;&quot;\n        }\n        this&#46;dead = True\n        list remove (element_struct&#46;attackers, this)\n      }\n    &#93;&#93;&gt;&lt;/makedead&gt;\n    &lt;attack type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      if (not HasAttribute (game&#46;pov, &quot;equipped&quot;)) {\n        game&#46;pov&#46;equipped = fists\n      }\n      do (this, &quot;settoattack&quot;)\n      attackroll = GetRandomInt (1, 20) - this&#46;defence + game&#46;pov&#46;attack\n      attackroll = attackroll + game&#46;pov&#46;equipped&#46;attackbonus\n      if (attackroll &gt; 10) {\n        damage = game&#46;pov&#46;equipped&#46;damagebonus\n        for (i, 1, game&#46;pov&#46;equipped&#46;damagedicenumber) {\n          damage = damage + GetRandomInt (1, game&#46;pov&#46;equipped&#46;damagedicesides) - this&#46;armour\n        }\n        this&#46;hitpoints = this&#46;hitpoints - damage\n        if (this&#46;hitpoints &gt; 0) {\n          msg (&quot;You swing &quot; + game&#46;pov&#46;equipped&#46;alias + &quot; and hit, doing &quot; + damage + &quot; points of damage; &quot; + this&#46;hurt)\n        }\n        else {\n          msg (&quot;You swing your &quot; + game&#46;pov&#46;equipped&#46;alias + &quot; and hit, doing &quot; + damage + &quot; points of damage; &quot; + this&#46;death)\n          do (this, &quot;makedead&quot;)\n        }\n      }\n      else {\n        msg (&quot;You swing your &quot; + game&#46;pov&#46;equipped&#46;alias + &quot; and miss&#46;&quot;)\n      }\n    &#93;&#93;&gt;&lt;/attack&gt;\n    &lt;attackplayer type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      attackroll = GetRandomInt (1, 20) - game&#46;pov&#46;defence + this&#46;attackbonus\n      if (attackroll &gt; 10) {\n        damage = this&#46;damagebonus\n        for (i, 1, this&#46;damagedicenumber) {\n          damage = damage + GetRandomInt (1, this&#46;damagedicesides) - game&#46;pov&#46;armour\n        }\n        game&#46;pov&#46;hitpoints = game&#46;pov&#46;hitpoints - damage\n        msg (this&#46;alias + &quot; swings at you and hits, doing &quot; + damage + &quot; points of damage&#46;&quot;)\n        if (this&#46;hitpoints &lt;= 0) {\n          msg (&quot;You are dead!&quot;)\n          finish\n        }\n      }\n      else {\n        msg (this&#46;alias + &quot; swings at you and misses&#46;&quot;)\n      }\n    &#93;&#93;&gt;&lt;/attackplayer&gt;\n    &lt;settoattack type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      if (not ListContains (element_struct&#46;attackers, this) and not GetBoolean (this, &quot;dead&quot;)) {\n        list add (element_struct&#46;attackers, this)\n      }\n    &#93;&#93;&gt;&lt;/settoattack&gt;\n  &lt;/type&gt;\n\n  &lt;type name=&quot;monsterarcher&quot;&gt;\n    &lt;inherit name=&quot;monster&quot;/&gt;\n    &lt;attackplayer type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      attackroll = GetRandomInt (1, 20) - game&#46;pov&#46;defence + this&#46;attackbonus\n      if (attackroll &gt; 10) {\n        damage = this&#46;damagebonus\n        for (i, 1, this&#46;damagedicenumber) {\n          damage = damage + GetRandomInt (1, this&#46;damagedicesides) - game&#46;pov&#46;armour\n        }\n        game&#46;pov&#46;hitpoints = game&#46;pov&#46;hitpoints - damage\n        msg (this&#46;alias + &quot; shoots an arrow at you and hits, doing &quot; + damage + &quot; points of damage&#46;&quot;)\n        if (this&#46;hitpoints &lt;= 0) {\n          msg (&quot;You are dead!&quot;)\n          finish\n        }\n      }\n      else {\n        msg (this&#46;alias + &quot; shoots an arrow at you and misses&#46;&quot;)\n      }\n    &#93;&#93;&gt;&lt;/attackplayer&gt;\n  &lt;/type&gt;\n\n\n\n  &lt;!-- =================================================== --&gt;\n  &lt;!-- Data --&gt;\n\n  &lt;!--\n  This is a data store for elements (I call it a &quot;struct&quot; after the keyword in the C programming language)\n  If you add more elements to the name, you need to add them to both lists as well as creating a new type&#46;\n  Note that your new type must end &quot;_type&quot;, but that must not be included on these lists&#46;\n  --&gt;\n  &lt;object name=&quot;element_struct&quot;&gt;\n    &lt;elements type=&quot;stringlist&quot;&gt;\n      &lt;value&gt;fire&lt;/value&gt;\n      &lt;value&gt;frost&lt;/value&gt;\n      &lt;value&gt;storm&lt;/value&gt;\n      &lt;value&gt;earthmight&lt;/value&gt;\n      &lt;value&gt;shadow&lt;/value&gt;\n      &lt;value&gt;rainbow&lt;/value&gt;\n      &lt;value&gt;divine&lt;/value&gt;\n      &lt;value&gt;necrotic&lt;/value&gt;\n    &lt;/elements&gt;\n    &lt;opposedelements type=&quot;stringdictionary&quot;&gt;\n\t    &lt;item&gt;\n\t      &lt;key&gt;fire&lt;/key&gt;\n\t      &lt;value&gt;frost&lt;/value&gt;\n\t    &lt;/item&gt;\n\t    &lt;item&gt;\n\t      &lt;key&gt;frost&lt;/key&gt;\n\t      &lt;value&gt;fire&lt;/value&gt;\n\t    &lt;/item&gt;\n\t    &lt;item&gt;\n\t      &lt;key&gt;storm&lt;/key&gt;\n\t      &lt;value&gt;earthmight&lt;/value&gt;\n\t    &lt;/item&gt;\n\t    &lt;item&gt;\n\t      &lt;key&gt;earthmight&lt;/key&gt;\n\t      &lt;value&gt;storm&lt;/value&gt;\n\t    &lt;/item&gt;\n\t    &lt;item&gt;\n\t      &lt;key&gt;shadow&lt;/key&gt;\n\t      &lt;value&gt;rainbow&lt;/value&gt;\n\t    &lt;/item&gt;\n\t    &lt;item&gt;\n\t      &lt;key&gt;rainbow&lt;/key&gt;\n\t      &lt;value&gt;shadow&lt;/value&gt;\n\t    &lt;/item&gt;\n\t    &lt;item&gt;\n\t      &lt;key&gt;divine&lt;/key&gt;\n\t      &lt;value&gt;necrotic&lt;/value&gt;\n\t    &lt;/item&gt;\n\t    &lt;item&gt;\n\t      &lt;key&gt;necrotic&lt;/key&gt;\n\t      &lt;value&gt;divine&lt;/value&gt;\n\t    &lt;/item&gt;\n\t  &lt;/opposedelements&gt;\n    &lt;attackers type=&quot;objectlist&quot; /&gt;\n  &lt;/object&gt;\n\n\n  &lt;object name=&quot;fists&quot;&gt;\n    &lt;inherit name=&quot;weapon&quot; /&gt;\n    &lt;alias&gt;fist&lt;/alias&gt;\n  &lt;/object&gt;\n\n\n\n  &lt;!-- =================================================== --&gt;\n  &lt;!-- Tabs --&gt;\n\n  &lt;tab&gt;\n    &lt;parent&gt;_ObjectEditor&lt;/parent&gt;\n    &lt;caption&gt;Combat&lt;/caption&gt;\n    &lt;mustnotinherit&gt;editor_room; defaultplayer&lt;/mustnotinherit&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;dropdowntypes&lt;/controltype&gt;\n      &lt;caption&gt;Type&lt;/caption&gt;\n      &lt;types&gt;*=None; nonattackspell=Non-attack spell; lastingspell=Lasting spell; attackspell=Attack spell; monster=Monster; monsterarcher=Monster with bow; weapon=Weapon&lt;/types&gt;\n      &lt;width&gt;150&lt;/width&gt;\n    &lt;/control&gt;\n\n\n\n    &lt;control&gt;\n      &lt;controltype&gt;title&lt;/controltype&gt;\n      &lt;caption&gt;Non-Attack Spell&lt;/caption&gt;\n      &lt;mustinherit&gt;nonattackspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;textbox&lt;/controltype&gt;\n      &lt;caption&gt;Description (optional)&lt;/caption&gt;\n      &lt;attribute&gt;description&lt;/attribute&gt;\n      &lt;mustinherit&gt;nonattackspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;script&lt;/controltype&gt;\n      &lt;caption&gt;Spell effect&lt;/caption&gt;\n      &lt;attribute&gt;spelleffect&lt;/attribute&gt;\n      &lt;mustinherit&gt;nonattackspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n\n\n    &lt;control&gt;\n      &lt;controltype&gt;title&lt;/controltype&gt;\n      &lt;caption&gt;Lasting Spell&lt;/caption&gt;\n      &lt;mustinherit&gt;lastingspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;textbox&lt;/controltype&gt;\n      &lt;caption&gt;Description (optional)&lt;/caption&gt;\n      &lt;attribute&gt;description&lt;/attribute&gt;\n      &lt;mustinherit&gt;lastingspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;textbox&lt;/controltype&gt;\n      &lt;caption&gt;Status when active&lt;/caption&gt;\n      &lt;attribute&gt;status&lt;/attribute&gt;\n      &lt;mustinherit&gt;lastingspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;script&lt;/controltype&gt;\n      &lt;caption&gt;Spell effect&lt;/caption&gt;\n      &lt;attribute&gt;spelleffect&lt;/attribute&gt;\n      &lt;mustinherit&gt;lastingspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;script&lt;/controltype&gt;\n      &lt;caption&gt;Cacel spell effect&lt;/caption&gt;\n      &lt;attribute&gt;terminate&lt;/attribute&gt;\n      &lt;mustinherit&gt;lastingspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n\n\n    &lt;control&gt;\n      &lt;controltype&gt;title&lt;/controltype&gt;\n      &lt;caption&gt;Attack Spell&lt;/caption&gt;\n      &lt;mustinherit&gt;attackspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;number&lt;/controltype&gt;\n      &lt;caption&gt;Power of attack (1-10)&lt;/caption&gt;\n      &lt;attribute&gt;powerrating&lt;/attribute&gt;\n      &lt;width&gt;100&lt;/width&gt;\n      &lt;mustinherit&gt;attackspell&lt;/mustinherit&gt;\n      &lt;minimum&gt;0&lt;/minimum&gt;\n      &lt;maximum&gt;10&lt;/maximum&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;textbox&lt;/controltype&gt;\n      &lt;caption&gt;Description (optional)&lt;/caption&gt;\n      &lt;attribute&gt;description&lt;/attribute&gt;\n      &lt;mustinherit&gt;attackspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;dropdowntypes&lt;/controltype&gt;\n      &lt;caption&gt;Element&lt;/caption&gt;\n      &lt;types&gt;*=None; fire_type=Fire; frost_type=Frost; storm_type=Storm; earthmight_type=Earthmight; shadow_type=Shadow; rainbow_type=Rainbow; necrotic_type=Necrotic; divine_type=Divine&lt;/types&gt;\n      &lt;width&gt;150&lt;/width&gt;\n      &lt;mustinherit&gt;attackspell&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n\n\n    &lt;control&gt;\n      &lt;controltype&gt;title&lt;/controltype&gt;\n      &lt;caption&gt;Monster&lt;/caption&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;dropdowntypes&lt;/controltype&gt;\n      &lt;caption&gt;Element&lt;/caption&gt;\n      &lt;types&gt;*=None; fire_type=Fire; frost_type=Frost; storm_type=Storm; earthmight_type=Earthmight; shadow_type=Shadow; rainbow_type=Rainbow; necrotic_type=Necrotic; divine_type=Divine&lt;/types&gt;\n      &lt;width&gt;150&lt;/width&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;number&lt;/controltype&gt;\n      &lt;caption&gt;Hit points&lt;/caption&gt;\n      &lt;attribute&gt;hitpoints&lt;/attribute&gt;\n      &lt;width&gt;100&lt;/width&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n      &lt;minimum&gt;1&lt;/minimum&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;number&lt;/controltype&gt;\n      &lt;caption&gt;Defence&lt;/caption&gt;\n      &lt;attribute&gt;defence&lt;/attribute&gt;\n      &lt;width&gt;100&lt;/width&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n      &lt;minimum&gt;0&lt;/minimum&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;number&lt;/controltype&gt;\n      &lt;caption&gt;Armour&lt;/caption&gt;\n      &lt;attribute&gt;armour&lt;/attribute&gt;\n      &lt;width&gt;100&lt;/width&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n      &lt;minimum&gt;0&lt;/minimum&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;textbox&lt;/controltype&gt;\n      &lt;caption&gt;Description on injury&lt;/caption&gt;\n      &lt;attribute&gt;hurt&lt;/attribute&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;textbox&lt;/controltype&gt;\n      &lt;caption&gt;Description on death&lt;/caption&gt;\n      &lt;attribute&gt;death&lt;/attribute&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;textbox&lt;/controltype&gt;\n      &lt;caption&gt;Description on injury by opposed element&lt;/caption&gt;\n      &lt;attribute&gt;hurtbyelement&lt;/attribute&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;textbox&lt;/controltype&gt;\n      &lt;caption&gt;Description on death by opposed element&lt;/caption&gt;\n      &lt;attribute&gt;deathbyelement&lt;/attribute&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;textbox&lt;/controltype&gt;\n      &lt;caption&gt;Description on ignore&lt;/caption&gt;\n      &lt;attribute&gt;ignoreselement&lt;/attribute&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;textbox&lt;/controltype&gt;\n      &lt;caption&gt;Look (when dead)&lt;/caption&gt;\n      &lt;attribute&gt;lookwhendead&lt;/attribute&gt;\n      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\n    &lt;control&gt;\n      &lt;controltype&gt;number&lt;/controltype&gt;\n      &lt;caption&gt;Attack bonus&lt;/caption&gt;\n      &lt;attribute&gt;attackbonus&lt;/attribute&gt;\n      &lt;width&gt;100&lt;/width&gt;\n      &lt;mustinherit&gt;weapon&lt;/mustinherit&gt;\n      &lt;minimum&gt;0&lt;/minimum&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;number&lt;/controltype&gt;\n      &lt;caption&gt;Damage Dice No&#46;&lt;/caption&gt;\n      &lt;attribute&gt;damagedicenumber&lt;/attribute&gt;\n      &lt;width&gt;100&lt;/width&gt;\n      &lt;mustinherit&gt;weapon&lt;/mustinherit&gt;\n      &lt;minimum&gt;1&lt;/minimum&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;number&lt;/controltype&gt;\n      &lt;caption&gt;Damage Dice Sides&lt;/caption&gt;\n      &lt;attribute&gt;damagedicesides&lt;/attribute&gt;\n      &lt;width&gt;100&lt;/width&gt;\n      &lt;mustinherit&gt;weapon&lt;/mustinherit&gt;\n      &lt;minimum&gt;4&lt;/minimum&gt;\n    &lt;/control&gt;\n    &lt;control&gt;\n      &lt;controltype&gt;number&lt;/controltype&gt;\n      &lt;caption&gt;Damage Bonus&lt;/caption&gt;\n      &lt;attribute&gt;damagebonus&lt;/attribute&gt;\n      &lt;width&gt;100&lt;/width&gt;\n      &lt;mustinherit&gt;weapon&lt;/mustinherit&gt;\n      &lt;minimum&gt;0&lt;/minimum&gt;\n    &lt;/control&gt;\n  &lt;/tab&gt;\n&lt;/library&gt;[/code:2ei1norn]\nAlll i know is this\n[quote=&quot;HegemonKhan&quot;:2ei1norn]try making another monster object (you have to add in the inherited attribute: character_type, for you to be able to fight it, and you'll have to add in a &quot;physical_damage&quot; attribute amount for it to damage you, as the default value is otherwise zero), and type: fight (your monster's name or alias)[/quote:2ei1norn]",
      "EditableFormat": "bbcode",
      "HTML": "Hi<br/>I use the Demo combat system on the wiki, but since i cannot be killed, i need help on how to update the library so it actually kills you<br/>Here's the code:<br/><pre><code>&lt;?xml version=&quot;1&#46;0&quot;?&gt;<br/>&lt;library&gt;<br/><br/><br/>  &lt;!--<br/>  This library adds a basic magic system to quest&#46; It allows for three types of spells&#58;<br/><br/>  nonattackspell&#58; Instant effect<br/>  lastingspell&#58; An on-going spell&#46; These last until another spell is cast<br/>  attackspell&#58; Instant effect, attacking anything of the &quot;monster&quot; type that is not dead<br/><br/>  Attack spells must be of an element, and eight are already set up&#46; Monsters<br/>  can be assigned to elements too; they will be immune to that element, but take<br/>  four-fold damage from the opposed element&#46;<br/><br/>  A &quot;Magic&quot; tab is added to the editor to make setting up spells and monsters as easy as possible&#46;<br/>  --&gt;<br/><br/>  &lt;!--<br/>  Adding new elements involves a bit of effort&#46; This system requires that elements are added in pairs or opposites,<br/>  such as fire and frost&#46;<br/>  1&#46; Create a new type for both elements, named &#91;elemem&#93;_type<br/>  2&#46; In the data section, the object element_struct needs both elements added to both &quot;elements&quot; and<br/>      &quot;opposedelements&quot;, and for the latter you need to put them in both ways around (look at existing entries)<br/>  3&#46; You need to add both elements to the tab, both for &quot;monster&quot; and for &quot;attackspell&quot;&#46; Again, see existing<br/>      entries&#46;<br/>  --&gt;<br/><br/><br/>  &lt;!-- =================================================== --&gt;<br/>  &lt;!-- Templates --&gt;<br/><br/>  &lt;!--<br/>  Using templates makes it easier to convert to other languages, but also for other users to word it how they want it&#46;<br/>  When templates are in the library that uses them (as here) the way to change the language is to<br/>  modify the template in the library, so really the only benefit is that all the text is together here&#46;<br/>  Also modify the default responses in the verbs!<br/>  --&gt;<br/><br/>  &lt;template name=&quot;Learn&quot;&gt;learn&lt;/template&gt;<br/>  &lt;template name=&quot;Cast&quot;&gt;cast&lt;/template&gt;<br/><br/>  &lt;template name=&quot;LookDead&quot;&gt;Oh, and it is dead&#46;&lt;/template&gt;<br/>  &lt;template name=&quot;SpellAlreadyKnown&quot;&gt;Er, you already know that one!&lt;/template&gt;<br/>  &lt;template name=&quot;SpellNotKnown&quot;&gt;Er, you don't know that one!&lt;/template&gt;<br/>  &lt;template name=&quot;NoMonstersPresent&quot;&gt;No monsters present&lt;/template&gt;<br/><br/>  &lt;dynamictemplate name=&quot;SpellEnds&quot;&gt;&lt;!&#91;CDATA&#91;&quot;The &lt;i&gt;&quot; + GetDisplayAlias(object) + &quot;&lt;/i&gt; spell ends&#46;&quot;&#93;&#93;&gt;&lt;/dynamictemplate&gt;<br/>  &lt;dynamictemplate name=&quot;SpellCast&quot;&gt;&lt;!&#91;CDATA&#91;&quot;You cast &lt;i&gt;&quot; + GetDisplayAlias(object) + &quot;&lt;/i&gt;&#46;&quot;&#93;&#93;&gt;&lt;/dynamictemplate&gt;<br/>  &lt;dynamictemplate name=&quot;SpellLearnt&quot;&gt;&lt;!&#91;CDATA&#91;&quot;In a process that seems at once unfathomable, and yet familiar, the spell fades away, and you realise you are now able to cast the &lt;i&gt;&quot; + GetDisplayAlias(object) + &quot;&lt;/i&gt; spell&#46;&quot;&#93;&#93;&gt;&lt;/dynamictemplate&gt;<br/><br/><br/><br/>  &lt;!-- =================================================== --&gt;<br/>  &lt;!-- Verbs --&gt;<br/><br/>  &lt;verb&gt;<br/>    &lt;property&gt;learn&lt;/property&gt;<br/>    &lt;pattern&gt;&#91;Learn&#93;&lt;/pattern&gt;<br/>    &lt;defaultexpression&gt;&quot;You can't learn &quot; + object&#46;article + &quot;&#46;&quot;&lt;/defaultexpression&gt;<br/>  &lt;/verb&gt;<br/>  &lt;verb&gt;<br/>    &lt;property&gt;cast&lt;/property&gt;<br/>    &lt;pattern&gt;&#91;Cast&#93;&lt;/pattern&gt;<br/>    &lt;defaultexpression&gt;&quot;You can't cast &quot; + object&#46;article + &quot;&#46;&quot;&lt;/defaultexpression&gt;<br/>  &lt;/verb&gt;<br/><br/>  &lt;verb&gt;<br/>    &lt;property&gt;attack&lt;/property&gt;<br/>    &lt;pattern&gt;attack;fight;strike;kill&lt;/pattern&gt;<br/>    &lt;defaultexpression&gt;&quot;You can't attack &quot; + object&#46;article + &quot;&#46;&quot;&lt;/defaultexpression&gt;<br/>  &lt;/verb&gt;<br/><br/>  &lt;verb&gt;<br/>    &lt;property&gt;equip&lt;/property&gt;<br/>    &lt;pattern&gt;equip;draw&lt;/pattern&gt;<br/>    &lt;defaultexpression&gt;&quot;You can't draw &quot; + object&#46;article + &quot;&#46;&quot;&lt;/defaultexpression&gt;<br/>  &lt;/verb&gt;<br/>  &lt;verb&gt;<br/>    &lt;property&gt;unequip&lt;/property&gt;<br/>    &lt;pattern&gt;unequip;sheathe&lt;/pattern&gt;<br/>    &lt;defaultexpression&gt;&quot;You can't sheathe &quot; + object&#46;article + &quot;&#46;&quot;&lt;/defaultexpression&gt;<br/>  &lt;/verb&gt;<br/><br/>  &lt;!-- =================================================== --&gt;<br/>  &lt;!-- Functions --&gt;<br/><br/>  &lt;!--<br/>  Handles an attack on the given monster, using the given spell&#46;<br/>  Monster loses hit points according to the spell's powerrating&#46;<br/>  If they share an element, then no damage, if elements are opposed, damage is multplied by 4<br/>  Handles monsters with no elements too, but spell must have an element set&#46;<br/>  --&gt;<br/>  &lt;function name=&quot;SpellAttackMonster&quot; parameters=&quot;monster, spell&quot;&gt;&lt;!&#91;CDATA&#91;<br/>    do (monster, &quot;settoattack&quot;)<br/>    element = GetElement (monster)<br/>    handled = False<br/>    if (not element = Null) {<br/>      if (DoesInherit (spell, element + &quot;_type&quot;)) {<br/>        msg (&quot;&#46;&#46;&#46; &quot; + monster&#46;ignoreselement)<br/>        handled = True<br/>      }<br/>      msg (&quot;looking for &quot; + element)<br/>      if (DoesInherit (spell, StringDictionaryItem (element_struct&#46;opposedelements, element) + &quot;_type&quot;)) {<br/>        monster&#46;hitpoints = monster&#46;hitpoints -  4 * spell&#46;powerrating<br/>        handled = True<br/>        if (monster&#46;hitpoints &gt; 0) {<br/>          msg (&quot;&#46;&#46;&#46; &quot; + monster&#46;hurtbyelement)<br/>        }<br/>        else {<br/>          msg (&quot;&#46;&#46;&#46; &quot; + monster&#46;deathbyelement)<br/>          do (monster, &quot;makedead&quot;)<br/>        }<br/>      }<br/>    }<br/><br/>    if (not handled) {<br/>      monster&#46;hitpoints = monster&#46;hitpoints -  spell&#46;powerrating<br/>      if (monster&#46;hitpoints &gt; 0) {<br/>        msg (&quot;&#46;&#46;&#46; &quot; + monster&#46;hurt)<br/>      }<br/>      else {<br/>        msg (&quot;&#46;&#46;&#46; &quot; + monster&#46;death)<br/>        do (monster, &quot;makedead&quot;)<br/>      }<br/>    }<br/>  &#93;&#93;&gt;&lt;/function&gt;<br/><br/><br/>  &lt;!--<br/>  Call this when a spell is cast, to ensure any on-going spells<br/>  are terminated&#46;<br/>  --&gt;<br/>  &lt;function name=&quot;CancelSpell&quot;&gt;&lt;!&#91;CDATA&#91;<br/>    if (HasObject (game&#46;pov, &quot;currentspell&quot;)) {<br/>      spell = game&#46;pov&#46;currentspell<br/>      msg (DynamicTemplate(&quot;SpellEnds&quot;, spell))<br/>      game&#46;pov&#46;currentspell = null<br/>      if (HasScript (spell, &quot;terminate&quot;)) {<br/>        do (spell, &quot;terminate&quot;)<br/>      }<br/>    }<br/>  &#93;&#93;&gt;&lt;/function&gt;<br/><br/><br/><br/><br/>  &lt;!--<br/>  Returns as a string the name of this object's element (or null)&#46;<br/>  --&gt;<br/>  &lt;function name=&quot;GetElement&quot; parameters=&quot;obj&quot; type=&quot;string&quot;&gt;&lt;!&#91;CDATA&#91;<br/>    result = Null<br/>    foreach (element, element_struct&#46;elements) {<br/>     type = element + &quot;_type&quot;<br/>      if (DoesInherit (obj, type)) {<br/>        result = element<br/>      }<br/>    }<br/>    return (result)<br/>  &#93;&#93;&gt;&lt;/function&gt;<br/><br/><br/>  &lt;!--<br/>  Describes casting<br/>  --&gt;<br/>  &lt;function name=&quot;DescribeCast&quot; parameters=&quot;spell&quot;&gt;&lt;!&#91;CDATA&#91;<br/>        if (HasString (spell, &quot;description&quot;)) {<br/>          msg (DynamicTemplate(&quot;SpellCast&quot;, spell) + &quot; &quot; + spell&#46;description)<br/>        }<br/>        else {<br/>          msg (DynamicTemplate(&quot;SpellCast&quot;, spell))<br/>        }<br/>  &#93;&#93;&gt;&lt;/function&gt;<br/><br/><br/><br/>  &lt;!-- =================================================== --&gt;<br/>  &lt;!-- Turn Scripts --&gt;<br/><br/><br/><br/>  &lt;turnscript name=&quot;attacktheplayerturnscript&quot;&gt;<br/>    &lt;enabled /&gt;<br/>    &lt;script&gt;<br/>      foreach (attacker, element_struct&#46;attackers) {<br/>        do (attacker, &quot;attackplayer&quot;)<br/>      }<br/>    &lt;/script&gt;<br/>  &lt;/turnscript&gt;<br/><br/><br/><br/>  &lt;!-- =================================================== --&gt;<br/>  &lt;!-- Object types --&gt;<br/><br/>  &lt;type name=&quot;spell&quot;&gt;<br/>    &lt;displayverbs type=&quot;stringlist&quot;&gt;<br/>      &lt;value&gt;Learn&lt;/value&gt;<br/>    &lt;/displayverbs&gt;<br/>    &lt;inventoryverbs type=&quot;stringlist&quot;&gt;<br/>      &lt;value&gt;Learn&lt;/value&gt;<br/>    &lt;/inventoryverbs&gt;<br/>    &lt;drop type=&quot;boolean&quot;&gt;false&lt;/drop&gt;<br/>    &lt;take type=&quot;boolean&quot;&gt;false&lt;/take&gt;<br/>    &lt;usedefaultprefix type=&quot;boolean&quot;&gt;false&lt;/usedefaultprefix&gt;<br/>    &lt;learn type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      if (not this&#46;parent = game&#46;pov) {<br/>        this&#46;parent = game&#46;pov<br/>        this&#46;inventoryverbs = Split (&quot;Cast&quot;, &quot; &quot;)<br/>        msg (DynamicTemplate(&quot;SpellLearnt&quot;, this))<br/>      }<br/>      else {<br/>        msg (&quot;&#91;SpellAlreadyKnown&#93;&quot;)<br/>      }<br/>    &#93;&#93;&gt;&lt;/learn&gt;<br/>  &lt;/type&gt;<br/><br/><br/><br/>  &lt;type name=&quot;attackspell&quot;&gt;<br/>    &lt;inherit name=&quot;spell&quot;/&gt;<br/>    &lt;cast type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      // Check the player has the spell<br/>      // If so iterate through all objects in the room<br/>      // Apply attack to those with the monster type that are not dead<br/>      if (this&#46;parent = game&#46;pov) {<br/>        DescribeCast (this)<br/>        flag = False<br/>        foreach (obj, ScopeVisibleNotHeld ()) {<br/>          if (DoesInherit (obj, &quot;monster&quot;) and not GetBoolean (obj, &quot;dead&quot;)) {<br/>            SpellAttackMonster (obj, this)<br/>            flag = True<br/>          }<br/>        }<br/>        if (not flag) {<br/>          msg (&quot;&#46;&#46;&#46; &#91;NoMonstersPresent&#93;&quot;)<br/>        }<br/>        CancelSpell ()<br/>      }<br/>      else {<br/>        msg (&quot;&#91;SpellNotKnown&#93;&quot;)<br/>      }<br/>    &#93;&#93;&gt;&lt;/cast&gt;<br/>  &lt;/type&gt;<br/><br/><br/>  &lt;type name=&quot;nonattackspell&quot;&gt;<br/>    &lt;inherit name=&quot;spell&quot;/&gt;<br/>    &lt;cast type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      if (this&#46;parent = game&#46;pov) {<br/>        DescribeCast (this)<br/>        do (this, &quot;spelleffect&quot;)<br/>        CancelSpell ()<br/>      }<br/>      else {<br/>        msg (&quot;&#91;SpellNotKnown&#93;&quot;)<br/>      }<br/>    &#93;&#93;&gt;&lt;/cast&gt;<br/>  &lt;/type&gt;<br/><br/><br/>  &lt;type name=&quot;lastingspell&quot;&gt;<br/>    &lt;inherit name=&quot;spell&quot;/&gt;<br/>    &lt;cast type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      if (this&#46;parent = game&#46;pov) {<br/>        DescribeCast (this)<br/>        do (this, &quot;spelleffect&quot;)<br/>        CancelSpell ()<br/>        game&#46;pov&#46;currentspell = this<br/>        game&#46;pov&#46;status = this&#46;status<br/>      }<br/>      else {<br/>        msg (&quot;&#91;SpellNotKnown&#93;&quot;)<br/>      }<br/>    &#93;&#93;&gt;&lt;/cast&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;weapon&quot;&gt;<br/>    &lt;attackbonus type=&quot;int&quot;&gt;0&lt;/attackbonus&gt;<br/>    &lt;damagebonus type=&quot;int&quot;&gt;0&lt;/damagebonus&gt;<br/>    &lt;damagedicenumber type=&quot;int&quot;&gt;1&lt;/damagedicenumber&gt;<br/>    &lt;damagedicesides type=&quot;int&quot;&gt;4&lt;/damagedicesides&gt;<br/>    &lt;take /&gt;<br/>    &lt;inventoryverbs type=&quot;stringlist&quot;&gt;<br/>      &lt;value&gt;Look at&lt;/value&gt;<br/>      &lt;value&gt;Drop&lt;/value&gt;<br/>      &lt;value&gt;Equip&lt;/value&gt;<br/>    &lt;/inventoryverbs&gt;<br/>    &lt;equip type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      if (this&#46;parent = game&#46;pov) {<br/>        if (not game&#46;pov&#46;equipped = fists and not game&#46;pov&#46;equipped = null) {<br/>          msg (&quot;You put away your &quot; + game&#46;pov&#46;equipped&#46;alias + &quot; and draw your &quot; + this&#46;alias + &quot;&#46;&quot;)<br/>        }<br/>        else {<br/>          msg (&quot;You draw your &quot; + this&#46;alias + &quot;&#46;&quot;)<br/>        }<br/>        game&#46;pov&#46;equipped = this<br/>        this&#46;inventoryverbs = Split (&quot;Look at;Drop;Unequip&quot;, &quot;;&quot;)<br/>        game&#46;pov&#46;equippedstatus = &quot;Wielding&#58; &quot; + this&#46;alias<br/>      }<br/>      else {<br/>        msg (&quot;You don't have it&#46;&quot;)<br/>      }<br/>    &#93;&#93;&gt;&lt;/equip&gt;<br/>    &lt;unequip type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      if (this&#46;parent = game&#46;pov) {<br/>        msg (&quot;You put away your &quot; + game&#46;pov&#46;equipped&#46;alias + &quot;&#46;&quot;)<br/>        game&#46;pov&#46;equipped = fists<br/>        this&#46;inventoryverbs = Split (&quot;Look at;Drop;Equip&quot;, &quot;;&quot;)<br/>        game&#46;pov&#46;equippedstatus = &quot;Wielding&#58; nothing&quot;<br/>      }<br/>      else {<br/>        msg (&quot;You don't have it&#46;&quot;)<br/>      }<br/>    &#93;&#93;&gt;&lt;/unequip&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;fire_type&quot;&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;frost_type&quot;&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;storm_type&quot;&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;earthmight_type&quot;&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;shadow_type&quot;&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;rainbow_type&quot;&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;divine_type&quot;&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;necrotic_type&quot;&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;monster&quot;&gt;<br/>    &lt;inherit name=&quot;weapon&quot;/&gt;<br/>    &lt;defence type=&quot;int&quot;&gt;0&lt;/defence&gt;<br/>    &lt;armour type=&quot;int&quot;&gt;0&lt;/armour&gt;<br/>    &lt;hitpoints type=&quot;int&quot;&gt;10&lt;/hitpoints&gt;<br/>    &lt;take type=&quot;boolean&quot;&gt;false&lt;/take&gt;<br/>    &lt;displayverbs type=&quot;stringlist&quot;&gt;<br/>      &lt;value&gt;Look at&lt;/value&gt;<br/>      &lt;value&gt;Attack&lt;/value&gt;<br/>    &lt;/displayverbs&gt;<br/>    &lt;!-- Call this when a monster dies for some housekeeping --&gt;<br/>    &lt;makedead type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      if (not GetBoolean (this, &quot;dead&quot;)) {<br/>        this&#46;alias = this&#46;alias + &quot; (dead)&quot;<br/>        if (HasString (this, &quot;lookwhendead&quot;)) {<br/>          monster&#46;look = this&#46;lookwhendead<br/>        }<br/>        else {<br/>          this&#46;look = this&#46;look + &quot; &#91;LookDead&#93;&quot;<br/>        }<br/>        this&#46;dead = True<br/>        list remove (element_struct&#46;attackers, this)<br/>      }<br/>    &#93;&#93;&gt;&lt;/makedead&gt;<br/>    &lt;attack type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      if (not HasAttribute (game&#46;pov, &quot;equipped&quot;)) {<br/>        game&#46;pov&#46;equipped = fists<br/>      }<br/>      do (this, &quot;settoattack&quot;)<br/>      attackroll = GetRandomInt (1, 20) - this&#46;defence + game&#46;pov&#46;attack<br/>      attackroll = attackroll + game&#46;pov&#46;equipped&#46;attackbonus<br/>      if (attackroll &gt; 10) {<br/>        damage = game&#46;pov&#46;equipped&#46;damagebonus<br/>        for (i, 1, game&#46;pov&#46;equipped&#46;damagedicenumber) {<br/>          damage = damage + GetRandomInt (1, game&#46;pov&#46;equipped&#46;damagedicesides) - this&#46;armour<br/>        }<br/>        this&#46;hitpoints = this&#46;hitpoints - damage<br/>        if (this&#46;hitpoints &gt; 0) {<br/>          msg (&quot;You swing &quot; + game&#46;pov&#46;equipped&#46;alias + &quot; and hit, doing &quot; + damage + &quot; points of damage; &quot; + this&#46;hurt)<br/>        }<br/>        else {<br/>          msg (&quot;You swing your &quot; + game&#46;pov&#46;equipped&#46;alias + &quot; and hit, doing &quot; + damage + &quot; points of damage; &quot; + this&#46;death)<br/>          do (this, &quot;makedead&quot;)<br/>        }<br/>      }<br/>      else {<br/>        msg (&quot;You swing your &quot; + game&#46;pov&#46;equipped&#46;alias + &quot; and miss&#46;&quot;)<br/>      }<br/>    &#93;&#93;&gt;&lt;/attack&gt;<br/>    &lt;attackplayer type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      attackroll = GetRandomInt (1, 20) - game&#46;pov&#46;defence + this&#46;attackbonus<br/>      if (attackroll &gt; 10) {<br/>        damage = this&#46;damagebonus<br/>        for (i, 1, this&#46;damagedicenumber) {<br/>          damage = damage + GetRandomInt (1, this&#46;damagedicesides) - game&#46;pov&#46;armour<br/>        }<br/>        game&#46;pov&#46;hitpoints = game&#46;pov&#46;hitpoints - damage<br/>        msg (this&#46;alias + &quot; swings at you and hits, doing &quot; + damage + &quot; points of damage&#46;&quot;)<br/>        if (this&#46;hitpoints &lt;= 0) {<br/>          msg (&quot;You are dead!&quot;)<br/>          finish<br/>        }<br/>      }<br/>      else {<br/>        msg (this&#46;alias + &quot; swings at you and misses&#46;&quot;)<br/>      }<br/>    &#93;&#93;&gt;&lt;/attackplayer&gt;<br/>    &lt;settoattack type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      if (not ListContains (element_struct&#46;attackers, this) and not GetBoolean (this, &quot;dead&quot;)) {<br/>        list add (element_struct&#46;attackers, this)<br/>      }<br/>    &#93;&#93;&gt;&lt;/settoattack&gt;<br/>  &lt;/type&gt;<br/><br/>  &lt;type name=&quot;monsterarcher&quot;&gt;<br/>    &lt;inherit name=&quot;monster&quot;/&gt;<br/>    &lt;attackplayer type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      attackroll = GetRandomInt (1, 20) - game&#46;pov&#46;defence + this&#46;attackbonus<br/>      if (attackroll &gt; 10) {<br/>        damage = this&#46;damagebonus<br/>        for (i, 1, this&#46;damagedicenumber) {<br/>          damage = damage + GetRandomInt (1, this&#46;damagedicesides) - game&#46;pov&#46;armour<br/>        }<br/>        game&#46;pov&#46;hitpoints = game&#46;pov&#46;hitpoints - damage<br/>        msg (this&#46;alias + &quot; shoots an arrow at you and hits, doing &quot; + damage + &quot; points of damage&#46;&quot;)<br/>        if (this&#46;hitpoints &lt;= 0) {<br/>          msg (&quot;You are dead!&quot;)<br/>          finish<br/>        }<br/>      }<br/>      else {<br/>        msg (this&#46;alias + &quot; shoots an arrow at you and misses&#46;&quot;)<br/>      }<br/>    &#93;&#93;&gt;&lt;/attackplayer&gt;<br/>  &lt;/type&gt;<br/><br/><br/><br/>  &lt;!-- =================================================== --&gt;<br/>  &lt;!-- Data --&gt;<br/><br/>  &lt;!--<br/>  This is a data store for elements (I call it a &quot;struct&quot; after the keyword in the C programming language)<br/>  If you add more elements to the name, you need to add them to both lists as well as creating a new type&#46;<br/>  Note that your new type must end &quot;_type&quot;, but that must not be included on these lists&#46;<br/>  --&gt;<br/>  &lt;object name=&quot;element_struct&quot;&gt;<br/>    &lt;elements type=&quot;stringlist&quot;&gt;<br/>      &lt;value&gt;fire&lt;/value&gt;<br/>      &lt;value&gt;frost&lt;/value&gt;<br/>      &lt;value&gt;storm&lt;/value&gt;<br/>      &lt;value&gt;earthmight&lt;/value&gt;<br/>      &lt;value&gt;shadow&lt;/value&gt;<br/>      &lt;value&gt;rainbow&lt;/value&gt;<br/>      &lt;value&gt;divine&lt;/value&gt;<br/>      &lt;value&gt;necrotic&lt;/value&gt;<br/>    &lt;/elements&gt;<br/>    &lt;opposedelements type=&quot;stringdictionary&quot;&gt;<br/>\t    &lt;item&gt;<br/>\t      &lt;key&gt;fire&lt;/key&gt;<br/>\t      &lt;value&gt;frost&lt;/value&gt;<br/>\t    &lt;/item&gt;<br/>\t    &lt;item&gt;<br/>\t      &lt;key&gt;frost&lt;/key&gt;<br/>\t      &lt;value&gt;fire&lt;/value&gt;<br/>\t    &lt;/item&gt;<br/>\t    &lt;item&gt;<br/>\t      &lt;key&gt;storm&lt;/key&gt;<br/>\t      &lt;value&gt;earthmight&lt;/value&gt;<br/>\t    &lt;/item&gt;<br/>\t    &lt;item&gt;<br/>\t      &lt;key&gt;earthmight&lt;/key&gt;<br/>\t      &lt;value&gt;storm&lt;/value&gt;<br/>\t    &lt;/item&gt;<br/>\t    &lt;item&gt;<br/>\t      &lt;key&gt;shadow&lt;/key&gt;<br/>\t      &lt;value&gt;rainbow&lt;/value&gt;<br/>\t    &lt;/item&gt;<br/>\t    &lt;item&gt;<br/>\t      &lt;key&gt;rainbow&lt;/key&gt;<br/>\t      &lt;value&gt;shadow&lt;/value&gt;<br/>\t    &lt;/item&gt;<br/>\t    &lt;item&gt;<br/>\t      &lt;key&gt;divine&lt;/key&gt;<br/>\t      &lt;value&gt;necrotic&lt;/value&gt;<br/>\t    &lt;/item&gt;<br/>\t    &lt;item&gt;<br/>\t      &lt;key&gt;necrotic&lt;/key&gt;<br/>\t      &lt;value&gt;divine&lt;/value&gt;<br/>\t    &lt;/item&gt;<br/>\t  &lt;/opposedelements&gt;<br/>    &lt;attackers type=&quot;objectlist&quot; /&gt;<br/>  &lt;/object&gt;<br/><br/><br/>  &lt;object name=&quot;fists&quot;&gt;<br/>    &lt;inherit name=&quot;weapon&quot; /&gt;<br/>    &lt;alias&gt;fist&lt;/alias&gt;<br/>  &lt;/object&gt;<br/><br/><br/><br/>  &lt;!-- =================================================== --&gt;<br/>  &lt;!-- Tabs --&gt;<br/><br/>  &lt;tab&gt;<br/>    &lt;parent&gt;_ObjectEditor&lt;/parent&gt;<br/>    &lt;caption&gt;Combat&lt;/caption&gt;<br/>    &lt;mustnotinherit&gt;editor_room; defaultplayer&lt;/mustnotinherit&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;dropdowntypes&lt;/controltype&gt;<br/>      &lt;caption&gt;Type&lt;/caption&gt;<br/>      &lt;types&gt;*=None; nonattackspell=Non-attack spell; lastingspell=Lasting spell; attackspell=Attack spell; monster=Monster; monsterarcher=Monster with bow; weapon=Weapon&lt;/types&gt;<br/>      &lt;width&gt;150&lt;/width&gt;<br/>    &lt;/control&gt;<br/><br/><br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;title&lt;/controltype&gt;<br/>      &lt;caption&gt;Non-Attack Spell&lt;/caption&gt;<br/>      &lt;mustinherit&gt;nonattackspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;textbox&lt;/controltype&gt;<br/>      &lt;caption&gt;Description (optional)&lt;/caption&gt;<br/>      &lt;attribute&gt;description&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;nonattackspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;script&lt;/controltype&gt;<br/>      &lt;caption&gt;Spell effect&lt;/caption&gt;<br/>      &lt;attribute&gt;spelleffect&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;nonattackspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/><br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;title&lt;/controltype&gt;<br/>      &lt;caption&gt;Lasting Spell&lt;/caption&gt;<br/>      &lt;mustinherit&gt;lastingspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;textbox&lt;/controltype&gt;<br/>      &lt;caption&gt;Description (optional)&lt;/caption&gt;<br/>      &lt;attribute&gt;description&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;lastingspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;textbox&lt;/controltype&gt;<br/>      &lt;caption&gt;Status when active&lt;/caption&gt;<br/>      &lt;attribute&gt;status&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;lastingspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;script&lt;/controltype&gt;<br/>      &lt;caption&gt;Spell effect&lt;/caption&gt;<br/>      &lt;attribute&gt;spelleffect&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;lastingspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;script&lt;/controltype&gt;<br/>      &lt;caption&gt;Cacel spell effect&lt;/caption&gt;<br/>      &lt;attribute&gt;terminate&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;lastingspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/><br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;title&lt;/controltype&gt;<br/>      &lt;caption&gt;Attack Spell&lt;/caption&gt;<br/>      &lt;mustinherit&gt;attackspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;number&lt;/controltype&gt;<br/>      &lt;caption&gt;Power of attack (1-10)&lt;/caption&gt;<br/>      &lt;attribute&gt;powerrating&lt;/attribute&gt;<br/>      &lt;width&gt;100&lt;/width&gt;<br/>      &lt;mustinherit&gt;attackspell&lt;/mustinherit&gt;<br/>      &lt;minimum&gt;0&lt;/minimum&gt;<br/>      &lt;maximum&gt;10&lt;/maximum&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;textbox&lt;/controltype&gt;<br/>      &lt;caption&gt;Description (optional)&lt;/caption&gt;<br/>      &lt;attribute&gt;description&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;attackspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;dropdowntypes&lt;/controltype&gt;<br/>      &lt;caption&gt;Element&lt;/caption&gt;<br/>      &lt;types&gt;*=None; fire_type=Fire; frost_type=Frost; storm_type=Storm; earthmight_type=Earthmight; shadow_type=Shadow; rainbow_type=Rainbow; necrotic_type=Necrotic; divine_type=Divine&lt;/types&gt;<br/>      &lt;width&gt;150&lt;/width&gt;<br/>      &lt;mustinherit&gt;attackspell&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/><br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;title&lt;/controltype&gt;<br/>      &lt;caption&gt;Monster&lt;/caption&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;dropdowntypes&lt;/controltype&gt;<br/>      &lt;caption&gt;Element&lt;/caption&gt;<br/>      &lt;types&gt;*=None; fire_type=Fire; frost_type=Frost; storm_type=Storm; earthmight_type=Earthmight; shadow_type=Shadow; rainbow_type=Rainbow; necrotic_type=Necrotic; divine_type=Divine&lt;/types&gt;<br/>      &lt;width&gt;150&lt;/width&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;number&lt;/controltype&gt;<br/>      &lt;caption&gt;Hit points&lt;/caption&gt;<br/>      &lt;attribute&gt;hitpoints&lt;/attribute&gt;<br/>      &lt;width&gt;100&lt;/width&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>      &lt;minimum&gt;1&lt;/minimum&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;number&lt;/controltype&gt;<br/>      &lt;caption&gt;Defence&lt;/caption&gt;<br/>      &lt;attribute&gt;defence&lt;/attribute&gt;<br/>      &lt;width&gt;100&lt;/width&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>      &lt;minimum&gt;0&lt;/minimum&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;number&lt;/controltype&gt;<br/>      &lt;caption&gt;Armour&lt;/caption&gt;<br/>      &lt;attribute&gt;armour&lt;/attribute&gt;<br/>      &lt;width&gt;100&lt;/width&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>      &lt;minimum&gt;0&lt;/minimum&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;textbox&lt;/controltype&gt;<br/>      &lt;caption&gt;Description on injury&lt;/caption&gt;<br/>      &lt;attribute&gt;hurt&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;textbox&lt;/controltype&gt;<br/>      &lt;caption&gt;Description on death&lt;/caption&gt;<br/>      &lt;attribute&gt;death&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;textbox&lt;/controltype&gt;<br/>      &lt;caption&gt;Description on injury by opposed element&lt;/caption&gt;<br/>      &lt;attribute&gt;hurtbyelement&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;textbox&lt;/controltype&gt;<br/>      &lt;caption&gt;Description on death by opposed element&lt;/caption&gt;<br/>      &lt;attribute&gt;deathbyelement&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;textbox&lt;/controltype&gt;<br/>      &lt;caption&gt;Description on ignore&lt;/caption&gt;<br/>      &lt;attribute&gt;ignoreselement&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;textbox&lt;/controltype&gt;<br/>      &lt;caption&gt;Look (when dead)&lt;/caption&gt;<br/>      &lt;attribute&gt;lookwhendead&lt;/attribute&gt;<br/>      &lt;mustinherit&gt;monster&lt;/mustinherit&gt;<br/>    &lt;/control&gt;<br/><br/>    &lt;control&gt;<br/>      &lt;controltype&gt;number&lt;/controltype&gt;<br/>      &lt;caption&gt;Attack bonus&lt;/caption&gt;<br/>      &lt;attribute&gt;attackbonus&lt;/attribute&gt;<br/>      &lt;width&gt;100&lt;/width&gt;<br/>      &lt;mustinherit&gt;weapon&lt;/mustinherit&gt;<br/>      &lt;minimum&gt;0&lt;/minimum&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;number&lt;/controltype&gt;<br/>      &lt;caption&gt;Damage Dice No&#46;&lt;/caption&gt;<br/>      &lt;attribute&gt;damagedicenumber&lt;/attribute&gt;<br/>      &lt;width&gt;100&lt;/width&gt;<br/>      &lt;mustinherit&gt;weapon&lt;/mustinherit&gt;<br/>      &lt;minimum&gt;1&lt;/minimum&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;number&lt;/controltype&gt;<br/>      &lt;caption&gt;Damage Dice Sides&lt;/caption&gt;<br/>      &lt;attribute&gt;damagedicesides&lt;/attribute&gt;<br/>      &lt;width&gt;100&lt;/width&gt;<br/>      &lt;mustinherit&gt;weapon&lt;/mustinherit&gt;<br/>      &lt;minimum&gt;4&lt;/minimum&gt;<br/>    &lt;/control&gt;<br/>    &lt;control&gt;<br/>      &lt;controltype&gt;number&lt;/controltype&gt;<br/>      &lt;caption&gt;Damage Bonus&lt;/caption&gt;<br/>      &lt;attribute&gt;damagebonus&lt;/attribute&gt;<br/>      &lt;width&gt;100&lt;/width&gt;<br/>      &lt;mustinherit&gt;weapon&lt;/mustinherit&gt;<br/>      &lt;minimum&gt;0&lt;/minimum&gt;<br/>    &lt;/control&gt;<br/>  &lt;/tab&gt;<br/>&lt;/library&gt;</code></pre><br/>Alll i know is this<br/><blockquote><cite>HegemonKhan wrote:</cite>try making another monster object (you have to add in the inherited attribute: character_type, for you to be able to fight it, and you'll have to add in a &quot;physical_damage&quot; attribute amount for it to damage you, as the default value is otherwise zero), and type: fight (your monster's name or alias)</blockquote>",
      "PostDate": "2013-08-15T04:12:54+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25864",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "Ignore my comment that you used in your post, as Pixie's &quot;Simple&quot; Combat+Magic Library isn't set up in the same way as I set up &quot;my&quot; (it's based upon Pertex' Combat Library) combat coding.\n\n------------------\n\nActually, I think Pixie's Library already covers this for you, so all you got to do, is this (to utilize Pixie's already built-in &quot;game over ~ player dies&quot; coding):\n\nthe only thing missing, is that you got to add all the attributes needed for your Player Objects (your &quot;player&quot; needs &quot;life&quot;, ie &quot;hitpoints&quot;, to be able to lose to zero or below, to lose the game, lol), so...\n\nopen up Pixie's Demo Game File, and see what code (attributes) has been added for the &quot;player&quot; Player Object, and do the same in your game.\n\nfrom Pixie's Demo Game File, this is what it looks like:\n\n[code:3mcqqvg8]&lt;object name=&quot;player&quot;&gt;\n  &lt;inherit name=&quot;defaultplayer&quot; /&gt;\n  &lt;attack type=&quot;int&quot;&gt;2&lt;/attack&gt;\n  &lt;defence type=&quot;int&quot;&gt;0&lt;/defence&gt;\n  &lt;armour type=&quot;int&quot;&gt;0&lt;/armour&gt;\n  &lt;hitpoints type=&quot;int&quot;&gt;25&lt;/hitpoints&gt;\n  &lt;status&gt;-&lt;/status&gt;\n  &lt;statusattributes type=&quot;stringdictionary&quot;&gt;status = ;equippedstatus = !;hitpoints = Hit points&#58; !&lt;/statusattributes&gt;\n  &lt;equippedstatus&gt;Wielding&#58; nothing&lt;/equippedstatus&gt;\n&lt;/object&gt;[/code:3mcqqvg8]\n\nso, in your game file, find the &quot;player&quot; Player Object coding:\n\n&lt;object name=&quot;player&quot;&gt; // beginning line of your &quot;player&quot; Player Object\n  // all of your &quot;player's&quot; attributes go in here (you'll have some already), so just add in your missing needed attributes here\n&lt;/object&gt; // ending line of your &quot;player&quot; Player Object\n\nand add in the missing attributes* as seen above in the Player Object coding for Pixie's Demo Game File. You can of course change the values (amounts) to whatever you want.\n\n*The missing needed to be added attributes:\n[code:3mcqqvg8]  &lt;attack type=&quot;int&quot;&gt;2&lt;/attack&gt;\n  &lt;defence type=&quot;int&quot;&gt;0&lt;/defence&gt;\n  &lt;armour type=&quot;int&quot;&gt;0&lt;/armour&gt;\n  &lt;hitpoints type=&quot;int&quot;&gt;25&lt;/hitpoints&gt;\n  &lt;status&gt;-&lt;/status&gt;\n  &lt;statusattributes type=&quot;simplestringdictionary&quot;&gt;status = ;equippedstatus = !;hitpoints = Hit points&#58; !&lt;/statusattributes&gt; // type=&quot;simplestringdictionary&quot; is required now for using v5&#46;4\n  &lt;equippedstatus&gt;Wielding&#58; nothing&lt;/equippedstatus&gt;[/code:3mcqqvg8]\n\nHopefully this will work.",
      "EditableFormat": "bbcode",
      "HTML": "Ignore my comment that you used in your post, as Pixie's &quot;Simple&quot; Combat+Magic Library isn't set up in the same way as I set up &quot;my&quot; (it's based upon Pertex' Combat Library) combat coding.<br/><br/>------------------<br/><br/>Actually, I think Pixie's Library already covers this for you, so all you got to do, is this (to utilize Pixie's already built-in &quot;game over ~ player dies&quot; coding):<br/><br/>the only thing missing, is that you got to add all the attributes needed for your Player Objects (your &quot;player&quot; needs &quot;life&quot;, ie &quot;hitpoints&quot;, to be able to lose to zero or below, to lose the game, lol), so...<br/><br/>open up Pixie's Demo Game File, and see what code (attributes) has been added for the &quot;player&quot; Player Object, and do the same in your game.<br/><br/>from Pixie's Demo Game File, this is what it looks like:<br/><br/><pre><code>&lt;object name=&quot;player&quot;&gt;<br/>  &lt;inherit name=&quot;defaultplayer&quot; /&gt;<br/>  &lt;attack type=&quot;int&quot;&gt;2&lt;/attack&gt;<br/>  &lt;defence type=&quot;int&quot;&gt;0&lt;/defence&gt;<br/>  &lt;armour type=&quot;int&quot;&gt;0&lt;/armour&gt;<br/>  &lt;hitpoints type=&quot;int&quot;&gt;25&lt;/hitpoints&gt;<br/>  &lt;status&gt;-&lt;/status&gt;<br/>  &lt;statusattributes type=&quot;stringdictionary&quot;&gt;status = ;equippedstatus = !;hitpoints = Hit points&#58; !&lt;/statusattributes&gt;<br/>  &lt;equippedstatus&gt;Wielding&#58; nothing&lt;/equippedstatus&gt;<br/>&lt;/object&gt;</code></pre><br/><br/>so, in your game file, find the &quot;player&quot; Player Object coding:<br/><br/>&lt;object name=&quot;player&quot;&gt; // beginning line of your &quot;player&quot; Player Object<br/>  // all of your &quot;player's&quot; attributes go in here (you'll have some already), so just add in your missing needed attributes here<br/>&lt;/object&gt; // ending line of your &quot;player&quot; Player Object<br/><br/>and add in the missing attributes* as seen above in the Player Object coding for Pixie's Demo Game File. You can of course change the values (amounts) to whatever you want.<br/><br/>*The missing needed to be added attributes:<br/><pre><code>  &lt;attack type=&quot;int&quot;&gt;2&lt;/attack&gt;<br/>  &lt;defence type=&quot;int&quot;&gt;0&lt;/defence&gt;<br/>  &lt;armour type=&quot;int&quot;&gt;0&lt;/armour&gt;<br/>  &lt;hitpoints type=&quot;int&quot;&gt;25&lt;/hitpoints&gt;<br/>  &lt;status&gt;-&lt;/status&gt;<br/>  &lt;statusattributes type=&quot;simplestringdictionary&quot;&gt;status = ;equippedstatus = !;hitpoints = Hit points&#58; !&lt;/statusattributes&gt; // type=&quot;simplestringdictionary&quot; is required now for using v5&#46;4<br/>  &lt;equippedstatus&gt;Wielding&#58; nothing&lt;/equippedstatus&gt;</code></pre><br/><br/>Hopefully this will work.",
      "PostDate": "2013-08-15T06:10:38+01:00",
      "LastEditDate": null
    }
  ]
}
