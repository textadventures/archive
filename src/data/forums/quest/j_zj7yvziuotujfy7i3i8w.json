{
  "Topic": {
    "TopicId": "j_zj7yvziuotujfy7i3i8w",
    "ForumId": "10",
    "Title": "Start screen",
    "LastUpdated": "2023-10-03T06:34:37.0364481Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "63b4f5d0-33f3-40b8-961f-860c32a69649",
      "UserId": 374963,
      "Username": "Sara377544",
      "AvatarUrl": "https://i.imgur.com/YCtLz3Nb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I was playing a quest game on itch.io and saw\r\n\r\nhttps://cdn.discordapp.com/attachments/721434407155662848/1158652933827735552/image.png?ex=651d0722&is=651bb5a2&hm=808f2562ef326900d75a0577b0bc6d52df9e82ccb7528ff7db7b4a6deb3199b5&\r\n\r\nHow would one make a start screen like this?",
      "EditableFormat": "markdown",
      "HTML": "<p>I was playing a quest game on itch.io and saw</p>\n<p>https://cdn.discordapp.com/attachments/721434407155662848/1158652933827735552/image.png?ex=651d0722&amp;is=651bb5a2&amp;hm=808f2562ef326900d75a0577b0bc6d52df9e82ccb7528ff7db7b4a6deb3199b5&amp;</p>\n<p>How would one make a start screen like this?</p>\n\n",
      "PostDate": "2023-10-03T06:34:37.0364481Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5af03db3-739f-4cab-ae4d-246cd9ee1dce",
      "UserId": 599148,
      "Username": "DeepDredux",
      "AvatarUrl": "https://i.imgur.com/0MkvPpKb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm actually the one who made that main menu you're referencing. I'll preface this by saying this is all relatively advanced coding for Quest, but if that doesn't deter you I'll go into greater detail.\r\n\r\n**The short answer is:** On start-up, a Quest script generates custom HTML code (using the JS.eval() Quest function to run jQuery calls) to build the look of the menu and all its links. I also wrote up a custom JavaScript file containing functions for each link, so when the player clicks one of the menu buttons, javascript can then run accordingly. For buttons that need to interact directly with Quest, I can use the `ASLEvent()` function in the JavaScript file (tutorial on ASLEvent [here](http://docs.textadventures.co.uk/quest/ui-callback.html)) to do what I want.\r\n\r\n**The longer answer is this:**\r\n\r\n1. On startup, Quest runs the following `game.initMainMenu` script:\r\n<details>\r\n\r\n```\r\n// Initialize Main Menu\r\nJS.eval (\"$('#MainMenu').remove();\")\r\ngame.MenuImageURL = GetFileURL(\"MenuJPG.jpg\")\r\nMenuContent = \"\"\r\n// Generate Title\r\nTitleFont = game.TitleFont\r\nif (TitleFont=\"CollegiateFLFImport\") {\r\n  TitleFontSize = \"360%\"\r\n}\r\nelse {\r\n  TitleFontSize = \"260%\"\r\n}\r\n// Set this boolean to True if I plan on using Main Menu image background, and should thus display title at top of screen\r\nTitleScreenImage = True\r\n// Otherwise, the title will be displayed in the center of the screen in black\r\nMenuContent = MenuContent + \"<div id=\\\"MainMenu\\\" style=\\\"max-width:100vw\\\">\"\r\nMenuWrapper = \"<div id=\\\"MainMenuWrapper\\\" style=\\\"display:table-cell; vertical-align:middle;position: absolute; width:98%; padding:5px;left: 50%;top: 50%;-webkit-transform: translate(-50%,-50%); -ms-transform: translate(-50%,-50%); transform: translate(-50%,-50%);\\\">\"\r\nMainMenuTitle = \"<div id=\\\"MainMenuTitle\\\" style=\\\"text-align:center; font-size:\"+TitleFontSize+\";font-family:\"+TitleFont+\";\\\">\"+game.gamename+\"</div>\"\r\nif (game.subtitle <> null) {\r\n  if (LengthOf(game.subtitle) > 0) {\r\n    MainMenuTitle = MainMenuTitle + \"<div id=\\\"MainMenuSubtitle\\\" style=\\\"text-align:center; font-size:130%;\\\">\"+game.subtitle+\"</div>\"\r\n  }\r\n}\r\nif (game.author <> null) {\r\n  if (LengthOf(game.author) > 0) {\r\n    MainMenuTitle = MainMenuTitle + \"<div id=\\\"MainMenuAuthor\\\" style=\\\"text-align:center; font-size:130%;\\\">by \"+game.author+\"</div>\"\r\n  }\r\n}\r\nif (TitleScreenImage) {\r\n  // Displays Title at top of screen, rather than middle\r\n  MenuContent = MenuContent + MainMenuTitle + MenuWrapper\r\n}\r\nelse {\r\n  // Display Title in middle of screen\r\n  MenuContent = MenuContent + MenuWrapper + MainMenuTitle\r\n}\r\nMenuContent = MenuContent + \"<br><br><br><br>\"\r\n// Generate Menu Options\r\nMenuFillColor = \"rgba(211,211,211,0.75)\"\r\nMenuContent = MenuContent + \"<table id=\\\"MainMenuOptions\\\" style=\\\"text-align:center;vertical-align:middle;margin-left: auto; margin-right: auto;  width: 180px; border:solid; background-color:\"+MenuFillColor+\"; border-radius:5px; font-size:1.2em;\\\">\"\r\nMenuContent = MenuContent + \"<tr><td style=\\\"padding:10px;\\\"><a class=\\\"cmdlink\\\" style=\\\"GetCurrentLinkTextFormat(); color:blue;\\\" onclick=showMainMenuModal(\\\"NewGame\\\")>New Game</a></td></tr>\"\r\nMenuContent = MenuContent + \"<tr><td style=\\\"padding:10px;\\\"><a class=\\\"cmdlink\\\" style=\\\"GetCurrentLinkTextFormat(); color:blue;\\\" onclick=LoadGamePrompt()>Load Game</a></td></tr>\"\r\nMenuContent = MenuContent + \"<tr><td style=\\\"padding:10px;\\\"><a class=\\\"cmdlink\\\" style=\\\"GetCurrentLinkTextFormat(); color:blue;\\\" onclick=showPopupJournal(\\\"fetishoptions\\\")>Fetish Options</a></td></tr>\"\r\nMenuContent = MenuContent + \"<tr><td style=\\\"padding:10px;\\\"><a class=\\\"cmdlink\\\" style=\\\"GetCurrentLinkTextFormat(); color:blue;\\\" onclick=showMainMenuModal(\\\"Credits\\\")>Credits</a></td></tr>\"\r\nMenuContent = MenuContent + \"</table></div>\"\r\n// Populate Bottom Corners\r\n// MenuContent = MenuContent + \"<div style=\\\"position: absolute; bottom: 5px; left: 5px;\\\">Social Media1<br>Social Media2</div>\"\r\nMenuContent = MenuContent + \"<div style=\\\"position: absolute; bottom: 5px; right: 5px; -webkit-text-stroke: 0.8px rgb(54,54,54)\\\">v\"+ToString(game.version)+\"</div>\"\r\nMenuContent = MenuContent + \"</div>\"\r\nJS.eval (\"$('#gameBorder').append('\"+MenuContent+\"');\")\r\n// Application of Background image moved to the ShowMainMenu function\r\n// If Asura tower used as main menu background, set font color to rgb(231,234,223), otherwise use Black\r\nif (TitleScreenImage) {\r\n  TitleFontColor = \"rgb(231,234,223)\"\r\n  JS.setCss (\"#MainMenuTitle\", \"color:\"+TitleFontColor)\r\n  JS.eval (\"$('#MainMenuTitle').css('-webkit-text-stroke', '0.3px rgb(63,82,80)');\")\r\n  JS.setCss (\"#MainMenuSubtitle\", \"color:\"+TitleFontColor)\r\n  JS.eval (\"$('#MainMenuSubtitle').css('-webkit-text-stroke', '0.5px rgb(63,82,80)');\")\r\n  JS.setCss (\"#MainMenuAuthor\", \"color:\"+TitleFontColor)\r\n  JS.eval (\"$('#MainMenuAuthor').css('-webkit-text-stroke', '0.5px rgb(63,82,80)');\")\r\n}\r\n// Start the game with the Main Menu hidden\r\nJS.eval (\"$('#MainMenu').hide();\")\r\n```\r\n\r\n</details>\r\n\r\n2. In the code snippet above, each menu link has an `onclick` event tied to it, linking to a JavaScript function. Those JavaScript functions are here in a custom JavaScript file I made and added to the game (on desktop, put the .js file in the same directory as your game, then import it using the Advanced tab in the editor):\r\n<details>\r\n\r\n```\r\n// MainMenuJavaCode.js\r\n\r\nfunction showMainMenuModal(optionalPage) {\r\n\t// NOTE: optionalPage should be a string\r\n\t//If mainmenu modal not already open, then open it...\r\n  try {\r\n\tif (!!!document.getElementById(\"mainmenupopup\") || !$('#msgboxMainMenu').dialog('isOpen')) {\r\n      // Update height & width according to page.\r\n\t  if (typeof optionalPage !== 'undefined') {\r\n\t\t  if (optionalPage === \"NewGame\" || optionalPage === \"NewGameWhileGameRunning\") {\r\n\t\t\tvar boxWidth = Math.min(400, $(window).width())\r\n\t\t\tvar boxHeight = 'auto'\r\n\t\t  }\r\n\t\t  // Load Game option opens the load code modal. No need for special code here.\r\n\t\t  // Similarly, if fetish options is selected, it should be calling showPopupJournal('fetishoptions')\r\n\t\t  else if (optionalPage === \"Credits\") {\r\n\t\t\tvar boxWidth = Math.min(560, $(window).width())\r\n\t\t\tvar boxHeight = 'auto'\r\n\t\t  }\r\n\t\t  else {\r\n\t\t    var boxWidth = 'auto'\r\n\t\t\tvar boxHeight = 'auto'\r\n\t\t  }\r\n\t  }\r\n  \t  else {\r\n\t    var boxWidth = Math.min(280, $(window).width())\r\n\t    var boxHeight = 'auto'\r\n\t  }\r\n\t  \r\n      var msgboxOptions = {\r\n          modal: true,\r\n          autoOpen: false,\r\n\t\t  resizable: false,\r\n\t\t  draggable: false,\r\n          title: \"MainMenu\",\r\n          width: boxWidth,\r\n\t\t  height: boxHeight,\r\n\t  \t  show: \"scale\",\r\n\t\t  hide: \"scale\",\r\n          buttons: [],\r\n          closeOnEscape: false,\r\n      };\r\n\t  $('#msgboxMainMenu').dialog(msgboxOptions);\r\n\t  // Give the messagebox modal an ID to more easily identify whether or not it's open\r\n\t  $(\"div#msgboxMainMenu\").parent().attr('id','mainmenupopup');\r\n\t  // Make position of dialog box \"fixed\" rather than \"absolute\"\r\n\t  $('#mainmenupopup').css(\"position\", \"fixed\");\r\n\t}\r\n\t// Check if optionalPage parameter is set. If it is, open to that page, if not then open to main page\r\n\tif (typeof optionalPage !== 'undefined') {\r\n\t\tif (optionalPage =='NewGame' || optionalPage == 'NewGameWhileGameRunning') {\r\n\t\t  $('#msgboxMainMenu').dialog('option', 'title', 'Start New Game?');\r\n\t\t  if (optionalPage=='NewGame') {\r\n\t\t    $('#msgboxMainMenuCaption').html(\"<div style='font-size:1.1em'>Would you like to start a new game?</div>\")\r\n\t\t\t$('#msgboxMainMenuCaption').append(\"<table style='width:100%;'><tr><b><td style='text-align:left; padding-left:30%;'><button style='font-size:1.1em;cursor:pointer;' onclick=NewGame('False');>Yes</button></td><td style='text-align:right; padding-right:30%;'><button style='font-size:1.1em;cursor:pointer;' onclick=CloseMainMenuModal();>No</button></td></b></tr></table>\")\r\n\t\t  }\r\n\t\t  else {\r\n\t\t    $('#msgboxMainMenuCaption').html(\"<div style='font-size:1.1em'>Would you like to start a new game?</div><div>(WARNING: All unsaved progress will be lost!)</div>\")\r\n\t\t\t$('#msgboxMainMenuCaption').append(\"<table style='width:100%;'><tr><b><td style='text-align:left; padding-left:30%;'><button style='font-size:1.1em;cursor:pointer;' onclick=NewGame('True');>Yes</button></td><td style='text-align:right; padding-right:30%;'><button style='font-size:1.1em;cursor:pointer;' onclick=CloseMainMenuModal();>No</button></td></b></tr></table>\")\r\n\t\t\t// TODO: Logic for starting a new game if game already in progress...\r\n\t\t  }\r\n\t\t}\r\n\t\telse if (optionalPage =='Credits') {\r\n\t\t  $('#msgboxMainMenu').dialog('option', 'title', 'Credits');\r\n\t\t  $('#msgboxMainMenu').dialog('option', 'buttons', [{text: 'Return', click: function() {$('#msgboxMainMenu').dialog('close');}}]);\r\n\t\t  var CreditsContent = \"<p style='text-align:center'>Story & Code by Dredux (DeepDredux)<br><span style='font-size:0.8em'>Music by Eric Matyas (www.soundimage.org)</span><br><br>Check out my social media for the latest updates!<table style='margin-left: auto; margin-right: auto;'> <tr><td style='text-align:right'><b>Twitter:</b></td><td><a href='https://twitter.com/DeepDredux'>@DeepDredux</a></td></tr></table>\"\r\n\t\t  \r\n\t\t  CreditsContent = CreditsContent + \"<br><div style='text-align:center'>Consider supporting the developer!</div><table style='margin-left: auto; margin-right: auto;'><tr><td style='text-align:right'><b>Tip Jar:</b></td><td><a href='https://ko-fi.com/deepdredux'>Ko-Fi.com/DeepDredux</a></td></tr></table>\"\r\n\t\t  \r\n\t\t  CreditsContent = CreditsContent + \"</p>\"\r\n\t\t  $('#msgboxMainMenuCaption').html(CreditsContent)\r\n\t\t \r\n\t\t}\r\n\t\t$('#msgboxMainMenu').dialog('open');\r\n\t}\r\n\telse {\r\n\t  // If modal page not defined close the modal\r\n\t  $('#msgboxMainMenu').dialog('close');\r\n\t}\r\n\t// Rerun theme to update buttons and the like\r\n\tASLEvent(\"ChangeUITheme\",\"Rerun\")\r\n  }\r\n  catch(ERROR) {\r\n\tconsole.log(ERROR);\r\n  }\r\n};\r\n\r\nfunction NewGame(GameRunning) {\r\n\t// Start a new game\r\n\tif (GameRunning=='True') {\r\n\t  ASLEvent(\"StartNewGame\",\"True\")\r\n\t}\r\n\telse {\r\n\t  ASLEvent(\"StartNewGame\",\"False\")\r\n\t}\r\n\t$('body').css('cursor', 'wait');\r\n\t// $('#msgboxMainMenu').dialog('close'); // Moved this to the StartNewGame quest function so it only closes when it's actually done.\r\n};\r\n\r\nfunction CloseMainMenuModal() {\r\n\t$('#msgboxMainMenu').dialog('close');\r\n};\r\n\r\n// 18+ Splash Screen Functions\r\nfunction Hide18WarningScreen() {\r\n  $('#18WarningScreen').append(\"<div id='18ThankYou' style='text-align:center'><br><b><i>Thank you. Enjoy your stay in Lillivale...</i> &#9786;</b></div>\")\r\n  setTimeout (function() {\r\n    //$('#18WarningScreen').hide({ effect: \"scale\", origin: [ \"bottom\", \"center\" ], duration: 1000 });\r\n    $('#18WarningScreen').hide({ effect: \"fade\", duration: 1000 , complete: function(){$('#18ThankYou').remove()} });\r\n    //$('#18WarningScreen').css('display','none');\r\n  }, 500)\r\n  setTimeout (function () {\r\n    // Unmute MenuAudio if present. Add delay equal to the start of the fadeout above.\r\n\tvar audio1 = document.getElementById(\"MenuAudio1\");\r\n    if (typeof optionalPage !== 'audio1') {\r\n\t  // Restart audio from beginning\r\n\t  audio1.play();\r\n\t  audio1.currentTime = 0;\r\n\t  audio1.muted = false;\r\n\t}\r\n\tvar audio2 = document.getElementById(\"MenuAudio2\");\r\n    if (typeof optionalPage !== 'audio2') {\r\n\t  // Restart audio from beginning\r\n\t  audio2.play();\r\n\t  audio2.currentTime = 0;\r\n\t  audio2.muted = false;\r\n\t}\r\n  }, 500)\r\n};\r\n\r\nfunction Show18WarningScreen() {\r\n  $('#18WarningScreen').show();\r\n  //$('#18WarningScreen').css('display','inline');\r\n    setTimeout (function () {\r\n    // Mute MenuAudio if present. Add a delay to give the menu time to initialize\r\n\tvar audio1 = document.getElementById(\"MenuAudio1\");\r\n\tvar audio2 = document.getElementById(\"MenuAudio2\");\r\n\tif (typeof optionalPage !== 'audio1') {\r\n      audio1.muted = true;\r\n\t}\r\n\tif (typeof optionalPage !== 'audio2') {\r\n      audio2.muted = true;\r\n\t}\r\n  }, 100)\r\n};\r\n```\r\n\r\n</details>\r\n\r\n3. Then, because the menu is not always visible, I have another Quest function to show it on start-up, then hide it when the player moves on from it. I do this by setting up a special MainMenu **room** in Quest that will run the following `ShowMainMenu()` function whenever the player enters it (or starts in it) to show it, then hide the main menu again when they leave:\r\n<details>\r\n\r\n```\r\n// Shows/hides the game's main menu\r\n// game.initMainMenu contains the html initializing the main menu object\r\n// Will Show the main menu if ShowMenu=True\r\n// Will Hide the main menu if ShowMenu=False. ShowMainMenu(False) should really only be called when first starting the game or in the 'Continue Game' case where the main menu was pulled up mid-game\r\nSuppressTurnscripts\r\nif (ShowMenu) {\r\n  game.OnMainMenuFlag = True\r\n  // JS.eval (\"$('#gameBorder').hide();\")\r\n  JS.eval (\"$('#txtCommandDiv').hide(); $('#gamePanesRunning').hide(); $('#divOutput').hide(); $('#BottomBar').hide(); $('#status').hide();\")\r\n  JS.eval (\"$('#MainMenu').show();\")\r\n  JS.eval (\"$('div#gameBorder').css('background-image', 'url(\" + game.MenuImageURL + \")');\")\r\n  JS.eval (\"$('div#gameBorder').css('background-repeat', 'no-repeat');\")\r\n  JS.eval (\"$('div#gameBorder').css('background-attachment', 'fixed');\")\r\n  JS.eval (\"$('div#gameBorder').css('background-size', '100% 100%');\")\r\n  ChangeUITheme (\"Light\")\r\n  // Add MenuAudio\r\n  AudioURL1 = GetFileURL(\"AmbientLoop.ogg\")\r\n  AudioURL2 = GetFileURL(\"Going-Different-Ways_Looping.ogg\")\r\n  JS.eval (\"$('#MainMenu').append('<audio autoplay loop id=\\\"MenuAudio1\\\"><source src=\\\"\"+AudioURL1+\"\\\" type=\\\"audio/ogg\\\"></audio>');\")\r\n  JS.eval (\"$('#MainMenu').append('<audio autoplay loop id=\\\"MenuAudio2\\\"><source src=\\\"\"+AudioURL2+\"\\\" type=\\\"audio/ogg\\\"></audio>');\")\r\n  Volume1 = 0.05\r\n  Volume2 = 0.1\r\n  // JS.eval (\"var audio=document.getElementById('MenuAudio');audio.volume=\"+Volume+\";\")\r\n  JS.eval (\"document.getElementById('MenuAudio1').volume=\"+Volume1+\";\")\r\n  JS.eval (\"document.getElementById('MenuAudio2').volume=\"+Volume2+\";\")\r\n}\r\nelse {\r\n  game.OnMainMenuFlag = False\r\n  // JS.eval (\"$('#gameBorder').show();\")\r\n  JS.eval (\"$('#txtCommandDiv').show(); $('#gamePanesRunning').show(); $('#divOutput').show(); $('#BottomBar').show(); $('#status').show();\")\r\n  JS.eval (\"$('#MainMenu').hide();\")\r\n  JS.eval (\"$('div#gameBorder').css('background-image', '');\")\r\n  JS.eval (\"$('div#gameBorder').css('background-repeat', '');\")\r\n  JS.eval (\"$('div#gameBorder').css('background-attachment', '');\")\r\n  JS.eval (\"$('div#gameBorder').css('background-size', '');\")\r\n  ChangeUITheme (game.UITheme_last)\r\n  // Fade Out then Remove MenuAudio\r\n  JS.eval (\"$('#MenuAudio1').animate({volume: 0.0}, 2000, function() {$('#MenuAudio1').remove();});\")\r\n  JS.eval (\"$('#MenuAudio2').animate({volume: 0.0}, 2000, function() {$('#MenuAudio2').remove();});\")\r\n  // JS.eval (\"$('#MenuAudio').remove();\")\r\n}\r\n```\r\n\r\n</details>\r\n\r\nA lot of the above code is specific to what I wanted to do for my game, so I wouldn't get too bogged down in the specifics, the important bit is having an HTML link (or button) on-screen that can call a JavaScript function that can then call a Quest function to do what you want.\r\n\r\nApologize if that's not super clear. Depending on what you want to do, there may be a simpler way or even a pre-existing Quest library out there to help you, but if you still want to stick with it and try your hand at some custom interface stuff like that main menu, definitely recommend brushing up on HTML/JavaScript.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm actually the one who made that main menu you're referencing. I'll preface this by saying this is all relatively advanced coding for Quest, but if that doesn't deter you I'll go into greater detail.</p>\n<p><strong>The short answer is:</strong> On start-up, a Quest script generates custom HTML code (using the JS.eval() Quest function to run jQuery calls) to build the look of the menu and all its links. I also wrote up a custom JavaScript file containing functions for each link, so when the player clicks one of the menu buttons, javascript can then run accordingly. For buttons that need to interact directly with Quest, I can use the <code>ASLEvent()</code> function in the JavaScript file (tutorial on ASLEvent <a href=\"http://docs.textadventures.co.uk/quest/ui-callback.html\">here</a>) to do what I want.</p>\n<p><strong>The longer answer is this:</strong></p>\n<ol>\n<li>On startup, Quest runs the following <code>game.initMainMenu</code> script:</li>\n</ol>\n<details>\n<pre><code>// Initialize Main Menu\nJS.eval (\"$('#MainMenu').remove();\")\ngame.MenuImageURL = GetFileURL(\"MenuJPG.jpg\")\nMenuContent = \"\"\n// Generate Title\nTitleFont = game.TitleFont\nif (TitleFont=\"CollegiateFLFImport\") {\n  TitleFontSize = \"360%\"\n}\nelse {\n  TitleFontSize = \"260%\"\n}\n// Set this boolean to True if I plan on using Main Menu image background, and should thus display title at top of screen\nTitleScreenImage = True\n// Otherwise, the title will be displayed in the center of the screen in black\nMenuContent = MenuContent + \"&lt;div id=\\\"MainMenu\\\" style=\\\"max-width:100vw\\\"&gt;\"\nMenuWrapper = \"&lt;div id=\\\"MainMenuWrapper\\\" style=\\\"display:table-cell; vertical-align:middle;position: absolute; width:98%; padding:5px;left: 50%;top: 50%;-webkit-transform: translate(-50%,-50%); -ms-transform: translate(-50%,-50%); transform: translate(-50%,-50%);\\\"&gt;\"\nMainMenuTitle = \"&lt;div id=\\\"MainMenuTitle\\\" style=\\\"text-align:center; font-size:\"+TitleFontSize+\";font-family:\"+TitleFont+\";\\\"&gt;\"+game.gamename+\"&lt;/div&gt;\"\nif (game.subtitle &lt;&gt; null) {\n  if (LengthOf(game.subtitle) &gt; 0) {\n    MainMenuTitle = MainMenuTitle + \"&lt;div id=\\\"MainMenuSubtitle\\\" style=\\\"text-align:center; font-size:130%;\\\"&gt;\"+game.subtitle+\"&lt;/div&gt;\"\n  }\n}\nif (game.author &lt;&gt; null) {\n  if (LengthOf(game.author) &gt; 0) {\n    MainMenuTitle = MainMenuTitle + \"&lt;div id=\\\"MainMenuAuthor\\\" style=\\\"text-align:center; font-size:130%;\\\"&gt;by \"+game.author+\"&lt;/div&gt;\"\n  }\n}\nif (TitleScreenImage) {\n  // Displays Title at top of screen, rather than middle\n  MenuContent = MenuContent + MainMenuTitle + MenuWrapper\n}\nelse {\n  // Display Title in middle of screen\n  MenuContent = MenuContent + MenuWrapper + MainMenuTitle\n}\nMenuContent = MenuContent + \"&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;\"\n// Generate Menu Options\nMenuFillColor = \"rgba(211,211,211,0.75)\"\nMenuContent = MenuContent + \"&lt;table id=\\\"MainMenuOptions\\\" style=\\\"text-align:center;vertical-align:middle;margin-left: auto; margin-right: auto;  width: 180px; border:solid; background-color:\"+MenuFillColor+\"; border-radius:5px; font-size:1.2em;\\\"&gt;\"\nMenuContent = MenuContent + \"&lt;tr&gt;&lt;td style=\\\"padding:10px;\\\"&gt;&lt;a class=\\\"cmdlink\\\" style=\\\"GetCurrentLinkTextFormat(); color:blue;\\\" onclick=showMainMenuModal(\\\"NewGame\\\")&gt;New Game&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;\"\nMenuContent = MenuContent + \"&lt;tr&gt;&lt;td style=\\\"padding:10px;\\\"&gt;&lt;a class=\\\"cmdlink\\\" style=\\\"GetCurrentLinkTextFormat(); color:blue;\\\" onclick=LoadGamePrompt()&gt;Load Game&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;\"\nMenuContent = MenuContent + \"&lt;tr&gt;&lt;td style=\\\"padding:10px;\\\"&gt;&lt;a class=\\\"cmdlink\\\" style=\\\"GetCurrentLinkTextFormat(); color:blue;\\\" onclick=showPopupJournal(\\\"fetishoptions\\\")&gt;Fetish Options&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;\"\nMenuContent = MenuContent + \"&lt;tr&gt;&lt;td style=\\\"padding:10px;\\\"&gt;&lt;a class=\\\"cmdlink\\\" style=\\\"GetCurrentLinkTextFormat(); color:blue;\\\" onclick=showMainMenuModal(\\\"Credits\\\")&gt;Credits&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;\"\nMenuContent = MenuContent + \"&lt;/table&gt;&lt;/div&gt;\"\n// Populate Bottom Corners\n// MenuContent = MenuContent + \"&lt;div style=\\\"position: absolute; bottom: 5px; left: 5px;\\\"&gt;Social Media1&lt;br&gt;Social Media2&lt;/div&gt;\"\nMenuContent = MenuContent + \"&lt;div style=\\\"position: absolute; bottom: 5px; right: 5px; -webkit-text-stroke: 0.8px rgb(54,54,54)\\\"&gt;v\"+ToString(game.version)+\"&lt;/div&gt;\"\nMenuContent = MenuContent + \"&lt;/div&gt;\"\nJS.eval (\"$('#gameBorder').append('\"+MenuContent+\"');\")\n// Application of Background image moved to the ShowMainMenu function\n// If Asura tower used as main menu background, set font color to rgb(231,234,223), otherwise use Black\nif (TitleScreenImage) {\n  TitleFontColor = \"rgb(231,234,223)\"\n  JS.setCss (\"#MainMenuTitle\", \"color:\"+TitleFontColor)\n  JS.eval (\"$('#MainMenuTitle').css('-webkit-text-stroke', '0.3px rgb(63,82,80)');\")\n  JS.setCss (\"#MainMenuSubtitle\", \"color:\"+TitleFontColor)\n  JS.eval (\"$('#MainMenuSubtitle').css('-webkit-text-stroke', '0.5px rgb(63,82,80)');\")\n  JS.setCss (\"#MainMenuAuthor\", \"color:\"+TitleFontColor)\n  JS.eval (\"$('#MainMenuAuthor').css('-webkit-text-stroke', '0.5px rgb(63,82,80)');\")\n}\n// Start the game with the Main Menu hidden\nJS.eval (\"$('#MainMenu').hide();\")\n</code></pre>\n</details>\n<ol start=\"2\">\n<li>In the code snippet above, each menu link has an <code>onclick</code> event tied to it, linking to a JavaScript function. Those JavaScript functions are here in a custom JavaScript file I made and added to the game (on desktop, put the .js file in the same directory as your game, then import it using the Advanced tab in the editor):</li>\n</ol>\n<details>\n<pre><code>// MainMenuJavaCode.js\n\nfunction showMainMenuModal(optionalPage) {\n\t// NOTE: optionalPage should be a string\n\t//If mainmenu modal not already open, then open it...\n  try {\n\tif (!!!document.getElementById(\"mainmenupopup\") || !$('#msgboxMainMenu').dialog('isOpen')) {\n      // Update height &amp; width according to page.\n\t  if (typeof optionalPage !== 'undefined') {\n\t\t  if (optionalPage === \"NewGame\" || optionalPage === \"NewGameWhileGameRunning\") {\n\t\t\tvar boxWidth = Math.min(400, $(window).width())\n\t\t\tvar boxHeight = 'auto'\n\t\t  }\n\t\t  // Load Game option opens the load code modal. No need for special code here.\n\t\t  // Similarly, if fetish options is selected, it should be calling showPopupJournal('fetishoptions')\n\t\t  else if (optionalPage === \"Credits\") {\n\t\t\tvar boxWidth = Math.min(560, $(window).width())\n\t\t\tvar boxHeight = 'auto'\n\t\t  }\n\t\t  else {\n\t\t    var boxWidth = 'auto'\n\t\t\tvar boxHeight = 'auto'\n\t\t  }\n\t  }\n  \t  else {\n\t    var boxWidth = Math.min(280, $(window).width())\n\t    var boxHeight = 'auto'\n\t  }\n\t  \n      var msgboxOptions = {\n          modal: true,\n          autoOpen: false,\n\t\t  resizable: false,\n\t\t  draggable: false,\n          title: \"MainMenu\",\n          width: boxWidth,\n\t\t  height: boxHeight,\n\t  \t  show: \"scale\",\n\t\t  hide: \"scale\",\n          buttons: [],\n          closeOnEscape: false,\n      };\n\t  $('#msgboxMainMenu').dialog(msgboxOptions);\n\t  // Give the messagebox modal an ID to more easily identify whether or not it's open\n\t  $(\"div#msgboxMainMenu\").parent().attr('id','mainmenupopup');\n\t  // Make position of dialog box \"fixed\" rather than \"absolute\"\n\t  $('#mainmenupopup').css(\"position\", \"fixed\");\n\t}\n\t// Check if optionalPage parameter is set. If it is, open to that page, if not then open to main page\n\tif (typeof optionalPage !== 'undefined') {\n\t\tif (optionalPage =='NewGame' || optionalPage == 'NewGameWhileGameRunning') {\n\t\t  $('#msgboxMainMenu').dialog('option', 'title', 'Start New Game?');\n\t\t  if (optionalPage=='NewGame') {\n\t\t    $('#msgboxMainMenuCaption').html(\"&lt;div style='font-size:1.1em'&gt;Would you like to start a new game?&lt;/div&gt;\")\n\t\t\t$('#msgboxMainMenuCaption').append(\"&lt;table style='width:100%;'&gt;&lt;tr&gt;&lt;b&gt;&lt;td style='text-align:left; padding-left:30%;'&gt;&lt;button style='font-size:1.1em;cursor:pointer;' onclick=NewGame('False');&gt;Yes&lt;/button&gt;&lt;/td&gt;&lt;td style='text-align:right; padding-right:30%;'&gt;&lt;button style='font-size:1.1em;cursor:pointer;' onclick=CloseMainMenuModal();&gt;No&lt;/button&gt;&lt;/td&gt;&lt;/b&gt;&lt;/tr&gt;&lt;/table&gt;\")\n\t\t  }\n\t\t  else {\n\t\t    $('#msgboxMainMenuCaption').html(\"&lt;div style='font-size:1.1em'&gt;Would you like to start a new game?&lt;/div&gt;&lt;div&gt;(WARNING: All unsaved progress will be lost!)&lt;/div&gt;\")\n\t\t\t$('#msgboxMainMenuCaption').append(\"&lt;table style='width:100%;'&gt;&lt;tr&gt;&lt;b&gt;&lt;td style='text-align:left; padding-left:30%;'&gt;&lt;button style='font-size:1.1em;cursor:pointer;' onclick=NewGame('True');&gt;Yes&lt;/button&gt;&lt;/td&gt;&lt;td style='text-align:right; padding-right:30%;'&gt;&lt;button style='font-size:1.1em;cursor:pointer;' onclick=CloseMainMenuModal();&gt;No&lt;/button&gt;&lt;/td&gt;&lt;/b&gt;&lt;/tr&gt;&lt;/table&gt;\")\n\t\t\t// TODO: Logic for starting a new game if game already in progress...\n\t\t  }\n\t\t}\n\t\telse if (optionalPage =='Credits') {\n\t\t  $('#msgboxMainMenu').dialog('option', 'title', 'Credits');\n\t\t  $('#msgboxMainMenu').dialog('option', 'buttons', [{text: 'Return', click: function() {$('#msgboxMainMenu').dialog('close');}}]);\n\t\t  var CreditsContent = \"&lt;p style='text-align:center'&gt;Story &amp; Code by Dredux (DeepDredux)&lt;br&gt;&lt;span style='font-size:0.8em'&gt;Music by Eric Matyas (www.soundimage.org)&lt;/span&gt;&lt;br&gt;&lt;br&gt;Check out my social media for the latest updates!&lt;table style='margin-left: auto; margin-right: auto;'&gt; &lt;tr&gt;&lt;td style='text-align:right'&gt;&lt;b&gt;Twitter:&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='https://twitter.com/DeepDredux'&gt;@DeepDredux&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\"\n\t\t  \n\t\t  CreditsContent = CreditsContent + \"&lt;br&gt;&lt;div style='text-align:center'&gt;Consider supporting the developer!&lt;/div&gt;&lt;table style='margin-left: auto; margin-right: auto;'&gt;&lt;tr&gt;&lt;td style='text-align:right'&gt;&lt;b&gt;Tip Jar:&lt;/b&gt;&lt;/td&gt;&lt;td&gt;&lt;a href='https://ko-fi.com/deepdredux'&gt;Ko-Fi.com/DeepDredux&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\"\n\t\t  \n\t\t  CreditsContent = CreditsContent + \"&lt;/p&gt;\"\n\t\t  $('#msgboxMainMenuCaption').html(CreditsContent)\n\t\t \n\t\t}\n\t\t$('#msgboxMainMenu').dialog('open');\n\t}\n\telse {\n\t  // If modal page not defined close the modal\n\t  $('#msgboxMainMenu').dialog('close');\n\t}\n\t// Rerun theme to update buttons and the like\n\tASLEvent(\"ChangeUITheme\",\"Rerun\")\n  }\n  catch(ERROR) {\n\tconsole.log(ERROR);\n  }\n};\n\nfunction NewGame(GameRunning) {\n\t// Start a new game\n\tif (GameRunning=='True') {\n\t  ASLEvent(\"StartNewGame\",\"True\")\n\t}\n\telse {\n\t  ASLEvent(\"StartNewGame\",\"False\")\n\t}\n\t$('body').css('cursor', 'wait');\n\t// $('#msgboxMainMenu').dialog('close'); // Moved this to the StartNewGame quest function so it only closes when it's actually done.\n};\n\nfunction CloseMainMenuModal() {\n\t$('#msgboxMainMenu').dialog('close');\n};\n\n// 18+ Splash Screen Functions\nfunction Hide18WarningScreen() {\n  $('#18WarningScreen').append(\"&lt;div id='18ThankYou' style='text-align:center'&gt;&lt;br&gt;&lt;b&gt;&lt;i&gt;Thank you. Enjoy your stay in Lillivale...&lt;/i&gt; &amp;#9786;&lt;/b&gt;&lt;/div&gt;\")\n  setTimeout (function() {\n    //$('#18WarningScreen').hide({ effect: \"scale\", origin: [ \"bottom\", \"center\" ], duration: 1000 });\n    $('#18WarningScreen').hide({ effect: \"fade\", duration: 1000 , complete: function(){$('#18ThankYou').remove()} });\n    //$('#18WarningScreen').css('display','none');\n  }, 500)\n  setTimeout (function () {\n    // Unmute MenuAudio if present. Add delay equal to the start of the fadeout above.\n\tvar audio1 = document.getElementById(\"MenuAudio1\");\n    if (typeof optionalPage !== 'audio1') {\n\t  // Restart audio from beginning\n\t  audio1.play();\n\t  audio1.currentTime = 0;\n\t  audio1.muted = false;\n\t}\n\tvar audio2 = document.getElementById(\"MenuAudio2\");\n    if (typeof optionalPage !== 'audio2') {\n\t  // Restart audio from beginning\n\t  audio2.play();\n\t  audio2.currentTime = 0;\n\t  audio2.muted = false;\n\t}\n  }, 500)\n};\n\nfunction Show18WarningScreen() {\n  $('#18WarningScreen').show();\n  //$('#18WarningScreen').css('display','inline');\n    setTimeout (function () {\n    // Mute MenuAudio if present. Add a delay to give the menu time to initialize\n\tvar audio1 = document.getElementById(\"MenuAudio1\");\n\tvar audio2 = document.getElementById(\"MenuAudio2\");\n\tif (typeof optionalPage !== 'audio1') {\n      audio1.muted = true;\n\t}\n\tif (typeof optionalPage !== 'audio2') {\n      audio2.muted = true;\n\t}\n  }, 100)\n};\n</code></pre>\n</details>\n<ol start=\"3\">\n<li>Then, because the menu is not always visible, I have another Quest function to show it on start-up, then hide it when the player moves on from it. I do this by setting up a special MainMenu <strong>room</strong> in Quest that will run the following <code>ShowMainMenu()</code> function whenever the player enters it (or starts in it) to show it, then hide the main menu again when they leave:</li>\n</ol>\n<details>\n<pre><code>// Shows/hides the game's main menu\n// game.initMainMenu contains the html initializing the main menu object\n// Will Show the main menu if ShowMenu=True\n// Will Hide the main menu if ShowMenu=False. ShowMainMenu(False) should really only be called when first starting the game or in the 'Continue Game' case where the main menu was pulled up mid-game\nSuppressTurnscripts\nif (ShowMenu) {\n  game.OnMainMenuFlag = True\n  // JS.eval (\"$('#gameBorder').hide();\")\n  JS.eval (\"$('#txtCommandDiv').hide(); $('#gamePanesRunning').hide(); $('#divOutput').hide(); $('#BottomBar').hide(); $('#status').hide();\")\n  JS.eval (\"$('#MainMenu').show();\")\n  JS.eval (\"$('div#gameBorder').css('background-image', 'url(\" + game.MenuImageURL + \")');\")\n  JS.eval (\"$('div#gameBorder').css('background-repeat', 'no-repeat');\")\n  JS.eval (\"$('div#gameBorder').css('background-attachment', 'fixed');\")\n  JS.eval (\"$('div#gameBorder').css('background-size', '100% 100%');\")\n  ChangeUITheme (\"Light\")\n  // Add MenuAudio\n  AudioURL1 = GetFileURL(\"AmbientLoop.ogg\")\n  AudioURL2 = GetFileURL(\"Going-Different-Ways_Looping.ogg\")\n  JS.eval (\"$('#MainMenu').append('&lt;audio autoplay loop id=\\\"MenuAudio1\\\"&gt;&lt;source src=\\\"\"+AudioURL1+\"\\\" type=\\\"audio/ogg\\\"&gt;&lt;/audio&gt;');\")\n  JS.eval (\"$('#MainMenu').append('&lt;audio autoplay loop id=\\\"MenuAudio2\\\"&gt;&lt;source src=\\\"\"+AudioURL2+\"\\\" type=\\\"audio/ogg\\\"&gt;&lt;/audio&gt;');\")\n  Volume1 = 0.05\n  Volume2 = 0.1\n  // JS.eval (\"var audio=document.getElementById('MenuAudio');audio.volume=\"+Volume+\";\")\n  JS.eval (\"document.getElementById('MenuAudio1').volume=\"+Volume1+\";\")\n  JS.eval (\"document.getElementById('MenuAudio2').volume=\"+Volume2+\";\")\n}\nelse {\n  game.OnMainMenuFlag = False\n  // JS.eval (\"$('#gameBorder').show();\")\n  JS.eval (\"$('#txtCommandDiv').show(); $('#gamePanesRunning').show(); $('#divOutput').show(); $('#BottomBar').show(); $('#status').show();\")\n  JS.eval (\"$('#MainMenu').hide();\")\n  JS.eval (\"$('div#gameBorder').css('background-image', '');\")\n  JS.eval (\"$('div#gameBorder').css('background-repeat', '');\")\n  JS.eval (\"$('div#gameBorder').css('background-attachment', '');\")\n  JS.eval (\"$('div#gameBorder').css('background-size', '');\")\n  ChangeUITheme (game.UITheme_last)\n  // Fade Out then Remove MenuAudio\n  JS.eval (\"$('#MenuAudio1').animate({volume: 0.0}, 2000, function() {$('#MenuAudio1').remove();});\")\n  JS.eval (\"$('#MenuAudio2').animate({volume: 0.0}, 2000, function() {$('#MenuAudio2').remove();});\")\n  // JS.eval (\"$('#MenuAudio').remove();\")\n}\n</code></pre>\n</details>\n<p>A lot of the above code is specific to what I wanted to do for my game, so I wouldn't get too bogged down in the specifics, the important bit is having an HTML link (or button) on-screen that can call a JavaScript function that can then call a Quest function to do what you want.</p>\n<p>Apologize if that's not super clear. Depending on what you want to do, there may be a simpler way or even a pre-existing Quest library out there to help you, but if you still want to stick with it and try your hand at some custom interface stuff like that main menu, definitely recommend brushing up on HTML/JavaScript.</p>\n\n",
      "PostDate": "2023-10-12T22:49:49.639157Z",
      "LastEditDate": "2023-10-12T23:27:34.7155504Z",
      "link": null
    }
  ]
}
