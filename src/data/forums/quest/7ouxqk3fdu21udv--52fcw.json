{
  "Topic": {
    "TopicId": "7ouxqk3fdu21udv--52fcw",
    "ForumId": "10",
    "Title": "[Kind of Solved] A Command Link that runs multiple commands?",
    "LastUpdated": "2020-03-08T08:39:18.2674641Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "1591328f-3003-45ee-b3e9-8b998231cda1",
      "UserId": 468424,
      "Username": "ZephyrusScary",
      "AvatarUrl": "https://secure.gravatar.com/avatar/6aaf5e562bea9747f0a8a177a78be6c3?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I understand the basics of a command link, that it looks like {command:[command run]:[text player sees]}. However, I have only found examples of running a single command per link, and I wish to run more. Specifically, I want a link to both move the player to a room and apply a flag (preferably on the player, but if something else is easier/the only way, it should still work).",
      "EditableFormat": "markdown",
      "HTML": "<p>I understand the basics of a command link, that it looks like {command:[command run]:[text player sees]}. However, I have only found examples of running a single command per link, and I wish to run more. Specifically, I want a link to both move the player to a room and apply a flag (preferably on the player, but if something else is easier/the only way, it should still work).</p>\n\n",
      "PostDate": "2020-03-08T08:39:18.2674641Z",
      "LastEditDate": "2020-03-09T01:40:19.8009751Z",
      "link": null
    },
    {
      "PostId": "48897cfc-2040-4288-9956-c9b3290427df",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "A command link simulates the player running a command; not a script command.\r\n\r\nIf there's something the player can do that results in both moving and having a flag set, then create a command for it.\r\n\r\nOr: What you want isn't a command link that runs more than one command. It's a command that has more than one effect.",
      "EditableFormat": "markdown",
      "HTML": "<p>A command link simulates the player running a command; not a script command.</p>\n<p>If there's something the player can do that results in both moving and having a flag set, then create a command for it.</p>\n<p>Or: What you want isn't a command link that runs more than one command. It's a command that has more than one effect.</p>\n\n",
      "PostDate": "2020-03-08T10:33:41.2675392Z",
      "LastEditDate": "2020-03-08T10:34:52.6462617Z",
      "link": null
    },
    {
      "PostId": "809468fd-5cfc-4bd1-87a3-5eca5ce53df1",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "you can have  one or many script actions in anything that can hold scripts (Elements that can hold scripts: Commands, Functions, Object's Script Attributes, Turnscripts, Timers, Delgates, etc)\r\n\r\nhttps://docs.textadventures.co.uk/quest/elements/command.html\r\n\r\nan example of doing multiple script actions in a Command (and in the special 'game' Object's special 'start' Script Attribute too, and in my 'testing_object' Object's 'testing_script' Script Attribute, as well, lol):\r\n\r\n```\r\n<game name=\"NAME_OF_GAME\">\r\n\r\n  <attr name=\"start\" type=\"script\">\r\n\r\n    invoke (testing_object.testing_script)\r\n\r\n    msg (\"{command:example:this is my example command}\")\r\n\r\n  </attr>\r\n\r\n</game>\r\n\r\n<object name=\"room\">\r\n\r\n  <inherit name=\"editor_room\" />\r\n\r\n</object>\r\n\r\n<object name=\"room99\">\r\n\r\n  <inherit name=\"editor_room\" />\r\n\r\n</object>\r\n\r\n<object name=\"player\">\r\n\r\n  <inherit name=\"editor_object\" />\r\n  <inherit name=\"editor_player\" />\r\n\r\n  <attr name=\"parent\" type=\"object\">room</attr>\r\n\r\n  <attr name=\"alias\" type=\"string\">unknown</attr>\r\n\r\n  <attr name=\"strength\" type=\"int\">0</attr>\r\n\r\n  <attr name=\"flying\" type=\"boolean\">false</attr>\r\n\r\n</object>\r\n\r\n<object name=\"testing_object\">\r\n\r\n  <inherit name=\"editor_object\" />\r\n\r\n  <attr name=\"testing_script\" type=\"script\">\r\n\r\n    msg (\"Player Name: \" + player.alias)\r\n    msg (\"Current Room Location: \" + player.parent.name)\r\n    msg (\"Player Strength: \" + player.strength)\r\n    msg (\"Player Flying: \" + player.flying\r\n\r\n  </attr>\r\n\r\n</object>\r\n\r\n<command name=\"example_command\">\r\n\r\n  <pattern>example</pattern>\r\n\r\n  <script>\r\n\r\n    player.alias = \"john doe\"\r\n    player.parent = room99 // this will move the 'player' to 'room99'\r\n    player.strength = player.strength + 5\r\n    player.flying = true\r\n\r\n    invoke (testing_object.testing_script)\r\n\r\n  </script>\r\n\r\n</command>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>you can have  one or many script actions in anything that can hold scripts (Elements that can hold scripts: Commands, Functions, Object's Script Attributes, Turnscripts, Timers, Delgates, etc)</p>\n<p>https://docs.textadventures.co.uk/quest/elements/command.html</p>\n<p>an example of doing multiple script actions in a Command (and in the special 'game' Object's special 'start' Script Attribute too, and in my 'testing_object' Object's 'testing_script' Script Attribute, as well, lol):</p>\n<pre><code>&lt;game name=\"NAME_OF_GAME\"&gt;\n\n  &lt;attr name=\"start\" type=\"script\"&gt;\n\n    invoke (testing_object.testing_script)\n\n    msg (\"{command:example:this is my example command}\")\n\n  &lt;/attr&gt;\n\n&lt;/game&gt;\n\n&lt;object name=\"room\"&gt;\n\n  &lt;inherit name=\"editor_room\" /&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"room99\"&gt;\n\n  &lt;inherit name=\"editor_room\" /&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"player\"&gt;\n\n  &lt;inherit name=\"editor_object\" /&gt;\n  &lt;inherit name=\"editor_player\" /&gt;\n\n  &lt;attr name=\"parent\" type=\"object\"&gt;room&lt;/attr&gt;\n\n  &lt;attr name=\"alias\" type=\"string\"&gt;unknown&lt;/attr&gt;\n\n  &lt;attr name=\"strength\" type=\"int\"&gt;0&lt;/attr&gt;\n\n  &lt;attr name=\"flying\" type=\"boolean\"&gt;false&lt;/attr&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"testing_object\"&gt;\n\n  &lt;inherit name=\"editor_object\" /&gt;\n\n  &lt;attr name=\"testing_script\" type=\"script\"&gt;\n\n    msg (\"Player Name: \" + player.alias)\n    msg (\"Current Room Location: \" + player.parent.name)\n    msg (\"Player Strength: \" + player.strength)\n    msg (\"Player Flying: \" + player.flying\n\n  &lt;/attr&gt;\n\n&lt;/object&gt;\n\n&lt;command name=\"example_command\"&gt;\n\n  &lt;pattern&gt;example&lt;/pattern&gt;\n\n  &lt;script&gt;\n\n    player.alias = \"john doe\"\n    player.parent = room99 // this will move the 'player' to 'room99'\n    player.strength = player.strength + 5\n    player.flying = true\n\n    invoke (testing_object.testing_script)\n\n  &lt;/script&gt;\n\n&lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2020-03-08T23:46:03.6975818Z",
      "LastEditDate": "2020-03-08T23:54:17.0041994Z",
      "link": null
    },
    {
      "PostId": "8f9bc6b3-3d5b-4c81-833f-ed39dd366e8c",
      "UserId": 468424,
      "Username": "ZephyrusScary",
      "AvatarUrl": "https://secure.gravatar.com/avatar/6aaf5e562bea9747f0a8a177a78be6c3?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks, you two, but I managed to finagle a workaround.\r\n\r\nI just have the \"go to\" command move the player to a \"dummy room\" that applies the flag and immediately dumps the player into the true target room using \"before entering\" and \"after entering\" scripts. Clunky, bad code, probably, but it works!",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks, you two, but I managed to finagle a workaround.</p>\n<p>I just have the \"go to\" command move the player to a \"dummy room\" that applies the flag and immediately dumps the player into the true target room using \"before entering\" and \"after entering\" scripts. Clunky, bad code, probably, but it works!</p>\n\n",
      "PostDate": "2020-03-09T01:44:10.4187352Z",
      "LastEditDate": "2020-03-09T03:01:49.9463116Z",
      "link": null
    },
    {
      "PostId": "2f082d94-46fc-4cd9-b9d7-3687ecf60383",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If the command is \"go to\", you could also put a script on the exit so that it both sets a flag and moves the player.",
      "EditableFormat": "markdown",
      "HTML": "<p>If the command is \"go to\", you could also put a script on the exit so that it both sets a flag and moves the player.</p>\n\n",
      "PostDate": "2020-03-09T09:02:59.4698898Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f8aa5409-ff8e-48fa-b0fb-eb40293f21b7",
      "UserId": 468424,
      "Username": "ZephyrusScary",
      "AvatarUrl": "https://secure.gravatar.com/avatar/6aaf5e562bea9747f0a8a177a78be6c3?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, didn't mention this because I didn't think it was relevant, but I'm making one of those enhanced gamebooks, \"Pixie-style\". I wanted all choices to lead to the same page, but apply different flags, because the result of the choice will hit the player later. The point of the flags is so I wouldn't have to copy-paste four-ish page-lengths worth of choices onto three branches, which I think would not just be clunkier than my \"dummy rooms\", but a huge headache to edit!",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, didn't mention this because I didn't think it was relevant, but I'm making one of those enhanced gamebooks, \"Pixie-style\". I wanted all choices to lead to the same page, but apply different flags, because the result of the choice will hit the player later. The point of the flags is so I wouldn't have to copy-paste four-ish page-lengths worth of choices onto three branches, which I think would not just be clunkier than my \"dummy rooms\", but a huge headache to edit!</p>\n\n",
      "PostDate": "2020-03-09T21:44:03.8508904Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d5aac10d-0e19-43d1-8c71-2a8dd96241b3",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, that makes sense. Yes, for a gamebook or CYOA the \"dummy room\" is the standard method.\r\n\r\nThere's a few different ways to do gamebooks in TA mode; some of them might give you more flexibility for something like this, so that the additional room isn't necessary. For example, if you're using exits to represent choices, you can have multiple exits pointing to the same destination but with different scripts on them. Or you could create a new command just for that room, which is called by command link.\r\n\r\nIn a text adventure, there's an option to allow multiple commands per line: a command like \"get book. go north.\". There's nothing to stop you using a command like that in a command link.\r\nThe best way to do it really depends on the system of your game.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, that makes sense. Yes, for a gamebook or CYOA the \"dummy room\" is the standard method.</p>\n<p>There's a few different ways to do gamebooks in TA mode; some of them might give you more flexibility for something like this, so that the additional room isn't necessary. For example, if you're using exits to represent choices, you can have multiple exits pointing to the same destination but with different scripts on them. Or you could create a new command just for that room, which is called by command link.</p>\n<p>In a text adventure, there's an option to allow multiple commands per line: a command like \"get book. go north.\". There's nothing to stop you using a command like that in a command link.<br>\nThe best way to do it really depends on the system of your game.</p>\n\n",
      "PostDate": "2020-03-09T23:43:43.3215883Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1683e94b-7220-4622-a61c-5ee3f22a7317",
      "UserId": 468424,
      "Username": "ZephyrusScary",
      "AvatarUrl": "https://secure.gravatar.com/avatar/6aaf5e562bea9747f0a8a177a78be6c3?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks! By getting me to look back and retool the exits, you don't even know how much you just helped me!\r\n\r\nTurns out that, while I was toying around with the dummy room concept, I had used \"Page04\" to dump directly into \"Page05\", and changed Page04 to \"Jelly\" (one of the choices) without realizing what I'd done. At least I only have about a dozen rooms to renumber!\r\n\r\nAnyway, so what I've taken away from this is that a Command Link doesn't need to be able to call multiple scripts, as long as the command being performed can, itself, call other scripts (rooms, exits, objects... basically anything)?\r\n\r\n(Sorry if that's bad terminology. My coding knowledge is barebones and almost 20 years old.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks! By getting me to look back and retool the exits, you don't even know how much you just helped me!</p>\n<p>Turns out that, while I was toying around with the dummy room concept, I had used \"Page04\" to dump directly into \"Page05\", and changed Page04 to \"Jelly\" (one of the choices) without realizing what I'd done. At least I only have about a dozen rooms to renumber!</p>\n<p>Anyway, so what I've taken away from this is that a Command Link doesn't need to be able to call multiple scripts, as long as the command being performed can, itself, call other scripts (rooms, exits, objects... basically anything)?</p>\n<p>(Sorry if that's bad terminology. My coding knowledge is barebones and almost 20 years old.)</p>\n\n",
      "PostDate": "2020-03-10T00:38:42.1332662Z",
      "LastEditDate": "2020-03-10T00:49:32.9479101Z",
      "link": null
    }
  ]
}
