{
  "Topic": {
    "TopicId": "t0muycp6nucybo_-qrmouq",
    "ForumId": "10",
    "Title": "KV's Old Nautical Directions Library? [[paranormally solved?]]",
    "LastUpdated": "2018-06-20T08:11:31.3895125Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "6c27d9b2-5d99-4e33-b698-6553b52c42ca",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Anyone have a copy of it that I could copy?  It used to be available here (now just a 404 error):\r\n\r\nhttp://textadventures.co.uk/forum/samples/topic/45kehg8oz0_7eumput3cag/nautical-directions\r\n\r\nDoes it even work with ASLX version 580?",
      "EditableFormat": "markdown",
      "HTML": "<p>Anyone have a copy of it that I could copy?  It used to be available here (now just a 404 error):</p>\n<p>http://textadventures.co.uk/forum/samples/topic/45kehg8oz0_7eumput3cag/nautical-directions</p>\n<p>Does it even work with ASLX version 580?</p>\n\n",
      "PostDate": "2018-06-20T08:11:31.3895125Z",
      "LastEditDate": "2018-06-20T23:03:13.4352341Z",
      "link": null
    },
    {
      "PostId": "e1c8d110-ec10-4bde-a964-223e54e1f3f7",
      "UserId": 362613,
      "Username": "Mr. Parser",
      "AvatarUrl": "https://i.imgur.com/Fz7sf1Pb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Mister Pixie made one too\r\n\r\nhttps://github.com/ThePix/quest/wiki/Library:-Port-and-starboard",
      "EditableFormat": "markdown",
      "HTML": "<p>Mister Pixie made one too</p>\n<p>https://github.com/ThePix/quest/wiki/Library:-Port-and-starboard</p>\n\n",
      "PostDate": "2018-06-20T09:08:57.0127522Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7efa1629-73d9-4179-972a-ff2adfc6e05a",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It is there for me.\r\n\r\nIt is better than mine as it allows you to swap between the two.",
      "EditableFormat": "markdown",
      "HTML": "<p>It is there for me.</p>\n<p>It is better than mine as it allows you to swap between the two.</p>\n\n",
      "PostDate": "2018-06-20T10:54:11.4796513Z",
      "LastEditDate": "2018-06-20T10:54:48.4162408Z",
      "link": null
    },
    {
      "PostId": "98fefaae-0299-4bcf-ba8a-6a2e41004f37",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The link posted by Dcoder works for me too.\r\n\r\nIs there any way to take advantage of that library when working with the web editor?",
      "EditableFormat": "markdown",
      "HTML": "<p>The link posted by Dcoder works for me too.</p>\n<p>Is there any way to take advantage of that library when working with the web editor?</p>\n\n",
      "PostDate": "2018-06-20T16:51:08.3276613Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "52001278-96d5-498e-ace3-83a592e126f5",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "There have been unsubstantiated rumors of KV-like poltergeist sightings.  One such report has it that a mysterious entity has updated the Nautical Directions link that I referred to earlier.  Thank you ghost!",
      "EditableFormat": "markdown",
      "HTML": "<p>There have been unsubstantiated rumors of KV-like poltergeist sightings.  One such report has it that a mysterious entity has updated the Nautical Directions link that I referred to earlier.  Thank you ghost!</p>\n\n",
      "PostDate": "2018-06-20T22:56:08.2122299Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "86efbf54-ce94-40bf-9824-59d4d64d381d",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "- \"...KV-like poltergeist sightings.\"\r\n\r\nIt was probably Richard Headkid.  See below...\r\n\r\n> hit RH\r\nYour hand goes right through him. \"Pseudonym,\" says RH, pointing a thumb at himself.\r\n\r\n> hit RH\r\n\"You can't hit me. Just give up,\" says RH.\r\n\r\n> hit RH\r\n\"How many times do you think I'll give a different response?\" asks RH.\r\n\r\n> hit RH\r\n\"This is fun, isn't it?\" sighs RH.\r\n\r\n> hit RH\r\n\"Why do you keep trying to hit me, man? That's not very Fonzie-like.\" RH shakes his head and goes back to work on the group project.\r\n\r\nhttp://textadventures.co.uk/games/view/jymfhimg00c5cvrdqna7xa/pixies-quest",
      "EditableFormat": "markdown",
      "HTML": "<ul>\n<li>\"...KV-like poltergeist sightings.\"</li>\n</ul>\n<p>It was probably Richard Headkid.  See below...</p>\n<blockquote>\n<p>hit RH<br>\nYour hand goes right through him. \"Pseudonym,\" says RH, pointing a thumb at himself.</p>\n</blockquote>\n<blockquote>\n<p>hit RH<br>\n\"You can't hit me. Just give up,\" says RH.</p>\n</blockquote>\n<blockquote>\n<p>hit RH<br>\n\"How many times do you think I'll give a different response?\" asks RH.</p>\n</blockquote>\n<blockquote>\n<p>hit RH<br>\n\"This is fun, isn't it?\" sighs RH.</p>\n</blockquote>\n<blockquote>\n<p>hit RH<br>\n\"Why do you keep trying to hit me, man? That's not very Fonzie-like.\" RH shakes his head and goes back to work on the group project.</p>\n</blockquote>\n<p>http://textadventures.co.uk/games/view/jymfhimg00c5cvrdqna7xa/pixies-quest</p>\n\n",
      "PostDate": "2018-06-21T01:11:27.6429626Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c8aaba5e-58b2-4873-a490-1be163151f5e",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So is there any way to take advantage of that library when working with the web editor?",
      "EditableFormat": "markdown",
      "HTML": "<p>So is there any way to take advantage of that library when working with the web editor?</p>\n\n",
      "PostDate": "2018-06-21T02:23:37.3205017Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "65947ece-3ff6-4372-ab13-97980b7f0905",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "No. The web editor has a few restrictions, and these libraries use pretty much all of them: type, aliases for exits, templates, embedded JavaScript. I will have a think about whether there is an alternative approach.",
      "EditableFormat": "markdown",
      "HTML": "<p>No. The web editor has a few restrictions, and these libraries use pretty much all of them: type, aliases for exits, templates, embedded JavaScript. I will have a think about whether there is an alternative approach.</p>\n\n",
      "PostDate": "2018-06-21T07:45:02.9389539Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "da92d45c-fbcc-41b6-82bd-c622c9756ba7",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you figure something out, I'd love to take advantage of it. I am using the web editor to create a game set on a ship, so using starboard/port would be much cooler.",
      "EditableFormat": "markdown",
      "HTML": "<p>If you figure something out, I'd love to take advantage of it. I am using the web editor to create a game set on a ship, so using starboard/port would be much cooler.</p>\n\n",
      "PostDate": "2018-06-22T15:04:08.6443816Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3d35a431-55a1-4ec1-989f-8c4bbf7895f8",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So far the ideas I had came to nothing. It may not be possible.",
      "EditableFormat": "markdown",
      "HTML": "<p>So far the ideas I had came to nothing. It may not be possible.</p>\n\n",
      "PostDate": "2018-06-22T18:49:41.069834Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6fa88603-f501-42c3-8fb7-e84ddda41775",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I tried a few things online, too.  Nothing worked.  (I still have a couple of ideas, though.)\r\n\r\n---\r\nI didn't even know we can't set a non-directional exit's alias in the GUI online (and I just now noticed that Pixie mentioned this in a previous post in this thread).  Even if we name the exit, the alias of the room the exit leads to is what is displayed in the exit list.\r\n\r\nI had to name the exit then change the alias of that exit in the start script to add an alias.",
      "EditableFormat": "markdown",
      "HTML": "<p>I tried a few things online, too.  Nothing worked.  (I still have a couple of ideas, though.)</p>\n<hr>\n<p>I didn't even know we can't set a non-directional exit's alias in the GUI online (and I just now noticed that Pixie mentioned this in a previous post in this thread).  Even if we name the exit, the alias of the room the exit leads to is what is displayed in the exit list.</p>\n<p>I had to name the exit then change the alias of that exit in the start script to add an alias.</p>\n\n",
      "PostDate": "2018-06-23T02:20:25.9893992Z",
      "LastEditDate": "2018-06-23T02:39:49.9466458Z",
      "link": null
    },
    {
      "PostId": "cc2ebc6c-5e9a-48ae-bf54-73b65d0452a2",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay...  I made it work online, but it works a little differently.\r\n\r\n...and this will not be over quickly.\r\n\r\nFor online users:\r\n---\r\n\r\n<details>\r\n\r\n---\r\n### Add this line of code to your start script in code view:\r\n\r\n```\r\nSetupNautical\r\n```\r\n![image](https://user-images.githubusercontent.com/30656341/41806009-0f3676e6-767a-11e8-9ad0-fef82a41f4bc.png)\r\n\r\n---\r\n### Turn on the advanced scripts for the game object.\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806007-d83c2ce4-7679-11e8-88f4-8aa5c5504354.png)\r\n\r\n---\r\n### Add this to the User Interface Initialisation script in code view:\r\n\r\n```\r\nSendToJsEval (js.description)\r\nJS.changeCompass ()\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806017-32079d4e-767a-11e8-9e44-f10d0d1f7e7f.png)\r\n\r\n---\r\n### Create a turn script named ```nautical_buttons_turnscript```.\r\n\r\nPaste this in for the script in code view:\r\n\r\n```\r\n// Version 2\r\nif (ListCount(FilterByAttribute (ListParents(game.pov), \"shiptype\", true)) > 0) {\r\n  list = NewStringList()\r\n  foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\r\n    list add (list, exit.alias)\r\n  }\r\n  JS.updateShipCompass (Join(list, \"/\"))\r\n}\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806026-65112552-767a-11e8-8b43-b8589ca8a8d3.png)\r\n\r\n---\r\n### Create a room named ```js```.\r\n\r\nPast this into the description as text (**<u>NOT</u> in code view**):\r\n\r\n```\r\nvar onBoard = false;\r\nvar shipButtons = '<div id=\"dir-holder\" style=\"display:none;\"><div id=\"ship-nav\"><table id=\"ship-directions\"><tr><td></td><td>';\r\nshipButtons += '<button id=\"cmdCompassF\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"fore\" onclick=\"compassClick(\\'fore\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-n\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr>';\r\nshipButtons += '<tr><td><button id=\"cmdCompassP\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"port\" onclick=\"compassClick(\\'port\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-w\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></td><td></td><td></button>';\r\nshipButtons += '<button id=\"cmdCompassSB\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"starboard\" onclick=\"compassClick(\\'starboard\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-e\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr>';\r\nshipButtons += '<tr><td></td><td><button id=\"cmdCompassA\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"aft\" onclick=\"compassClick(\\'aft\\');\" role=\"button\" ><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-s\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr></table>';\r\nshipButtons += '</div></div>';\r\nfunction changeCompass(){\r\n  $('body').append(shipButtons);\r\n  $(\"#ship-directions\").css(\"border-spacing\",\"0\");\r\n  $(\"#cmdCompassNW\").parent().parent().parent().attr('id','def-nav');\r\n  $('#ship-nav').hide();$('#def-nav').parent().append($('#dir-holder').html());\r\n  $(\".shipcompassbutton\").each(function(){\r\n    $(this).button().button(\"enable\").button(\"disable\");\r\n    $(\".shipcompassbutton span\").css(\"left\", \"0.8em\");$(\".shipcompassbutton .ui-button-text\").css('padding','.8em .8em');\r\n  });\r\n};\r\nfunction toggleNav(){\r\n  $(\"#def-nav, #ship-nav\").toggle()\r\n};\r\nfunction updateShipCompass(data){\r\n  var exits = data.split(\"/\");\r\n  $(\".shipcompassbutton\").each(function(){\r\n    for (var exit in exits){\r\n      if($(this).attr('title') === exits[exit]){\r\n        $(this).button(\"enable\");\r\n        break;\r\n      }else{\r\n        $(this).button(\"disable\");\r\n      }\r\n    }\r\n  });\r\n};\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806032-9f128570-767a-11e8-82ff-59c9eb74b685.png)\r\n\r\n---\r\n### Create a function named ```SetupNautical```\r\n\r\n(It has no parameters, nor does it have a return type.)\r\n\r\nPaste this in for the script in code view:\r\n\r\n```\r\ngame.compassdirections = ListExclude (game.compassdirections, \"\")\r\nlist add (game.compassdirections, \"fore\")\r\nlist add (game.compassdirections, \"port\")\r\nlist add (game.compassdirections, \"starboard\")\r\nlist add (game.compassdirections, \"aft\")\r\nlist add (game.compassdirections, \"f\")\r\nlist add (game.compassdirections, \"p\")\r\nlist add (game.compassdirections, \"sb\")\r\nlist add (game.compassdirections, \"a\")\r\nrequest (SetCompassDirections, Join(game.compassdirections, \";\"))\r\ngo.pattern = \"^go to (?\"+Chr(60)+\"exit>.*)$|^go (?\"+Chr(60)+\"exit>.*)$|^(?\"+Chr(60)+\"exit>forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\r\nlookdir.pattern = \"^look (?\"+Chr(60)+\"exit>forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\r\nforeach (exit, AllExits()) {\r\n  if (StartsWith (exit.name, \"fore\")) {\r\n    exit.alias = \"fore\"\r\n    exit.alt = Split(\"f;forward\")\r\n  }\r\n  if (StartsWith (exit.name, \"aft\")) {\r\n    exit.alias = \"aft\"\r\n    exit.alt = Split(\"a\")\r\n  }\r\n  if (StartsWith (exit.name, \"port\")) {\r\n    exit.alias = \"port\"\r\n    exit.alt = Split(\"p\")\r\n  }\r\n  if (StartsWith (exit.name, \"starboard\")) {\r\n    exit.alias = \"starboard\"\r\n    exit.alt = Split(\"sb\")\r\n  }\r\n}\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806039-e5af2a1a-767a-11e8-8513-942724f3240c.png)\r\n\r\n---\r\n### Create a function named ```SendToJsEval```\r\n\r\nAdd the parameter ```data```\r\n\r\n(It has no return value.)\r\n\r\nPaste this in for the script in code view:\r\n\r\n```\r\nregEx = \"//\"\r\ns = Chr(60) + \"br/>\"\r\njs = Split(data,s)\r\nnotes = NewStringList()\r\nforeach (line, js) {\r\n  if (StartsWith(line,\"//\")) {\r\n    list add (notes, line)\r\n  }\r\n}\r\njs = ListExclude(js,notes)\r\nfinaljs = NewStringList()\r\nforeach (line, js) {\r\n  code = line\r\n  if (IsRegExMatch(regEx,line)) {\r\n    list = Split(line,\"//\")\r\n    code = list[0]\r\n  }\r\n  list add (finaljs, code)\r\n}\r\njs = Join(finaljs,\"\")\r\njs = Replace(js, \"[br]\", s)\r\njs = Replace(js, \"[br/]\", s)\r\njs = Replace(js, \"[break]\", s)\r\njs = Replace(js, \"[linebreak]\", s)\r\njs = Replace(js, \"[line break]\", s)\r\nJS.eval (js)\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806044-13603936-767b-11e8-84a1-b53203f418fe.png)\r\n\r\n---\r\n### Now, the way this works is....\r\n\r\nA turn script checks to see if the game.pov object's parent object's parent has the boolean attribute \"shiptype\" set to true.\r\n\r\nSo, **create a room which symbolizes an entire ship** (mine is called ```ship```).  Then, go to the \"Features\" tab and select \"Run an initialisation script for this object.\"\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806052-4b722fc8-767b-11e8-97b0-afde5b732acd.png)\r\n\r\n---\r\n### Now go to the new \"Initialisation script\" tab of that new ship object, and paste this into code view:\r\n\r\n```\r\nthis.shiptype = true\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806058-7ad03dbe-767b-11e8-9d19-761085947978.png)\r\n\r\n---\r\n### From this point, \r\n\r\nEach time you create a room that will be part of the ship, just use the \"Move\" button to move each room to a ship once the new room is created.\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806068-acfa0b80-767b-11e8-91cd-03ba9624dc71.png)\r\n\r\n---\r\n###  For exits which lead in and out of ships\r\n\r\nYou'll need to set up a script on any exit that leads in and/or out of a ship.\r\n\r\nPaste this into code view for the script:\r\n\r\n```\r\nJS.toggleNav ()\r\nMoveObject (player, this.to)\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806106-cab99a7c-767c-11e8-9c69-2c54b165bca2.png)\r\n\r\n---\r\n###  If your game begins onboard a ship (as my example does)\r\n\r\nYou'll want to paste this into the first room's \"After entering for the first time\" script:\r\n\r\n```\r\nJS.toggleNav ()\r\ndo (nautical_buttons_turnscript, \"script\")\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806115-0a91fbd0-767d-11e8-8c2f-3356e818f00c.png)\r\n\r\n\r\n---\r\n### For the nautical exits\r\n\r\n***UPDATE**  [This function](http://textadventures.co.uk/forum/quest/topic/t0muycp6nucybo_-qrmouq/kvs-old-nautical-directions-library-paranormally-solved#964de661-d46d-4ac9-9aad-b706382e94bf) will save you from doing the stuff in this section.*\r\n\r\nYou will need to create each exit as a non-directional exit.  (This means you will have to create each exit, without being able to create the exit from the opposite direction at the same time.)\r\n\r\nYou can't set the alias online, so you have to use the exit's name.  And this is where it gets taxing.  If you have more than one exit which will lead aft, you can only actually name one of the exits \"aft\".  But, with this setup, as long as your exit's name begins with \"aft\", my function will set the exit's alias to \"aft\".  (The same goes for \"fore\", \"port\", and \"starboard\".)\r\n\r\nSo, you can do it like:  \"aft\", \"aft1\", \"fore\"  \r\n\r\nOr you could do it like: \"aft_to_bridge\", \"aft_to_cabin\", \"fore_to_bridge\"\r\n\r\n---\r\n### I made this test game online:\r\n\r\nhttp://textadventures.co.uk/games/view/nc_b5jyqoksm2q_4zdefjg/online-ship\r\n\r\nHere's the entire code:\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6615.29455-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Online Ship\">\r\n    <gameid>85e47918-aea4-4e27-82c3-67454a3ac51a</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <menufont>Georgia, serif</menufont>\r\n    <attr name=\"feature_advancedwearables\" type=\"boolean\">false</attr>\r\n    <feature_advancedscripts />\r\n    <start type=\"script\">\r\n      SetupNautical\r\n    </start>\r\n    <inituserinterface type=\"script\">\r\n      SendToJsEval (js.description)\r\n      JS.changeCompass ()\r\n    </inituserinterface>\r\n  </game>\r\n  <turnscript name=\"nautical_buttons_turnscript\">\r\n    <enabled />\r\n    <script>\r\n      if (HasAttribute (game.pov.parent, \"parent\")) {\r\n        if (GetBoolean(game.pov.parent.parent,\"shiptype\")) {\r\n          list = NewStringList()\r\n          foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\r\n            list add (list, exit.alias)\r\n          }\r\n          JS.updateShipCompass (Join(list, \"/\"))\r\n        }\r\n      }\r\n    </script>\r\n  </turnscript>\r\n  <object name=\"ship\">\r\n    <inherit name=\"editor_object\" />\r\n    <feature_startscript />\r\n    <attr name=\"_initialise_\" type=\"script\">\r\n      this.shiptype = true\r\n    </attr>\r\n    <object name=\"cabin\">\r\n      <inherit name=\"editor_room\" />\r\n      <firstenter type=\"script\">\r\n        JS.toggleNav ()\r\n        do (nautical_buttons_turnscript, \"script\")\r\n      </firstenter>\r\n      <object name=\"player\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"editor_player\" />\r\n      </object>\r\n      <exit name=\"fore\" to=\"bridge\" />\r\n      <exit name=\"port1\" to=\"entry bay\" />\r\n    </object>\r\n    <object name=\"bridge\">\r\n      <inherit name=\"editor_room\" />\r\n      <exit name=\"aft\" to=\"cabin\" />\r\n      <exit name=\"fore1\" to=\"engine room\" />\r\n    </object>\r\n    <object name=\"storage\">\r\n      <inherit name=\"editor_room\" />\r\n      <exit name=\"starboard\" to=\"engine room\" />\r\n    </object>\r\n    <object name=\"engine room\">\r\n      <inherit name=\"editor_room\" />\r\n      <exit name=\"aft1\" to=\"bridge\" />\r\n      <exit name=\"port\" to=\"storage\" />\r\n    </object>\r\n    <object name=\"entry bay\">\r\n      <inherit name=\"editor_room\" />\r\n      <exit name=\"starboard1\" to=\"cabin\" />\r\n      <exit alias=\"down\" to=\"landing pad\">\r\n        <inherit name=\"downdirection\" />\r\n        <runscript />\r\n        <script type=\"script\">\r\n          JS.toggleNav ()\r\n          MoveObject (player, this.to)\r\n        </script>\r\n      </exit>\r\n    </object>\r\n  </object>\r\n  <object name=\"js\">\r\n    <inherit name=\"editor_room\" />\r\n    <description><![CDATA[var onBoard = false;<br/>var shipButtons = '<div id=\"dir-holder\" style=\"display:none;\"><div id=\"ship-nav\"><table id=\"ship-directions\"><tr><td></td><td>';<br/>shipButtons += '<button id=\"cmdCompassF\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"fore\" onclick=\"compassClick(\\'fore\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-n\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr>';<br/>shipButtons += '<tr><td><button id=\"cmdCompassP\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"port\" onclick=\"compassClick(\\'port\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-w\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></td><td></td><td></button>';<br/>shipButtons += '<button id=\"cmdCompassSB\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"starboard\" onclick=\"compassClick(\\'starboard\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-e\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr>';<br/>shipButtons += '<tr><td></td><td><button id=\"cmdCompassA\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"aft\" onclick=\"compassClick(\\'aft\\');\" role=\"button\" ><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-s\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr></table>';<br/>shipButtons += '</div></div>';<br/>function changeCompass(){<br/>  $('body').append(shipButtons);<br/>  $(\"#ship-directions\").css(\"border-spacing\",\"0\");<br/>  $(\"#cmdCompassNW\").parent().parent().parent().attr('id','def-nav');<br/>  $('#ship-nav').hide();$('#def-nav').parent().append($('#dir-holder').html());<br/>  $(\".shipcompassbutton\").each(function(){<br/>    $(this).button().button(\"enable\").button(\"disable\");<br/>    $(\".shipcompassbutton span\").css(\"left\", \"0.8em\");$(\".shipcompassbutton .ui-button-text\").css('padding','.8em .8em');<br/>  });<br/>};<br/>function toggleNav(){<br/>  $(\"#def-nav, #ship-nav\").toggle()<br/>};<br/>function updateShipCompass(data){<br/>  var exits = data.split(\"/\");<br/>  $(\".shipcompassbutton\").each(function(){<br/>    for (var exit in exits){<br/>      if($(this).attr('title') === exits[exit]){<br/>        $(this).button(\"enable\");<br/>        break;<br/>      }else{<br/>        $(this).button(\"disable\");<br/>      }<br/>    }<br/>  });<br/>};]]></description>\r\n  </object>\r\n  <object name=\"landing pad\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"up\" to=\"entry bay\">\r\n      <inherit name=\"updirection\" />\r\n      <runscript />\r\n      <script type=\"script\">\r\n        JS.toggleNav ()\r\n        MoveObject (player, this.to)\r\n      </script>\r\n    </exit>\r\n  </object>\r\n  <function name=\"SetupNautical\"><![CDATA[\r\n    game.compassdirections = ListExclude (game.compassdirections, \"\")\r\n    list add (game.compassdirections, \"fore\")\r\n    list add (game.compassdirections, \"port\")\r\n    list add (game.compassdirections, \"starboard\")\r\n    list add (game.compassdirections, \"aft\")\r\n    list add (game.compassdirections, \"f\")\r\n    list add (game.compassdirections, \"p\")\r\n    list add (game.compassdirections, \"sb\")\r\n    list add (game.compassdirections, \"a\")\r\n    request (SetCompassDirections, Join(game.compassdirections, \";\"))\r\n    go.pattern = \"^go to (?\"+Chr(60)+\"exit>.*)$|^go (?\"+Chr(60)+\"exit>.*)$|^(?\"+Chr(60)+\"exit>forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\r\n    lookdir.pattern = \"^look (?\"+Chr(60)+\"exit>forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\r\n    foreach (exit, AllExits()) {\r\n      if (StartsWith (exit.name, \"fore\")) {\r\n        exit.alias = \"fore\"\r\n        exit.alt = Split(\"f;forward\")\r\n      }\r\n      if (StartsWith (exit.name, \"aft\")) {\r\n        exit.alias = \"aft\"\r\n        exit.alt = Split(\"a\")\r\n      }\r\n      if (StartsWith (exit.name, \"port\")) {\r\n        exit.alias = \"port\"\r\n        exit.alt = Split(\"p\")\r\n      }\r\n      if (StartsWith (exit.name, \"starboard\")) {\r\n        exit.alias = \"starboard\"\r\n        exit.alt = Split(\"sb\")\r\n      }\r\n    }\r\n  ]]></function>\r\n  <function name=\"SendToJsEval\" parameters=\"data\"><![CDATA[\r\n    regEx = \"//\"\r\n    s = Chr(60) + \"br/>\"\r\n    js = Split(data,s)\r\n    notes = NewStringList()\r\n    foreach (line, js) {\r\n      if (StartsWith(line,\"//\")) {\r\n        list add (notes, line)\r\n      }\r\n    }\r\n    js = ListExclude(js,notes)\r\n    finaljs = NewStringList()\r\n    foreach (line, js) {\r\n      code = line\r\n      if (IsRegExMatch(regEx,line)) {\r\n        list = Split(line,\"//\")\r\n        code = list[0]\r\n      }\r\n      list add (finaljs, code)\r\n    }\r\n    js = Join(finaljs,\"\")\r\n    js = Replace(js, \"[br]\", s)\r\n    js = Replace(js, \"[br/]\", s)\r\n    js = Replace(js, \"[break]\", s)\r\n    js = Replace(js, \"[linebreak]\", s)\r\n    js = Replace(js, \"[line break]\", s)\r\n    JS.eval (js)\r\n  ]]></function>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay...  I made it work online, but it works a little differently.</p>\n<p>...and this will not be over quickly.</p>\n<h2>For online users:</h2>\n<details>\n<hr>\n<h3>Add this line of code to your start script in code view:</h3>\n<pre><code>SetupNautical\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806009-0f3676e6-767a-11e8-9ad0-fef82a41f4bc.png\" alt=\"image\"></p>\n<hr>\n<h3>Turn on the advanced scripts for the game object.</h3>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806007-d83c2ce4-7679-11e8-88f4-8aa5c5504354.png\" alt=\"image\"></p>\n<hr>\n<h3>Add this to the User Interface Initialisation script in code view:</h3>\n<pre><code>SendToJsEval (js.description)\nJS.changeCompass ()\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806017-32079d4e-767a-11e8-9e44-f10d0d1f7e7f.png\" alt=\"image\"></p>\n<hr>\n<h3>Create a turn script named <code>nautical_buttons_turnscript</code>.</h3>\n<p>Paste this in for the script in code view:</p>\n<pre><code>// Version 2\nif (ListCount(FilterByAttribute (ListParents(game.pov), \"shiptype\", true)) &gt; 0) {\n  list = NewStringList()\n  foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\n    list add (list, exit.alias)\n  }\n  JS.updateShipCompass (Join(list, \"/\"))\n}\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806026-65112552-767a-11e8-8b43-b8589ca8a8d3.png\" alt=\"image\"></p>\n<hr>\n<h3>Create a room named <code>js</code>.</h3>\n<p>Past this into the description as text (<strong><u>NOT</u> in code view</strong>):</p>\n<pre><code>var onBoard = false;\nvar shipButtons = '&lt;div id=\"dir-holder\" style=\"display:none;\"&gt;&lt;div id=\"ship-nav\"&gt;&lt;table id=\"ship-directions\"&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;';\nshipButtons += '&lt;button id=\"cmdCompassF\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"fore\" onclick=\"compassClick(\\'fore\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-n\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';\nshipButtons += '&lt;tr&gt;&lt;td&gt;&lt;button id=\"cmdCompassP\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"port\" onclick=\"compassClick(\\'port\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-w\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/button&gt;';\nshipButtons += '&lt;button id=\"cmdCompassSB\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"starboard\" onclick=\"compassClick(\\'starboard\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-e\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';\nshipButtons += '&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;button id=\"cmdCompassA\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"aft\" onclick=\"compassClick(\\'aft\\');\" role=\"button\" &gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-s\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';\nshipButtons += '&lt;/div&gt;&lt;/div&gt;';\nfunction changeCompass(){\n  $('body').append(shipButtons);\n  $(\"#ship-directions\").css(\"border-spacing\",\"0\");\n  $(\"#cmdCompassNW\").parent().parent().parent().attr('id','def-nav');\n  $('#ship-nav').hide();$('#def-nav').parent().append($('#dir-holder').html());\n  $(\".shipcompassbutton\").each(function(){\n    $(this).button().button(\"enable\").button(\"disable\");\n    $(\".shipcompassbutton span\").css(\"left\", \"0.8em\");$(\".shipcompassbutton .ui-button-text\").css('padding','.8em .8em');\n  });\n};\nfunction toggleNav(){\n  $(\"#def-nav, #ship-nav\").toggle()\n};\nfunction updateShipCompass(data){\n  var exits = data.split(\"/\");\n  $(\".shipcompassbutton\").each(function(){\n    for (var exit in exits){\n      if($(this).attr('title') === exits[exit]){\n        $(this).button(\"enable\");\n        break;\n      }else{\n        $(this).button(\"disable\");\n      }\n    }\n  });\n};\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806032-9f128570-767a-11e8-82ff-59c9eb74b685.png\" alt=\"image\"></p>\n<hr>\n<h3>Create a function named <code>SetupNautical</code></h3>\n<p>(It has no parameters, nor does it have a return type.)</p>\n<p>Paste this in for the script in code view:</p>\n<pre><code>game.compassdirections = ListExclude (game.compassdirections, \"\")\nlist add (game.compassdirections, \"fore\")\nlist add (game.compassdirections, \"port\")\nlist add (game.compassdirections, \"starboard\")\nlist add (game.compassdirections, \"aft\")\nlist add (game.compassdirections, \"f\")\nlist add (game.compassdirections, \"p\")\nlist add (game.compassdirections, \"sb\")\nlist add (game.compassdirections, \"a\")\nrequest (SetCompassDirections, Join(game.compassdirections, \";\"))\ngo.pattern = \"^go to (?\"+Chr(60)+\"exit&gt;.*)$|^go (?\"+Chr(60)+\"exit&gt;.*)$|^(?\"+Chr(60)+\"exit&gt;forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\nlookdir.pattern = \"^look (?\"+Chr(60)+\"exit&gt;forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\nforeach (exit, AllExits()) {\n  if (StartsWith (exit.name, \"fore\")) {\n    exit.alias = \"fore\"\n    exit.alt = Split(\"f;forward\")\n  }\n  if (StartsWith (exit.name, \"aft\")) {\n    exit.alias = \"aft\"\n    exit.alt = Split(\"a\")\n  }\n  if (StartsWith (exit.name, \"port\")) {\n    exit.alias = \"port\"\n    exit.alt = Split(\"p\")\n  }\n  if (StartsWith (exit.name, \"starboard\")) {\n    exit.alias = \"starboard\"\n    exit.alt = Split(\"sb\")\n  }\n}\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806039-e5af2a1a-767a-11e8-8513-942724f3240c.png\" alt=\"image\"></p>\n<hr>\n<h3>Create a function named <code>SendToJsEval</code></h3>\n<p>Add the parameter <code>data</code></p>\n<p>(It has no return value.)</p>\n<p>Paste this in for the script in code view:</p>\n<pre><code>regEx = \"//\"\ns = Chr(60) + \"br/&gt;\"\njs = Split(data,s)\nnotes = NewStringList()\nforeach (line, js) {\n  if (StartsWith(line,\"//\")) {\n    list add (notes, line)\n  }\n}\njs = ListExclude(js,notes)\nfinaljs = NewStringList()\nforeach (line, js) {\n  code = line\n  if (IsRegExMatch(regEx,line)) {\n    list = Split(line,\"//\")\n    code = list[0]\n  }\n  list add (finaljs, code)\n}\njs = Join(finaljs,\"\")\njs = Replace(js, \"[br]\", s)\njs = Replace(js, \"[br/]\", s)\njs = Replace(js, \"[break]\", s)\njs = Replace(js, \"[linebreak]\", s)\njs = Replace(js, \"[line break]\", s)\nJS.eval (js)\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806044-13603936-767b-11e8-84a1-b53203f418fe.png\" alt=\"image\"></p>\n<hr>\n<h3>Now, the way this works is....</h3>\n<p>A turn script checks to see if the game.pov object's parent object's parent has the boolean attribute \"shiptype\" set to true.</p>\n<p>So, <strong>create a room which symbolizes an entire ship</strong> (mine is called <code>ship</code>).  Then, go to the \"Features\" tab and select \"Run an initialisation script for this object.\"</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806052-4b722fc8-767b-11e8-97b0-afde5b732acd.png\" alt=\"image\"></p>\n<hr>\n<h3>Now go to the new \"Initialisation script\" tab of that new ship object, and paste this into code view:</h3>\n<pre><code>this.shiptype = true\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806058-7ad03dbe-767b-11e8-9d19-761085947978.png\" alt=\"image\"></p>\n<hr>\n<h3>From this point,</h3>\n<p>Each time you create a room that will be part of the ship, just use the \"Move\" button to move each room to a ship once the new room is created.</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806068-acfa0b80-767b-11e8-91cd-03ba9624dc71.png\" alt=\"image\"></p>\n<hr>\n<h3>For exits which lead in and out of ships</h3>\n<p>You'll need to set up a script on any exit that leads in and/or out of a ship.</p>\n<p>Paste this into code view for the script:</p>\n<pre><code>JS.toggleNav ()\nMoveObject (player, this.to)\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806106-cab99a7c-767c-11e8-9c69-2c54b165bca2.png\" alt=\"image\"></p>\n<hr>\n<h3>If your game begins onboard a ship (as my example does)</h3>\n<p>You'll want to paste this into the first room's \"After entering for the first time\" script:</p>\n<pre><code>JS.toggleNav ()\ndo (nautical_buttons_turnscript, \"script\")\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806115-0a91fbd0-767d-11e8-8c2f-3356e818f00c.png\" alt=\"image\"></p>\n<hr>\n<h3>For the nautical exits</h3>\n<p><em><strong>UPDATE</strong>  <a href=\"http://textadventures.co.uk/forum/quest/topic/t0muycp6nucybo_-qrmouq/kvs-old-nautical-directions-library-paranormally-solved#964de661-d46d-4ac9-9aad-b706382e94bf\">This function</a> will save you from doing the stuff in this section.</em></p>\n<p>You will need to create each exit as a non-directional exit.  (This means you will have to create each exit, without being able to create the exit from the opposite direction at the same time.)</p>\n<p>You can't set the alias online, so you have to use the exit's name.  And this is where it gets taxing.  If you have more than one exit which will lead aft, you can only actually name one of the exits \"aft\".  But, with this setup, as long as your exit's name begins with \"aft\", my function will set the exit's alias to \"aft\".  (The same goes for \"fore\", \"port\", and \"starboard\".)</p>\n<p>So, you can do it like:  \"aft\", \"aft1\", \"fore\"</p>\n<p>Or you could do it like: \"aft_to_bridge\", \"aft_to_cabin\", \"fore_to_bridge\"</p>\n<hr>\n<h3>I made this test game online:</h3>\n<p>http://textadventures.co.uk/games/view/nc_b5jyqoksm2q_4zdefjg/online-ship</p>\n<p>Here's the entire code:</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6615.29455--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Online Ship\"&gt;\n    &lt;gameid&gt;85e47918-aea4-4e27-82c3-67454a3ac51a&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;menufont&gt;Georgia, serif&lt;/menufont&gt;\n    &lt;attr name=\"feature_advancedwearables\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;start type=\"script\"&gt;\n      SetupNautical\n    &lt;/start&gt;\n    &lt;inituserinterface type=\"script\"&gt;\n      SendToJsEval (js.description)\n      JS.changeCompass ()\n    &lt;/inituserinterface&gt;\n  &lt;/game&gt;\n  &lt;turnscript name=\"nautical_buttons_turnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      if (HasAttribute (game.pov.parent, \"parent\")) {\n        if (GetBoolean(game.pov.parent.parent,\"shiptype\")) {\n          list = NewStringList()\n          foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\n            list add (list, exit.alias)\n          }\n          JS.updateShipCompass (Join(list, \"/\"))\n        }\n      }\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;object name=\"ship\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;feature_startscript /&gt;\n    &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n      this.shiptype = true\n    &lt;/attr&gt;\n    &lt;object name=\"cabin\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;firstenter type=\"script\"&gt;\n        JS.toggleNav ()\n        do (nautical_buttons_turnscript, \"script\")\n      &lt;/firstenter&gt;\n      &lt;object name=\"player\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"editor_player\" /&gt;\n      &lt;/object&gt;\n      &lt;exit name=\"fore\" to=\"bridge\" /&gt;\n      &lt;exit name=\"port1\" to=\"entry bay\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"bridge\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;exit name=\"aft\" to=\"cabin\" /&gt;\n      &lt;exit name=\"fore1\" to=\"engine room\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"storage\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;exit name=\"starboard\" to=\"engine room\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"engine room\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;exit name=\"aft1\" to=\"bridge\" /&gt;\n      &lt;exit name=\"port\" to=\"storage\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"entry bay\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;exit name=\"starboard1\" to=\"cabin\" /&gt;\n      &lt;exit alias=\"down\" to=\"landing pad\"&gt;\n        &lt;inherit name=\"downdirection\" /&gt;\n        &lt;runscript /&gt;\n        &lt;script type=\"script\"&gt;\n          JS.toggleNav ()\n          MoveObject (player, this.to)\n        &lt;/script&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"js\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;&lt;![CDATA[var onBoard = false;&lt;br/&gt;var shipButtons = '&lt;div id=\"dir-holder\" style=\"display:none;\"&gt;&lt;div id=\"ship-nav\"&gt;&lt;table id=\"ship-directions\"&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;';&lt;br/&gt;shipButtons += '&lt;button id=\"cmdCompassF\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"fore\" onclick=\"compassClick(\\'fore\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-n\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';&lt;br/&gt;shipButtons += '&lt;tr&gt;&lt;td&gt;&lt;button id=\"cmdCompassP\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"port\" onclick=\"compassClick(\\'port\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-w\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/button&gt;';&lt;br/&gt;shipButtons += '&lt;button id=\"cmdCompassSB\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"starboard\" onclick=\"compassClick(\\'starboard\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-e\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';&lt;br/&gt;shipButtons += '&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;button id=\"cmdCompassA\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"aft\" onclick=\"compassClick(\\'aft\\');\" role=\"button\" &gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-s\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';&lt;br/&gt;shipButtons += '&lt;/div&gt;&lt;/div&gt;';&lt;br/&gt;function changeCompass(){&lt;br/&gt;  $('body').append(shipButtons);&lt;br/&gt;  $(\"#ship-directions\").css(\"border-spacing\",\"0\");&lt;br/&gt;  $(\"#cmdCompassNW\").parent().parent().parent().attr('id','def-nav');&lt;br/&gt;  $('#ship-nav').hide();$('#def-nav').parent().append($('#dir-holder').html());&lt;br/&gt;  $(\".shipcompassbutton\").each(function(){&lt;br/&gt;    $(this).button().button(\"enable\").button(\"disable\");&lt;br/&gt;    $(\".shipcompassbutton span\").css(\"left\", \"0.8em\");$(\".shipcompassbutton .ui-button-text\").css('padding','.8em .8em');&lt;br/&gt;  });&lt;br/&gt;};&lt;br/&gt;function toggleNav(){&lt;br/&gt;  $(\"#def-nav, #ship-nav\").toggle()&lt;br/&gt;};&lt;br/&gt;function updateShipCompass(data){&lt;br/&gt;  var exits = data.split(\"/\");&lt;br/&gt;  $(\".shipcompassbutton\").each(function(){&lt;br/&gt;    for (var exit in exits){&lt;br/&gt;      if($(this).attr('title') === exits[exit]){&lt;br/&gt;        $(this).button(\"enable\");&lt;br/&gt;        break;&lt;br/&gt;      }else{&lt;br/&gt;        $(this).button(\"disable\");&lt;br/&gt;      }&lt;br/&gt;    }&lt;br/&gt;  });&lt;br/&gt;};]]&gt;&lt;/description&gt;\n  &lt;/object&gt;\n  &lt;object name=\"landing pad\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"up\" to=\"entry bay\"&gt;\n      &lt;inherit name=\"updirection\" /&gt;\n      &lt;runscript /&gt;\n      &lt;script type=\"script\"&gt;\n        JS.toggleNav ()\n        MoveObject (player, this.to)\n      &lt;/script&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;function name=\"SetupNautical\"&gt;&lt;![CDATA[\n    game.compassdirections = ListExclude (game.compassdirections, \"\")\n    list add (game.compassdirections, \"fore\")\n    list add (game.compassdirections, \"port\")\n    list add (game.compassdirections, \"starboard\")\n    list add (game.compassdirections, \"aft\")\n    list add (game.compassdirections, \"f\")\n    list add (game.compassdirections, \"p\")\n    list add (game.compassdirections, \"sb\")\n    list add (game.compassdirections, \"a\")\n    request (SetCompassDirections, Join(game.compassdirections, \";\"))\n    go.pattern = \"^go to (?\"+Chr(60)+\"exit&gt;.*)$|^go (?\"+Chr(60)+\"exit&gt;.*)$|^(?\"+Chr(60)+\"exit&gt;forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\n    lookdir.pattern = \"^look (?\"+Chr(60)+\"exit&gt;forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\n    foreach (exit, AllExits()) {\n      if (StartsWith (exit.name, \"fore\")) {\n        exit.alias = \"fore\"\n        exit.alt = Split(\"f;forward\")\n      }\n      if (StartsWith (exit.name, \"aft\")) {\n        exit.alias = \"aft\"\n        exit.alt = Split(\"a\")\n      }\n      if (StartsWith (exit.name, \"port\")) {\n        exit.alias = \"port\"\n        exit.alt = Split(\"p\")\n      }\n      if (StartsWith (exit.name, \"starboard\")) {\n        exit.alias = \"starboard\"\n        exit.alt = Split(\"sb\")\n      }\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"SendToJsEval\" parameters=\"data\"&gt;&lt;![CDATA[\n    regEx = \"//\"\n    s = Chr(60) + \"br/&gt;\"\n    js = Split(data,s)\n    notes = NewStringList()\n    foreach (line, js) {\n      if (StartsWith(line,\"//\")) {\n        list add (notes, line)\n      }\n    }\n    js = ListExclude(js,notes)\n    finaljs = NewStringList()\n    foreach (line, js) {\n      code = line\n      if (IsRegExMatch(regEx,line)) {\n        list = Split(line,\"//\")\n        code = list[0]\n      }\n      list add (finaljs, code)\n    }\n    js = Join(finaljs,\"\")\n    js = Replace(js, \"[br]\", s)\n    js = Replace(js, \"[br/]\", s)\n    js = Replace(js, \"[break]\", s)\n    js = Replace(js, \"[linebreak]\", s)\n    js = Replace(js, \"[line break]\", s)\n    JS.eval (js)\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n</details>\n\n",
      "PostDate": "2018-06-23T05:39:42.1516689Z",
      "LastEditDate": "2018-07-06T21:23:44.019294Z",
      "link": null
    },
    {
      "PostId": "964de661-d46d-4ac9-9aad-b706382e94bf",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "PS\r\n\r\n**ONLINE USERS**\r\n\r\nYou could also use this and just select north, south, west, or east for the exits for rooms onboard a ship.  This will change north to fore, south to aft, west to port, and east to starboard:\r\n\r\n<details>\r\n\r\n---\r\n### Create a function named ```ChangeDirToNautical```.\r\n\r\n(It needs no parameters, nor does it need a return type.)\r\n\r\nPaste this into the script in code view:\r\n\r\n```\r\nforeach (exit, AllExits()) {\r\n  if (ListCount(FilterByAttribute (ListParents(exit), \"shiptype\", true)) > 0) {\r\n    if (exit.alias = \"north\") {\r\n      exit.visible = false\r\n      newname = \"\" + GetUniqueElementName(\"fore\")\r\n      create exit (newname, \"fore\", exit.parent, exit.to, \"\")\r\n      newexit = GetObject(newname)\r\n      newexit.to = exit.to\r\n      newexit.alt = Split(\"f;forward\")\r\n    }\r\n    else if (exit.alias = \"south\") {\r\n      exit.visible = false\r\n      newname = \"\" + GetUniqueElementName(\"aft\")\r\n      create exit (newname, \"aft\", exit.parent, exit.to, \"\")\r\n      newexit = GetObject(newname)\r\n      newexit.to = exit.to\r\n      newexit.alt = Split(\"a\")\r\n    }\r\n    else if (exit.alias = \"west\") {\r\n      exit.visible = false\r\n      newname = \"\" + GetUniqueElementName(\"port\")\r\n      create exit (newname, \"port\", exit.parent, exit.to, \"\")\r\n      newexit = GetObject(newname)\r\n      newexit.to = exit.to\r\n      newexit.alt = Split(\"p\")\r\n    }\r\n    else if (exit.alias = \"east\") {\r\n      exit.visible = false\r\n      newname = \"\" + GetUniqueElementName(\"starboard\")\r\n      create exit (newname, \"starboard\", exit.parent, exit.to, \"\")\r\n      newexit = GetObject(newname)\r\n      newexit.to = exit.to\r\n      newexit.alt = Split(\"sb\")\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n\r\n---\r\n### At the very, very end of the ```SetupNautical``` function, add this line:\r\n\r\n```\r\nChangeDirToNautical\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806569-1542e1da-7686-11e8-983c-ec2db475fe18.png)\r\n\r\n---\r\nI have added a ```spa``` room to my ship object.  I created an exit to the east from the cabin to the spa, and I selected \"Also create exit in the other direction.\"\r\n\r\nThis function changes the exit from the cabin to the spa to \"starboard\" and the exit from the spa to the cabin (which begins as west) to \"port\".\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41806598-90f81264-7686-11e8-861c-3c3d29ca7562.png)\r\n\r\n---\r\n<a href=\"https://user-images.githubusercontent.com/30656341/41806622-e8a39bbe-7686-11e8-87ea-ba57ef2f9709.gif\"><img loop src=\"https://user-images.githubusercontent.com/30656341/41806622-e8a39bbe-7686-11e8-87ea-ba57ef2f9709.gif\"/></a>\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>PS</p>\n<p><strong>ONLINE USERS</strong></p>\n<p>You could also use this and just select north, south, west, or east for the exits for rooms onboard a ship.  This will change north to fore, south to aft, west to port, and east to starboard:</p>\n<details>\n<hr>\n<h3>Create a function named <code>ChangeDirToNautical</code>.</h3>\n<p>(It needs no parameters, nor does it need a return type.)</p>\n<p>Paste this into the script in code view:</p>\n<pre><code>foreach (exit, AllExits()) {\n  if (ListCount(FilterByAttribute (ListParents(exit), \"shiptype\", true)) &gt; 0) {\n    if (exit.alias = \"north\") {\n      exit.visible = false\n      newname = \"\" + GetUniqueElementName(\"fore\")\n      create exit (newname, \"fore\", exit.parent, exit.to, \"\")\n      newexit = GetObject(newname)\n      newexit.to = exit.to\n      newexit.alt = Split(\"f;forward\")\n    }\n    else if (exit.alias = \"south\") {\n      exit.visible = false\n      newname = \"\" + GetUniqueElementName(\"aft\")\n      create exit (newname, \"aft\", exit.parent, exit.to, \"\")\n      newexit = GetObject(newname)\n      newexit.to = exit.to\n      newexit.alt = Split(\"a\")\n    }\n    else if (exit.alias = \"west\") {\n      exit.visible = false\n      newname = \"\" + GetUniqueElementName(\"port\")\n      create exit (newname, \"port\", exit.parent, exit.to, \"\")\n      newexit = GetObject(newname)\n      newexit.to = exit.to\n      newexit.alt = Split(\"p\")\n    }\n    else if (exit.alias = \"east\") {\n      exit.visible = false\n      newname = \"\" + GetUniqueElementName(\"starboard\")\n      create exit (newname, \"starboard\", exit.parent, exit.to, \"\")\n      newexit = GetObject(newname)\n      newexit.to = exit.to\n      newexit.alt = Split(\"sb\")\n    }\n  }\n}\n</code></pre>\n<hr>\n<h3>At the very, very end of the <code>SetupNautical</code> function, add this line:</h3>\n<pre><code>ChangeDirToNautical\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806569-1542e1da-7686-11e8-983c-ec2db475fe18.png\" alt=\"image\"></p>\n<hr>\n<p>I have added a <code>spa</code> room to my ship object.  I created an exit to the east from the cabin to the spa, and I selected \"Also create exit in the other direction.\"</p>\n<p>This function changes the exit from the cabin to the spa to \"starboard\" and the exit from the spa to the cabin (which begins as west) to \"port\".</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41806598-90f81264-7686-11e8-861c-3c3d29ca7562.png\" alt=\"image\"></p>\n<hr>\n<p><a href=\"https://user-images.githubusercontent.com/30656341/41806622-e8a39bbe-7686-11e8-87ea-ba57ef2f9709.gif\"><img src=\"https://user-images.githubusercontent.com/30656341/41806622-e8a39bbe-7686-11e8-87ea-ba57ef2f9709.gif\"></a></p>\n</details>\n\n",
      "PostDate": "2018-06-23T06:45:06.9647401Z",
      "LastEditDate": "2018-07-06T21:21:58.4253774Z",
      "link": null
    },
    {
      "PostId": "50832c97-f081-4961-a92b-78d00fe27683",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> ...and this will not be over quickly.\r\n\r\nBoy, you weren't kidding about that!\r\n\r\nSorry to butt in, but on a different note...\r\n\r\nKV, I could not get your latest Nautical Library (2018/6/20) to work.  I made a barebones TA desktop game with Pixie's latest update 5.8 beta10.  I added a \"shiptype\" type to the game's Advanced --> Object Types (needed for game to work with library), and then added your library.  I followed all of the instructions:\r\n\r\nI'm not using the NPC library.\r\n\r\nAll rooms are in a parent room having the \"shiptype\" type.\r\n\r\nAll exits have inherited the correct nautical direction type.\r\n\r\nThese two lines have been added to the IUI tab:\r\n\r\n\tSendToJsEval (js.description)\r\n\tJS.changeCompass ()\r\n\r\nThe game doesn't show the nautical directions, just the standard ones.  I tried changing the exit aliases to their nautical names, but of course then the compass buttons don't work.\r\n\r\nBarebones game:\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.8.6747.20202-->\r\n<asl version=\"580\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <include ref=\"NauticalDirectionsLib.aslx\" />\r\n  <game name=\"Nautical Map\">\r\n    <gameid>1339903a-f9a3-492d-b0b9-fd5bfa31414b</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <feature_advancedscripts />\r\n    <inituserinterface type=\"script\">\r\n      SendToJsEval (js.description)\r\n      JS.changeCompass ()\r\n    </inituserinterface>\r\n  </game>\r\n  <object name=\"INSIDE\">\r\n    <inherit name=\"editor_room\" />\r\n    <inherit name=\"shiptype\" />\r\n    <object name=\"room1\">\r\n      <inherit name=\"editor_room\" />\r\n      <inherit name=\"shiptype\" />\r\n      <object name=\"player\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"editor_player\" />\r\n      </object>\r\n      <exit name=\"R1toR2\" alias=\"south\" to=\"room2\">\r\n        <inherit name=\"aftdirection\" />\r\n        <inherit name=\"southdirection\" />\r\n      </exit>\r\n    </object>\r\n    <object name=\"room2\">\r\n      <inherit name=\"editor_room\" />\r\n      <inherit name=\"shiptype\" />\r\n      <exit name=\"R2toR1\" alias=\"north\" to=\"room1\">\r\n        <inherit name=\"foredirection\" />\r\n        <inherit name=\"northdirection\" />\r\n      </exit>\r\n    </object>\r\n  </object>\r\n  <type name=\"shiptype\" />\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n--------------------------------\r\nYour latest Nautical Library that I used:\r\n\r\n<details>\r\n\r\n```\r\n<?xml version=\"1.0\"?>\r\n<library>\r\n\r\n<!--\r\n\r\nNauticalDirectionsLib\r\nVersion: 1.2\r\nBy: KV\r\nQuest version: 5.8\r\nSpecial thanks: Doctor Agon and The Pixie\r\n\r\n\r\nINSTRUCTIONS:\r\n\r\nIf you are using NpcLib, this should be included AFTER it in the game's code for this NiceDirection() mod to work!\r\n\r\nAll rooms on a ship need to have a parent object which inherits \"shiptype\".\r\n\r\nIn order for the shortcut commands to work, you must add the appropriate type to the exit.\r\n\r\nYou do not need to change your exits' names or aliases. The script will turn the alias of each exit which is in a \"shiptype\" object to a nautical exit alias, as long as the exit inherits one of the nautical direction types.\r\n\r\nTypes:\r\n\"foredirection\"\r\n\"portdirection\"\r\n\"starboarddirection\"\r\n\"aftdirection\"\r\n\r\nThe shortcut commands:\r\nfore, forward, f, port, p, starboard, sb, s, aft, a\r\n\r\n\r\nIMPORTANT:\r\n\r\n\tADD THE FOLLOWING 2 LINES TO THE GAME OBJECT'S inituserinterface\r\n\t\t\r\n\t\tSendToJsEval (js.description)\r\n\t\tJS.changeCompass ()\r\n\r\n-->\r\n\r\n\r\n\r\n\r\n  <turnscript name=\"nautical_buttons\">\r\n    <enabled />\r\n    <script>\r\n      if (DoesInherit(game.pov.parent.parent,\"shiptype\")) {\r\n        list = NewStringList()\r\n        foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\r\n          list add (list, exit.alias)\r\n        }\r\n        JS.updateShipCompass (Join(list, \"/\"))\r\n      }\r\n    </script>\r\n  </turnscript>\r\n\r\n  <object name=\"js\">\r\n    <description><![CDATA[var onBoard = false;<br/><br/>var shipButtons = '<div id=\"dir-holder\" style=\"display:none;\"><div id=\"ship-nav\"><table id=\"ship-directions\"><tr><td></td><td>';<br/>shipButtons += '<button id=\"cmdCompassF\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"fore\" onclick=\"compassClick(\\'fore\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-n\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr>';<br/>shipButtons += '<tr><td><button id=\"cmdCompassP\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"port\" onclick=\"compassClick(\\'port\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-w\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></td><td></td><td></button>';<br/>shipButtons += '<button id=\"cmdCompassSB\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"starboard\" onclick=\"compassClick(\\'starboard\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-e\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr>';<br/>shipButtons += '<tr><td></td><td><button id=\"cmdCompassA\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"aft\" onclick=\"compassClick(\\'aft\\');\" role=\"button\" ><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-s\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr></table>';<br/>shipButtons += '</div></div>';<br/><br/>function changeCompass(){<br/>  addText(shipButtons);$(\"#ship-directions\").css(\"border-spacing\",\"0\");<br/>  $(\"#cmdCompassNW\").parent().parent().parent().attr('id','def-nav');<br/>  $('#ship-nav').hide();$('#def-nav').parent().append($('#dir-holder').html());<br/>  $(\".shipcompassbutton\").each(function(){<br/>    $(this).button().button(\"enable\").button(\"disable\");<br/>    $(\".shipcompassbutton span\").css(\"left\", \"0.8em\");$(\".shipcompassbutton .ui-button-text\").css('padding','.8em .8em');<br/>  });<br/>};<br/><br/>function toggleNav(){<br/>  $(\"#def-nav, #ship-nav\").toggle()<br/>};<br/><br/>function updateShipCompass(data){<br/>  var exits = data.split(\"/\");<br/>  $(\".shipcompassbutton\").each(function(){<br/>    for (var exit in exits){<br/>      if($(this).attr('title') === exits[exit]){<br/>        $(this).button(\"enable\");<br/>        break;<br/>      }else{<br/>        $(this).button(\"disable\");<br/>      }<br/>    }<br/>  });<br/>};<br/>]]></description>\r\n  </object>\r\n\r\n  <type name=\"shiptype\">\r\n    <compassTableShip />\r\n    <captain type=\"object\"></captain>\r\n    <ramp type=\"object\"></ramp>\r\n    <destination type=\"object\"></destination>\r\n    <attr name=\"_initialise_\" type=\"script\">\r\n      SetNauticalExitAliases\r\n    </attr>\r\n    <attr name=\"locations_visited\" type=\"objectlist\"></attr>\r\n    <course type=\"objectlist\"></course>\r\n    <shipDirs type=\"stringdictionary\">\r\n      <item>\r\n        <key>north</key>\r\n        <value>fore</value>\r\n      </item>\r\n      <item>\r\n        <key>east</key>\r\n        <value>starboard</value>\r\n      </item>\r\n      <item>\r\n        <key>west</key>\r\n        <value>port</value>\r\n      </item>\r\n      <item>\r\n        <key>south</key>\r\n        <value>aft</value>\r\n      </item>\r\n    </shipDirs>\r\n  </type>\r\n\r\n  <type name=\"foredirection\">\r\n    <inherit name=\"compassdirection\" />\r\n    <alias>fore</alias>\r\n    <alt type=\"stringlist\">\r\n      <value>f</value>\r\n      <value>forward</value>\r\n    </alt>\r\n  </type>\r\n\r\n  <type name=\"portdirection\">\r\n    <inherit name=\"compassdirection\" />\r\n    <alias>port</alias>\r\n    <alt type=\"stringlist\">\r\n      <value>p</value>\r\n    </alt>\r\n  </type>\r\n\r\n  <type name=\"starboarddirection\">\r\n    <inherit name=\"compassdirection\" />\r\n    <alias>starboard</alias>\r\n    <alt type=\"stringlist\">\r\n      <value>sb</value>\r\n    </alt>\r\n  </type>\r\n\r\n  <type name=\"aftdirection\">\r\n    <inherit name=\"compassdirection\" />\r\n    <alias>aft</alias>\r\n    <alt type=\"stringlist\">\r\n      <value>a</value>\r\n    </alt>\r\n  </type>\r\n\r\n  <function name=\"SetNauticalExitAliases\"><![CDATA[\r\n    ship.compassdirections = ListExclude(ship.compassdirections,\"\")\r\n    list add (game.compassdirections, \"fore\")\r\n    list add (game.compassdirections, \"port\")\r\n    list add (game.compassdirections, \"starboard\")\r\n    list add (game.compassdirections, \"aft\")\r\n    list add (game.compassdirections, \"f\")\r\n    list add (game.compassdirections, \"p\")\r\n    list add (game.compassdirections, \"sb\")\r\n    list add (game.compassdirections, \"a\")\r\n    request (SetCompassDirections, Join(game.compassdirections, \";\"))\r\n    go.pattern = \"^go to (?<exit>.*)$|^go (?<exit>.*)$|^(?<exit>forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\r\n      lookdir.pattern = \"^look (?<exit>forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\r\n    foreach (exit, AllExits()) {\r\n      if (DoesInherit(exit.parent.parent, \"shiptype\")) {\r\n        alias = exit.alias\r\n        if (DictionaryContains(game.shipDirs, alias)) {\r\n          repl = StringDictionaryItem(game.shipDirs,alias)\r\n          exit.alias = repl\r\n        }\r\n      }\r\n    }\r\n  ]]></function>\r\n\r\n  <function name=\"SendToJsEval\" parameters=\"data\"><![CDATA[\r\n    regEx = \"//\"\r\n    js = Split(data,\"<br/>\")\r\n    notes = NewStringList()\r\n    foreach (line, js) {\r\n      if (StartsWith(line,\"//\")) {\r\n        list add (notes, line)\r\n      }\r\n    }\r\n    js = ListExclude(js,notes)\r\n    finaljs = NewStringList()\r\n    foreach (line, js) {\r\n      code = line\r\n      if (IsRegExMatch(regEx,line)) {\r\n        list = Split(line,\"//\")\r\n        code = list[0]\r\n      }\r\n      list add (finaljs, code)\r\n    }\r\n    js = Join(finaljs,\"\")\r\n    js = Replace(js, \"[br]\", \"<br/>\")\r\n    js = Replace(js, \"[br/]\", \"<br/>\")\r\n    js = Replace(js, \"[break]\", \"<br/>\")\r\n    js = Replace(js, \"[linebreak]\", \"<br/>\")\r\n    js = Replace(js, \"[line break]\", \"<br/>\")\r\n    JS.eval (js)\r\n  ]]></function>\r\n\r\n\r\n  <!--\r\n  \r\n  TODO: \r\n\tAdd tabs so simplify setup.\r\n\t\r\n\tFix the CSS on the compass. The buttons are a little too far apart.\r\n  -->\r\n\r\n<!-- Fix ReverseDirection() and NiceDirection() -->\r\n\r\n  <function name=\"ReverseDirection\" parameters=\"dir\" type=\"string\">\r\n    list1 = Split(\"north;northeast;east;southeast;south;southwest;west;northwest;up;down;in;out;fore;port;starboard;aft\", \";\")\r\n    list2 = Split(\"south;southwest;west;northwest;north;northeast;east;southeast;down;up;out;in;aft;starboard;port;fore\", \";\")\r\n    n = IndexOf(list1, dir)\r\n    if (not n = -1) {\r\n      return (StringListItem(list2, n))\r\n    }\r\n    return (dir)\r\n  </function>\r\n\r\n\t<function name=\"NiceDirection\" parameters=\"exit, addthe\" type=\"string\">\r\n\t   switch (exit.alias) {\r\n\t\t case (\"in\") { s = \"inside\" }\r\n\t\t case (\"out\") { s = \"outside\" }\r\n\t\t case (\"up\") { s = \"above\" }\r\n\t\t case (\"down\") { s = \"below\" }\r\n\t\t  //Added by KV for Nautical Directions:\r\n\t\t  case (\"starboard\") {\r\n\t\t\ts = \"port\"\r\n\t\t\taddthe = false\r\n\t\t  }\r\n\t\t  case (\"port\") {\r\n\t\t\ts = \"starboard\"\r\n\t\t\taddthe = false\r\n\t\t  }\r\n\t\t  case (\"aft\") {\r\n\t\t\ts = \"fore\"\r\n\t\t\taddthe = false\r\n\t\t  }\r\n\t\t  case (\"fore\") {\r\n\t\t\ts = \"aft\"\r\n\t\t\taddthe = false\r\n\t\t  }\r\n\t\t  // End of KV's addition\r\n\t\t default {\r\n\t\t   if (addthe) {\r\n\t\t\t s = \"the \" + exit.alias\r\n\t\t   }\r\n\t\t   else {\r\n\t\t\t s = exit.alias\r\n\t\t   }\r\n\t\t }\r\n\t   }\r\n\t   return (s)\r\n\t </function>\r\n  \r\n  </library>\r\n```\r\n\r\n</details>\r\n\r\n--------------------------------\r\nUPDATE: Finally got the \"details\" tag to work.  Just trying to conserve space to help tired eyes and wrists.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>...and this will not be over quickly.</p>\n</blockquote>\n<p>Boy, you weren't kidding about that!</p>\n<p>Sorry to butt in, but on a different note...</p>\n<p>KV, I could not get your latest Nautical Library (2018/6/20) to work.  I made a barebones TA desktop game with Pixie's latest update 5.8 beta10.  I added a \"shiptype\" type to the game's Advanced --&gt; Object Types (needed for game to work with library), and then added your library.  I followed all of the instructions:</p>\n<p>I'm not using the NPC library.</p>\n<p>All rooms are in a parent room having the \"shiptype\" type.</p>\n<p>All exits have inherited the correct nautical direction type.</p>\n<p>These two lines have been added to the IUI tab:</p>\n<pre><code>SendToJsEval (js.description)\nJS.changeCompass ()\n</code></pre>\n<p>The game doesn't show the nautical directions, just the standard ones.  I tried changing the exit aliases to their nautical names, but of course then the compass buttons don't work.</p>\n<p>Barebones game:</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.8.6747.20202--&gt;\n&lt;asl version=\"580\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;include ref=\"NauticalDirectionsLib.aslx\" /&gt;\n  &lt;game name=\"Nautical Map\"&gt;\n    &lt;gameid&gt;1339903a-f9a3-492d-b0b9-fd5bfa31414b&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;inituserinterface type=\"script\"&gt;\n      SendToJsEval (js.description)\n      JS.changeCompass ()\n    &lt;/inituserinterface&gt;\n  &lt;/game&gt;\n  &lt;object name=\"INSIDE\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;inherit name=\"shiptype\" /&gt;\n    &lt;object name=\"room1\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;inherit name=\"shiptype\" /&gt;\n      &lt;object name=\"player\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"editor_player\" /&gt;\n      &lt;/object&gt;\n      &lt;exit name=\"R1toR2\" alias=\"south\" to=\"room2\"&gt;\n        &lt;inherit name=\"aftdirection\" /&gt;\n        &lt;inherit name=\"southdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n    &lt;object name=\"room2\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;inherit name=\"shiptype\" /&gt;\n      &lt;exit name=\"R2toR1\" alias=\"north\" to=\"room1\"&gt;\n        &lt;inherit name=\"foredirection\" /&gt;\n        &lt;inherit name=\"northdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;type name=\"shiptype\" /&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n<hr>\n<p>Your latest Nautical Library that I used:</p>\n<details>\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;library&gt;\n\n&lt;!--\n\nNauticalDirectionsLib\nVersion: 1.2\nBy: KV\nQuest version: 5.8\nSpecial thanks: Doctor Agon and The Pixie\n\n\nINSTRUCTIONS:\n\nIf you are using NpcLib, this should be included AFTER it in the game's code for this NiceDirection() mod to work!\n\nAll rooms on a ship need to have a parent object which inherits \"shiptype\".\n\nIn order for the shortcut commands to work, you must add the appropriate type to the exit.\n\nYou do not need to change your exits' names or aliases. The script will turn the alias of each exit which is in a \"shiptype\" object to a nautical exit alias, as long as the exit inherits one of the nautical direction types.\n\nTypes:\n\"foredirection\"\n\"portdirection\"\n\"starboarddirection\"\n\"aftdirection\"\n\nThe shortcut commands:\nfore, forward, f, port, p, starboard, sb, s, aft, a\n\n\nIMPORTANT:\n\n\tADD THE FOLLOWING 2 LINES TO THE GAME OBJECT'S inituserinterface\n\t\t\n\t\tSendToJsEval (js.description)\n\t\tJS.changeCompass ()\n\n--&gt;\n\n\n\n\n  &lt;turnscript name=\"nautical_buttons\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      if (DoesInherit(game.pov.parent.parent,\"shiptype\")) {\n        list = NewStringList()\n        foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\n          list add (list, exit.alias)\n        }\n        JS.updateShipCompass (Join(list, \"/\"))\n      }\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n\n  &lt;object name=\"js\"&gt;\n    &lt;description&gt;&lt;![CDATA[var onBoard = false;&lt;br/&gt;&lt;br/&gt;var shipButtons = '&lt;div id=\"dir-holder\" style=\"display:none;\"&gt;&lt;div id=\"ship-nav\"&gt;&lt;table id=\"ship-directions\"&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;';&lt;br/&gt;shipButtons += '&lt;button id=\"cmdCompassF\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"fore\" onclick=\"compassClick(\\'fore\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-n\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';&lt;br/&gt;shipButtons += '&lt;tr&gt;&lt;td&gt;&lt;button id=\"cmdCompassP\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"port\" onclick=\"compassClick(\\'port\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-w\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/button&gt;';&lt;br/&gt;shipButtons += '&lt;button id=\"cmdCompassSB\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"starboard\" onclick=\"compassClick(\\'starboard\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-e\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';&lt;br/&gt;shipButtons += '&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;button id=\"cmdCompassA\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"aft\" onclick=\"compassClick(\\'aft\\');\" role=\"button\" &gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-s\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';&lt;br/&gt;shipButtons += '&lt;/div&gt;&lt;/div&gt;';&lt;br/&gt;&lt;br/&gt;function changeCompass(){&lt;br/&gt;  addText(shipButtons);$(\"#ship-directions\").css(\"border-spacing\",\"0\");&lt;br/&gt;  $(\"#cmdCompassNW\").parent().parent().parent().attr('id','def-nav');&lt;br/&gt;  $('#ship-nav').hide();$('#def-nav').parent().append($('#dir-holder').html());&lt;br/&gt;  $(\".shipcompassbutton\").each(function(){&lt;br/&gt;    $(this).button().button(\"enable\").button(\"disable\");&lt;br/&gt;    $(\".shipcompassbutton span\").css(\"left\", \"0.8em\");$(\".shipcompassbutton .ui-button-text\").css('padding','.8em .8em');&lt;br/&gt;  });&lt;br/&gt;};&lt;br/&gt;&lt;br/&gt;function toggleNav(){&lt;br/&gt;  $(\"#def-nav, #ship-nav\").toggle()&lt;br/&gt;};&lt;br/&gt;&lt;br/&gt;function updateShipCompass(data){&lt;br/&gt;  var exits = data.split(\"/\");&lt;br/&gt;  $(\".shipcompassbutton\").each(function(){&lt;br/&gt;    for (var exit in exits){&lt;br/&gt;      if($(this).attr('title') === exits[exit]){&lt;br/&gt;        $(this).button(\"enable\");&lt;br/&gt;        break;&lt;br/&gt;      }else{&lt;br/&gt;        $(this).button(\"disable\");&lt;br/&gt;      }&lt;br/&gt;    }&lt;br/&gt;  });&lt;br/&gt;};&lt;br/&gt;]]&gt;&lt;/description&gt;\n  &lt;/object&gt;\n\n  &lt;type name=\"shiptype\"&gt;\n    &lt;compassTableShip /&gt;\n    &lt;captain type=\"object\"&gt;&lt;/captain&gt;\n    &lt;ramp type=\"object\"&gt;&lt;/ramp&gt;\n    &lt;destination type=\"object\"&gt;&lt;/destination&gt;\n    &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n      SetNauticalExitAliases\n    &lt;/attr&gt;\n    &lt;attr name=\"locations_visited\" type=\"objectlist\"&gt;&lt;/attr&gt;\n    &lt;course type=\"objectlist\"&gt;&lt;/course&gt;\n    &lt;shipDirs type=\"stringdictionary\"&gt;\n      &lt;item&gt;\n        &lt;key&gt;north&lt;/key&gt;\n        &lt;value&gt;fore&lt;/value&gt;\n      &lt;/item&gt;\n      &lt;item&gt;\n        &lt;key&gt;east&lt;/key&gt;\n        &lt;value&gt;starboard&lt;/value&gt;\n      &lt;/item&gt;\n      &lt;item&gt;\n        &lt;key&gt;west&lt;/key&gt;\n        &lt;value&gt;port&lt;/value&gt;\n      &lt;/item&gt;\n      &lt;item&gt;\n        &lt;key&gt;south&lt;/key&gt;\n        &lt;value&gt;aft&lt;/value&gt;\n      &lt;/item&gt;\n    &lt;/shipDirs&gt;\n  &lt;/type&gt;\n\n  &lt;type name=\"foredirection\"&gt;\n    &lt;inherit name=\"compassdirection\" /&gt;\n    &lt;alias&gt;fore&lt;/alias&gt;\n    &lt;alt type=\"stringlist\"&gt;\n      &lt;value&gt;f&lt;/value&gt;\n      &lt;value&gt;forward&lt;/value&gt;\n    &lt;/alt&gt;\n  &lt;/type&gt;\n\n  &lt;type name=\"portdirection\"&gt;\n    &lt;inherit name=\"compassdirection\" /&gt;\n    &lt;alias&gt;port&lt;/alias&gt;\n    &lt;alt type=\"stringlist\"&gt;\n      &lt;value&gt;p&lt;/value&gt;\n    &lt;/alt&gt;\n  &lt;/type&gt;\n\n  &lt;type name=\"starboarddirection\"&gt;\n    &lt;inherit name=\"compassdirection\" /&gt;\n    &lt;alias&gt;starboard&lt;/alias&gt;\n    &lt;alt type=\"stringlist\"&gt;\n      &lt;value&gt;sb&lt;/value&gt;\n    &lt;/alt&gt;\n  &lt;/type&gt;\n\n  &lt;type name=\"aftdirection\"&gt;\n    &lt;inherit name=\"compassdirection\" /&gt;\n    &lt;alias&gt;aft&lt;/alias&gt;\n    &lt;alt type=\"stringlist\"&gt;\n      &lt;value&gt;a&lt;/value&gt;\n    &lt;/alt&gt;\n  &lt;/type&gt;\n\n  &lt;function name=\"SetNauticalExitAliases\"&gt;&lt;![CDATA[\n    ship.compassdirections = ListExclude(ship.compassdirections,\"\")\n    list add (game.compassdirections, \"fore\")\n    list add (game.compassdirections, \"port\")\n    list add (game.compassdirections, \"starboard\")\n    list add (game.compassdirections, \"aft\")\n    list add (game.compassdirections, \"f\")\n    list add (game.compassdirections, \"p\")\n    list add (game.compassdirections, \"sb\")\n    list add (game.compassdirections, \"a\")\n    request (SetCompassDirections, Join(game.compassdirections, \";\"))\n    go.pattern = \"^go to (?&lt;exit&gt;.*)$|^go (?&lt;exit&gt;.*)$|^(?&lt;exit&gt;forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\n      lookdir.pattern = \"^look (?&lt;exit&gt;forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\n    foreach (exit, AllExits()) {\n      if (DoesInherit(exit.parent.parent, \"shiptype\")) {\n        alias = exit.alias\n        if (DictionaryContains(game.shipDirs, alias)) {\n          repl = StringDictionaryItem(game.shipDirs,alias)\n          exit.alias = repl\n        }\n      }\n    }\n  ]]&gt;&lt;/function&gt;\n\n  &lt;function name=\"SendToJsEval\" parameters=\"data\"&gt;&lt;![CDATA[\n    regEx = \"//\"\n    js = Split(data,\"&lt;br/&gt;\")\n    notes = NewStringList()\n    foreach (line, js) {\n      if (StartsWith(line,\"//\")) {\n        list add (notes, line)\n      }\n    }\n    js = ListExclude(js,notes)\n    finaljs = NewStringList()\n    foreach (line, js) {\n      code = line\n      if (IsRegExMatch(regEx,line)) {\n        list = Split(line,\"//\")\n        code = list[0]\n      }\n      list add (finaljs, code)\n    }\n    js = Join(finaljs,\"\")\n    js = Replace(js, \"[br]\", \"&lt;br/&gt;\")\n    js = Replace(js, \"[br/]\", \"&lt;br/&gt;\")\n    js = Replace(js, \"[break]\", \"&lt;br/&gt;\")\n    js = Replace(js, \"[linebreak]\", \"&lt;br/&gt;\")\n    js = Replace(js, \"[line break]\", \"&lt;br/&gt;\")\n    JS.eval (js)\n  ]]&gt;&lt;/function&gt;\n\n\n  &lt;!--\n  \n  TODO: \n\tAdd tabs so simplify setup.\n\t\n\tFix the CSS on the compass. The buttons are a little too far apart.\n  --&gt;\n\n&lt;!-- Fix ReverseDirection() and NiceDirection() --&gt;\n\n  &lt;function name=\"ReverseDirection\" parameters=\"dir\" type=\"string\"&gt;\n    list1 = Split(\"north;northeast;east;southeast;south;southwest;west;northwest;up;down;in;out;fore;port;starboard;aft\", \";\")\n    list2 = Split(\"south;southwest;west;northwest;north;northeast;east;southeast;down;up;out;in;aft;starboard;port;fore\", \";\")\n    n = IndexOf(list1, dir)\n    if (not n = -1) {\n      return (StringListItem(list2, n))\n    }\n    return (dir)\n  &lt;/function&gt;\n\n\t&lt;function name=\"NiceDirection\" parameters=\"exit, addthe\" type=\"string\"&gt;\n\t   switch (exit.alias) {\n\t\t case (\"in\") { s = \"inside\" }\n\t\t case (\"out\") { s = \"outside\" }\n\t\t case (\"up\") { s = \"above\" }\n\t\t case (\"down\") { s = \"below\" }\n\t\t  //Added by KV for Nautical Directions:\n\t\t  case (\"starboard\") {\n\t\t\ts = \"port\"\n\t\t\taddthe = false\n\t\t  }\n\t\t  case (\"port\") {\n\t\t\ts = \"starboard\"\n\t\t\taddthe = false\n\t\t  }\n\t\t  case (\"aft\") {\n\t\t\ts = \"fore\"\n\t\t\taddthe = false\n\t\t  }\n\t\t  case (\"fore\") {\n\t\t\ts = \"aft\"\n\t\t\taddthe = false\n\t\t  }\n\t\t  // End of KV's addition\n\t\t default {\n\t\t   if (addthe) {\n\t\t\t s = \"the \" + exit.alias\n\t\t   }\n\t\t   else {\n\t\t\t s = exit.alias\n\t\t   }\n\t\t }\n\t   }\n\t   return (s)\n\t &lt;/function&gt;\n  \n  &lt;/library&gt;\n</code></pre>\n</details>\n<hr>\n<p>UPDATE: Finally got the \"details\" tag to work.  Just trying to conserve space to help tired eyes and wrists.</p>\n\n",
      "PostDate": "2018-06-23T14:48:08.6918146Z",
      "LastEditDate": "2018-06-23T23:10:53.5587872Z",
      "link": null
    },
    {
      "PostId": "ffcc2ad4-064e-476a-bf07-77a8b2a8460e",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Technically speaking, you can set up whatever needs to be done to see JavaScript in the regular view in the game's code, instead of code view. Then you either paste or type the rest of the code in. I think I did that once.\r\n\r\nJust saying, you do not need the room description. I think.\r\nBut your thing does make it easier to paste in fast, I'll give you that.",
      "EditableFormat": "markdown",
      "HTML": "<p>Technically speaking, you can set up whatever needs to be done to see JavaScript in the regular view in the game's code, instead of code view. Then you either paste or type the rest of the code in. I think I did that once.</p>\n<p>Just saying, you do not need the room description. I think.<br>\nBut your thing does make it easier to paste in fast, I'll give you that.</p>\n\n",
      "PostDate": "2018-06-23T17:25:40.8450785Z",
      "LastEditDate": "2018-06-23T17:26:47.3899171Z",
      "link": null
    },
    {
      "PostId": "934433fc-afca-4c07-8ab2-3b7e04b8e308",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">  I added a \"shiptype\" type to the game's Advanced --> Object Types (needed for game to work with library)\r\n\r\nThat's already in the library.  You shouldn't have to add that type.\r\n\r\nOh... I had some game-specific attributes (captain, destination, etc) which were throwing errors.\r\n\r\nRevised library:\r\nhttp://textadventures.co.uk/games/view/tc6_kfxsteafa-ecf7sqew/nauticaldirectionslib",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I added a \"shiptype\" type to the game's Advanced --&gt; Object Types (needed for game to work with library)</p>\n</blockquote>\n<p>That's already in the library.  You shouldn't have to add that type.</p>\n<p>Oh... I had some game-specific attributes (captain, destination, etc) which were throwing errors.</p>\n<p>Revised library:<br>\nhttp://textadventures.co.uk/games/view/tc6_kfxsteafa-ecf7sqew/nauticaldirectionslib</p>\n\n",
      "PostDate": "2018-06-23T19:12:42.0941339Z",
      "LastEditDate": "2018-06-25T01:34:53.2065226Z",
      "link": null
    },
    {
      "PostId": "3ecf92c4-c371-43ea-8203-3f07e3dedf8e",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Also note that the library stuff behaves differently than the online stuff.\r\n\r\nSo mixing and matching code from one to the other would more than likely cause problems.",
      "EditableFormat": "markdown",
      "HTML": "<p>Also note that the library stuff behaves differently than the online stuff.</p>\n<p>So mixing and matching code from one to the other would more than likely cause problems.</p>\n\n",
      "PostDate": "2018-06-23T19:28:41.3656031Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "da209277-261f-44db-b253-278eb81ba732",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How well are you doing so far?\r\n\r\nHonestly, I think it would be easier if KV adapted The Pixie's nautical directions code to the online version.",
      "EditableFormat": "markdown",
      "HTML": "<p>How well are you doing so far?</p>\n<p>Honestly, I think it would be easier if KV adapted The Pixie's nautical directions code to the online version.</p>\n\n",
      "PostDate": "2018-06-23T19:39:43.4687939Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dadf10ae-112b-46da-9b25-b265e0c49728",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "First of all, a big thank you to  <a href=\"http://textadventures.co.uk/user/view/GudEjTsX9kOMAgJ-TFFyFg/richard-headkid\">Richard Headkid</a> for all of this code! I've finally finished adding all of it to my game. I had already created all of the rooms and exits, so I've moved the rooms into a new 'ship' object (although I named it differently). \r\n\r\nUnfortunately, all of the exits remain north, west, etc... The compass arrows are disabled. \r\n\r\nMaybe this is complicated by the fact that my first room is actually an 'Object and/or room' with the only exit being 'out'. I've moved the lines below from that room to the room that contains it.\r\n\r\n    JS.toggleNav ()\r\n    do (nautical_buttons_turnscript, \"script\")\r\n\r\nThat didn't help. Of course, that room's exits are 'in' and 'down', so the first room where the nautical directions would matter is actually the 3rd room the player encounters. I moved the above lines to that room instead, but still no change...\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>First of all, a big thank you to  <a href=\"http://textadventures.co.uk/user/view/GudEjTsX9kOMAgJ-TFFyFg/richard-headkid\">Richard Headkid</a> for all of this code! I've finally finished adding all of it to my game. I had already created all of the rooms and exits, so I've moved the rooms into a new 'ship' object (although I named it differently).</p>\n<p>Unfortunately, all of the exits remain north, west, etc... The compass arrows are disabled.</p>\n<p>Maybe this is complicated by the fact that my first room is actually an 'Object and/or room' with the only exit being 'out'. I've moved the lines below from that room to the room that contains it.</p>\n<pre><code>JS.toggleNav ()\ndo (nautical_buttons_turnscript, \"script\")\n</code></pre>\n<p>That didn't help. Of course, that room's exits are 'in' and 'down', so the first room where the nautical directions would matter is actually the 3rd room the player encounters. I moved the above lines to that room instead, but still no change...</p>\n\n",
      "PostDate": "2018-07-05T16:44:01.5743594Z",
      "LastEditDate": "2018-07-05T16:58:17.5961064Z",
      "link": null
    },
    {
      "PostId": "3bf3dcea-4c01-42f4-9a17-8cddd53bd6ab",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Send me a link to your game (or post the code), and I'll see what I can do to help.",
      "EditableFormat": "markdown",
      "HTML": "<p>Send me a link to your game (or post the code), and I'll see what I can do to help.</p>\n\n",
      "PostDate": "2018-07-05T17:05:24.83968Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bbe8cf6f-bbbf-4802-9cba-c390b5f8b625",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here it is (I noticed that I hadn't enabled the nautical_buttons_turnscript after I posted this, so I fixed that):\r\n\r\n<details>\r\n\r\n```<!--Saved by Quest 5.7.6615.29455-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Red Alert\">\r\n    <gameid>5d168f57-b215-43fb-b260-9d2c82c05bfc</gameid>\r\n    <version>1.1</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <author>Eric Caillibot</author>\r\n    <category>Sci-Fi</category>\r\n    <showscore />\r\n    <menufont>Georgia, serif</menufont>\r\n    <feature_limitinventory />\r\n    <attr name=\"feature_lightdark\" type=\"boolean\">false</attr>\r\n    <attr name=\"feature_asktell\" type=\"boolean\">false</attr>\r\n    <attr name=\"feature_annotations\" type=\"boolean\">false</attr>\r\n    <attr name=\"feature_advancedwearables\" type=\"boolean\">false</attr>\r\n    <feature_advancedscripts />\r\n    <appendobjectdescription />\r\n    <showcommandbar type=\"boolean\">false</showcommandbar>\r\n    <gridmap type=\"boolean\">false</gridmap>\r\n    <mapscale type=\"int\">1</mapscale>\r\n    <mapsize type=\"int\">1</mapsize>\r\n    <respondtogridclicks type=\"boolean\">false</respondtogridclicks>\r\n    <attr name=\"autodescription_youarein_useprefix\" type=\"boolean\">false</attr>\r\n    <attr name=\"autodescription_youcansee\" type=\"int\">3</attr>\r\n    <attr name=\"autodescription_youcango\" type=\"int\">4</attr>\r\n    <attr name=\"autodescription_description\" type=\"int\">2</attr>\r\n    <commandpane />\r\n    <statusandcompassattop />\r\n    <turnoffplacesandobjects />\r\n    <description>You were supposed to remain in cryo sleep until the Scion reached orbit around your target world in the Alpha Centauri system. So why are you awake now? And why are you alone?</description>\r\n    <cover>red-space.jpeg</cover>\r\n    <subtitle>Adrift in Space</subtitle>\r\n    <povstatusattributes type=\"stringdictionary\" />\r\n    <menufontsize type=\"int\">11</menufontsize>\r\n    <turnoffinventory type=\"boolean\">false</turnoffinventory>\r\n    <turnoffcompass type=\"boolean\">false</turnoffcompass>\r\n    <showpanes />\r\n    <pov type=\"object\">player</pov>\r\n    <inituserinterface type=\"script\"><![CDATA[\r\n      JS.setCommands (\"Computer;Look\")\r\n      SetTimeout (2) {\r\n        cmds = ProcessText(\"{command:Computer}&emsp;{command:Look}&emsp;{command:Inventory}\" + Chr(60) + \"span id=\\\"custom-score-div\\\">\" + Chr(60) + \"br/>Score: {game.score}\" + Chr(60) + \"/span>\")\r\n        s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\">\"\r\n        s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\r\n        s = s + Chr(60) + \"/div>\"\r\n        JS.eval (\"if (typeof (currentTab) === 'string'){var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));}\")\r\n        JS.\r\n      }\r\n      SendToJsEval (js.description)\r\n      JS.changeCompass ()\r\n    ]]></inituserinterface>\r\n    <start type=\"script\">\r\n      set (captain, \"state\", \"asleep\")\r\n      set (hypospray, \"med\", \"empty\")\r\n      set (game, \"power\", \"low\")\r\n      js = \"function isMobilePlayer(){\"\r\n        js = js + \"if (typeof(currentTab) === 'string'){return true;}return false;};\"\r\n      JS.eval (js)\r\n      SetupNautical\r\n    </start>\r\n  </game>\r\n  <verb>\r\n    <property>ask/tell</property>\r\n    <pattern>ask/tell</pattern>\r\n    <defaultexpression>\"You can't ask/tell \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <object name=\"space_cargo_bay\">\r\n    <inherit name=\"editor_room\" />\r\n    <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n    <alias>In Space (Outside Cargo Bay)</alias>\r\n    <description type=\"script\">\r\n      msg (\"The cold blackness of space is visible in every direction, perforated by innumerable, distant stars. The hull of the Scion stretches out below you, illuminated only by your suit's lights.\")\r\n      firsttime {\r\n        msg (\"The only sound is your own breathing. Using the grappling equipment integrated into your suit, you are able to move around the hull. The lack of gravity makes it virtually effortless, but the process is awkward and slow.\")\r\n      }\r\n    </description>\r\n    <exit name=\"airlock_in\" alias=\"in\" to=\"cargo_bay\">\r\n      <inherit name=\"indirection\" />\r\n      <runscript />\r\n      <script type=\"script\">\r\n        msg (\"You glide into the airlock and seal the outer door behind you. Air is automatically pumped into the room and once the air pressure matches the interior of the Scion, the inner door automatically slides open. You climb through the inner door, sealing it behind you. Once free of the airlock, you carefully remove the space suit.\")\r\n        MoveObject (player, cargo_bay)\r\n        space_suit.worn = false\r\n      </script>\r\n    </exit>\r\n    <exit alias=\"southeast\" to=\"space_engine_room\">\r\n      <inherit name=\"southeastdirection\" />\r\n    </exit>\r\n    <exit alias=\"northeast\" to=\"space_mess_deck\">\r\n      <inherit name=\"northeastdirection\" />\r\n    </exit>\r\n  </object>\r\n  <command name=\"computer\">\r\n    <pattern>Computer</pattern>\r\n    <script>\r\n      queries = listComputerQueries()\r\n      computerFunction (queries)\r\n    </script>\r\n  </command>\r\n  <verb>\r\n    <property>suitup</property>\r\n    <pattern>suit up</pattern>\r\n    <defaultexpression>\"You can't suit up \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <object name=\"space_engine_room\">\r\n    <inherit name=\"editor_room\" />\r\n    <alias>In Space (Outside Engine Room)</alias>\r\n    <description>You approach the aft section of the ship and you can see the enormous engine nacelles sticking out of the Scion. You can't help but feel awed by the sight.</description>\r\n    <exit alias=\"northwest\" to=\"space_cargo_bay\">\r\n      <inherit name=\"northwestdirection\" />\r\n    </exit>\r\n    <exit alias=\"north\" to=\"space_mess_deck\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n    <object name=\"hull\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"container_closed\" />\r\n      <alias>hull</alias>\r\n      <feature_usegive />\r\n      <feature_container />\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Use</value>\r\n      </displayverbs>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <inroomdescription type=\"string\"></inroomdescription>\r\n      <prefix>the</prefix>\r\n      <look type=\"script\">\r\n        msg (\"The hull outside the Engine Room shows damage that could only have been caused by some kind of weapons fire. Luckily, the damage seems to be minor.\")\r\n        if (hull.isopen = true and eng_door.locked = true) {\r\n          msg (\"A long thin gash runs along the hull, where you cut in with your plasma torch.\")\r\n        }\r\n        else if (hull.isopen=true and eng_door.locked = false) {\r\n          msg (\"You admire your handiwork, noting that the cut you made previously has been expertly sealed.\")\r\n        }\r\n      </look>\r\n      <use type=\"script\">\r\n        if (plasma_torch.parent = player) {\r\n          if (not hull.isopen) {\r\n            msg (\"Using the plasma torch, you begin cutting through the Scion's hull. As soon as you pierce through, a jet of air begins spraying out through the gap. You continue cutting until the atmosphere from the Engine Room has completely vented into space. Without any air left inside, the fire won't be able to sustain itself.\")\r\n            HelperOpenObject (hull)\r\n            IncreaseScore (1)\r\n          }\r\n          else {\r\n            firsttime {\r\n              msg (\"With all of the air vented into space and the fire extinguished, you use the plasma torch to seal the cut you made.\")\r\n              UnlockExit (eng_door)\r\n              IncreaseScore (1)\r\n            }\r\n            otherwise {\r\n              msg (\"The hull remains well sealed. No further work is required.\")\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          msg (\"You don't have any tool that would let you work on the hull.\")\r\n        }\r\n      </use>\r\n    </object>\r\n  </object>\r\n  <object name=\"space_mess_deck\">\r\n    <inherit name=\"editor_room\" />\r\n    <description>You make your way around the hull to the section outside the Mess Deck. The ship was clearly fired upon by some kind of energy weapon. Minor damage is visible in several locations.</description>\r\n    <alias>In Space (Outside Mess Deck)</alias>\r\n    <exit alias=\"southwest\" to=\"space_cargo_bay\">\r\n      <inherit name=\"southwestdirection\" />\r\n    </exit>\r\n    <exit alias=\"south\" to=\"space_engine_room\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n    <object name=\"hull_breach\">\r\n      <inherit name=\"editor_object\" />\r\n      <alias>gaping tear in the hull</alias>\r\n      <inroomdescription>The worst of the damage caused a hull breach, running parallel to the Scion's long axis.</inroomdescription>\r\n      <look>A long, but very narrow gash. You're confident that you could repair the damage, if you had the right tool. Assuming you don't get fired on while you are helplessly exposed...</look>\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Use</value>\r\n      </displayverbs>\r\n      <feature_usegive />\r\n      <use type=\"script\">\r\n        if (plasma_torch.parent = player) {\r\n          msg (\"Carefully bracing yourself against the hull, you begin welding the gash closed with the plasma torch. Your visor automatically darkens to protect your eyes from the intense light. Despite your suit's insulated gloves, your hands heat up and become sweaty in short order. It is slow going, but you persevere and succeed in sealing the breach.\")\r\n          RemoveObject (hull_breach)\r\n          UnlockExit (mess_door)\r\n          IncreaseScore (1)\r\n        }\r\n        else {\r\n          msg (\"You can't do much about the breach without the right tool.\")\r\n        }\r\n      </use>\r\n    </object>\r\n    <object name=\"alien_ship\">\r\n      <inherit name=\"editor_object\" />\r\n      <alias>Unidentified Object</alias>\r\n      <inroomdescription>In the distance, a twinkling light catches your eye. </inroomdescription>\r\n      <look>It is much too faint to be a star or planet. It could be another spaceship.</look>\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n      </displayverbs>\r\n    </object>\r\n  </object>\r\n  <verb>\r\n    <property>exitsuit</property>\r\n    <pattern>exit suit</pattern>\r\n    <defaultexpression>\"You can't exit suit \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <verb>\r\n    <property>removesuit</property>\r\n    <pattern>remove suit</pattern>\r\n    <defaultexpression>\"You can't remove suit \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <verb>\r\n    <property>dropsuit</property>\r\n    <pattern>drop suit</pattern>\r\n    <defaultexpression>\"You can't drop suit \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <verb>\r\n    <property>stand</property>\r\n    <pattern>stand</pattern>\r\n    <defaultexpression>\"You can't stand \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <turnscript name=\"mobileScore\">\r\n    <enabled />\r\n    <script><![CDATA[\r\n      JS.eval (\"$('#custom-score-div').html('\" + Chr(60) + \"br/>Score: \" + ProcessText(\"{game.score}\") + \"');\")\r\n    ]]></script>\r\n  </turnscript>\r\n  <turnscript name=\"nautical_buttons_turnscript\">\r\n    <script>\r\n      if (HasAttribute (game.pov.parent, \"parent\")) {\r\n        if (GetBoolean(game.pov.parent.parent,\"shiptype\")) {\r\n          list = NewStringList()\r\n          foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\r\n            list add (list, exit.alias)\r\n          }\r\n          JS.updateShipCompass (Join(list, \"/\"))\r\n        }\r\n      }\r\n    </script>\r\n  </turnscript>\r\n  <object name=\"js\">\r\n    <inherit name=\"editor_room\" />\r\n    <description><![CDATA[var onBoard = false;<br/>var shipButtons = '<div id=\"dir-holder\" style=\"display:none;\"><div id=\"ship-nav\"><table id=\"ship-directions\"><tr><td></td><td>';<br/>shipButtons += '<button id=\"cmdCompassF\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"fore\" onclick=\"compassClick(\\'fore\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-n\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr>';<br/>shipButtons += '<tr><td><button id=\"cmdCompassP\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"port\" onclick=\"compassClick(\\'port\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-w\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></td><td></td><td></button>';<br/>shipButtons += '<button id=\"cmdCompassSB\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"starboard\" onclick=\"compassClick(\\'starboard\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-e\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr>';<br/>shipButtons += '<tr><td></td><td><button id=\"cmdCompassA\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"aft\" onclick=\"compassClick(\\'aft\\');\" role=\"button\" ><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-s\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr></table>';<br/>shipButtons += '</div></div>';<br/>function changeCompass(){<br/>  $('body').append(shipButtons);<br/>  $(\"#ship-directions\").css(\"border-spacing\",\"0\");<br/>  $(\"#cmdCompassNW\").parent().parent().parent().attr('id','def-nav');<br/>  $('#ship-nav').hide();$('#def-nav').parent().append($('#dir-holder').html());<br/>  $(\".shipcompassbutton\").each(function(){<br/>    $(this).button().button(\"enable\").button(\"disable\");<br/>    $(\".shipcompassbutton span\").css(\"left\", \"0.8em\");$(\".shipcompassbutton .ui-button-text\").css('padding','.8em .8em');<br/>  });<br/>};<br/>function toggleNav(){<br/>  $(\"#def-nav, #ship-nav\").toggle()<br/>};<br/>function updateShipCompass(data){<br/>  var exits = data.split(\"/\");<br/>  $(\".shipcompassbutton\").each(function(){<br/>    for (var exit in exits){<br/>      if($(this).attr('title') === exits[exit]){<br/>        $(this).button(\"enable\");<br/>        break;<br/>      }else{<br/>        $(this).button(\"disable\");<br/>      }<br/>    }<br/>  });<br/>};]]></description>\r\n  </object>\r\n  <object name=\"scion\">\r\n    <feature_startscript />\r\n    <attr name=\"_initialise_\" type=\"script\">\r\n      this.shiptype = true\r\n    </attr>\r\n    <object name=\"cryo_quarters\">\r\n      <inherit name=\"editor_room\" />\r\n      <description>Row upon row of pods, each housing a crew member in cryogenic suspension, surrounds you. Even outside the pods, the room is cold. The sound of dripping water can be heard in the distance. A ladder leads down to the Crew Quarters.</description>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <descprefix type=\"string\"></descprefix>\r\n      <alias>Cryo Quarters</alias>\r\n      <dropdestination type=\"object\">cryo_quarters</dropdestination>\r\n      <firstenter type=\"script\">\r\n      </firstenter>\r\n      <exit name=\"ladder down\" alias=\"down\" to=\"crew_quarters\">\r\n        <inherit name=\"downdirection\" />\r\n      </exit>\r\n      <object name=\"cryo_pod\">\r\n        <inherit name=\"container_closed\" />\r\n        <inroomdescription>Your cryo pod stands out from the rows of identical, but sealed and occupied, pods nearby.</inroomdescription>\r\n        <feature_container />\r\n        <isopen type=\"boolean\">false</isopen>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n        </displayverbs>\r\n        <transparent type=\"boolean\">false</transparent>\r\n        <openmsg>The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out and quickly dissipates.</openmsg>\r\n        <closemsg>The glass cover rotates into place, sealing the cryo pod. A quiet hum is audible as the pod activates its cryo sleep cycle.</closemsg>\r\n        <listchildren />\r\n        <visible type=\"boolean\">false</visible>\r\n        <alias>cryo pod</alias>\r\n        <close type=\"boolean\">false</close>\r\n        <look>A cylindrical capsule with a sliding glass cover, sized to contain a single person. Inside is a variety of vital sign sensors used to adjust the cryogenic stasis of its occupant.</look>\r\n        <dropdestination type=\"object\">cryo_pod</dropdestination>\r\n        <openscript type=\"script\">\r\n          msg (\"The cylindrical glass cover rotates with a hiss. As the pod opens to the surrounding room, a cloud of vapour floats out and quickly dissipates.\")\r\n          firsttime {\r\n            create exit (\"pod door\", cryo pod, Cryo Quarters, out)\r\n            msg (\"You climb out of the pod carefully, making sure not to overexert your sluggish muscles. You still feel woozy from the effects of cryo sleep, but your senses are slowly returning to normal.\")\r\n            MoveObject (player, Cryo Quarters)\r\n          }\r\n        </openscript>\r\n        <closescript type=\"script\">\r\n          msg (\"The cylindrical glass cover rotates, sealing the cryo pod.\")\r\n        </closescript>\r\n        <onopen type=\"script\">\r\n          HelperOpenObject (cryo_pod)\r\n        </onopen>\r\n        <description type=\"script\">\r\n          firsttime {\r\n            msg (\"You awake from a deep slumber, struggling to make sense of your perceptions. You are lying on your back, inside a small container. It is dark, and cold. As your consciousness returns, you manage to identify your surroundings as a cryo pod. You begin to remember climbing into it, in preparation for a long cryo sleep, while the Scion travelled to the Alpha Centauri system. Why have you been awakened? Has the Scion reached its destination? Is it time to begin founding a new colony?\")\r\n          }\r\n          otherwise {\r\n            msg (\"The cryo pod still feels cold, even though the cryo sleep function has clearly been disabled. \")\r\n          }\r\n        </description>\r\n        <onclose type=\"script\">\r\n          HelperCloseObject (cryo_pod)\r\n        </onclose>\r\n        <firstenter type=\"script\">\r\n        </firstenter>\r\n        <object name=\"player\">\r\n          <inherit name=\"editor_object\" />\r\n          <inherit name=\"editor_player\" />\r\n          <inherit name=\"namedmale\" />\r\n          <alias>Crewman Shepherd</alias>\r\n          <usedefaultprefix />\r\n          <look type=\"string\"></look>\r\n          <visible type=\"boolean\">false</visible>\r\n          <attr name=\"pov_look\">You're dressed in a standard-issue jump suit, with the Scion's mission crest over your left pectoral.</attr>\r\n          <maxvolume type=\"int\">1</maxvolume>\r\n          <containerfullmessage>You can't carry any more. Your jumpsuit doesn't have any pockets.</containerfullmessage>\r\n        </object>\r\n        <exit alias=\"out\" to=\"cryo_quarters\">\r\n          <inherit name=\"outdirection\" />\r\n          <locked type=\"boolean\">false</locked>\r\n          <lockmessage>The cryo pod is sealed. </lockmessage>\r\n          <runscript />\r\n          <script type=\"script\">\r\n            if (not ListContains(ScopeVisible(), cryo_pod)) {\r\n              if (not cryo_pod.isopen) {\r\n                msg (\"Your mind still fuzzy from the effects of prolonged cryo sleep, you push against the cryo pod's glass cover to no avail. As you slowly regain your faculties, you remember your training. Opening the cryo pod, as well as perfoming many other actions aboard the Scion, requires issuing verbal commands to the ship's computer.\")\r\n                SetTimeout (2) {\r\n                  JS.eval (\"if (typeof (currentTab) !== 'string') {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the top right to issue verbal commands to the ship's computer.\\\");} else {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the bottom to issue verbal commands to the ship's computer.\\\");}\")\r\n                  JS.scrollToEnd ()\r\n                }\r\n              }\r\n              else {\r\n                firsttime {\r\n                  msg (\"You climb out of the pod carefully, making sure not to overexert your sluggish muscles. You still feel woozy from the effects of cryo sleep, but your senses are slowly returning to normal.\")\r\n                  IncreaseScore (1)\r\n                }\r\n                otherwise {\r\n                  msg (\"\")\r\n                }\r\n                MakeObjectVisible (cryo_pod)\r\n                MoveObject (player, cryo_quarters)\r\n              }\r\n            }\r\n            else {\r\n              MoveObject (player, cryo_quarters)\r\n            }\r\n          </script>\r\n        </exit>\r\n      </object>\r\n      <exit alias=\"in\" to=\"cryo_pod\">\r\n        <inherit name=\"indirection\" />\r\n      </exit>\r\n      <object name=\"captain_pod\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_closed\" />\r\n        <inherit name=\"container_lockable\" />\r\n        <feature_container />\r\n        <close type=\"boolean\">false</close>\r\n        <listchildren />\r\n        <inroomdescription>You are also able to identify Captain Picker's cryo pod.</inroomdescription>\r\n        <look>A cylindrical capsule with a sliding glass cover, identical to the one you crawled out of.</look>\r\n        <alias>Captain Picker's cryo pod</alias>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Open</value>\r\n        </displayverbs>\r\n        <listchildrenprefix>Inside is</listchildrenprefix>\r\n        <openmsg>The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out and quickly dissipates.</openmsg>\r\n        <closemsg>The glass cover rotates into place, sealing the cryo pod. A quiet hum is audible as the pod activates its cryo sleep cycle.</closemsg>\r\n        <autounlock type=\"boolean\">false</autounlock>\r\n        <autoopen type=\"boolean\">false</autoopen>\r\n        <transparent />\r\n        <hidechildren />\r\n        <feature_startscript />\r\n        <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n        <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n          captain_pod.openscript => {\r\n            if (not this.locked and not this.isopen) {\r\n              captain_pod.isopen = true\r\n              captain.state = \"awake\"\r\n              MoveObject (captain, cryo_quarters)\r\n              msg (\"The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out. As it dissipates, you can see {object:captain} slowly climbing out of his pod.\")\r\n            }\r\n            else if (not this.locked and this.isopen) {\r\n              msg (\"It is already open.\")\r\n            }\r\n            else {\r\n              msg (\"An error chimes sounds from the ship's computer.<br/>\\\"Life support at critical levels. Restore main power in order to revive additional crew members.\\\"\")\r\n            }\r\n          }\r\n        ]]></attr>\r\n        <object name=\"captain\">\r\n          <inherit name=\"editor_object\" />\r\n          <inherit name=\"namedmale\" />\r\n          <alias>Captain Picker</alias>\r\n          <displayverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n          </displayverbs>\r\n          <look type=\"script\">\r\n            switch (captain.state) {\r\n              case (\"asleep\") {\r\n                msg (\"You examine Captain Picker as he sleeps. He is in his fifties, bald, with sharp, angular features and a stern demeanour which is not diminished by his peaceful state.\")\r\n              }\r\n              case (\"awake\") {\r\n                msg (\"Captain Picker rubs his face groggily with boths hands. He is in his fifties, bald, with sharp, angular features and a stern demeanour.\")\r\n              }\r\n              case (\"hurt\") {\r\n                msg (\"Captain Picker lays in a heap on the floor. He appears to have been knocked unconscious and you see an angry red mark on his bald head.\")\r\n              }\r\n              case (\"combat\") {\r\n                msg (\"Captain Picker is scanning the instrumentation output on the console integrated into the Captain's Chair and braking commands at the ship's computer to evade the hostile vessel incoming fire and mitigate damage.\")\r\n              }\r\n            }\r\n          </look>\r\n          <speak type=\"script\">\r\n            talkToCaptain\r\n          </speak>\r\n          <ask type=\"scriptdictionary\">\r\n            <item key=\"health\">\r\n            </item>\r\n          </ask>\r\n        </object>\r\n      </object>\r\n    </object>\r\n    <object name=\"crew_quarters\">\r\n      <inherit name=\"editor_room\" />\r\n      <description>Dozens of rows of bunk beds fill the room, all unnoccupied. The beds are made and ready for use. Once the crew is awakened from cryogenic sleep, this will become their new sleeping area. The cold air from the cryo quarters above can be felt drifting down the ladder.</description>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <descprefix type=\"string\"></descprefix>\r\n      <alias>Crew Quarters</alias>\r\n      <dropdestination type=\"object\">crew_quarters</dropdestination>\r\n      <firstenter type=\"script\">\r\n        JS.toggleNav ()\r\n        do (nautical_buttons_turnscript, \"script\")\r\n      </firstenter>\r\n      <exit name=\"ladder up\" alias=\"up\" to=\"cryo_quarters\">\r\n        <inherit name=\"updirection\" />\r\n      </exit>\r\n      <exit alias=\"west\" to=\"aft_corridor\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <object name=\"locker\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_closed\" />\r\n        <feature_container />\r\n        <inroomdescription>A row of lockers lines the far wall. </inroomdescription>\r\n        <look>You recognize the locker designated for your use.</look>\r\n        <listchildren />\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n          <value>Open</value>\r\n          <value>Close</value>\r\n        </inventoryverbs>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Open</value>\r\n          <value>Close</value>\r\n        </displayverbs>\r\n        <openmsg>The locker opens with a metallic squeak.</openmsg>\r\n        <object name=\"space_suit\">\r\n          <inherit name=\"editor_object\" />\r\n          <inherit name=\"wearable\" />\r\n          <alias>space suit</alias>\r\n          <feature_wearable />\r\n          <take />\r\n          <attr name=\"wear_layer\" type=\"int\">0</attr>\r\n          <wearmsg>You climb into the suit, piece by piece. You painstakingly verify every joint and seal, completing the pre-EVA checklist drilled into you during your training.</wearmsg>\r\n          <removemsg>You remove the suit, struggling your way out of each section, until you are down to just your jump suit once again.</removemsg>\r\n          <inventoryverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n            <value>Suit Up</value>\r\n            <value>Remove Suit</value>\r\n            <value>Drop Suit</value>\r\n          </inventoryverbs>\r\n          <volume type=\"int\">0</volume>\r\n          <look type=\"script\">\r\n            msg (\"It is a Mark IV, extra vehicular activity suit, with integrated grappling harness and air supply. \")\r\n            if (air_tank.isopen = true) {\r\n              msg (\"The air tank is currently empty.\")\r\n            }\r\n            else {\r\n              msg (\"The air tank is full.\")\r\n            }\r\n          </look>\r\n          <suitup type=\"script\">\r\n            if (air_tank.isopen = true) {\r\n              msg (\"Putting on the space suit with no air in the tank would doom you to suffocation.\")\r\n            }\r\n            else {\r\n              msg (\"You climb into the suit, piece by piece. You painstakingly verify every joint and seal, completing the pre-EVA checklist drilled into you during your training.\")\r\n              space_suit.worn = true\r\n            }\r\n          </suitup>\r\n          <dropsuit type=\"script\">\r\n            if (space_suit.worn = true) {\r\n              msg (\"You must remove the suit before dropping it.\")\r\n            }\r\n            else {\r\n              msg (\"You drop it.\")\r\n              MoveObjectHere (space_suit)\r\n            }\r\n          </dropsuit>\r\n          <removesuit type=\"script\">\r\n            if (player.parent=space_cargo_bay or player.parent=space_mess_deck or player.parent=space_engine_room) {\r\n              msg (\"Removing your space suit while in space would be suicide.\")\r\n            }\r\n            else {\r\n              msg (\"You remove the suit, struggling your way out of each section, until you are down to just your jump suit once again.\")\r\n              SetObjectFlagOff (space_suit, \"worn\")\r\n            }\r\n          </removesuit>\r\n          <object name=\"air_tank\">\r\n            <inherit name=\"editor_object\" />\r\n            <inherit name=\"container_limited\" />\r\n            <scenery type=\"boolean\">false</scenery>\r\n            <visible type=\"boolean\">false</visible>\r\n            <feature_container />\r\n          </object>\r\n        </object>\r\n      </object>\r\n    </object>\r\n    <object name=\"aft_corridor\">\r\n      <inherit name=\"editor_room\" />\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <alias>Aft Corridor</alias>\r\n      <dropdestination type=\"object\">aft_corridor</dropdestination>\r\n      <description type=\"script\">\r\n        msg (\"The corridor in the aft section of the Scion is wide enough for several people to walk side by side. Off to port is the Cargo Bay, the Crew Quarters are starboard, heading aft leads to the engine room, while the rest of the ship is to the fore.\")\r\n        if (eng_door.locked = true) {\r\n          msg (\"You can smell smoke coming from the aft direction.\")\r\n        }\r\n      </description>\r\n      <exit alias=\"east\" to=\"crew_quarters\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n      <exit name=\"eng_door\" alias=\"south\" to=\"engine_room\">\r\n        <inherit name=\"southdirection\" />\r\n        <locked />\r\n        <lockmessage>As you approach the engine room, the door does not slide open automatically. Thin tendrils of smoke are seeping around the door seal and you can feel intense heat coming from the other side.</lockmessage>\r\n      </exit>\r\n      <exit alias=\"west\" to=\"cargo_bay\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <exit alias=\"north\" to=\"fore_corridor\">\r\n        <inherit name=\"northdirection\" />\r\n      </exit>\r\n    </object>\r\n    <object name=\"engine_room\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Engine Room</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description type=\"script\"><![CDATA[\r\n        firsttime {\r\n          msg (\"As the door to the Engine Room begins to slide open, you brace yourself. If the fire damage was bad enough, you may be walking into a radioactive disaster zone. Even if you aren't immediately killed, a damaged engine could mean the Scion is about to become dead in space, dooming you and the sleeping crew to float in a cold, lonely grave for centuries. <br/><br/>When the door does open, you are relieved to see the shining blue light of the containment field. Everything within it, crucially including the engine itself, was spared from the fire. The damage to the rest of the room is extensive, but you can't worry about that right now.\")\r\n        }\r\n        msg (\"The room is peppered with black soot and the acrid smell of smoke is almost overpowering.\")\r\n      ]]></description>\r\n      <exit alias=\"north\" to=\"aft_corridor\">\r\n        <inherit name=\"northdirection\" />\r\n      </exit>\r\n      <object name=\"containment_field\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_closed\" />\r\n        <look>The translucent field shimmers as you inspect it. It is holding steady, at full strength.</look>\r\n        <inroomdescription>A glowing, blue containment field protects a cynlindrical volume within the Engine Room. Everything inside the field appears pristine, having been untouched by the fire.</inroomdescription>\r\n        <feature_container />\r\n        <open type=\"boolean\">false</open>\r\n        <close type=\"boolean\">false</close>\r\n        <transparent />\r\n        <alias>containment field</alias>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Open</value>\r\n        </displayverbs>\r\n        <openmsg type=\"string\"></openmsg>\r\n        <nokeymessage>Lowering the containment field would instantly expose you to dangerous radiation from the engine. </nokeymessage>\r\n        <listchildren />\r\n        <autounlock type=\"boolean\">false</autounlock>\r\n        <autoopen type=\"boolean\">false</autoopen>\r\n        <feature_startscript />\r\n        <listchildrenprefix>Within it are </listchildrenprefix>\r\n        <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n          containment_field.openscript => {\r\n            if (not this.locked and not this.isopen) {\r\n              msg (\"Lowering the containment field would instantly expose you to dangerous radiation from the engine. \")\r\n            }\r\n          }\r\n        ]]></attr>\r\n        <object name=\"engine\">\r\n          <inherit name=\"editor_object\" />\r\n          <inherit name=\"container_closed\" />\r\n          <feature_container />\r\n          <isopen type=\"boolean\">false</isopen>\r\n          <transparent type=\"boolean\">false</transparent>\r\n          <inroomdescription>The advanced fission engine sits in the centre of the containment field.</inroomdescription>\r\n          <feature_switchable />\r\n          <listchildren type=\"boolean\">false</listchildren>\r\n          <displayverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n          </displayverbs>\r\n          <look type=\"script\">\r\n            if (old_rods.parent = engine) {\r\n              msg (\"The engine is operational, but its power output is very low.\")\r\n            }\r\n            else if (new_rods.parent = engine) {\r\n              msg (\"The engine is operating at full capacity. Power output is nominal.\")\r\n            }\r\n            else {\r\n              msg (\"Without any control rods inside, the plasma reactor is offline.\")\r\n            }\r\n          </look>\r\n          <object name=\"old_rods\">\r\n            <inherit name=\"editor_object\" />\r\n            <alias>depleted control rods</alias>\r\n          </object>\r\n        </object>\r\n        <object name=\"RAT\">\r\n          <inherit name=\"editor_object\" />\r\n          <alias>RAT</alias>\r\n          <inroomdescription>A robotacized, automated transport (RAT) is in standby mode.</inroomdescription>\r\n          <displayverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n            <value>Use</value>\r\n          </displayverbs>\r\n          <feature_usegive />\r\n          <look type=\"script\">\r\n            msg (\"The RAT has a four wheeled base, designed for navigating rough terrain. It features a long, flat bed for transporting heavy equipment and a robotic arm for loading and unloading.\")\r\n            if (old_rods.parent = RAT) {\r\n              msg (\"The used control rods sit on top of the RAT's flat bed.\")\r\n            }\r\n            else if (new_rods.parent = RAT) {\r\n              msg (\"The new control rods sit on top of the RAT's flat bed.\")\r\n            }\r\n          </look>\r\n          <use type=\"script\"><![CDATA[\r\n            RATQueries = NewStringList()\r\n            RATQueries = listRATQueries()\r\n            if (ListCount(RATQueries) = 0) {\r\n              msg (\"\\\"Roboticised Automated Transports will respond to verbal commands issued to the ship's computer,\\\" explains the ship's computer. \\\"RAT units can be used to service the Scion's plasma reactor. Verifying current reactor status...\\\"<br/>\")\r\n              engineStatus\r\n            }\r\n            else {\r\n              computerFunction (RATQueries)\r\n            }\r\n          ]]></use>\r\n        </object>\r\n      </object>\r\n      <object name=\"broken_rat\">\r\n        <inherit name=\"editor_object\" />\r\n        <inroomdescription>A robot stands just outside the field, its tires melted and its chassis warped and blackened by the fire. </inroomdescription>\r\n        <look>A quick glance is enough to tell you that extensive reconstruction would be necessary to get this RAT working again.</look>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n        </displayverbs>\r\n        <alias>damaged robot</alias>\r\n      </object>\r\n    </object>\r\n    <object name=\"cargo_bay\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Cargo Bay</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description>The bay is packed with equipment from floor to ceiling. The mission organizer's tried to include everything needed to establish a new colony on a distant, unknown alien world. Any damage to the equipment in here could threaten the success of the mission. At the far end of the cargo bay is an airlock. </description>\r\n      <exit alias=\"east\" to=\"aft_corridor\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n      <exit name=\"airlock\" alias=\"out\" to=\"space_cargo_bay\">\r\n        <inherit name=\"outdirection\" />\r\n        <locked type=\"boolean\">false</locked>\r\n        <lockmessage type=\"string\"></lockmessage>\r\n        <runscript />\r\n        <script type=\"script\">\r\n          if (space_suit.worn = true) {\r\n            msg (\"You open the airlock's inner door and walk inside. The inner door seals itself automatically and the air is quickly sucked out of the room. You check your space suit's systems, and they are all within normal operating parameters. The outer door slides open silently and you cautiously step out into the void.\")\r\n            JS.toggleNav ()\r\n            MoveObject (player, space_cargo_bay)\r\n          }\r\n          else {\r\n            msg (\"Stepping into an airlock without wearing a space suit would be suicide.\")\r\n          }\r\n        </script>\r\n      </exit>\r\n      <object name=\"huge_crate\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_closed\" />\r\n        <inherit name=\"container_lockable\" />\r\n        <alias>huge crate</alias>\r\n        <feature_container />\r\n        <listchildren />\r\n        <nokeymessage>The crate can't be opened with your bare hands.</nokeymessage>\r\n        <unlockmessage>The laser cut through the crate's seals with ease.</unlockmessage>\r\n        <takemsg>The crate is much too massive to be picked up by even the strongest human.</takemsg>\r\n        <close type=\"boolean\">false</close>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Take</value>\r\n          <value>Open</value>\r\n        </displayverbs>\r\n        <keycount type=\"int\">1</keycount>\r\n        <autounlock />\r\n        <autoopen />\r\n        <openmsg>With a solid shove, the top of the crate slides away.</openmsg>\r\n        <key type=\"object\">laser_opener</key>\r\n        <look type=\"script\">\r\n          if (huge_crate.isopen = false) {\r\n            msg (\"The crate is tightly sealed. A label reads \\\"plasma reactor control rods\\\".\")\r\n          }\r\n          else {\r\n            msg (\"The crate has been cut open. The lid lies discarded on the floor nearby. \")\r\n          }\r\n        </look>\r\n        <object name=\"new_rods\">\r\n          <inherit name=\"editor_object\" />\r\n          <inherit name=\"plural\" />\r\n          <alias>new control rods</alias>\r\n          <look>The rods are long, thin cylinders, gunmetal grey in colour. They are in pristine condition and ready for use.</look>\r\n          <takemsg>The rods are too heavy and too numerous for you to handle unaided.</takemsg>\r\n        </object>\r\n      </object>\r\n      <object name=\"plasma_torch\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>plasma torch</alias>\r\n        <look>A heavy duty tool, able to cut through or seal metal plating up to a metre thick.</look>\r\n        <take />\r\n        <volume type=\"int\">1</volume>\r\n        <feature_usegive />\r\n        <use type=\"script\">\r\n          if (plasma_torch.parent = player and player.parent = space_mess_deck and hull_breach.parent = space_mess_deck) {\r\n            msg (\"Carefully bracing yourself against the hull, you begin welding the gash closed with the plasma torch. Your visor automatically darkens to protect your eyes from the intense light. Despite your suit's insulated gloves, your hands heat up and become sweaty in short order. It is slow going, but you persevere and succeed in sealing the breach.\")\r\n            RemoveObject (hull_breach)\r\n            UnlockExit (mess_door)\r\n            IncreaseScore (1)\r\n          }\r\n          else if (plasma_torch.parent = player and player.parent = space_engine_room) {\r\n            if (not hull.isopen) {\r\n              msg (\"Using the plasma torch, you begin cutting through the Scion's hull. As soon as you pierce through, a jet of air begins spraying out through the gap. You continue cutting until the atmosphere from the Engine Room has completely vented into space. Without any air left inside, the fire won't be able to sustain itself.\")\r\n              HelperOpenObject (hull)\r\n              IncreaseScore (1)\r\n            }\r\n            else {\r\n              firsttime {\r\n                msg (\"With all of the air vented into space and the fire extinguished, you use the plasma torch to seal the cut you made.\")\r\n                UnlockExit (eng_door)\r\n                IncreaseScore (1)\r\n              }\r\n              otherwise {\r\n                msg (\"The hull remains well sealed. No further work is required.\")\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            msg (\"You don't see any obvious use for it here.\")\r\n          }\r\n        </use>\r\n      </object>\r\n    </object>\r\n    <object name=\"fore_corridor\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Forward Corridor</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description>The corridor narrows toward the fore of the Scion, allowing only a pair of passengers to walk abreast as it reaches the bridge at the far end. The Med Bay is on the port side, with the Mess Deck to starboard. Following the corridor aft leads into the Aft Corridor.</description>\r\n      <exit alias=\"south\" to=\"aft_corridor\">\r\n        <inherit name=\"southdirection\" />\r\n      </exit>\r\n      <exit alias=\"north\" to=\"bridge\">\r\n        <inherit name=\"northdirection\" />\r\n        <runscript />\r\n        <script type=\"script\"><![CDATA[\r\n          if (captain.parent = captain_chair) {\r\n            msg (\"As you walk into the Bridge, you see that Captain Picker has already taken up his post in the Captain's Chair. The viewscreen shows a magnified image of the enemy vessel. You've never seen anything like it--it looks like a collection of haphazardly arranged spheres, variously glowing in incomprehensible patterns.<br/><br/>\\\"Shepherd!\\\" shouts the Captain as you walk in. \\\"I'm having the Scion perform evasive maneuvers. I need you to man the weapons and return fire! Step to it man!\\\"\")\r\n            MoveObject (player, bridge)\r\n          }\r\n          else {\r\n            MoveObject (player, bridge)\r\n          }\r\n        ]]></script>\r\n      </exit>\r\n      <exit alias=\"west\" to=\"med_bay\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <exit name=\"mess_door\" alias=\"east\" to=\"mess_deck\">\r\n        <inherit name=\"eastdirection\" />\r\n        <locked />\r\n        <lockmessage>As you approach the door to the Mess Deck, it does not slide open automatically.</lockmessage>\r\n      </exit>\r\n    </object>\r\n    <object name=\"med_bay\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Med Bay</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description>The walls are lined with empty gurneys, ready to receive patients. A variety of medical equipment and robotics are installed in the middle of the room. Medicine is not your area of expertise, so you recognize very few of the devices and know how to operate fewer still.</description>\r\n      <exit alias=\"east\" to=\"fore_corridor\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n      <object name=\"air_compressor\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>air compressor</alias>\r\n        <look>A hefty machine, the air compressor features a hose with a high pressure nozzle and locking mechanism.</look>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </inventoryverbs>\r\n        <feature_usegive />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </displayverbs>\r\n        <use type=\"script\">\r\n          if (space_suit.parent = player and air_tank.isopen = true) {\r\n            msg (\"You connect the air compressor's nozzle to the space suit's air tank and activate the machine. It takes several minutes, but the tank's supply indicator finally goes from red to green.\")\r\n            air_tank.isopen = false\r\n            IncreaseScore (1)\r\n          }\r\n          else if (space_suit.parent=player and air_tank.isopen = false) {\r\n            msg (\"The space suit's air supply is sufficient for several hours of operation and doesn't require any topping up.\")\r\n          }\r\n          else {\r\n            msg (\"You have nothing to use the air compressor on.\")\r\n          }\r\n        </use>\r\n      </object>\r\n      <object name=\"dispensary\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_open\" />\r\n        <alias>medication dispensary</alias>\r\n        <look>The dispensary fills an entire wall of the Med Bay. You remember being taught that it contains an enormous variety of medication, intended to sustain the new colony until new treatments can be developed from the native flora and fauna of your new home. It features a small rectangular opening with a circular receptacle. </look>\r\n        <feature_usegive />\r\n        <feature_container />\r\n        <open type=\"boolean\">false</open>\r\n        <close type=\"boolean\">false</close>\r\n        <transparent />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </displayverbs>\r\n        <listchildren />\r\n        <listchildrenprefix>Docked in the receptacle is </listchildrenprefix>\r\n        <use type=\"script\">\r\n          if (hypospray.parent = player) {\r\n            fillHypo\r\n          }\r\n          else {\r\n            msg (\"You don't have anything to store medication from the dispensary.\")\r\n          }\r\n        </use>\r\n      </object>\r\n    </object>\r\n    <object name=\"bridge\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Bridge</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description>The nerve center of the Scion, the Bridge is dominated by a viewscreen covering the entire curved surface at the front of the room. The captain's chair sits on a slightly raised dais in the rear with a commanding view of the entire Bridge. Between the captain's chair and the screen are several control stations, each one intended to be manned by a senior officer.</description>\r\n      <exit alias=\"south\" to=\"fore_corridor\">\r\n        <inherit name=\"southdirection\" />\r\n      </exit>\r\n      <object name=\"captain_chair\">\r\n        <inherit name=\"surface\" />\r\n        <inherit name=\"editor_object\" />\r\n        <feature_container />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Stand</value>\r\n        </displayverbs>\r\n        <look>It features the most advanced ergonomics ever developed by humanity, and is made from the most advanced materials, making it comfortable for extended periods of time. It features a control panel built into the right armrest. It also includes a safety harness to ensure its occupant cannot be inadvertently ejected. It is one excellent chair.</look>\r\n        <alias>Captain's Chair</alias>\r\n        <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n        <prefix>the</prefix>\r\n        <sit type=\"script\">\r\n          if (captain.parent = captain_chair) {\r\n            msg (\"The Captain gives you a brief, but eloquent look. You quickly back away from the chair.\")\r\n          }\r\n          else {\r\n            msg (\"Looking over your shoulder despite yourself, you take a seat in the Captain's Chair. It feels good. You could definitely get used to this.\")\r\n            game.gridmap = false\r\n            MoveObject (player, captain_chair)\r\n          }\r\n        </sit>\r\n        <stand type=\"script\">\r\n          if (player.parent = captain_chair) {\r\n            msg (\"Reluctantly, you stand up, leaving the comfort of the Captain's Chair behind.\")\r\n            MoveObject (player, bridge)\r\n            game.gridmap = true\r\n          }\r\n          else {\r\n            msg (\"You cannot stand up from the chair unless you sit down first.\")\r\n          }\r\n        </stand>\r\n      </object>\r\n      <object name=\"weapon_controls\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>weapons control station</alias>\r\n        <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n        <prefix>the </prefix>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </displayverbs>\r\n        <feature_usegive />\r\n        <look type=\"script\">\r\n          msg (\"The panel displays status information regarding the Scion's complement of defensive weaponry. The ship's mission may be colonization of a new world, but the mission planners were not so naïve as to think that peaceful intentions would preclude the occasional need for force.\")\r\n          if (new_rods.parent = engine) {\r\n            msg (\"With full power restored, the Scion's full array of weapons is available and ready for use.\")\r\n          }\r\n          else {\r\n            msg (\"With main power at critical, all weapon functions have been disabled.\")\r\n          }\r\n        </look>\r\n        <use type=\"script\"><![CDATA[\r\n          if (captain.parent = captain_chair) {\r\n            play sound (\"tos_phasersstrikingdeflectorshields.mp3\", false, false)\r\n            msg (\"You take control of the panel and with the computer's help, you acquire the enemy vessel.<br/><br/>\\\"Target acquired!\\\" you shout over the sound of the Scion taking another hit.<br/><br/>\\\"Fire!\\\" Picker shouts back at you.<br/><br/>You jab the control panel and immediately hear and feel the vibrations throughout the Scion as the heavy lasers are activated. Searing red lines appear on the viewscreen, connecting with the enemy vessel. It attempts to maneouvre away, but the tracking sensors keep the lasers on target. Explosions blossom across the vessel's hull and in a dazzling display of colours, the ship's breaks apart.<br/><br/>\\\"Target neutralized,\\\" you announce with relief.<br/><br/>\\\"Well done,\\\" replies Captain Picker. \\\"You've earned yourself a field promotion for saving the Scion. Now let's wake up the rest of the crew and complete our mission.\\\"<br/><br/>Congratulations!\")\r\n            RemoveObject (alien_ship)\r\n            IncreaseScore (5)\r\n            finish\r\n          }\r\n          else if (new_rods.parent = engine and player.parent <> captain_chair) {\r\n            play sound (\"computerbeep_1.mp3\", false, false)\r\n            msg (\"As soon as you begin to manipulate the controls, an error chime sounds.<br/><br/>\\\"Unauthorized use of weapons systems detected. Senior officer approval is required.\\\"\")\r\n          }\r\n          else if (player.parent = captain_chair) {\r\n            msg (\"You can't reach the weapons control panel from the Captain's Chair.\")\r\n          }\r\n          else {\r\n            msg (\"The panel displays only a warning about the main power levels being critical.\")\r\n          }\r\n        ]]></use>\r\n      </object>\r\n      <object name=\"sensors\">\r\n        <inherit name=\"editor_object\" />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </displayverbs>\r\n        <feature_usegive />\r\n        <alias>sensors control station</alias>\r\n        <look type=\"script\">\r\n          msg (\"The panel displays internal and external sensor readings. Sensor logs can also be retrieved.\")\r\n        </look>\r\n        <use type=\"script\"><![CDATA[\r\n          if (player.parent = captain_chair) {\r\n            msg (\"You can't reach the sensors panel from the Captain's Chair.\")\r\n          }\r\n          else {\r\n            readings = NewStringList()\r\n            list add (readings, \"Internal Sensor Array\")\r\n            list add (readings, \"External Sensor Array\")\r\n            list add (readings, \"Sensor Logs\")\r\n            ShowMenu (\"\\\"Select sensor information to display,\\\" the computer asks in response to you activating the panel.\", readings, true) {\r\n              switch (result) {\r\n                case (\"Internal Sensor Array\") {\r\n                  internalStatus\r\n                }\r\n                case (\"External Sensor Array\") {\r\n                  play sound (\"alarm03.mp3\", false, false)\r\n                  msg (\"\\\"Warning: hostile vessel detected,\\\" states the computer.<br/><br/>The Scion's passive sensors are detecting intermittent energy readings from the direction of the unknown vessel. Although it is hard to be sure, given the ship's unknown origins, it would seem that it is not operating at normal capacity.<br/><br/>Active sensors show the unknown ship's size to be smaller than the Scion. Its hull design resembles a collection of spheres welded together without any clear pattern. <br/><br/>Sensors also show a planet, approximately one light month away.\")\r\n                }\r\n                case (\"Sensor Logs\") {\r\n                  ClearScreen\r\n                  msg (\"You skim through years of automated log entries detailing normal ship functions and minor glitches. Eventually, you discover today's log entry.\")\r\n                  TextFX_Typewriter (\"Unknown energy signature detected.<br>Incoming weapons fire detected.<br>Damage to aft hull detected. Initiating defensive counter measures. <br>Hull breach detected on Mess Deck. Innervating Chief Engineer Dawson.<br>Power surge detected. Chief Engineer Dawson life signs failing. Innervating Crewman Shepherd.<br>Explosive discharge detected aboard hostile vessel. <br>Power surge detected in plasma reactor. Fire detected in engine room. Unable to continue defensive countermeasures.\", 50)\r\n                  ShowRoomDescription\r\n                  IncreaseScore (1)\r\n                }\r\n                default {\r\n                  play sound (\"computerbeep_1.mp3\", false, false)\r\n                  msg (\"\\\"Invalid selection,\\\" the computer replies.\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n        ]]></use>\r\n      </object>\r\n      <object name=\"propulsion_controls\">\r\n        <inherit name=\"editor_object\" />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </displayverbs>\r\n        <feature_usegive />\r\n        <alias>propulsion controls station</alias>\r\n        <look type=\"script\">\r\n          msg (\"The panel displays status information regarding the Scion's propulsion systems.\")\r\n          if (new_rods.parent = engine) {\r\n            msg (\"With full power restored, the Scion's propulsion systems are active.\")\r\n          }\r\n          else {\r\n            msg (\"With main power at critical, the Scion is adrift.\")\r\n          }\r\n        </look>\r\n        <use type=\"script\"><![CDATA[\r\n          if (new_rods.parent = engine and player.parent <> captain_chair) {\r\n            msg (\"The Scion's propulsion systems are active.\")\r\n          }\r\n          else if (player.parent = captain_chair) {\r\n            msg (\"You can't reach the propulsion control panel from the Captain's Chair.\")\r\n          }\r\n          else {\r\n            msg (\"The panel displays only a warning about the main power levels being critical.\")\r\n          }\r\n        ]]></use>\r\n      </object>\r\n    </object>\r\n    <object name=\"mess_deck\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Mess Deck</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description>The large open area was designed to give the crew a break from the functional, confined spaces of the rest of the ship. Floor to ceiling windows line the deck, giving an incredible view of the stars. Recent exposure to vacuum has left the deck in a sorry state, with whatever objects that were unable to fit through the hull breach now strewn across the deck. Only the bar and the tables, which are bolted to the deck, remain where they belong.</description>\r\n      <exit alias=\"west\" to=\"fore_corridor\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <object name=\"laser_opener\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>laser cutter</alias>\r\n        <look>A low-power, handheld laser cutter. Looks like its batteries are included.</look>\r\n        <volume type=\"int\">1</volume>\r\n        <take />\r\n        <feature_usegive />\r\n        <use type=\"script\">\r\n          if (laser_opener.parent=player and player.parent=cargo_bay) {\r\n            msg (\"The laser cut through the crate's seals with ease.\")\r\n            huge_crate.locked = false\r\n            HelperOpenObject (huge_crate)\r\n          }\r\n          else {\r\n            msg (\"A laser cutter must be used with care, especially on a space ship. There is no useful target for it here.\")\r\n          }\r\n        </use>\r\n      </object>\r\n      <object name=\"coffee\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>instant coffee canister</alias>\r\n        <volume type=\"int\">1</volume>\r\n        <look>One of the modern wonders of the world: an apparatus containing instant coffee, water and a mechanism able to combine and heat them into a ready-to-serve beverage with a simple twist of the wrist and a few moments of patience. If only they could make it taste good... </look>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Drop</value>\r\n          <value>Give</value>\r\n        </inventoryverbs>\r\n        <usestandardverblist />\r\n        <take />\r\n        <feature_usegive />\r\n        <givesingle type=\"script\">\r\n          if (player.parent = bridge and captain.parent = captain_chair or player.parent = cryo_quarters and captain.parent = captain_pod) {\r\n            RemoveObject (coffee)\r\n            msg (\"You twist the container's top, instantly mixing and heating its contents into passable coffee, and hand it to the Captain. He glances at you and grabs the container, favouring you with a half smile.\")\r\n            IncreaseScore (1)\r\n          }\r\n          else {\r\n            msg (\"There is no one to give this too. \")\r\n          }\r\n        </givesingle>\r\n      </object>\r\n      <object name=\"hypospray\">\r\n        <inherit name=\"editor_object\" />\r\n        <look>A glass and metal cylinder the size of your hand. You remember from your training that it can be used to administer any kind of medication.</look>\r\n        <take />\r\n        <volume type=\"int\">1</volume>\r\n        <feature_usegive />\r\n        <use type=\"script\"><![CDATA[\r\n          if (hypospray.parent = player and player.parent = med_bay) {\r\n            fillHypo\r\n          }\r\n          else if (hypospray.parent = player and player.parent = cryo_quarters and captain.state = \"hurt\" and hypospray.med <> \"empty\") {\r\n            msg (\"You kneel and administer the hypospray to the unconscious form of Captain Picker.\")\r\n            if (hypospray.med = \"stimulant\") {\r\n              msg (\"His eyes flutter and finally open. He props himself up, rubbing his head. <br/><br/>\\\"What happened?\\\" he asks, wincing as he touches his bruised head.\")\r\n              captain.state = \"healed\"\r\n              IncreaseScore (1)\r\n              talkToCaptain\r\n            }\r\n            else {\r\n              msg (\"The medication does not seem to have any effect.\")\r\n            }\r\n            hypospray.med = \"empty\"\r\n          }\r\n          else if (hypospray.med = \"empty\") {\r\n            msg (\"The hypospray won't do anyone much good while it is empty.\")\r\n          }\r\n          else {\r\n            msg (\"You consider injecting yourself, but then decide it wouldn't be advisable under the circumstances.\")\r\n          }\r\n        ]]></use>\r\n      </object>\r\n    </object>\r\n  </object>\r\n  <function name=\"shipStatus\">\r\n    if (alien_ship.parent = space_mess_deck) {\r\n      play sound (\"alarm03.mp3\", false, false)\r\n      msg (\"Warning: hostile vessel detected\")\r\n    }\r\n    internalStatus\r\n  </function>\r\n  <function name=\"listComputerQueries\" type=\"stringlist\">\r\n    queries = NewStringList()\r\n    list add (queries, \"State ship status\")\r\n    if (player.parent = cryo_pod) {\r\n      list add (queries, \"Open cryo pod\")\r\n    }\r\n    if (eng_door.locked = true and player.parent = aft_corridor) {\r\n      list add (queries, \"Extinguish fire in Engine Room\")\r\n    }\r\n    if (player.parent = fore_corridor) {\r\n      list add (queries, \"Override door to Mess Deck\")\r\n    }\r\n    if (player.parent=engine_room) {\r\n      list add (queries, \"State engine status\")\r\n    }\r\n    queries = ListCombine(queries, listRATQueries())\r\n    return (queries)\r\n  </function>\r\n  <function name=\"walkthrough\">\r\n    msg (\"Starting test...\")\r\n    UnlockExit (eng_door)\r\n    HelperOpenObject (huge_crate)\r\n    MoveObject (player, cryo_quarters)\r\n    RemoveObject (old_rods)\r\n    MoveObject (new_rods, engine)\r\n    MoveObject (hypospray, player)\r\n    hypospray.med = \"stimulant\"\r\n    captain_pod.locked = false\r\n    mess_door.locked = false\r\n    msg (\"Test completed\")\r\n  </function>\r\n  <function name=\"computerFunction\" parameters=\"queries\"><![CDATA[\r\n    if (ListCount(queries) = 0) {\r\n      msg (\"You hear an error chime sound from the ship's computer.\")\r\n      play sound (\"computerbeep_1.mp3\", false, false)\r\n    }\r\n    else {\r\n      play sound (\"computerbeep_10.mp3\", false, false)\r\n      ShowMenu (\"\\\"Computer,\\\" you call loudly. <br> \\\"Specify query\\\", says a feminine robotic voice.\", queries, true) {\r\n        switch (result) {\r\n          case (\"State ship status\") {\r\n            shipStatus\r\n          }\r\n          case (\"Open cryo pod\") {\r\n            if (cryo_pod.isopen = false) {\r\n              msg (\"\\\"Opening cryo pod 352,\\\" replies the computer.\")\r\n              HelperOpenObject (cryo_pod)\r\n            }\r\n            else {\r\n              msg (\"\\\"Crewmen Shepherd's cryo pod is already open,\\\" replies the computer with an error chime.\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n          }\r\n          case (\"Extinguish fire in Engine Room\") {\r\n            msg (\"\\\"Unable to comply,\\\" replies the computer with an error tone. \\\"Fire countermeasure systems are inoperative.\\\"\")\r\n            play sound (\"computerbeep_1.mp3\", false, false)\r\n          }\r\n          case (\"Override door to Mess Deck\") {\r\n            msg (\"\\\"Unable to comply,\\\" replies the computer with an error tone. \\\"No atmosphere present on Mess Deck. Warning: hull breach detected on Mess Deck.\\\"\")\r\n            play sound (\"alarm03.mp3\", false, false)\r\n          }\r\n          case (\"State engine status\") {\r\n            engineStatus\r\n          }\r\n          case (\"Command the RAT to remove degraded control rods from the engine\") {\r\n            ClearScreen\r\n            msg (\"\\\"Executing command,\\\" replies the computer.<br/><br/>The RAT's robotic arm begins to move, reaching out toward the engine. The depleted rods are removed smoothly and loaded on to the RAT's flat bed, ready for transport.<br/>\")\r\n            MoveObject (old_rods, RAT)\r\n            ShowRoomDescription\r\n          }\r\n          case (\"Move RAT\") {\r\n            destinations = NewStringList()\r\n            list add (destinations, \"Bridge\")\r\n            list add (destinations, \"Medical Bay\")\r\n            list add (destinations, \"Mess Deck\")\r\n            list add (destinations, \"Cargo Bay\")\r\n            list add (destinations, \"Crew Quarters\")\r\n            list add (destinations, \"Engine Room\")\r\n            if (player.parent = RAT.parent or player.parent=engine_room and RAT.parent=containment_field) {\r\n              ShowMenu (\"\\\"Specify destination,\\\" replies the computer.\", destinations, true) {\r\n                switch (result) {\r\n                  case (\"Bridge\") {\r\n                    MoveObject (RAT, bridge)\r\n                  }\r\n                  case (\"Medical Bay\") {\r\n                    MoveObject (RAT, med_bay)\r\n                  }\r\n                  case (\"Mess Deck\") {\r\n                    MoveObject (RAT, mess_deck)\r\n                  }\r\n                  case (\"Cargo Bay\") {\r\n                    MoveObject (RAT, cargo_bay)\r\n                  }\r\n                  case (\"Crew Quarters\") {\r\n                    MoveObject (RAT, crew_quarters)\r\n                  }\r\n                  case (\"Engine Room\") {\r\n                    MoveObject (RAT, engine_room)\r\n                  }\r\n                  default {\r\n                    msg (\"Unable to comply.\")\r\n                    play sound (\"computerbeep_1.mp3\", false, false)\r\n                  }\r\n                }\r\n                msg (\"\\\"Executing command,\\\" replies the computer.<br/><br/>Its motors whirring loudly, the RAT rolls out through the door.<br/>\")\r\n                ShowRoomDescription\r\n              }\r\n            }\r\n            else {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer with an error chime. \\\"Safety protocols prohibit commanding a RAT unit without an operator present in the same room.\\\"\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n          }\r\n          case (\"Command the RAT to load the new control rods\") {\r\n            if (new_rods.parent = huge_crate and old_rods.parent <> RAT and huge_crate.isopen = true) {\r\n              ClearScreen\r\n              msg (\"\\\"Executing command,\\\" replies the computer.<br/><br/>The RAT's robotic arm begins to move, reaching into the crate. The new control rods are carefully extracted and loaded on to the RAT's flat bed, ready for transport.<br/>\")\r\n              MoveObject (new_rods, RAT)\r\n              ShowRoomDescription\r\n            }\r\n            else if (huge_crate.isopen = false) {\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"RAT unit is unable to access control rods inside sealed cargo container.\\\"\")\r\n            }\r\n            else if (new_rods.parent = RAT or old_rods.parent = RAT) {\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Roboticized Automated Transport is at maximum capacity.\\\"\")\r\n            }\r\n          }\r\n          case (\"Unload RAT\") {\r\n            if (RAT.parent = cargo_bay and player.parent = cargo_bay and old_rods.parent = RAT) {\r\n              ClearScreen\r\n              msg (\"\\\"Executing command,\\\" replies the computer.<br/><br/>The airlock inner door slides open and the RAT moves inside. It unloads the degraded control rods and returns to the Cargo Bay. The airlock inner door slides closed behind it.<br/><br/>\\\"Jettisoning degraded control rods,\\\" explains the computer as the airlock's outer door opens and the rods are sucked into space, along with the atmosphere inside the airlock.<br/>\")\r\n              IncreaseScore (1)\r\n              RemoveObject (old_rods)\r\n              ShowRoomDescription\r\n            }\r\n            else if (RAT.parent = containment_field and player.parent = engine_room) {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Installing degraded control rods into plasma reactor violates safety protocols.\\\"\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n            else if (old_rods.parent = RAT and player.parent = RAT.parent) {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Degraded control rods cannot be stored in \" + RAT.parent.name + \". Exposure to degraded control rods is a severe hazard to crew health.\\\"\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n            else if (new_rods.parent = RAT and player.parent = engine_room and RAT.parent = engine_room) {\r\n              msg (\"The RAT rolls through the containment field and over to the engine. Its robotic arm carefully loads each new control rod into place inside the reactor. Once the process is complete, the engine roars into life.<br/><br/>\\\"Power levels nominal,\\\" reports the ship's computer. ''Additional crew members may now be innervated.\\\"\")\r\n              MoveObject (RAT, containment_field)\r\n              MoveObject (new_rods, engine)\r\n              HelperCloseObject (engine)\r\n              captain_pod.locked = false\r\n              IncreaseScore (2)\r\n              game.power = \"normal\"\r\n              DisableTimer (lights)\r\n              DisableTimer (powerWarning)\r\n              DisableTimer (powerFailure)\r\n            }\r\n            else if (new_rods.parent = RAT) {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"New control rods can be damaged if not stored in accordance with usage guidelines.\\\"\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n            else if (player.parent <> RAT.parent) {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer with an error chime. \\\"Safety protocols prohibit commanding a RAT unit without an operator present in the same room.\\\"\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n            else {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer unhelpfully.\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n          }\r\n          case (\"Run test\") {\r\n            walkthrough\r\n          }\r\n          default {\r\n            msg (\"Unable to comply.\")\r\n            play sound (\"computerbeep_1.mp3\", false, false)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    JS.scrollToEnd ()\r\n  ]]></function>\r\n  <function name=\"listRATQueries\" type=\"stringlist\">\r\n    RATqueries = NewStringList()\r\n    if (engine.isopen=true and player.parent = engine_room and old_rods.parent=engine) {\r\n      list add (RATqueries, \"Command the RAT to remove degraded control rods from the engine\")\r\n    }\r\n    if (old_rods.parent = RAT or new_rods.parent = RAT) {\r\n      list add (RATqueries, \"Move RAT\")\r\n      list add (RATqueries, \"Unload RAT\")\r\n    }\r\n    if (player.parent = cargo_bay and RAT.parent = cargo_bay and new_rods.parent = huge_crate) {\r\n      list add (RATqueries, \"Command the RAT to load the new control rods\")\r\n    }\r\n    return (RATqueries)\r\n  </function>\r\n  <function name=\"listCaptainTopics\" type=\"stringlist\">\r\n    dialogue = NewStringList()\r\n    switch (captain.state) {\r\n      case (\"asleep\") {\r\n        msg (\"Captain Picker is asleep.\")\r\n      }\r\n      case (\"awake\") {\r\n        msg (\"\\\"Captain Picker,\\\" you begin. \")\r\n        list add (dialogue, \"\\\"How do you feel?\\\"\")\r\n        list add (dialogue, \"\\\"Let me catch you up on what's been going on.\\\"\")\r\n      }\r\n      case (\"hurt\") {\r\n        msg (\"The Captain is unconscious and unresponsive.\")\r\n      }\r\n      case (\"healed\") {\r\n        list add (dialogue, \"The Scion is under attack!\")\r\n        list add (dialogue, \"Sleeping on the job again\")\r\n      }\r\n      case (\"combat\") {\r\n        list add (dialogue, \"What are your orders?\")\r\n        list add (dialogue, \"We need to return fire!\")\r\n      }\r\n    }\r\n    return (dialogue)\r\n  </function>\r\n  <function name=\"fillHypo\"><![CDATA[\r\n    msg (\"You plug the hypospray into the medication dispensary.\")\r\n    MoveObject (hypospray, dispensary)\r\n    if (hypospray.med <> \"empty\") {\r\n      msg (\"An error chime sounds. The hypospray cannot be refilled until it is emptied.\")\r\n    }\r\n    else {\r\n      meds = NewStringList()\r\n      list add (meds, \"antibiotics\")\r\n      list add (meds, \"sedative\")\r\n      list add (meds, \"stimulant\")\r\n      list add (meds, \"multi-vitamin\")\r\n      ShowMenu (\"\\\"Select medication to dispense,\\\" says the ship's computer.\", meds, false) {\r\n        ClearScreen\r\n        msg (\"You hear the hum of machinery within the dispensary, followed by a faint hiss. A small indicator light on the hypospray changes from red to green.<br/>\")\r\n        hypospray.med = result\r\n        ShowRoomDescription\r\n      }\r\n    }\r\n  ]]></function>\r\n  <function name=\"talkToCaptain\"><![CDATA[\r\n    dialogue = listCaptainTopics()\r\n    ShowMenu (\"\", dialogue, false) {\r\n      switch (result) {\r\n        case (\"\\\"How do you feel?\\\"\") {\r\n          msg (\"Captain Picker sits up in his cryo pod and rubs his eyes.<br/><br/>\\\"I'm fine,\\\" he says. \\\"Just a bit groggy.\\\"\")\r\n        }\r\n        case (\"\\\"Let me catch you up on what's been going on.\\\"\") {\r\n          ClearScreen\r\n          msg (\"You relate everything that has happened since you awoke in your cryo pod. The Captain interjects with questions occasionally, but mostly furrows his brow in concentration as he absorbs the situation.<br/><br/>\\\"I see,\\\" he says simply as you finish. <br/>\")\r\n          play sound (\"largeexplosion1.mp3\", false, false)\r\n          msg (\"Just then, the Scion is rocked violently. You are thrown to the floor and hear a loud thud as the Captain is thrown into the bulkhead next to you. You scramble back to your feet.<br/>\")\r\n          captain.state = \"hurt\"\r\n          MoveObject (captain, cryo_quarters)\r\n          EnableTimer (attack)\r\n          EnableTimer (shipDestroyed)\r\n          ShowRoomDescription\r\n        }\r\n        case (\"The Scion is under attack!\") {\r\n          msg (\"\\\"What?\\\" exlaims the Captain. \\\"We need to get to the Bridge!\\\"<br/><br/>He struggles to his feet and without waiting for a response, he slides down the ladder to the Crew Quarters.\")\r\n          MoveObject (captain, captain_chair)\r\n          captain.state = \"combat\"\r\n        }\r\n        case (\"What are your orders?\") {\r\n          msg (\"\\\"Take control of the weapon systems and destroy that ship!\\\" Captain Picker shouts.\")\r\n        }\r\n        case (\"We need to return fire!\") {\r\n          msg (\"\\\"I know that! I already ordered you to fire on that ship! Get to it!\\\" Captain Picker shouts angrily.\")\r\n        }\r\n        default {\r\n          msg (\"Captain Picker fixes you with a withering stare.\")\r\n        }\r\n      }\r\n    }\r\n    JS.scrollToEnd ()\r\n  ]]></function>\r\n  <function name=\"internalStatus\"><![CDATA[\r\n    if (old_rods.parent <> engine and new_rods.parent <> engine) {\r\n      msg (\"Warning: plasma reactor is offline. Operating on auxiliary power.\")\r\n    }\r\n    if (hull_breach.parent = space_mess_deck) {\r\n      msg (\"Warning: hull breach detected on Mess Deck.\")\r\n    }\r\n    if (hull.isopen = false and eng_door.locked = true) {\r\n      msg (\"Warning: fire detected in Engine Room.\")\r\n    }\r\n    else if (hull.isopen = true and eng_door.locked = true) {\r\n      msg (\"Warning: hull breach detected in Engine Room\")\r\n    }\r\n    if (new_rods.parent <> engine) {\r\n      msg (\"Warning: power levels critical.<br/><br/>Immediate intervention is recommended to avoid loss of ship and all hands aboard.\")\r\n    }\r\n    JS.scrollToEnd ()\r\n  ]]></function>\r\n  <function name=\"engineStatus\">\r\n    if (old_rods.parent = engine) {\r\n      msg (\"\\\"Plasma reactor is operational,\\\" replies the computer. \\\"Power output is limited due to degraded control rods.\\\"\")\r\n      HelperOpenObject (engine)\r\n    }\r\n    else if (new_rods.parent = engine) {\r\n      msg (\"\\\"Plasma reactor is operational,\\\" replies the computer. \\\"Power output within nominal operating parameters.\\\"\")\r\n    }\r\n    else {\r\n      msg (\"\\\"Warning: plasma reactor is offline,\\\" replies the computer with a danger chime. \\\"Operating on auxiliary power.\\\"\")\r\n      play sound (\"alarm03.mp3\", false, false)\r\n    }\r\n    JS.scrollToEnd ()\r\n  </function>\r\n  <function name=\"SetupNautical\"><![CDATA[\r\n    game.compassdirections = ListExclude (game.compassdirections, \"\")\r\n    list add (game.compassdirections, \"fore\")\r\n    list add (game.compassdirections, \"port\")\r\n    list add (game.compassdirections, \"starboard\")\r\n    list add (game.compassdirections, \"aft\")\r\n    list add (game.compassdirections, \"f\")\r\n    list add (game.compassdirections, \"p\")\r\n    list add (game.compassdirections, \"sb\")\r\n    list add (game.compassdirections, \"a\")\r\n    request (SetCompassDirections, Join(game.compassdirections, \";\"))\r\n    go.pattern = \"^go to (?\"+Chr(60)+\"exit>.*)$|^go (?\"+Chr(60)+\"exit>.*)$|^(?\"+Chr(60)+\"exit>forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\r\n    lookdir.pattern = \"^look (?\"+Chr(60)+\"exit>forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\r\n    foreach (exit, AllExits()) {\r\n      if (StartsWith (exit.name, \"fore\")) {\r\n        exit.alias = \"fore\"\r\n        exit.alt = Split(\"f;forward\")\r\n      }\r\n      if (StartsWith (exit.name, \"aft\")) {\r\n        exit.alias = \"aft\"\r\n        exit.alt = Split(\"a\")\r\n      }\r\n      if (StartsWith (exit.name, \"port\")) {\r\n        exit.alias = \"port\"\r\n        exit.alt = Split(\"p\")\r\n      }\r\n      if (StartsWith (exit.name, \"starboard\")) {\r\n        exit.alias = \"starboard\"\r\n        exit.alt = Split(\"sb\")\r\n      }\r\n    }\r\n    ChangeDirToNautical\r\n  ]]></function>\r\n  <function name=\"SendToJsEval\" parameters=\"data\"><![CDATA[\r\n    regEx = \"//\"\r\n    s = Chr(60) + \"br/>\"\r\n    js = Split(data,s)\r\n    notes = NewStringList()\r\n    foreach (line, js) {\r\n      if (StartsWith(line,\"//\")) {\r\n        list add (notes, line)\r\n      }\r\n    }\r\n    js = ListExclude(js,notes)\r\n    finaljs = NewStringList()\r\n    foreach (line, js) {\r\n      code = line\r\n      if (IsRegExMatch(regEx,line)) {\r\n        list = Split(line,\"//\")\r\n        code = list[0]\r\n      }\r\n      list add (finaljs, code)\r\n    }\r\n    js = Join(finaljs,\"\")\r\n    js = Replace(js, \"[br]\", s)\r\n    js = Replace(js, \"[br/]\", s)\r\n    js = Replace(js, \"[break]\", s)\r\n    js = Replace(js, \"[linebreak]\", s)\r\n    js = Replace(js, \"[line break]\", s)\r\n    JS.eval (js)\r\n  ]]></function>\r\n  <function name=\"ChangeDirToNautical\">\r\n    foreach (exit, AllExits()) {\r\n      if (HasAttribute (exit.parent, \"parent\")) {\r\n        if (GetBoolean (exit.parent.parent, \"shiptype\")) {\r\n          if (exit.alias = \"north\") {\r\n            exit.visible = false\r\n            newname = \"\" + GetUniqueElementName(\"fore\")\r\n            create exit (newname, \"fore\", exit.parent, exit.to, \"\")\r\n            newexit = GetObject(newname)\r\n            newexit.to = exit.to\r\n            newexit.alt = Split(\"f;forward\")\r\n          }\r\n          else if (exit.alias = \"south\") {\r\n            exit.visible = false\r\n            newname = \"\" + GetUniqueElementName(\"aft\")\r\n            create exit (newname, \"aft\", exit.parent, exit.to, \"\")\r\n            newexit = GetObject(newname)\r\n            newexit.to = exit.to\r\n            newexit.alt = Split(\"a\")\r\n          }\r\n          else if (exit.alias = \"west\") {\r\n            newname = \"\" + GetUniqueElementName(\"port\")\r\n            create exit (newname, \"port\", exit.parent, exit.to, \"\")\r\n            newexit = GetObject(newname)\r\n            newexit.to = exit.to\r\n            newexit.alt = Split(\"p\")\r\n          }\r\n          else if (exit.alias = \"east\") {\r\n            exit.visible = false\r\n            newname = \"\" + GetUniqueElementName(\"starboard\")\r\n            create exit (newname, \"starboard\", exit.parent, exit.to, \"\")\r\n            newexit = GetObject(newname)\r\n            newexit.to = exit.to\r\n            newexit.alt = Split(\"sb\")\r\n          }\r\n        }\r\n      }\r\n    }\r\n  </function>\r\n  <timer name=\"lights\">\r\n    <interval>120</interval>\r\n    <enabled />\r\n    <script><![CDATA[\r\n      if (player.parent <> space_cargo_bay and player.parent <> space_engine_room and player.parent <> space_mess_deck) {\r\n        switch (game.power) {\r\n          case (\"low\") {\r\n            msg (\"<br/>The lights in the room flicker for a few moments before turning on again.\")\r\n          }\r\n          case (\"critical\") {\r\n            msg (\"<br/>The lights in the room switch off, leaving you in perfect blackness for a few moments before they turn on again. You shiver as you notice that the ambient temperature has dropped a few degrees.\")\r\n          }\r\n          case (\"normal\") {\r\n          }\r\n        }\r\n      }\r\n      JS.scrollToEnd ()\r\n    ]]></script>\r\n  </timer>\r\n  <timer name=\"powerFailure\">\r\n    <interval>900</interval>\r\n    <enabled type=\"boolean\">false</enabled>\r\n    <script><![CDATA[\r\n      ClearScreen\r\n      if (new_rods.parent <> engine and space_suit.worn = false) {\r\n        play sound (\"alarm03.mp3\", false, false)\r\n        msg (\"\\\"Plasma reactor failure,\\\" announces the computer. \\\"Unable to maintain minimal life support functions.\\\"<br/><br/>You feel the temperature dropping rapidly around you and you struggle to draw breath in the increasingly thin atmosphere. Within moments, you see bright spots appear before your eyes and then... darkness...<br/><br/>You failed to save the Scion!\")\r\n        DecreaseScore (-5)\r\n        finish\r\n      }\r\n      else if (new_rods.parent <> engine and space_suit.worn = true) {\r\n        play sound (\"alarm03.mp3\", false, false)\r\n        msg (\"\\\"Plasma reactor failure,\\\" announces the computer. \\\"Unable to maintain minimal life support functions.\\\"<br/><br/>From within the confines of your space suit, you watch the Scion's systems shut down around you. Your air supply keeps you alive a short time longer, but with nowhere to go and no way to resurrect the Scion, you drop to your knees in despair.<br/><br/>You failed to save the Scion!\")\r\n        DecreaseScore (-3)\r\n        finish\r\n      }\r\n    ]]></script>\r\n  </timer>\r\n  <timer name=\"powerWarning\">\r\n    <interval>900</interval>\r\n    <enabled />\r\n    <script><![CDATA[\r\n      if (new_rods.parent <> engine) {\r\n        EnableTimer (powerFailure)\r\n        game.power = \"critical\"\r\n        play sound (\"alarm03.mp3\", false, false)\r\n        msg (\"\\\"Warning: plasma reactor power levels have dropped to critical levels,\\\" the computer states flatly. \\\"Life support failure in 15 minutes.\\\"\")\r\n      }\r\n    ]]></script>\r\n  </timer>\r\n  <timer name=\"attack\">\r\n    <interval>60</interval>\r\n    <script><![CDATA[\r\n      play sound (\"largeexplosion1.mp3\", false, false)\r\n      msg (\"<br/>You stagger as the ship is rocked by another direct hit. You're not sure how much more the Scion can take...\")\r\n      JS.scrollToEnd ()\r\n    ]]></script>\r\n  </timer>\r\n  <timer name=\"shipDestroyed\">\r\n    <interval>600</interval>\r\n    <script><![CDATA[\r\n      play sound (\"largeexplosion1.mp3\", false, false)\r\n      msg (\"You are thrown to the deck as the Scion is blasted yet again. Secondary explosions quickly follow the initial impact and you can hear explosive decompression occuring all around you. After another few moments of violence, you have just enough time to realize that the Scion is doomed before a bright flash fills your senses.<br/><br/>You have failed to save the Scion!\")\r\n      DecreaseScore (-3)\r\n      finish\r\n    ]]></script>\r\n  </timer>\r\n</asl>```\r\n\r\n</details>\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Here it is (I noticed that I hadn't enabled the nautical_buttons_turnscript after I posted this, so I fixed that):</p>\n<details>\n<pre><code>&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Red Alert\"&gt;\n    &lt;gameid&gt;5d168f57-b215-43fb-b260-9d2c82c05bfc&lt;/gameid&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;author&gt;Eric Caillibot&lt;/author&gt;\n    &lt;category&gt;Sci-Fi&lt;/category&gt;\n    &lt;showscore /&gt;\n    &lt;menufont&gt;Georgia, serif&lt;/menufont&gt;\n    &lt;feature_limitinventory /&gt;\n    &lt;attr name=\"feature_lightdark\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;attr name=\"feature_asktell\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;attr name=\"feature_annotations\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;attr name=\"feature_advancedwearables\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;appendobjectdescription /&gt;\n    &lt;showcommandbar type=\"boolean\"&gt;false&lt;/showcommandbar&gt;\n    &lt;gridmap type=\"boolean\"&gt;false&lt;/gridmap&gt;\n    &lt;mapscale type=\"int\"&gt;1&lt;/mapscale&gt;\n    &lt;mapsize type=\"int\"&gt;1&lt;/mapsize&gt;\n    &lt;respondtogridclicks type=\"boolean\"&gt;false&lt;/respondtogridclicks&gt;\n    &lt;attr name=\"autodescription_youarein_useprefix\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;attr name=\"autodescription_youcansee\" type=\"int\"&gt;3&lt;/attr&gt;\n    &lt;attr name=\"autodescription_youcango\" type=\"int\"&gt;4&lt;/attr&gt;\n    &lt;attr name=\"autodescription_description\" type=\"int\"&gt;2&lt;/attr&gt;\n    &lt;commandpane /&gt;\n    &lt;statusandcompassattop /&gt;\n    &lt;turnoffplacesandobjects /&gt;\n    &lt;description&gt;You were supposed to remain in cryo sleep until the Scion reached orbit around your target world in the Alpha Centauri system. So why are you awake now? And why are you alone?&lt;/description&gt;\n    &lt;cover&gt;red-space.jpeg&lt;/cover&gt;\n    &lt;subtitle&gt;Adrift in Space&lt;/subtitle&gt;\n    &lt;povstatusattributes type=\"stringdictionary\" /&gt;\n    &lt;menufontsize type=\"int\"&gt;11&lt;/menufontsize&gt;\n    &lt;turnoffinventory type=\"boolean\"&gt;false&lt;/turnoffinventory&gt;\n    &lt;turnoffcompass type=\"boolean\"&gt;false&lt;/turnoffcompass&gt;\n    &lt;showpanes /&gt;\n    &lt;pov type=\"object\"&gt;player&lt;/pov&gt;\n    &lt;inituserinterface type=\"script\"&gt;&lt;![CDATA[\n      JS.setCommands (\"Computer;Look\")\n      SetTimeout (2) {\n        cmds = ProcessText(\"{command:Computer}&amp;emsp;{command:Look}&amp;emsp;{command:Inventory}\" + Chr(60) + \"span id=\\\"custom-score-div\\\"&gt;\" + Chr(60) + \"br/&gt;Score: {game.score}\" + Chr(60) + \"/span&gt;\")\n        s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\"&gt;\"\n        s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\n        s = s + Chr(60) + \"/div&gt;\"\n        JS.eval (\"if (typeof (currentTab) === 'string'){var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));}\")\n        JS.\n      }\n      SendToJsEval (js.description)\n      JS.changeCompass ()\n    ]]&gt;&lt;/inituserinterface&gt;\n    &lt;start type=\"script\"&gt;\n      set (captain, \"state\", \"asleep\")\n      set (hypospray, \"med\", \"empty\")\n      set (game, \"power\", \"low\")\n      js = \"function isMobilePlayer(){\"\n        js = js + \"if (typeof(currentTab) === 'string'){return true;}return false;};\"\n      JS.eval (js)\n      SetupNautical\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;verb&gt;\n    &lt;property&gt;ask/tell&lt;/property&gt;\n    &lt;pattern&gt;ask/tell&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't ask/tell \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;object name=\"space_cargo_bay\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n    &lt;alias&gt;In Space (Outside Cargo Bay)&lt;/alias&gt;\n    &lt;description type=\"script\"&gt;\n      msg (\"The cold blackness of space is visible in every direction, perforated by innumerable, distant stars. The hull of the Scion stretches out below you, illuminated only by your suit's lights.\")\n      firsttime {\n        msg (\"The only sound is your own breathing. Using the grappling equipment integrated into your suit, you are able to move around the hull. The lack of gravity makes it virtually effortless, but the process is awkward and slow.\")\n      }\n    &lt;/description&gt;\n    &lt;exit name=\"airlock_in\" alias=\"in\" to=\"cargo_bay\"&gt;\n      &lt;inherit name=\"indirection\" /&gt;\n      &lt;runscript /&gt;\n      &lt;script type=\"script\"&gt;\n        msg (\"You glide into the airlock and seal the outer door behind you. Air is automatically pumped into the room and once the air pressure matches the interior of the Scion, the inner door automatically slides open. You climb through the inner door, sealing it behind you. Once free of the airlock, you carefully remove the space suit.\")\n        MoveObject (player, cargo_bay)\n        space_suit.worn = false\n      &lt;/script&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"southeast\" to=\"space_engine_room\"&gt;\n      &lt;inherit name=\"southeastdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"northeast\" to=\"space_mess_deck\"&gt;\n      &lt;inherit name=\"northeastdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;command name=\"computer\"&gt;\n    &lt;pattern&gt;Computer&lt;/pattern&gt;\n    &lt;script&gt;\n      queries = listComputerQueries()\n      computerFunction (queries)\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;verb&gt;\n    &lt;property&gt;suitup&lt;/property&gt;\n    &lt;pattern&gt;suit up&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't suit up \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;object name=\"space_engine_room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;alias&gt;In Space (Outside Engine Room)&lt;/alias&gt;\n    &lt;description&gt;You approach the aft section of the ship and you can see the enormous engine nacelles sticking out of the Scion. You can't help but feel awed by the sight.&lt;/description&gt;\n    &lt;exit alias=\"northwest\" to=\"space_cargo_bay\"&gt;\n      &lt;inherit name=\"northwestdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"north\" to=\"space_mess_deck\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"hull\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"container_closed\" /&gt;\n      &lt;alias&gt;hull&lt;/alias&gt;\n      &lt;feature_usegive /&gt;\n      &lt;feature_container /&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;Use&lt;/value&gt;\n      &lt;/displayverbs&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;inroomdescription type=\"string\"&gt;&lt;/inroomdescription&gt;\n      &lt;prefix&gt;the&lt;/prefix&gt;\n      &lt;look type=\"script\"&gt;\n        msg (\"The hull outside the Engine Room shows damage that could only have been caused by some kind of weapons fire. Luckily, the damage seems to be minor.\")\n        if (hull.isopen = true and eng_door.locked = true) {\n          msg (\"A long thin gash runs along the hull, where you cut in with your plasma torch.\")\n        }\n        else if (hull.isopen=true and eng_door.locked = false) {\n          msg (\"You admire your handiwork, noting that the cut you made previously has been expertly sealed.\")\n        }\n      &lt;/look&gt;\n      &lt;use type=\"script\"&gt;\n        if (plasma_torch.parent = player) {\n          if (not hull.isopen) {\n            msg (\"Using the plasma torch, you begin cutting through the Scion's hull. As soon as you pierce through, a jet of air begins spraying out through the gap. You continue cutting until the atmosphere from the Engine Room has completely vented into space. Without any air left inside, the fire won't be able to sustain itself.\")\n            HelperOpenObject (hull)\n            IncreaseScore (1)\n          }\n          else {\n            firsttime {\n              msg (\"With all of the air vented into space and the fire extinguished, you use the plasma torch to seal the cut you made.\")\n              UnlockExit (eng_door)\n              IncreaseScore (1)\n            }\n            otherwise {\n              msg (\"The hull remains well sealed. No further work is required.\")\n            }\n          }\n        }\n        else {\n          msg (\"You don't have any tool that would let you work on the hull.\")\n        }\n      &lt;/use&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"space_mess_deck\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;You make your way around the hull to the section outside the Mess Deck. The ship was clearly fired upon by some kind of energy weapon. Minor damage is visible in several locations.&lt;/description&gt;\n    &lt;alias&gt;In Space (Outside Mess Deck)&lt;/alias&gt;\n    &lt;exit alias=\"southwest\" to=\"space_cargo_bay\"&gt;\n      &lt;inherit name=\"southwestdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"south\" to=\"space_engine_room\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"hull_breach\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;alias&gt;gaping tear in the hull&lt;/alias&gt;\n      &lt;inroomdescription&gt;The worst of the damage caused a hull breach, running parallel to the Scion's long axis.&lt;/inroomdescription&gt;\n      &lt;look&gt;A long, but very narrow gash. You're confident that you could repair the damage, if you had the right tool. Assuming you don't get fired on while you are helplessly exposed...&lt;/look&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;Use&lt;/value&gt;\n      &lt;/displayverbs&gt;\n      &lt;feature_usegive /&gt;\n      &lt;use type=\"script\"&gt;\n        if (plasma_torch.parent = player) {\n          msg (\"Carefully bracing yourself against the hull, you begin welding the gash closed with the plasma torch. Your visor automatically darkens to protect your eyes from the intense light. Despite your suit's insulated gloves, your hands heat up and become sweaty in short order. It is slow going, but you persevere and succeed in sealing the breach.\")\n          RemoveObject (hull_breach)\n          UnlockExit (mess_door)\n          IncreaseScore (1)\n        }\n        else {\n          msg (\"You can't do much about the breach without the right tool.\")\n        }\n      &lt;/use&gt;\n    &lt;/object&gt;\n    &lt;object name=\"alien_ship\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;alias&gt;Unidentified Object&lt;/alias&gt;\n      &lt;inroomdescription&gt;In the distance, a twinkling light catches your eye. &lt;/inroomdescription&gt;\n      &lt;look&gt;It is much too faint to be a star or planet. It could be another spaceship.&lt;/look&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n      &lt;/displayverbs&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;verb&gt;\n    &lt;property&gt;exitsuit&lt;/property&gt;\n    &lt;pattern&gt;exit suit&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't exit suit \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;removesuit&lt;/property&gt;\n    &lt;pattern&gt;remove suit&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't remove suit \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;dropsuit&lt;/property&gt;\n    &lt;pattern&gt;drop suit&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't drop suit \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;stand&lt;/property&gt;\n    &lt;pattern&gt;stand&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't stand \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;turnscript name=\"mobileScore\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      JS.eval (\"$('#custom-score-div').html('\" + Chr(60) + \"br/&gt;Score: \" + ProcessText(\"{game.score}\") + \"');\")\n    ]]&gt;&lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;turnscript name=\"nautical_buttons_turnscript\"&gt;\n    &lt;script&gt;\n      if (HasAttribute (game.pov.parent, \"parent\")) {\n        if (GetBoolean(game.pov.parent.parent,\"shiptype\")) {\n          list = NewStringList()\n          foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\n            list add (list, exit.alias)\n          }\n          JS.updateShipCompass (Join(list, \"/\"))\n        }\n      }\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;object name=\"js\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;&lt;![CDATA[var onBoard = false;&lt;br/&gt;var shipButtons = '&lt;div id=\"dir-holder\" style=\"display:none;\"&gt;&lt;div id=\"ship-nav\"&gt;&lt;table id=\"ship-directions\"&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;';&lt;br/&gt;shipButtons += '&lt;button id=\"cmdCompassF\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"fore\" onclick=\"compassClick(\\'fore\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-n\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';&lt;br/&gt;shipButtons += '&lt;tr&gt;&lt;td&gt;&lt;button id=\"cmdCompassP\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"port\" onclick=\"compassClick(\\'port\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-w\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/button&gt;';&lt;br/&gt;shipButtons += '&lt;button id=\"cmdCompassSB\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"starboard\" onclick=\"compassClick(\\'starboard\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-e\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';&lt;br/&gt;shipButtons += '&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;button id=\"cmdCompassA\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"aft\" onclick=\"compassClick(\\'aft\\');\" role=\"button\" &gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-s\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';&lt;br/&gt;shipButtons += '&lt;/div&gt;&lt;/div&gt;';&lt;br/&gt;function changeCompass(){&lt;br/&gt;  $('body').append(shipButtons);&lt;br/&gt;  $(\"#ship-directions\").css(\"border-spacing\",\"0\");&lt;br/&gt;  $(\"#cmdCompassNW\").parent().parent().parent().attr('id','def-nav');&lt;br/&gt;  $('#ship-nav').hide();$('#def-nav').parent().append($('#dir-holder').html());&lt;br/&gt;  $(\".shipcompassbutton\").each(function(){&lt;br/&gt;    $(this).button().button(\"enable\").button(\"disable\");&lt;br/&gt;    $(\".shipcompassbutton span\").css(\"left\", \"0.8em\");$(\".shipcompassbutton .ui-button-text\").css('padding','.8em .8em');&lt;br/&gt;  });&lt;br/&gt;};&lt;br/&gt;function toggleNav(){&lt;br/&gt;  $(\"#def-nav, #ship-nav\").toggle()&lt;br/&gt;};&lt;br/&gt;function updateShipCompass(data){&lt;br/&gt;  var exits = data.split(\"/\");&lt;br/&gt;  $(\".shipcompassbutton\").each(function(){&lt;br/&gt;    for (var exit in exits){&lt;br/&gt;      if($(this).attr('title') === exits[exit]){&lt;br/&gt;        $(this).button(\"enable\");&lt;br/&gt;        break;&lt;br/&gt;      }else{&lt;br/&gt;        $(this).button(\"disable\");&lt;br/&gt;      }&lt;br/&gt;    }&lt;br/&gt;  });&lt;br/&gt;};]]&gt;&lt;/description&gt;\n  &lt;/object&gt;\n  &lt;object name=\"scion\"&gt;\n    &lt;feature_startscript /&gt;\n    &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n      this.shiptype = true\n    &lt;/attr&gt;\n    &lt;object name=\"cryo_quarters\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;description&gt;Row upon row of pods, each housing a crew member in cryogenic suspension, surrounds you. Even outside the pods, the room is cold. The sound of dripping water can be heard in the distance. A ladder leads down to the Crew Quarters.&lt;/description&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;descprefix type=\"string\"&gt;&lt;/descprefix&gt;\n      &lt;alias&gt;Cryo Quarters&lt;/alias&gt;\n      &lt;dropdestination type=\"object\"&gt;cryo_quarters&lt;/dropdestination&gt;\n      &lt;firstenter type=\"script\"&gt;\n      &lt;/firstenter&gt;\n      &lt;exit name=\"ladder down\" alias=\"down\" to=\"crew_quarters\"&gt;\n        &lt;inherit name=\"downdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"cryo_pod\"&gt;\n        &lt;inherit name=\"container_closed\" /&gt;\n        &lt;inroomdescription&gt;Your cryo pod stands out from the rows of identical, but sealed and occupied, pods nearby.&lt;/inroomdescription&gt;\n        &lt;feature_container /&gt;\n        &lt;isopen type=\"boolean\"&gt;false&lt;/isopen&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;transparent type=\"boolean\"&gt;false&lt;/transparent&gt;\n        &lt;openmsg&gt;The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out and quickly dissipates.&lt;/openmsg&gt;\n        &lt;closemsg&gt;The glass cover rotates into place, sealing the cryo pod. A quiet hum is audible as the pod activates its cryo sleep cycle.&lt;/closemsg&gt;\n        &lt;listchildren /&gt;\n        &lt;visible type=\"boolean\"&gt;false&lt;/visible&gt;\n        &lt;alias&gt;cryo pod&lt;/alias&gt;\n        &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n        &lt;look&gt;A cylindrical capsule with a sliding glass cover, sized to contain a single person. Inside is a variety of vital sign sensors used to adjust the cryogenic stasis of its occupant.&lt;/look&gt;\n        &lt;dropdestination type=\"object\"&gt;cryo_pod&lt;/dropdestination&gt;\n        &lt;openscript type=\"script\"&gt;\n          msg (\"The cylindrical glass cover rotates with a hiss. As the pod opens to the surrounding room, a cloud of vapour floats out and quickly dissipates.\")\n          firsttime {\n            create exit (\"pod door\", cryo pod, Cryo Quarters, out)\n            msg (\"You climb out of the pod carefully, making sure not to overexert your sluggish muscles. You still feel woozy from the effects of cryo sleep, but your senses are slowly returning to normal.\")\n            MoveObject (player, Cryo Quarters)\n          }\n        &lt;/openscript&gt;\n        &lt;closescript type=\"script\"&gt;\n          msg (\"The cylindrical glass cover rotates, sealing the cryo pod.\")\n        &lt;/closescript&gt;\n        &lt;onopen type=\"script\"&gt;\n          HelperOpenObject (cryo_pod)\n        &lt;/onopen&gt;\n        &lt;description type=\"script\"&gt;\n          firsttime {\n            msg (\"You awake from a deep slumber, struggling to make sense of your perceptions. You are lying on your back, inside a small container. It is dark, and cold. As your consciousness returns, you manage to identify your surroundings as a cryo pod. You begin to remember climbing into it, in preparation for a long cryo sleep, while the Scion travelled to the Alpha Centauri system. Why have you been awakened? Has the Scion reached its destination? Is it time to begin founding a new colony?\")\n          }\n          otherwise {\n            msg (\"The cryo pod still feels cold, even though the cryo sleep function has clearly been disabled. \")\n          }\n        &lt;/description&gt;\n        &lt;onclose type=\"script\"&gt;\n          HelperCloseObject (cryo_pod)\n        &lt;/onclose&gt;\n        &lt;firstenter type=\"script\"&gt;\n        &lt;/firstenter&gt;\n        &lt;object name=\"player\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;inherit name=\"editor_player\" /&gt;\n          &lt;inherit name=\"namedmale\" /&gt;\n          &lt;alias&gt;Crewman Shepherd&lt;/alias&gt;\n          &lt;usedefaultprefix /&gt;\n          &lt;look type=\"string\"&gt;&lt;/look&gt;\n          &lt;visible type=\"boolean\"&gt;false&lt;/visible&gt;\n          &lt;attr name=\"pov_look\"&gt;You're dressed in a standard-issue jump suit, with the Scion's mission crest over your left pectoral.&lt;/attr&gt;\n          &lt;maxvolume type=\"int\"&gt;1&lt;/maxvolume&gt;\n          &lt;containerfullmessage&gt;You can't carry any more. Your jumpsuit doesn't have any pockets.&lt;/containerfullmessage&gt;\n        &lt;/object&gt;\n        &lt;exit alias=\"out\" to=\"cryo_quarters\"&gt;\n          &lt;inherit name=\"outdirection\" /&gt;\n          &lt;locked type=\"boolean\"&gt;false&lt;/locked&gt;\n          &lt;lockmessage&gt;The cryo pod is sealed. &lt;/lockmessage&gt;\n          &lt;runscript /&gt;\n          &lt;script type=\"script\"&gt;\n            if (not ListContains(ScopeVisible(), cryo_pod)) {\n              if (not cryo_pod.isopen) {\n                msg (\"Your mind still fuzzy from the effects of prolonged cryo sleep, you push against the cryo pod's glass cover to no avail. As you slowly regain your faculties, you remember your training. Opening the cryo pod, as well as perfoming many other actions aboard the Scion, requires issuing verbal commands to the ship's computer.\")\n                SetTimeout (2) {\n                  JS.eval (\"if (typeof (currentTab) !== 'string') {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the top right to issue verbal commands to the ship's computer.\\\");} else {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the bottom to issue verbal commands to the ship's computer.\\\");}\")\n                  JS.scrollToEnd ()\n                }\n              }\n              else {\n                firsttime {\n                  msg (\"You climb out of the pod carefully, making sure not to overexert your sluggish muscles. You still feel woozy from the effects of cryo sleep, but your senses are slowly returning to normal.\")\n                  IncreaseScore (1)\n                }\n                otherwise {\n                  msg (\"\")\n                }\n                MakeObjectVisible (cryo_pod)\n                MoveObject (player, cryo_quarters)\n              }\n            }\n            else {\n              MoveObject (player, cryo_quarters)\n            }\n          &lt;/script&gt;\n        &lt;/exit&gt;\n      &lt;/object&gt;\n      &lt;exit alias=\"in\" to=\"cryo_pod\"&gt;\n        &lt;inherit name=\"indirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"captain_pod\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_closed\" /&gt;\n        &lt;inherit name=\"container_lockable\" /&gt;\n        &lt;feature_container /&gt;\n        &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n        &lt;listchildren /&gt;\n        &lt;inroomdescription&gt;You are also able to identify Captain Picker's cryo pod.&lt;/inroomdescription&gt;\n        &lt;look&gt;A cylindrical capsule with a sliding glass cover, identical to the one you crawled out of.&lt;/look&gt;\n        &lt;alias&gt;Captain Picker's cryo pod&lt;/alias&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Open&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;listchildrenprefix&gt;Inside is&lt;/listchildrenprefix&gt;\n        &lt;openmsg&gt;The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out and quickly dissipates.&lt;/openmsg&gt;\n        &lt;closemsg&gt;The glass cover rotates into place, sealing the cryo pod. A quiet hum is audible as the pod activates its cryo sleep cycle.&lt;/closemsg&gt;\n        &lt;autounlock type=\"boolean\"&gt;false&lt;/autounlock&gt;\n        &lt;autoopen type=\"boolean\"&gt;false&lt;/autoopen&gt;\n        &lt;transparent /&gt;\n        &lt;hidechildren /&gt;\n        &lt;feature_startscript /&gt;\n        &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n          captain_pod.openscript =&gt; {\n            if (not this.locked and not this.isopen) {\n              captain_pod.isopen = true\n              captain.state = \"awake\"\n              MoveObject (captain, cryo_quarters)\n              msg (\"The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out. As it dissipates, you can see {object:captain} slowly climbing out of his pod.\")\n            }\n            else if (not this.locked and this.isopen) {\n              msg (\"It is already open.\")\n            }\n            else {\n              msg (\"An error chimes sounds from the ship's computer.&lt;br/&gt;\\\"Life support at critical levels. Restore main power in order to revive additional crew members.\\\"\")\n            }\n          }\n        ]]&gt;&lt;/attr&gt;\n        &lt;object name=\"captain\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;inherit name=\"namedmale\" /&gt;\n          &lt;alias&gt;Captain Picker&lt;/alias&gt;\n          &lt;displayverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n          &lt;/displayverbs&gt;\n          &lt;look type=\"script\"&gt;\n            switch (captain.state) {\n              case (\"asleep\") {\n                msg (\"You examine Captain Picker as he sleeps. He is in his fifties, bald, with sharp, angular features and a stern demeanour which is not diminished by his peaceful state.\")\n              }\n              case (\"awake\") {\n                msg (\"Captain Picker rubs his face groggily with boths hands. He is in his fifties, bald, with sharp, angular features and a stern demeanour.\")\n              }\n              case (\"hurt\") {\n                msg (\"Captain Picker lays in a heap on the floor. He appears to have been knocked unconscious and you see an angry red mark on his bald head.\")\n              }\n              case (\"combat\") {\n                msg (\"Captain Picker is scanning the instrumentation output on the console integrated into the Captain's Chair and braking commands at the ship's computer to evade the hostile vessel incoming fire and mitigate damage.\")\n              }\n            }\n          &lt;/look&gt;\n          &lt;speak type=\"script\"&gt;\n            talkToCaptain\n          &lt;/speak&gt;\n          &lt;ask type=\"scriptdictionary\"&gt;\n            &lt;item key=\"health\"&gt;\n            &lt;/item&gt;\n          &lt;/ask&gt;\n        &lt;/object&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"crew_quarters\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;description&gt;Dozens of rows of bunk beds fill the room, all unnoccupied. The beds are made and ready for use. Once the crew is awakened from cryogenic sleep, this will become their new sleeping area. The cold air from the cryo quarters above can be felt drifting down the ladder.&lt;/description&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;descprefix type=\"string\"&gt;&lt;/descprefix&gt;\n      &lt;alias&gt;Crew Quarters&lt;/alias&gt;\n      &lt;dropdestination type=\"object\"&gt;crew_quarters&lt;/dropdestination&gt;\n      &lt;firstenter type=\"script\"&gt;\n        JS.toggleNav ()\n        do (nautical_buttons_turnscript, \"script\")\n      &lt;/firstenter&gt;\n      &lt;exit name=\"ladder up\" alias=\"up\" to=\"cryo_quarters\"&gt;\n        &lt;inherit name=\"updirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"west\" to=\"aft_corridor\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"locker\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_closed\" /&gt;\n        &lt;feature_container /&gt;\n        &lt;inroomdescription&gt;A row of lockers lines the far wall. &lt;/inroomdescription&gt;\n        &lt;look&gt;You recognize the locker designated for your use.&lt;/look&gt;\n        &lt;listchildren /&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n          &lt;value&gt;Open&lt;/value&gt;\n          &lt;value&gt;Close&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Open&lt;/value&gt;\n          &lt;value&gt;Close&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;openmsg&gt;The locker opens with a metallic squeak.&lt;/openmsg&gt;\n        &lt;object name=\"space_suit\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;inherit name=\"wearable\" /&gt;\n          &lt;alias&gt;space suit&lt;/alias&gt;\n          &lt;feature_wearable /&gt;\n          &lt;take /&gt;\n          &lt;attr name=\"wear_layer\" type=\"int\"&gt;0&lt;/attr&gt;\n          &lt;wearmsg&gt;You climb into the suit, piece by piece. You painstakingly verify every joint and seal, completing the pre-EVA checklist drilled into you during your training.&lt;/wearmsg&gt;\n          &lt;removemsg&gt;You remove the suit, struggling your way out of each section, until you are down to just your jump suit once again.&lt;/removemsg&gt;\n          &lt;inventoryverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n            &lt;value&gt;Suit Up&lt;/value&gt;\n            &lt;value&gt;Remove Suit&lt;/value&gt;\n            &lt;value&gt;Drop Suit&lt;/value&gt;\n          &lt;/inventoryverbs&gt;\n          &lt;volume type=\"int\"&gt;0&lt;/volume&gt;\n          &lt;look type=\"script\"&gt;\n            msg (\"It is a Mark IV, extra vehicular activity suit, with integrated grappling harness and air supply. \")\n            if (air_tank.isopen = true) {\n              msg (\"The air tank is currently empty.\")\n            }\n            else {\n              msg (\"The air tank is full.\")\n            }\n          &lt;/look&gt;\n          &lt;suitup type=\"script\"&gt;\n            if (air_tank.isopen = true) {\n              msg (\"Putting on the space suit with no air in the tank would doom you to suffocation.\")\n            }\n            else {\n              msg (\"You climb into the suit, piece by piece. You painstakingly verify every joint and seal, completing the pre-EVA checklist drilled into you during your training.\")\n              space_suit.worn = true\n            }\n          &lt;/suitup&gt;\n          &lt;dropsuit type=\"script\"&gt;\n            if (space_suit.worn = true) {\n              msg (\"You must remove the suit before dropping it.\")\n            }\n            else {\n              msg (\"You drop it.\")\n              MoveObjectHere (space_suit)\n            }\n          &lt;/dropsuit&gt;\n          &lt;removesuit type=\"script\"&gt;\n            if (player.parent=space_cargo_bay or player.parent=space_mess_deck or player.parent=space_engine_room) {\n              msg (\"Removing your space suit while in space would be suicide.\")\n            }\n            else {\n              msg (\"You remove the suit, struggling your way out of each section, until you are down to just your jump suit once again.\")\n              SetObjectFlagOff (space_suit, \"worn\")\n            }\n          &lt;/removesuit&gt;\n          &lt;object name=\"air_tank\"&gt;\n            &lt;inherit name=\"editor_object\" /&gt;\n            &lt;inherit name=\"container_limited\" /&gt;\n            &lt;scenery type=\"boolean\"&gt;false&lt;/scenery&gt;\n            &lt;visible type=\"boolean\"&gt;false&lt;/visible&gt;\n            &lt;feature_container /&gt;\n          &lt;/object&gt;\n        &lt;/object&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"aft_corridor\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;alias&gt;Aft Corridor&lt;/alias&gt;\n      &lt;dropdestination type=\"object\"&gt;aft_corridor&lt;/dropdestination&gt;\n      &lt;description type=\"script\"&gt;\n        msg (\"The corridor in the aft section of the Scion is wide enough for several people to walk side by side. Off to port is the Cargo Bay, the Crew Quarters are starboard, heading aft leads to the engine room, while the rest of the ship is to the fore.\")\n        if (eng_door.locked = true) {\n          msg (\"You can smell smoke coming from the aft direction.\")\n        }\n      &lt;/description&gt;\n      &lt;exit alias=\"east\" to=\"crew_quarters\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit name=\"eng_door\" alias=\"south\" to=\"engine_room\"&gt;\n        &lt;inherit name=\"southdirection\" /&gt;\n        &lt;locked /&gt;\n        &lt;lockmessage&gt;As you approach the engine room, the door does not slide open automatically. Thin tendrils of smoke are seeping around the door seal and you can feel intense heat coming from the other side.&lt;/lockmessage&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"west\" to=\"cargo_bay\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"north\" to=\"fore_corridor\"&gt;\n        &lt;inherit name=\"northdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n    &lt;object name=\"engine_room\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Engine Room&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description type=\"script\"&gt;&lt;![CDATA[\n        firsttime {\n          msg (\"As the door to the Engine Room begins to slide open, you brace yourself. If the fire damage was bad enough, you may be walking into a radioactive disaster zone. Even if you aren't immediately killed, a damaged engine could mean the Scion is about to become dead in space, dooming you and the sleeping crew to float in a cold, lonely grave for centuries. &lt;br/&gt;&lt;br/&gt;When the door does open, you are relieved to see the shining blue light of the containment field. Everything within it, crucially including the engine itself, was spared from the fire. The damage to the rest of the room is extensive, but you can't worry about that right now.\")\n        }\n        msg (\"The room is peppered with black soot and the acrid smell of smoke is almost overpowering.\")\n      ]]&gt;&lt;/description&gt;\n      &lt;exit alias=\"north\" to=\"aft_corridor\"&gt;\n        &lt;inherit name=\"northdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"containment_field\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_closed\" /&gt;\n        &lt;look&gt;The translucent field shimmers as you inspect it. It is holding steady, at full strength.&lt;/look&gt;\n        &lt;inroomdescription&gt;A glowing, blue containment field protects a cynlindrical volume within the Engine Room. Everything inside the field appears pristine, having been untouched by the fire.&lt;/inroomdescription&gt;\n        &lt;feature_container /&gt;\n        &lt;open type=\"boolean\"&gt;false&lt;/open&gt;\n        &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n        &lt;transparent /&gt;\n        &lt;alias&gt;containment field&lt;/alias&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Open&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;openmsg type=\"string\"&gt;&lt;/openmsg&gt;\n        &lt;nokeymessage&gt;Lowering the containment field would instantly expose you to dangerous radiation from the engine. &lt;/nokeymessage&gt;\n        &lt;listchildren /&gt;\n        &lt;autounlock type=\"boolean\"&gt;false&lt;/autounlock&gt;\n        &lt;autoopen type=\"boolean\"&gt;false&lt;/autoopen&gt;\n        &lt;feature_startscript /&gt;\n        &lt;listchildrenprefix&gt;Within it are &lt;/listchildrenprefix&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n          containment_field.openscript =&gt; {\n            if (not this.locked and not this.isopen) {\n              msg (\"Lowering the containment field would instantly expose you to dangerous radiation from the engine. \")\n            }\n          }\n        ]]&gt;&lt;/attr&gt;\n        &lt;object name=\"engine\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;inherit name=\"container_closed\" /&gt;\n          &lt;feature_container /&gt;\n          &lt;isopen type=\"boolean\"&gt;false&lt;/isopen&gt;\n          &lt;transparent type=\"boolean\"&gt;false&lt;/transparent&gt;\n          &lt;inroomdescription&gt;The advanced fission engine sits in the centre of the containment field.&lt;/inroomdescription&gt;\n          &lt;feature_switchable /&gt;\n          &lt;listchildren type=\"boolean\"&gt;false&lt;/listchildren&gt;\n          &lt;displayverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n          &lt;/displayverbs&gt;\n          &lt;look type=\"script\"&gt;\n            if (old_rods.parent = engine) {\n              msg (\"The engine is operational, but its power output is very low.\")\n            }\n            else if (new_rods.parent = engine) {\n              msg (\"The engine is operating at full capacity. Power output is nominal.\")\n            }\n            else {\n              msg (\"Without any control rods inside, the plasma reactor is offline.\")\n            }\n          &lt;/look&gt;\n          &lt;object name=\"old_rods\"&gt;\n            &lt;inherit name=\"editor_object\" /&gt;\n            &lt;alias&gt;depleted control rods&lt;/alias&gt;\n          &lt;/object&gt;\n        &lt;/object&gt;\n        &lt;object name=\"RAT\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;alias&gt;RAT&lt;/alias&gt;\n          &lt;inroomdescription&gt;A robotacized, automated transport (RAT) is in standby mode.&lt;/inroomdescription&gt;\n          &lt;displayverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n            &lt;value&gt;Use&lt;/value&gt;\n          &lt;/displayverbs&gt;\n          &lt;feature_usegive /&gt;\n          &lt;look type=\"script\"&gt;\n            msg (\"The RAT has a four wheeled base, designed for navigating rough terrain. It features a long, flat bed for transporting heavy equipment and a robotic arm for loading and unloading.\")\n            if (old_rods.parent = RAT) {\n              msg (\"The used control rods sit on top of the RAT's flat bed.\")\n            }\n            else if (new_rods.parent = RAT) {\n              msg (\"The new control rods sit on top of the RAT's flat bed.\")\n            }\n          &lt;/look&gt;\n          &lt;use type=\"script\"&gt;&lt;![CDATA[\n            RATQueries = NewStringList()\n            RATQueries = listRATQueries()\n            if (ListCount(RATQueries) = 0) {\n              msg (\"\\\"Roboticised Automated Transports will respond to verbal commands issued to the ship's computer,\\\" explains the ship's computer. \\\"RAT units can be used to service the Scion's plasma reactor. Verifying current reactor status...\\\"&lt;br/&gt;\")\n              engineStatus\n            }\n            else {\n              computerFunction (RATQueries)\n            }\n          ]]&gt;&lt;/use&gt;\n        &lt;/object&gt;\n      &lt;/object&gt;\n      &lt;object name=\"broken_rat\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inroomdescription&gt;A robot stands just outside the field, its tires melted and its chassis warped and blackened by the fire. &lt;/inroomdescription&gt;\n        &lt;look&gt;A quick glance is enough to tell you that extensive reconstruction would be necessary to get this RAT working again.&lt;/look&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;alias&gt;damaged robot&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"cargo_bay\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Cargo Bay&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description&gt;The bay is packed with equipment from floor to ceiling. The mission organizer's tried to include everything needed to establish a new colony on a distant, unknown alien world. Any damage to the equipment in here could threaten the success of the mission. At the far end of the cargo bay is an airlock. &lt;/description&gt;\n      &lt;exit alias=\"east\" to=\"aft_corridor\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit name=\"airlock\" alias=\"out\" to=\"space_cargo_bay\"&gt;\n        &lt;inherit name=\"outdirection\" /&gt;\n        &lt;locked type=\"boolean\"&gt;false&lt;/locked&gt;\n        &lt;lockmessage type=\"string\"&gt;&lt;/lockmessage&gt;\n        &lt;runscript /&gt;\n        &lt;script type=\"script\"&gt;\n          if (space_suit.worn = true) {\n            msg (\"You open the airlock's inner door and walk inside. The inner door seals itself automatically and the air is quickly sucked out of the room. You check your space suit's systems, and they are all within normal operating parameters. The outer door slides open silently and you cautiously step out into the void.\")\n            JS.toggleNav ()\n            MoveObject (player, space_cargo_bay)\n          }\n          else {\n            msg (\"Stepping into an airlock without wearing a space suit would be suicide.\")\n          }\n        &lt;/script&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"huge_crate\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_closed\" /&gt;\n        &lt;inherit name=\"container_lockable\" /&gt;\n        &lt;alias&gt;huge crate&lt;/alias&gt;\n        &lt;feature_container /&gt;\n        &lt;listchildren /&gt;\n        &lt;nokeymessage&gt;The crate can't be opened with your bare hands.&lt;/nokeymessage&gt;\n        &lt;unlockmessage&gt;The laser cut through the crate's seals with ease.&lt;/unlockmessage&gt;\n        &lt;takemsg&gt;The crate is much too massive to be picked up by even the strongest human.&lt;/takemsg&gt;\n        &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Take&lt;/value&gt;\n          &lt;value&gt;Open&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;keycount type=\"int\"&gt;1&lt;/keycount&gt;\n        &lt;autounlock /&gt;\n        &lt;autoopen /&gt;\n        &lt;openmsg&gt;With a solid shove, the top of the crate slides away.&lt;/openmsg&gt;\n        &lt;key type=\"object\"&gt;laser_opener&lt;/key&gt;\n        &lt;look type=\"script\"&gt;\n          if (huge_crate.isopen = false) {\n            msg (\"The crate is tightly sealed. A label reads \\\"plasma reactor control rods\\\".\")\n          }\n          else {\n            msg (\"The crate has been cut open. The lid lies discarded on the floor nearby. \")\n          }\n        &lt;/look&gt;\n        &lt;object name=\"new_rods\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;inherit name=\"plural\" /&gt;\n          &lt;alias&gt;new control rods&lt;/alias&gt;\n          &lt;look&gt;The rods are long, thin cylinders, gunmetal grey in colour. They are in pristine condition and ready for use.&lt;/look&gt;\n          &lt;takemsg&gt;The rods are too heavy and too numerous for you to handle unaided.&lt;/takemsg&gt;\n        &lt;/object&gt;\n      &lt;/object&gt;\n      &lt;object name=\"plasma_torch\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;plasma torch&lt;/alias&gt;\n        &lt;look&gt;A heavy duty tool, able to cut through or seal metal plating up to a metre thick.&lt;/look&gt;\n        &lt;take /&gt;\n        &lt;volume type=\"int\"&gt;1&lt;/volume&gt;\n        &lt;feature_usegive /&gt;\n        &lt;use type=\"script\"&gt;\n          if (plasma_torch.parent = player and player.parent = space_mess_deck and hull_breach.parent = space_mess_deck) {\n            msg (\"Carefully bracing yourself against the hull, you begin welding the gash closed with the plasma torch. Your visor automatically darkens to protect your eyes from the intense light. Despite your suit's insulated gloves, your hands heat up and become sweaty in short order. It is slow going, but you persevere and succeed in sealing the breach.\")\n            RemoveObject (hull_breach)\n            UnlockExit (mess_door)\n            IncreaseScore (1)\n          }\n          else if (plasma_torch.parent = player and player.parent = space_engine_room) {\n            if (not hull.isopen) {\n              msg (\"Using the plasma torch, you begin cutting through the Scion's hull. As soon as you pierce through, a jet of air begins spraying out through the gap. You continue cutting until the atmosphere from the Engine Room has completely vented into space. Without any air left inside, the fire won't be able to sustain itself.\")\n              HelperOpenObject (hull)\n              IncreaseScore (1)\n            }\n            else {\n              firsttime {\n                msg (\"With all of the air vented into space and the fire extinguished, you use the plasma torch to seal the cut you made.\")\n                UnlockExit (eng_door)\n                IncreaseScore (1)\n              }\n              otherwise {\n                msg (\"The hull remains well sealed. No further work is required.\")\n              }\n            }\n          }\n          else {\n            msg (\"You don't see any obvious use for it here.\")\n          }\n        &lt;/use&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"fore_corridor\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Forward Corridor&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description&gt;The corridor narrows toward the fore of the Scion, allowing only a pair of passengers to walk abreast as it reaches the bridge at the far end. The Med Bay is on the port side, with the Mess Deck to starboard. Following the corridor aft leads into the Aft Corridor.&lt;/description&gt;\n      &lt;exit alias=\"south\" to=\"aft_corridor\"&gt;\n        &lt;inherit name=\"southdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"north\" to=\"bridge\"&gt;\n        &lt;inherit name=\"northdirection\" /&gt;\n        &lt;runscript /&gt;\n        &lt;script type=\"script\"&gt;&lt;![CDATA[\n          if (captain.parent = captain_chair) {\n            msg (\"As you walk into the Bridge, you see that Captain Picker has already taken up his post in the Captain's Chair. The viewscreen shows a magnified image of the enemy vessel. You've never seen anything like it--it looks like a collection of haphazardly arranged spheres, variously glowing in incomprehensible patterns.&lt;br/&gt;&lt;br/&gt;\\\"Shepherd!\\\" shouts the Captain as you walk in. \\\"I'm having the Scion perform evasive maneuvers. I need you to man the weapons and return fire! Step to it man!\\\"\")\n            MoveObject (player, bridge)\n          }\n          else {\n            MoveObject (player, bridge)\n          }\n        ]]&gt;&lt;/script&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"west\" to=\"med_bay\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit name=\"mess_door\" alias=\"east\" to=\"mess_deck\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n        &lt;locked /&gt;\n        &lt;lockmessage&gt;As you approach the door to the Mess Deck, it does not slide open automatically.&lt;/lockmessage&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n    &lt;object name=\"med_bay\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Med Bay&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description&gt;The walls are lined with empty gurneys, ready to receive patients. A variety of medical equipment and robotics are installed in the middle of the room. Medicine is not your area of expertise, so you recognize very few of the devices and know how to operate fewer still.&lt;/description&gt;\n      &lt;exit alias=\"east\" to=\"fore_corridor\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"air_compressor\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;air compressor&lt;/alias&gt;\n        &lt;look&gt;A hefty machine, the air compressor features a hose with a high pressure nozzle and locking mechanism.&lt;/look&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_usegive /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;use type=\"script\"&gt;\n          if (space_suit.parent = player and air_tank.isopen = true) {\n            msg (\"You connect the air compressor's nozzle to the space suit's air tank and activate the machine. It takes several minutes, but the tank's supply indicator finally goes from red to green.\")\n            air_tank.isopen = false\n            IncreaseScore (1)\n          }\n          else if (space_suit.parent=player and air_tank.isopen = false) {\n            msg (\"The space suit's air supply is sufficient for several hours of operation and doesn't require any topping up.\")\n          }\n          else {\n            msg (\"You have nothing to use the air compressor on.\")\n          }\n        &lt;/use&gt;\n      &lt;/object&gt;\n      &lt;object name=\"dispensary\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_open\" /&gt;\n        &lt;alias&gt;medication dispensary&lt;/alias&gt;\n        &lt;look&gt;The dispensary fills an entire wall of the Med Bay. You remember being taught that it contains an enormous variety of medication, intended to sustain the new colony until new treatments can be developed from the native flora and fauna of your new home. It features a small rectangular opening with a circular receptacle. &lt;/look&gt;\n        &lt;feature_usegive /&gt;\n        &lt;feature_container /&gt;\n        &lt;open type=\"boolean\"&gt;false&lt;/open&gt;\n        &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n        &lt;transparent /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;listchildren /&gt;\n        &lt;listchildrenprefix&gt;Docked in the receptacle is &lt;/listchildrenprefix&gt;\n        &lt;use type=\"script\"&gt;\n          if (hypospray.parent = player) {\n            fillHypo\n          }\n          else {\n            msg (\"You don't have anything to store medication from the dispensary.\")\n          }\n        &lt;/use&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"bridge\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Bridge&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description&gt;The nerve center of the Scion, the Bridge is dominated by a viewscreen covering the entire curved surface at the front of the room. The captain's chair sits on a slightly raised dais in the rear with a commanding view of the entire Bridge. Between the captain's chair and the screen are several control stations, each one intended to be manned by a senior officer.&lt;/description&gt;\n      &lt;exit alias=\"south\" to=\"fore_corridor\"&gt;\n        &lt;inherit name=\"southdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"captain_chair\"&gt;\n        &lt;inherit name=\"surface\" /&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;feature_container /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Stand&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;look&gt;It features the most advanced ergonomics ever developed by humanity, and is made from the most advanced materials, making it comfortable for extended periods of time. It features a control panel built into the right armrest. It also includes a safety harness to ensure its occupant cannot be inadvertently ejected. It is one excellent chair.&lt;/look&gt;\n        &lt;alias&gt;Captain's Chair&lt;/alias&gt;\n        &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n        &lt;prefix&gt;the&lt;/prefix&gt;\n        &lt;sit type=\"script\"&gt;\n          if (captain.parent = captain_chair) {\n            msg (\"The Captain gives you a brief, but eloquent look. You quickly back away from the chair.\")\n          }\n          else {\n            msg (\"Looking over your shoulder despite yourself, you take a seat in the Captain's Chair. It feels good. You could definitely get used to this.\")\n            game.gridmap = false\n            MoveObject (player, captain_chair)\n          }\n        &lt;/sit&gt;\n        &lt;stand type=\"script\"&gt;\n          if (player.parent = captain_chair) {\n            msg (\"Reluctantly, you stand up, leaving the comfort of the Captain's Chair behind.\")\n            MoveObject (player, bridge)\n            game.gridmap = true\n          }\n          else {\n            msg (\"You cannot stand up from the chair unless you sit down first.\")\n          }\n        &lt;/stand&gt;\n      &lt;/object&gt;\n      &lt;object name=\"weapon_controls\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;weapons control station&lt;/alias&gt;\n        &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n        &lt;prefix&gt;the &lt;/prefix&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;feature_usegive /&gt;\n        &lt;look type=\"script\"&gt;\n          msg (\"The panel displays status information regarding the Scion's complement of defensive weaponry. The ship's mission may be colonization of a new world, but the mission planners were not so naïve as to think that peaceful intentions would preclude the occasional need for force.\")\n          if (new_rods.parent = engine) {\n            msg (\"With full power restored, the Scion's full array of weapons is available and ready for use.\")\n          }\n          else {\n            msg (\"With main power at critical, all weapon functions have been disabled.\")\n          }\n        &lt;/look&gt;\n        &lt;use type=\"script\"&gt;&lt;![CDATA[\n          if (captain.parent = captain_chair) {\n            play sound (\"tos_phasersstrikingdeflectorshields.mp3\", false, false)\n            msg (\"You take control of the panel and with the computer's help, you acquire the enemy vessel.&lt;br/&gt;&lt;br/&gt;\\\"Target acquired!\\\" you shout over the sound of the Scion taking another hit.&lt;br/&gt;&lt;br/&gt;\\\"Fire!\\\" Picker shouts back at you.&lt;br/&gt;&lt;br/&gt;You jab the control panel and immediately hear and feel the vibrations throughout the Scion as the heavy lasers are activated. Searing red lines appear on the viewscreen, connecting with the enemy vessel. It attempts to maneouvre away, but the tracking sensors keep the lasers on target. Explosions blossom across the vessel's hull and in a dazzling display of colours, the ship's breaks apart.&lt;br/&gt;&lt;br/&gt;\\\"Target neutralized,\\\" you announce with relief.&lt;br/&gt;&lt;br/&gt;\\\"Well done,\\\" replies Captain Picker. \\\"You've earned yourself a field promotion for saving the Scion. Now let's wake up the rest of the crew and complete our mission.\\\"&lt;br/&gt;&lt;br/&gt;Congratulations!\")\n            RemoveObject (alien_ship)\n            IncreaseScore (5)\n            finish\n          }\n          else if (new_rods.parent = engine and player.parent &lt;&gt; captain_chair) {\n            play sound (\"computerbeep_1.mp3\", false, false)\n            msg (\"As soon as you begin to manipulate the controls, an error chime sounds.&lt;br/&gt;&lt;br/&gt;\\\"Unauthorized use of weapons systems detected. Senior officer approval is required.\\\"\")\n          }\n          else if (player.parent = captain_chair) {\n            msg (\"You can't reach the weapons control panel from the Captain's Chair.\")\n          }\n          else {\n            msg (\"The panel displays only a warning about the main power levels being critical.\")\n          }\n        ]]&gt;&lt;/use&gt;\n      &lt;/object&gt;\n      &lt;object name=\"sensors\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;feature_usegive /&gt;\n        &lt;alias&gt;sensors control station&lt;/alias&gt;\n        &lt;look type=\"script\"&gt;\n          msg (\"The panel displays internal and external sensor readings. Sensor logs can also be retrieved.\")\n        &lt;/look&gt;\n        &lt;use type=\"script\"&gt;&lt;![CDATA[\n          if (player.parent = captain_chair) {\n            msg (\"You can't reach the sensors panel from the Captain's Chair.\")\n          }\n          else {\n            readings = NewStringList()\n            list add (readings, \"Internal Sensor Array\")\n            list add (readings, \"External Sensor Array\")\n            list add (readings, \"Sensor Logs\")\n            ShowMenu (\"\\\"Select sensor information to display,\\\" the computer asks in response to you activating the panel.\", readings, true) {\n              switch (result) {\n                case (\"Internal Sensor Array\") {\n                  internalStatus\n                }\n                case (\"External Sensor Array\") {\n                  play sound (\"alarm03.mp3\", false, false)\n                  msg (\"\\\"Warning: hostile vessel detected,\\\" states the computer.&lt;br/&gt;&lt;br/&gt;The Scion's passive sensors are detecting intermittent energy readings from the direction of the unknown vessel. Although it is hard to be sure, given the ship's unknown origins, it would seem that it is not operating at normal capacity.&lt;br/&gt;&lt;br/&gt;Active sensors show the unknown ship's size to be smaller than the Scion. Its hull design resembles a collection of spheres welded together without any clear pattern. &lt;br/&gt;&lt;br/&gt;Sensors also show a planet, approximately one light month away.\")\n                }\n                case (\"Sensor Logs\") {\n                  ClearScreen\n                  msg (\"You skim through years of automated log entries detailing normal ship functions and minor glitches. Eventually, you discover today's log entry.\")\n                  TextFX_Typewriter (\"Unknown energy signature detected.&lt;br&gt;Incoming weapons fire detected.&lt;br&gt;Damage to aft hull detected. Initiating defensive counter measures. &lt;br&gt;Hull breach detected on Mess Deck. Innervating Chief Engineer Dawson.&lt;br&gt;Power surge detected. Chief Engineer Dawson life signs failing. Innervating Crewman Shepherd.&lt;br&gt;Explosive discharge detected aboard hostile vessel. &lt;br&gt;Power surge detected in plasma reactor. Fire detected in engine room. Unable to continue defensive countermeasures.\", 50)\n                  ShowRoomDescription\n                  IncreaseScore (1)\n                }\n                default {\n                  play sound (\"computerbeep_1.mp3\", false, false)\n                  msg (\"\\\"Invalid selection,\\\" the computer replies.\")\n                }\n              }\n            }\n          }\n        ]]&gt;&lt;/use&gt;\n      &lt;/object&gt;\n      &lt;object name=\"propulsion_controls\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;feature_usegive /&gt;\n        &lt;alias&gt;propulsion controls station&lt;/alias&gt;\n        &lt;look type=\"script\"&gt;\n          msg (\"The panel displays status information regarding the Scion's propulsion systems.\")\n          if (new_rods.parent = engine) {\n            msg (\"With full power restored, the Scion's propulsion systems are active.\")\n          }\n          else {\n            msg (\"With main power at critical, the Scion is adrift.\")\n          }\n        &lt;/look&gt;\n        &lt;use type=\"script\"&gt;&lt;![CDATA[\n          if (new_rods.parent = engine and player.parent &lt;&gt; captain_chair) {\n            msg (\"The Scion's propulsion systems are active.\")\n          }\n          else if (player.parent = captain_chair) {\n            msg (\"You can't reach the propulsion control panel from the Captain's Chair.\")\n          }\n          else {\n            msg (\"The panel displays only a warning about the main power levels being critical.\")\n          }\n        ]]&gt;&lt;/use&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"mess_deck\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Mess Deck&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description&gt;The large open area was designed to give the crew a break from the functional, confined spaces of the rest of the ship. Floor to ceiling windows line the deck, giving an incredible view of the stars. Recent exposure to vacuum has left the deck in a sorry state, with whatever objects that were unable to fit through the hull breach now strewn across the deck. Only the bar and the tables, which are bolted to the deck, remain where they belong.&lt;/description&gt;\n      &lt;exit alias=\"west\" to=\"fore_corridor\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"laser_opener\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;laser cutter&lt;/alias&gt;\n        &lt;look&gt;A low-power, handheld laser cutter. Looks like its batteries are included.&lt;/look&gt;\n        &lt;volume type=\"int\"&gt;1&lt;/volume&gt;\n        &lt;take /&gt;\n        &lt;feature_usegive /&gt;\n        &lt;use type=\"script\"&gt;\n          if (laser_opener.parent=player and player.parent=cargo_bay) {\n            msg (\"The laser cut through the crate's seals with ease.\")\n            huge_crate.locked = false\n            HelperOpenObject (huge_crate)\n          }\n          else {\n            msg (\"A laser cutter must be used with care, especially on a space ship. There is no useful target for it here.\")\n          }\n        &lt;/use&gt;\n      &lt;/object&gt;\n      &lt;object name=\"coffee\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;instant coffee canister&lt;/alias&gt;\n        &lt;volume type=\"int\"&gt;1&lt;/volume&gt;\n        &lt;look&gt;One of the modern wonders of the world: an apparatus containing instant coffee, water and a mechanism able to combine and heat them into a ready-to-serve beverage with a simple twist of the wrist and a few moments of patience. If only they could make it taste good... &lt;/look&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n          &lt;value&gt;Give&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;usestandardverblist /&gt;\n        &lt;take /&gt;\n        &lt;feature_usegive /&gt;\n        &lt;givesingle type=\"script\"&gt;\n          if (player.parent = bridge and captain.parent = captain_chair or player.parent = cryo_quarters and captain.parent = captain_pod) {\n            RemoveObject (coffee)\n            msg (\"You twist the container's top, instantly mixing and heating its contents into passable coffee, and hand it to the Captain. He glances at you and grabs the container, favouring you with a half smile.\")\n            IncreaseScore (1)\n          }\n          else {\n            msg (\"There is no one to give this too. \")\n          }\n        &lt;/givesingle&gt;\n      &lt;/object&gt;\n      &lt;object name=\"hypospray\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;look&gt;A glass and metal cylinder the size of your hand. You remember from your training that it can be used to administer any kind of medication.&lt;/look&gt;\n        &lt;take /&gt;\n        &lt;volume type=\"int\"&gt;1&lt;/volume&gt;\n        &lt;feature_usegive /&gt;\n        &lt;use type=\"script\"&gt;&lt;![CDATA[\n          if (hypospray.parent = player and player.parent = med_bay) {\n            fillHypo\n          }\n          else if (hypospray.parent = player and player.parent = cryo_quarters and captain.state = \"hurt\" and hypospray.med &lt;&gt; \"empty\") {\n            msg (\"You kneel and administer the hypospray to the unconscious form of Captain Picker.\")\n            if (hypospray.med = \"stimulant\") {\n              msg (\"His eyes flutter and finally open. He props himself up, rubbing his head. &lt;br/&gt;&lt;br/&gt;\\\"What happened?\\\" he asks, wincing as he touches his bruised head.\")\n              captain.state = \"healed\"\n              IncreaseScore (1)\n              talkToCaptain\n            }\n            else {\n              msg (\"The medication does not seem to have any effect.\")\n            }\n            hypospray.med = \"empty\"\n          }\n          else if (hypospray.med = \"empty\") {\n            msg (\"The hypospray won't do anyone much good while it is empty.\")\n          }\n          else {\n            msg (\"You consider injecting yourself, but then decide it wouldn't be advisable under the circumstances.\")\n          }\n        ]]&gt;&lt;/use&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;function name=\"shipStatus\"&gt;\n    if (alien_ship.parent = space_mess_deck) {\n      play sound (\"alarm03.mp3\", false, false)\n      msg (\"Warning: hostile vessel detected\")\n    }\n    internalStatus\n  &lt;/function&gt;\n  &lt;function name=\"listComputerQueries\" type=\"stringlist\"&gt;\n    queries = NewStringList()\n    list add (queries, \"State ship status\")\n    if (player.parent = cryo_pod) {\n      list add (queries, \"Open cryo pod\")\n    }\n    if (eng_door.locked = true and player.parent = aft_corridor) {\n      list add (queries, \"Extinguish fire in Engine Room\")\n    }\n    if (player.parent = fore_corridor) {\n      list add (queries, \"Override door to Mess Deck\")\n    }\n    if (player.parent=engine_room) {\n      list add (queries, \"State engine status\")\n    }\n    queries = ListCombine(queries, listRATQueries())\n    return (queries)\n  &lt;/function&gt;\n  &lt;function name=\"walkthrough\"&gt;\n    msg (\"Starting test...\")\n    UnlockExit (eng_door)\n    HelperOpenObject (huge_crate)\n    MoveObject (player, cryo_quarters)\n    RemoveObject (old_rods)\n    MoveObject (new_rods, engine)\n    MoveObject (hypospray, player)\n    hypospray.med = \"stimulant\"\n    captain_pod.locked = false\n    mess_door.locked = false\n    msg (\"Test completed\")\n  &lt;/function&gt;\n  &lt;function name=\"computerFunction\" parameters=\"queries\"&gt;&lt;![CDATA[\n    if (ListCount(queries) = 0) {\n      msg (\"You hear an error chime sound from the ship's computer.\")\n      play sound (\"computerbeep_1.mp3\", false, false)\n    }\n    else {\n      play sound (\"computerbeep_10.mp3\", false, false)\n      ShowMenu (\"\\\"Computer,\\\" you call loudly. &lt;br&gt; \\\"Specify query\\\", says a feminine robotic voice.\", queries, true) {\n        switch (result) {\n          case (\"State ship status\") {\n            shipStatus\n          }\n          case (\"Open cryo pod\") {\n            if (cryo_pod.isopen = false) {\n              msg (\"\\\"Opening cryo pod 352,\\\" replies the computer.\")\n              HelperOpenObject (cryo_pod)\n            }\n            else {\n              msg (\"\\\"Crewmen Shepherd's cryo pod is already open,\\\" replies the computer with an error chime.\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n          }\n          case (\"Extinguish fire in Engine Room\") {\n            msg (\"\\\"Unable to comply,\\\" replies the computer with an error tone. \\\"Fire countermeasure systems are inoperative.\\\"\")\n            play sound (\"computerbeep_1.mp3\", false, false)\n          }\n          case (\"Override door to Mess Deck\") {\n            msg (\"\\\"Unable to comply,\\\" replies the computer with an error tone. \\\"No atmosphere present on Mess Deck. Warning: hull breach detected on Mess Deck.\\\"\")\n            play sound (\"alarm03.mp3\", false, false)\n          }\n          case (\"State engine status\") {\n            engineStatus\n          }\n          case (\"Command the RAT to remove degraded control rods from the engine\") {\n            ClearScreen\n            msg (\"\\\"Executing command,\\\" replies the computer.&lt;br/&gt;&lt;br/&gt;The RAT's robotic arm begins to move, reaching out toward the engine. The depleted rods are removed smoothly and loaded on to the RAT's flat bed, ready for transport.&lt;br/&gt;\")\n            MoveObject (old_rods, RAT)\n            ShowRoomDescription\n          }\n          case (\"Move RAT\") {\n            destinations = NewStringList()\n            list add (destinations, \"Bridge\")\n            list add (destinations, \"Medical Bay\")\n            list add (destinations, \"Mess Deck\")\n            list add (destinations, \"Cargo Bay\")\n            list add (destinations, \"Crew Quarters\")\n            list add (destinations, \"Engine Room\")\n            if (player.parent = RAT.parent or player.parent=engine_room and RAT.parent=containment_field) {\n              ShowMenu (\"\\\"Specify destination,\\\" replies the computer.\", destinations, true) {\n                switch (result) {\n                  case (\"Bridge\") {\n                    MoveObject (RAT, bridge)\n                  }\n                  case (\"Medical Bay\") {\n                    MoveObject (RAT, med_bay)\n                  }\n                  case (\"Mess Deck\") {\n                    MoveObject (RAT, mess_deck)\n                  }\n                  case (\"Cargo Bay\") {\n                    MoveObject (RAT, cargo_bay)\n                  }\n                  case (\"Crew Quarters\") {\n                    MoveObject (RAT, crew_quarters)\n                  }\n                  case (\"Engine Room\") {\n                    MoveObject (RAT, engine_room)\n                  }\n                  default {\n                    msg (\"Unable to comply.\")\n                    play sound (\"computerbeep_1.mp3\", false, false)\n                  }\n                }\n                msg (\"\\\"Executing command,\\\" replies the computer.&lt;br/&gt;&lt;br/&gt;Its motors whirring loudly, the RAT rolls out through the door.&lt;br/&gt;\")\n                ShowRoomDescription\n              }\n            }\n            else {\n              msg (\"\\\"Unable to comply,\\\" replies the computer with an error chime. \\\"Safety protocols prohibit commanding a RAT unit without an operator present in the same room.\\\"\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n          }\n          case (\"Command the RAT to load the new control rods\") {\n            if (new_rods.parent = huge_crate and old_rods.parent &lt;&gt; RAT and huge_crate.isopen = true) {\n              ClearScreen\n              msg (\"\\\"Executing command,\\\" replies the computer.&lt;br/&gt;&lt;br/&gt;The RAT's robotic arm begins to move, reaching into the crate. The new control rods are carefully extracted and loaded on to the RAT's flat bed, ready for transport.&lt;br/&gt;\")\n              MoveObject (new_rods, RAT)\n              ShowRoomDescription\n            }\n            else if (huge_crate.isopen = false) {\n              play sound (\"computerbeep_1.mp3\", false, false)\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"RAT unit is unable to access control rods inside sealed cargo container.\\\"\")\n            }\n            else if (new_rods.parent = RAT or old_rods.parent = RAT) {\n              play sound (\"computerbeep_1.mp3\", false, false)\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Roboticized Automated Transport is at maximum capacity.\\\"\")\n            }\n          }\n          case (\"Unload RAT\") {\n            if (RAT.parent = cargo_bay and player.parent = cargo_bay and old_rods.parent = RAT) {\n              ClearScreen\n              msg (\"\\\"Executing command,\\\" replies the computer.&lt;br/&gt;&lt;br/&gt;The airlock inner door slides open and the RAT moves inside. It unloads the degraded control rods and returns to the Cargo Bay. The airlock inner door slides closed behind it.&lt;br/&gt;&lt;br/&gt;\\\"Jettisoning degraded control rods,\\\" explains the computer as the airlock's outer door opens and the rods are sucked into space, along with the atmosphere inside the airlock.&lt;br/&gt;\")\n              IncreaseScore (1)\n              RemoveObject (old_rods)\n              ShowRoomDescription\n            }\n            else if (RAT.parent = containment_field and player.parent = engine_room) {\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Installing degraded control rods into plasma reactor violates safety protocols.\\\"\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n            else if (old_rods.parent = RAT and player.parent = RAT.parent) {\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Degraded control rods cannot be stored in \" + RAT.parent.name + \". Exposure to degraded control rods is a severe hazard to crew health.\\\"\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n            else if (new_rods.parent = RAT and player.parent = engine_room and RAT.parent = engine_room) {\n              msg (\"The RAT rolls through the containment field and over to the engine. Its robotic arm carefully loads each new control rod into place inside the reactor. Once the process is complete, the engine roars into life.&lt;br/&gt;&lt;br/&gt;\\\"Power levels nominal,\\\" reports the ship's computer. ''Additional crew members may now be innervated.\\\"\")\n              MoveObject (RAT, containment_field)\n              MoveObject (new_rods, engine)\n              HelperCloseObject (engine)\n              captain_pod.locked = false\n              IncreaseScore (2)\n              game.power = \"normal\"\n              DisableTimer (lights)\n              DisableTimer (powerWarning)\n              DisableTimer (powerFailure)\n            }\n            else if (new_rods.parent = RAT) {\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"New control rods can be damaged if not stored in accordance with usage guidelines.\\\"\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n            else if (player.parent &lt;&gt; RAT.parent) {\n              msg (\"\\\"Unable to comply,\\\" replies the computer with an error chime. \\\"Safety protocols prohibit commanding a RAT unit without an operator present in the same room.\\\"\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n            else {\n              msg (\"\\\"Unable to comply,\\\" replies the computer unhelpfully.\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n          }\n          case (\"Run test\") {\n            walkthrough\n          }\n          default {\n            msg (\"Unable to comply.\")\n            play sound (\"computerbeep_1.mp3\", false, false)\n          }\n        }\n      }\n    }\n    JS.scrollToEnd ()\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"listRATQueries\" type=\"stringlist\"&gt;\n    RATqueries = NewStringList()\n    if (engine.isopen=true and player.parent = engine_room and old_rods.parent=engine) {\n      list add (RATqueries, \"Command the RAT to remove degraded control rods from the engine\")\n    }\n    if (old_rods.parent = RAT or new_rods.parent = RAT) {\n      list add (RATqueries, \"Move RAT\")\n      list add (RATqueries, \"Unload RAT\")\n    }\n    if (player.parent = cargo_bay and RAT.parent = cargo_bay and new_rods.parent = huge_crate) {\n      list add (RATqueries, \"Command the RAT to load the new control rods\")\n    }\n    return (RATqueries)\n  &lt;/function&gt;\n  &lt;function name=\"listCaptainTopics\" type=\"stringlist\"&gt;\n    dialogue = NewStringList()\n    switch (captain.state) {\n      case (\"asleep\") {\n        msg (\"Captain Picker is asleep.\")\n      }\n      case (\"awake\") {\n        msg (\"\\\"Captain Picker,\\\" you begin. \")\n        list add (dialogue, \"\\\"How do you feel?\\\"\")\n        list add (dialogue, \"\\\"Let me catch you up on what's been going on.\\\"\")\n      }\n      case (\"hurt\") {\n        msg (\"The Captain is unconscious and unresponsive.\")\n      }\n      case (\"healed\") {\n        list add (dialogue, \"The Scion is under attack!\")\n        list add (dialogue, \"Sleeping on the job again\")\n      }\n      case (\"combat\") {\n        list add (dialogue, \"What are your orders?\")\n        list add (dialogue, \"We need to return fire!\")\n      }\n    }\n    return (dialogue)\n  &lt;/function&gt;\n  &lt;function name=\"fillHypo\"&gt;&lt;![CDATA[\n    msg (\"You plug the hypospray into the medication dispensary.\")\n    MoveObject (hypospray, dispensary)\n    if (hypospray.med &lt;&gt; \"empty\") {\n      msg (\"An error chime sounds. The hypospray cannot be refilled until it is emptied.\")\n    }\n    else {\n      meds = NewStringList()\n      list add (meds, \"antibiotics\")\n      list add (meds, \"sedative\")\n      list add (meds, \"stimulant\")\n      list add (meds, \"multi-vitamin\")\n      ShowMenu (\"\\\"Select medication to dispense,\\\" says the ship's computer.\", meds, false) {\n        ClearScreen\n        msg (\"You hear the hum of machinery within the dispensary, followed by a faint hiss. A small indicator light on the hypospray changes from red to green.&lt;br/&gt;\")\n        hypospray.med = result\n        ShowRoomDescription\n      }\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"talkToCaptain\"&gt;&lt;![CDATA[\n    dialogue = listCaptainTopics()\n    ShowMenu (\"\", dialogue, false) {\n      switch (result) {\n        case (\"\\\"How do you feel?\\\"\") {\n          msg (\"Captain Picker sits up in his cryo pod and rubs his eyes.&lt;br/&gt;&lt;br/&gt;\\\"I'm fine,\\\" he says. \\\"Just a bit groggy.\\\"\")\n        }\n        case (\"\\\"Let me catch you up on what's been going on.\\\"\") {\n          ClearScreen\n          msg (\"You relate everything that has happened since you awoke in your cryo pod. The Captain interjects with questions occasionally, but mostly furrows his brow in concentration as he absorbs the situation.&lt;br/&gt;&lt;br/&gt;\\\"I see,\\\" he says simply as you finish. &lt;br/&gt;\")\n          play sound (\"largeexplosion1.mp3\", false, false)\n          msg (\"Just then, the Scion is rocked violently. You are thrown to the floor and hear a loud thud as the Captain is thrown into the bulkhead next to you. You scramble back to your feet.&lt;br/&gt;\")\n          captain.state = \"hurt\"\n          MoveObject (captain, cryo_quarters)\n          EnableTimer (attack)\n          EnableTimer (shipDestroyed)\n          ShowRoomDescription\n        }\n        case (\"The Scion is under attack!\") {\n          msg (\"\\\"What?\\\" exlaims the Captain. \\\"We need to get to the Bridge!\\\"&lt;br/&gt;&lt;br/&gt;He struggles to his feet and without waiting for a response, he slides down the ladder to the Crew Quarters.\")\n          MoveObject (captain, captain_chair)\n          captain.state = \"combat\"\n        }\n        case (\"What are your orders?\") {\n          msg (\"\\\"Take control of the weapon systems and destroy that ship!\\\" Captain Picker shouts.\")\n        }\n        case (\"We need to return fire!\") {\n          msg (\"\\\"I know that! I already ordered you to fire on that ship! Get to it!\\\" Captain Picker shouts angrily.\")\n        }\n        default {\n          msg (\"Captain Picker fixes you with a withering stare.\")\n        }\n      }\n    }\n    JS.scrollToEnd ()\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"internalStatus\"&gt;&lt;![CDATA[\n    if (old_rods.parent &lt;&gt; engine and new_rods.parent &lt;&gt; engine) {\n      msg (\"Warning: plasma reactor is offline. Operating on auxiliary power.\")\n    }\n    if (hull_breach.parent = space_mess_deck) {\n      msg (\"Warning: hull breach detected on Mess Deck.\")\n    }\n    if (hull.isopen = false and eng_door.locked = true) {\n      msg (\"Warning: fire detected in Engine Room.\")\n    }\n    else if (hull.isopen = true and eng_door.locked = true) {\n      msg (\"Warning: hull breach detected in Engine Room\")\n    }\n    if (new_rods.parent &lt;&gt; engine) {\n      msg (\"Warning: power levels critical.&lt;br/&gt;&lt;br/&gt;Immediate intervention is recommended to avoid loss of ship and all hands aboard.\")\n    }\n    JS.scrollToEnd ()\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"engineStatus\"&gt;\n    if (old_rods.parent = engine) {\n      msg (\"\\\"Plasma reactor is operational,\\\" replies the computer. \\\"Power output is limited due to degraded control rods.\\\"\")\n      HelperOpenObject (engine)\n    }\n    else if (new_rods.parent = engine) {\n      msg (\"\\\"Plasma reactor is operational,\\\" replies the computer. \\\"Power output within nominal operating parameters.\\\"\")\n    }\n    else {\n      msg (\"\\\"Warning: plasma reactor is offline,\\\" replies the computer with a danger chime. \\\"Operating on auxiliary power.\\\"\")\n      play sound (\"alarm03.mp3\", false, false)\n    }\n    JS.scrollToEnd ()\n  &lt;/function&gt;\n  &lt;function name=\"SetupNautical\"&gt;&lt;![CDATA[\n    game.compassdirections = ListExclude (game.compassdirections, \"\")\n    list add (game.compassdirections, \"fore\")\n    list add (game.compassdirections, \"port\")\n    list add (game.compassdirections, \"starboard\")\n    list add (game.compassdirections, \"aft\")\n    list add (game.compassdirections, \"f\")\n    list add (game.compassdirections, \"p\")\n    list add (game.compassdirections, \"sb\")\n    list add (game.compassdirections, \"a\")\n    request (SetCompassDirections, Join(game.compassdirections, \";\"))\n    go.pattern = \"^go to (?\"+Chr(60)+\"exit&gt;.*)$|^go (?\"+Chr(60)+\"exit&gt;.*)$|^(?\"+Chr(60)+\"exit&gt;forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\n    lookdir.pattern = \"^look (?\"+Chr(60)+\"exit&gt;forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\n    foreach (exit, AllExits()) {\n      if (StartsWith (exit.name, \"fore\")) {\n        exit.alias = \"fore\"\n        exit.alt = Split(\"f;forward\")\n      }\n      if (StartsWith (exit.name, \"aft\")) {\n        exit.alias = \"aft\"\n        exit.alt = Split(\"a\")\n      }\n      if (StartsWith (exit.name, \"port\")) {\n        exit.alias = \"port\"\n        exit.alt = Split(\"p\")\n      }\n      if (StartsWith (exit.name, \"starboard\")) {\n        exit.alias = \"starboard\"\n        exit.alt = Split(\"sb\")\n      }\n    }\n    ChangeDirToNautical\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"SendToJsEval\" parameters=\"data\"&gt;&lt;![CDATA[\n    regEx = \"//\"\n    s = Chr(60) + \"br/&gt;\"\n    js = Split(data,s)\n    notes = NewStringList()\n    foreach (line, js) {\n      if (StartsWith(line,\"//\")) {\n        list add (notes, line)\n      }\n    }\n    js = ListExclude(js,notes)\n    finaljs = NewStringList()\n    foreach (line, js) {\n      code = line\n      if (IsRegExMatch(regEx,line)) {\n        list = Split(line,\"//\")\n        code = list[0]\n      }\n      list add (finaljs, code)\n    }\n    js = Join(finaljs,\"\")\n    js = Replace(js, \"[br]\", s)\n    js = Replace(js, \"[br/]\", s)\n    js = Replace(js, \"[break]\", s)\n    js = Replace(js, \"[linebreak]\", s)\n    js = Replace(js, \"[line break]\", s)\n    JS.eval (js)\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"ChangeDirToNautical\"&gt;\n    foreach (exit, AllExits()) {\n      if (HasAttribute (exit.parent, \"parent\")) {\n        if (GetBoolean (exit.parent.parent, \"shiptype\")) {\n          if (exit.alias = \"north\") {\n            exit.visible = false\n            newname = \"\" + GetUniqueElementName(\"fore\")\n            create exit (newname, \"fore\", exit.parent, exit.to, \"\")\n            newexit = GetObject(newname)\n            newexit.to = exit.to\n            newexit.alt = Split(\"f;forward\")\n          }\n          else if (exit.alias = \"south\") {\n            exit.visible = false\n            newname = \"\" + GetUniqueElementName(\"aft\")\n            create exit (newname, \"aft\", exit.parent, exit.to, \"\")\n            newexit = GetObject(newname)\n            newexit.to = exit.to\n            newexit.alt = Split(\"a\")\n          }\n          else if (exit.alias = \"west\") {\n            newname = \"\" + GetUniqueElementName(\"port\")\n            create exit (newname, \"port\", exit.parent, exit.to, \"\")\n            newexit = GetObject(newname)\n            newexit.to = exit.to\n            newexit.alt = Split(\"p\")\n          }\n          else if (exit.alias = \"east\") {\n            exit.visible = false\n            newname = \"\" + GetUniqueElementName(\"starboard\")\n            create exit (newname, \"starboard\", exit.parent, exit.to, \"\")\n            newexit = GetObject(newname)\n            newexit.to = exit.to\n            newexit.alt = Split(\"sb\")\n          }\n        }\n      }\n    }\n  &lt;/function&gt;\n  &lt;timer name=\"lights\"&gt;\n    &lt;interval&gt;120&lt;/interval&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (player.parent &lt;&gt; space_cargo_bay and player.parent &lt;&gt; space_engine_room and player.parent &lt;&gt; space_mess_deck) {\n        switch (game.power) {\n          case (\"low\") {\n            msg (\"&lt;br/&gt;The lights in the room flicker for a few moments before turning on again.\")\n          }\n          case (\"critical\") {\n            msg (\"&lt;br/&gt;The lights in the room switch off, leaving you in perfect blackness for a few moments before they turn on again. You shiver as you notice that the ambient temperature has dropped a few degrees.\")\n          }\n          case (\"normal\") {\n          }\n        }\n      }\n      JS.scrollToEnd ()\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n  &lt;timer name=\"powerFailure\"&gt;\n    &lt;interval&gt;900&lt;/interval&gt;\n    &lt;enabled type=\"boolean\"&gt;false&lt;/enabled&gt;\n    &lt;script&gt;&lt;![CDATA[\n      ClearScreen\n      if (new_rods.parent &lt;&gt; engine and space_suit.worn = false) {\n        play sound (\"alarm03.mp3\", false, false)\n        msg (\"\\\"Plasma reactor failure,\\\" announces the computer. \\\"Unable to maintain minimal life support functions.\\\"&lt;br/&gt;&lt;br/&gt;You feel the temperature dropping rapidly around you and you struggle to draw breath in the increasingly thin atmosphere. Within moments, you see bright spots appear before your eyes and then... darkness...&lt;br/&gt;&lt;br/&gt;You failed to save the Scion!\")\n        DecreaseScore (-5)\n        finish\n      }\n      else if (new_rods.parent &lt;&gt; engine and space_suit.worn = true) {\n        play sound (\"alarm03.mp3\", false, false)\n        msg (\"\\\"Plasma reactor failure,\\\" announces the computer. \\\"Unable to maintain minimal life support functions.\\\"&lt;br/&gt;&lt;br/&gt;From within the confines of your space suit, you watch the Scion's systems shut down around you. Your air supply keeps you alive a short time longer, but with nowhere to go and no way to resurrect the Scion, you drop to your knees in despair.&lt;br/&gt;&lt;br/&gt;You failed to save the Scion!\")\n        DecreaseScore (-3)\n        finish\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n  &lt;timer name=\"powerWarning\"&gt;\n    &lt;interval&gt;900&lt;/interval&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (new_rods.parent &lt;&gt; engine) {\n        EnableTimer (powerFailure)\n        game.power = \"critical\"\n        play sound (\"alarm03.mp3\", false, false)\n        msg (\"\\\"Warning: plasma reactor power levels have dropped to critical levels,\\\" the computer states flatly. \\\"Life support failure in 15 minutes.\\\"\")\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n  &lt;timer name=\"attack\"&gt;\n    &lt;interval&gt;60&lt;/interval&gt;\n    &lt;script&gt;&lt;![CDATA[\n      play sound (\"largeexplosion1.mp3\", false, false)\n      msg (\"&lt;br/&gt;You stagger as the ship is rocked by another direct hit. You're not sure how much more the Scion can take...\")\n      JS.scrollToEnd ()\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n  &lt;timer name=\"shipDestroyed\"&gt;\n    &lt;interval&gt;600&lt;/interval&gt;\n    &lt;script&gt;&lt;![CDATA[\n      play sound (\"largeexplosion1.mp3\", false, false)\n      msg (\"You are thrown to the deck as the Scion is blasted yet again. Secondary explosions quickly follow the initial impact and you can hear explosive decompression occuring all around you. After another few moments of violence, you have just enough time to realize that the Scion is doomed before a bright flash fills your senses.&lt;br/&gt;&lt;br/&gt;You have failed to save the Scion!\")\n      DecreaseScore (-3)\n      finish\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n&lt;/asl&gt;```\n\n&lt;/details&gt;\n</code></pre>\n\n</details>",
      "PostDate": "2018-07-06T00:54:57.5566637Z",
      "LastEditDate": "2018-07-06T01:15:41.6020991Z",
      "link": null
    },
    {
      "PostId": "9de8cd4e-d5aa-4645-8498-dea771a2c7cf",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That was my error.   (Sorry!)\r\n\r\nThe start script runs before the objects' initialisation scripts, so \"scion\" doesn't have the \"shiptype\" attribute set yet when the ```SetupNautical``` function is called.\r\n\r\nTo fix that, delete the initialisation script on scion, then replace your start script with this:\r\n```\r\nset (captain, \"state\", \"asleep\")\r\nset (hypospray, \"med\", \"empty\")\r\nset (game, \"power\", \"low\")\r\njs = \"function isMobilePlayer(){\"\r\n  js = js + \"if (typeof(currentTab) === 'string'){return true;}return false;};\"\r\nJS.eval (js)\r\nscion.shiptype = true\r\nSetupNautical\r\n```\r\n\r\n---\r\nAlso add this to the starting room's \"Before entering for the first time\" script:\r\n\r\n```\r\nJS.toggleNav ()\r\ndo (nautical_buttons_turnscript, \"script\")\r\n```\r\n\r\n---\r\nLet me know if it works, please!",
      "EditableFormat": "markdown",
      "HTML": "<p>That was my error.   (Sorry!)</p>\n<p>The start script runs before the objects' initialisation scripts, so \"scion\" doesn't have the \"shiptype\" attribute set yet when the <code>SetupNautical</code> function is called.</p>\n<p>To fix that, delete the initialisation script on scion, then replace your start script with this:</p>\n<pre><code>set (captain, \"state\", \"asleep\")\nset (hypospray, \"med\", \"empty\")\nset (game, \"power\", \"low\")\njs = \"function isMobilePlayer(){\"\n  js = js + \"if (typeof(currentTab) === 'string'){return true;}return false;};\"\nJS.eval (js)\nscion.shiptype = true\nSetupNautical\n</code></pre>\n<hr>\n<p>Also add this to the starting room's \"Before entering for the first time\" script:</p>\n<pre><code>JS.toggleNav ()\ndo (nautical_buttons_turnscript, \"script\")\n</code></pre>\n<hr>\n<p>Let me know if it works, please!</p>\n\n",
      "PostDate": "2018-07-06T05:11:58.2260882Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "13a076b6-8d27-44fd-ac34-7ebc945bfb23",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@Richard\r\n> `if (typeof(currentTab) === 'string'){return true;}return false;`\r\n\r\nThis seems to be a rather wordy way of saying:\r\n\r\n`return (typeof(currentTab) === 'string');`\r\n\r\nIf you want to return true if the expression is true, and false if the expression is false, then just return the value of the expression. In JS sometimes you might want to convert a truthy/falsey value to actual true/false, in which case you'd do `return (!!expression);`, but that shouldn't be necessary here as the equality operators return an actual true or false.",
      "EditableFormat": "markdown",
      "HTML": "<p>@Richard</p>\n<blockquote>\n<p><code>if (typeof(currentTab) === 'string'){return true;}return false;</code></p>\n</blockquote>\n<p>This seems to be a rather wordy way of saying:</p>\n<p><code>return (typeof(currentTab) === 'string');</code></p>\n<p>If you want to return true if the expression is true, and false if the expression is false, then just return the value of the expression. In JS sometimes you might want to convert a truthy/falsey value to actual true/false, in which case you'd do <code>return (!!expression);</code>, but that shouldn't be necessary here as the equality operators return an actual true or false.</p>\n\n",
      "PostDate": "2018-07-06T09:24:05.9664492Z",
      "LastEditDate": "2018-07-06T09:25:05.6323503Z",
      "link": null
    },
    {
      "PostId": "4e47d581-02f8-448b-b18e-2dff48807c77",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I made the changes, including adding to the cryo_pod's \"Before entering for the first time\" script.\r\n\r\nThe result is that when the player arrives in the Crew Quarters (3rd room but first where nautical directions should appear), I see the following:\r\n\r\n1. port is listed as an exit (hurray!)\r\n2. west is still listed as an exit (both exits work and lead to the same place)\r\n3. mousing over the compass direction shows west\r\n4. moving into the Aft Corridor (west/port of the Crew Quarters), the compass shows the Crew Quarters exits, not the Aft Corridor exits\r\n5. The Aft Corridor exits in the output show up as nautical (hurray!) but west is also in the list\r\n\r\nI have a funny situation where my starting room (Cryo Pod) is a room inside the Cryo Quarters (which is inside scion, the ship). So nautical_buttons_turnscript will find that cryo_pod.parent.parent does not have shiptype when it runs \"Before entering for the first time\" in cryo pod.\r\n\r\nI tried moving those 2 lines to Cryo Quarters (2nd room) instead of Cryo Pod, but that didn't solve the problem. It did seem to help a little though, as the compass now changes when moving from Crew Quarters to Aft Corridor (the up exit disappears, but the compass is otherwise still not updated correctly).\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I made the changes, including adding to the cryo_pod's \"Before entering for the first time\" script.</p>\n<p>The result is that when the player arrives in the Crew Quarters (3rd room but first where nautical directions should appear), I see the following:</p>\n<ol>\n<li>port is listed as an exit (hurray!)</li>\n<li>west is still listed as an exit (both exits work and lead to the same place)</li>\n<li>mousing over the compass direction shows west</li>\n<li>moving into the Aft Corridor (west/port of the Crew Quarters), the compass shows the Crew Quarters exits, not the Aft Corridor exits</li>\n<li>The Aft Corridor exits in the output show up as nautical (hurray!) but west is also in the list</li>\n</ol>\n<p>I have a funny situation where my starting room (Cryo Pod) is a room inside the Cryo Quarters (which is inside scion, the ship). So nautical_buttons_turnscript will find that cryo_pod.parent.parent does not have shiptype when it runs \"Before entering for the first time\" in cryo pod.</p>\n<p>I tried moving those 2 lines to Cryo Quarters (2nd room) instead of Cryo Pod, but that didn't solve the problem. It did seem to help a little though, as the compass now changes when moving from Crew Quarters to Aft Corridor (the up exit disappears, but the compass is otherwise still not updated correctly).</p>\n\n",
      "PostDate": "2018-07-06T15:25:39.7896913Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bacf114f-53d8-43bf-a5bb-d8a5f368c14b",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@mrangel\r\n\r\nThanks!  I'll change that.\r\n\r\n---\r\n@Gizmodeus\r\n\r\nI left one line out of the ```ChangeDirToNautical``` function.  That's why the normal directions were still showing up.\r\n\r\nI fixed that, then changed the way it checks if you're on a ship.  Now it checks all the parents of an exit, all the way to the top level.\r\n\r\n Replace ```ChangeDirToNautical``` with this:\r\n\r\n```c\r\nforeach (exit, AllExits()) {\r\n  if (ListCount(FilterByAttribute (ListParents(exit), \"shiptype\", true)) > 0) {\r\n    if (exit.alias = \"north\") {\r\n      exit.visible = false\r\n      newname = \"\" + GetUniqueElementName(\"fore\")\r\n      create exit (newname, \"fore\", exit.parent, exit.to, \"\")\r\n      newexit = GetObject(newname)\r\n      newexit.to = exit.to\r\n      newexit.alt = Split(\"f;forward\")\r\n    }\r\n    else if (exit.alias = \"south\") {\r\n      exit.visible = false\r\n      newname = \"\" + GetUniqueElementName(\"aft\")\r\n      create exit (newname, \"aft\", exit.parent, exit.to, \"\")\r\n      newexit = GetObject(newname)\r\n      newexit.to = exit.to\r\n      newexit.alt = Split(\"a\")\r\n    }\r\n    else if (exit.alias = \"west\") {\r\n      exit.visible = false\r\n      newname = \"\" + GetUniqueElementName(\"port\")\r\n      create exit (newname, \"port\", exit.parent, exit.to, \"\")\r\n      newexit = GetObject(newname)\r\n      newexit.to = exit.to\r\n      newexit.alt = Split(\"p\")\r\n    }\r\n    else if (exit.alias = \"east\") {\r\n      exit.visible = false\r\n      newname = \"\" + GetUniqueElementName(\"starboard\")\r\n      create exit (newname, \"starboard\", exit.parent, exit.to, \"\")\r\n      newexit = GetObject(newname)\r\n      newexit.to = exit.to\r\n      newexit.alt = Split(\"sb\")\r\n    }\r\n  }\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>@mrangel</p>\n<p>Thanks!  I'll change that.</p>\n<hr>\n<p>@Gizmodeus</p>\n<p>I left one line out of the <code>ChangeDirToNautical</code> function.  That's why the normal directions were still showing up.</p>\n<p>I fixed that, then changed the way it checks if you're on a ship.  Now it checks all the parents of an exit, all the way to the top level.</p>\n<p>Replace <code>ChangeDirToNautical</code> with this:</p>\n<pre><code>foreach (exit, AllExits()) {\n  if (ListCount(FilterByAttribute (ListParents(exit), \"shiptype\", true)) &gt; 0) {\n    if (exit.alias = \"north\") {\n      exit.visible = false\n      newname = \"\" + GetUniqueElementName(\"fore\")\n      create exit (newname, \"fore\", exit.parent, exit.to, \"\")\n      newexit = GetObject(newname)\n      newexit.to = exit.to\n      newexit.alt = Split(\"f;forward\")\n    }\n    else if (exit.alias = \"south\") {\n      exit.visible = false\n      newname = \"\" + GetUniqueElementName(\"aft\")\n      create exit (newname, \"aft\", exit.parent, exit.to, \"\")\n      newexit = GetObject(newname)\n      newexit.to = exit.to\n      newexit.alt = Split(\"a\")\n    }\n    else if (exit.alias = \"west\") {\n      exit.visible = false\n      newname = \"\" + GetUniqueElementName(\"port\")\n      create exit (newname, \"port\", exit.parent, exit.to, \"\")\n      newexit = GetObject(newname)\n      newexit.to = exit.to\n      newexit.alt = Split(\"p\")\n    }\n    else if (exit.alias = \"east\") {\n      exit.visible = false\n      newname = \"\" + GetUniqueElementName(\"starboard\")\n      create exit (newname, \"starboard\", exit.parent, exit.to, \"\")\n      newexit = GetObject(newname)\n      newexit.to = exit.to\n      newexit.alt = Split(\"sb\")\n    }\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2018-07-06T21:06:28.3843428Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "41d77f95-093e-418b-a0a7-eb46f7ce6a03",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "...and don't forget to add this to the \"Before entering for the first time\" script on your starting room if the room is on board a ship:\r\n\r\n```\r\nJS.toggleNav ()\r\ndo (nautical_buttons_turnscript, \"script\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>...and don't forget to add this to the \"Before entering for the first time\" script on your starting room if the room is on board a ship:</p>\n<pre><code>JS.toggleNav ()\ndo (nautical_buttons_turnscript, \"script\")\n</code></pre>\n\n",
      "PostDate": "2018-07-06T21:19:23.4804229Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "795d7037-fe58-46db-b5a3-7a985c34b554",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I also updated the turn script to this to handle any room which is on board a ship (no matter how deeply nested):\r\n\r\n```c\r\n// Version 2\r\nif (ListCount(FilterByAttribute (ListParents(game.pov), \"shiptype\", true)) > 0) {\r\n  list = NewStringList()\r\n  foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\r\n    list add (list, exit.alias)\r\n  }\r\n  JS.updateShipCompass (Join(list, \"/\"))\r\n}\r\n```\r\n\r\n---\r\n**@PG**\r\n\r\n> This looks really, really good. Every good text adventure needs a ship.\r\n>\r\n>I can really tell that this will make text adventures great again!\r\n\r\nThank you (I think).",
      "EditableFormat": "markdown",
      "HTML": "<p>I also updated the turn script to this to handle any room which is on board a ship (no matter how deeply nested):</p>\n<pre><code>// Version 2\nif (ListCount(FilterByAttribute (ListParents(game.pov), \"shiptype\", true)) &gt; 0) {\n  list = NewStringList()\n  foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\n    list add (list, exit.alias)\n  }\n  JS.updateShipCompass (Join(list, \"/\"))\n}\n</code></pre>\n<hr>\n<p><strong>@PG</strong></p>\n<blockquote>\n<p>This looks really, really good. Every good text adventure needs a ship.</p>\n<p>I can really tell that this will make text adventures great again!</p>\n</blockquote>\n<p>Thank you (I think).</p>\n\n",
      "PostDate": "2018-07-06T21:29:07.6983665Z",
      "LastEditDate": "2018-07-06T21:34:16.7826473Z",
      "link": null
    },
    {
      "PostId": "2dd2cc29-b6e7-4ac4-91d4-d56b97f8f6b6",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Progress! The latest changes have fixed the directions links in the output. This now works perfectly!\r\n\r\nHowever, the compass directions are all disabled (except for up, down, in, out).",
      "EditableFormat": "markdown",
      "HTML": "<p>Progress! The latest changes have fixed the directions links in the output. This now works perfectly!</p>\n<p>However, the compass directions are all disabled (except for up, down, in, out).</p>\n\n",
      "PostDate": "2018-07-07T02:43:11.8341173Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dbb899bf-b589-4ebc-86ce-c94b37df1c9d",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Can you post your current code one more time?",
      "EditableFormat": "markdown",
      "HTML": "<p>Can you post your current code one more time?</p>\n\n",
      "PostDate": "2018-07-07T04:01:24.8212794Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5ec6fadf-418a-46e2-bf9e-ed6c4b6dc373",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The updated code is below. Note that there seem to be two problems:\r\n\r\n1. Compass buttons are disabled, but after clicking around for a while, they became enabled (not sure what I did exactly, need to spend more time testing)\r\n2. I have two exits that are locked at the beginning of the game (eng_door and mess_door) which are replaced with unlocked doors by ChangeDirToNautical\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6615.29455-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Red Alert\">\r\n    <gameid>5d168f57-b215-43fb-b260-9d2c82c05bfc</gameid>\r\n    <version>1.2</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <author>Eric Caillibot</author>\r\n    <category>Sci-Fi</category>\r\n    <showscore />\r\n    <menufont>Georgia, serif</menufont>\r\n    <feature_limitinventory />\r\n    <attr name=\"feature_lightdark\" type=\"boolean\">false</attr>\r\n    <attr name=\"feature_asktell\" type=\"boolean\">false</attr>\r\n    <attr name=\"feature_annotations\" type=\"boolean\">false</attr>\r\n    <attr name=\"feature_advancedwearables\" type=\"boolean\">false</attr>\r\n    <feature_advancedscripts />\r\n    <appendobjectdescription />\r\n    <showcommandbar type=\"boolean\">false</showcommandbar>\r\n    <gridmap type=\"boolean\">false</gridmap>\r\n    <mapscale type=\"int\">1</mapscale>\r\n    <mapsize type=\"int\">1</mapsize>\r\n    <respondtogridclicks type=\"boolean\">false</respondtogridclicks>\r\n    <attr name=\"autodescription_youarein_useprefix\" type=\"boolean\">false</attr>\r\n    <attr name=\"autodescription_youcansee\" type=\"int\">3</attr>\r\n    <attr name=\"autodescription_youcango\" type=\"int\">4</attr>\r\n    <attr name=\"autodescription_description\" type=\"int\">2</attr>\r\n    <commandpane />\r\n    <statusandcompassattop />\r\n    <turnoffplacesandobjects />\r\n    <description>You were supposed to remain in cryo sleep until the Scion reached orbit around your target world in the Alpha Centauri system. So why are you awake now? And why are you alone?</description>\r\n    <cover>red-space.jpeg</cover>\r\n    <subtitle>Adrift in Space</subtitle>\r\n    <povstatusattributes type=\"stringdictionary\" />\r\n    <menufontsize type=\"int\">11</menufontsize>\r\n    <turnoffinventory type=\"boolean\">false</turnoffinventory>\r\n    <turnoffcompass type=\"boolean\">false</turnoffcompass>\r\n    <showpanes />\r\n    <pov type=\"object\">player</pov>\r\n    <inituserinterface type=\"script\"><![CDATA[\r\n      JS.setCommands (\"Computer;Look\")\r\n      SetTimeout (2) {\r\n        cmds = ProcessText(\"{command:Computer}&emsp;{command:Look}&emsp;{command:Inventory}\" + Chr(60) + \"span id=\\\"custom-score-div\\\">\" + Chr(60) + \"br/>Score: {game.score}\" + Chr(60) + \"/span>\")\r\n        s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\">\"\r\n        s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\r\n        s = s + Chr(60) + \"/div>\"\r\n        JS.eval (\"if (typeof (currentTab) === 'string'){var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));}\")\r\n        JS.\r\n      }\r\n      SendToJsEval (js.description)\r\n      JS.changeCompass ()\r\n    ]]></inituserinterface>\r\n    <start type=\"script\">\r\n      set (captain, \"state\", \"asleep\")\r\n      set (hypospray, \"med\", \"empty\")\r\n      set (game, \"power\", \"low\")\r\n      js = \"function isMobilePlayer(){\"\r\n        js = js + \"return (typeof(currentTab) === 'string');\"\r\n        JS.eval (js)\r\n        scion.shiptype = true\r\n        SetupNautical\r\n    </start>\r\n  </game>\r\n  <verb>\r\n    <property>ask/tell</property>\r\n    <pattern>ask/tell</pattern>\r\n    <defaultexpression>\"You can't ask/tell \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <object name=\"space_cargo_bay\">\r\n    <inherit name=\"editor_room\" />\r\n    <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n    <alias>In Space (Outside Cargo Bay)</alias>\r\n    <description type=\"script\">\r\n      msg (\"The cold blackness of space is visible in every direction, perforated by innumerable, distant stars. The hull of the Scion stretches out below you, illuminated only by your suit's lights.\")\r\n      firsttime {\r\n        msg (\"The only sound is your own breathing. Using the grappling equipment integrated into your suit, you are able to move around the hull. The lack of gravity makes it virtually effortless, but the process is awkward and slow.\")\r\n      }\r\n    </description>\r\n    <exit name=\"airlock_in\" alias=\"in\" to=\"cargo_bay\">\r\n      <inherit name=\"indirection\" />\r\n      <runscript />\r\n      <script type=\"script\">\r\n        msg (\"You glide into the airlock and seal the outer door behind you. Air is automatically pumped into the room and once the air pressure matches the interior of the Scion, the inner door automatically slides open. You climb through the inner door, sealing it behind you. Once free of the airlock, you carefully remove the space suit.\")\r\n        MoveObject (player, cargo_bay)\r\n        space_suit.worn = false\r\n      </script>\r\n    </exit>\r\n    <exit alias=\"southeast\" to=\"space_engine_room\">\r\n      <inherit name=\"southeastdirection\" />\r\n    </exit>\r\n    <exit alias=\"northeast\" to=\"space_mess_deck\">\r\n      <inherit name=\"northeastdirection\" />\r\n    </exit>\r\n  </object>\r\n  <command name=\"computer\">\r\n    <pattern>Computer</pattern>\r\n    <script>\r\n      queries = listComputerQueries()\r\n      computerFunction (queries)\r\n    </script>\r\n  </command>\r\n  <verb>\r\n    <property>suitup</property>\r\n    <pattern>suit up</pattern>\r\n    <defaultexpression>\"You can't suit up \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <object name=\"space_engine_room\">\r\n    <inherit name=\"editor_room\" />\r\n    <alias>In Space (Outside Engine Room)</alias>\r\n    <description>You approach the aft section of the ship and you can see the enormous engine nacelles sticking out of the Scion. You can't help but feel awed by the sight.</description>\r\n    <exit alias=\"northwest\" to=\"space_cargo_bay\">\r\n      <inherit name=\"northwestdirection\" />\r\n    </exit>\r\n    <exit alias=\"north\" to=\"space_mess_deck\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n    <object name=\"hull\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"container_closed\" />\r\n      <alias>hull</alias>\r\n      <feature_usegive />\r\n      <feature_container />\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Use</value>\r\n      </displayverbs>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <inroomdescription type=\"string\"></inroomdescription>\r\n      <prefix>the</prefix>\r\n      <look type=\"script\">\r\n        msg (\"The hull outside the Engine Room shows damage that could only have been caused by some kind of weapons fire. Luckily, the damage seems to be minor.\")\r\n        if (hull.isopen = true and eng_door.locked = true) {\r\n          msg (\"A long thin gash runs along the hull, where you cut in with your plasma torch.\")\r\n        }\r\n        else if (hull.isopen=true and eng_door.locked = false) {\r\n          msg (\"You admire your handiwork, noting that the cut you made previously has been expertly sealed.\")\r\n        }\r\n      </look>\r\n      <use type=\"script\">\r\n        if (plasma_torch.parent = player) {\r\n          if (not hull.isopen) {\r\n            msg (\"Using the plasma torch, you begin cutting through the Scion's hull. As soon as you pierce through, a jet of air begins spraying out through the gap. You continue cutting until the atmosphere from the Engine Room has completely vented into space. Without any air left inside, the fire won't be able to sustain itself.\")\r\n            HelperOpenObject (hull)\r\n            IncreaseScore (1)\r\n          }\r\n          else {\r\n            firsttime {\r\n              msg (\"With all of the air vented into space and the fire extinguished, you use the plasma torch to seal the cut you made.\")\r\n              UnlockExit (eng_door)\r\n              IncreaseScore (1)\r\n            }\r\n            otherwise {\r\n              msg (\"The hull remains well sealed. No further work is required.\")\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          msg (\"You don't have any tool that would let you work on the hull.\")\r\n        }\r\n      </use>\r\n    </object>\r\n  </object>\r\n  <object name=\"space_mess_deck\">\r\n    <inherit name=\"editor_room\" />\r\n    <description>You make your way around the hull to the section outside the Mess Deck. The ship was clearly fired upon by some kind of energy weapon. Minor damage is visible in several locations.</description>\r\n    <alias>In Space (Outside Mess Deck)</alias>\r\n    <exit alias=\"southwest\" to=\"space_cargo_bay\">\r\n      <inherit name=\"southwestdirection\" />\r\n    </exit>\r\n    <exit alias=\"south\" to=\"space_engine_room\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n    <object name=\"hull_breach\">\r\n      <inherit name=\"editor_object\" />\r\n      <alias>gaping tear in the hull</alias>\r\n      <inroomdescription>The worst of the damage caused a hull breach, running parallel to the Scion's long axis.</inroomdescription>\r\n      <look>A long, but very narrow gash. You're confident that you could repair the damage, if you had the right tool. Assuming you don't get fired on while you are helplessly exposed...</look>\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Use</value>\r\n      </displayverbs>\r\n      <feature_usegive />\r\n      <use type=\"script\">\r\n        if (plasma_torch.parent = player) {\r\n          msg (\"Carefully bracing yourself against the hull, you begin welding the gash closed with the plasma torch. Your visor automatically darkens to protect your eyes from the intense light. Despite your suit's insulated gloves, your hands heat up and become sweaty in short order. It is slow going, but you persevere and succeed in sealing the breach.\")\r\n          RemoveObject (hull_breach)\r\n          UnlockExit (mess_door)\r\n          IncreaseScore (1)\r\n        }\r\n        else {\r\n          msg (\"You can't do much about the breach without the right tool.\")\r\n        }\r\n      </use>\r\n    </object>\r\n    <object name=\"alien_ship\">\r\n      <inherit name=\"editor_object\" />\r\n      <alias>Unidentified Object</alias>\r\n      <inroomdescription>In the distance, a twinkling light catches your eye. </inroomdescription>\r\n      <look>It is much too faint to be a star or planet. It could be another spaceship.</look>\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n      </displayverbs>\r\n    </object>\r\n  </object>\r\n  <verb>\r\n    <property>exitsuit</property>\r\n    <pattern>exit suit</pattern>\r\n    <defaultexpression>\"You can't exit suit \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <verb>\r\n    <property>removesuit</property>\r\n    <pattern>remove suit</pattern>\r\n    <defaultexpression>\"You can't remove suit \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <verb>\r\n    <property>dropsuit</property>\r\n    <pattern>drop suit</pattern>\r\n    <defaultexpression>\"You can't drop suit \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <verb>\r\n    <property>stand</property>\r\n    <pattern>stand</pattern>\r\n    <defaultexpression>\"You can't stand \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <turnscript name=\"mobileScore\">\r\n    <enabled />\r\n    <script><![CDATA[\r\n      JS.eval (\"$('#custom-score-div').html('\" + Chr(60) + \"br/>Score: \" + ProcessText(\"{game.score}\") + \"');\")\r\n    ]]></script>\r\n  </turnscript>\r\n  <turnscript name=\"nautical_buttons_turnscript\">\r\n    <enabled />\r\n    <script><![CDATA[\r\n      // Version 2\r\n      if (ListCount(FilterByAttribute (ListParents(game.pov), \"shiptype\", true)) > 0) {\r\n        list = NewStringList()\r\n        foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\r\n          list add (list, exit.alias)\r\n        }\r\n        JS.updateShipCompass (Join(list, \"/\"))\r\n      }\r\n    ]]></script>\r\n  </turnscript>\r\n  <object name=\"js\">\r\n    <inherit name=\"editor_room\" />\r\n    <description><![CDATA[var onBoard = false;<br/>var shipButtons = '<div id=\"dir-holder\" style=\"display:none;\"><div id=\"ship-nav\"><table id=\"ship-directions\"><tr><td></td><td>';<br/>shipButtons += '<button id=\"cmdCompassF\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"fore\" onclick=\"compassClick(\\'fore\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-n\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr>';<br/>shipButtons += '<tr><td><button id=\"cmdCompassP\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"port\" onclick=\"compassClick(\\'port\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-w\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></td><td></td><td></button>';<br/>shipButtons += '<button id=\"cmdCompassSB\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"starboard\" onclick=\"compassClick(\\'starboard\\');\" role=\"button\"><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-e\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr>';<br/>shipButtons += '<tr><td></td><td><button id=\"cmdCompassA\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"aft\" onclick=\"compassClick(\\'aft\\');\" role=\"button\" ><span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-s\" style=\"left: 0.8em;\"></span><span class=\"ui-button-text\" style=\"left: 0.8em;\"></span></button></td></tr></table>';<br/>shipButtons += '</div></div>';<br/>function changeCompass(){<br/>  $('body').append(shipButtons);<br/>  $(\"#ship-directions\").css(\"border-spacing\",\"0\");<br/>  $(\"#cmdCompassNW\").parent().parent().parent().attr('id','def-nav');<br/>  $('#ship-nav').hide();$('#def-nav').parent().append($('#dir-holder').html());<br/>  $(\".shipcompassbutton\").each(function(){<br/>    $(this).button().button(\"enable\").button(\"disable\");<br/>    $(\".shipcompassbutton span\").css(\"left\", \"0.8em\");$(\".shipcompassbutton .ui-button-text\").css('padding','.8em .8em');<br/>  });<br/>};<br/>function toggleNav(){<br/>  $(\"#def-nav, #ship-nav\").toggle()<br/>};<br/>function updateShipCompass(data){<br/>  var exits = data.split(\"/\");<br/>  $(\".shipcompassbutton\").each(function(){<br/>    for (var exit in exits){<br/>      if($(this).attr('title') === exits[exit]){<br/>        $(this).button(\"enable\");<br/>        break;<br/>      }else{<br/>        $(this).button(\"disable\");<br/>      }<br/>    }<br/>  });<br/>};]]></description>\r\n  </object>\r\n  <object name=\"scion\">\r\n    <attr name=\"feature_startscript\" type=\"boolean\">false</attr>\r\n    <attr name=\"_initialise_\" type=\"script\">\r\n    </attr>\r\n    <object name=\"cryo_quarters\">\r\n      <inherit name=\"editor_room\" />\r\n      <description>Row upon row of pods, each housing a crew member in cryogenic suspension, surrounds you. Even outside the pods, the room is cold. The sound of dripping water can be heard in the distance. A ladder leads down to the Crew Quarters.</description>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <descprefix type=\"string\"></descprefix>\r\n      <alias>Cryo Quarters</alias>\r\n      <dropdestination type=\"object\">cryo_quarters</dropdestination>\r\n      <firstenter type=\"script\">\r\n      </firstenter>\r\n      <beforeenter type=\"script\">\r\n      </beforeenter>\r\n      <exit name=\"ladder down\" alias=\"down\" to=\"crew_quarters\">\r\n        <inherit name=\"downdirection\" />\r\n      </exit>\r\n      <object name=\"cryo_pod\">\r\n        <inherit name=\"container_closed\" />\r\n        <inroomdescription>Your cryo pod stands out from the rows of identical, but sealed and occupied, pods nearby.</inroomdescription>\r\n        <feature_container />\r\n        <isopen type=\"boolean\">false</isopen>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n        </displayverbs>\r\n        <transparent type=\"boolean\">false</transparent>\r\n        <openmsg>The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out and quickly dissipates.</openmsg>\r\n        <closemsg>The glass cover rotates into place, sealing the cryo pod. A quiet hum is audible as the pod activates its cryo sleep cycle.</closemsg>\r\n        <listchildren />\r\n        <visible type=\"boolean\">false</visible>\r\n        <alias>cryo pod</alias>\r\n        <close type=\"boolean\">false</close>\r\n        <look>A cylindrical capsule with a sliding glass cover, sized to contain a single person. Inside is a variety of vital sign sensors used to adjust the cryogenic stasis of its occupant.</look>\r\n        <dropdestination type=\"object\">cryo_pod</dropdestination>\r\n        <openscript type=\"script\">\r\n          msg (\"The cylindrical glass cover rotates with a hiss. As the pod opens to the surrounding room, a cloud of vapour floats out and quickly dissipates.\")\r\n          firsttime {\r\n            create exit (\"pod door\", cryo pod, Cryo Quarters, out)\r\n            msg (\"You climb out of the pod carefully, making sure not to overexert your sluggish muscles. You still feel woozy from the effects of cryo sleep, but your senses are slowly returning to normal.\")\r\n            MoveObject (player, Cryo Quarters)\r\n          }\r\n        </openscript>\r\n        <closescript type=\"script\">\r\n          msg (\"The cylindrical glass cover rotates, sealing the cryo pod.\")\r\n        </closescript>\r\n        <onopen type=\"script\">\r\n          HelperOpenObject (cryo_pod)\r\n        </onopen>\r\n        <description type=\"script\">\r\n          firsttime {\r\n            msg (\"You awake from a deep slumber, struggling to make sense of your perceptions. You are lying on your back, inside a small container. It is dark, and cold. As your consciousness returns, you manage to identify your surroundings as a cryo pod. You begin to remember climbing into it, in preparation for a long cryo sleep, while the Scion travelled to the Alpha Centauri system. Why have you been awakened? Has the Scion reached its destination? Is it time to begin founding a new colony?\")\r\n          }\r\n          otherwise {\r\n            msg (\"The cryo pod still feels cold, even though the cryo sleep function has clearly been disabled. \")\r\n          }\r\n        </description>\r\n        <onclose type=\"script\">\r\n          HelperCloseObject (cryo_pod)\r\n        </onclose>\r\n        <firstenter type=\"script\">\r\n        </firstenter>\r\n        <beforeenter type=\"script\">\r\n          JS.toggleNav ()\r\n          do (nautical_buttons_turnscript, \"script\")\r\n        </beforeenter>\r\n        <object name=\"player\">\r\n          <inherit name=\"editor_object\" />\r\n          <inherit name=\"editor_player\" />\r\n          <inherit name=\"namedmale\" />\r\n          <alias>Crewman Shepherd</alias>\r\n          <usedefaultprefix />\r\n          <look type=\"string\"></look>\r\n          <visible type=\"boolean\">false</visible>\r\n          <attr name=\"pov_look\">You're dressed in a standard-issue jump suit, with the Scion's mission crest over your left pectoral.</attr>\r\n          <maxvolume type=\"int\">1</maxvolume>\r\n          <containerfullmessage>You can't carry any more. Your jumpsuit doesn't have any pockets.</containerfullmessage>\r\n        </object>\r\n        <exit alias=\"out\" to=\"cryo_quarters\">\r\n          <inherit name=\"outdirection\" />\r\n          <locked type=\"boolean\">false</locked>\r\n          <lockmessage>The cryo pod is sealed. </lockmessage>\r\n          <runscript />\r\n          <script type=\"script\">\r\n            if (not ListContains(ScopeVisible(), cryo_pod)) {\r\n              if (not cryo_pod.isopen) {\r\n                msg (\"Your mind still fuzzy from the effects of prolonged cryo sleep, you push against the cryo pod's glass cover to no avail. As you slowly regain your faculties, you remember your training. Opening the cryo pod, as well as perfoming many other actions aboard the Scion, requires issuing verbal commands to the ship's computer.\")\r\n                SetTimeout (2) {\r\n                  JS.eval (\"if (typeof (currentTab) !== 'string') {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the top right to issue verbal commands to the ship's computer.\\\");} else {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the bottom to issue verbal commands to the ship's computer.\\\");}\")\r\n                  JS.scrollToEnd ()\r\n                }\r\n              }\r\n              else {\r\n                firsttime {\r\n                  msg (\"You climb out of the pod carefully, making sure not to overexert your sluggish muscles. You still feel woozy from the effects of cryo sleep, but your senses are slowly returning to normal.\")\r\n                  IncreaseScore (1)\r\n                }\r\n                otherwise {\r\n                  msg (\"\")\r\n                }\r\n                MakeObjectVisible (cryo_pod)\r\n                MoveObject (player, cryo_quarters)\r\n                JS.toggleNav ()\r\n                MoveObject (player, this.to)\r\n              }\r\n            }\r\n            else {\r\n              MoveObject (player, cryo_quarters)\r\n            }\r\n          </script>\r\n        </exit>\r\n      </object>\r\n      <exit alias=\"in\" to=\"cryo_pod\">\r\n        <inherit name=\"indirection\" />\r\n      </exit>\r\n      <object name=\"captain_pod\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_closed\" />\r\n        <inherit name=\"container_lockable\" />\r\n        <feature_container />\r\n        <close type=\"boolean\">false</close>\r\n        <listchildren />\r\n        <inroomdescription>You are also able to identify Captain Picker's cryo pod.</inroomdescription>\r\n        <look>A cylindrical capsule with a sliding glass cover, identical to the one you crawled out of.</look>\r\n        <alias>Captain Picker's cryo pod</alias>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Open</value>\r\n        </displayverbs>\r\n        <listchildrenprefix>Inside is</listchildrenprefix>\r\n        <openmsg>The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out and quickly dissipates.</openmsg>\r\n        <closemsg>The glass cover rotates into place, sealing the cryo pod. A quiet hum is audible as the pod activates its cryo sleep cycle.</closemsg>\r\n        <autounlock type=\"boolean\">false</autounlock>\r\n        <autoopen type=\"boolean\">false</autoopen>\r\n        <transparent />\r\n        <hidechildren />\r\n        <feature_startscript />\r\n        <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n        <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n          captain_pod.openscript => {\r\n            if (not this.locked and not this.isopen) {\r\n              captain_pod.isopen = true\r\n              captain.state = \"awake\"\r\n              MoveObject (captain, cryo_quarters)\r\n              msg (\"The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out. As it dissipates, you can see {object:captain} slowly climbing out of his pod.\")\r\n            }\r\n            else if (not this.locked and this.isopen) {\r\n              msg (\"It is already open.\")\r\n            }\r\n            else {\r\n              msg (\"An error chimes sounds from the ship's computer.<br/>\\\"Life support at critical levels. Restore main power in order to revive additional crew members.\\\"\")\r\n            }\r\n          }\r\n        ]]></attr>\r\n        <object name=\"captain\">\r\n          <inherit name=\"editor_object\" />\r\n          <inherit name=\"namedmale\" />\r\n          <alias>Captain Picker</alias>\r\n          <displayverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n          </displayverbs>\r\n          <look type=\"script\">\r\n            switch (captain.state) {\r\n              case (\"asleep\") {\r\n                msg (\"You examine Captain Picker as he sleeps. He is in his fifties, bald, with sharp, angular features and a stern demeanour which is not diminished by his peaceful state.\")\r\n              }\r\n              case (\"awake\") {\r\n                msg (\"Captain Picker rubs his face groggily with boths hands. He is in his fifties, bald, with sharp, angular features and a stern demeanour.\")\r\n              }\r\n              case (\"hurt\") {\r\n                msg (\"Captain Picker lays in a heap on the floor. He appears to have been knocked unconscious and you see an angry red mark on his bald head.\")\r\n              }\r\n              case (\"combat\") {\r\n                msg (\"Captain Picker is scanning the instrumentation output on the console integrated into the Captain's Chair and braking commands at the ship's computer to evade the hostile vessel incoming fire and mitigate damage.\")\r\n              }\r\n            }\r\n          </look>\r\n          <speak type=\"script\">\r\n            talkToCaptain\r\n          </speak>\r\n          <ask type=\"scriptdictionary\">\r\n            <item key=\"health\">\r\n            </item>\r\n          </ask>\r\n        </object>\r\n      </object>\r\n    </object>\r\n    <object name=\"crew_quarters\">\r\n      <inherit name=\"editor_room\" />\r\n      <description>Dozens of rows of bunk beds fill the room, all unnoccupied. The beds are made and ready for use. Once the crew is awakened from cryogenic sleep, this will become their new sleeping area. The cold air from the cryo quarters above can be felt drifting down the ladder.</description>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <descprefix type=\"string\"></descprefix>\r\n      <alias>Crew Quarters</alias>\r\n      <dropdestination type=\"object\">crew_quarters</dropdestination>\r\n      <firstenter type=\"script\">\r\n      </firstenter>\r\n      <beforeenter type=\"script\">\r\n      </beforeenter>\r\n      <exit name=\"ladder up\" alias=\"up\" to=\"cryo_quarters\">\r\n        <inherit name=\"updirection\" />\r\n      </exit>\r\n      <exit alias=\"west\" to=\"aft_corridor\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <object name=\"locker\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_closed\" />\r\n        <feature_container />\r\n        <inroomdescription>A row of lockers lines the far wall. </inroomdescription>\r\n        <look>You recognize the locker designated for your use.</look>\r\n        <listchildren />\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n          <value>Open</value>\r\n          <value>Close</value>\r\n        </inventoryverbs>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Open</value>\r\n          <value>Close</value>\r\n        </displayverbs>\r\n        <openmsg>The locker opens with a metallic squeak.</openmsg>\r\n        <object name=\"space_suit\">\r\n          <inherit name=\"editor_object\" />\r\n          <inherit name=\"wearable\" />\r\n          <alias>space suit</alias>\r\n          <feature_wearable />\r\n          <take />\r\n          <attr name=\"wear_layer\" type=\"int\">0</attr>\r\n          <wearmsg>You climb into the suit, piece by piece. You painstakingly verify every joint and seal, completing the pre-EVA checklist drilled into you during your training.</wearmsg>\r\n          <removemsg>You remove the suit, struggling your way out of each section, until you are down to just your jump suit once again.</removemsg>\r\n          <inventoryverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n            <value>Suit Up</value>\r\n            <value>Remove Suit</value>\r\n            <value>Drop Suit</value>\r\n          </inventoryverbs>\r\n          <volume type=\"int\">0</volume>\r\n          <look type=\"script\">\r\n            msg (\"It is a Mark IV, extra vehicular activity suit, with integrated grappling harness and air supply. \")\r\n            if (air_tank.isopen = true) {\r\n              msg (\"The air tank is currently empty.\")\r\n            }\r\n            else {\r\n              msg (\"The air tank is full.\")\r\n            }\r\n          </look>\r\n          <suitup type=\"script\">\r\n            if (air_tank.isopen = true) {\r\n              msg (\"Putting on the space suit with no air in the tank would doom you to suffocation.\")\r\n            }\r\n            else {\r\n              msg (\"You climb into the suit, piece by piece. You painstakingly verify every joint and seal, completing the pre-EVA checklist drilled into you during your training.\")\r\n              space_suit.worn = true\r\n            }\r\n          </suitup>\r\n          <dropsuit type=\"script\">\r\n            if (space_suit.worn = true) {\r\n              msg (\"You must remove the suit before dropping it.\")\r\n            }\r\n            else {\r\n              msg (\"You drop it.\")\r\n              MoveObjectHere (space_suit)\r\n            }\r\n          </dropsuit>\r\n          <removesuit type=\"script\">\r\n            if (player.parent=space_cargo_bay or player.parent=space_mess_deck or player.parent=space_engine_room) {\r\n              msg (\"Removing your space suit while in space would be suicide.\")\r\n            }\r\n            else {\r\n              msg (\"You remove the suit, struggling your way out of each section, until you are down to just your jump suit once again.\")\r\n              SetObjectFlagOff (space_suit, \"worn\")\r\n            }\r\n          </removesuit>\r\n          <object name=\"air_tank\">\r\n            <inherit name=\"editor_object\" />\r\n            <inherit name=\"container_limited\" />\r\n            <scenery type=\"boolean\">false</scenery>\r\n            <visible type=\"boolean\">false</visible>\r\n            <feature_container />\r\n          </object>\r\n        </object>\r\n      </object>\r\n    </object>\r\n    <object name=\"aft_corridor\">\r\n      <inherit name=\"editor_room\" />\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <alias>Aft Corridor</alias>\r\n      <dropdestination type=\"object\">aft_corridor</dropdestination>\r\n      <description type=\"script\">\r\n        msg (\"The corridor in the aft section of the Scion is wide enough for several people to walk side by side. Off to port is the Cargo Bay, the Crew Quarters are starboard, heading aft leads to the engine room, while the rest of the ship is to the fore.\")\r\n        if (eng_door.locked = true) {\r\n          msg (\"You can smell smoke coming from the aft direction.\")\r\n        }\r\n      </description>\r\n      <exit alias=\"east\" to=\"crew_quarters\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n      <exit name=\"eng_door\" alias=\"south\" to=\"engine_room\">\r\n        <locked />\r\n        <lockmessage>As you approach the engine room, the door does not slide open automatically. Thin tendrils of smoke are seeping around the door seal and you can feel intense heat coming from the other side.</lockmessage>\r\n      </exit>\r\n      <exit alias=\"west\" to=\"cargo_bay\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <exit alias=\"north\" to=\"fore_corridor\">\r\n        <inherit name=\"northdirection\" />\r\n      </exit>\r\n    </object>\r\n    <object name=\"engine_room\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Engine Room</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description type=\"script\"><![CDATA[\r\n        firsttime {\r\n          msg (\"As the door to the Engine Room begins to slide open, you brace yourself. If the fire damage was bad enough, you may be walking into a radioactive disaster zone. Even if you aren't immediately killed, a damaged engine could mean the Scion is about to become dead in space, dooming you and the sleeping crew to float in a cold, lonely grave for centuries. <br/><br/>When the door does open, you are relieved to see the shining blue light of the containment field. Everything within it, crucially including the engine itself, was spared from the fire. The damage to the rest of the room is extensive, but you can't worry about that right now.\")\r\n        }\r\n        msg (\"The room is peppered with black soot and the acrid smell of smoke is almost overpowering.\")\r\n      ]]></description>\r\n      <exit alias=\"north\" to=\"aft_corridor\">\r\n        <inherit name=\"northdirection\" />\r\n      </exit>\r\n      <object name=\"containment_field\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_closed\" />\r\n        <look>The translucent field shimmers as you inspect it. It is holding steady, at full strength.</look>\r\n        <inroomdescription>A glowing, blue containment field protects a cynlindrical volume within the Engine Room. Everything inside the field appears pristine, having been untouched by the fire.</inroomdescription>\r\n        <feature_container />\r\n        <open type=\"boolean\">false</open>\r\n        <close type=\"boolean\">false</close>\r\n        <transparent />\r\n        <alias>containment field</alias>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Open</value>\r\n        </displayverbs>\r\n        <openmsg type=\"string\"></openmsg>\r\n        <nokeymessage>Lowering the containment field would instantly expose you to dangerous radiation from the engine. </nokeymessage>\r\n        <listchildren />\r\n        <autounlock type=\"boolean\">false</autounlock>\r\n        <autoopen type=\"boolean\">false</autoopen>\r\n        <feature_startscript />\r\n        <listchildrenprefix>Within it are </listchildrenprefix>\r\n        <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n          containment_field.openscript => {\r\n            if (not this.locked and not this.isopen) {\r\n              msg (\"Lowering the containment field would instantly expose you to dangerous radiation from the engine. \")\r\n            }\r\n          }\r\n        ]]></attr>\r\n        <object name=\"engine\">\r\n          <inherit name=\"editor_object\" />\r\n          <inherit name=\"container_closed\" />\r\n          <feature_container />\r\n          <isopen type=\"boolean\">false</isopen>\r\n          <transparent type=\"boolean\">false</transparent>\r\n          <inroomdescription>The advanced fission engine sits in the centre of the containment field.</inroomdescription>\r\n          <feature_switchable />\r\n          <listchildren type=\"boolean\">false</listchildren>\r\n          <displayverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n          </displayverbs>\r\n          <look type=\"script\">\r\n            if (old_rods.parent = engine) {\r\n              msg (\"The engine is operational, but its power output is very low.\")\r\n            }\r\n            else if (new_rods.parent = engine) {\r\n              msg (\"The engine is operating at full capacity. Power output is nominal.\")\r\n            }\r\n            else {\r\n              msg (\"Without any control rods inside, the plasma reactor is offline.\")\r\n            }\r\n          </look>\r\n          <object name=\"old_rods\">\r\n            <inherit name=\"editor_object\" />\r\n            <alias>depleted control rods</alias>\r\n          </object>\r\n        </object>\r\n        <object name=\"RAT\">\r\n          <inherit name=\"editor_object\" />\r\n          <alias>RAT</alias>\r\n          <inroomdescription>A robotacized, automated transport (RAT) is in standby mode.</inroomdescription>\r\n          <displayverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n            <value>Use</value>\r\n          </displayverbs>\r\n          <feature_usegive />\r\n          <look type=\"script\">\r\n            msg (\"The RAT has a four wheeled base, designed for navigating rough terrain. It features a long, flat bed for transporting heavy equipment and a robotic arm for loading and unloading.\")\r\n            if (old_rods.parent = RAT) {\r\n              msg (\"The used control rods sit on top of the RAT's flat bed.\")\r\n            }\r\n            else if (new_rods.parent = RAT) {\r\n              msg (\"The new control rods sit on top of the RAT's flat bed.\")\r\n            }\r\n          </look>\r\n          <use type=\"script\"><![CDATA[\r\n            RATQueries = NewStringList()\r\n            RATQueries = listRATQueries()\r\n            if (ListCount(RATQueries) = 0) {\r\n              msg (\"\\\"Roboticised Automated Transports will respond to verbal commands issued to the ship's computer,\\\" explains the ship's computer. \\\"RAT units can be used to service the Scion's plasma reactor. Verifying current reactor status...\\\"<br/>\")\r\n              engineStatus\r\n            }\r\n            else {\r\n              computerFunction (RATQueries)\r\n            }\r\n          ]]></use>\r\n        </object>\r\n      </object>\r\n      <object name=\"broken_rat\">\r\n        <inherit name=\"editor_object\" />\r\n        <inroomdescription>A robot stands just outside the field, its tires melted and its chassis warped and blackened by the fire. </inroomdescription>\r\n        <look>A quick glance is enough to tell you that extensive reconstruction would be necessary to get this RAT working again.</look>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n        </displayverbs>\r\n        <alias>damaged robot</alias>\r\n      </object>\r\n    </object>\r\n    <object name=\"cargo_bay\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Cargo Bay</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description>The bay is packed with equipment from floor to ceiling. The mission organizer's tried to include everything needed to establish a new colony on a distant, unknown alien world. Any damage to the equipment in here could threaten the success of the mission. At the far end of the cargo bay is an airlock. </description>\r\n      <exit alias=\"east\" to=\"aft_corridor\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n      <exit name=\"airlock\" alias=\"out\" to=\"space_cargo_bay\">\r\n        <inherit name=\"outdirection\" />\r\n        <locked type=\"boolean\">false</locked>\r\n        <lockmessage type=\"string\"></lockmessage>\r\n        <runscript />\r\n        <script type=\"script\">\r\n          if (space_suit.worn = true) {\r\n            msg (\"You open the airlock's inner door and walk inside. The inner door seals itself automatically and the air is quickly sucked out of the room. You check your space suit's systems, and they are all within normal operating parameters. The outer door slides open silently and you cautiously step out into the void.\")\r\n            JS.toggleNav ()\r\n            MoveObject (player, space_cargo_bay)\r\n          }\r\n          else {\r\n            msg (\"Stepping into an airlock without wearing a space suit would be suicide.\")\r\n          }\r\n        </script>\r\n      </exit>\r\n      <object name=\"huge_crate\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_closed\" />\r\n        <inherit name=\"container_lockable\" />\r\n        <alias>huge crate</alias>\r\n        <feature_container />\r\n        <listchildren />\r\n        <nokeymessage>The crate can't be opened with your bare hands.</nokeymessage>\r\n        <unlockmessage>The laser cut through the crate's seals with ease.</unlockmessage>\r\n        <takemsg>The crate is much too massive to be picked up by even the strongest human.</takemsg>\r\n        <close type=\"boolean\">false</close>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Take</value>\r\n          <value>Open</value>\r\n        </displayverbs>\r\n        <keycount type=\"int\">1</keycount>\r\n        <autounlock />\r\n        <autoopen />\r\n        <openmsg>With a solid shove, the top of the crate slides away.</openmsg>\r\n        <key type=\"object\">laser_opener</key>\r\n        <look type=\"script\">\r\n          if (huge_crate.isopen = false) {\r\n            msg (\"The crate is tightly sealed. A label reads \\\"plasma reactor control rods\\\".\")\r\n          }\r\n          else {\r\n            msg (\"The crate has been cut open. The lid lies discarded on the floor nearby. \")\r\n          }\r\n        </look>\r\n        <object name=\"new_rods\">\r\n          <inherit name=\"editor_object\" />\r\n          <inherit name=\"plural\" />\r\n          <alias>new control rods</alias>\r\n          <look>The rods are long, thin cylinders, gunmetal grey in colour. They are in pristine condition and ready for use.</look>\r\n          <takemsg>The rods are too heavy and too numerous for you to handle unaided.</takemsg>\r\n        </object>\r\n      </object>\r\n      <object name=\"plasma_torch\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>plasma torch</alias>\r\n        <look>A heavy duty tool, able to cut through or seal metal plating up to a metre thick.</look>\r\n        <take />\r\n        <volume type=\"int\">1</volume>\r\n        <feature_usegive />\r\n        <use type=\"script\">\r\n          if (plasma_torch.parent = player and player.parent = space_mess_deck and hull_breach.parent = space_mess_deck) {\r\n            msg (\"Carefully bracing yourself against the hull, you begin welding the gash closed with the plasma torch. Your visor automatically darkens to protect your eyes from the intense light. Despite your suit's insulated gloves, your hands heat up and become sweaty in short order. It is slow going, but you persevere and succeed in sealing the breach.\")\r\n            RemoveObject (hull_breach)\r\n            UnlockExit (mess_door)\r\n            IncreaseScore (1)\r\n          }\r\n          else if (plasma_torch.parent = player and player.parent = space_engine_room) {\r\n            if (not hull.isopen) {\r\n              msg (\"Using the plasma torch, you begin cutting through the Scion's hull. As soon as you pierce through, a jet of air begins spraying out through the gap. You continue cutting until the atmosphere from the Engine Room has completely vented into space. Without any air left inside, the fire won't be able to sustain itself.\")\r\n              HelperOpenObject (hull)\r\n              IncreaseScore (1)\r\n            }\r\n            else {\r\n              firsttime {\r\n                msg (\"With all of the air vented into space and the fire extinguished, you use the plasma torch to seal the cut you made.\")\r\n                UnlockExit (eng_door)\r\n                IncreaseScore (1)\r\n              }\r\n              otherwise {\r\n                msg (\"The hull remains well sealed. No further work is required.\")\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            msg (\"You don't see any obvious use for it here.\")\r\n          }\r\n        </use>\r\n      </object>\r\n    </object>\r\n    <object name=\"fore_corridor\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Forward Corridor</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description>The corridor narrows toward the fore of the Scion, allowing only a pair of passengers to walk abreast as it reaches the Bridge at the far end. The Med Bay is on the port side, with the Mess Deck to starboard. Following the corridor aft leads into the Aft Corridor.</description>\r\n      <exit alias=\"south\" to=\"aft_corridor\">\r\n        <inherit name=\"southdirection\" />\r\n      </exit>\r\n      <exit alias=\"north\" to=\"bridge\">\r\n        <inherit name=\"northdirection\" />\r\n        <runscript />\r\n        <script type=\"script\"><![CDATA[\r\n          if (captain.parent = captain_chair) {\r\n            msg (\"As you walk into the Bridge, you see that Captain Picker has already taken up his post in the Captain's Chair. The viewscreen shows a magnified image of the enemy vessel. You've never seen anything like it--it looks like a collection of haphazardly arranged spheres, variously glowing in incomprehensible patterns.<br/><br/>\\\"Shepherd!\\\" shouts the Captain as you walk in. \\\"I'm having the Scion perform evasive maneuvers. I need you to man the weapons and return fire! Step to it man!\\\"\")\r\n            MoveObject (player, bridge)\r\n          }\r\n          else {\r\n            MoveObject (player, bridge)\r\n          }\r\n        ]]></script>\r\n      </exit>\r\n      <exit alias=\"west\" to=\"med_bay\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <exit name=\"mess_door\" alias=\"east\" to=\"mess_deck\">\r\n        <locked />\r\n        <lockmessage>As you approach the door to the Mess Deck, it does not slide open automatically.</lockmessage>\r\n      </exit>\r\n    </object>\r\n    <object name=\"med_bay\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Med Bay</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description>The walls are lined with empty gurneys, ready to receive patients. A variety of medical equipment and robotics are installed in the middle of the room. Medicine is not your area of expertise, so you recognize very few of the devices and know how to operate fewer still.</description>\r\n      <exit alias=\"east\" to=\"fore_corridor\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n      <object name=\"air_compressor\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>air compressor</alias>\r\n        <look>A hefty machine, the air compressor features a hose with a high pressure nozzle and locking mechanism.</look>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </inventoryverbs>\r\n        <feature_usegive />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </displayverbs>\r\n        <use type=\"script\">\r\n          if (space_suit.parent = player and air_tank.isopen = true) {\r\n            msg (\"You connect the air compressor's nozzle to the space suit's air tank and activate the machine. It takes several minutes, but the tank's supply indicator finally goes from red to green.\")\r\n            air_tank.isopen = false\r\n            IncreaseScore (1)\r\n          }\r\n          else if (space_suit.parent=player and air_tank.isopen = false) {\r\n            msg (\"The space suit's air supply is sufficient for several hours of operation and doesn't require any topping up.\")\r\n          }\r\n          else {\r\n            msg (\"You have nothing to use the air compressor on.\")\r\n          }\r\n        </use>\r\n      </object>\r\n      <object name=\"dispensary\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_open\" />\r\n        <alias>medication dispensary</alias>\r\n        <look>The dispensary fills an entire wall of the Med Bay. You remember being taught that it contains an enormous variety of medication, intended to sustain the new colony until new treatments can be developed from the native flora and fauna of your new home. It features a small rectangular opening with a circular receptacle. </look>\r\n        <feature_usegive />\r\n        <feature_container />\r\n        <open type=\"boolean\">false</open>\r\n        <close type=\"boolean\">false</close>\r\n        <transparent />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </displayverbs>\r\n        <listchildren />\r\n        <listchildrenprefix>Docked in the receptacle is </listchildrenprefix>\r\n        <use type=\"script\">\r\n          if (hypospray.parent = player) {\r\n            fillHypo\r\n          }\r\n          else {\r\n            msg (\"You don't have anything to store medication from the dispensary.\")\r\n          }\r\n        </use>\r\n      </object>\r\n    </object>\r\n    <object name=\"bridge\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Bridge</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description>The nerve center of the Scion, the Bridge is dominated by a viewscreen covering the entire curved surface at the front of the room. The captain's chair sits on a slightly raised dais in the rear with a commanding view of the entire Bridge. Between the captain's chair and the screen are several control stations, each one intended to be manned by a senior officer.</description>\r\n      <exit alias=\"south\" to=\"fore_corridor\">\r\n        <inherit name=\"southdirection\" />\r\n      </exit>\r\n      <object name=\"captain_chair\">\r\n        <inherit name=\"surface\" />\r\n        <inherit name=\"editor_object\" />\r\n        <feature_container />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Stand</value>\r\n        </displayverbs>\r\n        <look>It features the most advanced ergonomics ever developed by humanity, and is made from the most advanced materials, making it comfortable for extended periods of time. It features a control panel built into the right armrest. It also includes a safety harness to ensure its occupant cannot be inadvertently ejected. It is one excellent chair.</look>\r\n        <alias>Captain's Chair</alias>\r\n        <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n        <prefix>the</prefix>\r\n        <sit type=\"script\">\r\n          if (captain.parent = captain_chair) {\r\n            msg (\"The Captain gives you a brief, but eloquent look. You quickly back away from the chair.\")\r\n          }\r\n          else {\r\n            msg (\"Looking over your shoulder despite yourself, you take a seat in the Captain's Chair. It feels good. You could definitely get used to this.\")\r\n            game.gridmap = false\r\n            MoveObject (player, captain_chair)\r\n          }\r\n        </sit>\r\n        <stand type=\"script\">\r\n          if (player.parent = captain_chair) {\r\n            msg (\"Reluctantly, you stand up, leaving the comfort of the Captain's Chair behind.\")\r\n            MoveObject (player, bridge)\r\n            game.gridmap = true\r\n          }\r\n          else {\r\n            msg (\"You cannot stand up from the chair unless you sit down first.\")\r\n          }\r\n        </stand>\r\n      </object>\r\n      <object name=\"weapon_controls\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>weapons control station</alias>\r\n        <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n        <prefix>the </prefix>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </displayverbs>\r\n        <feature_usegive />\r\n        <look type=\"script\">\r\n          msg (\"The panel displays status information regarding the Scion's complement of defensive weaponry. The ship's mission may be colonization of a new world, but the mission planners were not so naÃ¯ve as to think that peaceful intentions would preclude the occasional need for force.\")\r\n          if (new_rods.parent = engine) {\r\n            msg (\"With full power restored, the Scion's full array of weapons is available and ready for use.\")\r\n          }\r\n          else {\r\n            msg (\"With main power at critical, all weapon functions have been disabled.\")\r\n          }\r\n        </look>\r\n        <use type=\"script\"><![CDATA[\r\n          if (captain.parent = captain_chair) {\r\n            play sound (\"tos_phasersstrikingdeflectorshields.mp3\", false, false)\r\n            msg (\"You take control of the panel and with the computer's help, you acquire the enemy vessel.<br/><br/>\\\"Target acquired!\\\" you shout over the sound of the Scion taking another hit.<br/><br/>\\\"Fire!\\\" Picker shouts back at you.<br/><br/>You jab the control panel and immediately hear and feel the vibrations throughout the Scion as the heavy lasers are activated. Searing red lines appear on the viewscreen, connecting with the enemy vessel. It attempts to maneouvre away, but the tracking sensors keep the lasers on target. Explosions blossom across the vessel's hull and in a dazzling display of colours, the ship's breaks apart.<br/><br/>\\\"Target neutralized,\\\" you announce with relief.<br/><br/>\\\"Well done,\\\" replies Captain Picker. \\\"You've earned yourself a field promotion for saving the Scion. Now let's wake up the rest of the crew and complete our mission.\\\"<br/><br/>Congratulations!\")\r\n            RemoveObject (alien_ship)\r\n            IncreaseScore (5)\r\n            finish\r\n          }\r\n          else if (new_rods.parent = engine and player.parent <> captain_chair) {\r\n            play sound (\"computerbeep_1.mp3\", false, false)\r\n            msg (\"As soon as you begin to manipulate the controls, an error chime sounds.<br/><br/>\\\"Unauthorized use of weapons systems detected. Senior officer approval is required.\\\"\")\r\n          }\r\n          else if (player.parent = captain_chair) {\r\n            msg (\"You can't reach the weapons control panel from the Captain's Chair.\")\r\n          }\r\n          else {\r\n            msg (\"The panel displays only a warning about the main power levels being critical.\")\r\n          }\r\n        ]]></use>\r\n      </object>\r\n      <object name=\"sensors\">\r\n        <inherit name=\"editor_object\" />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </displayverbs>\r\n        <feature_usegive />\r\n        <alias>sensors control station</alias>\r\n        <look type=\"script\">\r\n          msg (\"The panel displays internal and external sensor readings. Sensor logs can also be retrieved.\")\r\n        </look>\r\n        <use type=\"script\"><![CDATA[\r\n          if (player.parent = captain_chair) {\r\n            msg (\"You can't reach the sensors panel from the Captain's Chair.\")\r\n          }\r\n          else {\r\n            readings = NewStringList()\r\n            list add (readings, \"Internal Sensor Array\")\r\n            list add (readings, \"External Sensor Array\")\r\n            list add (readings, \"Sensor Logs\")\r\n            ShowMenu (\"\\\"Select sensor information to display,\\\" the computer asks in response to you activating the panel.\", readings, true) {\r\n              switch (result) {\r\n                case (\"Internal Sensor Array\") {\r\n                  internalStatus\r\n                }\r\n                case (\"External Sensor Array\") {\r\n                  play sound (\"alarm03.mp3\", false, false)\r\n                  msg (\"\\\"Warning: hostile vessel detected,\\\" states the computer.<br/><br/>The Scion's passive sensors are detecting intermittent energy readings from the direction of the unknown vessel. Although it is hard to be sure, given the ship's unknown origins, it would seem that it is not operating at normal capacity.<br/><br/>Active sensors show the unknown ship's size to be smaller than the Scion. Its hull design resembles a collection of spheres welded together without any clear pattern. <br/><br/>Sensors also show a planet, approximately one light month away.\")\r\n                }\r\n                case (\"Sensor Logs\") {\r\n                  ClearScreen\r\n                  msg (\"You skim through years of automated log entries detailing normal ship functions and minor glitches. Eventually, you discover today's log entry.\")\r\n                  TextFX_Typewriter (\"Unknown energy signature detected.<br>Incoming weapons fire detected.<br>Damage to aft hull detected. Initiating defensive counter measures. <br>Hull breach detected on Mess Deck. Innervating Chief Engineer Dawson.<br>Power surge detected. Chief Engineer Dawson life signs failing. Innervating Crewman Shepherd.<br>Explosive discharge detected aboard hostile vessel. <br>Power surge detected in plasma reactor. Fire detected in engine room. Unable to continue defensive countermeasures.\", 50)\r\n                  ShowRoomDescription\r\n                  IncreaseScore (1)\r\n                }\r\n                default {\r\n                  play sound (\"computerbeep_1.mp3\", false, false)\r\n                  msg (\"\\\"Invalid selection,\\\" the computer replies.\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n        ]]></use>\r\n      </object>\r\n      <object name=\"propulsion_controls\">\r\n        <inherit name=\"editor_object\" />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Use</value>\r\n        </displayverbs>\r\n        <feature_usegive />\r\n        <alias>propulsion controls station</alias>\r\n        <look type=\"script\">\r\n          msg (\"The panel displays status information regarding the Scion's propulsion systems.\")\r\n          if (new_rods.parent = engine) {\r\n            msg (\"With full power restored, the Scion's propulsion systems are active.\")\r\n          }\r\n          else {\r\n            msg (\"With main power at critical, the Scion is adrift.\")\r\n          }\r\n        </look>\r\n        <use type=\"script\"><![CDATA[\r\n          if (new_rods.parent = engine and player.parent <> captain_chair) {\r\n            msg (\"The Scion's propulsion systems are active.\")\r\n          }\r\n          else if (player.parent = captain_chair) {\r\n            msg (\"You can't reach the propulsion control panel from the Captain's Chair.\")\r\n          }\r\n          else {\r\n            msg (\"The panel displays only a warning about the main power levels being critical.\")\r\n          }\r\n        ]]></use>\r\n      </object>\r\n    </object>\r\n    <object name=\"mess_deck\">\r\n      <inherit name=\"editor_room\" />\r\n      <alias>Mess Deck</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <description>The large open area was designed to give the crew a break from the functional, confined spaces of the rest of the ship. Floor to ceiling windows line the deck, giving an incredible view of the stars. Recent exposure to vacuum has left the deck in a sorry state, with whatever objects that were unable to fit through the hull breach now strewn across the deck. Only the bar and the tables, which are bolted to the deck, remain where they belong.</description>\r\n      <exit alias=\"west\" to=\"fore_corridor\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <object name=\"laser_opener\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>laser cutter</alias>\r\n        <look>A low-power, handheld laser cutter. Looks like its batteries are included.</look>\r\n        <volume type=\"int\">1</volume>\r\n        <take />\r\n        <feature_usegive />\r\n        <use type=\"script\">\r\n          if (laser_opener.parent=player and player.parent=cargo_bay) {\r\n            msg (\"The laser cut through the crate's seals with ease.\")\r\n            huge_crate.locked = false\r\n            HelperOpenObject (huge_crate)\r\n          }\r\n          else {\r\n            msg (\"A laser cutter must be used with care, especially on a space ship. There is no useful target for it here.\")\r\n          }\r\n        </use>\r\n      </object>\r\n      <object name=\"coffee\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>instant coffee canister</alias>\r\n        <volume type=\"int\">1</volume>\r\n        <look>One of the modern wonders of the world: an apparatus containing instant coffee, water and a mechanism able to combine and heat them into a ready-to-serve beverage with a simple twist of the wrist and a few moments of patience. If only they could make it taste good... </look>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Drop</value>\r\n          <value>Give</value>\r\n        </inventoryverbs>\r\n        <usestandardverblist />\r\n        <take />\r\n        <feature_usegive />\r\n        <givesingle type=\"script\">\r\n          if (player.parent = bridge and captain.parent = captain_chair or player.parent = cryo_quarters and captain.parent = captain_pod) {\r\n            RemoveObject (coffee)\r\n            msg (\"You twist the container's top, instantly mixing and heating its contents into passable coffee, and hand it to the Captain. He glances at you and grabs the container, favouring you with a half smile.\")\r\n            IncreaseScore (1)\r\n          }\r\n          else {\r\n            msg (\"There is no one to give this too. \")\r\n          }\r\n        </givesingle>\r\n      </object>\r\n      <object name=\"hypospray\">\r\n        <inherit name=\"editor_object\" />\r\n        <look>A glass and metal cylinder the size of your hand. You remember from your training that it can be used to administer any kind of medication.</look>\r\n        <take />\r\n        <volume type=\"int\">1</volume>\r\n        <feature_usegive />\r\n        <use type=\"script\"><![CDATA[\r\n          if (hypospray.parent = player and player.parent = med_bay) {\r\n            fillHypo\r\n          }\r\n          else if (hypospray.parent = player and player.parent = cryo_quarters and captain.state = \"hurt\" and hypospray.med <> \"empty\") {\r\n            msg (\"You kneel and administer the hypospray to the unconscious form of Captain Picker.\")\r\n            if (hypospray.med = \"stimulant\") {\r\n              msg (\"His eyes flutter and finally open. He props himself up, rubbing his head. <br/><br/>\\\"What happened?\\\" he asks, wincing as he touches his bruised head.\")\r\n              captain.state = \"healed\"\r\n              IncreaseScore (1)\r\n              talkToCaptain\r\n            }\r\n            else {\r\n              msg (\"The medication does not seem to have any effect.\")\r\n            }\r\n            hypospray.med = \"empty\"\r\n          }\r\n          else if (hypospray.med = \"empty\") {\r\n            msg (\"The hypospray won't do anyone much good while it is empty.\")\r\n          }\r\n          else {\r\n            msg (\"You consider injecting yourself, but then decide it wouldn't be advisable under the circumstances.\")\r\n          }\r\n        ]]></use>\r\n      </object>\r\n    </object>\r\n  </object>\r\n  <function name=\"shipStatus\">\r\n    if (alien_ship.parent = space_mess_deck) {\r\n      play sound (\"alarm03.mp3\", false, false)\r\n      msg (\"Warning: hostile vessel detected\")\r\n    }\r\n    internalStatus\r\n  </function>\r\n  <function name=\"listComputerQueries\" type=\"stringlist\">\r\n    queries = NewStringList()\r\n    list add (queries, \"State ship status\")\r\n    if (player.parent = cryo_pod) {\r\n      list add (queries, \"Open cryo pod\")\r\n    }\r\n    if (eng_door.locked = true and player.parent = aft_corridor) {\r\n      list add (queries, \"Extinguish fire in Engine Room\")\r\n    }\r\n    if (player.parent = fore_corridor) {\r\n      list add (queries, \"Override door to Mess Deck\")\r\n    }\r\n    if (player.parent=engine_room) {\r\n      list add (queries, \"State engine status\")\r\n    }\r\n    queries = ListCombine(queries, listRATQueries())\r\n    return (queries)\r\n  </function>\r\n  <function name=\"walkthrough\">\r\n    msg (\"Starting test...\")\r\n    UnlockExit (eng_door)\r\n    HelperOpenObject (huge_crate)\r\n    MoveObject (player, cryo_quarters)\r\n    RemoveObject (old_rods)\r\n    MoveObject (new_rods, engine)\r\n    MoveObject (hypospray, player)\r\n    hypospray.med = \"stimulant\"\r\n    captain_pod.locked = false\r\n    mess_door.locked = false\r\n    msg (\"Test completed\")\r\n  </function>\r\n  <function name=\"computerFunction\" parameters=\"queries\"><![CDATA[\r\n    if (ListCount(queries) = 0) {\r\n      msg (\"You hear an error chime sound from the ship's computer.\")\r\n      play sound (\"computerbeep_1.mp3\", false, false)\r\n    }\r\n    else {\r\n      play sound (\"computerbeep_10.mp3\", false, false)\r\n      ShowMenu (\"\\\"Computer,\\\" you call loudly. <br> \\\"Specify query\\\", says a feminine robotic voice.\", queries, true) {\r\n        switch (result) {\r\n          case (\"State ship status\") {\r\n            shipStatus\r\n          }\r\n          case (\"Open cryo pod\") {\r\n            if (cryo_pod.isopen = false) {\r\n              msg (\"\\\"Opening cryo pod 352,\\\" replies the computer.\")\r\n              HelperOpenObject (cryo_pod)\r\n            }\r\n            else {\r\n              msg (\"\\\"Crewmen Shepherd's cryo pod is already open,\\\" replies the computer with an error chime.\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n          }\r\n          case (\"Extinguish fire in Engine Room\") {\r\n            msg (\"\\\"Unable to comply,\\\" replies the computer with an error tone. \\\"Fire countermeasure systems are inoperative.\\\"\")\r\n            play sound (\"computerbeep_1.mp3\", false, false)\r\n          }\r\n          case (\"Override door to Mess Deck\") {\r\n            msg (\"\\\"Unable to comply,\\\" replies the computer with an error tone. \\\"No atmosphere present on Mess Deck. Warning: hull breach detected on Mess Deck.\\\"\")\r\n            play sound (\"alarm03.mp3\", false, false)\r\n          }\r\n          case (\"State engine status\") {\r\n            engineStatus\r\n          }\r\n          case (\"Command the RAT to remove degraded control rods from the engine\") {\r\n            ClearScreen\r\n            msg (\"\\\"Executing command,\\\" replies the computer.<br/><br/>The RAT's robotic arm begins to move, reaching out toward the engine. The depleted rods are removed smoothly and loaded on to the RAT's flat bed, ready for transport.<br/>\")\r\n            MoveObject (old_rods, RAT)\r\n            ShowRoomDescription\r\n          }\r\n          case (\"Move RAT\") {\r\n            destinations = NewStringList()\r\n            list add (destinations, \"Bridge\")\r\n            list add (destinations, \"Medical Bay\")\r\n            list add (destinations, \"Mess Deck\")\r\n            list add (destinations, \"Cargo Bay\")\r\n            list add (destinations, \"Crew Quarters\")\r\n            list add (destinations, \"Engine Room\")\r\n            if (player.parent = RAT.parent or player.parent=engine_room and RAT.parent=containment_field) {\r\n              ShowMenu (\"\\\"Specify destination,\\\" replies the computer.\", destinations, true) {\r\n                switch (result) {\r\n                  case (\"Bridge\") {\r\n                    MoveObject (RAT, bridge)\r\n                  }\r\n                  case (\"Medical Bay\") {\r\n                    MoveObject (RAT, med_bay)\r\n                  }\r\n                  case (\"Mess Deck\") {\r\n                    MoveObject (RAT, mess_deck)\r\n                  }\r\n                  case (\"Cargo Bay\") {\r\n                    MoveObject (RAT, cargo_bay)\r\n                  }\r\n                  case (\"Crew Quarters\") {\r\n                    MoveObject (RAT, crew_quarters)\r\n                  }\r\n                  case (\"Engine Room\") {\r\n                    MoveObject (RAT, engine_room)\r\n                  }\r\n                  default {\r\n                    msg (\"Unable to comply.\")\r\n                    play sound (\"computerbeep_1.mp3\", false, false)\r\n                  }\r\n                }\r\n                msg (\"\\\"Executing command,\\\" replies the computer.<br/><br/>Its motors whirring loudly, the RAT rolls out through the door.<br/>\")\r\n                ShowRoomDescription\r\n              }\r\n            }\r\n            else {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer with an error chime. \\\"Safety protocols prohibit commanding a RAT unit without an operator present in the same room.\\\"\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n          }\r\n          case (\"Command the RAT to load the new control rods\") {\r\n            if (new_rods.parent = huge_crate and old_rods.parent <> RAT and huge_crate.isopen = true) {\r\n              ClearScreen\r\n              msg (\"\\\"Executing command,\\\" replies the computer.<br/><br/>The RAT's robotic arm begins to move, reaching into the crate. The new control rods are carefully extracted and loaded on to the RAT's flat bed, ready for transport.<br/>\")\r\n              MoveObject (new_rods, RAT)\r\n              ShowRoomDescription\r\n            }\r\n            else if (huge_crate.isopen = false) {\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"RAT unit is unable to access control rods inside sealed cargo container.\\\"\")\r\n            }\r\n            else if (new_rods.parent = RAT or old_rods.parent = RAT) {\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Roboticized Automated Transport is at maximum capacity.\\\"\")\r\n            }\r\n          }\r\n          case (\"Unload RAT\") {\r\n            if (RAT.parent = cargo_bay and player.parent = cargo_bay and old_rods.parent = RAT) {\r\n              ClearScreen\r\n              msg (\"\\\"Executing command,\\\" replies the computer.<br/><br/>The airlock inner door slides open and the RAT moves inside. It unloads the degraded control rods and returns to the Cargo Bay. The airlock inner door slides closed behind it.<br/><br/>\\\"Jettisoning degraded control rods,\\\" explains the computer as the airlock's outer door opens and the rods are sucked into space, along with the atmosphere inside the airlock.<br/>\")\r\n              IncreaseScore (1)\r\n              RemoveObject (old_rods)\r\n              ShowRoomDescription\r\n            }\r\n            else if (RAT.parent = containment_field and player.parent = engine_room) {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Installing degraded control rods into plasma reactor violates safety protocols.\\\"\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n            else if (old_rods.parent = RAT and player.parent = RAT.parent) {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Degraded control rods cannot be stored in \" + RAT.parent.name + \". Exposure to degraded control rods is a severe hazard to crew health.\\\"\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n            else if (new_rods.parent = RAT and player.parent = engine_room and RAT.parent = engine_room) {\r\n              msg (\"The RAT rolls through the containment field and over to the engine. Its robotic arm carefully loads each new control rod into place inside the reactor. Once the process is complete, the engine roars into life.<br/><br/>\\\"Power levels nominal,\\\" reports the ship's computer. ''Additional crew members may now be innervated.\\\"\")\r\n              MoveObject (RAT, containment_field)\r\n              MoveObject (new_rods, engine)\r\n              HelperCloseObject (engine)\r\n              captain_pod.locked = false\r\n              IncreaseScore (2)\r\n              game.power = \"normal\"\r\n              DisableTimer (lights)\r\n              DisableTimer (powerWarning)\r\n              DisableTimer (powerFailure)\r\n            }\r\n            else if (new_rods.parent = RAT) {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"New control rods can be damaged if not stored in accordance with usage guidelines.\\\"\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n            else if (player.parent <> RAT.parent) {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer with an error chime. \\\"Safety protocols prohibit commanding a RAT unit without an operator present in the same room.\\\"\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n            else {\r\n              msg (\"\\\"Unable to comply,\\\" replies the computer unhelpfully.\")\r\n              play sound (\"computerbeep_1.mp3\", false, false)\r\n            }\r\n          }\r\n          case (\"Run test\") {\r\n            walkthrough\r\n          }\r\n          default {\r\n            msg (\"Unable to comply.\")\r\n            play sound (\"computerbeep_1.mp3\", false, false)\r\n          }\r\n        }\r\n      }\r\n    }\r\n    JS.scrollToEnd ()\r\n  ]]></function>\r\n  <function name=\"listRATQueries\" type=\"stringlist\">\r\n    RATqueries = NewStringList()\r\n    if (engine.isopen=true and player.parent = engine_room and old_rods.parent=engine) {\r\n      list add (RATqueries, \"Command the RAT to remove degraded control rods from the engine\")\r\n    }\r\n    if (old_rods.parent = RAT or new_rods.parent = RAT) {\r\n      list add (RATqueries, \"Move RAT\")\r\n      list add (RATqueries, \"Unload RAT\")\r\n    }\r\n    if (player.parent = cargo_bay and RAT.parent = cargo_bay and new_rods.parent = huge_crate) {\r\n      list add (RATqueries, \"Command the RAT to load the new control rods\")\r\n    }\r\n    return (RATqueries)\r\n  </function>\r\n  <function name=\"listCaptainTopics\" type=\"stringlist\">\r\n    dialogue = NewStringList()\r\n    switch (captain.state) {\r\n      case (\"asleep\") {\r\n        msg (\"Captain Picker is asleep.\")\r\n      }\r\n      case (\"awake\") {\r\n        msg (\"\\\"Captain Picker,\\\" you begin. \")\r\n        list add (dialogue, \"\\\"How do you feel?\\\"\")\r\n        list add (dialogue, \"\\\"Let me catch you up on what's been going on.\\\"\")\r\n      }\r\n      case (\"hurt\") {\r\n        msg (\"The Captain is unconscious and unresponsive.\")\r\n      }\r\n      case (\"healed\") {\r\n        list add (dialogue, \"The Scion is under attack!\")\r\n        list add (dialogue, \"Sleeping on the job again\")\r\n      }\r\n      case (\"combat\") {\r\n        list add (dialogue, \"What are your orders?\")\r\n        list add (dialogue, \"We need to return fire!\")\r\n      }\r\n    }\r\n    return (dialogue)\r\n  </function>\r\n  <function name=\"fillHypo\"><![CDATA[\r\n    msg (\"You plug the hypospray into the medication dispensary.\")\r\n    MoveObject (hypospray, dispensary)\r\n    if (hypospray.med <> \"empty\") {\r\n      msg (\"An error chime sounds. The hypospray cannot be refilled until it is emptied.\")\r\n    }\r\n    else {\r\n      meds = NewStringList()\r\n      list add (meds, \"antibiotics\")\r\n      list add (meds, \"sedative\")\r\n      list add (meds, \"stimulant\")\r\n      list add (meds, \"multi-vitamin\")\r\n      ShowMenu (\"\\\"Select medication to dispense,\\\" says the ship's computer.\", meds, false) {\r\n        ClearScreen\r\n        msg (\"You hear the hum of machinery within the dispensary, followed by a faint hiss. A small indicator light on the hypospray changes from red to green.<br/>\")\r\n        hypospray.med = result\r\n        ShowRoomDescription\r\n      }\r\n    }\r\n  ]]></function>\r\n  <function name=\"talkToCaptain\"><![CDATA[\r\n    dialogue = listCaptainTopics()\r\n    ShowMenu (\"\", dialogue, false) {\r\n      switch (result) {\r\n        case (\"\\\"How do you feel?\\\"\") {\r\n          msg (\"Captain Picker sits up in his cryo pod and rubs his eyes.<br/><br/>\\\"I'm fine,\\\" he says. \\\"Just a bit groggy.\\\"\")\r\n        }\r\n        case (\"\\\"Let me catch you up on what's been going on.\\\"\") {\r\n          ClearScreen\r\n          msg (\"You relate everything that has happened since you awoke in your cryo pod. The Captain interjects with questions occasionally, but mostly furrows his brow in concentration as he absorbs the situation.<br/><br/>\\\"I see,\\\" he says simply as you finish. <br/>\")\r\n          play sound (\"largeexplosion1.mp3\", false, false)\r\n          msg (\"Just then, the Scion is rocked violently. You are thrown to the floor and hear a loud thud as the Captain is thrown into the bulkhead next to you. You scramble back to your feet.<br/>\")\r\n          captain.state = \"hurt\"\r\n          MoveObject (captain, cryo_quarters)\r\n          EnableTimer (attack)\r\n          EnableTimer (shipDestroyed)\r\n          ShowRoomDescription\r\n        }\r\n        case (\"The Scion is under attack!\") {\r\n          msg (\"\\\"What?\\\" exlaims the Captain. \\\"We need to get to the Bridge!\\\"<br/><br/>He struggles to his feet and without waiting for a response, he slides down the ladder to the Crew Quarters.\")\r\n          MoveObject (captain, captain_chair)\r\n          captain.state = \"combat\"\r\n        }\r\n        case (\"What are your orders?\") {\r\n          msg (\"\\\"Take control of the weapon systems and destroy that ship!\\\" Captain Picker shouts.\")\r\n        }\r\n        case (\"We need to return fire!\") {\r\n          msg (\"\\\"I know that! I already ordered you to fire on that ship! Get to it!\\\" Captain Picker shouts angrily.\")\r\n        }\r\n        default {\r\n          msg (\"Captain Picker fixes you with a withering stare.\")\r\n        }\r\n      }\r\n    }\r\n    JS.scrollToEnd ()\r\n  ]]></function>\r\n  <function name=\"internalStatus\"><![CDATA[\r\n    if (old_rods.parent <> engine and new_rods.parent <> engine) {\r\n      msg (\"Warning: plasma reactor is offline. Operating on auxiliary power.\")\r\n    }\r\n    if (hull_breach.parent = space_mess_deck) {\r\n      msg (\"Warning: hull breach detected on Mess Deck.\")\r\n    }\r\n    if (hull.isopen = false and eng_door.locked = true) {\r\n      msg (\"Warning: fire detected in Engine Room.\")\r\n    }\r\n    else if (hull.isopen = true and eng_door.locked = true) {\r\n      msg (\"Warning: hull breach detected in Engine Room\")\r\n    }\r\n    if (new_rods.parent <> engine) {\r\n      msg (\"Warning: power levels critical.<br/><br/>Immediate intervention is recommended to avoid loss of ship and all hands aboard.\")\r\n    }\r\n    JS.scrollToEnd ()\r\n  ]]></function>\r\n  <function name=\"engineStatus\">\r\n    if (old_rods.parent = engine) {\r\n      msg (\"\\\"Plasma reactor is operational,\\\" replies the computer. \\\"Power output is limited due to degraded control rods.\\\"\")\r\n      HelperOpenObject (engine)\r\n    }\r\n    else if (new_rods.parent = engine) {\r\n      msg (\"\\\"Plasma reactor is operational,\\\" replies the computer. \\\"Power output within nominal operating parameters.\\\"\")\r\n    }\r\n    else {\r\n      msg (\"\\\"Warning: plasma reactor is offline,\\\" replies the computer with a danger chime. \\\"Operating on auxiliary power.\\\"\")\r\n      play sound (\"alarm03.mp3\", false, false)\r\n    }\r\n    JS.scrollToEnd ()\r\n  </function>\r\n  <function name=\"SetupNautical\"><![CDATA[\r\n    game.compassdirections = ListExclude (game.compassdirections, \"\")\r\n    list add (game.compassdirections, \"fore\")\r\n    list add (game.compassdirections, \"port\")\r\n    list add (game.compassdirections, \"starboard\")\r\n    list add (game.compassdirections, \"aft\")\r\n    list add (game.compassdirections, \"f\")\r\n    list add (game.compassdirections, \"p\")\r\n    list add (game.compassdirections, \"sb\")\r\n    list add (game.compassdirections, \"a\")\r\n    request (SetCompassDirections, Join(game.compassdirections, \";\"))\r\n    go.pattern = \"^go to (?\"+Chr(60)+\"exit>.*)$|^go (?\"+Chr(60)+\"exit>.*)$|^(?\"+Chr(60)+\"exit>forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\r\n    lookdir.pattern = \"^look (?\"+Chr(60)+\"exit>forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\r\n    foreach (exit, AllExits()) {\r\n      if (StartsWith (exit.name, \"fore\")) {\r\n        exit.alias = \"fore\"\r\n        exit.alt = Split(\"f;forward\")\r\n      }\r\n      if (StartsWith (exit.name, \"aft\")) {\r\n        exit.alias = \"aft\"\r\n        exit.alt = Split(\"a\")\r\n      }\r\n      if (StartsWith (exit.name, \"port\")) {\r\n        exit.alias = \"port\"\r\n        exit.alt = Split(\"p\")\r\n      }\r\n      if (StartsWith (exit.name, \"starboard\")) {\r\n        exit.alias = \"starboard\"\r\n        exit.alt = Split(\"sb\")\r\n      }\r\n    }\r\n    ChangeDirToNautical\r\n  ]]></function>\r\n  <function name=\"SendToJsEval\" parameters=\"data\"><![CDATA[\r\n    regEx = \"//\"\r\n    s = Chr(60) + \"br/>\"\r\n    js = Split(data,s)\r\n    notes = NewStringList()\r\n    foreach (line, js) {\r\n      if (StartsWith(line,\"//\")) {\r\n        list add (notes, line)\r\n      }\r\n    }\r\n    js = ListExclude(js,notes)\r\n    finaljs = NewStringList()\r\n    foreach (line, js) {\r\n      code = line\r\n      if (IsRegExMatch(regEx,line)) {\r\n        list = Split(line,\"//\")\r\n        code = list[0]\r\n      }\r\n      list add (finaljs, code)\r\n    }\r\n    js = Join(finaljs,\"\")\r\n    js = Replace(js, \"[br]\", s)\r\n    js = Replace(js, \"[br/]\", s)\r\n    js = Replace(js, \"[break]\", s)\r\n    js = Replace(js, \"[linebreak]\", s)\r\n    js = Replace(js, \"[line break]\", s)\r\n    JS.eval (js)\r\n  ]]></function>\r\n  <function name=\"ChangeDirToNautical\"><![CDATA[\r\n    foreach (exit, AllExits()) {\r\n      if (ListCount(FilterByAttribute (ListParents(exit), \"shiptype\", true)) > 0) {\r\n        if (exit.alias = \"north\") {\r\n          exit.visible = false\r\n          newname = \"\" + GetUniqueElementName(\"fore\")\r\n          create exit (newname, \"fore\", exit.parent, exit.to, \"\")\r\n          newexit = GetObject(newname)\r\n          newexit.to = exit.to\r\n          newexit.alt = Split(\"f;forward\")\r\n        }\r\n        else if (exit.alias = \"south\") {\r\n          exit.visible = false\r\n          newname = \"\" + GetUniqueElementName(\"aft\")\r\n          create exit (newname, \"aft\", exit.parent, exit.to, \"\")\r\n          newexit = GetObject(newname)\r\n          newexit.to = exit.to\r\n          newexit.alt = Split(\"a\")\r\n        }\r\n        else if (exit.alias = \"west\") {\r\n          exit.visible = false\r\n          newname = \"\" + GetUniqueElementName(\"port\")\r\n          create exit (newname, \"port\", exit.parent, exit.to, \"\")\r\n          newexit = GetObject(newname)\r\n          newexit.to = exit.to\r\n          newexit.alt = Split(\"p\")\r\n        }\r\n        else if (exit.alias = \"east\") {\r\n          exit.visible = false\r\n          newname = \"\" + GetUniqueElementName(\"starboard\")\r\n          create exit (newname, \"starboard\", exit.parent, exit.to, \"\")\r\n          newexit = GetObject(newname)\r\n          newexit.to = exit.to\r\n          newexit.alt = Split(\"sb\")\r\n        }\r\n      }\r\n    }\r\n  ]]></function>\r\n  <timer name=\"lights\">\r\n    <interval>120</interval>\r\n    <enabled />\r\n    <script><![CDATA[\r\n      if (player.parent <> space_cargo_bay and player.parent <> space_engine_room and player.parent <> space_mess_deck) {\r\n        switch (game.power) {\r\n          case (\"low\") {\r\n            msg (\"<br/>The lights in the room flicker for a few moments before turning on again.\")\r\n          }\r\n          case (\"critical\") {\r\n            msg (\"<br/>The lights in the room switch off, leaving you in perfect blackness for a few moments before they turn on again. You shiver as you notice that the ambient temperature has dropped a few degrees.\")\r\n          }\r\n          case (\"normal\") {\r\n          }\r\n        }\r\n      }\r\n      JS.scrollToEnd ()\r\n    ]]></script>\r\n  </timer>\r\n  <timer name=\"powerFailure\">\r\n    <interval>900</interval>\r\n    <enabled type=\"boolean\">false</enabled>\r\n    <script><![CDATA[\r\n      ClearScreen\r\n      if (new_rods.parent <> engine and space_suit.worn = false) {\r\n        play sound (\"alarm03.mp3\", false, false)\r\n        msg (\"\\\"Plasma reactor failure,\\\" announces the computer. \\\"Unable to maintain minimal life support functions.\\\"<br/><br/>You feel the temperature dropping rapidly around you and you struggle to draw breath in the increasingly thin atmosphere. Within moments, you see bright spots appear before your eyes and then... darkness...<br/><br/>You failed to save the Scion!\")\r\n        DecreaseScore (-5)\r\n        finish\r\n      }\r\n      else if (new_rods.parent <> engine and space_suit.worn = true) {\r\n        play sound (\"alarm03.mp3\", false, false)\r\n        msg (\"\\\"Plasma reactor failure,\\\" announces the computer. \\\"Unable to maintain minimal life support functions.\\\"<br/><br/>From within the confines of your space suit, you watch the Scion's systems shut down around you. Your air supply keeps you alive a short time longer, but with nowhere to go and no way to resurrect the Scion, you drop to your knees in despair.<br/><br/>You failed to save the Scion!\")\r\n        DecreaseScore (-3)\r\n        finish\r\n      }\r\n    ]]></script>\r\n  </timer>\r\n  <timer name=\"powerWarning\">\r\n    <interval>900</interval>\r\n    <enabled />\r\n    <script><![CDATA[\r\n      if (new_rods.parent <> engine) {\r\n        EnableTimer (powerFailure)\r\n        game.power = \"critical\"\r\n        play sound (\"alarm03.mp3\", false, false)\r\n        msg (\"\\\"Warning: plasma reactor power levels have dropped to critical levels,\\\" the computer states flatly. \\\"Life support failure in 15 minutes.\\\"\")\r\n      }\r\n    ]]></script>\r\n  </timer>\r\n  <timer name=\"attack\">\r\n    <interval>60</interval>\r\n    <script><![CDATA[\r\n      play sound (\"largeexplosion1.mp3\", false, false)\r\n      msg (\"<br/>You stagger as the ship is rocked by another direct hit. You're not sure how much more the Scion can take...\")\r\n      JS.scrollToEnd ()\r\n    ]]></script>\r\n  </timer>\r\n  <timer name=\"shipDestroyed\">\r\n    <interval>600</interval>\r\n    <script><![CDATA[\r\n      play sound (\"largeexplosion1.mp3\", false, false)\r\n      msg (\"You are thrown to the deck as the Scion is blasted yet again. Secondary explosions quickly follow the initial impact and you can hear explosive decompression occuring all around you. After another few moments of violence, you have just enough time to realize that the Scion is doomed before a bright flash fills your senses.<br/><br/>You have failed to save the Scion!\")\r\n      DecreaseScore (-3)\r\n      finish\r\n    ]]></script>\r\n  </timer>\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>The updated code is below. Note that there seem to be two problems:</p>\n<ol>\n<li>Compass buttons are disabled, but after clicking around for a while, they became enabled (not sure what I did exactly, need to spend more time testing)</li>\n<li>I have two exits that are locked at the beginning of the game (eng_door and mess_door) which are replaced with unlocked doors by ChangeDirToNautical</li>\n</ol>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6615.29455--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Red Alert\"&gt;\n    &lt;gameid&gt;5d168f57-b215-43fb-b260-9d2c82c05bfc&lt;/gameid&gt;\n    &lt;version&gt;1.2&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;author&gt;Eric Caillibot&lt;/author&gt;\n    &lt;category&gt;Sci-Fi&lt;/category&gt;\n    &lt;showscore /&gt;\n    &lt;menufont&gt;Georgia, serif&lt;/menufont&gt;\n    &lt;feature_limitinventory /&gt;\n    &lt;attr name=\"feature_lightdark\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;attr name=\"feature_asktell\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;attr name=\"feature_annotations\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;attr name=\"feature_advancedwearables\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;appendobjectdescription /&gt;\n    &lt;showcommandbar type=\"boolean\"&gt;false&lt;/showcommandbar&gt;\n    &lt;gridmap type=\"boolean\"&gt;false&lt;/gridmap&gt;\n    &lt;mapscale type=\"int\"&gt;1&lt;/mapscale&gt;\n    &lt;mapsize type=\"int\"&gt;1&lt;/mapsize&gt;\n    &lt;respondtogridclicks type=\"boolean\"&gt;false&lt;/respondtogridclicks&gt;\n    &lt;attr name=\"autodescription_youarein_useprefix\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;attr name=\"autodescription_youcansee\" type=\"int\"&gt;3&lt;/attr&gt;\n    &lt;attr name=\"autodescription_youcango\" type=\"int\"&gt;4&lt;/attr&gt;\n    &lt;attr name=\"autodescription_description\" type=\"int\"&gt;2&lt;/attr&gt;\n    &lt;commandpane /&gt;\n    &lt;statusandcompassattop /&gt;\n    &lt;turnoffplacesandobjects /&gt;\n    &lt;description&gt;You were supposed to remain in cryo sleep until the Scion reached orbit around your target world in the Alpha Centauri system. So why are you awake now? And why are you alone?&lt;/description&gt;\n    &lt;cover&gt;red-space.jpeg&lt;/cover&gt;\n    &lt;subtitle&gt;Adrift in Space&lt;/subtitle&gt;\n    &lt;povstatusattributes type=\"stringdictionary\" /&gt;\n    &lt;menufontsize type=\"int\"&gt;11&lt;/menufontsize&gt;\n    &lt;turnoffinventory type=\"boolean\"&gt;false&lt;/turnoffinventory&gt;\n    &lt;turnoffcompass type=\"boolean\"&gt;false&lt;/turnoffcompass&gt;\n    &lt;showpanes /&gt;\n    &lt;pov type=\"object\"&gt;player&lt;/pov&gt;\n    &lt;inituserinterface type=\"script\"&gt;&lt;![CDATA[\n      JS.setCommands (\"Computer;Look\")\n      SetTimeout (2) {\n        cmds = ProcessText(\"{command:Computer}&amp;emsp;{command:Look}&amp;emsp;{command:Inventory}\" + Chr(60) + \"span id=\\\"custom-score-div\\\"&gt;\" + Chr(60) + \"br/&gt;Score: {game.score}\" + Chr(60) + \"/span&gt;\")\n        s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\"&gt;\"\n        s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\n        s = s + Chr(60) + \"/div&gt;\"\n        JS.eval (\"if (typeof (currentTab) === 'string'){var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));}\")\n        JS.\n      }\n      SendToJsEval (js.description)\n      JS.changeCompass ()\n    ]]&gt;&lt;/inituserinterface&gt;\n    &lt;start type=\"script\"&gt;\n      set (captain, \"state\", \"asleep\")\n      set (hypospray, \"med\", \"empty\")\n      set (game, \"power\", \"low\")\n      js = \"function isMobilePlayer(){\"\n        js = js + \"return (typeof(currentTab) === 'string');\"\n        JS.eval (js)\n        scion.shiptype = true\n        SetupNautical\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;verb&gt;\n    &lt;property&gt;ask/tell&lt;/property&gt;\n    &lt;pattern&gt;ask/tell&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't ask/tell \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;object name=\"space_cargo_bay\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n    &lt;alias&gt;In Space (Outside Cargo Bay)&lt;/alias&gt;\n    &lt;description type=\"script\"&gt;\n      msg (\"The cold blackness of space is visible in every direction, perforated by innumerable, distant stars. The hull of the Scion stretches out below you, illuminated only by your suit's lights.\")\n      firsttime {\n        msg (\"The only sound is your own breathing. Using the grappling equipment integrated into your suit, you are able to move around the hull. The lack of gravity makes it virtually effortless, but the process is awkward and slow.\")\n      }\n    &lt;/description&gt;\n    &lt;exit name=\"airlock_in\" alias=\"in\" to=\"cargo_bay\"&gt;\n      &lt;inherit name=\"indirection\" /&gt;\n      &lt;runscript /&gt;\n      &lt;script type=\"script\"&gt;\n        msg (\"You glide into the airlock and seal the outer door behind you. Air is automatically pumped into the room and once the air pressure matches the interior of the Scion, the inner door automatically slides open. You climb through the inner door, sealing it behind you. Once free of the airlock, you carefully remove the space suit.\")\n        MoveObject (player, cargo_bay)\n        space_suit.worn = false\n      &lt;/script&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"southeast\" to=\"space_engine_room\"&gt;\n      &lt;inherit name=\"southeastdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"northeast\" to=\"space_mess_deck\"&gt;\n      &lt;inherit name=\"northeastdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;command name=\"computer\"&gt;\n    &lt;pattern&gt;Computer&lt;/pattern&gt;\n    &lt;script&gt;\n      queries = listComputerQueries()\n      computerFunction (queries)\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;verb&gt;\n    &lt;property&gt;suitup&lt;/property&gt;\n    &lt;pattern&gt;suit up&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't suit up \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;object name=\"space_engine_room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;alias&gt;In Space (Outside Engine Room)&lt;/alias&gt;\n    &lt;description&gt;You approach the aft section of the ship and you can see the enormous engine nacelles sticking out of the Scion. You can't help but feel awed by the sight.&lt;/description&gt;\n    &lt;exit alias=\"northwest\" to=\"space_cargo_bay\"&gt;\n      &lt;inherit name=\"northwestdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"north\" to=\"space_mess_deck\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"hull\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"container_closed\" /&gt;\n      &lt;alias&gt;hull&lt;/alias&gt;\n      &lt;feature_usegive /&gt;\n      &lt;feature_container /&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;Use&lt;/value&gt;\n      &lt;/displayverbs&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;inroomdescription type=\"string\"&gt;&lt;/inroomdescription&gt;\n      &lt;prefix&gt;the&lt;/prefix&gt;\n      &lt;look type=\"script\"&gt;\n        msg (\"The hull outside the Engine Room shows damage that could only have been caused by some kind of weapons fire. Luckily, the damage seems to be minor.\")\n        if (hull.isopen = true and eng_door.locked = true) {\n          msg (\"A long thin gash runs along the hull, where you cut in with your plasma torch.\")\n        }\n        else if (hull.isopen=true and eng_door.locked = false) {\n          msg (\"You admire your handiwork, noting that the cut you made previously has been expertly sealed.\")\n        }\n      &lt;/look&gt;\n      &lt;use type=\"script\"&gt;\n        if (plasma_torch.parent = player) {\n          if (not hull.isopen) {\n            msg (\"Using the plasma torch, you begin cutting through the Scion's hull. As soon as you pierce through, a jet of air begins spraying out through the gap. You continue cutting until the atmosphere from the Engine Room has completely vented into space. Without any air left inside, the fire won't be able to sustain itself.\")\n            HelperOpenObject (hull)\n            IncreaseScore (1)\n          }\n          else {\n            firsttime {\n              msg (\"With all of the air vented into space and the fire extinguished, you use the plasma torch to seal the cut you made.\")\n              UnlockExit (eng_door)\n              IncreaseScore (1)\n            }\n            otherwise {\n              msg (\"The hull remains well sealed. No further work is required.\")\n            }\n          }\n        }\n        else {\n          msg (\"You don't have any tool that would let you work on the hull.\")\n        }\n      &lt;/use&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"space_mess_deck\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;You make your way around the hull to the section outside the Mess Deck. The ship was clearly fired upon by some kind of energy weapon. Minor damage is visible in several locations.&lt;/description&gt;\n    &lt;alias&gt;In Space (Outside Mess Deck)&lt;/alias&gt;\n    &lt;exit alias=\"southwest\" to=\"space_cargo_bay\"&gt;\n      &lt;inherit name=\"southwestdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"south\" to=\"space_engine_room\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"hull_breach\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;alias&gt;gaping tear in the hull&lt;/alias&gt;\n      &lt;inroomdescription&gt;The worst of the damage caused a hull breach, running parallel to the Scion's long axis.&lt;/inroomdescription&gt;\n      &lt;look&gt;A long, but very narrow gash. You're confident that you could repair the damage, if you had the right tool. Assuming you don't get fired on while you are helplessly exposed...&lt;/look&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;Use&lt;/value&gt;\n      &lt;/displayverbs&gt;\n      &lt;feature_usegive /&gt;\n      &lt;use type=\"script\"&gt;\n        if (plasma_torch.parent = player) {\n          msg (\"Carefully bracing yourself against the hull, you begin welding the gash closed with the plasma torch. Your visor automatically darkens to protect your eyes from the intense light. Despite your suit's insulated gloves, your hands heat up and become sweaty in short order. It is slow going, but you persevere and succeed in sealing the breach.\")\n          RemoveObject (hull_breach)\n          UnlockExit (mess_door)\n          IncreaseScore (1)\n        }\n        else {\n          msg (\"You can't do much about the breach without the right tool.\")\n        }\n      &lt;/use&gt;\n    &lt;/object&gt;\n    &lt;object name=\"alien_ship\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;alias&gt;Unidentified Object&lt;/alias&gt;\n      &lt;inroomdescription&gt;In the distance, a twinkling light catches your eye. &lt;/inroomdescription&gt;\n      &lt;look&gt;It is much too faint to be a star or planet. It could be another spaceship.&lt;/look&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n      &lt;/displayverbs&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;verb&gt;\n    &lt;property&gt;exitsuit&lt;/property&gt;\n    &lt;pattern&gt;exit suit&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't exit suit \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;removesuit&lt;/property&gt;\n    &lt;pattern&gt;remove suit&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't remove suit \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;dropsuit&lt;/property&gt;\n    &lt;pattern&gt;drop suit&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't drop suit \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;stand&lt;/property&gt;\n    &lt;pattern&gt;stand&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't stand \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;turnscript name=\"mobileScore\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      JS.eval (\"$('#custom-score-div').html('\" + Chr(60) + \"br/&gt;Score: \" + ProcessText(\"{game.score}\") + \"');\")\n    ]]&gt;&lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;turnscript name=\"nautical_buttons_turnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      // Version 2\n      if (ListCount(FilterByAttribute (ListParents(game.pov), \"shiptype\", true)) &gt; 0) {\n        list = NewStringList()\n        foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\n          list add (list, exit.alias)\n        }\n        JS.updateShipCompass (Join(list, \"/\"))\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;object name=\"js\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;&lt;![CDATA[var onBoard = false;&lt;br/&gt;var shipButtons = '&lt;div id=\"dir-holder\" style=\"display:none;\"&gt;&lt;div id=\"ship-nav\"&gt;&lt;table id=\"ship-directions\"&gt;&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;';&lt;br/&gt;shipButtons += '&lt;button id=\"cmdCompassF\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"fore\" onclick=\"compassClick(\\'fore\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-n\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';&lt;br/&gt;shipButtons += '&lt;tr&gt;&lt;td&gt;&lt;button id=\"cmdCompassP\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"port\" onclick=\"compassClick(\\'port\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-w\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;/button&gt;';&lt;br/&gt;shipButtons += '&lt;button id=\"cmdCompassSB\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"starboard\" onclick=\"compassClick(\\'starboard\\');\" role=\"button\"&gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-e\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;';&lt;br/&gt;shipButtons += '&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;&lt;button id=\"cmdCompassA\" class=\"shipcompassbutton compassbutton ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary\" type=\"button\" title=\"aft\" onclick=\"compassClick(\\'aft\\');\" role=\"button\" &gt;&lt;span class=\"ui-button-icon-primary ui-icon ui-icon-arrowthick-1-s\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;span class=\"ui-button-text\" style=\"left: 0.8em;\"&gt;&lt;/span&gt;&lt;/button&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;';&lt;br/&gt;shipButtons += '&lt;/div&gt;&lt;/div&gt;';&lt;br/&gt;function changeCompass(){&lt;br/&gt;  $('body').append(shipButtons);&lt;br/&gt;  $(\"#ship-directions\").css(\"border-spacing\",\"0\");&lt;br/&gt;  $(\"#cmdCompassNW\").parent().parent().parent().attr('id','def-nav');&lt;br/&gt;  $('#ship-nav').hide();$('#def-nav').parent().append($('#dir-holder').html());&lt;br/&gt;  $(\".shipcompassbutton\").each(function(){&lt;br/&gt;    $(this).button().button(\"enable\").button(\"disable\");&lt;br/&gt;    $(\".shipcompassbutton span\").css(\"left\", \"0.8em\");$(\".shipcompassbutton .ui-button-text\").css('padding','.8em .8em');&lt;br/&gt;  });&lt;br/&gt;};&lt;br/&gt;function toggleNav(){&lt;br/&gt;  $(\"#def-nav, #ship-nav\").toggle()&lt;br/&gt;};&lt;br/&gt;function updateShipCompass(data){&lt;br/&gt;  var exits = data.split(\"/\");&lt;br/&gt;  $(\".shipcompassbutton\").each(function(){&lt;br/&gt;    for (var exit in exits){&lt;br/&gt;      if($(this).attr('title') === exits[exit]){&lt;br/&gt;        $(this).button(\"enable\");&lt;br/&gt;        break;&lt;br/&gt;      }else{&lt;br/&gt;        $(this).button(\"disable\");&lt;br/&gt;      }&lt;br/&gt;    }&lt;br/&gt;  });&lt;br/&gt;};]]&gt;&lt;/description&gt;\n  &lt;/object&gt;\n  &lt;object name=\"scion\"&gt;\n    &lt;attr name=\"feature_startscript\" type=\"boolean\"&gt;false&lt;/attr&gt;\n    &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n    &lt;/attr&gt;\n    &lt;object name=\"cryo_quarters\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;description&gt;Row upon row of pods, each housing a crew member in cryogenic suspension, surrounds you. Even outside the pods, the room is cold. The sound of dripping water can be heard in the distance. A ladder leads down to the Crew Quarters.&lt;/description&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;descprefix type=\"string\"&gt;&lt;/descprefix&gt;\n      &lt;alias&gt;Cryo Quarters&lt;/alias&gt;\n      &lt;dropdestination type=\"object\"&gt;cryo_quarters&lt;/dropdestination&gt;\n      &lt;firstenter type=\"script\"&gt;\n      &lt;/firstenter&gt;\n      &lt;beforeenter type=\"script\"&gt;\n      &lt;/beforeenter&gt;\n      &lt;exit name=\"ladder down\" alias=\"down\" to=\"crew_quarters\"&gt;\n        &lt;inherit name=\"downdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"cryo_pod\"&gt;\n        &lt;inherit name=\"container_closed\" /&gt;\n        &lt;inroomdescription&gt;Your cryo pod stands out from the rows of identical, but sealed and occupied, pods nearby.&lt;/inroomdescription&gt;\n        &lt;feature_container /&gt;\n        &lt;isopen type=\"boolean\"&gt;false&lt;/isopen&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;transparent type=\"boolean\"&gt;false&lt;/transparent&gt;\n        &lt;openmsg&gt;The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out and quickly dissipates.&lt;/openmsg&gt;\n        &lt;closemsg&gt;The glass cover rotates into place, sealing the cryo pod. A quiet hum is audible as the pod activates its cryo sleep cycle.&lt;/closemsg&gt;\n        &lt;listchildren /&gt;\n        &lt;visible type=\"boolean\"&gt;false&lt;/visible&gt;\n        &lt;alias&gt;cryo pod&lt;/alias&gt;\n        &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n        &lt;look&gt;A cylindrical capsule with a sliding glass cover, sized to contain a single person. Inside is a variety of vital sign sensors used to adjust the cryogenic stasis of its occupant.&lt;/look&gt;\n        &lt;dropdestination type=\"object\"&gt;cryo_pod&lt;/dropdestination&gt;\n        &lt;openscript type=\"script\"&gt;\n          msg (\"The cylindrical glass cover rotates with a hiss. As the pod opens to the surrounding room, a cloud of vapour floats out and quickly dissipates.\")\n          firsttime {\n            create exit (\"pod door\", cryo pod, Cryo Quarters, out)\n            msg (\"You climb out of the pod carefully, making sure not to overexert your sluggish muscles. You still feel woozy from the effects of cryo sleep, but your senses are slowly returning to normal.\")\n            MoveObject (player, Cryo Quarters)\n          }\n        &lt;/openscript&gt;\n        &lt;closescript type=\"script\"&gt;\n          msg (\"The cylindrical glass cover rotates, sealing the cryo pod.\")\n        &lt;/closescript&gt;\n        &lt;onopen type=\"script\"&gt;\n          HelperOpenObject (cryo_pod)\n        &lt;/onopen&gt;\n        &lt;description type=\"script\"&gt;\n          firsttime {\n            msg (\"You awake from a deep slumber, struggling to make sense of your perceptions. You are lying on your back, inside a small container. It is dark, and cold. As your consciousness returns, you manage to identify your surroundings as a cryo pod. You begin to remember climbing into it, in preparation for a long cryo sleep, while the Scion travelled to the Alpha Centauri system. Why have you been awakened? Has the Scion reached its destination? Is it time to begin founding a new colony?\")\n          }\n          otherwise {\n            msg (\"The cryo pod still feels cold, even though the cryo sleep function has clearly been disabled. \")\n          }\n        &lt;/description&gt;\n        &lt;onclose type=\"script\"&gt;\n          HelperCloseObject (cryo_pod)\n        &lt;/onclose&gt;\n        &lt;firstenter type=\"script\"&gt;\n        &lt;/firstenter&gt;\n        &lt;beforeenter type=\"script\"&gt;\n          JS.toggleNav ()\n          do (nautical_buttons_turnscript, \"script\")\n        &lt;/beforeenter&gt;\n        &lt;object name=\"player\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;inherit name=\"editor_player\" /&gt;\n          &lt;inherit name=\"namedmale\" /&gt;\n          &lt;alias&gt;Crewman Shepherd&lt;/alias&gt;\n          &lt;usedefaultprefix /&gt;\n          &lt;look type=\"string\"&gt;&lt;/look&gt;\n          &lt;visible type=\"boolean\"&gt;false&lt;/visible&gt;\n          &lt;attr name=\"pov_look\"&gt;You're dressed in a standard-issue jump suit, with the Scion's mission crest over your left pectoral.&lt;/attr&gt;\n          &lt;maxvolume type=\"int\"&gt;1&lt;/maxvolume&gt;\n          &lt;containerfullmessage&gt;You can't carry any more. Your jumpsuit doesn't have any pockets.&lt;/containerfullmessage&gt;\n        &lt;/object&gt;\n        &lt;exit alias=\"out\" to=\"cryo_quarters\"&gt;\n          &lt;inherit name=\"outdirection\" /&gt;\n          &lt;locked type=\"boolean\"&gt;false&lt;/locked&gt;\n          &lt;lockmessage&gt;The cryo pod is sealed. &lt;/lockmessage&gt;\n          &lt;runscript /&gt;\n          &lt;script type=\"script\"&gt;\n            if (not ListContains(ScopeVisible(), cryo_pod)) {\n              if (not cryo_pod.isopen) {\n                msg (\"Your mind still fuzzy from the effects of prolonged cryo sleep, you push against the cryo pod's glass cover to no avail. As you slowly regain your faculties, you remember your training. Opening the cryo pod, as well as perfoming many other actions aboard the Scion, requires issuing verbal commands to the ship's computer.\")\n                SetTimeout (2) {\n                  JS.eval (\"if (typeof (currentTab) !== 'string') {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the top right to issue verbal commands to the ship's computer.\\\");} else {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the bottom to issue verbal commands to the ship's computer.\\\");}\")\n                  JS.scrollToEnd ()\n                }\n              }\n              else {\n                firsttime {\n                  msg (\"You climb out of the pod carefully, making sure not to overexert your sluggish muscles. You still feel woozy from the effects of cryo sleep, but your senses are slowly returning to normal.\")\n                  IncreaseScore (1)\n                }\n                otherwise {\n                  msg (\"\")\n                }\n                MakeObjectVisible (cryo_pod)\n                MoveObject (player, cryo_quarters)\n                JS.toggleNav ()\n                MoveObject (player, this.to)\n              }\n            }\n            else {\n              MoveObject (player, cryo_quarters)\n            }\n          &lt;/script&gt;\n        &lt;/exit&gt;\n      &lt;/object&gt;\n      &lt;exit alias=\"in\" to=\"cryo_pod\"&gt;\n        &lt;inherit name=\"indirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"captain_pod\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_closed\" /&gt;\n        &lt;inherit name=\"container_lockable\" /&gt;\n        &lt;feature_container /&gt;\n        &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n        &lt;listchildren /&gt;\n        &lt;inroomdescription&gt;You are also able to identify Captain Picker's cryo pod.&lt;/inroomdescription&gt;\n        &lt;look&gt;A cylindrical capsule with a sliding glass cover, identical to the one you crawled out of.&lt;/look&gt;\n        &lt;alias&gt;Captain Picker's cryo pod&lt;/alias&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Open&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;listchildrenprefix&gt;Inside is&lt;/listchildrenprefix&gt;\n        &lt;openmsg&gt;The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out and quickly dissipates.&lt;/openmsg&gt;\n        &lt;closemsg&gt;The glass cover rotates into place, sealing the cryo pod. A quiet hum is audible as the pod activates its cryo sleep cycle.&lt;/closemsg&gt;\n        &lt;autounlock type=\"boolean\"&gt;false&lt;/autounlock&gt;\n        &lt;autoopen type=\"boolean\"&gt;false&lt;/autoopen&gt;\n        &lt;transparent /&gt;\n        &lt;hidechildren /&gt;\n        &lt;feature_startscript /&gt;\n        &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n          captain_pod.openscript =&gt; {\n            if (not this.locked and not this.isopen) {\n              captain_pod.isopen = true\n              captain.state = \"awake\"\n              MoveObject (captain, cryo_quarters)\n              msg (\"The cylindrical glass cover rotates with a hiss, opening the cryo pod. As the pod interior is exposed to the room, a cloud of vapour floats out. As it dissipates, you can see {object:captain} slowly climbing out of his pod.\")\n            }\n            else if (not this.locked and this.isopen) {\n              msg (\"It is already open.\")\n            }\n            else {\n              msg (\"An error chimes sounds from the ship's computer.&lt;br/&gt;\\\"Life support at critical levels. Restore main power in order to revive additional crew members.\\\"\")\n            }\n          }\n        ]]&gt;&lt;/attr&gt;\n        &lt;object name=\"captain\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;inherit name=\"namedmale\" /&gt;\n          &lt;alias&gt;Captain Picker&lt;/alias&gt;\n          &lt;displayverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n          &lt;/displayverbs&gt;\n          &lt;look type=\"script\"&gt;\n            switch (captain.state) {\n              case (\"asleep\") {\n                msg (\"You examine Captain Picker as he sleeps. He is in his fifties, bald, with sharp, angular features and a stern demeanour which is not diminished by his peaceful state.\")\n              }\n              case (\"awake\") {\n                msg (\"Captain Picker rubs his face groggily with boths hands. He is in his fifties, bald, with sharp, angular features and a stern demeanour.\")\n              }\n              case (\"hurt\") {\n                msg (\"Captain Picker lays in a heap on the floor. He appears to have been knocked unconscious and you see an angry red mark on his bald head.\")\n              }\n              case (\"combat\") {\n                msg (\"Captain Picker is scanning the instrumentation output on the console integrated into the Captain's Chair and braking commands at the ship's computer to evade the hostile vessel incoming fire and mitigate damage.\")\n              }\n            }\n          &lt;/look&gt;\n          &lt;speak type=\"script\"&gt;\n            talkToCaptain\n          &lt;/speak&gt;\n          &lt;ask type=\"scriptdictionary\"&gt;\n            &lt;item key=\"health\"&gt;\n            &lt;/item&gt;\n          &lt;/ask&gt;\n        &lt;/object&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"crew_quarters\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;description&gt;Dozens of rows of bunk beds fill the room, all unnoccupied. The beds are made and ready for use. Once the crew is awakened from cryogenic sleep, this will become their new sleeping area. The cold air from the cryo quarters above can be felt drifting down the ladder.&lt;/description&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;descprefix type=\"string\"&gt;&lt;/descprefix&gt;\n      &lt;alias&gt;Crew Quarters&lt;/alias&gt;\n      &lt;dropdestination type=\"object\"&gt;crew_quarters&lt;/dropdestination&gt;\n      &lt;firstenter type=\"script\"&gt;\n      &lt;/firstenter&gt;\n      &lt;beforeenter type=\"script\"&gt;\n      &lt;/beforeenter&gt;\n      &lt;exit name=\"ladder up\" alias=\"up\" to=\"cryo_quarters\"&gt;\n        &lt;inherit name=\"updirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"west\" to=\"aft_corridor\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"locker\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_closed\" /&gt;\n        &lt;feature_container /&gt;\n        &lt;inroomdescription&gt;A row of lockers lines the far wall. &lt;/inroomdescription&gt;\n        &lt;look&gt;You recognize the locker designated for your use.&lt;/look&gt;\n        &lt;listchildren /&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n          &lt;value&gt;Open&lt;/value&gt;\n          &lt;value&gt;Close&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Open&lt;/value&gt;\n          &lt;value&gt;Close&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;openmsg&gt;The locker opens with a metallic squeak.&lt;/openmsg&gt;\n        &lt;object name=\"space_suit\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;inherit name=\"wearable\" /&gt;\n          &lt;alias&gt;space suit&lt;/alias&gt;\n          &lt;feature_wearable /&gt;\n          &lt;take /&gt;\n          &lt;attr name=\"wear_layer\" type=\"int\"&gt;0&lt;/attr&gt;\n          &lt;wearmsg&gt;You climb into the suit, piece by piece. You painstakingly verify every joint and seal, completing the pre-EVA checklist drilled into you during your training.&lt;/wearmsg&gt;\n          &lt;removemsg&gt;You remove the suit, struggling your way out of each section, until you are down to just your jump suit once again.&lt;/removemsg&gt;\n          &lt;inventoryverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n            &lt;value&gt;Suit Up&lt;/value&gt;\n            &lt;value&gt;Remove Suit&lt;/value&gt;\n            &lt;value&gt;Drop Suit&lt;/value&gt;\n          &lt;/inventoryverbs&gt;\n          &lt;volume type=\"int\"&gt;0&lt;/volume&gt;\n          &lt;look type=\"script\"&gt;\n            msg (\"It is a Mark IV, extra vehicular activity suit, with integrated grappling harness and air supply. \")\n            if (air_tank.isopen = true) {\n              msg (\"The air tank is currently empty.\")\n            }\n            else {\n              msg (\"The air tank is full.\")\n            }\n          &lt;/look&gt;\n          &lt;suitup type=\"script\"&gt;\n            if (air_tank.isopen = true) {\n              msg (\"Putting on the space suit with no air in the tank would doom you to suffocation.\")\n            }\n            else {\n              msg (\"You climb into the suit, piece by piece. You painstakingly verify every joint and seal, completing the pre-EVA checklist drilled into you during your training.\")\n              space_suit.worn = true\n            }\n          &lt;/suitup&gt;\n          &lt;dropsuit type=\"script\"&gt;\n            if (space_suit.worn = true) {\n              msg (\"You must remove the suit before dropping it.\")\n            }\n            else {\n              msg (\"You drop it.\")\n              MoveObjectHere (space_suit)\n            }\n          &lt;/dropsuit&gt;\n          &lt;removesuit type=\"script\"&gt;\n            if (player.parent=space_cargo_bay or player.parent=space_mess_deck or player.parent=space_engine_room) {\n              msg (\"Removing your space suit while in space would be suicide.\")\n            }\n            else {\n              msg (\"You remove the suit, struggling your way out of each section, until you are down to just your jump suit once again.\")\n              SetObjectFlagOff (space_suit, \"worn\")\n            }\n          &lt;/removesuit&gt;\n          &lt;object name=\"air_tank\"&gt;\n            &lt;inherit name=\"editor_object\" /&gt;\n            &lt;inherit name=\"container_limited\" /&gt;\n            &lt;scenery type=\"boolean\"&gt;false&lt;/scenery&gt;\n            &lt;visible type=\"boolean\"&gt;false&lt;/visible&gt;\n            &lt;feature_container /&gt;\n          &lt;/object&gt;\n        &lt;/object&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"aft_corridor\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;alias&gt;Aft Corridor&lt;/alias&gt;\n      &lt;dropdestination type=\"object\"&gt;aft_corridor&lt;/dropdestination&gt;\n      &lt;description type=\"script\"&gt;\n        msg (\"The corridor in the aft section of the Scion is wide enough for several people to walk side by side. Off to port is the Cargo Bay, the Crew Quarters are starboard, heading aft leads to the engine room, while the rest of the ship is to the fore.\")\n        if (eng_door.locked = true) {\n          msg (\"You can smell smoke coming from the aft direction.\")\n        }\n      &lt;/description&gt;\n      &lt;exit alias=\"east\" to=\"crew_quarters\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit name=\"eng_door\" alias=\"south\" to=\"engine_room\"&gt;\n        &lt;locked /&gt;\n        &lt;lockmessage&gt;As you approach the engine room, the door does not slide open automatically. Thin tendrils of smoke are seeping around the door seal and you can feel intense heat coming from the other side.&lt;/lockmessage&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"west\" to=\"cargo_bay\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"north\" to=\"fore_corridor\"&gt;\n        &lt;inherit name=\"northdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n    &lt;object name=\"engine_room\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Engine Room&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description type=\"script\"&gt;&lt;![CDATA[\n        firsttime {\n          msg (\"As the door to the Engine Room begins to slide open, you brace yourself. If the fire damage was bad enough, you may be walking into a radioactive disaster zone. Even if you aren't immediately killed, a damaged engine could mean the Scion is about to become dead in space, dooming you and the sleeping crew to float in a cold, lonely grave for centuries. &lt;br/&gt;&lt;br/&gt;When the door does open, you are relieved to see the shining blue light of the containment field. Everything within it, crucially including the engine itself, was spared from the fire. The damage to the rest of the room is extensive, but you can't worry about that right now.\")\n        }\n        msg (\"The room is peppered with black soot and the acrid smell of smoke is almost overpowering.\")\n      ]]&gt;&lt;/description&gt;\n      &lt;exit alias=\"north\" to=\"aft_corridor\"&gt;\n        &lt;inherit name=\"northdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"containment_field\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_closed\" /&gt;\n        &lt;look&gt;The translucent field shimmers as you inspect it. It is holding steady, at full strength.&lt;/look&gt;\n        &lt;inroomdescription&gt;A glowing, blue containment field protects a cynlindrical volume within the Engine Room. Everything inside the field appears pristine, having been untouched by the fire.&lt;/inroomdescription&gt;\n        &lt;feature_container /&gt;\n        &lt;open type=\"boolean\"&gt;false&lt;/open&gt;\n        &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n        &lt;transparent /&gt;\n        &lt;alias&gt;containment field&lt;/alias&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Open&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;openmsg type=\"string\"&gt;&lt;/openmsg&gt;\n        &lt;nokeymessage&gt;Lowering the containment field would instantly expose you to dangerous radiation from the engine. &lt;/nokeymessage&gt;\n        &lt;listchildren /&gt;\n        &lt;autounlock type=\"boolean\"&gt;false&lt;/autounlock&gt;\n        &lt;autoopen type=\"boolean\"&gt;false&lt;/autoopen&gt;\n        &lt;feature_startscript /&gt;\n        &lt;listchildrenprefix&gt;Within it are &lt;/listchildrenprefix&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n          containment_field.openscript =&gt; {\n            if (not this.locked and not this.isopen) {\n              msg (\"Lowering the containment field would instantly expose you to dangerous radiation from the engine. \")\n            }\n          }\n        ]]&gt;&lt;/attr&gt;\n        &lt;object name=\"engine\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;inherit name=\"container_closed\" /&gt;\n          &lt;feature_container /&gt;\n          &lt;isopen type=\"boolean\"&gt;false&lt;/isopen&gt;\n          &lt;transparent type=\"boolean\"&gt;false&lt;/transparent&gt;\n          &lt;inroomdescription&gt;The advanced fission engine sits in the centre of the containment field.&lt;/inroomdescription&gt;\n          &lt;feature_switchable /&gt;\n          &lt;listchildren type=\"boolean\"&gt;false&lt;/listchildren&gt;\n          &lt;displayverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n          &lt;/displayverbs&gt;\n          &lt;look type=\"script\"&gt;\n            if (old_rods.parent = engine) {\n              msg (\"The engine is operational, but its power output is very low.\")\n            }\n            else if (new_rods.parent = engine) {\n              msg (\"The engine is operating at full capacity. Power output is nominal.\")\n            }\n            else {\n              msg (\"Without any control rods inside, the plasma reactor is offline.\")\n            }\n          &lt;/look&gt;\n          &lt;object name=\"old_rods\"&gt;\n            &lt;inherit name=\"editor_object\" /&gt;\n            &lt;alias&gt;depleted control rods&lt;/alias&gt;\n          &lt;/object&gt;\n        &lt;/object&gt;\n        &lt;object name=\"RAT\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;alias&gt;RAT&lt;/alias&gt;\n          &lt;inroomdescription&gt;A robotacized, automated transport (RAT) is in standby mode.&lt;/inroomdescription&gt;\n          &lt;displayverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n            &lt;value&gt;Use&lt;/value&gt;\n          &lt;/displayverbs&gt;\n          &lt;feature_usegive /&gt;\n          &lt;look type=\"script\"&gt;\n            msg (\"The RAT has a four wheeled base, designed for navigating rough terrain. It features a long, flat bed for transporting heavy equipment and a robotic arm for loading and unloading.\")\n            if (old_rods.parent = RAT) {\n              msg (\"The used control rods sit on top of the RAT's flat bed.\")\n            }\n            else if (new_rods.parent = RAT) {\n              msg (\"The new control rods sit on top of the RAT's flat bed.\")\n            }\n          &lt;/look&gt;\n          &lt;use type=\"script\"&gt;&lt;![CDATA[\n            RATQueries = NewStringList()\n            RATQueries = listRATQueries()\n            if (ListCount(RATQueries) = 0) {\n              msg (\"\\\"Roboticised Automated Transports will respond to verbal commands issued to the ship's computer,\\\" explains the ship's computer. \\\"RAT units can be used to service the Scion's plasma reactor. Verifying current reactor status...\\\"&lt;br/&gt;\")\n              engineStatus\n            }\n            else {\n              computerFunction (RATQueries)\n            }\n          ]]&gt;&lt;/use&gt;\n        &lt;/object&gt;\n      &lt;/object&gt;\n      &lt;object name=\"broken_rat\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inroomdescription&gt;A robot stands just outside the field, its tires melted and its chassis warped and blackened by the fire. &lt;/inroomdescription&gt;\n        &lt;look&gt;A quick glance is enough to tell you that extensive reconstruction would be necessary to get this RAT working again.&lt;/look&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;alias&gt;damaged robot&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"cargo_bay\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Cargo Bay&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description&gt;The bay is packed with equipment from floor to ceiling. The mission organizer's tried to include everything needed to establish a new colony on a distant, unknown alien world. Any damage to the equipment in here could threaten the success of the mission. At the far end of the cargo bay is an airlock. &lt;/description&gt;\n      &lt;exit alias=\"east\" to=\"aft_corridor\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit name=\"airlock\" alias=\"out\" to=\"space_cargo_bay\"&gt;\n        &lt;inherit name=\"outdirection\" /&gt;\n        &lt;locked type=\"boolean\"&gt;false&lt;/locked&gt;\n        &lt;lockmessage type=\"string\"&gt;&lt;/lockmessage&gt;\n        &lt;runscript /&gt;\n        &lt;script type=\"script\"&gt;\n          if (space_suit.worn = true) {\n            msg (\"You open the airlock's inner door and walk inside. The inner door seals itself automatically and the air is quickly sucked out of the room. You check your space suit's systems, and they are all within normal operating parameters. The outer door slides open silently and you cautiously step out into the void.\")\n            JS.toggleNav ()\n            MoveObject (player, space_cargo_bay)\n          }\n          else {\n            msg (\"Stepping into an airlock without wearing a space suit would be suicide.\")\n          }\n        &lt;/script&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"huge_crate\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_closed\" /&gt;\n        &lt;inherit name=\"container_lockable\" /&gt;\n        &lt;alias&gt;huge crate&lt;/alias&gt;\n        &lt;feature_container /&gt;\n        &lt;listchildren /&gt;\n        &lt;nokeymessage&gt;The crate can't be opened with your bare hands.&lt;/nokeymessage&gt;\n        &lt;unlockmessage&gt;The laser cut through the crate's seals with ease.&lt;/unlockmessage&gt;\n        &lt;takemsg&gt;The crate is much too massive to be picked up by even the strongest human.&lt;/takemsg&gt;\n        &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Take&lt;/value&gt;\n          &lt;value&gt;Open&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;keycount type=\"int\"&gt;1&lt;/keycount&gt;\n        &lt;autounlock /&gt;\n        &lt;autoopen /&gt;\n        &lt;openmsg&gt;With a solid shove, the top of the crate slides away.&lt;/openmsg&gt;\n        &lt;key type=\"object\"&gt;laser_opener&lt;/key&gt;\n        &lt;look type=\"script\"&gt;\n          if (huge_crate.isopen = false) {\n            msg (\"The crate is tightly sealed. A label reads \\\"plasma reactor control rods\\\".\")\n          }\n          else {\n            msg (\"The crate has been cut open. The lid lies discarded on the floor nearby. \")\n          }\n        &lt;/look&gt;\n        &lt;object name=\"new_rods\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;inherit name=\"plural\" /&gt;\n          &lt;alias&gt;new control rods&lt;/alias&gt;\n          &lt;look&gt;The rods are long, thin cylinders, gunmetal grey in colour. They are in pristine condition and ready for use.&lt;/look&gt;\n          &lt;takemsg&gt;The rods are too heavy and too numerous for you to handle unaided.&lt;/takemsg&gt;\n        &lt;/object&gt;\n      &lt;/object&gt;\n      &lt;object name=\"plasma_torch\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;plasma torch&lt;/alias&gt;\n        &lt;look&gt;A heavy duty tool, able to cut through or seal metal plating up to a metre thick.&lt;/look&gt;\n        &lt;take /&gt;\n        &lt;volume type=\"int\"&gt;1&lt;/volume&gt;\n        &lt;feature_usegive /&gt;\n        &lt;use type=\"script\"&gt;\n          if (plasma_torch.parent = player and player.parent = space_mess_deck and hull_breach.parent = space_mess_deck) {\n            msg (\"Carefully bracing yourself against the hull, you begin welding the gash closed with the plasma torch. Your visor automatically darkens to protect your eyes from the intense light. Despite your suit's insulated gloves, your hands heat up and become sweaty in short order. It is slow going, but you persevere and succeed in sealing the breach.\")\n            RemoveObject (hull_breach)\n            UnlockExit (mess_door)\n            IncreaseScore (1)\n          }\n          else if (plasma_torch.parent = player and player.parent = space_engine_room) {\n            if (not hull.isopen) {\n              msg (\"Using the plasma torch, you begin cutting through the Scion's hull. As soon as you pierce through, a jet of air begins spraying out through the gap. You continue cutting until the atmosphere from the Engine Room has completely vented into space. Without any air left inside, the fire won't be able to sustain itself.\")\n              HelperOpenObject (hull)\n              IncreaseScore (1)\n            }\n            else {\n              firsttime {\n                msg (\"With all of the air vented into space and the fire extinguished, you use the plasma torch to seal the cut you made.\")\n                UnlockExit (eng_door)\n                IncreaseScore (1)\n              }\n              otherwise {\n                msg (\"The hull remains well sealed. No further work is required.\")\n              }\n            }\n          }\n          else {\n            msg (\"You don't see any obvious use for it here.\")\n          }\n        &lt;/use&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"fore_corridor\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Forward Corridor&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description&gt;The corridor narrows toward the fore of the Scion, allowing only a pair of passengers to walk abreast as it reaches the Bridge at the far end. The Med Bay is on the port side, with the Mess Deck to starboard. Following the corridor aft leads into the Aft Corridor.&lt;/description&gt;\n      &lt;exit alias=\"south\" to=\"aft_corridor\"&gt;\n        &lt;inherit name=\"southdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"north\" to=\"bridge\"&gt;\n        &lt;inherit name=\"northdirection\" /&gt;\n        &lt;runscript /&gt;\n        &lt;script type=\"script\"&gt;&lt;![CDATA[\n          if (captain.parent = captain_chair) {\n            msg (\"As you walk into the Bridge, you see that Captain Picker has already taken up his post in the Captain's Chair. The viewscreen shows a magnified image of the enemy vessel. You've never seen anything like it--it looks like a collection of haphazardly arranged spheres, variously glowing in incomprehensible patterns.&lt;br/&gt;&lt;br/&gt;\\\"Shepherd!\\\" shouts the Captain as you walk in. \\\"I'm having the Scion perform evasive maneuvers. I need you to man the weapons and return fire! Step to it man!\\\"\")\n            MoveObject (player, bridge)\n          }\n          else {\n            MoveObject (player, bridge)\n          }\n        ]]&gt;&lt;/script&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"west\" to=\"med_bay\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit name=\"mess_door\" alias=\"east\" to=\"mess_deck\"&gt;\n        &lt;locked /&gt;\n        &lt;lockmessage&gt;As you approach the door to the Mess Deck, it does not slide open automatically.&lt;/lockmessage&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n    &lt;object name=\"med_bay\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Med Bay&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description&gt;The walls are lined with empty gurneys, ready to receive patients. A variety of medical equipment and robotics are installed in the middle of the room. Medicine is not your area of expertise, so you recognize very few of the devices and know how to operate fewer still.&lt;/description&gt;\n      &lt;exit alias=\"east\" to=\"fore_corridor\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"air_compressor\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;air compressor&lt;/alias&gt;\n        &lt;look&gt;A hefty machine, the air compressor features a hose with a high pressure nozzle and locking mechanism.&lt;/look&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_usegive /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;use type=\"script\"&gt;\n          if (space_suit.parent = player and air_tank.isopen = true) {\n            msg (\"You connect the air compressor's nozzle to the space suit's air tank and activate the machine. It takes several minutes, but the tank's supply indicator finally goes from red to green.\")\n            air_tank.isopen = false\n            IncreaseScore (1)\n          }\n          else if (space_suit.parent=player and air_tank.isopen = false) {\n            msg (\"The space suit's air supply is sufficient for several hours of operation and doesn't require any topping up.\")\n          }\n          else {\n            msg (\"You have nothing to use the air compressor on.\")\n          }\n        &lt;/use&gt;\n      &lt;/object&gt;\n      &lt;object name=\"dispensary\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_open\" /&gt;\n        &lt;alias&gt;medication dispensary&lt;/alias&gt;\n        &lt;look&gt;The dispensary fills an entire wall of the Med Bay. You remember being taught that it contains an enormous variety of medication, intended to sustain the new colony until new treatments can be developed from the native flora and fauna of your new home. It features a small rectangular opening with a circular receptacle. &lt;/look&gt;\n        &lt;feature_usegive /&gt;\n        &lt;feature_container /&gt;\n        &lt;open type=\"boolean\"&gt;false&lt;/open&gt;\n        &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n        &lt;transparent /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;listchildren /&gt;\n        &lt;listchildrenprefix&gt;Docked in the receptacle is &lt;/listchildrenprefix&gt;\n        &lt;use type=\"script\"&gt;\n          if (hypospray.parent = player) {\n            fillHypo\n          }\n          else {\n            msg (\"You don't have anything to store medication from the dispensary.\")\n          }\n        &lt;/use&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"bridge\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Bridge&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description&gt;The nerve center of the Scion, the Bridge is dominated by a viewscreen covering the entire curved surface at the front of the room. The captain's chair sits on a slightly raised dais in the rear with a commanding view of the entire Bridge. Between the captain's chair and the screen are several control stations, each one intended to be manned by a senior officer.&lt;/description&gt;\n      &lt;exit alias=\"south\" to=\"fore_corridor\"&gt;\n        &lt;inherit name=\"southdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"captain_chair\"&gt;\n        &lt;inherit name=\"surface\" /&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;feature_container /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Stand&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;look&gt;It features the most advanced ergonomics ever developed by humanity, and is made from the most advanced materials, making it comfortable for extended periods of time. It features a control panel built into the right armrest. It also includes a safety harness to ensure its occupant cannot be inadvertently ejected. It is one excellent chair.&lt;/look&gt;\n        &lt;alias&gt;Captain's Chair&lt;/alias&gt;\n        &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n        &lt;prefix&gt;the&lt;/prefix&gt;\n        &lt;sit type=\"script\"&gt;\n          if (captain.parent = captain_chair) {\n            msg (\"The Captain gives you a brief, but eloquent look. You quickly back away from the chair.\")\n          }\n          else {\n            msg (\"Looking over your shoulder despite yourself, you take a seat in the Captain's Chair. It feels good. You could definitely get used to this.\")\n            game.gridmap = false\n            MoveObject (player, captain_chair)\n          }\n        &lt;/sit&gt;\n        &lt;stand type=\"script\"&gt;\n          if (player.parent = captain_chair) {\n            msg (\"Reluctantly, you stand up, leaving the comfort of the Captain's Chair behind.\")\n            MoveObject (player, bridge)\n            game.gridmap = true\n          }\n          else {\n            msg (\"You cannot stand up from the chair unless you sit down first.\")\n          }\n        &lt;/stand&gt;\n      &lt;/object&gt;\n      &lt;object name=\"weapon_controls\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;weapons control station&lt;/alias&gt;\n        &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n        &lt;prefix&gt;the &lt;/prefix&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;feature_usegive /&gt;\n        &lt;look type=\"script\"&gt;\n          msg (\"The panel displays status information regarding the Scion's complement of defensive weaponry. The ship's mission may be colonization of a new world, but the mission planners were not so naÃ¯ve as to think that peaceful intentions would preclude the occasional need for force.\")\n          if (new_rods.parent = engine) {\n            msg (\"With full power restored, the Scion's full array of weapons is available and ready for use.\")\n          }\n          else {\n            msg (\"With main power at critical, all weapon functions have been disabled.\")\n          }\n        &lt;/look&gt;\n        &lt;use type=\"script\"&gt;&lt;![CDATA[\n          if (captain.parent = captain_chair) {\n            play sound (\"tos_phasersstrikingdeflectorshields.mp3\", false, false)\n            msg (\"You take control of the panel and with the computer's help, you acquire the enemy vessel.&lt;br/&gt;&lt;br/&gt;\\\"Target acquired!\\\" you shout over the sound of the Scion taking another hit.&lt;br/&gt;&lt;br/&gt;\\\"Fire!\\\" Picker shouts back at you.&lt;br/&gt;&lt;br/&gt;You jab the control panel and immediately hear and feel the vibrations throughout the Scion as the heavy lasers are activated. Searing red lines appear on the viewscreen, connecting with the enemy vessel. It attempts to maneouvre away, but the tracking sensors keep the lasers on target. Explosions blossom across the vessel's hull and in a dazzling display of colours, the ship's breaks apart.&lt;br/&gt;&lt;br/&gt;\\\"Target neutralized,\\\" you announce with relief.&lt;br/&gt;&lt;br/&gt;\\\"Well done,\\\" replies Captain Picker. \\\"You've earned yourself a field promotion for saving the Scion. Now let's wake up the rest of the crew and complete our mission.\\\"&lt;br/&gt;&lt;br/&gt;Congratulations!\")\n            RemoveObject (alien_ship)\n            IncreaseScore (5)\n            finish\n          }\n          else if (new_rods.parent = engine and player.parent &lt;&gt; captain_chair) {\n            play sound (\"computerbeep_1.mp3\", false, false)\n            msg (\"As soon as you begin to manipulate the controls, an error chime sounds.&lt;br/&gt;&lt;br/&gt;\\\"Unauthorized use of weapons systems detected. Senior officer approval is required.\\\"\")\n          }\n          else if (player.parent = captain_chair) {\n            msg (\"You can't reach the weapons control panel from the Captain's Chair.\")\n          }\n          else {\n            msg (\"The panel displays only a warning about the main power levels being critical.\")\n          }\n        ]]&gt;&lt;/use&gt;\n      &lt;/object&gt;\n      &lt;object name=\"sensors\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;feature_usegive /&gt;\n        &lt;alias&gt;sensors control station&lt;/alias&gt;\n        &lt;look type=\"script\"&gt;\n          msg (\"The panel displays internal and external sensor readings. Sensor logs can also be retrieved.\")\n        &lt;/look&gt;\n        &lt;use type=\"script\"&gt;&lt;![CDATA[\n          if (player.parent = captain_chair) {\n            msg (\"You can't reach the sensors panel from the Captain's Chair.\")\n          }\n          else {\n            readings = NewStringList()\n            list add (readings, \"Internal Sensor Array\")\n            list add (readings, \"External Sensor Array\")\n            list add (readings, \"Sensor Logs\")\n            ShowMenu (\"\\\"Select sensor information to display,\\\" the computer asks in response to you activating the panel.\", readings, true) {\n              switch (result) {\n                case (\"Internal Sensor Array\") {\n                  internalStatus\n                }\n                case (\"External Sensor Array\") {\n                  play sound (\"alarm03.mp3\", false, false)\n                  msg (\"\\\"Warning: hostile vessel detected,\\\" states the computer.&lt;br/&gt;&lt;br/&gt;The Scion's passive sensors are detecting intermittent energy readings from the direction of the unknown vessel. Although it is hard to be sure, given the ship's unknown origins, it would seem that it is not operating at normal capacity.&lt;br/&gt;&lt;br/&gt;Active sensors show the unknown ship's size to be smaller than the Scion. Its hull design resembles a collection of spheres welded together without any clear pattern. &lt;br/&gt;&lt;br/&gt;Sensors also show a planet, approximately one light month away.\")\n                }\n                case (\"Sensor Logs\") {\n                  ClearScreen\n                  msg (\"You skim through years of automated log entries detailing normal ship functions and minor glitches. Eventually, you discover today's log entry.\")\n                  TextFX_Typewriter (\"Unknown energy signature detected.&lt;br&gt;Incoming weapons fire detected.&lt;br&gt;Damage to aft hull detected. Initiating defensive counter measures. &lt;br&gt;Hull breach detected on Mess Deck. Innervating Chief Engineer Dawson.&lt;br&gt;Power surge detected. Chief Engineer Dawson life signs failing. Innervating Crewman Shepherd.&lt;br&gt;Explosive discharge detected aboard hostile vessel. &lt;br&gt;Power surge detected in plasma reactor. Fire detected in engine room. Unable to continue defensive countermeasures.\", 50)\n                  ShowRoomDescription\n                  IncreaseScore (1)\n                }\n                default {\n                  play sound (\"computerbeep_1.mp3\", false, false)\n                  msg (\"\\\"Invalid selection,\\\" the computer replies.\")\n                }\n              }\n            }\n          }\n        ]]&gt;&lt;/use&gt;\n      &lt;/object&gt;\n      &lt;object name=\"propulsion_controls\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Use&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;feature_usegive /&gt;\n        &lt;alias&gt;propulsion controls station&lt;/alias&gt;\n        &lt;look type=\"script\"&gt;\n          msg (\"The panel displays status information regarding the Scion's propulsion systems.\")\n          if (new_rods.parent = engine) {\n            msg (\"With full power restored, the Scion's propulsion systems are active.\")\n          }\n          else {\n            msg (\"With main power at critical, the Scion is adrift.\")\n          }\n        &lt;/look&gt;\n        &lt;use type=\"script\"&gt;&lt;![CDATA[\n          if (new_rods.parent = engine and player.parent &lt;&gt; captain_chair) {\n            msg (\"The Scion's propulsion systems are active.\")\n          }\n          else if (player.parent = captain_chair) {\n            msg (\"You can't reach the propulsion control panel from the Captain's Chair.\")\n          }\n          else {\n            msg (\"The panel displays only a warning about the main power levels being critical.\")\n          }\n        ]]&gt;&lt;/use&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"mess_deck\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;alias&gt;Mess Deck&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;description&gt;The large open area was designed to give the crew a break from the functional, confined spaces of the rest of the ship. Floor to ceiling windows line the deck, giving an incredible view of the stars. Recent exposure to vacuum has left the deck in a sorry state, with whatever objects that were unable to fit through the hull breach now strewn across the deck. Only the bar and the tables, which are bolted to the deck, remain where they belong.&lt;/description&gt;\n      &lt;exit alias=\"west\" to=\"fore_corridor\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"laser_opener\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;laser cutter&lt;/alias&gt;\n        &lt;look&gt;A low-power, handheld laser cutter. Looks like its batteries are included.&lt;/look&gt;\n        &lt;volume type=\"int\"&gt;1&lt;/volume&gt;\n        &lt;take /&gt;\n        &lt;feature_usegive /&gt;\n        &lt;use type=\"script\"&gt;\n          if (laser_opener.parent=player and player.parent=cargo_bay) {\n            msg (\"The laser cut through the crate's seals with ease.\")\n            huge_crate.locked = false\n            HelperOpenObject (huge_crate)\n          }\n          else {\n            msg (\"A laser cutter must be used with care, especially on a space ship. There is no useful target for it here.\")\n          }\n        &lt;/use&gt;\n      &lt;/object&gt;\n      &lt;object name=\"coffee\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;instant coffee canister&lt;/alias&gt;\n        &lt;volume type=\"int\"&gt;1&lt;/volume&gt;\n        &lt;look&gt;One of the modern wonders of the world: an apparatus containing instant coffee, water and a mechanism able to combine and heat them into a ready-to-serve beverage with a simple twist of the wrist and a few moments of patience. If only they could make it taste good... &lt;/look&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n          &lt;value&gt;Give&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;usestandardverblist /&gt;\n        &lt;take /&gt;\n        &lt;feature_usegive /&gt;\n        &lt;givesingle type=\"script\"&gt;\n          if (player.parent = bridge and captain.parent = captain_chair or player.parent = cryo_quarters and captain.parent = captain_pod) {\n            RemoveObject (coffee)\n            msg (\"You twist the container's top, instantly mixing and heating its contents into passable coffee, and hand it to the Captain. He glances at you and grabs the container, favouring you with a half smile.\")\n            IncreaseScore (1)\n          }\n          else {\n            msg (\"There is no one to give this too. \")\n          }\n        &lt;/givesingle&gt;\n      &lt;/object&gt;\n      &lt;object name=\"hypospray\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;look&gt;A glass and metal cylinder the size of your hand. You remember from your training that it can be used to administer any kind of medication.&lt;/look&gt;\n        &lt;take /&gt;\n        &lt;volume type=\"int\"&gt;1&lt;/volume&gt;\n        &lt;feature_usegive /&gt;\n        &lt;use type=\"script\"&gt;&lt;![CDATA[\n          if (hypospray.parent = player and player.parent = med_bay) {\n            fillHypo\n          }\n          else if (hypospray.parent = player and player.parent = cryo_quarters and captain.state = \"hurt\" and hypospray.med &lt;&gt; \"empty\") {\n            msg (\"You kneel and administer the hypospray to the unconscious form of Captain Picker.\")\n            if (hypospray.med = \"stimulant\") {\n              msg (\"His eyes flutter and finally open. He props himself up, rubbing his head. &lt;br/&gt;&lt;br/&gt;\\\"What happened?\\\" he asks, wincing as he touches his bruised head.\")\n              captain.state = \"healed\"\n              IncreaseScore (1)\n              talkToCaptain\n            }\n            else {\n              msg (\"The medication does not seem to have any effect.\")\n            }\n            hypospray.med = \"empty\"\n          }\n          else if (hypospray.med = \"empty\") {\n            msg (\"The hypospray won't do anyone much good while it is empty.\")\n          }\n          else {\n            msg (\"You consider injecting yourself, but then decide it wouldn't be advisable under the circumstances.\")\n          }\n        ]]&gt;&lt;/use&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;function name=\"shipStatus\"&gt;\n    if (alien_ship.parent = space_mess_deck) {\n      play sound (\"alarm03.mp3\", false, false)\n      msg (\"Warning: hostile vessel detected\")\n    }\n    internalStatus\n  &lt;/function&gt;\n  &lt;function name=\"listComputerQueries\" type=\"stringlist\"&gt;\n    queries = NewStringList()\n    list add (queries, \"State ship status\")\n    if (player.parent = cryo_pod) {\n      list add (queries, \"Open cryo pod\")\n    }\n    if (eng_door.locked = true and player.parent = aft_corridor) {\n      list add (queries, \"Extinguish fire in Engine Room\")\n    }\n    if (player.parent = fore_corridor) {\n      list add (queries, \"Override door to Mess Deck\")\n    }\n    if (player.parent=engine_room) {\n      list add (queries, \"State engine status\")\n    }\n    queries = ListCombine(queries, listRATQueries())\n    return (queries)\n  &lt;/function&gt;\n  &lt;function name=\"walkthrough\"&gt;\n    msg (\"Starting test...\")\n    UnlockExit (eng_door)\n    HelperOpenObject (huge_crate)\n    MoveObject (player, cryo_quarters)\n    RemoveObject (old_rods)\n    MoveObject (new_rods, engine)\n    MoveObject (hypospray, player)\n    hypospray.med = \"stimulant\"\n    captain_pod.locked = false\n    mess_door.locked = false\n    msg (\"Test completed\")\n  &lt;/function&gt;\n  &lt;function name=\"computerFunction\" parameters=\"queries\"&gt;&lt;![CDATA[\n    if (ListCount(queries) = 0) {\n      msg (\"You hear an error chime sound from the ship's computer.\")\n      play sound (\"computerbeep_1.mp3\", false, false)\n    }\n    else {\n      play sound (\"computerbeep_10.mp3\", false, false)\n      ShowMenu (\"\\\"Computer,\\\" you call loudly. &lt;br&gt; \\\"Specify query\\\", says a feminine robotic voice.\", queries, true) {\n        switch (result) {\n          case (\"State ship status\") {\n            shipStatus\n          }\n          case (\"Open cryo pod\") {\n            if (cryo_pod.isopen = false) {\n              msg (\"\\\"Opening cryo pod 352,\\\" replies the computer.\")\n              HelperOpenObject (cryo_pod)\n            }\n            else {\n              msg (\"\\\"Crewmen Shepherd's cryo pod is already open,\\\" replies the computer with an error chime.\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n          }\n          case (\"Extinguish fire in Engine Room\") {\n            msg (\"\\\"Unable to comply,\\\" replies the computer with an error tone. \\\"Fire countermeasure systems are inoperative.\\\"\")\n            play sound (\"computerbeep_1.mp3\", false, false)\n          }\n          case (\"Override door to Mess Deck\") {\n            msg (\"\\\"Unable to comply,\\\" replies the computer with an error tone. \\\"No atmosphere present on Mess Deck. Warning: hull breach detected on Mess Deck.\\\"\")\n            play sound (\"alarm03.mp3\", false, false)\n          }\n          case (\"State engine status\") {\n            engineStatus\n          }\n          case (\"Command the RAT to remove degraded control rods from the engine\") {\n            ClearScreen\n            msg (\"\\\"Executing command,\\\" replies the computer.&lt;br/&gt;&lt;br/&gt;The RAT's robotic arm begins to move, reaching out toward the engine. The depleted rods are removed smoothly and loaded on to the RAT's flat bed, ready for transport.&lt;br/&gt;\")\n            MoveObject (old_rods, RAT)\n            ShowRoomDescription\n          }\n          case (\"Move RAT\") {\n            destinations = NewStringList()\n            list add (destinations, \"Bridge\")\n            list add (destinations, \"Medical Bay\")\n            list add (destinations, \"Mess Deck\")\n            list add (destinations, \"Cargo Bay\")\n            list add (destinations, \"Crew Quarters\")\n            list add (destinations, \"Engine Room\")\n            if (player.parent = RAT.parent or player.parent=engine_room and RAT.parent=containment_field) {\n              ShowMenu (\"\\\"Specify destination,\\\" replies the computer.\", destinations, true) {\n                switch (result) {\n                  case (\"Bridge\") {\n                    MoveObject (RAT, bridge)\n                  }\n                  case (\"Medical Bay\") {\n                    MoveObject (RAT, med_bay)\n                  }\n                  case (\"Mess Deck\") {\n                    MoveObject (RAT, mess_deck)\n                  }\n                  case (\"Cargo Bay\") {\n                    MoveObject (RAT, cargo_bay)\n                  }\n                  case (\"Crew Quarters\") {\n                    MoveObject (RAT, crew_quarters)\n                  }\n                  case (\"Engine Room\") {\n                    MoveObject (RAT, engine_room)\n                  }\n                  default {\n                    msg (\"Unable to comply.\")\n                    play sound (\"computerbeep_1.mp3\", false, false)\n                  }\n                }\n                msg (\"\\\"Executing command,\\\" replies the computer.&lt;br/&gt;&lt;br/&gt;Its motors whirring loudly, the RAT rolls out through the door.&lt;br/&gt;\")\n                ShowRoomDescription\n              }\n            }\n            else {\n              msg (\"\\\"Unable to comply,\\\" replies the computer with an error chime. \\\"Safety protocols prohibit commanding a RAT unit without an operator present in the same room.\\\"\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n          }\n          case (\"Command the RAT to load the new control rods\") {\n            if (new_rods.parent = huge_crate and old_rods.parent &lt;&gt; RAT and huge_crate.isopen = true) {\n              ClearScreen\n              msg (\"\\\"Executing command,\\\" replies the computer.&lt;br/&gt;&lt;br/&gt;The RAT's robotic arm begins to move, reaching into the crate. The new control rods are carefully extracted and loaded on to the RAT's flat bed, ready for transport.&lt;br/&gt;\")\n              MoveObject (new_rods, RAT)\n              ShowRoomDescription\n            }\n            else if (huge_crate.isopen = false) {\n              play sound (\"computerbeep_1.mp3\", false, false)\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"RAT unit is unable to access control rods inside sealed cargo container.\\\"\")\n            }\n            else if (new_rods.parent = RAT or old_rods.parent = RAT) {\n              play sound (\"computerbeep_1.mp3\", false, false)\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Roboticized Automated Transport is at maximum capacity.\\\"\")\n            }\n          }\n          case (\"Unload RAT\") {\n            if (RAT.parent = cargo_bay and player.parent = cargo_bay and old_rods.parent = RAT) {\n              ClearScreen\n              msg (\"\\\"Executing command,\\\" replies the computer.&lt;br/&gt;&lt;br/&gt;The airlock inner door slides open and the RAT moves inside. It unloads the degraded control rods and returns to the Cargo Bay. The airlock inner door slides closed behind it.&lt;br/&gt;&lt;br/&gt;\\\"Jettisoning degraded control rods,\\\" explains the computer as the airlock's outer door opens and the rods are sucked into space, along with the atmosphere inside the airlock.&lt;br/&gt;\")\n              IncreaseScore (1)\n              RemoveObject (old_rods)\n              ShowRoomDescription\n            }\n            else if (RAT.parent = containment_field and player.parent = engine_room) {\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Installing degraded control rods into plasma reactor violates safety protocols.\\\"\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n            else if (old_rods.parent = RAT and player.parent = RAT.parent) {\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"Degraded control rods cannot be stored in \" + RAT.parent.name + \". Exposure to degraded control rods is a severe hazard to crew health.\\\"\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n            else if (new_rods.parent = RAT and player.parent = engine_room and RAT.parent = engine_room) {\n              msg (\"The RAT rolls through the containment field and over to the engine. Its robotic arm carefully loads each new control rod into place inside the reactor. Once the process is complete, the engine roars into life.&lt;br/&gt;&lt;br/&gt;\\\"Power levels nominal,\\\" reports the ship's computer. ''Additional crew members may now be innervated.\\\"\")\n              MoveObject (RAT, containment_field)\n              MoveObject (new_rods, engine)\n              HelperCloseObject (engine)\n              captain_pod.locked = false\n              IncreaseScore (2)\n              game.power = \"normal\"\n              DisableTimer (lights)\n              DisableTimer (powerWarning)\n              DisableTimer (powerFailure)\n            }\n            else if (new_rods.parent = RAT) {\n              msg (\"\\\"Unable to comply,\\\" replies the computer. \\\"New control rods can be damaged if not stored in accordance with usage guidelines.\\\"\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n            else if (player.parent &lt;&gt; RAT.parent) {\n              msg (\"\\\"Unable to comply,\\\" replies the computer with an error chime. \\\"Safety protocols prohibit commanding a RAT unit without an operator present in the same room.\\\"\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n            else {\n              msg (\"\\\"Unable to comply,\\\" replies the computer unhelpfully.\")\n              play sound (\"computerbeep_1.mp3\", false, false)\n            }\n          }\n          case (\"Run test\") {\n            walkthrough\n          }\n          default {\n            msg (\"Unable to comply.\")\n            play sound (\"computerbeep_1.mp3\", false, false)\n          }\n        }\n      }\n    }\n    JS.scrollToEnd ()\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"listRATQueries\" type=\"stringlist\"&gt;\n    RATqueries = NewStringList()\n    if (engine.isopen=true and player.parent = engine_room and old_rods.parent=engine) {\n      list add (RATqueries, \"Command the RAT to remove degraded control rods from the engine\")\n    }\n    if (old_rods.parent = RAT or new_rods.parent = RAT) {\n      list add (RATqueries, \"Move RAT\")\n      list add (RATqueries, \"Unload RAT\")\n    }\n    if (player.parent = cargo_bay and RAT.parent = cargo_bay and new_rods.parent = huge_crate) {\n      list add (RATqueries, \"Command the RAT to load the new control rods\")\n    }\n    return (RATqueries)\n  &lt;/function&gt;\n  &lt;function name=\"listCaptainTopics\" type=\"stringlist\"&gt;\n    dialogue = NewStringList()\n    switch (captain.state) {\n      case (\"asleep\") {\n        msg (\"Captain Picker is asleep.\")\n      }\n      case (\"awake\") {\n        msg (\"\\\"Captain Picker,\\\" you begin. \")\n        list add (dialogue, \"\\\"How do you feel?\\\"\")\n        list add (dialogue, \"\\\"Let me catch you up on what's been going on.\\\"\")\n      }\n      case (\"hurt\") {\n        msg (\"The Captain is unconscious and unresponsive.\")\n      }\n      case (\"healed\") {\n        list add (dialogue, \"The Scion is under attack!\")\n        list add (dialogue, \"Sleeping on the job again\")\n      }\n      case (\"combat\") {\n        list add (dialogue, \"What are your orders?\")\n        list add (dialogue, \"We need to return fire!\")\n      }\n    }\n    return (dialogue)\n  &lt;/function&gt;\n  &lt;function name=\"fillHypo\"&gt;&lt;![CDATA[\n    msg (\"You plug the hypospray into the medication dispensary.\")\n    MoveObject (hypospray, dispensary)\n    if (hypospray.med &lt;&gt; \"empty\") {\n      msg (\"An error chime sounds. The hypospray cannot be refilled until it is emptied.\")\n    }\n    else {\n      meds = NewStringList()\n      list add (meds, \"antibiotics\")\n      list add (meds, \"sedative\")\n      list add (meds, \"stimulant\")\n      list add (meds, \"multi-vitamin\")\n      ShowMenu (\"\\\"Select medication to dispense,\\\" says the ship's computer.\", meds, false) {\n        ClearScreen\n        msg (\"You hear the hum of machinery within the dispensary, followed by a faint hiss. A small indicator light on the hypospray changes from red to green.&lt;br/&gt;\")\n        hypospray.med = result\n        ShowRoomDescription\n      }\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"talkToCaptain\"&gt;&lt;![CDATA[\n    dialogue = listCaptainTopics()\n    ShowMenu (\"\", dialogue, false) {\n      switch (result) {\n        case (\"\\\"How do you feel?\\\"\") {\n          msg (\"Captain Picker sits up in his cryo pod and rubs his eyes.&lt;br/&gt;&lt;br/&gt;\\\"I'm fine,\\\" he says. \\\"Just a bit groggy.\\\"\")\n        }\n        case (\"\\\"Let me catch you up on what's been going on.\\\"\") {\n          ClearScreen\n          msg (\"You relate everything that has happened since you awoke in your cryo pod. The Captain interjects with questions occasionally, but mostly furrows his brow in concentration as he absorbs the situation.&lt;br/&gt;&lt;br/&gt;\\\"I see,\\\" he says simply as you finish. &lt;br/&gt;\")\n          play sound (\"largeexplosion1.mp3\", false, false)\n          msg (\"Just then, the Scion is rocked violently. You are thrown to the floor and hear a loud thud as the Captain is thrown into the bulkhead next to you. You scramble back to your feet.&lt;br/&gt;\")\n          captain.state = \"hurt\"\n          MoveObject (captain, cryo_quarters)\n          EnableTimer (attack)\n          EnableTimer (shipDestroyed)\n          ShowRoomDescription\n        }\n        case (\"The Scion is under attack!\") {\n          msg (\"\\\"What?\\\" exlaims the Captain. \\\"We need to get to the Bridge!\\\"&lt;br/&gt;&lt;br/&gt;He struggles to his feet and without waiting for a response, he slides down the ladder to the Crew Quarters.\")\n          MoveObject (captain, captain_chair)\n          captain.state = \"combat\"\n        }\n        case (\"What are your orders?\") {\n          msg (\"\\\"Take control of the weapon systems and destroy that ship!\\\" Captain Picker shouts.\")\n        }\n        case (\"We need to return fire!\") {\n          msg (\"\\\"I know that! I already ordered you to fire on that ship! Get to it!\\\" Captain Picker shouts angrily.\")\n        }\n        default {\n          msg (\"Captain Picker fixes you with a withering stare.\")\n        }\n      }\n    }\n    JS.scrollToEnd ()\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"internalStatus\"&gt;&lt;![CDATA[\n    if (old_rods.parent &lt;&gt; engine and new_rods.parent &lt;&gt; engine) {\n      msg (\"Warning: plasma reactor is offline. Operating on auxiliary power.\")\n    }\n    if (hull_breach.parent = space_mess_deck) {\n      msg (\"Warning: hull breach detected on Mess Deck.\")\n    }\n    if (hull.isopen = false and eng_door.locked = true) {\n      msg (\"Warning: fire detected in Engine Room.\")\n    }\n    else if (hull.isopen = true and eng_door.locked = true) {\n      msg (\"Warning: hull breach detected in Engine Room\")\n    }\n    if (new_rods.parent &lt;&gt; engine) {\n      msg (\"Warning: power levels critical.&lt;br/&gt;&lt;br/&gt;Immediate intervention is recommended to avoid loss of ship and all hands aboard.\")\n    }\n    JS.scrollToEnd ()\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"engineStatus\"&gt;\n    if (old_rods.parent = engine) {\n      msg (\"\\\"Plasma reactor is operational,\\\" replies the computer. \\\"Power output is limited due to degraded control rods.\\\"\")\n      HelperOpenObject (engine)\n    }\n    else if (new_rods.parent = engine) {\n      msg (\"\\\"Plasma reactor is operational,\\\" replies the computer. \\\"Power output within nominal operating parameters.\\\"\")\n    }\n    else {\n      msg (\"\\\"Warning: plasma reactor is offline,\\\" replies the computer with a danger chime. \\\"Operating on auxiliary power.\\\"\")\n      play sound (\"alarm03.mp3\", false, false)\n    }\n    JS.scrollToEnd ()\n  &lt;/function&gt;\n  &lt;function name=\"SetupNautical\"&gt;&lt;![CDATA[\n    game.compassdirections = ListExclude (game.compassdirections, \"\")\n    list add (game.compassdirections, \"fore\")\n    list add (game.compassdirections, \"port\")\n    list add (game.compassdirections, \"starboard\")\n    list add (game.compassdirections, \"aft\")\n    list add (game.compassdirections, \"f\")\n    list add (game.compassdirections, \"p\")\n    list add (game.compassdirections, \"sb\")\n    list add (game.compassdirections, \"a\")\n    request (SetCompassDirections, Join(game.compassdirections, \";\"))\n    go.pattern = \"^go to (?\"+Chr(60)+\"exit&gt;.*)$|^go (?\"+Chr(60)+\"exit&gt;.*)$|^(?\"+Chr(60)+\"exit&gt;forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\n    lookdir.pattern = \"^look (?\"+Chr(60)+\"exit&gt;forward|fore|starboard|aft|port|north|south|east|west|northeast|northwest|southeast|southwest|in|out|up|down|f|s|sb|a|p|n|e|w|ne|nw|se|sw|o|u|d)$\"\n    foreach (exit, AllExits()) {\n      if (StartsWith (exit.name, \"fore\")) {\n        exit.alias = \"fore\"\n        exit.alt = Split(\"f;forward\")\n      }\n      if (StartsWith (exit.name, \"aft\")) {\n        exit.alias = \"aft\"\n        exit.alt = Split(\"a\")\n      }\n      if (StartsWith (exit.name, \"port\")) {\n        exit.alias = \"port\"\n        exit.alt = Split(\"p\")\n      }\n      if (StartsWith (exit.name, \"starboard\")) {\n        exit.alias = \"starboard\"\n        exit.alt = Split(\"sb\")\n      }\n    }\n    ChangeDirToNautical\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"SendToJsEval\" parameters=\"data\"&gt;&lt;![CDATA[\n    regEx = \"//\"\n    s = Chr(60) + \"br/&gt;\"\n    js = Split(data,s)\n    notes = NewStringList()\n    foreach (line, js) {\n      if (StartsWith(line,\"//\")) {\n        list add (notes, line)\n      }\n    }\n    js = ListExclude(js,notes)\n    finaljs = NewStringList()\n    foreach (line, js) {\n      code = line\n      if (IsRegExMatch(regEx,line)) {\n        list = Split(line,\"//\")\n        code = list[0]\n      }\n      list add (finaljs, code)\n    }\n    js = Join(finaljs,\"\")\n    js = Replace(js, \"[br]\", s)\n    js = Replace(js, \"[br/]\", s)\n    js = Replace(js, \"[break]\", s)\n    js = Replace(js, \"[linebreak]\", s)\n    js = Replace(js, \"[line break]\", s)\n    JS.eval (js)\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"ChangeDirToNautical\"&gt;&lt;![CDATA[\n    foreach (exit, AllExits()) {\n      if (ListCount(FilterByAttribute (ListParents(exit), \"shiptype\", true)) &gt; 0) {\n        if (exit.alias = \"north\") {\n          exit.visible = false\n          newname = \"\" + GetUniqueElementName(\"fore\")\n          create exit (newname, \"fore\", exit.parent, exit.to, \"\")\n          newexit = GetObject(newname)\n          newexit.to = exit.to\n          newexit.alt = Split(\"f;forward\")\n        }\n        else if (exit.alias = \"south\") {\n          exit.visible = false\n          newname = \"\" + GetUniqueElementName(\"aft\")\n          create exit (newname, \"aft\", exit.parent, exit.to, \"\")\n          newexit = GetObject(newname)\n          newexit.to = exit.to\n          newexit.alt = Split(\"a\")\n        }\n        else if (exit.alias = \"west\") {\n          exit.visible = false\n          newname = \"\" + GetUniqueElementName(\"port\")\n          create exit (newname, \"port\", exit.parent, exit.to, \"\")\n          newexit = GetObject(newname)\n          newexit.to = exit.to\n          newexit.alt = Split(\"p\")\n        }\n        else if (exit.alias = \"east\") {\n          exit.visible = false\n          newname = \"\" + GetUniqueElementName(\"starboard\")\n          create exit (newname, \"starboard\", exit.parent, exit.to, \"\")\n          newexit = GetObject(newname)\n          newexit.to = exit.to\n          newexit.alt = Split(\"sb\")\n        }\n      }\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;timer name=\"lights\"&gt;\n    &lt;interval&gt;120&lt;/interval&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (player.parent &lt;&gt; space_cargo_bay and player.parent &lt;&gt; space_engine_room and player.parent &lt;&gt; space_mess_deck) {\n        switch (game.power) {\n          case (\"low\") {\n            msg (\"&lt;br/&gt;The lights in the room flicker for a few moments before turning on again.\")\n          }\n          case (\"critical\") {\n            msg (\"&lt;br/&gt;The lights in the room switch off, leaving you in perfect blackness for a few moments before they turn on again. You shiver as you notice that the ambient temperature has dropped a few degrees.\")\n          }\n          case (\"normal\") {\n          }\n        }\n      }\n      JS.scrollToEnd ()\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n  &lt;timer name=\"powerFailure\"&gt;\n    &lt;interval&gt;900&lt;/interval&gt;\n    &lt;enabled type=\"boolean\"&gt;false&lt;/enabled&gt;\n    &lt;script&gt;&lt;![CDATA[\n      ClearScreen\n      if (new_rods.parent &lt;&gt; engine and space_suit.worn = false) {\n        play sound (\"alarm03.mp3\", false, false)\n        msg (\"\\\"Plasma reactor failure,\\\" announces the computer. \\\"Unable to maintain minimal life support functions.\\\"&lt;br/&gt;&lt;br/&gt;You feel the temperature dropping rapidly around you and you struggle to draw breath in the increasingly thin atmosphere. Within moments, you see bright spots appear before your eyes and then... darkness...&lt;br/&gt;&lt;br/&gt;You failed to save the Scion!\")\n        DecreaseScore (-5)\n        finish\n      }\n      else if (new_rods.parent &lt;&gt; engine and space_suit.worn = true) {\n        play sound (\"alarm03.mp3\", false, false)\n        msg (\"\\\"Plasma reactor failure,\\\" announces the computer. \\\"Unable to maintain minimal life support functions.\\\"&lt;br/&gt;&lt;br/&gt;From within the confines of your space suit, you watch the Scion's systems shut down around you. Your air supply keeps you alive a short time longer, but with nowhere to go and no way to resurrect the Scion, you drop to your knees in despair.&lt;br/&gt;&lt;br/&gt;You failed to save the Scion!\")\n        DecreaseScore (-3)\n        finish\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n  &lt;timer name=\"powerWarning\"&gt;\n    &lt;interval&gt;900&lt;/interval&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (new_rods.parent &lt;&gt; engine) {\n        EnableTimer (powerFailure)\n        game.power = \"critical\"\n        play sound (\"alarm03.mp3\", false, false)\n        msg (\"\\\"Warning: plasma reactor power levels have dropped to critical levels,\\\" the computer states flatly. \\\"Life support failure in 15 minutes.\\\"\")\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n  &lt;timer name=\"attack\"&gt;\n    &lt;interval&gt;60&lt;/interval&gt;\n    &lt;script&gt;&lt;![CDATA[\n      play sound (\"largeexplosion1.mp3\", false, false)\n      msg (\"&lt;br/&gt;You stagger as the ship is rocked by another direct hit. You're not sure how much more the Scion can take...\")\n      JS.scrollToEnd ()\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n  &lt;timer name=\"shipDestroyed\"&gt;\n    &lt;interval&gt;600&lt;/interval&gt;\n    &lt;script&gt;&lt;![CDATA[\n      play sound (\"largeexplosion1.mp3\", false, false)\n      msg (\"You are thrown to the deck as the Scion is blasted yet again. Secondary explosions quickly follow the initial impact and you can hear explosive decompression occuring all around you. After another few moments of violence, you have just enough time to realize that the Scion is doomed before a bright flash fills your senses.&lt;br/&gt;&lt;br/&gt;You have failed to save the Scion!\")\n      DecreaseScore (-3)\n      finish\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-07-07T10:58:59.4225892Z",
      "LastEditDate": "2018-07-07T21:18:37.7755678Z",
      "link": null
    },
    {
      "PostId": "085999e8-d784-4e4a-899c-6673ce3268aa",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That spoiler element is messed up.\r\n\r\nTry adding a line break between the ```<details>``` element and the code.  Like this:\r\n\r\n````\r\n<details>\r\n\r\n```\r\nCODE HERE\r\n```\r\n\r\n</details>\r\n````",
      "EditableFormat": "markdown",
      "HTML": "<p>That spoiler element is messed up.</p>\n<p>Try adding a line break between the <code>&lt;details&gt;</code> element and the code.  Like this:</p>\n<pre><code>&lt;details&gt;\n\n```\nCODE HERE\n```\n\n&lt;/details&gt;\n</code></pre>\n\n",
      "PostDate": "2018-07-07T19:36:35.8004698Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "399bb9ee-bf9c-495b-b402-ec64bc10bb8b",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Fixed. Sorry about that. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Fixed. Sorry about that.</p>\n\n",
      "PostDate": "2018-07-07T21:19:05.9528034Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c615aa54-9917-48a9-b9d6-a28130139716",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It's cool.  I only immediately knew what happened because I've done it before.\r\n\r\n---\r\nThe exit script has a few inconsistencies.\r\n\r\nThe most important is the bit where you add ```JS.toggleNav()```.  This is turning the nautical directions OFF in the compass pane because this toggles.  The nautical directions are already on when play begins, so this toggles them off (which switches back to the normal compass pane).\r\n\r\nOnly use ```JS.toggleNav()``` when entering or exiting a ship.\r\n\r\nEvery time ```JS.toggleNav()``` is called, the compass will switch from whatever it is displaying to whatever it is not displaying.  It if is displaying nautical directions, it will toggle to the normal directions, and vice-versa.\r\n\r\n---\r\n\r\nYour (modified) exit script, which leads from the starting room out to the cryo-quarters:\r\n\r\n```\r\nif (not ListContains(ScopeVisible(), cryo_pod)) {\r\n  if (not cryo_pod.isopen) {\r\n    msg (\"Your mind still fuzzy from the effects of prolonged cryo sleep, you push against the cryo pod's glass cover to no avail. As you slowly regain your faculties, you remember your training. Opening the cryo pod, as well as perfoming many other actions aboard the Scion, requires issuing verbal commands to the ship's computer.\")\r\n    SetTimeout (2) {\r\n      JS.eval (\"if (typeof (currentTab) !== 'string') {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the top right to issue verbal commands to the ship's computer.\\\");} else {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the bottom to issue verbal commands to the ship's computer.\\\");}\")\r\n      JS.scrollToEnd ()\r\n    }\r\n  }\r\n  else {\r\n    firsttime {\r\n      msg (\"You climb out of the pod carefully, making sure not to overexert your sluggish muscles. You still feel woozy from the effects of cryo sleep, but your senses are slowly returning to normal.\")\r\n      IncreaseScore (1)\r\n    }\r\n    otherwise {\r\n      msg (\"\")\r\n    }\r\n    MakeObjectVisible (cryo_pod)\r\n    MoveObject (player, cryo_quarters)\r\n    // Commented out the next line because it messed up the compass!\r\n    // JS.toggleNav ()\r\n    MoveObject (player, this.to)\r\n  }\r\n}\r\nelse {\r\n  MoveObject (player, cryo_quarters)\r\n}\r\n```\r\n\r\n---\r\nI commented out ```JS.toggleNav()```, and it works.\r\n\r\n---\r\nAlso remember, this needs to be on the starting room's \"Before entering **for the first time**\" script:\r\n\r\n```\r\nJS.toggleNav ()\r\ndo (nautical_buttons_turnscript, \"script\")\r\n```\r\n\r\nYou have it on plain old \"Before entering\" script, and that will toggle the compass every single time the player goes back into the pod at any point during play.",
      "EditableFormat": "markdown",
      "HTML": "<p>It's cool.  I only immediately knew what happened because I've done it before.</p>\n<hr>\n<p>The exit script has a few inconsistencies.</p>\n<p>The most important is the bit where you add <code>JS.toggleNav()</code>.  This is turning the nautical directions OFF in the compass pane because this toggles.  The nautical directions are already on when play begins, so this toggles them off (which switches back to the normal compass pane).</p>\n<p>Only use <code>JS.toggleNav()</code> when entering or exiting a ship.</p>\n<p>Every time <code>JS.toggleNav()</code> is called, the compass will switch from whatever it is displaying to whatever it is not displaying.  It if is displaying nautical directions, it will toggle to the normal directions, and vice-versa.</p>\n<hr>\n<p>Your (modified) exit script, which leads from the starting room out to the cryo-quarters:</p>\n<pre><code>if (not ListContains(ScopeVisible(), cryo_pod)) {\n  if (not cryo_pod.isopen) {\n    msg (\"Your mind still fuzzy from the effects of prolonged cryo sleep, you push against the cryo pod's glass cover to no avail. As you slowly regain your faculties, you remember your training. Opening the cryo pod, as well as perfoming many other actions aboard the Scion, requires issuing verbal commands to the ship's computer.\")\n    SetTimeout (2) {\n      JS.eval (\"if (typeof (currentTab) !== 'string') {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the top right to issue verbal commands to the ship's computer.\\\");} else {$('#divOutput').append(\\\"TUTORIAL: Click on the Computer link at the bottom to issue verbal commands to the ship's computer.\\\");}\")\n      JS.scrollToEnd ()\n    }\n  }\n  else {\n    firsttime {\n      msg (\"You climb out of the pod carefully, making sure not to overexert your sluggish muscles. You still feel woozy from the effects of cryo sleep, but your senses are slowly returning to normal.\")\n      IncreaseScore (1)\n    }\n    otherwise {\n      msg (\"\")\n    }\n    MakeObjectVisible (cryo_pod)\n    MoveObject (player, cryo_quarters)\n    // Commented out the next line because it messed up the compass!\n    // JS.toggleNav ()\n    MoveObject (player, this.to)\n  }\n}\nelse {\n  MoveObject (player, cryo_quarters)\n}\n</code></pre>\n<hr>\n<p>I commented out <code>JS.toggleNav()</code>, and it works.</p>\n<hr>\n<p>Also remember, this needs to be on the starting room's \"Before entering <strong>for the first time</strong>\" script:</p>\n<pre><code>JS.toggleNav ()\ndo (nautical_buttons_turnscript, \"script\")\n</code></pre>\n<p>You have it on plain old \"Before entering\" script, and that will toggle the compass every single time the player goes back into the pod at any point during play.</p>\n\n",
      "PostDate": "2018-07-08T03:16:17.2211823Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "28438463-053b-4531-969e-9db01529c5a7",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "To prevent errors, I have updated the turn script.\r\n\r\n```\r\n// Version 3\r\nif (ListCount(FilterByAttribute (ListParents(game.pov), \"shiptype\", true)) > 0) {\r\n  list = NewStringList()\r\n  foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\r\n    list add (list, exit.alias)\r\n  }\r\n  JS.eval (\"if(!isElementVisible('#ship-nav')){toggleNav();}\")\r\n  JS.updateShipCompass (Join(list, \"/\"))\r\n}\r\n```\r\n\r\n---\r\nIf the player is inside of a ship object*, this will toggle the compass if the nautical buttons aren't visible.\r\n\r\n\\* \"inside of a ship object\" means the player object is contained by a ship object.  This could mean the player is in an object in a room in a room inside of a ship, or any other amount of levels in between. If the top parent object is a ship, the compass should show the nautical directions when using this version of the turn script.",
      "EditableFormat": "markdown",
      "HTML": "<p>To prevent errors, I have updated the turn script.</p>\n<pre><code>// Version 3\nif (ListCount(FilterByAttribute (ListParents(game.pov), \"shiptype\", true)) &gt; 0) {\n  list = NewStringList()\n  foreach (exit, ScopeUnlockedExitsForRoom(game.pov.parent)) {\n    list add (list, exit.alias)\n  }\n  JS.eval (\"if(!isElementVisible('#ship-nav')){toggleNav();}\")\n  JS.updateShipCompass (Join(list, \"/\"))\n}\n</code></pre>\n<hr>\n<p>If the player is inside of a ship object*, this will toggle the compass if the nautical buttons aren't visible.</p>\n<p>* \"inside of a ship object\" means the player object is contained by a ship object.  This could mean the player is in an object in a room in a room inside of a ship, or any other amount of levels in between. If the top parent object is a ship, the compass should show the nautical directions when using this version of the turn script.</p>\n\n",
      "PostDate": "2018-07-08T03:38:48.1555447Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9b110c38-1f38-437b-b2ff-e3d43ce69337",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks for the corrections. I've updated my code, but I'll only be able to test on a desktop tomorrow (it works on mobile, but without a compass). \r\n\r\nA problem that remains is that two of my exits are unlocked at the start of the game when they shouldn't be. I think this is due to ChangeDirToNautical, which seems to replace my locked exits with new, unlocked exits. Couldn't this function check the locked attribute and set it on the new exit? The other part to this problem is that the doors are unlocked later through events, not with a key. So I refer to the exit by name in order to unlock it. Can the function also save the original exit name when transforming it into a nautical exit?\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks for the corrections. I've updated my code, but I'll only be able to test on a desktop tomorrow (it works on mobile, but without a compass).</p>\n<p>A problem that remains is that two of my exits are unlocked at the start of the game when they shouldn't be. I think this is due to ChangeDirToNautical, which seems to replace my locked exits with new, unlocked exits. Couldn't this function check the locked attribute and set it on the new exit? The other part to this problem is that the doors are unlocked later through events, not with a key. So I refer to the exit by name in order to unlock it. Can the function also save the original exit name when transforming it into a nautical exit?</p>\n\n",
      "PostDate": "2018-07-09T01:52:40.5044875Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e6d4115c-b1d1-4bc1-a298-30b52bbd4cf5",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm curious why this library needs to replace exits with new ones rather than just changing their aliases. But if that's necessary, it would probably be beneficial to do:\r\n\r\n```\r\nforeach (attr, ListExclude (GetAttributeNames (exit, false), Split(\"name;alias;alt\"))) {\r\n  set (newexit, attr, GetAttribute (exit, attr))\r\n}\r\n```\r\nThat way exits that are locked or have scripts (or have a door attached, or other fancy stuff) will have those attributes preserved.\r\n\r\n(News of the day: I'm a moron. I built my own nautical directions system, making it pretty flexible. So in the initialise script for any room or room-container, I can put `changeCompassDirections (this, \"north\", \"forward;fore\")` and similar, and it will affect all rooms within that one. Then I realised that I'm completely wasting my time, because I've got the compass pane disabled so I can do the same thing much easier by just changing the alias of each direction)",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm curious why this library needs to replace exits with new ones rather than just changing their aliases. But if that's necessary, it would probably be beneficial to do:</p>\n<pre><code>foreach (attr, ListExclude (GetAttributeNames (exit, false), Split(\"name;alias;alt\"))) {\n  set (newexit, attr, GetAttribute (exit, attr))\n}\n</code></pre>\n<p>That way exits that are locked or have scripts (or have a door attached, or other fancy stuff) will have those attributes preserved.</p>\n<p>(News of the day: I'm a moron. I built my own nautical directions system, making it pretty flexible. So in the initialise script for any room or room-container, I can put <code>changeCompassDirections (this, \"north\", \"forward;fore\")</code> and similar, and it will affect all rooms within that one. Then I realised that I'm completely wasting my time, because I've got the compass pane disabled so I can do the same thing much easier by just changing the alias of each direction)</p>\n\n",
      "PostDate": "2018-07-09T08:45:24.3720831Z",
      "LastEditDate": "2018-07-09T13:29:57.6289195Z",
      "link": null
    },
    {
      "PostId": "83cdeab2-2eb4-406b-88fe-52a5c35a9892",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I'm curious why this library needs to replace exits with new ones rather than just changing their aliases. \r\n\r\nAs am I.\r\n\r\n It seems like there was a reason, but I can't remember what it was...\r\n\r\nOh, it was due to exit types and the lack of types online.\r\n\r\n---\r\nI admit that this code could be better, but I am too distracted by current events to focus on it.\r\n\r\n---\r\nWill trying to change an object's name during play not throw an error? I can't test it right now, and I don't remember if I've tried, but it seems like I tried and it threw an error.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I'm curious why this library needs to replace exits with new ones rather than just changing their aliases.</p>\n</blockquote>\n<p>As am I.</p>\n<p>It seems like there was a reason, but I can't remember what it was...</p>\n<p>Oh, it was due to exit types and the lack of types online.</p>\n<hr>\n<p>I admit that this code could be better, but I am too distracted by current events to focus on it.</p>\n<hr>\n<p>Will trying to change an object's name during play not throw an error? I can't test it right now, and I don't remember if I've tried, but it seems like I tried and it threw an error.</p>\n\n",
      "PostDate": "2018-07-09T14:52:14.8830285Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6ba25b06-1a3f-4abb-ac8c-2467ba08032c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Will trying to change an object's name during play not throw an error?\r\n\r\nYes, you can't change an object's name. But there's no benefit in changing its name anyway. To change a 'west' exit into a 'port' exit, you only need to change its alias and alt. It can still inherit \"westdirection\", there's no reason to change that.\r\n\r\nAs far as I can tell, the default JS uses the types to determine which buttons to light up on the compass. So if you change an exit's \"alt\" and \"alias\" attributes while not changing the type it inherits, the compass will carry on working fine. You'd just want to override the JS `compassClick` function so that it issues the right commands; and loop over `$(\".compassbutton\")` changing their titles in case anyone hovers the mous over them.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Will trying to change an object's name during play not throw an error?</p>\n</blockquote>\n<p>Yes, you can't change an object's name. But there's no benefit in changing its name anyway. To change a 'west' exit into a 'port' exit, you only need to change its alias and alt. It can still inherit \"westdirection\", there's no reason to change that.</p>\n<p>As far as I can tell, the default JS uses the types to determine which buttons to light up on the compass. So if you change an exit's \"alt\" and \"alias\" attributes while not changing the type it inherits, the compass will carry on working fine. You'd just want to override the JS <code>compassClick</code> function so that it issues the right commands; and loop over <code>$(\".compassbutton\")</code> changing their titles in case anyone hovers the mous over them.</p>\n\n",
      "PostDate": "2018-07-09T15:24:52.3678011Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a311b24a-2dbf-4972-b719-71523d50adaf",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Based on mrangel's advice, I changed ChangeDirToNautical to this:\r\n\r\n```foreach (exit, AllExits()) {\r\n  if (ListCount(FilterByAttribute (ListParents(exit), \"shiptype\", true)) > 0) {\r\n    if (exit.alias = \"north\") {\r\n      exit.alias = \"fore\"\r\n      exit.alt = Split(\"f;forward\")\r\n    }\r\n    else if (exit.alias = \"south\") {\r\n      exit.alias = \"aft\"\r\n      exit.alt = Split(\"a\")\r\n    }\r\n    else if (exit.alias = \"west\") {\r\n      exit.alias = \"port\"\r\n      exit.alt = Split(\"p\")\r\n    }\r\n    else if (exit.alias = \"east\") {\r\n      exit.alias = \"starboard\"\r\n      exit.alt = Split(\"sb\")\r\n    }\r\n  }\r\n} \r\n```\r\n\r\nAnd it worked! My locked exits now remain locked, the compass and the text displays the nautical directions correctly!\r\n\r\nOne issue that remains is that the text output directions links allow the player to attempt to go through the locked exits, prompting my desired error message. However, the compass direction for the locked exits is disabled. Trying to figure out why...\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Based on mrangel's advice, I changed ChangeDirToNautical to this:</p>\n<pre><code>  if (ListCount(FilterByAttribute (ListParents(exit), \"shiptype\", true)) &gt; 0) {\n    if (exit.alias = \"north\") {\n      exit.alias = \"fore\"\n      exit.alt = Split(\"f;forward\")\n    }\n    else if (exit.alias = \"south\") {\n      exit.alias = \"aft\"\n      exit.alt = Split(\"a\")\n    }\n    else if (exit.alias = \"west\") {\n      exit.alias = \"port\"\n      exit.alt = Split(\"p\")\n    }\n    else if (exit.alias = \"east\") {\n      exit.alias = \"starboard\"\n      exit.alt = Split(\"sb\")\n    }\n  }\n} \n</code></pre>\n<p>And it worked! My locked exits now remain locked, the compass and the text displays the nautical directions correctly!</p>\n<p>One issue that remains is that the text output directions links allow the player to attempt to go through the locked exits, prompting my desired error message. However, the compass direction for the locked exits is disabled. Trying to figure out why...</p>\n\n",
      "PostDate": "2018-07-09T16:12:55.6561816Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d7d19c33-8202-4eab-923b-c5c97094fead",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The problem is that nautical_buttons_turnscript calls ScopeUnlockedExitsForRoom(room), which doesn't return the locked exits.\r\n\r\nSo I changed that call to ScopeExitsForRoom(room) and it solved the problem!\r\n\r\nThis now seems to be working perfectly! Thank you Richard Headkid and mrangel for all of your help!\r\n ",
      "EditableFormat": "markdown",
      "HTML": "<p>The problem is that nautical_buttons_turnscript calls ScopeUnlockedExitsForRoom(room), which doesn't return the locked exits.</p>\n<p>So I changed that call to ScopeExitsForRoom(room) and it solved the problem!</p>\n<p>This now seems to be working perfectly! Thank you Richard Headkid and mrangel for all of your help!</p>\n\n",
      "PostDate": "2018-07-09T16:18:57.6956101Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fa814e5f-2fbd-4396-95bc-d64376a87e0f",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you, Gizmodeus!\r\n\r\nYou put in just as much work as everyone else, if not more.\r\n\r\nThanks to mrangel, too (as always)!\r\n\r\n---\r\nI'll update the code in a little while.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you, Gizmodeus!</p>\n<p>You put in just as much work as everyone else, if not more.</p>\n<p>Thanks to mrangel, too (as always)!</p>\n<hr>\n<p>I'll update the code in a little while.</p>\n\n",
      "PostDate": "2018-07-09T16:30:14.5474793Z",
      "LastEditDate": "2018-07-09T16:30:35.3279593Z",
      "link": null
    },
    {
      "PostId": "16104e83-1362-416f-9542-ddf21b6f87f6",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This was my thought for the javascript:\r\n\r\n```\r\n(function () {\r\n  var directionOverrides = {};\r\n  $(\".compassbutton[title]\").each(function (i) {\r\n    if (! $(this).attr(\"data-base-title\")) {\r\n      $(this).attr(\"data-base-title\", $(this).attr(\"title\"))\r\n    }\r\n  });\r\n  changeCompass = function (directions) {\r\n    directionOverrides = directions;\r\n    $(\".compassbutton[data-base-title]\").each (function (i) {\r\n      ver dire = $(this).attr(\"data-base-title\");\r\n      if (directionOverrides.hasOwnProperty(dire)) {\r\n        if (directionOverrides[dire] == \"HIDE\") {\r\n          $(this).hide();\r\n        } else {\r\n          $(this).show();\r\n          if (directionOverrides[dire]) {\r\n            $(this).attr(\"title\", directionOverrides[dire]);\r\n          } else {\r\n            $(this).attr(\"title\", dire);\r\n          }\r\n        }\r\n      }\r\n    });\r\n  };\r\n  compassClick = function (direction) {\r\n    if (directionOverrides[direction]) {\r\n      sendCommand(\"go \"+directionOverrides[direction]);\r\n    } else {\r\n      sendCommand(direction);\r\n    }\r\n  };\r\n})();\r\n```\r\nSo instead of creating a whole new set of buttons, showing them and hiding the old ones, it changes the mouseover text and command generated by the existing buttons, and continues relying on Quest's built-in functionality to update when they're visible.\r\n\r\n(If you have an exit that inherits \"westdirection\" in the room, I think it will make the #cmdCompassW button enabled, even if that exit's alias has been changed to \"port\" and the button with the \"←\" on it has been changed to generate the command \"go port\" when clicked)\r\n\r\nIn this case, you could give any room an attribute containing a custom set of compass directions. (Not all ships have to use the same rules. Maybe the player can end up on a flat planet with \"hubwards\" and \"rimwards\" as compass points?)\r\n\r\nYou'd have a couple of scripts to handle this.\r\nAdded to the player object's `changedparent` script:\r\n```\r\nroom = this.parent\r\nwhile (not room = null) {\r\n  if (HasAttribute (room, \"compassdirections\")) {\r\n    this.compassdirections = room.compassdirections\r\n    room = null\r\n  }\r\n  else {\r\n    if (room.parent = null) {\r\n      this.compassdirections = NewStringDictionary()\r\n    }\r\n    room = room.parent\r\n  }\r\n}\r\n```\r\nand in `player.changedcompassdirections`:\r\n```\r\n  JS.changeCompass (this.compassdirections)\r\n```\r\n\r\nso the ship could have an attribute like the one in the NauticalDirections library:\r\n```\r\n    <compassdirections type=\"stringdictionary\">\r\n      <item>\r\n        <key>north</key>\r\n        <value>fore</value>\r\n      </item>\r\n      <item>\r\n        <key>east</key>\r\n        <value>starboard</value>\r\n      </item>\r\n      <item>\r\n        <key>west</key>\r\n        <value>port</value>\r\n      </item>\r\n      <item>\r\n        <key>south</key>\r\n        <value>aft</value>\r\n      </item>\r\n    </compassdirections>\r\n```\r\nand our hypothetical flat world could have a similar attribute, and they both get swapped in as necessary.\r\n\r\n(Yeah, I'm procrastinating now, messing around with this because I'm stressing about lack of book sales every time I turn to my actual work)",
      "EditableFormat": "markdown",
      "HTML": "<p>This was my thought for the javascript:</p>\n<pre><code>(function () {\n  var directionOverrides = {};\n  $(\".compassbutton[title]\").each(function (i) {\n    if (! $(this).attr(\"data-base-title\")) {\n      $(this).attr(\"data-base-title\", $(this).attr(\"title\"))\n    }\n  });\n  changeCompass = function (directions) {\n    directionOverrides = directions;\n    $(\".compassbutton[data-base-title]\").each (function (i) {\n      ver dire = $(this).attr(\"data-base-title\");\n      if (directionOverrides.hasOwnProperty(dire)) {\n        if (directionOverrides[dire] == \"HIDE\") {\n          $(this).hide();\n        } else {\n          $(this).show();\n          if (directionOverrides[dire]) {\n            $(this).attr(\"title\", directionOverrides[dire]);\n          } else {\n            $(this).attr(\"title\", dire);\n          }\n        }\n      }\n    });\n  };\n  compassClick = function (direction) {\n    if (directionOverrides[direction]) {\n      sendCommand(\"go \"+directionOverrides[direction]);\n    } else {\n      sendCommand(direction);\n    }\n  };\n})();\n</code></pre>\n<p>So instead of creating a whole new set of buttons, showing them and hiding the old ones, it changes the mouseover text and command generated by the existing buttons, and continues relying on Quest's built-in functionality to update when they're visible.</p>\n<p>(If you have an exit that inherits \"westdirection\" in the room, I think it will make the #cmdCompassW button enabled, even if that exit's alias has been changed to \"port\" and the button with the \"←\" on it has been changed to generate the command \"go port\" when clicked)</p>\n<p>In this case, you could give any room an attribute containing a custom set of compass directions. (Not all ships have to use the same rules. Maybe the player can end up on a flat planet with \"hubwards\" and \"rimwards\" as compass points?)</p>\n<p>You'd have a couple of scripts to handle this.<br>\nAdded to the player object's <code>changedparent</code> script:</p>\n<pre><code>room = this.parent\nwhile (not room = null) {\n  if (HasAttribute (room, \"compassdirections\")) {\n    this.compassdirections = room.compassdirections\n    room = null\n  }\n  else {\n    if (room.parent = null) {\n      this.compassdirections = NewStringDictionary()\n    }\n    room = room.parent\n  }\n}\n</code></pre>\n<p>and in <code>player.changedcompassdirections</code>:</p>\n<pre><code>  JS.changeCompass (this.compassdirections)\n</code></pre>\n<p>so the ship could have an attribute like the one in the NauticalDirections library:</p>\n<pre><code>    &lt;compassdirections type=\"stringdictionary\"&gt;\n      &lt;item&gt;\n        &lt;key&gt;north&lt;/key&gt;\n        &lt;value&gt;fore&lt;/value&gt;\n      &lt;/item&gt;\n      &lt;item&gt;\n        &lt;key&gt;east&lt;/key&gt;\n        &lt;value&gt;starboard&lt;/value&gt;\n      &lt;/item&gt;\n      &lt;item&gt;\n        &lt;key&gt;west&lt;/key&gt;\n        &lt;value&gt;port&lt;/value&gt;\n      &lt;/item&gt;\n      &lt;item&gt;\n        &lt;key&gt;south&lt;/key&gt;\n        &lt;value&gt;aft&lt;/value&gt;\n      &lt;/item&gt;\n    &lt;/compassdirections&gt;\n</code></pre>\n<p>and our hypothetical flat world could have a similar attribute, and they both get swapped in as necessary.</p>\n<p>(Yeah, I'm procrastinating now, messing around with this because I'm stressing about lack of book sales every time I turn to my actual work)</p>\n\n",
      "PostDate": "2018-07-09T17:55:30.167917Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
