{
  "Topic": {
    "TopicId": "4526",
    "ForumId": "10",
    "Title": "Locked container opens without key",
    "LastUpdated": "2014-08-08T13:00:08+01:00",
    "ReplyCount": 13
  },
  "Posts": [
    {
      "PostId": "29719",
      "UserId": 0,
      "Username": "Dominia",
      "UserAvatar": null,
      "UserGravatar": "f66cc0f1653f7a22cdb1b7718b7390ef",
      "EditableText": "I am doing the tutorial and when I get to the 'Using lockable containers' section, my locked box containing the defibrillator opens without the key. \n\nI created a &quot;box&quot; object in the lounge and made it a closed container. I moved the &quot;defibrillator&quot; object to the box. I added a &quot;small brass key&quot; object on the table (surface) in the kitchen and I made it takeable. I set the &quot;box&quot; object as lockable and locked with a key of &quot;small brass key&quot;.\n\nWhen I run the game. I can do &quot;open box&quot; as soon as I enter the game, without the key which is still sitting on the table in the kitchen.\n\nI don't have access to the Issue Tracker forum so I can't search there and any search result I run across in the open forums isn't answering my question.\n\n I am attaching a stripped down version that demonstrates the issue I am having. I assume I am missing something basic. Any help would be appreciated.",
      "EditableFormat": "bbcode",
      "HTML": "I am doing the tutorial and when I get to the 'Using lockable containers' section, my locked box containing the defibrillator opens without the key. <br/><br/>I created a &quot;box&quot; object in the lounge and made it a closed container. I moved the &quot;defibrillator&quot; object to the box. I added a &quot;small brass key&quot; object on the table (surface) in the kitchen and I made it takeable. I set the &quot;box&quot; object as lockable and locked with a key of &quot;small brass key&quot;.<br/><br/>When I run the game. I can do &quot;open box&quot; as soon as I enter the game, without the key which is still sitting on the table in the kitchen.<br/><br/>I don't have access to the Issue Tracker forum so I can't search there and any search result I run across in the open forums isn't answering my question.<br/><br/> I am attaching a stripped down version that demonstrates the issue I am having. I assume I am missing something basic. Any help would be appreciated.<div><a href=\"/forumattachments/982/Test.aslx\">Test.aslx</a></div>",
      "PostDate": "2014-08-06T18:50:47+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29722",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Running your attached test file (with no changes), I get this:\n\nA lounge\nThis lounge is not just for lizards.\nYou can see a box.\nYou can go south.\n\n&gt; open box\nIt is locked.\n\n&gt; south\n\nA kitchen\nThis is a bright cheery kitchen for bright cheery people.\nYou can see a table (on which there is a small brass key).\nYou can go north.\n\n&gt; take small brass key\nYou pick it up.\n\n&gt; north\n\nA lounge\nThis lounge is not just for lizards.\nYou can see a box.\nYou can go south.\n\n&gt; open box\nUnlocked.\nYou open it.\nIt contains a defibrillator.",
      "EditableFormat": "bbcode",
      "HTML": "Running your attached test file (with no changes), I get this:<br/><br/>A lounge<br/>This lounge is not just for lizards.<br/>You can see a box.<br/>You can go south.<br/><br/>&gt; open box<br/>It is locked.<br/><br/>&gt; south<br/><br/>A kitchen<br/>This is a bright cheery kitchen for bright cheery people.<br/>You can see a table (on which there is a small brass key).<br/>You can go north.<br/><br/>&gt; take small brass key<br/>You pick it up.<br/><br/>&gt; north<br/><br/>A lounge<br/>This lounge is not just for lizards.<br/>You can see a box.<br/>You can go south.<br/><br/>&gt; open box<br/>Unlocked.<br/>You open it.<br/>It contains a defibrillator.",
      "PostDate": "2014-08-06T19:50:12+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29723",
      "UserId": 0,
      "Username": "Dominia",
      "UserAvatar": null,
      "UserGravatar": "f66cc0f1653f7a22cdb1b7718b7390ef",
      "EditableText": "When I run it, I get this:\n\nA lounge\nThis lounge is not just for lizards.\nYou can see a box.\nYou can go south.\n\n&gt; open box\nUnlocked.\nYou open it.\nIt contains a defibrillator.\n\nIt happens with the Test.aslx in my Quest Games\\Test folder. Just for kicks, I downloaded the file attached to my above post and ran it straight from my Downloads folder and the same thing happens.\n\nVery odd.\n\nI'm running Quest 5.5.1 Build 5.5.5328.26623. I'm going to re-install since I have no idea what I did to break the engine. \n\nThanks for your help.",
      "EditableFormat": "bbcode",
      "HTML": "When I run it, I get this:<br/><br/>A lounge<br/>This lounge is not just for lizards.<br/>You can see a box.<br/>You can go south.<br/><br/>&gt; open box<br/>Unlocked.<br/>You open it.<br/>It contains a defibrillator.<br/><br/>It happens with the Test.aslx in my Quest Games\\Test folder. Just for kicks, I downloaded the file attached to my above post and ran it straight from my Downloads folder and the same thing happens.<br/><br/>Very odd.<br/><br/>I'm running Quest 5.5.1 Build 5.5.5328.26623. I'm going to re-install since I have no idea what I did to break the engine. <br/><br/>Thanks for your help.",
      "PostDate": "2014-08-06T20:07:44+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29724",
      "UserId": 0,
      "Username": "Dominia",
      "UserAvatar": null,
      "UserGravatar": "f66cc0f1653f7a22cdb1b7718b7390ef",
      "EditableText": "Uninstalled. Deleted Quest directories. Cleaned registry.\n\nRe-installed.\n\nRan the Test game. Same thing happens whether I play it from the editor or play it from the recent list.\n\nThanks to jaynabonne for looking at it. No idea what I did to break this functionality in my install but I'm just going to continue to power through the tutorial and check on another PC later.",
      "EditableFormat": "bbcode",
      "HTML": "Uninstalled. Deleted Quest directories. Cleaned registry.<br/><br/>Re-installed.<br/><br/>Ran the Test game. Same thing happens whether I play it from the editor or play it from the recent list.<br/><br/>Thanks to jaynabonne for looking at it. No idea what I did to break this functionality in my install but I'm just going to continue to power through the tutorial and check on another PC later.",
      "PostDate": "2014-08-06T20:25:18+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29725",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "I haven't upgraded to 5.5.1 yet. I'm still on 5.5. I'll try with that latest version and see what I get.",
      "EditableFormat": "bbcode",
      "HTML": "I haven't upgraded to 5.5.1 yet. I'm still on 5.5. I'll try with that latest version and see what I get.",
      "PostDate": "2014-08-06T20:28:02+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29726",
      "UserId": 0,
      "Username": "Dominia",
      "UserAvatar": null,
      "UserGravatar": "f66cc0f1653f7a22cdb1b7718b7390ef",
      "EditableText": "Ok so apparently I was unable to keep calm and carry on with the tutorial so I continued poking at the issue and discovered the following.\n\nIf I set autounlock to false then it works as expected with the box remaining locked until I get the key from the kitchen.\n\nWhen I set autounlock to true, the box opens even without the key in inventory.\n\nNot sure if this is just me fixing things after having broken them or if it's an actual issue with the build I am using in general.\n\nAnyway, now that I have it working as expected, I am diving back in to play with all the things.",
      "EditableFormat": "bbcode",
      "HTML": "Ok so apparently I was unable to keep calm and carry on with the tutorial so I continued poking at the issue and discovered the following.<br/><br/>If I set autounlock to false then it works as expected with the box remaining locked until I get the key from the kitchen.<br/><br/>When I set autounlock to true, the box opens even without the key in inventory.<br/><br/>Not sure if this is just me fixing things after having broken them or if it's an actual issue with the build I am using in general.<br/><br/>Anyway, now that I have it working as expected, I am diving back in to play with all the things.",
      "PostDate": "2014-08-06T21:09:45+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29727",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "chuckles, the defibilator part of the tutorial confused me too, as I also had a problem with getting it to work, but this was with a different issue with it and back a few quest versions. Keep up with the tutorial, you seem to be doing well with it, as it's a good first place source to get started with quest.",
      "EditableFormat": "bbcode",
      "HTML": "chuckles, the defibilator part of the tutorial confused me too, as I also had a problem with getting it to work, but this was with a different issue with it and back a few quest versions. Keep up with the tutorial, you seem to be doing well with it, as it's a good first place source to get started with quest.",
      "PostDate": "2014-08-07T01:32:52+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29728",
      "UserId": 0,
      "Username": "Dominia",
      "UserAvatar": null,
      "UserGravatar": "f66cc0f1653f7a22cdb1b7718b7390ef",
      "EditableText": "My understanding is that having autounlock set to true allows the player to type\n\nopen box\n\nand as long as the correct key(s) is/are in inventory, the container will open. So autounlock is basically a convenience so the player doesn't have to type 'unlock box' and then 'open box'.\n\nHowever, in the build I am running, having autounlock set to true allows the player to type\n\nopen box\n\nand the box opens without having the correct (or any) key in inventory.\n\nThe problem only goes away when autounlock is set to false.",
      "EditableFormat": "bbcode",
      "HTML": "My understanding is that having autounlock set to true allows the player to type<br/><br/>open box<br/><br/>and as long as the correct key(s) is/are in inventory, the container will open. So autounlock is basically a convenience so the player doesn't have to type 'unlock box' and then 'open box'.<br/><br/>However, in the build I am running, having autounlock set to true allows the player to type<br/><br/>open box<br/><br/>and the box opens without having the correct (or any) key in inventory.<br/><br/>The problem only goes away when autounlock is set to false.",
      "PostDate": "2014-08-07T15:13:25+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29729",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "I downloaded 5.5.1, and now it fails for me the same way as it does for you. So something has been broken between 5.5 and 5.5.1.",
      "EditableFormat": "bbcode",
      "HTML": "I downloaded 5.5.1, and now it fails for me the same way as it does for you. So something has been broken between 5.5 and 5.5.1.",
      "PostDate": "2014-08-07T19:48:10+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29730",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "The problem is that the box object has &quot;key&quot; and &quot;keycount&quot; but not &quot;key1&quot;. That causes the function AllKeysAvailable to always return true. \n\nIf you delete the attribute &quot;keycount&quot; from the box, it should work as intended. Or you can rename the attribute &quot;key&quot; to &quot;key1&quot;.",
      "EditableFormat": "bbcode",
      "HTML": "The problem is that the box object has &quot;key&quot; and &quot;keycount&quot; but not &quot;key1&quot;. That causes the function AllKeysAvailable to always return true. <br/><br/>If you delete the attribute &quot;keycount&quot; from the box, it should work as intended. Or you can rename the attribute &quot;key&quot; to &quot;key1&quot;.",
      "PostDate": "2014-08-07T19:58:00+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29731",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Actually, I take back what I said - it won't fix it. There is no workaround, short of modifying the code. There's a more insidious problem with AllKeysAvailable, and it's due to a quirk in Quest (unless it's been changed?).\n\nThe code is this:\n\n[code:29310br4]  &lt;function name=&quot;AllKeysAvailable&quot; parameters=&quot;object&quot; type=&quot;boolean&quot;&gt;\n    if (not HasInt(object,&quot;keycount&quot;) and HasObject(object, &quot;key&quot;)) {\n      object&#46;keycount = 1\n      object&#46;key1 = object&#46;key\n    }\n    for (x, 1, object&#46;keycount) {\n      keyname = &quot;key&quot; + ToString(x)\n      if (HasObject(object, keyname)) {\n        if (not ListContains(ScopeInventory(), GetAttribute(object, keyname))) {\n          return (false)\n        }\n      }\n    }  \n    return (true)\n  &lt;/function&gt;[/code:29310br4]\nThe problem is that &quot;return&quot; sets the return value but *does not change program flow*. This has been a problem for those used to other languages for a while. So in the above code, the return(false) in the if may get executed, but the return(true) at the end will *always* be executed, even if the &quot;if&quot; is - because the code doesn't jump out of the function when it hits that return.",
      "EditableFormat": "bbcode",
      "HTML": "Actually, I take back what I said - it won't fix it. There is no workaround, short of modifying the code. There's a more insidious problem with AllKeysAvailable, and it's due to a quirk in Quest (unless it's been changed?).<br/><br/>The code is this:<br/><br/><pre><code>  &lt;function name=&quot;AllKeysAvailable&quot; parameters=&quot;object&quot; type=&quot;boolean&quot;&gt;<br/>    if (not HasInt(object,&quot;keycount&quot;) and HasObject(object, &quot;key&quot;)) {<br/>      object&#46;keycount = 1<br/>      object&#46;key1 = object&#46;key<br/>    }<br/>    for (x, 1, object&#46;keycount) {<br/>      keyname = &quot;key&quot; + ToString(x)<br/>      if (HasObject(object, keyname)) {<br/>        if (not ListContains(ScopeInventory(), GetAttribute(object, keyname))) {<br/>          return (false)<br/>        }<br/>      }<br/>    }  <br/>    return (true)<br/>  &lt;/function&gt;</code></pre><br/>The problem is that &quot;return&quot; sets the return value but *does not change program flow*. This has been a problem for those used to other languages for a while. So in the above code, the return(false) in the if may get executed, but the return(true) at the end will *always* be executed, even if the &quot;if&quot; is - because the code doesn't jump out of the function when it hits that return.",
      "PostDate": "2014-08-07T20:04:43+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29732",
      "UserId": 0,
      "Username": "Pertex",
      "UserAvatar": "5940_1369854251.gif",
      "UserGravatar": "4cc1e52f99452e841ecf4cbee9eadde9",
      "EditableText": "Really? I thought Alex changed that with Q5.5: \nThe “return” statement now immediately exits the function.",
      "EditableFormat": "bbcode",
      "HTML": "Really? I thought Alex changed that with Q5.5: <br/>The “return” statement now immediately exits the function.",
      "PostDate": "2014-08-07T22:08:00+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29733",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Ah ok. I missed that. Then it's the first thing I said. lol <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->\n\nThat's good to know.",
      "EditableFormat": "bbcode",
      "HTML": "Ah ok. I missed that. Then it's the first thing I said. lol <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --><br/><br/>That's good to know.",
      "PostDate": "2014-08-07T22:26:50+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "29735",
      "UserId": 0,
      "Username": "Dominia",
      "UserAvatar": null,
      "UserGravatar": "f66cc0f1653f7a22cdb1b7718b7390ef",
      "EditableText": "Thanks guys! You rock!",
      "EditableFormat": "bbcode",
      "HTML": "Thanks guys! You rock!",
      "PostDate": "2014-08-08T13:00:08+01:00",
      "LastEditDate": null
    }
  ]
}