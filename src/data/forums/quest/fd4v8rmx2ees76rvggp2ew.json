{
  "Topic": {
    "TopicId": "fd4v8rmx2ees76rvggp2ew",
    "ForumId": "10",
    "Title": "Try attaching",
    "LastUpdated": "2019-11-07T08:27:46.8302051Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "de11d1a3-8fa7-413b-a40f-ecf5d8a6fb8f",
      "UserId": 445293,
      "Username": "Johnshin111",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a370fbd48b0549527907957df24afc72?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi all,\r\nI have set up a series of \"run script after x seconds\" in a cluster of rooms, which force the player to keep moving between rooms before the countdown expires in order to escape it each time. However, the countdown continues after players have left the room and it just stacks infinitely on top of any new ones activated.\r\n\r\nI tried attaching an If player is in room requirement to the scripts, but it still continues running if they leave it does not make the script independent of that room. Is there any way I can shut down the scripts after the player leaves the room they are in, preferably with built in functions as opposed to manually written scripts.\r\nThanks\r\n\r\nDoan",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi all,<br>\nI have set up a series of \"run script after x seconds\" in a cluster of rooms, which force the player to keep moving between rooms before the countdown expires in order to escape it each time. However, the countdown continues after players have left the room and it just stacks infinitely on top of any new ones activated.</p>\n<p>I tried attaching an If player is in room requirement to the scripts, but it still continues running if they leave it does not make the script independent of that room. Is there any way I can shut down the scripts after the player leaves the room they are in, preferably with built in functions as opposed to manually written scripts.<br>\nThanks</p>\n<p>Doan</p>\n\n",
      "PostDate": "2019-11-07T08:27:46.8302051Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "777ec1ee-aedd-4d52-b082-85aaac185a21",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I already posted a pretty long answer to this question.\r\n\r\nNot sure if you've posted the same message before and not read the answers, or if this is a spambot repeating old posts. Can someone find the original post?",
      "EditableFormat": "markdown",
      "HTML": "<p>I already posted a pretty long answer to this question.</p>\n<p>Not sure if you've posted the same message before and not read the answers, or if this is a spambot repeating old posts. Can someone find the original post?</p>\n\n",
      "PostDate": "2019-11-07T09:41:16.7672242Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "56324fa1-34c0-4e44-af2c-8d538c1aaf06",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This must be the post that mrangel is referring to:\r\n\r\nhttp://textadventures.co.uk/forum/quest/topic/xct1f1uxzeomp1-tnbsbow/tried-attaching\r\n\r\nStrange though, I found another post like this going back to 2016:\r\n\r\nhttps://textadventures.co.uk/forum/quest/topic/ew5aczqvm0mylmzgle9aka/stop-script-after-leaving-a-room\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>This must be the post that mrangel is referring to:</p>\n<p>http://textadventures.co.uk/forum/quest/topic/xct1f1uxzeomp1-tnbsbow/tried-attaching</p>\n<p>Strange though, I found another post like this going back to 2016:</p>\n<p>https://textadventures.co.uk/forum/quest/topic/ew5aczqvm0mylmzgle9aka/stop-script-after-leaving-a-room</p>\n\n",
      "PostDate": "2019-11-07T10:22:58.903722Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "be48743d-4475-4065-a4d0-702464a167c4",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Timer scripts  are a huge pain in the ass.  I’m pretty sure I needed to run multiple intervals to make it work.  The problem is that once a timer starts, it always runs to completion even if you turn it off.  At least that is how I remember it.  \r\n\r\nI’m not at my home pc right now but I will check when I get there and post how I got a similar thing done.  Give me a couple days.  \r\n\r\nHappy gaming!",
      "EditableFormat": "markdown",
      "HTML": "<p>Timer scripts  are a huge pain in the ass.  I’m pretty sure I needed to run multiple intervals to make it work.  The problem is that once a timer starts, it always runs to completion even if you turn it off.  At least that is how I remember it.</p>\n<p>I’m not at my home pc right now but I will check when I get there and post how I got a similar thing done.  Give me a couple days.</p>\n<p>Happy gaming!</p>\n\n",
      "PostDate": "2019-11-07T13:39:13.5678757Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f288dc1b-a441-4e20-819e-afe9e56c45e9",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I apologize.  I had such a shitty time with it (pun intended) that I turned it into a turnscript instead of a timer.  **EDIT:**  See below.  This may help?\r\n\r\n```\r\nif (GetBoolean(Xanadu, \"healthy\")) {\r\n  Xanadu.sickcount = 0\r\n}\r\nelse {\r\n  if (Xanadu.sickcount = 2) {\r\n    msg (\"----<br/>Your mouth, tongue, and throat have this odd, tingling sensation.\")\r\n  }\r\n  else if (Xanadu.sickcount = 5) {\r\n    msg (\"----<br/>Aside from the tingly sensation in your mouth and throat, it now feels like little, drunk gymnasts are doing flips and twists in your gut.  In doing so, those little gymnasts are somehow also playing an odd assortment of instruments that make some of the strangest gurgling, burbling, and sloshing sounds you have ever heard.  Perhaps you should find your way to a restroom?\")\r\n  }\r\n  else if (Xanadu.sickcount = 8) {\r\n    msg (\"----<br/><i>'Oh, Dear Eight Pound, Six Ounce, Newborn Baby Jesus, in your golden, fleece diapers...'</i> you mutter as you begin your prayers.  The twirling in your stomach has escalated to an all out riot.  Whatever is in there, is fighting violently to get out.  Your esophageal and anal sphincters are now on all out 'pucker mode'.  Sweat has beaded on your brow.  It is a cold and unwelcome sweat.  You really, really, really need to find a restroom.\")\r\n  }\r\n  else if (Xanadu.sickcount = 12) {\r\n    msg (\"---<br/>You can no longer swallow your bathroom pride...<br/><br/>You drop your pants immediately where you stand.  Before they hit the floor, the eruptions begin.  There is so much leaving your body (from both ends), you quickly dehydrate and become disoriented.  You stumble around, slipping in wet puddles.  You remember dancing lights and spinning rooms.  You stumble into a cold room and pass out...<br/>---\")\r\n    SetObjectFlagOn (Xanadu, \"healthy\")\r\n    AddToInventory (rotten food)\r\n    play sound (\"fart.wav\", false, false)\r\n    MoveObject (Xanadu, Prison Cell)\r\n  }\r\n  else {\r\n    if (game.pov.parent = farthest stall) {\r\n      play sound (\"fart.wav\", false, false)\r\n      msg (\"---<br/>With your knees crossed coupled with your difficulty in standing up straight, you are having a hard time getting your pants down.<br/><br/>Just in the nick of time, you do get your pants opened up and you drop them to the floor...<br/><br/>Before you can sit down, however, the dam breaks and the flood gates open.  At first, it just sounds like a high pressure fire hose.  Sprinkled in are some odd toots and squeaks as the sulfurous emission continues.  At the tail end (no pun intended) of your fecal display, the cacophony of noises erupts into a crescendo of honks, bloots, ka-phroops, slurps, and fizzles.  Just when you thought the misery was over, the vomiting begins.  The projectile barf flies forth in a fancy array of colors.  The explosiveness of it all is enough to make Mt. Pinatubo blush.  You hurl, spew, chowdergargle, and blow chunks.  You upchuck one last time and wipe your mouth on your sleeve.  At least you are feeling a little better now.<br/><br/>You wipe your bleary, wet eyes and take in your surroundings.<br/>---\")\r\n      wait {\r\n        msg (\"---<br/>Wow.  Disgusting.  I can't even describe how unclean this stall is.  There are colors and smells and textures in here that go beyond rational explanation.  Is it possible to hold this much filth in one human stomach?  Wait... You don't remember eating anything that was neon green.  How did shit get on the ceiling?  <br/><br/>Anyway, you sheepishly back out of the stall, disappear from the restroom, and sneak off down the hallway to avoid embarrassment.  Although you feel sorry for whatever poor soul has to clean this up, you hope it gets done pretty quickly.  Ick...<br/>---\")\r\n        DisableTurnScript (sickturnscript)\r\n        MoveObject (rotten food, Item Warehouse 1)\r\n        IncreaseScore (10)\r\n        Xanadu.score = Xanadu.score + 10\r\n        MoveObject (Xanadu, Long Hallway)\r\n        UnlockExit (JCLock)\r\n        SetObjectFlagOn (Xanadu, \"healthy\")\r\n        SetObjectFlagOn (farthest stall, \"unclean\")\r\n        MoveObject (janitors cart, Filthy Restroom)\r\n      }\r\n    }\r\n  }\r\n  Xanadu.sickcount = Xanadu.sickcount + 1\r\n}\r\n```\r\n\r\nI did find this in X1:\r\n\r\n```\r\n  <timer name=\"SC Timer 1\">\r\n    <interval>10</interval>\r\n    <script><![CDATA[\r\n      msg (\"<br/>The sliver of light seems to have crept a bit across the cave floor.<br/>\")\r\n      JS.scrollToEnd ()\r\n      DisableTimer (SC Timer 1)\r\n    ]]></script>\r\n  </timer>\r\n  <timer name=\"SC Timer 2\">\r\n    <interval>20</interval>\r\n    <script><![CDATA[\r\n      msg (\"<br/>Yep.  The sliver of light is definitely moving.  It is nearly to the back of the small cave.<br/>\")\r\n      JS.scrollToEnd ()\r\n      DisableTimer (SC Timer 2)\r\n    ]]></script>\r\n  </timer>\r\n  <timer name=\"SC Timer 3\">\r\n    <interval>30</interval>\r\n    <script><![CDATA[\r\n      if (not GetBoolean(shovel, \"shovelinv\")) {\r\n        msg (\"The sliver of light has now extended all of the way across the floor of the cave.  You follow the light to the back of the cave and notice a glint reflecting back at you.\")\r\n        JS.scrollToEnd ()\r\n        MakeObjectVisible (glint of light)\r\n        JS.scrollToEnd ()\r\n      }\r\n      if (GetBoolean(shovel, \"shovelinv\")) {\r\n        msg (\"<br/>The sliver of light has now extended all of the way across the floor of the cave.<br/>\")\r\n      }\r\n      JS.scrollToEnd ()\r\n      DisableTimer (SC Timer 3)\r\n    ]]></script>\r\n  </timer>\r\n```\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I apologize.  I had such a shitty time with it (pun intended) that I turned it into a turnscript instead of a timer.  <strong>EDIT:</strong>  See below.  This may help?</p>\n<pre><code>if (GetBoolean(Xanadu, \"healthy\")) {\n  Xanadu.sickcount = 0\n}\nelse {\n  if (Xanadu.sickcount = 2) {\n    msg (\"----&lt;br/&gt;Your mouth, tongue, and throat have this odd, tingling sensation.\")\n  }\n  else if (Xanadu.sickcount = 5) {\n    msg (\"----&lt;br/&gt;Aside from the tingly sensation in your mouth and throat, it now feels like little, drunk gymnasts are doing flips and twists in your gut.  In doing so, those little gymnasts are somehow also playing an odd assortment of instruments that make some of the strangest gurgling, burbling, and sloshing sounds you have ever heard.  Perhaps you should find your way to a restroom?\")\n  }\n  else if (Xanadu.sickcount = 8) {\n    msg (\"----&lt;br/&gt;&lt;i&gt;'Oh, Dear Eight Pound, Six Ounce, Newborn Baby Jesus, in your golden, fleece diapers...'&lt;/i&gt; you mutter as you begin your prayers.  The twirling in your stomach has escalated to an all out riot.  Whatever is in there, is fighting violently to get out.  Your esophageal and anal sphincters are now on all out 'pucker mode'.  Sweat has beaded on your brow.  It is a cold and unwelcome sweat.  You really, really, really need to find a restroom.\")\n  }\n  else if (Xanadu.sickcount = 12) {\n    msg (\"---&lt;br/&gt;You can no longer swallow your bathroom pride...&lt;br/&gt;&lt;br/&gt;You drop your pants immediately where you stand.  Before they hit the floor, the eruptions begin.  There is so much leaving your body (from both ends), you quickly dehydrate and become disoriented.  You stumble around, slipping in wet puddles.  You remember dancing lights and spinning rooms.  You stumble into a cold room and pass out...&lt;br/&gt;---\")\n    SetObjectFlagOn (Xanadu, \"healthy\")\n    AddToInventory (rotten food)\n    play sound (\"fart.wav\", false, false)\n    MoveObject (Xanadu, Prison Cell)\n  }\n  else {\n    if (game.pov.parent = farthest stall) {\n      play sound (\"fart.wav\", false, false)\n      msg (\"---&lt;br/&gt;With your knees crossed coupled with your difficulty in standing up straight, you are having a hard time getting your pants down.&lt;br/&gt;&lt;br/&gt;Just in the nick of time, you do get your pants opened up and you drop them to the floor...&lt;br/&gt;&lt;br/&gt;Before you can sit down, however, the dam breaks and the flood gates open.  At first, it just sounds like a high pressure fire hose.  Sprinkled in are some odd toots and squeaks as the sulfurous emission continues.  At the tail end (no pun intended) of your fecal display, the cacophony of noises erupts into a crescendo of honks, bloots, ka-phroops, slurps, and fizzles.  Just when you thought the misery was over, the vomiting begins.  The projectile barf flies forth in a fancy array of colors.  The explosiveness of it all is enough to make Mt. Pinatubo blush.  You hurl, spew, chowdergargle, and blow chunks.  You upchuck one last time and wipe your mouth on your sleeve.  At least you are feeling a little better now.&lt;br/&gt;&lt;br/&gt;You wipe your bleary, wet eyes and take in your surroundings.&lt;br/&gt;---\")\n      wait {\n        msg (\"---&lt;br/&gt;Wow.  Disgusting.  I can't even describe how unclean this stall is.  There are colors and smells and textures in here that go beyond rational explanation.  Is it possible to hold this much filth in one human stomach?  Wait... You don't remember eating anything that was neon green.  How did shit get on the ceiling?  &lt;br/&gt;&lt;br/&gt;Anyway, you sheepishly back out of the stall, disappear from the restroom, and sneak off down the hallway to avoid embarrassment.  Although you feel sorry for whatever poor soul has to clean this up, you hope it gets done pretty quickly.  Ick...&lt;br/&gt;---\")\n        DisableTurnScript (sickturnscript)\n        MoveObject (rotten food, Item Warehouse 1)\n        IncreaseScore (10)\n        Xanadu.score = Xanadu.score + 10\n        MoveObject (Xanadu, Long Hallway)\n        UnlockExit (JCLock)\n        SetObjectFlagOn (Xanadu, \"healthy\")\n        SetObjectFlagOn (farthest stall, \"unclean\")\n        MoveObject (janitors cart, Filthy Restroom)\n      }\n    }\n  }\n  Xanadu.sickcount = Xanadu.sickcount + 1\n}\n</code></pre>\n<p>I did find this in X1:</p>\n<pre><code>  &lt;timer name=\"SC Timer 1\"&gt;\n    &lt;interval&gt;10&lt;/interval&gt;\n    &lt;script&gt;&lt;![CDATA[\n      msg (\"&lt;br/&gt;The sliver of light seems to have crept a bit across the cave floor.&lt;br/&gt;\")\n      JS.scrollToEnd ()\n      DisableTimer (SC Timer 1)\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n  &lt;timer name=\"SC Timer 2\"&gt;\n    &lt;interval&gt;20&lt;/interval&gt;\n    &lt;script&gt;&lt;![CDATA[\n      msg (\"&lt;br/&gt;Yep.  The sliver of light is definitely moving.  It is nearly to the back of the small cave.&lt;br/&gt;\")\n      JS.scrollToEnd ()\n      DisableTimer (SC Timer 2)\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n  &lt;timer name=\"SC Timer 3\"&gt;\n    &lt;interval&gt;30&lt;/interval&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not GetBoolean(shovel, \"shovelinv\")) {\n        msg (\"The sliver of light has now extended all of the way across the floor of the cave.  You follow the light to the back of the cave and notice a glint reflecting back at you.\")\n        JS.scrollToEnd ()\n        MakeObjectVisible (glint of light)\n        JS.scrollToEnd ()\n      }\n      if (GetBoolean(shovel, \"shovelinv\")) {\n        msg (\"&lt;br/&gt;The sliver of light has now extended all of the way across the floor of the cave.&lt;br/&gt;\")\n      }\n      JS.scrollToEnd ()\n      DisableTimer (SC Timer 3)\n    ]]&gt;&lt;/script&gt;\n  &lt;/timer&gt;\n</code></pre>\n\n",
      "PostDate": "2019-11-10T14:42:59.0543414Z",
      "LastEditDate": "2019-11-10T14:47:56.1993167Z",
      "link": null
    }
  ]
}
