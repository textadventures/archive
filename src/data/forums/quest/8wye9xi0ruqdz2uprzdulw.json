{
  "Topic": {
    "TopicId": "8wye9xi0ruqdz2uprzdulw",
    "ForumId": "10",
    "Title": "throw #object# error befuddlement",
    "LastUpdated": "2018-09-16T14:27:21.8864705Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "c55b3364-0068-476d-a22b-95353d950a04",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "When using  \r\n```\r\nthrow #object#\r\n```\r\nas a command, i ask the script to check if the object is breakable\r\n```\r\n if (HasAttribute(object, \"breakable\")) {\r\n   destroy (object)\r\n   msg (\"<br>You throw the \" + GetDisplayAlias (object) + \" across the room and it   breaks as it lands.\")\r\n }\r\n```\r\nfrom this example, can you tell why it might throw this error message?\r\n```\r\nError compiling expression 'object':\r\nRootExpressionElement: Cannot convert type 'element' to expression result of 'string'\r\n```\r\n***Here is the whole command: (It's a bit jumbled from copy/pasting on post)***\r\n```\r\n <command name=\"throw\">\r\n    <pattern>throw #object#; toss #object#</pattern>\r\n    <script><![CDATA[\r\n\t  if (HasAttribute(object, \"throwable\")){\r\n            if (object.parent = player) {\r\n             if (HasAttribute(player.parent, \"nofloor\")) {\r\n               object.parent = player.parent.dropdestination\r\n               ClearTurn\r\n\t       msg (\"\")\r\n               msg (\"You throw the \" + GetDisplayAlias (object) + \" and watch it fall out of sight.\")\r\n           }\r\n           else if (HasAttribute(player.parent, \"floorislava\")) {\r\n             ClearTurn\r\n             destroy (object)\r\n\t\t     msg (\"\")\r\n\t\t     msg (\"You throw the \" + GetDisplayAlias (object) + \" and watch it melt in the lava below.\")\r\n           }\r\n           else if (HasAttribute(player.parent, \"flooriswater\")) {\r\n             ClearTurn\r\n             destroy (object)\r\n\t\t     msg (\"You throw the \" + GetDisplayAlias (object) + \" and watch it sink into the water below.\")\r\n           }\r\n           else {\r\n             ClearTurn\r\n\t\t\t if (HasAttribute(object, \"breakable\")) {\r\n\t\t\t   destroy (object)\r\n\t\t\t   msg (\"<br>You throw the \" + GetDisplayAlias (object) + \" across the room and it breaks as it lands.\")\r\n\t\t\t }\r\n\t\t\t else {\r\n\t\t\t   ClearTurn\r\n\t\t\t   object.parent = player.parent.dropdestination\r\n\t\t       msg (\"<br>You throw the \" + GetDisplayAlias (object) + \" across the room.\")\r\n\t\t\t }\r\n           }\r\n\t     }\r\n         else {\r\n           ClearTurn\r\n\t\t   msg (\"\")\r\n\t\t   msg (\"You need to take the \" + GetDisplayAlias (object) + \" first.\")\r\n         }\r\n\t  }\r\n\t  else {\r\n\t    ClearTurn\r\n\t    msg (\"<br>You can not throw \" + GetDisplayAlias(object) + \".\")\r\n\t  }\r\n    ]]></script>\r\n  </command>\r\n```\r\nif I remove the attribute breakable from the object the script works. So I assume the error comes from:\r\n```\r\n else {\r\n     ClearTurn\r\n      if (HasAttribute(object, \"breakable\")) {\r\n\t destroy (object)\r\n\t msg (\"<br>You throw the \" + GetDisplayAlias (object) + \" across the room and it breaks as it lands.\")\r\n\t\t\t }\r\n```\r\n\r\n\r\n\t\t\t",
      "EditableFormat": "markdown",
      "HTML": "<p>When using</p>\n<pre><code>throw #object#\n</code></pre>\n<p>as a command, i ask the script to check if the object is breakable</p>\n<pre><code> if (HasAttribute(object, \"breakable\")) {\n   destroy (object)\n   msg (\"&lt;br&gt;You throw the \" + GetDisplayAlias (object) + \" across the room and it   breaks as it lands.\")\n }\n</code></pre>\n<p>from this example, can you tell why it might throw this error message?</p>\n<pre><code>Error compiling expression 'object':\nRootExpressionElement: Cannot convert type 'element' to expression result of 'string'\n</code></pre>\n<p><strong><em>Here is the whole command: (It's a bit jumbled from copy/pasting on post)</em></strong></p>\n<pre><code> &lt;command name=\"throw\"&gt;\n    &lt;pattern&gt;throw #object#; toss #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n\t  if (HasAttribute(object, \"throwable\")){\n            if (object.parent = player) {\n             if (HasAttribute(player.parent, \"nofloor\")) {\n               object.parent = player.parent.dropdestination\n               ClearTurn\n\t       msg (\"\")\n               msg (\"You throw the \" + GetDisplayAlias (object) + \" and watch it fall out of sight.\")\n           }\n           else if (HasAttribute(player.parent, \"floorislava\")) {\n             ClearTurn\n             destroy (object)\n\t\t     msg (\"\")\n\t\t     msg (\"You throw the \" + GetDisplayAlias (object) + \" and watch it melt in the lava below.\")\n           }\n           else if (HasAttribute(player.parent, \"flooriswater\")) {\n             ClearTurn\n             destroy (object)\n\t\t     msg (\"You throw the \" + GetDisplayAlias (object) + \" and watch it sink into the water below.\")\n           }\n           else {\n             ClearTurn\n\t\t\t if (HasAttribute(object, \"breakable\")) {\n\t\t\t   destroy (object)\n\t\t\t   msg (\"&lt;br&gt;You throw the \" + GetDisplayAlias (object) + \" across the room and it breaks as it lands.\")\n\t\t\t }\n\t\t\t else {\n\t\t\t   ClearTurn\n\t\t\t   object.parent = player.parent.dropdestination\n\t\t       msg (\"&lt;br&gt;You throw the \" + GetDisplayAlias (object) + \" across the room.\")\n\t\t\t }\n           }\n\t     }\n         else {\n           ClearTurn\n\t\t   msg (\"\")\n\t\t   msg (\"You need to take the \" + GetDisplayAlias (object) + \" first.\")\n         }\n\t  }\n\t  else {\n\t    ClearTurn\n\t    msg (\"&lt;br&gt;You can not throw \" + GetDisplayAlias(object) + \".\")\n\t  }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n<p>if I remove the attribute breakable from the object the script works. So I assume the error comes from:</p>\n<pre><code> else {\n     ClearTurn\n      if (HasAttribute(object, \"breakable\")) {\n\t destroy (object)\n\t msg (\"&lt;br&gt;You throw the \" + GetDisplayAlias (object) + \" across the room and it breaks as it lands.\")\n\t\t\t }\n</code></pre>\n\n",
      "PostDate": "2018-09-16T14:27:21.8864705Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f8990548-8cbd-467a-9cc1-e48aea97e42e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The parameter passed to `destroy` is the name of the object, not the object itself.\r\n\r\nYour code would also cause an error because you try to use GetDisplayAlias on the object to show a message after the object has already been destroyed.\r\n\r\nYou want:\r\n```\r\n if (HasAttribute(object, \"breakable\")) {\r\n   msg (\"<br>You throw the \" + GetDisplayAlias (object) + \" across the room and it breaks as it lands.\")\r\n   destroy (object.name)\r\n }\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>The parameter passed to <code>destroy</code> is the name of the object, not the object itself.</p>\n<p>Your code would also cause an error because you try to use GetDisplayAlias on the object to show a message after the object has already been destroyed.</p>\n<p>You want:</p>\n<pre><code> if (HasAttribute(object, \"breakable\")) {\n   msg (\"&lt;br&gt;You throw the \" + GetDisplayAlias (object) + \" across the room and it breaks as it lands.\")\n   destroy (object.name)\n }\n</code></pre>\n\n",
      "PostDate": "2018-09-16T14:53:56.9078068Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2020183c-f9eb-42f2-b35b-92227fd6d558",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Alternatively, you could use the function `RemoveObject()` instead of `destroy()`. This sets the object's parent to `null`, putting it out of reach of the player (it's floating in space, outside any room). In some cases this is advantageous because it guards against unexplained errors later on if an objectlist attribute somewhere contains a destroyed object.",
      "EditableFormat": "markdown",
      "HTML": "<p>Alternatively, you could use the function <code>RemoveObject()</code> instead of <code>destroy()</code>. This sets the object's parent to <code>null</code>, putting it out of reach of the player (it's floating in space, outside any room). In some cases this is advantageous because it guards against unexplained errors later on if an objectlist attribute somewhere contains a destroyed object.</p>\n\n",
      "PostDate": "2018-09-16T14:58:25.7517636Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "633bc45d-14c6-4793-9219-351731f25733",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I used  <code>RemoveObject(object)</code> and it worked. \r\n\r\nAny difference from  <code>RemoveObject(object.name)</code>?\r\n\r\nI also noticed that <code>GetDisplayAlias (object)</code> only prints the name while <code>GetDisplayName (object)</code> prints the name and adds it's prefix and suffix, which was a bit weird in the instance. ***(Just a note.)***\r\n\r\nThanks for the assist mrangel",
      "EditableFormat": "markdown",
      "HTML": "<p>I used  <code>RemoveObject(object)</code> and it worked.</p>\n<p>Any difference from  <code>RemoveObject(object.name)</code>?</p>\n<p>I also noticed that <code>GetDisplayAlias (object)</code> only prints the name while <code>GetDisplayName (object)</code> prints the name and adds it's prefix and suffix, which was a bit weird in the instance. <strong><em>(Just a note.)</em></strong></p>\n<p>Thanks for the assist mrangel</p>\n\n",
      "PostDate": "2018-09-16T18:04:30.6471743Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3481d806-4d59-4a09-ab7d-8796f1cee889",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It's `RemoveObject (object)` or `destroy (object.name)`. Using them the wrong way around will just give you an error.\r\n\r\nEach has its own problems, unfortunately. In most cases, it's easier to remove objects rather than destroy them; but if you're removing large numbers of objects (like dozens of clones), having them all existing out there in space might start to impact your game's performance.",
      "EditableFormat": "markdown",
      "HTML": "<p>It's <code>RemoveObject (object)</code> or <code>destroy (object.name)</code>. Using them the wrong way around will just give you an error.</p>\n<p>Each has its own problems, unfortunately. In most cases, it's easier to remove objects rather than destroy them; but if you're removing large numbers of objects (like dozens of clones), having them all existing out there in space might start to impact your game's performance.</p>\n\n",
      "PostDate": "2018-09-16T19:58:47.0594931Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d18c2edc-432f-4a02-aeaa-d5fc0d2ba424",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "as mrangel alluded to:\r\n\r\nif you make clones (extra/temporary Objects) or directly create your own Objects (extra/temporary Objects), during game play, then you likely want to destroy them, once you're done using them during game play\r\n\r\notherwise, the Objects are likely important Objects that you need for your game, and thus should just be \"removed\" (which just sets the Object's 'parent' Object reference/pointer Attribute to 'null', which means the Object simply is not contained within another Object, but instead the 'asl' GAME OBJECT is that Object's direct parent, the Object is being directly contained by the 'asl' GAME OBJECT), or the Object should be placed/moved/set to be within some other Object as storage, until you need to use it again\r\n\r\n-------\r\n\r\nan Object contained by another Object:\r\n\r\n```\r\n<asl version=\"550\">\r\n\r\n  <game name=\"example_game\">\r\n  </game>\r\n\r\n  <object name=\"example_object_1\">\r\n  </object>\r\n\r\n  <object name=\"example_object_2\">\r\n\r\n    <attr name=\"parent\" type=\"object\">example_object_1</attr>\r\n\r\n  </object>\r\n\r\n</asl>\r\n```\r\n\r\nor (this is the same as the above --- the above is what is really happening):\r\n\r\n```\r\n<asl version=\"550\">\r\n\r\n  <game name=\"example_game\">\r\n  </game>\r\n\r\n  <object name=\"example_object_1\">\r\n\r\n    <object name=\"example_object_2\">\r\n    </object>\r\n\r\n  </object>\r\n\r\n</asl>\r\n```\r\n\r\n-------------------\r\n\r\nusing the 'RemoveObject' helper Function:\r\n\r\n```\r\n<asl version=\"550\">\r\n\r\n  <game name=\"example_game\">\r\n\r\n    <attr name=\"start\" type=\"script\">\r\n\r\n      RemoveObject (example_object_2)\r\n\r\n    </attr>\r\n\r\n  </game>\r\n\r\n  <object name=\"example_object_1\">\r\n  </object>\r\n\r\n  <object name=\"example_object_2\">\r\n\r\n    <attr name=\"parent\" type=\"object\">example_object_1</attr>\r\n\r\n  </object>\r\n\r\n</asl>\r\n```\r\n\r\nor, setting the 'parent' Object reference/pointer Attribute to 'null' yourself:\r\n\r\n```\r\n<asl version=\"550\">\r\n\r\n  <game name=\"example_game\">\r\n\r\n    <attr name=\"start\" type=\"script\">\r\n\r\n      example_object_2.parent = null\r\n\r\n    </attr>\r\n\r\n  </game>\r\n\r\n  <object name=\"example_object_1\">\r\n  </object>\r\n\r\n  <object name=\"example_object_2\">\r\n\r\n    <attr name=\"parent\" type=\"object\">example_object_1</attr>\r\n\r\n  </object>\r\n\r\n</asl>\r\n```\r\n\r\nor, using the 'set' helper Function to set the 'parent' Object reference/pointer Attribute to 'null':\r\n\r\n```\r\n<asl version=\"550\">\r\n\r\n  <game name=\"example_game\">\r\n\r\n    <attr name=\"start\" type=\"script\">\r\n\r\n      Set (example_object_2, \"parent\", null)\r\n\r\n    </attr>\r\n\r\n  </game>\r\n\r\n  <object name=\"example_object_1\">\r\n  </object>\r\n\r\n  <object name=\"example_object_2\">\r\n\r\n    <attr name=\"parent\" type=\"object\">example_object_1</attr>\r\n\r\n  </object>\r\n\r\n</asl>\r\n```\r\n\r\n----------------\r\n\r\nwhich does this:\r\n\r\nAn Object NOT contained within another Object (the 'asl' GAME OBJECT is the direct parent of the Object):\r\n\r\n```\r\n<asl version=\"550\">\r\n\r\n  <game name=\"example_game\">\r\n  </game>\r\n\r\n  <object name=\"example_object_1\">\r\n  </object>\r\n\r\n  <object name=\"example_object_2\">\r\n  </object>\r\n\r\n</asl>\r\n```\r\n\r\n---------------------------\r\n\r\nwhereas 'destroy' actually DESTROYS the Object:\r\n\r\nfrom this:\r\n\r\n```\r\n<asl version=\"550\">\r\n\r\n  <game name=\"example_game\">\r\n\r\n    <attr name=\"start\" type=\"script\">\r\n\r\n      Destroy (example_object_2.name)\r\n\r\n    </attr>\r\n\r\n  </game>\r\n\r\n  <object name=\"example_object_1\">\r\n  </object>\r\n\r\n  <object name=\"example_object_2\">\r\n  </object>\r\n\r\n</asl>\r\n```\r\n\r\nto this:\r\n\r\n```\r\n<asl version=\"550\">\r\n\r\n  <game name=\"example_game\">\r\n  </game>\r\n\r\n  <object name=\"example_object_1\">\r\n  </object>\r\n\r\n</asl>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>as mrangel alluded to:</p>\n<p>if you make clones (extra/temporary Objects) or directly create your own Objects (extra/temporary Objects), during game play, then you likely want to destroy them, once you're done using them during game play</p>\n<p>otherwise, the Objects are likely important Objects that you need for your game, and thus should just be \"removed\" (which just sets the Object's 'parent' Object reference/pointer Attribute to 'null', which means the Object simply is not contained within another Object, but instead the 'asl' GAME OBJECT is that Object's direct parent, the Object is being directly contained by the 'asl' GAME OBJECT), or the Object should be placed/moved/set to be within some other Object as storage, until you need to use it again</p>\n<hr>\n<p>an Object contained by another Object:</p>\n<pre><code>&lt;asl version=\"550\"&gt;\n\n  &lt;game name=\"example_game\"&gt;\n  &lt;/game&gt;\n\n  &lt;object name=\"example_object_1\"&gt;\n  &lt;/object&gt;\n\n  &lt;object name=\"example_object_2\"&gt;\n\n    &lt;attr name=\"parent\" type=\"object\"&gt;example_object_1&lt;/attr&gt;\n\n  &lt;/object&gt;\n\n&lt;/asl&gt;\n</code></pre>\n<p>or (this is the same as the above --- the above is what is really happening):</p>\n<pre><code>&lt;asl version=\"550\"&gt;\n\n  &lt;game name=\"example_game\"&gt;\n  &lt;/game&gt;\n\n  &lt;object name=\"example_object_1\"&gt;\n\n    &lt;object name=\"example_object_2\"&gt;\n    &lt;/object&gt;\n\n  &lt;/object&gt;\n\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>using the 'RemoveObject' helper Function:</p>\n<pre><code>&lt;asl version=\"550\"&gt;\n\n  &lt;game name=\"example_game\"&gt;\n\n    &lt;attr name=\"start\" type=\"script\"&gt;\n\n      RemoveObject (example_object_2)\n\n    &lt;/attr&gt;\n\n  &lt;/game&gt;\n\n  &lt;object name=\"example_object_1\"&gt;\n  &lt;/object&gt;\n\n  &lt;object name=\"example_object_2\"&gt;\n\n    &lt;attr name=\"parent\" type=\"object\"&gt;example_object_1&lt;/attr&gt;\n\n  &lt;/object&gt;\n\n&lt;/asl&gt;\n</code></pre>\n<p>or, setting the 'parent' Object reference/pointer Attribute to 'null' yourself:</p>\n<pre><code>&lt;asl version=\"550\"&gt;\n\n  &lt;game name=\"example_game\"&gt;\n\n    &lt;attr name=\"start\" type=\"script\"&gt;\n\n      example_object_2.parent = null\n\n    &lt;/attr&gt;\n\n  &lt;/game&gt;\n\n  &lt;object name=\"example_object_1\"&gt;\n  &lt;/object&gt;\n\n  &lt;object name=\"example_object_2\"&gt;\n\n    &lt;attr name=\"parent\" type=\"object\"&gt;example_object_1&lt;/attr&gt;\n\n  &lt;/object&gt;\n\n&lt;/asl&gt;\n</code></pre>\n<p>or, using the 'set' helper Function to set the 'parent' Object reference/pointer Attribute to 'null':</p>\n<pre><code>&lt;asl version=\"550\"&gt;\n\n  &lt;game name=\"example_game\"&gt;\n\n    &lt;attr name=\"start\" type=\"script\"&gt;\n\n      Set (example_object_2, \"parent\", null)\n\n    &lt;/attr&gt;\n\n  &lt;/game&gt;\n\n  &lt;object name=\"example_object_1\"&gt;\n  &lt;/object&gt;\n\n  &lt;object name=\"example_object_2\"&gt;\n\n    &lt;attr name=\"parent\" type=\"object\"&gt;example_object_1&lt;/attr&gt;\n\n  &lt;/object&gt;\n\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>which does this:</p>\n<p>An Object NOT contained within another Object (the 'asl' GAME OBJECT is the direct parent of the Object):</p>\n<pre><code>&lt;asl version=\"550\"&gt;\n\n  &lt;game name=\"example_game\"&gt;\n  &lt;/game&gt;\n\n  &lt;object name=\"example_object_1\"&gt;\n  &lt;/object&gt;\n\n  &lt;object name=\"example_object_2\"&gt;\n  &lt;/object&gt;\n\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>whereas 'destroy' actually DESTROYS the Object:</p>\n<p>from this:</p>\n<pre><code>&lt;asl version=\"550\"&gt;\n\n  &lt;game name=\"example_game\"&gt;\n\n    &lt;attr name=\"start\" type=\"script\"&gt;\n\n      Destroy (example_object_2.name)\n\n    &lt;/attr&gt;\n\n  &lt;/game&gt;\n\n  &lt;object name=\"example_object_1\"&gt;\n  &lt;/object&gt;\n\n  &lt;object name=\"example_object_2\"&gt;\n  &lt;/object&gt;\n\n&lt;/asl&gt;\n</code></pre>\n<p>to this:</p>\n<pre><code>&lt;asl version=\"550\"&gt;\n\n  &lt;game name=\"example_game\"&gt;\n  &lt;/game&gt;\n\n  &lt;object name=\"example_object_1\"&gt;\n  &lt;/object&gt;\n\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2018-09-19T05:02:47.1849082Z",
      "LastEditDate": "2018-09-19T05:09:44.4396591Z",
      "link": null
    }
  ]
}
