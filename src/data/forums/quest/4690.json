{
  "Topic": {
    "TopicId": "4690",
    "ForumId": "10",
    "Title": "Trouble with wait script",
    "LastUpdated": "2014-10-29T14:59:52+00:00",
    "ReplyCount": 12
  },
  "Posts": [
    {
      "PostId": "30918",
      "UserId": 0,
      "Username": "miepmiep",
      "UserAvatar": null,
      "UserGravatar": "ed66f7558785eaaa75f54e92064fc35c",
      "EditableText": "Hi there,\n\nI have &quot;finished&quot; (sort of) writing an educational game on statitistics in dutch for my students, and I'm testing it now.\nOne of my testers gets 'only one wait can be in progress' errors while playing. We didn't record her game and I am not able to reproduce it, so I can't produce a walkthrough that shows this problem.\n\nI think it happens because I use some turn time scripts, with waits in it, that probably just showed up while she was in another wait. Is this possible? \n\nAnd, am I correct that a turnscript does not interrupt while inside a function? Because then, this would probably solve my problem.\n\nI hope my question is understandable!\n\nThanks in advance.",
      "EditableFormat": "bbcode",
      "HTML": "Hi there,<br/><br/>I have &quot;finished&quot; (sort of) writing an educational game on statitistics in dutch for my students, and I'm testing it now.<br/>One of my testers gets 'only one wait can be in progress' errors while playing. We didn't record her game and I am not able to reproduce it, so I can't produce a walkthrough that shows this problem.<br/><br/>I think it happens because I use some turn time scripts, with waits in it, that probably just showed up while she was in another wait. Is this possible? <br/><br/>And, am I correct that a turnscript does not interrupt while inside a function? Because then, this would probably solve my problem.<br/><br/>I hope my question is understandable!<br/><br/>Thanks in advance.",
      "PostDate": "2014-10-27T08:51:02+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30920",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Were these being run online or via the desktop version? If online, would it be possible to get the link? <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->\n\nSomething is definitely invoking a wait while another wait is active. It's hard to tell without seeing some code to know how for sure how that's happening.\n\nAs far as the turn script question goes, I'd probably say no, but I'm not sure what you're asking. (Which function are you referring to in your question and/or how would it solve your problem?)",
      "EditableFormat": "bbcode",
      "HTML": "Were these being run online or via the desktop version? If online, would it be possible to get the link? <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --><br/><br/>Something is definitely invoking a wait while another wait is active. It's hard to tell without seeing some code to know how for sure how that's happening.<br/><br/>As far as the turn script question goes, I'd probably say no, but I'm not sure what you're asking. (Which function are you referring to in your question and/or how would it solve your problem?)",
      "PostDate": "2014-10-27T10:28:47+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30921",
      "UserId": 0,
      "Username": "miepmiep",
      "UserAvatar": null,
      "UserGravatar": "ed66f7558785eaaa75f54e92064fc35c",
      "EditableText": "It was written offline, runs online, but it is in Dutch, so it would be hard for you to walk through the game without being extremely bored (assuming you don't speak dutch). Ofcourse I can give you the link ([url:33mp1xli]http&#58;//play&#46;textadventures&#46;co&#46;uk/Play&#46;aspx?id=ds6sgjtxpkingoq63byz3a[/url:33mp1xli]), or (possibly better) attach the gamefile, so you could look at the code. That would be great!\n\nHowever, what I meant with the function remark, was that it seems to me that if I use &quot;SetTurnTimeout&quot;  on, like, 15, and I count the turns while playing, it doesn't interrupt while I'm in some kind of function that I wrote myself (something with 'get input's and looping on itself when the answer is wrong). \n\nI have some scripts that work with SetTurnTimeout that start counting after the player for example has entered a certain room, or even follow up another SetTurnTimeout. They obviously showed up just when the player was &quot;waiting&quot; for something else and created an error. However, I don't seem to be able to get the same error, and it looks like my functions aren't interrupted. So, if I only use &quot;waits&quot; in my functions, that would solve my problem. Does that make any sense?\n\nThe error happened around the &quot;ijzeren deur&quot; &quot;bronzen deur&quot; and &quot;gouden deur&quot; and the script that caused the problem was probably invoked by entering &quot;vergaderruimte&quot;. \n\nI hope this makes some sense to you <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "It was written offline, runs online, but it is in Dutch, so it would be hard for you to walk through the game without being extremely bored (assuming you don't speak dutch). Ofcourse I can give you the link (<a href=\"http&#58;//play&#46;textadventures&#46;co&#46;uk/Play&#46;aspx?id=ds6sgjtxpkingoq63byz3a\" rel=\"nofollow\">http&#58;//play&#46;textadventures&#46;co&#46;uk/Play&#46;aspx?id=ds6sgjtxpkingoq63byz3a</a>), or (possibly better) attach the gamefile, so you could look at the code. That would be great!<br/><br/>However, what I meant with the function remark, was that it seems to me that if I use &quot;SetTurnTimeout&quot;  on, like, 15, and I count the turns while playing, it doesn't interrupt while I'm in some kind of function that I wrote myself (something with 'get input's and looping on itself when the answer is wrong). <br/><br/>I have some scripts that work with SetTurnTimeout that start counting after the player for example has entered a certain room, or even follow up another SetTurnTimeout. They obviously showed up just when the player was &quot;waiting&quot; for something else and created an error. However, I don't seem to be able to get the same error, and it looks like my functions aren't interrupted. So, if I only use &quot;waits&quot; in my functions, that would solve my problem. Does that make any sense?<br/><br/>The error happened around the &quot;ijzeren deur&quot; &quot;bronzen deur&quot; and &quot;gouden deur&quot; and the script that caused the problem was probably invoked by entering &quot;vergaderruimte&quot;. <br/><br/>I hope this makes some sense to you <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --><div><a href=\"/forumattachments/1028/Statistiek Galaxy.aslx\">Statistiek Galaxy.aslx</a></div>",
      "PostDate": "2014-10-27T16:57:55+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30923",
      "UserId": 0,
      "Username": "miepmiep",
      "UserAvatar": null,
      "UserGravatar": "ed66f7558785eaaa75f54e92064fc35c",
      "EditableText": "I think I solved it.\n\nI just removed all the &quot;waits&quot; out of all the scripts that were started by a &quot;SetTurnTimeout&quot; command, and replaced them with SetTimeouts. Additionally I copied he HandleCommand command and added a line to it that makes sure that if a player has a 'freeze' flag, it does nothing at all, like you suggested in another post. That works pretty well, I think. \n\nIt's a small problem that walkthroughs can't handle the SetTimeouts very well, but that's not a problem in the game, so that's fine.",
      "EditableFormat": "bbcode",
      "HTML": "I think I solved it.<br/><br/>I just removed all the &quot;waits&quot; out of all the scripts that were started by a &quot;SetTurnTimeout&quot; command, and replaced them with SetTimeouts. Additionally I copied he HandleCommand command and added a line to it that makes sure that if a player has a 'freeze' flag, it does nothing at all, like you suggested in another post. That works pretty well, I think. <br/><br/>It's a small problem that walkthroughs can't handle the SetTimeouts very well, but that's not a problem in the game, so that's fine.",
      "PostDate": "2014-10-27T20:29:56+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30924",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "I managed to reproduce the problem (as far as I can tell) in a reduced case. See the attached. (I see now that you solved it, but here is more info anyway.)\n\nThe problem occurs if two different turn timeouts have waits and they both hit at the same time. In the sample, command &quot;t1&quot; has a turn timeout of 3, and &quot;t2&quot; has a turn timeout of 2. So if you execute t1 and then t2, they are both primed to go off on the next command. Typing some command at that point (e.g. &quot;l&quot;) will trigger them both, they both try to execute &quot;wait&quot;, and you get the problem.\n\nIt could be considered a bug in how Quest handles such things, but I don't really know what it could do instead. It has no idea that different turn timeouts will be executing waits simultaneously - and once you execute wait, something has to happen.\n\nI see that you solved it, so that's good. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "I managed to reproduce the problem (as far as I can tell) in a reduced case. See the attached. (I see now that you solved it, but here is more info anyway.)<br/><br/>The problem occurs if two different turn timeouts have waits and they both hit at the same time. In the sample, command &quot;t1&quot; has a turn timeout of 3, and &quot;t2&quot; has a turn timeout of 2. So if you execute t1 and then t2, they are both primed to go off on the next command. Typing some command at that point (e.g. &quot;l&quot;) will trigger them both, they both try to execute &quot;wait&quot;, and you get the problem.<br/><br/>It could be considered a bug in how Quest handles such things, but I don't really know what it could do instead. It has no idea that different turn timeouts will be executing waits simultaneously - and once you execute wait, something has to happen.<br/><br/>I see that you solved it, so that's good. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --><div><a href=\"/forumattachments/1029/turntimeouttest.aslx\">turntimeouttest.aslx</a></div>",
      "PostDate": "2014-10-27T20:40:25+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30925",
      "UserId": 0,
      "Username": "miepmiep",
      "UserAvatar": null,
      "UserGravatar": "ed66f7558785eaaa75f54e92064fc35c",
      "EditableText": "That is indeed what must have happened.\nI wouldn't know how to solve this in Quest either, but at least I've learned that, when using multiple turn timeouts it is not a good idea to put &quot;waits&quot; inside of them  <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --> \nThanks  for your help!",
      "EditableFormat": "bbcode",
      "HTML": "That is indeed what must have happened.<br/>I wouldn't know how to solve this in Quest either, but at least I've learned that, when using multiple turn timeouts it is not a good idea to put &quot;waits&quot; inside of them  <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --> <br/>Thanks  for your help!",
      "PostDate": "2014-10-27T21:18:39+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30928",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "I'm having a bit of trouble myself (being still a noobie with coding) with scripts' Order Structure, as I try to do too organized but complex usage of Functions, laughs.\n\nthe problem with scripts:\n\nScript 1\n|....\\\n|.... Script 2\n|\nScript 3\n|....\\\n|.... Script 4\n|\nScript 5\n\nScript 2 and Script 3 (and also: Script 4 and Script 5, and maybe too: Script 2 and Script 4) can run at the same time (which can be problematic in of itself), so if they both use a 'wait' or 'on ready' or 'get input' or 'show menu', then you get a quest error, as computers~coding can't do two same things at once.\n\nI've found that 'on ready' (using it for Script 3), doesn't wait for (Script 2) to finish, it only waits for (Script 1) to finish, thus my encountered errors of Script 2 and Script 3 (or is it Script 4, meh) conflicting with each other, argh!\n\nit's order structure is actually this from my experimentations~scenarios, in my own code work, lol:\n\nScript 1\n|....\\\n|.... Script 2\n|\nScript 2\n|....\\\n|.... Script 3\n|\nScript 3\n\n--------------\n\nthe only safe way is to have it error-free is a 'single contiguous chain' :\n\nScript 1\n........\\\n........ Script 2\n..................\\\n..................Script 3\n...........................\\\n............................Script 4\n\n-------------\n\nI haven't worked with Return Value Functions... so I don't know if this takes order priority, before another script runs (which would prevent any errors), nor have I worked with Script Dictionaries in this 'testing scenario of mine (self discovery, lol)' of the order structure of scripts.",
      "EditableFormat": "bbcode",
      "HTML": "I'm having a bit of trouble myself (being still a noobie with coding) with scripts' Order Structure, as I try to do too organized but complex usage of Functions, laughs.<br/><br/>the problem with scripts:<br/><br/>Script 1<br/>|....\\<br/>|.... Script 2<br/>|<br/>Script 3<br/>|....\\<br/>|.... Script 4<br/>|<br/>Script 5<br/><br/>Script 2 and Script 3 (and also: Script 4 and Script 5, and maybe too: Script 2 and Script 4) can run at the same time (which can be problematic in of itself), so if they both use a 'wait' or 'on ready' or 'get input' or 'show menu', then you get a quest error, as computers~coding can't do two same things at once.<br/><br/>I've found that 'on ready' (using it for Script 3), doesn't wait for (Script 2) to finish, it only waits for (Script 1) to finish, thus my encountered errors of Script 2 and Script 3 (or is it Script 4, meh) conflicting with each other, argh!<br/><br/>it's order structure is actually this from my experimentations~scenarios, in my own code work, lol:<br/><br/>Script 1<br/>|....\\<br/>|.... Script 2<br/>|<br/>Script 2<br/>|....\\<br/>|.... Script 3<br/>|<br/>Script 3<br/><br/>--------------<br/><br/>the only safe way is to have it error-free is a 'single contiguous chain' :<br/><br/>Script 1<br/>........\\<br/>........ Script 2<br/>..................\\<br/>..................Script 3<br/>...........................\\<br/>............................Script 4<br/><br/>-------------<br/><br/>I haven't worked with Return Value Functions... so I don't know if this takes order priority, before another script runs (which would prevent any errors), nor have I worked with Script Dictionaries in this 'testing scenario of mine (self discovery, lol)' of the order structure of scripts.",
      "PostDate": "2014-10-28T05:35:18+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30939",
      "UserId": 0,
      "Username": "miepmiep",
      "UserAvatar": null,
      "UserGravatar": "ed66f7558785eaaa75f54e92064fc35c",
      "EditableText": "I'm actually not sure whether you are asking another question, or replying to mine <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "I'm actually not sure whether you are asking another question, or replying to mine <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2014-10-28T18:50:22+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30944",
      "UserId": 0,
      "Username": "Silver",
      "UserAvatar": null,
      "UserGravatar": "13024be5ccbb463906b024d5bd3cb5e8",
      "EditableText": "He thinks out loud.",
      "EditableFormat": "bbcode",
      "HTML": "He thinks out loud.",
      "PostDate": "2014-10-28T20:38:48+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30958",
      "UserId": 0,
      "Username": "Avantar",
      "UserAvatar": "7009_1418309433.jpg",
      "UserGravatar": "86de2b95c147252a1c38b8d3996da855",
      "EditableText": "@miepmiep\n\nI have played your game and I am not sure how far you are with it, but so far I enjoyed it a lot. Descriptions for the lamp, table, bed...You could even lift up stuff. I guess the rabbit hole was like a worm hole? Like the fact that I had a backpack too. It is evident that a lot of work already went into it.\nSo I was following the dim lit hall all the way in the starboard direction, got locked in and ultimately shoved into outer space. Seems like a timer kicks in for you to read the conclusion of your death and then the game restarts which is actually very cool - but I am a slow reader and did not finish reading about my demise. <!-- s:-) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":-)\" title=\"Smile\" /><!-- s:-) --> (Is it possible to use a 'Wait' command instead?)\nI will be eager to play this title when finished....\n\nJust putting it out there - 'Wel gedaan!'",
      "EditableFormat": "bbcode",
      "HTML": "@miepmiep<br/><br/>I have played your game and I am not sure how far you are with it, but so far I enjoyed it a lot. Descriptions for the lamp, table, bed...You could even lift up stuff. I guess the rabbit hole was like a worm hole? Like the fact that I had a backpack too. It is evident that a lot of work already went into it.<br/>So I was following the dim lit hall all the way in the starboard direction, got locked in and ultimately shoved into outer space. Seems like a timer kicks in for you to read the conclusion of your death and then the game restarts which is actually very cool - but I am a slow reader and did not finish reading about my demise. <!-- s:-) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":-)\" title=\"Smile\" /><!-- s:-) --> (Is it possible to use a 'Wait' command instead?)<br/>I will be eager to play this title when finished....<br/><br/>Just putting it out there - 'Wel gedaan!'",
      "PostDate": "2014-10-29T08:38:08+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30959",
      "UserId": 0,
      "Username": "miepmiep",
      "UserAvatar": null,
      "UserGravatar": "ed66f7558785eaaa75f54e92064fc35c",
      "EditableText": "@Avantar,\n\nThanks for your nice words and especially your feedback. Really, really very welcome. \nIt is funny you mention the &quot;wait scripts&quot; because I just took them out, because they caused other problems (as described in this thread).  However, probably not in the part you're talking about. So I could make the timertime longer, or indeed put back in the waits. \nAny other feedback will be greatly appreciated <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "@Avantar,<br/><br/>Thanks for your nice words and especially your feedback. Really, really very welcome. <br/>It is funny you mention the &quot;wait scripts&quot; because I just took them out, because they caused other problems (as described in this thread).  However, probably not in the part you're talking about. So I could make the timertime longer, or indeed put back in the waits. <br/>Any other feedback will be greatly appreciated <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2014-10-29T09:07:55+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30961",
      "UserId": 0,
      "Username": "Avantar",
      "UserAvatar": "7009_1418309433.jpg",
      "UserGravatar": "86de2b95c147252a1c38b8d3996da855",
      "EditableText": "Probably not the correct place to give feedback on the game, but I am happy to do so when time permits and always a pleasure doing so on something well done. <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --> \n\nI often ran into the 'Wait' command problem and I guess what HK also tried to explain in his reply is that you can have the wait commands nested to eliminate the error in most cases. I guess in your case it was a little bit more unique.  <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D -->\n\nApart from entering your name in the beginning I am not sure what other input you would need from your players. If clicking on objects in the Inventory/Places panes and/or clicking on the links in the text body is all you need to progress, then you may want to consider just getting rid of the command prompt after asking for the player's name.\n\nThis will make the task lighter of having descriptions of descriptions in each room and players typing in any old thing in the command prompt and getting a not so clever response. Like 'kick the table' or something to that effect. It will also make it clear as to what you can/cannot do. \n(This is just a preference and certainly not a must)\nI am certainly going that route for my next game. <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --> \n\nThat is all the feedback I have for now until I play some more.\nI see it is almost finished. Good luck in completing it.",
      "EditableFormat": "bbcode",
      "HTML": "Probably not the correct place to give feedback on the game, but I am happy to do so when time permits and always a pleasure doing so on something well done. <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --> <br/><br/>I often ran into the 'Wait' command problem and I guess what HK also tried to explain in his reply is that you can have the wait commands nested to eliminate the error in most cases. I guess in your case it was a little bit more unique.  <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --><br/><br/>Apart from entering your name in the beginning I am not sure what other input you would need from your players. If clicking on objects in the Inventory/Places panes and/or clicking on the links in the text body is all you need to progress, then you may want to consider just getting rid of the command prompt after asking for the player's name.<br/><br/>This will make the task lighter of having descriptions of descriptions in each room and players typing in any old thing in the command prompt and getting a not so clever response. Like 'kick the table' or something to that effect. It will also make it clear as to what you can/cannot do. <br/>(This is just a preference and certainly not a must)<br/>I am certainly going that route for my next game. <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --> <br/><br/>That is all the feedback I have for now until I play some more.<br/>I see it is almost finished. Good luck in completing it.",
      "PostDate": "2014-10-29T10:23:31+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "30964",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Just avoid waits in SetTurnTimeout, especially if you have more than one in effect at once. You should be fine to use them anywhere else! <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "Just avoid waits in SetTurnTimeout, especially if you have more than one in effect at once. You should be fine to use them anywhere else! <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2014-10-29T14:59:52+00:00",
      "LastEditDate": null
    }
  ]
}