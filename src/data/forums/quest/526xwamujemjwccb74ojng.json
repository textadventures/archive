{
  "Topic": {
    "TopicId": "526xwamujemjwccb74ojng",
    "ForumId": "10",
    "Title": "Adding something to status pane (complex)",
    "LastUpdated": "2017-02-11T18:21:26.9344112Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "125199e3-2a61-4215-9231-0cc48b33a9e5",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I hate to ask this because it is quite complex but it's something that I really would like to add.\r\n\r\nIn the status pane I already have a percent completion bar, health, and score.  I would love to add to this (or another reasonable place) a status named \"Time of Day:\"  This third game I am making has lots of things that are dependent on what time of day it is.  The times of day are dawn, morning, noon, afternoon, dusk, evening, and midnight.\r\n\r\nI have an object named twentyfourhours with an attribute called changedHoursCount.  Every 15 turns the player takes the time of day progresses.  I figured if I can get \"Time of Day:\" in the status pane, I would add scripts to the changedHoursCount to change the \"Time of Day:\" accordingly.  But, I have no clue how to do it.  Jay (and others) helped a ton setting it up as it currently is.\r\n\r\nIf I need to post some game code, let me know.  Specifically.  Very specifically.\r\n\r\nHelp is greatly appreciated.  Thank you!",
      "EditableFormat": "markdown",
      "HTML": "<p>I hate to ask this because it is quite complex but it's something that I really would like to add.</p>\n<p>In the status pane I already have a percent completion bar, health, and score.  I would love to add to this (or another reasonable place) a status named \"Time of Day:\"  This third game I am making has lots of things that are dependent on what time of day it is.  The times of day are dawn, morning, noon, afternoon, dusk, evening, and midnight.</p>\n<p>I have an object named twentyfourhours with an attribute called changedHoursCount.  Every 15 turns the player takes the time of day progresses.  I figured if I can get \"Time of Day:\" in the status pane, I would add scripts to the changedHoursCount to change the \"Time of Day:\" accordingly.  But, I have no clue how to do it.  Jay (and others) helped a ton setting it up as it currently is.</p>\n<p>If I need to post some game code, let me know.  Specifically.  Very specifically.</p>\n<p>Help is greatly appreciated.  Thank you!</p>\n\n",
      "PostDate": "2017-02-11T18:21:26.9344112Z",
      "LastEditDate": null
    },
    {
      "PostId": "8c27fb79-681a-4497-8f56-f291b91c4407",
      "UserId": 291756,
      "Username": "Cr24",
      "AvatarUrl": "https://secure.gravatar.com/avatar/ef6567856a1cfe5bd7c412c162478d03?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm ultra-new to this too and drowning even in simple code.  But the way I learn is by trying to solve problems so I'm going to take a stab at this.  If I'm wrong, be gentle!\r\n\r\nSo: getting something on the status pane is a matter of setting it as a status attribute on the player.  I can think of two ways of doing this for your Time of Day.  \r\n\r\n1) The easiest one (if it works) would be to call directly on \"twentyfourhours\"'s attribute. The key would look like \"twentyfourhours.changedHoursCount\".  Then the value would be \"Time of Day: !\".  Thing is, I don't know if a player status attribute can call on attributes from other objects like that. And I'm also assuming that you are storing the names of the times of day in the changedHoursCount field.\r\n\r\n2) Write a player attribute with a script that copies the result from changedHoursCount TO the player attributes.  This would be an (expression or function?) that would just set the player attribute equal to the changedHoursCount.  THEN you can just set the status attribute key to whatever you set the player attribute to and the value would still be \"Time of Day: !\".\r\n\r\nI'm probably completely off the mark on this so I hope you get some real help soon. =)",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm ultra-new to this too and drowning even in simple code.  But the way I learn is by trying to solve problems so I'm going to take a stab at this.  If I'm wrong, be gentle!</p>\n<p>So: getting something on the status pane is a matter of setting it as a status attribute on the player.  I can think of two ways of doing this for your Time of Day.</p>\n<ol>\n<li>\n<p>The easiest one (if it works) would be to call directly on \"twentyfourhours\"'s attribute. The key would look like \"twentyfourhours.changedHoursCount\".  Then the value would be \"Time of Day: !\".  Thing is, I don't know if a player status attribute can call on attributes from other objects like that. And I'm also assuming that you are storing the names of the times of day in the changedHoursCount field.</p>\n</li>\n<li>\n<p>Write a player attribute with a script that copies the result from changedHoursCount TO the player attributes.  This would be an (expression or function?) that would just set the player attribute equal to the changedHoursCount.  THEN you can just set the status attribute key to whatever you set the player attribute to and the value would still be \"Time of Day: !\".</p>\n</li>\n</ol>\n<p>I'm probably completely off the mark on this so I hope you get some real help soon. =)</p>\n\n",
      "PostDate": "2017-02-11T21:11:20.7350731Z",
      "LastEditDate": null
    },
    {
      "PostId": "ff0bae1e-90c9-49df-8fdc-da7f60d0b827",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "the built-in 'statusattributes' String Dictionary (and it's corresponding status pane during game play) is only for Player Objects and the 'game' Game Settings Object, so this means that (aside from what magic Pixie, Jay, and other good coders can do), your Attributes must be within those Objects (Player Objects and/or the 'game' Game Settings Object), as the String Dictionary looks for its items as Attributes of its containing/parent Object (maybe you could change the built-in code of how it works to look at other Objects in whether they have the Attributes that match up with the String Dictionary's items --- again: Pixie, Jay, and good coders magic, lol). So, if you got your Attributes on another Object, you're going to also need to have those same Attributes (and keep them updated: you could use a 'changed' Script on the other Object's Attributes, setting/updated the same Attributes' values on your Player/'game' Objects) on some Player Object or the 'game' Game Settings Object, so that their 'statusattributes' String Dictionary can use them.\r\n\r\nsee here for a step by step guide demo game on the basics of Attributes (it includes status attribute usage):\r\n\r\nhttp://textadventures.co.uk/forum/quest/topic/5387/i-really-need-help#37375\r\n\r\nask if you got any questions, or need any help or further explanation of anything.",
      "EditableFormat": "markdown",
      "HTML": "<p>the built-in 'statusattributes' String Dictionary (and it's corresponding status pane during game play) is only for Player Objects and the 'game' Game Settings Object, so this means that (aside from what magic Pixie, Jay, and other good coders can do), your Attributes must be within those Objects (Player Objects and/or the 'game' Game Settings Object), as the String Dictionary looks for its items as Attributes of its containing/parent Object (maybe you could change the built-in code of how it works to look at other Objects in whether they have the Attributes that match up with the String Dictionary's items --- again: Pixie, Jay, and good coders magic, lol). So, if you got your Attributes on another Object, you're going to also need to have those same Attributes (and keep them updated: you could use a 'changed' Script on the other Object's Attributes, setting/updated the same Attributes' values on your Player/'game' Objects) on some Player Object or the 'game' Game Settings Object, so that their 'statusattributes' String Dictionary can use them.</p>\n<p>see here for a step by step guide demo game on the basics of Attributes (it includes status attribute usage):</p>\n<p>http://textadventures.co.uk/forum/quest/topic/5387/i-really-need-help#37375</p>\n<p>ask if you got any questions, or need any help or further explanation of anything.</p>\n\n",
      "PostDate": "2017-02-11T23:06:27.8703759Z",
      "LastEditDate": null
    },
    {
      "PostId": "2c360e58-0748-459e-8060-5c0b096dd9da",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay...\r\n\r\nI'm slowly making progress on this.\r\n\r\nI have successfully added a 'Status' Pane and the \"Time of Day:\" in this pane by:\r\nAdding a Status attribute (statusattribute) to game attribute tab (Key: TOD, Value: \"Time of Day:\")\r\n\r\nI also have added objects - TimeOfDay, morning, noon, evening, night - under the game in the tree of stuff.  \r\nOn the \"TimeOfDay\" object, I have set the following attributes: HoursCount, changedHoursCount, and currentTOD.\r\nHoursCount is an Integer set to 1.\r\nchangedHoursCount is an If/Else If script that checks for HoursCount integer.  If 1 then set TimeOfDay.currentTOD to morning.  If 6 then set to noon, etc.\r\ncurrentTOD is an object attribute set to morning.  With each new TOD I set it accordingly (see above).\r\n\r\nNow, I'm not sure how to retrieve the currentTOD and display it next to \"Time of Day:\" in the status pane.  I assume that is the next step.  I'm doing this in a trial game before messing with it in X3.  Below is the entire code if anyone wants to help me out with it!\r\n\r\n```\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Cycling a Day\">\r\n    <gameid>d249f751-fa06-4277-875e-79e19b7166aa</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <statusattributes type=\"stringdictionary\">\r\n      <item>\r\n        <key>TOD</key>\r\n        <value>Time of Day:</value>\r\n      </item>\r\n    </statusattributes>\r\n    <object name=\"TimeOfDay\">\r\n      <inherit name=\"editor_object\" />\r\n      <HoursCount type=\"int\">1</HoursCount>\r\n      <changedHoursCount type=\"script\">\r\n        if (TimeOfDay.HoursCount = 1) {\r\n          TimeOfDay.currentTOD = morning\r\n          msg (\"It is now morning.\")\r\n        }\r\n        else if (TimeOfDay.HoursCount = 6) {\r\n          TimeOfDay.currentTOD = noon\r\n          msg (\"It is now noon.\")\r\n        }\r\n        else if (TimeOfDay.HoursCount = 11) {\r\n          TimeOfDay.currentTOD = evening\r\n          msg (\"It is now evening.\")\r\n        }\r\n        else if (TimeOfDay.HoursCount = 16) {\r\n          TimeOfDay.currentTOD = night\r\n          msg (\"It is now night time.\")\r\n        }\r\n        else if (TimeOfDay.HoursCount = 20) {\r\n          TimeOfDay.HoursCount = 0\r\n        }\r\n      </changedHoursCount>\r\n      <currentTOD type=\"object\">morning</currentTOD>\r\n      <object name=\"night\">\r\n        <inherit name=\"editor_object\" />\r\n      </object>\r\n      <object name=\"evening\">\r\n        <inherit name=\"editor_object\" />\r\n      </object>\r\n      <object name=\"noon\">\r\n        <inherit name=\"editor_room\" />\r\n      </object>\r\n      <object name=\"morning\">\r\n        <inherit name=\"editor_object\" />\r\n      </object>\r\n    </object>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <exit alias=\"south\" to=\"room2\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"room2\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"north\" to=\"room\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n    <exit alias=\"south\" to=\"room3\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"room3\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"north\" to=\"room2\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"Warehouse\">\r\n    <inherit name=\"editor_room\" />\r\n  </object>\r\n  <turnscript name=\"HoursCounter TS\">\r\n    <script>\r\n      TimeOfDay.HoursCount = TimeOfDay.HoursCount + 1\r\n    </script>\r\n    <enabled />\r\n  </turnscript>\r\n  <walkthrough name=\"Test\">\r\n    <steps type=\"simplestringlist\">\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n      wait\r\n    </steps>\r\n  </walkthrough>\r\n</asl>\r\n```\r\nThanks in advance!",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay...</p>\n<p>I'm slowly making progress on this.</p>\n<p>I have successfully added a 'Status' Pane and the \"Time of Day:\" in this pane by:<br>\nAdding a Status attribute (statusattribute) to game attribute tab (Key: TOD, Value: \"Time of Day:\")</p>\n<p>I also have added objects - TimeOfDay, morning, noon, evening, night - under the game in the tree of stuff.<br>\nOn the \"TimeOfDay\" object, I have set the following attributes: HoursCount, changedHoursCount, and currentTOD.<br>\nHoursCount is an Integer set to 1.<br>\nchangedHoursCount is an If/Else If script that checks for HoursCount integer.  If 1 then set TimeOfDay.currentTOD to morning.  If 6 then set to noon, etc.<br>\ncurrentTOD is an object attribute set to morning.  With each new TOD I set it accordingly (see above).</p>\n<p>Now, I'm not sure how to retrieve the currentTOD and display it next to \"Time of Day:\" in the status pane.  I assume that is the next step.  I'm doing this in a trial game before messing with it in X3.  Below is the entire code if anyone wants to help me out with it!</p>\n<pre><code>&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Cycling a Day\"&gt;\n    &lt;gameid&gt;d249f751-fa06-4277-875e-79e19b7166aa&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;statusattributes type=\"stringdictionary\"&gt;\n      &lt;item&gt;\n        &lt;key&gt;TOD&lt;/key&gt;\n        &lt;value&gt;Time of Day:&lt;/value&gt;\n      &lt;/item&gt;\n    &lt;/statusattributes&gt;\n    &lt;object name=\"TimeOfDay\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;HoursCount type=\"int\"&gt;1&lt;/HoursCount&gt;\n      &lt;changedHoursCount type=\"script\"&gt;\n        if (TimeOfDay.HoursCount = 1) {\n          TimeOfDay.currentTOD = morning\n          msg (\"It is now morning.\")\n        }\n        else if (TimeOfDay.HoursCount = 6) {\n          TimeOfDay.currentTOD = noon\n          msg (\"It is now noon.\")\n        }\n        else if (TimeOfDay.HoursCount = 11) {\n          TimeOfDay.currentTOD = evening\n          msg (\"It is now evening.\")\n        }\n        else if (TimeOfDay.HoursCount = 16) {\n          TimeOfDay.currentTOD = night\n          msg (\"It is now night time.\")\n        }\n        else if (TimeOfDay.HoursCount = 20) {\n          TimeOfDay.HoursCount = 0\n        }\n      &lt;/changedHoursCount&gt;\n      &lt;currentTOD type=\"object\"&gt;morning&lt;/currentTOD&gt;\n      &lt;object name=\"night\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n      &lt;/object&gt;\n      &lt;object name=\"evening\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n      &lt;/object&gt;\n      &lt;object name=\"noon\"&gt;\n        &lt;inherit name=\"editor_room\" /&gt;\n      &lt;/object&gt;\n      &lt;object name=\"morning\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"south\" to=\"room2\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room2\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"north\" to=\"room\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"south\" to=\"room3\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room3\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"north\" to=\"room2\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"Warehouse\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=\"HoursCounter TS\"&gt;\n    &lt;script&gt;\n      TimeOfDay.HoursCount = TimeOfDay.HoursCount + 1\n    &lt;/script&gt;\n    &lt;enabled /&gt;\n  &lt;/turnscript&gt;\n  &lt;walkthrough name=\"Test\"&gt;\n    &lt;steps type=\"simplestringlist\"&gt;\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n      wait\n    &lt;/steps&gt;\n  &lt;/walkthrough&gt;\n&lt;/asl&gt;\n</code></pre>\n<p>Thanks in advance!</p>\n\n",
      "PostDate": "2017-03-04T21:54:43.7323046Z",
      "LastEditDate": null
    }
  ]
}
