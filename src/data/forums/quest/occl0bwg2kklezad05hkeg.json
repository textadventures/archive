{
  "Topic": {
    "TopicId": "occl0bwg2kklezad05hkeg",
    "ForumId": "10",
    "Title": "Help with Coding",
    "LastUpdated": "2018-01-30T05:13:19.1619934Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "c4e5cfcd-4ffa-4c80-b87a-3a4441b72d2a",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ok. I've banged my head long enough. Can someone more experienced with Quest help me. I do some programming, but the logic of Quest confounds me and doesn't work logically. So I'm going to post what I have so far below.\r\n\r\nHere is what I want. I want to be able to have a function called \"Combat\" where I can send it the name of a monster (which is an object in the game) and have the player fight one round of combat with the monster. At the room level I would like to be able to tell Quest to either fight the monster to the death (fight until Monster life < 0) or fight the monster for a number of rounds and give the player the option to flee or continue fighting. Once I get this combat portion figured out then the rest of the programming will be simple. I just cant seem to figure this out.\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"City of Thieves\">\r\n    <gameid>279159d1-909e-4eb4-af6e-c07a43336a6b</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <author>Ian Livingstone</author>\r\n    <category>Fantasy</category>\r\n    <start type=\"script\">\r\n      player.skillmax = 6 + DiceRoll (\"1d6\")\r\n      player.skillcurrent = player.skillmax\r\n      player.staminamax = 12 + DiceRoll (\"2d6\")\r\n      player.staminacurrent = player.staminamax\r\n      player.luckmax = 6 + DiceRoll (\"1d6\")\r\n      player.luckcurrent = player.luckmax\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\"><![CDATA[\r\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\r\n      while (FirstDEATHHAWK.stamina > 0) {\r\n        combat (FirstDEATHHAWK)\r\n      }\r\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\r\n    ]]></enter>\r\n    <beforeenter type=\"script\">\r\n    </beforeenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <statusattributes type=\"stringdictionary\">\r\n        <item>\r\n          <key>skilldisplay</key>\r\n          <value>Skill: !</value>\r\n        </item>\r\n        <item>\r\n          <key>staminadisplay</key>\r\n          <value>Stamina: !</value>\r\n        </item>\r\n        <item>\r\n          <key>luckdisplay</key>\r\n          <value>Luck: !</value>\r\n        </item>\r\n      </statusattributes>\r\n      <provisions type=\"int\">10</provisions>\r\n      <gold type=\"int\">0</gold>\r\n      <jewels type=\"int\">0</jewels>\r\n      <skillcurrent type=\"int\">0</skillcurrent>\r\n      <skillmax type=\"int\">0</skillmax>\r\n      <staminacurrent type=\"int\">0</staminacurrent>\r\n      <staminamax type=\"int\">0</staminamax>\r\n      <luckcurrent type=\"int\">0</luckcurrent>\r\n      <luckmax type=\"int\">0</luckmax>\r\n      <changedstaminacurrent type=\"script\"><![CDATA[\r\n        if (player.staminacurrent > player.staminamax) {\r\n          player.staminacurrent = player.staminamax\r\n        }\r\n        if (player.staminacurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\r\n      ]]></changedstaminacurrent>\r\n      <changedskillcurrent type=\"script\"><![CDATA[\r\n        if (player.skillcurrent > player.skillmax) {\r\n          player.skillcurrent = player.skillmax\r\n        }\r\n        if (player.skillcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\r\n      ]]></changedskillcurrent>\r\n      <changedluckcurrent type=\"script\"><![CDATA[\r\n        if (player.luckcurrent > player.luckmax) {\r\n          player.luckcurrent = player.luckmax\r\n        }\r\n        if (player.luckcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\r\n      ]]></changedluckcurrent>\r\n      <object name=\"sword\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Sword</alias>\r\n      </object>\r\n      <object name=\"leatherarmor\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Leather Armor</alias>\r\n      </object>\r\n      <object name=\"backpack\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Backpack</alias>\r\n      </object>\r\n    </object>\r\n  </object>\r\n  <object name=\"potionofskill\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Skill</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofstamina\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Stamina</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\r\n      player.staminacurrent = player.staminamax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofluck\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Luck</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\r\n      player.luckmax = player.luckmax + 1\r\n      player.luckcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"FirstDEATHHAWK\">\r\n    <inherit name=\"editor_object\" />\r\n    <stamina type=\"int\">5</stamina>\r\n    <skill type=\"int\">4</skill>\r\n    <alias>First DEATH HAWK</alias>\r\n  </object>\r\n  <function name=\"combat\" parameters=\"mname\" type=\"string\"><![CDATA[\r\n    msg (\"<table style=\\\"width: 75%\\\"><tr><th>Combantant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + mname.skill + \"</td> <td align=\\\"center\\\">\" + mname.stamina + \"</td></tr> </table>\")\r\n    mroll = mname.skill + DiceRoll (\"2d6\")\r\n    proll = player.skillcurrent + DiceRoll (\"2d6\")\r\n    msg (\"<b><font color=\\\"blue\\\">Player Roll: \"+ proll)\r\n    msg (\"<b><font color=\\\"red\\\">\" + mname.alias + \" Roll: \"+ mroll)\r\n    game.temporary_mname_stamina = mname.stamina\r\n    game.temp_mname = mname\r\n    if (proll > mroll) {\r\n      msg (\"You damaged your opponent for 2 Stamina!\")\r\n      game.temporary_mname_stamina = game.temporary_mname_stamina - 2\r\n      ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n        switch (result) {\r\n          case (\"Yes\") {\r\n            lroll = DiceRoll (\"2d6\")\r\n            if (lroll < player.luckcurrent) {\r\n              msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n              game.temporary_mname_stamina = game.temporary_mname_stamina - 2\r\n              player.luckcurrent = player.luckcurrent - 1\r\n            }\r\n            else {\r\n              msg (\"You luck roll was unsuccessful!\")\r\n              player.luckcurrent = player.luckcurrent - 1\r\n            }\r\n          }\r\n        }\r\n        invoke (game.myTempShowMenuScript)\r\n      }\r\n      game.myTempShowMenuScript => {\r\n        game.temp_mname.stamina = game.temporary_mname_stamina\r\n        game.temporary_mname_stamina = null\r\n        SetTurnTimeout (1) {\r\n          game.myTempShowMenuScript = null\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      msg (\"You were damaged for 2 Stamina!\")\r\n      player.staminacurrent = player.staminacurrent - 2\r\n      ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\r\n    }\r\n  ]]></function>\r\n</asl>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Ok. I've banged my head long enough. Can someone more experienced with Quest help me. I do some programming, but the logic of Quest confounds me and doesn't work logically. So I'm going to post what I have so far below.</p>\n<p>Here is what I want. I want to be able to have a function called \"Combat\" where I can send it the name of a monster (which is an object in the game) and have the player fight one round of combat with the monster. At the room level I would like to be able to tell Quest to either fight the monster to the death (fight until Monster life &lt; 0) or fight the monster for a number of rounds and give the player the option to flee or continue fighting. Once I get this combat portion figured out then the rest of the programming will be simple. I just cant seem to figure this out.</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"City of Thieves\"&gt;\n    &lt;gameid&gt;279159d1-909e-4eb4-af6e-c07a43336a6b&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;author&gt;Ian Livingstone&lt;/author&gt;\n    &lt;category&gt;Fantasy&lt;/category&gt;\n    &lt;start type=\"script\"&gt;\n      player.skillmax = 6 + DiceRoll (\"1d6\")\n      player.skillcurrent = player.skillmax\n      player.staminamax = 12 + DiceRoll (\"2d6\")\n      player.staminacurrent = player.staminamax\n      player.luckmax = 6 + DiceRoll (\"1d6\")\n      player.luckcurrent = player.luckmax\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;&lt;![CDATA[\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\n      while (FirstDEATHHAWK.stamina &gt; 0) {\n        combat (FirstDEATHHAWK)\n      }\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\n    ]]&gt;&lt;/enter&gt;\n    &lt;beforeenter type=\"script\"&gt;\n    &lt;/beforeenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;statusattributes type=\"stringdictionary\"&gt;\n        &lt;item&gt;\n          &lt;key&gt;skilldisplay&lt;/key&gt;\n          &lt;value&gt;Skill: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;staminadisplay&lt;/key&gt;\n          &lt;value&gt;Stamina: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;luckdisplay&lt;/key&gt;\n          &lt;value&gt;Luck: !&lt;/value&gt;\n        &lt;/item&gt;\n      &lt;/statusattributes&gt;\n      &lt;provisions type=\"int\"&gt;10&lt;/provisions&gt;\n      &lt;gold type=\"int\"&gt;0&lt;/gold&gt;\n      &lt;jewels type=\"int\"&gt;0&lt;/jewels&gt;\n      &lt;skillcurrent type=\"int\"&gt;0&lt;/skillcurrent&gt;\n      &lt;skillmax type=\"int\"&gt;0&lt;/skillmax&gt;\n      &lt;staminacurrent type=\"int\"&gt;0&lt;/staminacurrent&gt;\n      &lt;staminamax type=\"int\"&gt;0&lt;/staminamax&gt;\n      &lt;luckcurrent type=\"int\"&gt;0&lt;/luckcurrent&gt;\n      &lt;luckmax type=\"int\"&gt;0&lt;/luckmax&gt;\n      &lt;changedstaminacurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.staminacurrent &gt; player.staminamax) {\n          player.staminacurrent = player.staminamax\n        }\n        if (player.staminacurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\n      ]]&gt;&lt;/changedstaminacurrent&gt;\n      &lt;changedskillcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.skillcurrent &gt; player.skillmax) {\n          player.skillcurrent = player.skillmax\n        }\n        if (player.skillcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\n      ]]&gt;&lt;/changedskillcurrent&gt;\n      &lt;changedluckcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.luckcurrent &gt; player.luckmax) {\n          player.luckcurrent = player.luckmax\n        }\n        if (player.luckcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\n      ]]&gt;&lt;/changedluckcurrent&gt;\n      &lt;object name=\"sword\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Sword&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"leatherarmor\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Leather Armor&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"backpack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Backpack&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofskill\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Skill&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofstamina\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Stamina&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\n      player.staminacurrent = player.staminamax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofluck\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Luck&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\n      player.luckmax = player.luckmax + 1\n      player.luckcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"FirstDEATHHAWK\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;stamina type=\"int\"&gt;5&lt;/stamina&gt;\n    &lt;skill type=\"int\"&gt;4&lt;/skill&gt;\n    &lt;alias&gt;First DEATH HAWK&lt;/alias&gt;\n  &lt;/object&gt;\n  &lt;function name=\"combat\" parameters=\"mname\" type=\"string\"&gt;&lt;![CDATA[\n    msg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combantant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\n    mroll = mname.skill + DiceRoll (\"2d6\")\n    proll = player.skillcurrent + DiceRoll (\"2d6\")\n    msg (\"&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player Roll: \"+ proll)\n    msg (\"&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \" Roll: \"+ mroll)\n    game.temporary_mname_stamina = mname.stamina\n    game.temp_mname = mname\n    if (proll &gt; mroll) {\n      msg (\"You damaged your opponent for 2 Stamina!\")\n      game.temporary_mname_stamina = game.temporary_mname_stamina - 2\n      ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n        switch (result) {\n          case (\"Yes\") {\n            lroll = DiceRoll (\"2d6\")\n            if (lroll &lt; player.luckcurrent) {\n              msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n              game.temporary_mname_stamina = game.temporary_mname_stamina - 2\n              player.luckcurrent = player.luckcurrent - 1\n            }\n            else {\n              msg (\"You luck roll was unsuccessful!\")\n              player.luckcurrent = player.luckcurrent - 1\n            }\n          }\n        }\n        invoke (game.myTempShowMenuScript)\n      }\n      game.myTempShowMenuScript =&gt; {\n        game.temp_mname.stamina = game.temporary_mname_stamina\n        game.temporary_mname_stamina = null\n        SetTurnTimeout (1) {\n          game.myTempShowMenuScript = null\n        }\n      }\n    }\n    else {\n      msg (\"You were damaged for 2 Stamina!\")\n      player.staminacurrent = player.staminacurrent - 2\n      ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\n    }\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2018-01-30T05:13:19.1619934Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5acc6276-4f61-4ba4-8116-07c58c300d70",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How about this?\r\n\r\n(I added functions and a turnscript, but not commands.)\r\n\r\n(I tested it a few times.  It seems to keep going (or to go for the correct amount of turns, depending on which function is called).  This depends on you removing the opponent from the room when it is defeated.)\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"City of Thieves\">\r\n    <gameid>279159d1-909e-4eb4-af6e-c07a43336a6b</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <author>Ian Livingstone</author>\r\n    <category>Fantasy</category>\r\n    <start type=\"script\">\r\n      player.skillmax = 6 + DiceRoll (\"1d6\")\r\n      player.skillcurrent = player.skillmax\r\n      player.staminamax = 12 + DiceRoll (\"2d6\")\r\n      player.staminacurrent = player.staminamax\r\n      player.luckmax = 6 + DiceRoll (\"1d6\")\r\n      player.luckcurrent = player.luckmax\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\">\r\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\r\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\r\n      // replaced your while script with the next 2 lines (you need both!):\r\n      FightRounds (FirstDEATHHAWK, 3)\r\n      combat (FirstDEATHHAWK)\r\n      //\r\n      // You could also put these 2 lines (you need both!):\r\n      // FightUntilDead(FirstDEATHHAWK)\r\n      // combat(FirstDEATHHAWK)\r\n      //\r\n      // OR, TO JUST ATTACK ONCE:\r\n      // combat(FirstDEATHHAWK)\r\n      //\r\n      // End of KV's changes\r\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\r\n    </enter>\r\n    <beforeenter type=\"script\">\r\n    </beforeenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <statusattributes type=\"stringdictionary\">\r\n        <item>\r\n          <key>skilldisplay</key>\r\n          <value>Skill: !</value>\r\n        </item>\r\n        <item>\r\n          <key>staminadisplay</key>\r\n          <value>Stamina: !</value>\r\n        </item>\r\n        <item>\r\n          <key>luckdisplay</key>\r\n          <value>Luck: !</value>\r\n        </item>\r\n      </statusattributes>\r\n      <provisions type=\"int\">10</provisions>\r\n      <gold type=\"int\">0</gold>\r\n      <jewels type=\"int\">0</jewels>\r\n      <skillcurrent type=\"int\">0</skillcurrent>\r\n      <skillmax type=\"int\">0</skillmax>\r\n      <staminacurrent type=\"int\">0</staminacurrent>\r\n      <staminamax type=\"int\">0</staminamax>\r\n      <luckcurrent type=\"int\">0</luckcurrent>\r\n      <luckmax type=\"int\">0</luckmax>\r\n      <changedstaminacurrent type=\"script\"><![CDATA[\r\n        if (player.staminacurrent > player.staminamax) {\r\n          player.staminacurrent = player.staminamax\r\n        }\r\n        if (player.staminacurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\r\n      ]]></changedstaminacurrent>\r\n      <changedskillcurrent type=\"script\"><![CDATA[\r\n        if (player.skillcurrent > player.skillmax) {\r\n          player.skillcurrent = player.skillmax\r\n        }\r\n        if (player.skillcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\r\n      ]]></changedskillcurrent>\r\n      <changedluckcurrent type=\"script\"><![CDATA[\r\n        if (player.luckcurrent > player.luckmax) {\r\n          player.luckcurrent = player.luckmax\r\n        }\r\n        if (player.luckcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\r\n      ]]></changedluckcurrent>\r\n      <object name=\"sword\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Sword</alias>\r\n      </object>\r\n      <object name=\"leatherarmor\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Leather Armor</alias>\r\n      </object>\r\n      <object name=\"backpack\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Backpack</alias>\r\n      </object>\r\n    </object>\r\n    <object name=\"FirstDEATHHAWK\">\r\n      <inherit name=\"editor_object\" />\r\n      <stamina type=\"int\">5</stamina>\r\n      <skill type=\"int\">4</skill>\r\n      <alias>First DEATH HAWK</alias>\r\n    </object>\r\n  </object>\r\n  <object name=\"potionofskill\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Skill</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofstamina\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Stamina</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\r\n      player.staminacurrent = player.staminamax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofluck\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Luck</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\r\n      player.luckmax = player.luckmax + 1\r\n      player.luckcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <turnscript name=\"fight_until_dead_turnscript\">\r\n    <enabled />\r\n    <script>\r\n      if (HasAttribute(game.pov,\"incombat\")) {\r\n        if (game.pov.incombat) {\r\n          if (HasAttribute(game.pov,\"opponent\")) {\r\n            if (game.pov.parent = game.pov.opponent.parent) {\r\n              combat (game.pov.opponent)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    </script>\r\n  </turnscript>\r\n  <function name=\"combat\" parameters=\"mname\" type=\"string\"><![CDATA[\r\n    // KV moved this next before the ShowMenu, so it will exist during the script\r\n    if (not HasAttribute(game,\"myTempShowMenuScript\")) {\r\n      game.myCombatShowMenuScript => {\r\n        game.temp_mname.stamina = game.temporary_mname_stamina\r\n        game.temporary_mname_stamina = null\r\n      }\r\n    }\r\n    // END OF KV MOVING THINGS\r\n    msg (\"<table style=\\\"width: 75%\\\"><tr><th>Combantant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + mname.skill + \"</td> <td align=\\\"center\\\">\" + mname.stamina + \"</td></tr> </table>\")\r\n    mroll = mname.skill + DiceRoll (\"2d6\")\r\n    proll = player.skillcurrent + DiceRoll (\"2d6\")\r\n    msg (\"<b><font color=\\\"blue\\\">Player Roll: \"+ proll)\r\n    msg (\"<b><font color=\\\"red\\\">\" + mname.alias + \" Roll: \"+ mroll)\r\n    game.temporary_mname_stamina = mname.stamina\r\n    game.temp_mname = mname\r\n    if (proll > mroll) {\r\n      msg (\"You damaged your opponent for 2 Stamina!\")\r\n      game.temporary_mname_stamina = game.temporary_mname_stamina - 2\r\n      ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n        switch (result) {\r\n          case (\"Yes\") {\r\n            lroll = DiceRoll (\"2d6\")\r\n            if (lroll < player.luckcurrent) {\r\n              msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n              game.temporary_mname_stamina = game.temporary_mname_stamina - 2\r\n              player.luckcurrent = player.luckcurrent - 1\r\n            }\r\n            else {\r\n              msg (\"You luck roll was unsuccessful!\")\r\n              player.luckcurrent = player.luckcurrent - 1\r\n            }\r\n          }\r\n        }\r\n        invoke (game.myCombatShowMenuScript)\r\n      }\r\n    }\r\n    else {\r\n      msg (\"You were damaged for 2 Stamina!\")\r\n      player.staminacurrent = player.staminacurrent - 2\r\n      ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\r\n    }\r\n  ]]></function>\r\n  <function name=\"FightRounds\" parameters=\"object, rounds\">\r\n    if (not TypeOf(rounds) = \"int\") {\r\n      if (not IsInt(rounds)) {\r\n        error (\"FightRounds:  rounds parameter must be an integer\")\r\n      }\r\n      else {\r\n        rounds = ToInt(rounds)\r\n      }\r\n    }\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    SetTurnTimeout (rounds+1) {\r\n      game.pov.opponent = null\r\n      game.pov.incombat = false\r\n    }\r\n  </function>\r\n  <function name=\"FightUntilDead\" parameters=\"object\">\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n  </function>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n---\r\nWe can help with the commands, too, if you like.",
      "EditableFormat": "markdown",
      "HTML": "<p>How about this?</p>\n<p>(I added functions and a turnscript, but not commands.)</p>\n<p>(I tested it a few times.  It seems to keep going (or to go for the correct amount of turns, depending on which function is called).  This depends on you removing the opponent from the room when it is defeated.)</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"City of Thieves\"&gt;\n    &lt;gameid&gt;279159d1-909e-4eb4-af6e-c07a43336a6b&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;author&gt;Ian Livingstone&lt;/author&gt;\n    &lt;category&gt;Fantasy&lt;/category&gt;\n    &lt;start type=\"script\"&gt;\n      player.skillmax = 6 + DiceRoll (\"1d6\")\n      player.skillcurrent = player.skillmax\n      player.staminamax = 12 + DiceRoll (\"2d6\")\n      player.staminacurrent = player.staminamax\n      player.luckmax = 6 + DiceRoll (\"1d6\")\n      player.luckcurrent = player.luckmax\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\n      // replaced your while script with the next 2 lines (you need both!):\n      FightRounds (FirstDEATHHAWK, 3)\n      combat (FirstDEATHHAWK)\n      //\n      // You could also put these 2 lines (you need both!):\n      // FightUntilDead(FirstDEATHHAWK)\n      // combat(FirstDEATHHAWK)\n      //\n      // OR, TO JUST ATTACK ONCE:\n      // combat(FirstDEATHHAWK)\n      //\n      // End of KV's changes\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\n    &lt;/enter&gt;\n    &lt;beforeenter type=\"script\"&gt;\n    &lt;/beforeenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;statusattributes type=\"stringdictionary\"&gt;\n        &lt;item&gt;\n          &lt;key&gt;skilldisplay&lt;/key&gt;\n          &lt;value&gt;Skill: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;staminadisplay&lt;/key&gt;\n          &lt;value&gt;Stamina: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;luckdisplay&lt;/key&gt;\n          &lt;value&gt;Luck: !&lt;/value&gt;\n        &lt;/item&gt;\n      &lt;/statusattributes&gt;\n      &lt;provisions type=\"int\"&gt;10&lt;/provisions&gt;\n      &lt;gold type=\"int\"&gt;0&lt;/gold&gt;\n      &lt;jewels type=\"int\"&gt;0&lt;/jewels&gt;\n      &lt;skillcurrent type=\"int\"&gt;0&lt;/skillcurrent&gt;\n      &lt;skillmax type=\"int\"&gt;0&lt;/skillmax&gt;\n      &lt;staminacurrent type=\"int\"&gt;0&lt;/staminacurrent&gt;\n      &lt;staminamax type=\"int\"&gt;0&lt;/staminamax&gt;\n      &lt;luckcurrent type=\"int\"&gt;0&lt;/luckcurrent&gt;\n      &lt;luckmax type=\"int\"&gt;0&lt;/luckmax&gt;\n      &lt;changedstaminacurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.staminacurrent &gt; player.staminamax) {\n          player.staminacurrent = player.staminamax\n        }\n        if (player.staminacurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\n      ]]&gt;&lt;/changedstaminacurrent&gt;\n      &lt;changedskillcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.skillcurrent &gt; player.skillmax) {\n          player.skillcurrent = player.skillmax\n        }\n        if (player.skillcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\n      ]]&gt;&lt;/changedskillcurrent&gt;\n      &lt;changedluckcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.luckcurrent &gt; player.luckmax) {\n          player.luckcurrent = player.luckmax\n        }\n        if (player.luckcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\n      ]]&gt;&lt;/changedluckcurrent&gt;\n      &lt;object name=\"sword\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Sword&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"leatherarmor\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Leather Armor&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"backpack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Backpack&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"FirstDEATHHAWK\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;stamina type=\"int\"&gt;5&lt;/stamina&gt;\n      &lt;skill type=\"int\"&gt;4&lt;/skill&gt;\n      &lt;alias&gt;First DEATH HAWK&lt;/alias&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofskill\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Skill&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofstamina\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Stamina&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\n      player.staminacurrent = player.staminamax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofluck\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Luck&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\n      player.luckmax = player.luckmax + 1\n      player.luckcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=\"fight_until_dead_turnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      if (HasAttribute(game.pov,\"incombat\")) {\n        if (game.pov.incombat) {\n          if (HasAttribute(game.pov,\"opponent\")) {\n            if (game.pov.parent = game.pov.opponent.parent) {\n              combat (game.pov.opponent)\n            }\n          }\n        }\n      }\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;function name=\"combat\" parameters=\"mname\" type=\"string\"&gt;&lt;![CDATA[\n    // KV moved this next before the ShowMenu, so it will exist during the script\n    if (not HasAttribute(game,\"myTempShowMenuScript\")) {\n      game.myCombatShowMenuScript =&gt; {\n        game.temp_mname.stamina = game.temporary_mname_stamina\n        game.temporary_mname_stamina = null\n      }\n    }\n    // END OF KV MOVING THINGS\n    msg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combantant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\n    mroll = mname.skill + DiceRoll (\"2d6\")\n    proll = player.skillcurrent + DiceRoll (\"2d6\")\n    msg (\"&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player Roll: \"+ proll)\n    msg (\"&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \" Roll: \"+ mroll)\n    game.temporary_mname_stamina = mname.stamina\n    game.temp_mname = mname\n    if (proll &gt; mroll) {\n      msg (\"You damaged your opponent for 2 Stamina!\")\n      game.temporary_mname_stamina = game.temporary_mname_stamina - 2\n      ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n        switch (result) {\n          case (\"Yes\") {\n            lroll = DiceRoll (\"2d6\")\n            if (lroll &lt; player.luckcurrent) {\n              msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n              game.temporary_mname_stamina = game.temporary_mname_stamina - 2\n              player.luckcurrent = player.luckcurrent - 1\n            }\n            else {\n              msg (\"You luck roll was unsuccessful!\")\n              player.luckcurrent = player.luckcurrent - 1\n            }\n          }\n        }\n        invoke (game.myCombatShowMenuScript)\n      }\n    }\n    else {\n      msg (\"You were damaged for 2 Stamina!\")\n      player.staminacurrent = player.staminacurrent - 2\n      ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"FightRounds\" parameters=\"object, rounds\"&gt;\n    if (not TypeOf(rounds) = \"int\") {\n      if (not IsInt(rounds)) {\n        error (\"FightRounds:  rounds parameter must be an integer\")\n      }\n      else {\n        rounds = ToInt(rounds)\n      }\n    }\n    game.pov.opponent = object\n    game.pov.incombat = true\n    SetTurnTimeout (rounds+1) {\n      game.pov.opponent = null\n      game.pov.incombat = false\n    }\n  &lt;/function&gt;\n  &lt;function name=\"FightUntilDead\" parameters=\"object\"&gt;\n    game.pov.opponent = object\n    game.pov.incombat = true\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n<hr>\n<p>We can help with the commands, too, if you like.</p>\n\n",
      "PostDate": "2018-01-30T06:27:59.8609798Z",
      "LastEditDate": "2018-01-30T06:29:33.035698Z",
      "link": null
    },
    {
      "PostId": "2a2828ca-d732-4b2f-93ad-d34b978e828f",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I pasted this into a new program and seems to be working ok. The only problem is, the combat never ends. The monster gets to -1 stamina and the combat never stops.",
      "EditableFormat": "markdown",
      "HTML": "<p>I pasted this into a new program and seems to be working ok. The only problem is, the combat never ends. The monster gets to -1 stamina and the combat never stops.</p>\n\n",
      "PostDate": "2018-01-30T06:45:20.1198371Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "092091e9-4d07-4869-a77d-6094a22bf876",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This depends on you removing the opponent from the room when it is defeated.\r\n\r\n...but hold on.  I can change it to depend on the opponent's stamina being less than 1.",
      "EditableFormat": "markdown",
      "HTML": "<p>This depends on you removing the opponent from the room when it is defeated.</p>\n<p>...but hold on.  I can change it to depend on the opponent's stamina being less than 1.</p>\n\n",
      "PostDate": "2018-01-30T06:52:16.453217Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4e27fb58-b371-47eb-bae0-0332b8eddac3",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here you are:\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"City of Thieves\">\r\n    <gameid>279159d1-909e-4eb4-af6e-c07a43336a6b</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <author>Ian Livingstone</author>\r\n    <category>Fantasy</category>\r\n    <start type=\"script\">\r\n      player.skillmax = 6 + DiceRoll (\"1d6\")\r\n      player.skillcurrent = player.skillmax\r\n      player.staminamax = 12 + DiceRoll (\"2d6\")\r\n      player.staminacurrent = player.staminamax\r\n      player.luckmax = 6 + DiceRoll (\"1d6\")\r\n      player.luckcurrent = player.luckmax\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\">\r\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\r\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\r\n      // replaced your while script with the next line:\r\n      FightRounds (FirstDEATHHAWK, 3)\r\n      //\r\n      // You could also put this line:\r\n      // FightUntilDead(FirstDEATHHAWK)\r\n      //\r\n      // OR, TO JUST ATTACK ONCE:\r\n      // combat(FirstDEATHHAWK)\r\n      //\r\n      // End of KV's changes\r\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\r\n    </enter>\r\n    <beforeenter type=\"script\">\r\n    </beforeenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <statusattributes type=\"stringdictionary\">\r\n        <item>\r\n          <key>skilldisplay</key>\r\n          <value>Skill: !</value>\r\n        </item>\r\n        <item>\r\n          <key>staminadisplay</key>\r\n          <value>Stamina: !</value>\r\n        </item>\r\n        <item>\r\n          <key>luckdisplay</key>\r\n          <value>Luck: !</value>\r\n        </item>\r\n      </statusattributes>\r\n      <provisions type=\"int\">10</provisions>\r\n      <gold type=\"int\">0</gold>\r\n      <jewels type=\"int\">0</jewels>\r\n      <skillcurrent type=\"int\">0</skillcurrent>\r\n      <skillmax type=\"int\">0</skillmax>\r\n      <staminacurrent type=\"int\">0</staminacurrent>\r\n      <staminamax type=\"int\">0</staminamax>\r\n      <luckcurrent type=\"int\">0</luckcurrent>\r\n      <luckmax type=\"int\">0</luckmax>\r\n      <changedstaminacurrent type=\"script\"><![CDATA[\r\n        if (player.staminacurrent > player.staminamax) {\r\n          player.staminacurrent = player.staminamax\r\n        }\r\n        if (player.staminacurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\r\n      ]]></changedstaminacurrent>\r\n      <changedskillcurrent type=\"script\"><![CDATA[\r\n        if (player.skillcurrent > player.skillmax) {\r\n          player.skillcurrent = player.skillmax\r\n        }\r\n        if (player.skillcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\r\n      ]]></changedskillcurrent>\r\n      <changedluckcurrent type=\"script\"><![CDATA[\r\n        if (player.luckcurrent > player.luckmax) {\r\n          player.luckcurrent = player.luckmax\r\n        }\r\n        if (player.luckcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\r\n      ]]></changedluckcurrent>\r\n      <object name=\"sword\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Sword</alias>\r\n      </object>\r\n      <object name=\"leatherarmor\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Leather Armor</alias>\r\n      </object>\r\n      <object name=\"backpack\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Backpack</alias>\r\n      </object>\r\n    </object>\r\n    <object name=\"FirstDEATHHAWK\">\r\n      <inherit name=\"editor_object\" />\r\n      <stamina type=\"int\">5</stamina>\r\n      <skill type=\"int\">4</skill>\r\n      <alias>First DEATH HAWK</alias>\r\n      <changedstamina type=\"script\">\r\n        // Added by KV for debugging\r\n        Log (\"FirstDEATHHAWK.stamina = \"+ ToString(FirstDEATHHAWK.stamina))\r\n      </changedstamina>\r\n    </object>\r\n  </object>\r\n  <object name=\"potionofskill\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Skill</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofstamina\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Stamina</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\r\n      player.staminacurrent = player.staminamax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofluck\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Luck</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\r\n      player.luckmax = player.luckmax + 1\r\n      player.luckcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <turnscript name=\"fight_until_dead_turnscript\">\r\n    <enabled />\r\n    <script><![CDATA[\r\n      if (HasAttribute(game.pov,\"incombat\")) {\r\n        if (game.pov.incombat) {\r\n          if (HasAttribute(game.pov,\"opponent\")) {\r\n            if (game.pov.parent = game.pov.opponent.parent) {\r\n              if (game.pov.opponent.stamina > 0) {\r\n                combat (game.pov.opponent)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    ]]></script>\r\n  </turnscript>\r\n  <function name=\"combat\" parameters=\"mname\" type=\"string\"><![CDATA[\r\n    // KV moved this next before the ShowMenu, so it will exist during the script\r\n    if (not HasAttribute(game,\"myTempShowMenuScript\")) {\r\n      game.myCombatShowMenuScript => {\r\n        game.temp_mname.stamina = game.temporary_mname_stamina\r\n        game.temporary_mname_stamina = null\r\n      }\r\n    }\r\n    // added this next line for debbuging\r\n    // BE SURE TO REMOVE IT!!\r\n    Log (\"Running combat function.\")\r\n    // END OF KV MOVING THINGS\r\n    msg (\"<table style=\\\"width: 75%\\\"><tr><th>Combantant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + mname.skill + \"</td> <td align=\\\"center\\\">\" + mname.stamina + \"</td></tr> </table>\")\r\n    mroll = mname.skill + DiceRoll (\"2d6\")\r\n    proll = player.skillcurrent + DiceRoll (\"2d6\")\r\n    msg (\"<b><font color=\\\"blue\\\">Player Roll: \"+ proll)\r\n    msg (\"<b><font color=\\\"red\\\">\" + mname.alias + \" Roll: \"+ mroll)\r\n    game.temporary_mname_stamina = mname.stamina\r\n    game.temp_mname = mname\r\n    if (proll > mroll) {\r\n      msg (\"You damaged your opponent for 2 Stamina!\")\r\n      game.temporary_mname_stamina = game.temporary_mname_stamina - 2\r\n      ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n        switch (result) {\r\n          case (\"Yes\") {\r\n            lroll = DiceRoll (\"2d6\")\r\n            if (lroll < player.luckcurrent) {\r\n              msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n              game.temporary_mname_stamina = game.temporary_mname_stamina - 2\r\n              player.luckcurrent = player.luckcurrent - 1\r\n            }\r\n            else {\r\n              msg (\"You luck roll was unsuccessful!\")\r\n              player.luckcurrent = player.luckcurrent - 1\r\n            }\r\n          }\r\n        }\r\n        invoke (game.myCombatShowMenuScript)\r\n      }\r\n    }\r\n    else {\r\n      msg (\"You were damaged for 2 Stamina!\")\r\n      player.staminacurrent = player.staminacurrent - 2\r\n      ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\r\n    }\r\n    // The next 6 lines are for debugging\r\n    // BE SURE TO REMOVE THEM!!!\r\n    Log (\"opponent stamina:\")\r\n    stamina = \"\"\r\n    if (mname.stamina<0) {\r\n      stamina = \"-\"\r\n    }\r\n    stamina = stamina + mname.stamina\r\n    Log (stamina)\r\n    Log (\"end of combat function\")\r\n  ]]></function>\r\n  <function name=\"FightRounds\" parameters=\"object, rounds\">\r\n    if (not TypeOf(rounds) = \"int\") {\r\n      if (not IsInt(rounds)) {\r\n        error (\"FightRounds:  rounds parameter must be an integer\")\r\n      }\r\n      else {\r\n        rounds = ToInt(rounds)\r\n      }\r\n    }\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    combat (game.pov.opponent)\r\n    SetTurnTimeout (rounds+1) {\r\n      game.pov.opponent = null\r\n      game.pov.incombat = false\r\n    }\r\n  </function>\r\n  <function name=\"FightUntilDead\" parameters=\"object\">\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    combat (game.pov.opponent)\r\n  </function>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n---\r\nYou can look at the log to see what happens behind the scenes.\r\n\r\nI changed the way you call the functions I added in, too.\r\n\r\nLook at the code in full code view to see the scripts with my notes intact.\r\n\r\nSome things will need to be removed after testing is complete.  (I add numerous entries to the log.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Here you are:</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"City of Thieves\"&gt;\n    &lt;gameid&gt;279159d1-909e-4eb4-af6e-c07a43336a6b&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;author&gt;Ian Livingstone&lt;/author&gt;\n    &lt;category&gt;Fantasy&lt;/category&gt;\n    &lt;start type=\"script\"&gt;\n      player.skillmax = 6 + DiceRoll (\"1d6\")\n      player.skillcurrent = player.skillmax\n      player.staminamax = 12 + DiceRoll (\"2d6\")\n      player.staminacurrent = player.staminamax\n      player.luckmax = 6 + DiceRoll (\"1d6\")\n      player.luckcurrent = player.luckmax\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\n      // replaced your while script with the next line:\n      FightRounds (FirstDEATHHAWK, 3)\n      //\n      // You could also put this line:\n      // FightUntilDead(FirstDEATHHAWK)\n      //\n      // OR, TO JUST ATTACK ONCE:\n      // combat(FirstDEATHHAWK)\n      //\n      // End of KV's changes\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\n    &lt;/enter&gt;\n    &lt;beforeenter type=\"script\"&gt;\n    &lt;/beforeenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;statusattributes type=\"stringdictionary\"&gt;\n        &lt;item&gt;\n          &lt;key&gt;skilldisplay&lt;/key&gt;\n          &lt;value&gt;Skill: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;staminadisplay&lt;/key&gt;\n          &lt;value&gt;Stamina: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;luckdisplay&lt;/key&gt;\n          &lt;value&gt;Luck: !&lt;/value&gt;\n        &lt;/item&gt;\n      &lt;/statusattributes&gt;\n      &lt;provisions type=\"int\"&gt;10&lt;/provisions&gt;\n      &lt;gold type=\"int\"&gt;0&lt;/gold&gt;\n      &lt;jewels type=\"int\"&gt;0&lt;/jewels&gt;\n      &lt;skillcurrent type=\"int\"&gt;0&lt;/skillcurrent&gt;\n      &lt;skillmax type=\"int\"&gt;0&lt;/skillmax&gt;\n      &lt;staminacurrent type=\"int\"&gt;0&lt;/staminacurrent&gt;\n      &lt;staminamax type=\"int\"&gt;0&lt;/staminamax&gt;\n      &lt;luckcurrent type=\"int\"&gt;0&lt;/luckcurrent&gt;\n      &lt;luckmax type=\"int\"&gt;0&lt;/luckmax&gt;\n      &lt;changedstaminacurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.staminacurrent &gt; player.staminamax) {\n          player.staminacurrent = player.staminamax\n        }\n        if (player.staminacurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\n      ]]&gt;&lt;/changedstaminacurrent&gt;\n      &lt;changedskillcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.skillcurrent &gt; player.skillmax) {\n          player.skillcurrent = player.skillmax\n        }\n        if (player.skillcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\n      ]]&gt;&lt;/changedskillcurrent&gt;\n      &lt;changedluckcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.luckcurrent &gt; player.luckmax) {\n          player.luckcurrent = player.luckmax\n        }\n        if (player.luckcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\n      ]]&gt;&lt;/changedluckcurrent&gt;\n      &lt;object name=\"sword\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Sword&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"leatherarmor\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Leather Armor&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"backpack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Backpack&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"FirstDEATHHAWK\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;stamina type=\"int\"&gt;5&lt;/stamina&gt;\n      &lt;skill type=\"int\"&gt;4&lt;/skill&gt;\n      &lt;alias&gt;First DEATH HAWK&lt;/alias&gt;\n      &lt;changedstamina type=\"script\"&gt;\n        // Added by KV for debugging\n        Log (\"FirstDEATHHAWK.stamina = \"+ ToString(FirstDEATHHAWK.stamina))\n      &lt;/changedstamina&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofskill\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Skill&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofstamina\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Stamina&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\n      player.staminacurrent = player.staminamax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofluck\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Luck&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\n      player.luckmax = player.luckmax + 1\n      player.luckcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=\"fight_until_dead_turnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (HasAttribute(game.pov,\"incombat\")) {\n        if (game.pov.incombat) {\n          if (HasAttribute(game.pov,\"opponent\")) {\n            if (game.pov.parent = game.pov.opponent.parent) {\n              if (game.pov.opponent.stamina &gt; 0) {\n                combat (game.pov.opponent)\n              }\n            }\n          }\n        }\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;function name=\"combat\" parameters=\"mname\" type=\"string\"&gt;&lt;![CDATA[\n    // KV moved this next before the ShowMenu, so it will exist during the script\n    if (not HasAttribute(game,\"myTempShowMenuScript\")) {\n      game.myCombatShowMenuScript =&gt; {\n        game.temp_mname.stamina = game.temporary_mname_stamina\n        game.temporary_mname_stamina = null\n      }\n    }\n    // added this next line for debbuging\n    // BE SURE TO REMOVE IT!!\n    Log (\"Running combat function.\")\n    // END OF KV MOVING THINGS\n    msg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combantant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\n    mroll = mname.skill + DiceRoll (\"2d6\")\n    proll = player.skillcurrent + DiceRoll (\"2d6\")\n    msg (\"&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player Roll: \"+ proll)\n    msg (\"&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \" Roll: \"+ mroll)\n    game.temporary_mname_stamina = mname.stamina\n    game.temp_mname = mname\n    if (proll &gt; mroll) {\n      msg (\"You damaged your opponent for 2 Stamina!\")\n      game.temporary_mname_stamina = game.temporary_mname_stamina - 2\n      ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n        switch (result) {\n          case (\"Yes\") {\n            lroll = DiceRoll (\"2d6\")\n            if (lroll &lt; player.luckcurrent) {\n              msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n              game.temporary_mname_stamina = game.temporary_mname_stamina - 2\n              player.luckcurrent = player.luckcurrent - 1\n            }\n            else {\n              msg (\"You luck roll was unsuccessful!\")\n              player.luckcurrent = player.luckcurrent - 1\n            }\n          }\n        }\n        invoke (game.myCombatShowMenuScript)\n      }\n    }\n    else {\n      msg (\"You were damaged for 2 Stamina!\")\n      player.staminacurrent = player.staminacurrent - 2\n      ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\n    }\n    // The next 6 lines are for debugging\n    // BE SURE TO REMOVE THEM!!!\n    Log (\"opponent stamina:\")\n    stamina = \"\"\n    if (mname.stamina&lt;0) {\n      stamina = \"-\"\n    }\n    stamina = stamina + mname.stamina\n    Log (stamina)\n    Log (\"end of combat function\")\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"FightRounds\" parameters=\"object, rounds\"&gt;\n    if (not TypeOf(rounds) = \"int\") {\n      if (not IsInt(rounds)) {\n        error (\"FightRounds:  rounds parameter must be an integer\")\n      }\n      else {\n        rounds = ToInt(rounds)\n      }\n    }\n    game.pov.opponent = object\n    game.pov.incombat = true\n    combat (game.pov.opponent)\n    SetTurnTimeout (rounds+1) {\n      game.pov.opponent = null\n      game.pov.incombat = false\n    }\n  &lt;/function&gt;\n  &lt;function name=\"FightUntilDead\" parameters=\"object\"&gt;\n    game.pov.opponent = object\n    game.pov.incombat = true\n    combat (game.pov.opponent)\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n<hr>\n<p>You can look at the log to see what happens behind the scenes.</p>\n<p>I changed the way you call the functions I added in, too.</p>\n<p>Look at the code in full code view to see the scripts with my notes intact.</p>\n<p>Some things will need to be removed after testing is complete.  (I add numerous entries to the log.)</p>\n\n",
      "PostDate": "2018-01-30T07:06:36.1431515Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6dcee685-17b1-417a-ac9a-e8533925f4ef",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hate to be picky. But when the enemy is at less than 1 stamina, there is no need to check Luck to do more damage. It should just skip to done and remove the enemy from the room.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hate to be picky. But when the enemy is at less than 1 stamina, there is no need to check Luck to do more damage. It should just skip to done and remove the enemy from the room.</p>\n\n",
      "PostDate": "2018-01-30T07:15:00.3891688Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0605817a-d62a-4460-b5cc-3cfc40102e02",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I didn't fool around up in that part of the code.\r\n\r\nI can, if you'd like...\r\n\r\nJust say the word.\r\n\r\n---\r\n**INVISICLUE**\r\n\r\nThe word is [<span style=\"color:white;background:white\">BLORPLE</span>].",
      "EditableFormat": "markdown",
      "HTML": "<p>I didn't fool around up in that part of the code.</p>\n<p>I can, if you'd like...</p>\n<p>Just say the word.</p>\n<hr>\n<p><strong>INVISICLUE</strong></p>\n<p>The word is [<span style=\"color: white; background: white\">BLORPLE</span>].</p>\n\n",
      "PostDate": "2018-01-30T08:55:45.8175699Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3e55ddeb-897b-46e6-b529-4ddbc2c90fc8",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "BLORPLE lol",
      "EditableFormat": "markdown",
      "HTML": "<p>BLORPLE lol</p>\n\n",
      "PostDate": "2018-01-30T09:10:51.8789579Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f54626d6-477b-48df-a2c2-613421638bba",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Have you played that game?  (Spellbreaker?)\r\n\r\nMan!  I bet I typed BLORPLE more than a thousand times!  (And it's not one of the easier words to type!  Those INFOCOM bastards!!!  (I love 'em!))\r\n\r\nAnyway, how about this?\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"City of Thieves\">\r\n    <gameid>279159d1-909e-4eb4-af6e-c07a43336a6b</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <author>Ian Livingstone</author>\r\n    <category>Fantasy</category>\r\n    <start type=\"script\">\r\n      player.skillmax = 6 + DiceRoll (\"1d6\")\r\n      player.skillcurrent = player.skillmax\r\n      player.staminamax = 12 + DiceRoll (\"2d6\")\r\n      player.staminacurrent = player.staminamax\r\n      player.luckmax = 6 + DiceRoll (\"1d6\")\r\n      player.luckcurrent = player.luckmax\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\">\r\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\r\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\r\n      // replaced your while script with the next line:\r\n      FightRounds (FirstDEATHHAWK, 3)\r\n      //\r\n      // You could also put this line:\r\n      // FightUntilDead(FirstDEATHHAWK)\r\n      //\r\n      // OR, TO JUST ATTACK ONCE:\r\n      // combat(FirstDEATHHAWK)\r\n      //\r\n      // End of KV's changes\r\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\r\n    </enter>\r\n    <beforeenter type=\"script\">\r\n    </beforeenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <statusattributes type=\"stringdictionary\">\r\n        <item>\r\n          <key>skilldisplay</key>\r\n          <value>Skill: !</value>\r\n        </item>\r\n        <item>\r\n          <key>staminadisplay</key>\r\n          <value>Stamina: !</value>\r\n        </item>\r\n        <item>\r\n          <key>luckdisplay</key>\r\n          <value>Luck: !</value>\r\n        </item>\r\n      </statusattributes>\r\n      <provisions type=\"int\">10</provisions>\r\n      <gold type=\"int\">0</gold>\r\n      <jewels type=\"int\">0</jewels>\r\n      <skillcurrent type=\"int\">0</skillcurrent>\r\n      <skillmax type=\"int\">0</skillmax>\r\n      <staminacurrent type=\"int\">0</staminacurrent>\r\n      <staminamax type=\"int\">0</staminamax>\r\n      <luckcurrent type=\"int\">0</luckcurrent>\r\n      <luckmax type=\"int\">0</luckmax>\r\n      <changedstaminacurrent type=\"script\"><![CDATA[\r\n        if (player.staminacurrent > player.staminamax) {\r\n          player.staminacurrent = player.staminamax\r\n        }\r\n        if (player.staminacurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\r\n      ]]></changedstaminacurrent>\r\n      <changedskillcurrent type=\"script\"><![CDATA[\r\n        if (player.skillcurrent > player.skillmax) {\r\n          player.skillcurrent = player.skillmax\r\n        }\r\n        if (player.skillcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\r\n      ]]></changedskillcurrent>\r\n      <changedluckcurrent type=\"script\"><![CDATA[\r\n        if (player.luckcurrent > player.luckmax) {\r\n          player.luckcurrent = player.luckmax\r\n        }\r\n        if (player.luckcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\r\n      ]]></changedluckcurrent>\r\n      <object name=\"sword\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Sword</alias>\r\n      </object>\r\n      <object name=\"leatherarmor\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Leather Armor</alias>\r\n      </object>\r\n      <object name=\"backpack\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Backpack</alias>\r\n      </object>\r\n    </object>\r\n    <object name=\"FirstDEATHHAWK\">\r\n      <inherit name=\"editor_object\" />\r\n      <stamina type=\"int\">5</stamina>\r\n      <skill type=\"int\">4</skill>\r\n      <alias>First DEATH HAWK</alias>\r\n      <changedstamina type=\"script\">\r\n        // Added by KV for debugging\r\n        Log (\"FirstDEATHHAWK.stamina = \"+ ToString(FirstDEATHHAWK.stamina))\r\n      </changedstamina>\r\n    </object>\r\n  </object>\r\n  <object name=\"potionofskill\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Skill</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofstamina\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Stamina</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\r\n      player.staminacurrent = player.staminamax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofluck\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Luck</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\r\n      player.luckmax = player.luckmax + 1\r\n      player.luckcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <turnscript name=\"fight_until_dead_turnscript\">\r\n    <enabled />\r\n    <script><![CDATA[\r\n      if (HasAttribute(game.pov,\"incombat\")) {\r\n        if (game.pov.incombat) {\r\n          if (HasAttribute(game.pov,\"opponent\")) {\r\n            if (game.pov.parent = game.pov.opponent.parent) {\r\n              if (game.pov.opponent.stamina > 0) {\r\n                combat (game.pov.opponent)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    ]]></script>\r\n  </turnscript>\r\n  <function name=\"combat\" parameters=\"mname\" type=\"string\"><![CDATA[\r\n    // KV moved this next before the ShowMenu, so it will exist during the script\r\n    if (not HasAttribute(game,\"myTempShowMenuScript\")) {\r\n      game.myCombatShowMenuScript => {\r\n        game.temp_mname.stamina = game.temporary_mname_stamina\r\n        game.temporary_mname_stamina = null\r\n      }\r\n    }\r\n    // added this next line for debbuging\r\n    // BE SURE TO REMOVE IT!!\r\n    Log (\"Running combat function.\")\r\n    // END OF KV MOVING THINGS\r\n    msg (\"<table style=\\\"width: 75%\\\"><tr><th>Combantant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + mname.skill + \"</td> <td align=\\\"center\\\">\" + mname.stamina + \"</td></tr> </table>\")\r\n    mroll = mname.skill + DiceRoll (\"2d6\")\r\n    proll = player.skillcurrent + DiceRoll (\"2d6\")\r\n    msg (\"<b><font color=\\\"blue\\\">Player Roll: \"+ proll)\r\n    msg (\"<b><font color=\\\"red\\\">\" + mname.alias + \" Roll: \"+ mroll)\r\n    game.temporary_mname_stamina = mname.stamina\r\n    game.temp_mname = mname\r\n    if (proll > mroll) {\r\n      msg (\"You damaged your opponent for 2 Stamina!\")\r\n      game.temporary_mname_stamina = game.temporary_mname_stamina - 2\r\n      if (mname.stamina>0) {\r\n        ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n          switch (result) {\r\n            case (\"Yes\") {\r\n              lroll = DiceRoll (\"2d6\")\r\n              if (lroll < player.luckcurrent) {\r\n                msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n                game.temporary_mname_stamina = game.temporary_mname_stamina - 2\r\n                player.luckcurrent = player.luckcurrent - 1\r\n              }\r\n              else {\r\n                msg (\"You luck roll was unsuccessful!\")\r\n                player.luckcurrent = player.luckcurrent - 1\r\n              }\r\n            }\r\n          }\r\n          invoke (game.myCombatShowMenuScript)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      msg (\"You were damaged for 2 Stamina!\")\r\n      player.staminacurrent = player.staminacurrent - 2\r\n      ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\r\n    }\r\n    // The next 6 lines are for debugging\r\n    // BE SURE TO REMOVE THEM!!!\r\n    Log (\"opponent stamina:\")\r\n    stamina = \"\"\r\n    if (mname.stamina<0) {\r\n      stamina = \"-\"\r\n    }\r\n    stamina = stamina + mname.stamina\r\n    Log (stamina)\r\n    Log (\"end of combat function\")\r\n  ]]></function>\r\n  <function name=\"FightRounds\" parameters=\"object, rounds\">\r\n    if (not TypeOf(rounds) = \"int\") {\r\n      if (not IsInt(rounds)) {\r\n        error (\"FightRounds:  rounds parameter must be an integer\")\r\n      }\r\n      else {\r\n        rounds = ToInt(rounds)\r\n      }\r\n    }\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    combat (game.pov.opponent)\r\n    SetTurnTimeout (rounds+1) {\r\n      game.pov.opponent = null\r\n      game.pov.incombat = false\r\n    }\r\n  </function>\r\n  <function name=\"FightUntilDead\" parameters=\"object\">\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    combat (game.pov.opponent)\r\n  </function>\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>Have you played that game?  (Spellbreaker?)</p>\n<p>Man!  I bet I typed BLORPLE more than a thousand times!  (And it's not one of the easier words to type!  Those INFOCOM bastards!!!  (I love 'em!))</p>\n<p>Anyway, how about this?</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"City of Thieves\"&gt;\n    &lt;gameid&gt;279159d1-909e-4eb4-af6e-c07a43336a6b&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;author&gt;Ian Livingstone&lt;/author&gt;\n    &lt;category&gt;Fantasy&lt;/category&gt;\n    &lt;start type=\"script\"&gt;\n      player.skillmax = 6 + DiceRoll (\"1d6\")\n      player.skillcurrent = player.skillmax\n      player.staminamax = 12 + DiceRoll (\"2d6\")\n      player.staminacurrent = player.staminamax\n      player.luckmax = 6 + DiceRoll (\"1d6\")\n      player.luckcurrent = player.luckmax\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\n      // replaced your while script with the next line:\n      FightRounds (FirstDEATHHAWK, 3)\n      //\n      // You could also put this line:\n      // FightUntilDead(FirstDEATHHAWK)\n      //\n      // OR, TO JUST ATTACK ONCE:\n      // combat(FirstDEATHHAWK)\n      //\n      // End of KV's changes\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\n    &lt;/enter&gt;\n    &lt;beforeenter type=\"script\"&gt;\n    &lt;/beforeenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;statusattributes type=\"stringdictionary\"&gt;\n        &lt;item&gt;\n          &lt;key&gt;skilldisplay&lt;/key&gt;\n          &lt;value&gt;Skill: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;staminadisplay&lt;/key&gt;\n          &lt;value&gt;Stamina: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;luckdisplay&lt;/key&gt;\n          &lt;value&gt;Luck: !&lt;/value&gt;\n        &lt;/item&gt;\n      &lt;/statusattributes&gt;\n      &lt;provisions type=\"int\"&gt;10&lt;/provisions&gt;\n      &lt;gold type=\"int\"&gt;0&lt;/gold&gt;\n      &lt;jewels type=\"int\"&gt;0&lt;/jewels&gt;\n      &lt;skillcurrent type=\"int\"&gt;0&lt;/skillcurrent&gt;\n      &lt;skillmax type=\"int\"&gt;0&lt;/skillmax&gt;\n      &lt;staminacurrent type=\"int\"&gt;0&lt;/staminacurrent&gt;\n      &lt;staminamax type=\"int\"&gt;0&lt;/staminamax&gt;\n      &lt;luckcurrent type=\"int\"&gt;0&lt;/luckcurrent&gt;\n      &lt;luckmax type=\"int\"&gt;0&lt;/luckmax&gt;\n      &lt;changedstaminacurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.staminacurrent &gt; player.staminamax) {\n          player.staminacurrent = player.staminamax\n        }\n        if (player.staminacurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\n      ]]&gt;&lt;/changedstaminacurrent&gt;\n      &lt;changedskillcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.skillcurrent &gt; player.skillmax) {\n          player.skillcurrent = player.skillmax\n        }\n        if (player.skillcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\n      ]]&gt;&lt;/changedskillcurrent&gt;\n      &lt;changedluckcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.luckcurrent &gt; player.luckmax) {\n          player.luckcurrent = player.luckmax\n        }\n        if (player.luckcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\n      ]]&gt;&lt;/changedluckcurrent&gt;\n      &lt;object name=\"sword\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Sword&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"leatherarmor\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Leather Armor&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"backpack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Backpack&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"FirstDEATHHAWK\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;stamina type=\"int\"&gt;5&lt;/stamina&gt;\n      &lt;skill type=\"int\"&gt;4&lt;/skill&gt;\n      &lt;alias&gt;First DEATH HAWK&lt;/alias&gt;\n      &lt;changedstamina type=\"script\"&gt;\n        // Added by KV for debugging\n        Log (\"FirstDEATHHAWK.stamina = \"+ ToString(FirstDEATHHAWK.stamina))\n      &lt;/changedstamina&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofskill\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Skill&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofstamina\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Stamina&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\n      player.staminacurrent = player.staminamax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofluck\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Luck&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\n      player.luckmax = player.luckmax + 1\n      player.luckcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=\"fight_until_dead_turnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (HasAttribute(game.pov,\"incombat\")) {\n        if (game.pov.incombat) {\n          if (HasAttribute(game.pov,\"opponent\")) {\n            if (game.pov.parent = game.pov.opponent.parent) {\n              if (game.pov.opponent.stamina &gt; 0) {\n                combat (game.pov.opponent)\n              }\n            }\n          }\n        }\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;function name=\"combat\" parameters=\"mname\" type=\"string\"&gt;&lt;![CDATA[\n    // KV moved this next before the ShowMenu, so it will exist during the script\n    if (not HasAttribute(game,\"myTempShowMenuScript\")) {\n      game.myCombatShowMenuScript =&gt; {\n        game.temp_mname.stamina = game.temporary_mname_stamina\n        game.temporary_mname_stamina = null\n      }\n    }\n    // added this next line for debbuging\n    // BE SURE TO REMOVE IT!!\n    Log (\"Running combat function.\")\n    // END OF KV MOVING THINGS\n    msg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combantant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\n    mroll = mname.skill + DiceRoll (\"2d6\")\n    proll = player.skillcurrent + DiceRoll (\"2d6\")\n    msg (\"&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player Roll: \"+ proll)\n    msg (\"&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \" Roll: \"+ mroll)\n    game.temporary_mname_stamina = mname.stamina\n    game.temp_mname = mname\n    if (proll &gt; mroll) {\n      msg (\"You damaged your opponent for 2 Stamina!\")\n      game.temporary_mname_stamina = game.temporary_mname_stamina - 2\n      if (mname.stamina&gt;0) {\n        ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n          switch (result) {\n            case (\"Yes\") {\n              lroll = DiceRoll (\"2d6\")\n              if (lroll &lt; player.luckcurrent) {\n                msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n                game.temporary_mname_stamina = game.temporary_mname_stamina - 2\n                player.luckcurrent = player.luckcurrent - 1\n              }\n              else {\n                msg (\"You luck roll was unsuccessful!\")\n                player.luckcurrent = player.luckcurrent - 1\n              }\n            }\n          }\n          invoke (game.myCombatShowMenuScript)\n        }\n      }\n    }\n    else {\n      msg (\"You were damaged for 2 Stamina!\")\n      player.staminacurrent = player.staminacurrent - 2\n      ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\n    }\n    // The next 6 lines are for debugging\n    // BE SURE TO REMOVE THEM!!!\n    Log (\"opponent stamina:\")\n    stamina = \"\"\n    if (mname.stamina&lt;0) {\n      stamina = \"-\"\n    }\n    stamina = stamina + mname.stamina\n    Log (stamina)\n    Log (\"end of combat function\")\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"FightRounds\" parameters=\"object, rounds\"&gt;\n    if (not TypeOf(rounds) = \"int\") {\n      if (not IsInt(rounds)) {\n        error (\"FightRounds:  rounds parameter must be an integer\")\n      }\n      else {\n        rounds = ToInt(rounds)\n      }\n    }\n    game.pov.opponent = object\n    game.pov.incombat = true\n    combat (game.pov.opponent)\n    SetTurnTimeout (rounds+1) {\n      game.pov.opponent = null\n      game.pov.incombat = false\n    }\n  &lt;/function&gt;\n  &lt;function name=\"FightUntilDead\" parameters=\"object\"&gt;\n    game.pov.opponent = object\n    game.pov.incombat = true\n    combat (game.pov.opponent)\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-01-30T09:24:19.2039348Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "eaccb4b2-d376-4c03-bcc1-bbc7aecdf120",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Close. But it doesn't stop when they reach less than 0. It still asks one extra time before stopping:\r\n\r\nEnemy Health: 5\r\nplayer hits for 2 (enemy at 3)\r\nDo you wish to test luck for extra damage?\r\nsuccessful -2 more damage (enemy at 1)\r\nplayer hits for 2 damage (enemy at -1)\r\nDo you wish to test luck for extra damage? (it should have stopped here)\r\nIf you answer No then it stops.\r\n\r\n\r\nI loved the Infocom games! I noticed the Zork reference in the Quest instructions. lol",
      "EditableFormat": "markdown",
      "HTML": "<p>Close. But it doesn't stop when they reach less than 0. It still asks one extra time before stopping:</p>\n<p>Enemy Health: 5<br>\nplayer hits for 2 (enemy at 3)<br>\nDo you wish to test luck for extra damage?<br>\nsuccessful -2 more damage (enemy at 1)<br>\nplayer hits for 2 damage (enemy at -1)<br>\nDo you wish to test luck for extra damage? (it should have stopped here)<br>\nIf you answer No then it stops.</p>\n<p>I loved the Infocom games! I noticed the Zork reference in the Quest instructions. lol</p>\n\n",
      "PostDate": "2018-01-30T09:37:12.4744994Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a3af3f85-3dc3-4cf8-89db-fb7d130592be",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I didn't change the way it worked this time.  I just added (and changed) log entries for debugging.\r\n\r\n<details>\r\n\r\nHere's the combat function's script:\r\n```\r\n// KV moved this next before the ShowMenu, so it will exist during the script\r\nif (not HasAttribute(game,\"myTempShowMenuScript\")) {\r\n  game.myCombatShowMenuScript => {\r\n    game.temp_mname.stamina = game.temporary_mname_stamina\r\n    game.temporary_mname_stamina = null\r\n  }\r\n}\r\n// added this next line for debbuging\r\n// BE SURE TO REMOVE IT!!\r\nLog (\"Running combat function.\")\r\n// END OF KV MOVING THINGS\r\nmsg (\"<table style=\\\"width: 75%\\\"><tr><th>Combantant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + mname.skill + \"</td> <td align=\\\"center\\\">\" + mname.stamina + \"</td></tr> </table>\")\r\nmroll = mname.skill + DiceRoll (\"2d6\")\r\nproll = player.skillcurrent + DiceRoll (\"2d6\")\r\nmsg (\"<b><font color=\\\"blue\\\">Player Roll: \"+ proll)\r\nmsg (\"<b><font color=\\\"red\\\">\" + mname.alias + \" Roll: \"+ mroll)\r\ngame.temporary_mname_stamina = mname.stamina\r\ngame.temp_mname = mname\r\nif (proll > mroll) {\r\n  Log (\"proll is greater than mroll\")\r\n  msg (\"You damaged your opponent for 2 Stamina!\")\r\n  game.temporary_mname_stamina = game.temporary_mname_stamina - 2\r\n  if (mname.stamina>0) {\r\n    Log (\"mname.stamina is greater than 0. Running ShowMenu for more damage\")\r\n    entry = \"mname.stamina = \"+mname.stamina\r\n    Log (entry)\r\n    ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n      switch (result) {\r\n        case (\"Yes\") {\r\n          lroll = DiceRoll (\"2d6\")\r\n          if (lroll < player.luckcurrent) {\r\n            msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n            game.temporary_mname_stamina = game.temporary_mname_stamina - 2\r\n            player.luckcurrent = player.luckcurrent - 1\r\n          }\r\n          else {\r\n            msg (\"You luck roll was unsuccessful!\")\r\n            player.luckcurrent = player.luckcurrent - 1\r\n          }\r\n        }\r\n      }\r\n      invoke (game.myCombatShowMenuScript)\r\n    }\r\n  }\r\n}\r\nelse {\r\n  Log (\"proll is than than mroll\")\r\n  msg (\"You were damaged for 2 Stamina!\")\r\n  player.staminacurrent = player.staminacurrent - 2\r\n  entry = \"mname.stamina = \"+mname.stamina\r\n  Log (entry)\r\n  Log (\"mname.stamina is less than 0. Running ShowMenu for reducing player.staminacurrent\")\r\n  entry = \"player.staminacurrent = \"+player.staminacurrent\r\n  Log (entry)\r\n  // NOTE:  The following ShowMenu throws an error if called because it has no script!\r\n  ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\r\n}\r\n// The next 6 lines are for debugging\r\n// BE SURE TO REMOVE THEM!!!\r\nstamina = \"mname stamina =\"\r\nif (mname.stamina<0) {\r\n  stamina = \"-\"\r\n}\r\nstamina = stamina + mname.stamina\r\nLog (stamina)\r\nLog (\"end of combat function\")\r\n```\r\n\r\n---\r\n```\r\n1/30/2018 9:25:25 AM Running combat function.\r\n1/30/2018 9:25:25 AM proll is greater than mroll\r\n1/30/2018 9:25:25 AM mname.stamina is greater than 0. Running ShowMenu for more damage\r\n1/30/2018 9:25:25 AM mname.stamina = 5\r\n1/30/2018 9:25:25 AM mname stamina =5\r\n1/30/2018 9:25:25 AM end of combat function\r\n1/30/2018 9:25:27 AM FirstDEATHHAWK.stamina = 3\r\n1/30/2018 9:25:27 AM Running combat function.\r\n1/30/2018 9:25:27 AM proll is greater than mroll\r\n1/30/2018 9:25:27 AM mname.stamina is greater than 0. Running ShowMenu for more damage\r\n1/30/2018 9:25:27 AM mname.stamina = 3\r\n1/30/2018 9:25:27 AM mname stamina =3\r\n1/30/2018 9:25:27 AM end of combat function\r\n1/30/2018 9:25:29 AM FirstDEATHHAWK.stamina = 1\r\n1/30/2018 9:25:29 AM Running combat function.\r\n1/30/2018 9:25:29 AM proll is greater than mroll\r\n1/30/2018 9:25:29 AM mname.stamina is greater than 0. Running ShowMenu for more damage\r\n1/30/2018 9:25:29 AM mname.stamina = 1\r\n1/30/2018 9:25:29 AM mname stamina =1\r\n1/30/2018 9:25:29 AM end of combat function\r\n1/30/2018 9:25:41 AM FirstDEATHHAWK.stamina = -3\r\n```\r\n\r\n(The last line is just after saying YES to the ShowMenu asking to try my luck for more damage.)\r\n\r\n---\r\n\r\nNOTE:\r\n\r\nYou get an error about ShowMenu sometimes because this ShowMenu function has no script:\r\n```\r\nelse {\r\n  Log (\"proll is than than mroll\")\r\n  msg (\"You were damaged for 2 Stamina!\")\r\n  player.staminacurrent = player.staminacurrent - 2\r\n  entry = \"mname.stamina = \"+mname.stamina\r\n  Log (entry)\r\n  Log (\"mname.stamina is less than 0. Running ShowMenu for reducing player.staminacurrent\")\r\n  entry = \"player.staminacurrent = \"+player.staminacurrent\r\n  Log (entry)\r\n  ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\r\n}\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>I didn't change the way it worked this time.  I just added (and changed) log entries for debugging.</p>\n<details>\n<p>Here's the combat function's script:</p>\n<pre><code>// KV moved this next before the ShowMenu, so it will exist during the script\nif (not HasAttribute(game,\"myTempShowMenuScript\")) {\n  game.myCombatShowMenuScript =&gt; {\n    game.temp_mname.stamina = game.temporary_mname_stamina\n    game.temporary_mname_stamina = null\n  }\n}\n// added this next line for debbuging\n// BE SURE TO REMOVE IT!!\nLog (\"Running combat function.\")\n// END OF KV MOVING THINGS\nmsg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combantant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\nmroll = mname.skill + DiceRoll (\"2d6\")\nproll = player.skillcurrent + DiceRoll (\"2d6\")\nmsg (\"&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player Roll: \"+ proll)\nmsg (\"&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \" Roll: \"+ mroll)\ngame.temporary_mname_stamina = mname.stamina\ngame.temp_mname = mname\nif (proll &gt; mroll) {\n  Log (\"proll is greater than mroll\")\n  msg (\"You damaged your opponent for 2 Stamina!\")\n  game.temporary_mname_stamina = game.temporary_mname_stamina - 2\n  if (mname.stamina&gt;0) {\n    Log (\"mname.stamina is greater than 0. Running ShowMenu for more damage\")\n    entry = \"mname.stamina = \"+mname.stamina\n    Log (entry)\n    ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n      switch (result) {\n        case (\"Yes\") {\n          lroll = DiceRoll (\"2d6\")\n          if (lroll &lt; player.luckcurrent) {\n            msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n            game.temporary_mname_stamina = game.temporary_mname_stamina - 2\n            player.luckcurrent = player.luckcurrent - 1\n          }\n          else {\n            msg (\"You luck roll was unsuccessful!\")\n            player.luckcurrent = player.luckcurrent - 1\n          }\n        }\n      }\n      invoke (game.myCombatShowMenuScript)\n    }\n  }\n}\nelse {\n  Log (\"proll is than than mroll\")\n  msg (\"You were damaged for 2 Stamina!\")\n  player.staminacurrent = player.staminacurrent - 2\n  entry = \"mname.stamina = \"+mname.stamina\n  Log (entry)\n  Log (\"mname.stamina is less than 0. Running ShowMenu for reducing player.staminacurrent\")\n  entry = \"player.staminacurrent = \"+player.staminacurrent\n  Log (entry)\n  // NOTE:  The following ShowMenu throws an error if called because it has no script!\n  ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\n}\n// The next 6 lines are for debugging\n// BE SURE TO REMOVE THEM!!!\nstamina = \"mname stamina =\"\nif (mname.stamina&lt;0) {\n  stamina = \"-\"\n}\nstamina = stamina + mname.stamina\nLog (stamina)\nLog (\"end of combat function\")\n</code></pre>\n<hr>\n<pre><code>1/30/2018 9:25:25 AM Running combat function.\n1/30/2018 9:25:25 AM proll is greater than mroll\n1/30/2018 9:25:25 AM mname.stamina is greater than 0. Running ShowMenu for more damage\n1/30/2018 9:25:25 AM mname.stamina = 5\n1/30/2018 9:25:25 AM mname stamina =5\n1/30/2018 9:25:25 AM end of combat function\n1/30/2018 9:25:27 AM FirstDEATHHAWK.stamina = 3\n1/30/2018 9:25:27 AM Running combat function.\n1/30/2018 9:25:27 AM proll is greater than mroll\n1/30/2018 9:25:27 AM mname.stamina is greater than 0. Running ShowMenu for more damage\n1/30/2018 9:25:27 AM mname.stamina = 3\n1/30/2018 9:25:27 AM mname stamina =3\n1/30/2018 9:25:27 AM end of combat function\n1/30/2018 9:25:29 AM FirstDEATHHAWK.stamina = 1\n1/30/2018 9:25:29 AM Running combat function.\n1/30/2018 9:25:29 AM proll is greater than mroll\n1/30/2018 9:25:29 AM mname.stamina is greater than 0. Running ShowMenu for more damage\n1/30/2018 9:25:29 AM mname.stamina = 1\n1/30/2018 9:25:29 AM mname stamina =1\n1/30/2018 9:25:29 AM end of combat function\n1/30/2018 9:25:41 AM FirstDEATHHAWK.stamina = -3\n</code></pre>\n<p>(The last line is just after saying YES to the ShowMenu asking to try my luck for more damage.)</p>\n<hr>\n<p>NOTE:</p>\n<p>You get an error about ShowMenu sometimes because this ShowMenu function has no script:</p>\n<pre><code>else {\n  Log (\"proll is than than mroll\")\n  msg (\"You were damaged for 2 Stamina!\")\n  player.staminacurrent = player.staminacurrent - 2\n  entry = \"mname.stamina = \"+mname.stamina\n  Log (entry)\n  Log (\"mname.stamina is less than 0. Running ShowMenu for reducing player.staminacurrent\")\n  entry = \"player.staminacurrent = \"+player.staminacurrent\n  Log (entry)\n  ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false)\n}\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-01-30T15:27:43.2479197Z",
      "LastEditDate": "2018-01-30T21:39:19.413899Z",
      "link": null
    },
    {
      "PostId": "7f093cc3-e08c-4233-a8fe-9f98712dcded",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yeah. I never got to that showmenu yet because I was trying to get everything to work. Basically it works like the other Luck test. If it passes then the damage the player suffers is reduced by 1.",
      "EditableFormat": "markdown",
      "HTML": "<p>Yeah. I never got to that showmenu yet because I was trying to get everything to work. Basically it works like the other Luck test. If it passes then the damage the player suffers is reduced by 1.</p>\n\n",
      "PostDate": "2018-01-30T18:10:06.8703603Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "390a9ed2-283d-4db3-b538-39683f772e4b",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It's still not working properly. If you run it the combat is not stopping properly. The enemy starts off at 5 stamina. If the rolls work in your favor (which they do most of the time). You hit for 2 stamina, test luck to reduce it another 2. That's fine. The combat happens again. You hit it for 2 damage, the enemy should be at -1, there is no need for a second Luck test to happen because the enemy is dead. But the debugger is showing the enemy at 1 stamina still at this point. It's like its not updating the enemy stamina before asking the Luck roll question.",
      "EditableFormat": "markdown",
      "HTML": "<p>It's still not working properly. If you run it the combat is not stopping properly. The enemy starts off at 5 stamina. If the rolls work in your favor (which they do most of the time). You hit for 2 stamina, test luck to reduce it another 2. That's fine. The combat happens again. You hit it for 2 damage, the enemy should be at -1, there is no need for a second Luck test to happen because the enemy is dead. But the debugger is showing the enemy at 1 stamina still at this point. It's like its not updating the enemy stamina before asking the Luck roll question.</p>\n\n",
      "PostDate": "2018-01-30T18:17:55.1138999Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4a5b3cdf-d566-4034-832a-b34da6266afe",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I didn't use the correct variables inside of the ShowMenu() script.  (Whoops!)\r\n\r\nTry this (too many changes to list):\r\n\r\n<details>\r\n\r\n**combat (REVISED SINCE POSTING!)**\r\n```\r\n// added this next line for debbuging\r\n// BE SURE TO REMOVE IT!!\r\nLog (\"Running combat function.\")\r\n// END OF KV MOVING THINGS\r\nmsg (\"<table style=\\\"width: 75%\\\"><tr><th>Combatant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + mname.skill + \"</td> <td align=\\\"center\\\">\" + mname.stamina + \"</td></tr> </table>\")\r\nmroll = mname.skill + DiceRoll (\"2d6\")\r\nproll = player.skillcurrent + DiceRoll (\"2d6\")\r\nmsg (\"<b><font color=\\\"blue\\\">Player Roll: \"+ proll)\r\nmsg (\"<b><font color=\\\"red\\\">\" + mname.alias + \" Roll: \"+ mroll)\r\ngame.temp_mname = mname\r\nentry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\nLog (entry)\r\nif (proll > mroll) {\r\n  Log (\"proll is greater than mroll\")\r\n  msg (\"You damaged your opponent for 2 Stamina!\")\r\n  Log (\"You damaged your opponent for 2 Stamina!\")\r\n  game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n  entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n  Log (entry)\r\n  if (game.temp_mname.stamina>0) {\r\n    Log (\"game.temp_mname.stamina is greater than 0. Running ShowMenu for more damage\")\r\n    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n    Log (entry)\r\n    ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n      switch (result) {\r\n        case (\"Yes\") {\r\n          lroll = DiceRoll (\"2d6\")\r\n          if (lroll < player.luckcurrent) {\r\n            Log (\"Dealt 2 more stamina damage\")\r\n            msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n            msg (\"<table style=\\\"width: 75%\\\"><tr><th>Combatant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + game.temp_mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + game.temp_mname.skill + \"</td> <td align=\\\"center\\\">\" + game.temp_mname.stamina + \"</td></tr> </table>\")\r\n            game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n            entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n            Log (entry)\r\n            player.luckcurrent = player.luckcurrent - 1\r\n          }\r\n          else {\r\n            Log (\"Did not roll successfully.  No addition to stamina damage.\")\r\n            msg (\"You luck roll was unsuccessful!\")\r\n            player.luckcurrent = player.luckcurrent - 1\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  Log (\"ShowMenu ends.\")\r\n}\r\nelse {\r\n  Log (\"proll is than than mroll\")\r\n  msg (\"You were damaged for 2 Stamina!\")\r\n  player.staminacurrent = player.staminacurrent - 2\r\n  entry = \"mname.stamina = \"+mname.stamina\r\n  Log (entry)\r\n  entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n  Log (entry)\r\n  Log (\"mname.stamina is less than 0. Running ShowMenu for reducing player.staminacurrent\")\r\n  entry = \"player.staminacurrent = \"+player.staminacurrent\r\n  Log (entry)\r\n  ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false) {\r\n    msg (\"FIX ME!!!  THIS IS NOT SETUP!\")\r\n  }\r\n}\r\n// The next 6 lines are for debugging\r\n// BE SURE TO REMOVE THEM!!!\r\nstamina = \"mname stamina = \"+ mname.stamina\r\nLog (stamina)\r\nentry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\nLog (entry)\r\nLog (\"end of combat function\")\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>I didn't use the correct variables inside of the ShowMenu() script.  (Whoops!)</p>\n<p>Try this (too many changes to list):</p>\n<details>\n<p><strong>combat (REVISED SINCE POSTING!)</strong></p>\n<pre><code>// added this next line for debbuging\n// BE SURE TO REMOVE IT!!\nLog (\"Running combat function.\")\n// END OF KV MOVING THINGS\nmsg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combatant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\nmroll = mname.skill + DiceRoll (\"2d6\")\nproll = player.skillcurrent + DiceRoll (\"2d6\")\nmsg (\"&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player Roll: \"+ proll)\nmsg (\"&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \" Roll: \"+ mroll)\ngame.temp_mname = mname\nentry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\nLog (entry)\nif (proll &gt; mroll) {\n  Log (\"proll is greater than mroll\")\n  msg (\"You damaged your opponent for 2 Stamina!\")\n  Log (\"You damaged your opponent for 2 Stamina!\")\n  game.temp_mname.stamina = game.temp_mname.stamina - 2\n  entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n  Log (entry)\n  if (game.temp_mname.stamina&gt;0) {\n    Log (\"game.temp_mname.stamina is greater than 0. Running ShowMenu for more damage\")\n    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n    Log (entry)\n    ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n      switch (result) {\n        case (\"Yes\") {\n          lroll = DiceRoll (\"2d6\")\n          if (lroll &lt; player.luckcurrent) {\n            Log (\"Dealt 2 more stamina damage\")\n            msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n            msg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combatant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + game.temp_mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + game.temp_mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + game.temp_mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\n            game.temp_mname.stamina = game.temp_mname.stamina - 2\n            entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n            Log (entry)\n            player.luckcurrent = player.luckcurrent - 1\n          }\n          else {\n            Log (\"Did not roll successfully.  No addition to stamina damage.\")\n            msg (\"You luck roll was unsuccessful!\")\n            player.luckcurrent = player.luckcurrent - 1\n          }\n        }\n      }\n    }\n  }\n  Log (\"ShowMenu ends.\")\n}\nelse {\n  Log (\"proll is than than mroll\")\n  msg (\"You were damaged for 2 Stamina!\")\n  player.staminacurrent = player.staminacurrent - 2\n  entry = \"mname.stamina = \"+mname.stamina\n  Log (entry)\n  entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n  Log (entry)\n  Log (\"mname.stamina is less than 0. Running ShowMenu for reducing player.staminacurrent\")\n  entry = \"player.staminacurrent = \"+player.staminacurrent\n  Log (entry)\n  ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false) {\n    msg (\"FIX ME!!!  THIS IS NOT SETUP!\")\n  }\n}\n// The next 6 lines are for debugging\n// BE SURE TO REMOVE THEM!!!\nstamina = \"mname stamina = \"+ mname.stamina\nLog (stamina)\nentry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\nLog (entry)\nLog (\"end of combat function\")\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-01-30T19:06:36.6720334Z",
      "LastEditDate": "2018-01-30T21:39:44.9685488Z",
      "link": null
    },
    {
      "PostId": "ecf5d5a0-02ae-4dba-ba70-59dcabde9de8",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ok. Looking great. Thanks for all the help. I have added the coding for testing Luck if you are damaged and added a room called \"Game Over\" where I'll do some stuff and end the game if the player dies. Here is the problem. I tested it with the enemy having a high Skill and played until the player died. It went to the Game Over room where I clear the screen and finish the game. The problem is that the showmenu for testing your luck still appears on the screen and doesn't look right.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Ok. Looking great. Thanks for all the help. I have added the coding for testing Luck if you are damaged and added a room called \"Game Over\" where I'll do some stuff and end the game if the player dies. Here is the problem. I tested it with the enemy having a high Skill and played until the player died. It went to the Game Over room where I clear the screen and finish the game. The problem is that the showmenu for testing your luck still appears on the screen and doesn't look right.</p>\n\n",
      "PostDate": "2018-01-30T19:45:40.3811616Z",
      "LastEditDate": "2018-01-30T19:47:17.4201852Z",
      "link": null
    },
    {
      "PostId": "cc8af40d-6b46-4640-8caf-4acf5140d53e",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"City of Thieves\">\r\n    <gameid>279159d1-909e-4eb4-af6e-c07a43336a6b</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <author>Ian Livingstone</author>\r\n    <category>Fantasy</category>\r\n    <start type=\"script\">\r\n      player.skillmax = 6 + DiceRoll (\"1d6\")\r\n      player.skillcurrent = player.skillmax\r\n      player.staminamax = 12 + DiceRoll (\"2d6\")\r\n      player.staminacurrent = player.staminamax\r\n      player.luckmax = 6 + DiceRoll (\"1d6\")\r\n      player.luckcurrent = player.luckmax\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\">\r\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\r\n      // replaced your while script with the next line:\r\n      // FightRounds (FirstDEATHHAWK, 3)\r\n      //\r\n      // You could also put this line:\r\n      FightUntilDead (FirstDEATHHAWK)\r\n      //\r\n      // OR, TO JUST ATTACK ONCE:\r\n      // combat(FirstDEATHHAWK)\r\n    </enter>\r\n    <beforeenter type=\"script\">\r\n    </beforeenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <statusattributes type=\"stringdictionary\">\r\n        <item>\r\n          <key>skilldisplay</key>\r\n          <value>Skill: !</value>\r\n        </item>\r\n        <item>\r\n          <key>staminadisplay</key>\r\n          <value>Stamina: !</value>\r\n        </item>\r\n        <item>\r\n          <key>luckdisplay</key>\r\n          <value>Luck: !</value>\r\n        </item>\r\n      </statusattributes>\r\n      <provisions type=\"int\">10</provisions>\r\n      <gold type=\"int\">0</gold>\r\n      <jewels type=\"int\">0</jewels>\r\n      <skillcurrent type=\"int\">0</skillcurrent>\r\n      <skillmax type=\"int\">0</skillmax>\r\n      <staminacurrent type=\"int\">0</staminacurrent>\r\n      <staminamax type=\"int\">0</staminamax>\r\n      <luckcurrent type=\"int\">0</luckcurrent>\r\n      <luckmax type=\"int\">0</luckmax>\r\n      <changedstaminacurrent type=\"script\"><![CDATA[\r\n        if (player.staminacurrent > player.staminamax) {\r\n          player.staminacurrent = player.staminamax\r\n        }\r\n        if (player.staminacurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\r\n      ]]></changedstaminacurrent>\r\n      <changedskillcurrent type=\"script\"><![CDATA[\r\n        if (player.skillcurrent > player.skillmax) {\r\n          player.skillcurrent = player.skillmax\r\n        }\r\n        if (player.skillcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\r\n      ]]></changedskillcurrent>\r\n      <changedluckcurrent type=\"script\"><![CDATA[\r\n        if (player.luckcurrent > player.luckmax) {\r\n          player.luckcurrent = player.luckmax\r\n        }\r\n        if (player.luckcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\r\n      ]]></changedluckcurrent>\r\n      <object name=\"sword\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Sword</alias>\r\n      </object>\r\n      <object name=\"leatherarmor\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Leather Armor</alias>\r\n      </object>\r\n      <object name=\"backpack\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Backpack</alias>\r\n      </object>\r\n    </object>\r\n    <object name=\"FirstDEATHHAWK\">\r\n      <inherit name=\"editor_object\" />\r\n      <stamina type=\"int\">5</stamina>\r\n      <skill type=\"int\">24</skill>\r\n      <alias>First DEATH HAWK</alias>\r\n      <changedstamina type=\"script\">\r\n        // Added by KV for debugging\r\n        Log (\"FirstDEATHHAWK.stamina = \"+ ToString(FirstDEATHHAWK.stamina))\r\n      </changedstamina>\r\n    </object>\r\n  </object>\r\n  <object name=\"potionofskill\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Skill</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofstamina\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Stamina</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\r\n      player.staminacurrent = player.staminamax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofluck\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Luck</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\r\n      player.luckmax = player.luckmax + 1\r\n      player.luckcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <turnscript name=\"fight_until_dead_turnscript\">\r\n    <enabled />\r\n    <script><![CDATA[\r\n      if (HasAttribute(game.pov,\"incombat\")) {\r\n        if (game.pov.incombat) {\r\n          if (HasAttribute(game.pov,\"opponent\")) {\r\n            if (game.pov.parent = game.pov.opponent.parent) {\r\n              if (game.pov.opponent.stamina > 0) {\r\n                combat (game.pov.opponent)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    ]]></script>\r\n  </turnscript>\r\n  <object name=\"Game Over\">\r\n    <inherit name=\"editor_room\" />\r\n    <description>Though you have fought valiantly, you, unfortunately, did not survive!</description>\r\n    <enter type=\"script\">\r\n      ClearScreen\r\n      finish\r\n    </enter>\r\n  </object>\r\n  <function name=\"combat\" parameters=\"mname\" type=\"string\"><![CDATA[\r\n    // added this next line for debbuging\r\n    // BE SURE TO REMOVE IT!!\r\n    Log (\"Running combat function.\")\r\n    // END OF KV MOVING THINGS\r\n    msg (\"<table style=\\\"width: 75%\\\"><tr><th>Combatant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + mname.skill + \"</td> <td align=\\\"center\\\">\" + mname.stamina + \"</td></tr> </table>\")\r\n    mroll = mname.skill + DiceRoll (\"2d6\")\r\n    proll = player.skillcurrent + DiceRoll (\"2d6\")\r\n    msg (\"<b><font color=\\\"blue\\\">Player Roll: \"+ proll)\r\n    msg (\"<b><font color=\\\"red\\\">\" + mname.alias + \" Roll: \"+ mroll)\r\n    game.temp_mname = mname\r\n    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n    Log (entry)\r\n    if (proll > mroll) {\r\n      Log (\"proll is greater than mroll\")\r\n      msg (\"You damaged your opponent for 2 Stamina!\")\r\n      Log (\"You damaged your opponent for 2 Stamina!\")\r\n      game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n      Log (entry)\r\n      if (game.temp_mname.stamina>0) {\r\n        Log (\"game.temp_mname.stamina is greater than 0. Running ShowMenu for more damage\")\r\n        entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n        Log (entry)\r\n        ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n          switch (result) {\r\n            case (\"Yes\") {\r\n              lroll = DiceRoll (\"2d6\")\r\n              if (lroll < player.luckcurrent) {\r\n                Log (\"Dealt 2 more stamina damage\")\r\n                msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n                msg (\"<table style=\\\"width: 75%\\\"><tr><th>Combatant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + game.temp_mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + game.temp_mname.skill + \"</td> <td align=\\\"center\\\">\" + game.temp_mname.stamina + \"</td></tr> </table>\")\r\n                game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n                entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n                Log (entry)\r\n                player.luckcurrent = player.luckcurrent - 1\r\n              }\r\n              else {\r\n                Log (\"Did not roll successfully.  No addition to stamina damage.\")\r\n                msg (\"You luck roll was unsuccessful!\")\r\n                player.luckcurrent = player.luckcurrent - 1\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      Log (\"ShowMenu ends.\")\r\n    }\r\n    else {\r\n      Log (\"proll is than than mroll\")\r\n      msg (\"You were damaged for 2 Stamina!\")\r\n      player.staminacurrent = player.staminacurrent - 2\r\n      entry = \"mname.stamina = \"+mname.stamina\r\n      Log (entry)\r\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n      Log (entry)\r\n      Log (\"mname.stamina is less than 0. Running ShowMenu for reducing player.staminacurrent\")\r\n      entry = \"player.staminacurrent = \"+player.staminacurrent\r\n      Log (entry)\r\n      ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false) {\r\n        switch (result) {\r\n          case (\"Yes\") {\r\n            lroll = DiceRoll (\"2d6\")\r\n            if (lroll < player.luckcurrent) {\r\n              Log (\"Dealt 2 less stamina damage\")\r\n              msg (\"Your luck roll was successful! You are dealt 2 less Stamina damage!\")\r\n              msg (\"<table style=\\\"width: 75%\\\"><tr><th>Combatant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + game.temp_mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + game.temp_mname.skill + \"</td> <td align=\\\"center\\\">\" + game.temp_mname.stamina + \"</td></tr> </table>\")\r\n              player.staminacurrent = player.staminacurrent + 2\r\n              entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n              Log (entry)\r\n              player.luckcurrent = player.luckcurrent - 1\r\n            }\r\n            else {\r\n              Log (\"Did not roll successfully.  No reduction to stamina damage.\")\r\n              msg (\"You luck roll was unsuccessful!\")\r\n              player.luckcurrent = player.luckcurrent - 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // The next 6 lines are for debugging\r\n    // BE SURE TO REMOVE THEM!!!\r\n    stamina = \"mname stamina = \"+ mname.stamina\r\n    Log (stamina)\r\n    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n    Log (entry)\r\n    Log (\"end of combat function\")\r\n  ]]></function>\r\n  <function name=\"FightRounds\" parameters=\"object, rounds\">\r\n    if (not TypeOf(rounds) = \"int\") {\r\n      if (not IsInt(rounds)) {\r\n        error (\"FightRounds:  rounds parameter must be an integer\")\r\n      }\r\n      else {\r\n        rounds = ToInt(rounds)\r\n      }\r\n    }\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    combat (game.pov.opponent)\r\n    SetTurnTimeout (rounds+1) {\r\n      game.pov.opponent = null\r\n      game.pov.incombat = false\r\n    }\r\n  </function>\r\n  <function name=\"FightUntilDead\" parameters=\"object\">\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    combat (game.pov.opponent)\r\n  </function>\r\n</asl>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"City of Thieves\"&gt;\n    &lt;gameid&gt;279159d1-909e-4eb4-af6e-c07a43336a6b&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;author&gt;Ian Livingstone&lt;/author&gt;\n    &lt;category&gt;Fantasy&lt;/category&gt;\n    &lt;start type=\"script\"&gt;\n      player.skillmax = 6 + DiceRoll (\"1d6\")\n      player.skillcurrent = player.skillmax\n      player.staminamax = 12 + DiceRoll (\"2d6\")\n      player.staminacurrent = player.staminamax\n      player.luckmax = 6 + DiceRoll (\"1d6\")\n      player.luckcurrent = player.luckmax\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\n      // replaced your while script with the next line:\n      // FightRounds (FirstDEATHHAWK, 3)\n      //\n      // You could also put this line:\n      FightUntilDead (FirstDEATHHAWK)\n      //\n      // OR, TO JUST ATTACK ONCE:\n      // combat(FirstDEATHHAWK)\n    &lt;/enter&gt;\n    &lt;beforeenter type=\"script\"&gt;\n    &lt;/beforeenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;statusattributes type=\"stringdictionary\"&gt;\n        &lt;item&gt;\n          &lt;key&gt;skilldisplay&lt;/key&gt;\n          &lt;value&gt;Skill: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;staminadisplay&lt;/key&gt;\n          &lt;value&gt;Stamina: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;luckdisplay&lt;/key&gt;\n          &lt;value&gt;Luck: !&lt;/value&gt;\n        &lt;/item&gt;\n      &lt;/statusattributes&gt;\n      &lt;provisions type=\"int\"&gt;10&lt;/provisions&gt;\n      &lt;gold type=\"int\"&gt;0&lt;/gold&gt;\n      &lt;jewels type=\"int\"&gt;0&lt;/jewels&gt;\n      &lt;skillcurrent type=\"int\"&gt;0&lt;/skillcurrent&gt;\n      &lt;skillmax type=\"int\"&gt;0&lt;/skillmax&gt;\n      &lt;staminacurrent type=\"int\"&gt;0&lt;/staminacurrent&gt;\n      &lt;staminamax type=\"int\"&gt;0&lt;/staminamax&gt;\n      &lt;luckcurrent type=\"int\"&gt;0&lt;/luckcurrent&gt;\n      &lt;luckmax type=\"int\"&gt;0&lt;/luckmax&gt;\n      &lt;changedstaminacurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.staminacurrent &gt; player.staminamax) {\n          player.staminacurrent = player.staminamax\n        }\n        if (player.staminacurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\n      ]]&gt;&lt;/changedstaminacurrent&gt;\n      &lt;changedskillcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.skillcurrent &gt; player.skillmax) {\n          player.skillcurrent = player.skillmax\n        }\n        if (player.skillcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\n      ]]&gt;&lt;/changedskillcurrent&gt;\n      &lt;changedluckcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.luckcurrent &gt; player.luckmax) {\n          player.luckcurrent = player.luckmax\n        }\n        if (player.luckcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\n      ]]&gt;&lt;/changedluckcurrent&gt;\n      &lt;object name=\"sword\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Sword&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"leatherarmor\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Leather Armor&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"backpack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Backpack&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"FirstDEATHHAWK\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;stamina type=\"int\"&gt;5&lt;/stamina&gt;\n      &lt;skill type=\"int\"&gt;24&lt;/skill&gt;\n      &lt;alias&gt;First DEATH HAWK&lt;/alias&gt;\n      &lt;changedstamina type=\"script\"&gt;\n        // Added by KV for debugging\n        Log (\"FirstDEATHHAWK.stamina = \"+ ToString(FirstDEATHHAWK.stamina))\n      &lt;/changedstamina&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofskill\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Skill&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofstamina\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Stamina&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\n      player.staminacurrent = player.staminamax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofluck\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Luck&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\n      player.luckmax = player.luckmax + 1\n      player.luckcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=\"fight_until_dead_turnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (HasAttribute(game.pov,\"incombat\")) {\n        if (game.pov.incombat) {\n          if (HasAttribute(game.pov,\"opponent\")) {\n            if (game.pov.parent = game.pov.opponent.parent) {\n              if (game.pov.opponent.stamina &gt; 0) {\n                combat (game.pov.opponent)\n              }\n            }\n          }\n        }\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;object name=\"Game Over\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;Though you have fought valiantly, you, unfortunately, did not survive!&lt;/description&gt;\n    &lt;enter type=\"script\"&gt;\n      ClearScreen\n      finish\n    &lt;/enter&gt;\n  &lt;/object&gt;\n  &lt;function name=\"combat\" parameters=\"mname\" type=\"string\"&gt;&lt;![CDATA[\n    // added this next line for debbuging\n    // BE SURE TO REMOVE IT!!\n    Log (\"Running combat function.\")\n    // END OF KV MOVING THINGS\n    msg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combatant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\n    mroll = mname.skill + DiceRoll (\"2d6\")\n    proll = player.skillcurrent + DiceRoll (\"2d6\")\n    msg (\"&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player Roll: \"+ proll)\n    msg (\"&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \" Roll: \"+ mroll)\n    game.temp_mname = mname\n    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n    Log (entry)\n    if (proll &gt; mroll) {\n      Log (\"proll is greater than mroll\")\n      msg (\"You damaged your opponent for 2 Stamina!\")\n      Log (\"You damaged your opponent for 2 Stamina!\")\n      game.temp_mname.stamina = game.temp_mname.stamina - 2\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n      Log (entry)\n      if (game.temp_mname.stamina&gt;0) {\n        Log (\"game.temp_mname.stamina is greater than 0. Running ShowMenu for more damage\")\n        entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n        Log (entry)\n        ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n          switch (result) {\n            case (\"Yes\") {\n              lroll = DiceRoll (\"2d6\")\n              if (lroll &lt; player.luckcurrent) {\n                Log (\"Dealt 2 more stamina damage\")\n                msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n                msg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combatant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + game.temp_mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + game.temp_mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + game.temp_mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\n                game.temp_mname.stamina = game.temp_mname.stamina - 2\n                entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n                Log (entry)\n                player.luckcurrent = player.luckcurrent - 1\n              }\n              else {\n                Log (\"Did not roll successfully.  No addition to stamina damage.\")\n                msg (\"You luck roll was unsuccessful!\")\n                player.luckcurrent = player.luckcurrent - 1\n              }\n            }\n          }\n        }\n      }\n      Log (\"ShowMenu ends.\")\n    }\n    else {\n      Log (\"proll is than than mroll\")\n      msg (\"You were damaged for 2 Stamina!\")\n      player.staminacurrent = player.staminacurrent - 2\n      entry = \"mname.stamina = \"+mname.stamina\n      Log (entry)\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n      Log (entry)\n      Log (\"mname.stamina is less than 0. Running ShowMenu for reducing player.staminacurrent\")\n      entry = \"player.staminacurrent = \"+player.staminacurrent\n      Log (entry)\n      ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false) {\n        switch (result) {\n          case (\"Yes\") {\n            lroll = DiceRoll (\"2d6\")\n            if (lroll &lt; player.luckcurrent) {\n              Log (\"Dealt 2 less stamina damage\")\n              msg (\"Your luck roll was successful! You are dealt 2 less Stamina damage!\")\n              msg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combatant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + game.temp_mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + game.temp_mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + game.temp_mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\n              player.staminacurrent = player.staminacurrent + 2\n              entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n              Log (entry)\n              player.luckcurrent = player.luckcurrent - 1\n            }\n            else {\n              Log (\"Did not roll successfully.  No reduction to stamina damage.\")\n              msg (\"You luck roll was unsuccessful!\")\n              player.luckcurrent = player.luckcurrent - 1\n            }\n          }\n        }\n      }\n    }\n    // The next 6 lines are for debugging\n    // BE SURE TO REMOVE THEM!!!\n    stamina = \"mname stamina = \"+ mname.stamina\n    Log (stamina)\n    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n    Log (entry)\n    Log (\"end of combat function\")\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"FightRounds\" parameters=\"object, rounds\"&gt;\n    if (not TypeOf(rounds) = \"int\") {\n      if (not IsInt(rounds)) {\n        error (\"FightRounds:  rounds parameter must be an integer\")\n      }\n      else {\n        rounds = ToInt(rounds)\n      }\n    }\n    game.pov.opponent = object\n    game.pov.incombat = true\n    combat (game.pov.opponent)\n    SetTurnTimeout (rounds+1) {\n      game.pov.opponent = null\n      game.pov.incombat = false\n    }\n  &lt;/function&gt;\n  &lt;function name=\"FightUntilDead\" parameters=\"object\"&gt;\n    game.pov.opponent = object\n    game.pov.incombat = true\n    combat (game.pov.opponent)\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2018-01-30T19:47:41.0594869Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "54a768fb-8db9-4b62-bb03-7091520b85b5",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Does it need to look something like this?\r\n\r\n<details>\r\n\r\n[**(CLICK TO WATCH THE VIDEO)**](https://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharing \"https://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharinghttps://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharing\")\r\n\r\n[![image](https://user-images.githubusercontent.com/30656341/35589042-2078a08c-05c8-11e8-8bde-c599bd029671.png)](https://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharing \"https://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharinghttps://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharing\")\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>Does it need to look something like this?</p>\n<details>\n<p><a href=\"https://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharing\" title=\"https://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharinghttps://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharing\"><strong>(CLICK TO WATCH THE VIDEO)</strong></a></p>\n<p><a href=\"https://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharing\" title=\"https://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharinghttps://drive.google.com/file/d/1mNx6Dmsas5CNGa93pcwO0AlY8EkZdUjH/view?usp=sharing\"><img src=\"https://user-images.githubusercontent.com/30656341/35589042-2078a08c-05c8-11e8-8bde-c599bd029671.png\" alt=\"image\"></a></p>\n</details>\n\n",
      "PostDate": "2018-01-30T20:17:47.9273919Z",
      "LastEditDate": "2018-01-30T21:45:51.2231354Z",
      "link": null
    },
    {
      "PostId": "a474d214-bbd4-4936-8efd-82a1353a9de2",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Not really sure what you are asking. Are you asking should the combatants be at the top of the screen? If so, that doesn't really matter. The combat seems to be working well. I just need to get player death looking right. Like I said, when the player dies and moves to Game Over room, I clear the screen and Finish the Game, but the Luck Roll question is still showing up. It just looks wrong.",
      "EditableFormat": "markdown",
      "HTML": "<p>Not really sure what you are asking. Are you asking should the combatants be at the top of the screen? If so, that doesn't really matter. The combat seems to be working well. I just need to get player death looking right. Like I said, when the player dies and moves to Game Over room, I clear the screen and Finish the Game, but the Luck Roll question is still showing up. It just looks wrong.</p>\n\n",
      "PostDate": "2018-01-30T20:29:20.9776178Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "346f2915-f2c7-4221-a02b-fb5ec926dcaf",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "<details><summary>> Not really sure what you are asking.</summary>\r\n\r\nI don't think you're alone on that one.  \r\n\r\n*(Just kidding.  I know what you're asking now.  I missed one of your posts.)*\r\n\r\n</details>\r\n\r\n---\r\n<details><summary>> Are you asking should the combatants be at the top of the screen?</summary>\r\n\r\nNegative.\r\n\r\nThat just shows you the combatant's stamina changing.  I put it up there so we could watch what was happening as it happened.\r\n\r\n</details>\r\n\r\n---\r\n<details><summary>> If so, that doesn't really matter. </summary>\r\n\r\nOh, okay...\r\n\r\nI made it work with the panes instead of that table, too, just in case it ends up mattering at a later date.\r\n\r\n[video link](https://drive.google.com/open?id=1VvTIGtrw2oLu6snwXKIIp1prSUZJV4FL)\r\n\r\n</details>\r\n\r\n---\r\n<details><summary>> The combat seems to be working well.</summary>\r\n\r\nHa!\r\n\r\nThis is in between two big walls of text (one post was from each of us, but I've used a \\<details> element to tidy up things up things on my end now):\r\n\r\nhttp://textadventures.co.uk/forum/quest/topic/occl0bwg2kklezad05hkeg/help-with-coding#ecf5d5a0-02ae-4dba-ba70-59dcabde9de8\r\n\r\nI didn't even see it!\r\n\r\nI shall investigate that problem.\r\n\r\n</details>\r\n\r\n\r\n<span style='color:white;background:white;'>I CAN POST THIS HERE!!!</span>",
      "EditableFormat": "markdown",
      "HTML": "<details><summary>&gt; Not really sure what you are asking.</summary>\n<p>I don't think you're alone on that one.</p>\n<p><em>(Just kidding.  I know what you're asking now.  I missed one of your posts.)</em></p>\n</details>\n<hr>\n<details><summary>&gt; Are you asking should the combatants be at the top of the screen?</summary>\n<p>Negative.</p>\n<p>That just shows you the combatant's stamina changing.  I put it up there so we could watch what was happening as it happened.</p>\n</details>\n<hr>\n<details><summary>&gt; If so, that doesn't really matter. </summary>\n<p>Oh, okay...</p>\n<p>I made it work with the panes instead of that table, too, just in case it ends up mattering at a later date.</p>\n<p><a href=\"https://drive.google.com/open?id=1VvTIGtrw2oLu6snwXKIIp1prSUZJV4FL\">video link</a></p>\n</details>\n<hr>\n<details><summary>&gt; The combat seems to be working well.</summary>\n<p>Ha!</p>\n<p>This is in between two big walls of text (one post was from each of us, but I've used a &lt;details&gt; element to tidy up things up things on my end now):</p>\n<p>http://textadventures.co.uk/forum/quest/topic/occl0bwg2kklezad05hkeg/help-with-coding#ecf5d5a0-02ae-4dba-ba70-59dcabde9de8</p>\n<p>I didn't even see it!</p>\n<p>I shall investigate that problem.</p>\n</details>\n<p><span style=\"color: white; background: white\">I CAN POST THIS HERE!!!</span></p>\n\n",
      "PostDate": "2018-01-30T20:58:27.438619Z",
      "LastEditDate": "2018-01-30T21:50:25.8660488Z",
      "link": null
    },
    {
      "PostId": "ff3a5b13-683f-479d-b91b-91255f346e63",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "ya, quest's 'order of operations' with it's Scripting can be annoying:\r\n\r\n--------------------------\r\n\r\nscript 1\r\n-> script 2A\r\nscript 2B\r\n\r\nthis is just showing that 'script 2A' and script '2B' can be happening at the same time\r\n\r\n---------------------\r\n\r\nboolean_variable = true\r\nscript 1\r\n-> show menu (\"yes/no?\", LIST, false) {\r\n->-> boolean_variable = false\r\n-> }\r\nif (boolean_variable) {\r\n-> msg (\"I don't want this to show up, BUT IT DOES, argh!!\")\r\n}\r\n\r\nand this is possible too\r\n\r\n---------\r\n\r\nunfortunately, quest requires you to be creative with its scripting lots of times... due to not being able to stop/halt/break scripting from executing/activating/running...\r\n\r\nthe 'on ready' only works in some situations and 'wait' isn't always ideal or desired... and 'while' doesn't work with user input (typed-in nor with selected from: popup menu or hyperlink text)",
      "EditableFormat": "markdown",
      "HTML": "<p>ya, quest's 'order of operations' with it's Scripting can be annoying:</p>\n<hr>\n<p>script 1<br>\n-&gt; script 2A<br>\nscript 2B</p>\n<p>this is just showing that 'script 2A' and script '2B' can be happening at the same time</p>\n<hr>\n<p>boolean_variable = true<br>\nscript 1<br>\n-&gt; show menu (\"yes/no?\", LIST, false) {<br>\n-&gt;-&gt; boolean_variable = false<br>\n-&gt; }<br>\nif (boolean_variable) {<br>\n-&gt; msg (\"I don't want this to show up, BUT IT DOES, argh!!\")<br>\n}</p>\n<p>and this is possible too</p>\n<hr>\n<p>unfortunately, quest requires you to be creative with its scripting lots of times... due to not being able to stop/halt/break scripting from executing/activating/running...</p>\n<p>the 'on ready' only works in some situations and 'wait' isn't always ideal or desired... and 'while' doesn't work with user input (typed-in nor with selected from: popup menu or hyperlink text)</p>\n\n",
      "PostDate": "2018-01-30T21:07:41.0390158Z",
      "LastEditDate": "2018-01-30T21:10:55.7667897Z",
      "link": null
    },
    {
      "PostId": "4f652bd1-f7f6-4a24-87f1-9f71811a8b7c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Make a new game and replace it's full code with this:\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"City of Thieves\">\r\n    <gameid>279159d1-909e-4eb4-af6e-c07a43336a6b</gameid>\r\n    <version>1.0.1</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <author>Ian Livingstone</author>\r\n    <category>Fantasy</category>\r\n    <feature_advancedscripts />\r\n    <customstatuspane />\r\n    <start type=\"script\">\r\n      player.skillmax = 6 + DiceRoll (\"1d6\")\r\n      player.skillcurrent = player.skillmax\r\n      player.staminamax = 12 + DiceRoll (\"2d6\")\r\n      player.staminacurrent = player.staminamax\r\n      player.luckmax = 6 + DiceRoll (\"1d6\")\r\n      player.luckcurrent = player.luckmax\r\n    </start>\r\n    <inituserinterface type=\"script\"><![CDATA[\r\n      JS.setCustomStatus (\"### <br/>Stamina: !\")\r\n      JS.uiHide (\"#customStatusPane\")\r\n    ]]></inituserinterface>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\">\r\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\r\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\r\n      // replaced your while script with the next line:\r\n      // FightRounds (FirstDEATHHAWK, 3)\r\n      //\r\n      // You could also put this line:\r\n      FightUntilDead (FirstDEATHHAWK)\r\n      //\r\n      // OR, TO JUST ATTACK ONCE:\r\n      // combat(FirstDEATHHAWK)\r\n      //\r\n      // End of KV's changes\r\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\r\n    </enter>\r\n    <beforeenter type=\"script\">\r\n    </beforeenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <statusattributes type=\"stringdictionary\">\r\n        <item>\r\n          <key>skilldisplay</key>\r\n          <value>Skill: !</value>\r\n        </item>\r\n        <item>\r\n          <key>staminadisplay</key>\r\n          <value>Stamina: !</value>\r\n        </item>\r\n        <item>\r\n          <key>luckdisplay</key>\r\n          <value>Luck: !</value>\r\n        </item>\r\n      </statusattributes>\r\n      <provisions type=\"int\">10</provisions>\r\n      <gold type=\"int\">0</gold>\r\n      <jewels type=\"int\">0</jewels>\r\n      <skillcurrent type=\"int\">0</skillcurrent>\r\n      <skillmax type=\"int\">0</skillmax>\r\n      <staminacurrent type=\"int\">0</staminacurrent>\r\n      <staminamax type=\"int\">0</staminamax>\r\n      <luckcurrent type=\"int\">0</luckcurrent>\r\n      <luckmax type=\"int\">0</luckmax>\r\n      <changedstaminacurrent type=\"script\"><![CDATA[\r\n        if (player.staminacurrent > player.staminamax) {\r\n          player.staminacurrent = player.staminamax\r\n        }\r\n        if (player.staminacurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\r\n      ]]></changedstaminacurrent>\r\n      <changedskillcurrent type=\"script\"><![CDATA[\r\n        if (player.skillcurrent > player.skillmax) {\r\n          player.skillcurrent = player.skillmax\r\n        }\r\n        if (player.skillcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\r\n      ]]></changedskillcurrent>\r\n      <changedluckcurrent type=\"script\"><![CDATA[\r\n        if (player.luckcurrent > player.luckmax) {\r\n          player.luckcurrent = player.luckmax\r\n        }\r\n        if (player.luckcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\r\n      ]]></changedluckcurrent>\r\n      <object name=\"sword\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Sword</alias>\r\n      </object>\r\n      <object name=\"leatherarmor\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Leather Armor</alias>\r\n      </object>\r\n      <object name=\"backpack\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Backpack</alias>\r\n      </object>\r\n    </object>\r\n    <object name=\"FirstDEATHHAWK\">\r\n      <inherit name=\"editor_object\" />\r\n      <stamina type=\"int\">5</stamina>\r\n      <skill type=\"int\">4</skill>\r\n      <alias>First DEATH HAWK</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <changedstamina type=\"script\">\r\n        // Added by KV for debugging\r\n        Log (\"CHANGEDSTAMINA SCRIPT:   FirstDEATHHAWK.stamina = \"+ ToString(FirstDEATHHAWK.stamina))\r\n      </changedstamina>\r\n    </object>\r\n  </object>\r\n  <object name=\"potionofskill\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Skill</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofstamina\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Stamina</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\r\n      player.staminacurrent = player.staminamax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofluck\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Luck</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\r\n      player.luckmax = player.luckmax + 1\r\n      player.luckcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <turnscript name=\"fight_until_dead_turnscript\">\r\n    <enabled />\r\n    <script><![CDATA[\r\n      if (HasAttribute(game.pov,\"incombat\")) {\r\n        if (game.pov.incombat) {\r\n          if (HasAttribute(game.pov,\"opponent\")) {\r\n            if (game.pov.parent = game.pov.opponent.parent) {\r\n              if (game.pov.opponent.stamina > 0) {\r\n                combat (game.pov.opponent)\r\n                JS.uiShow (\"#customStatusPane\")\r\n                UpdateMnameStatPane\r\n                // This is just to exit the function without a bunch of else statements.\r\n                return (true)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      JS.uiHide (\"#customStatusPane\")\r\n    ]]></script>\r\n  </turnscript>\r\n  <function name=\"combat\" parameters=\"mname\" type=\"string\"><![CDATA[\r\n    if (mname.stamina>0) {\r\n      game.temp_mname = mname\r\n      JS.uiShow (\"#customStatusPane\")\r\n      UpdateMnameStatPane\r\n      // added this next line for debbuging\r\n      // BE SURE TO REMOVE IT!!\r\n      Log (\"Running combat function.\")\r\n      // END OF KV MOVING THINGS\r\n      mroll = mname.skill + DiceRoll (\"2d6\")\r\n      proll = player.skillcurrent + DiceRoll (\"2d6\")\r\n      msg (\"<b><font color=\\\"blue\\\">Player Roll: \"+ proll)\r\n      msg (\"<b><font color=\\\"red\\\">\" + mname.alias + \" Roll: \"+ mroll)\r\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n      Log (entry)\r\n      if (proll > mroll) {\r\n        Log (\"proll is greater than mroll\")\r\n        msg (\"You damaged your opponent for 2 Stamina!\")\r\n        UpdateMnameStatPane\r\n        Log (\"You damaged your opponent for 2 Stamina!\")\r\n        game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n        entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n        UpdateMnameStatPane\r\n        Log (entry)\r\n        if (game.temp_mname.stamina>0) {\r\n          Log (\"game.temp_mname.stamina is greater than 0. Running ShowMenu for more damage\")\r\n          entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n          Log (entry)\r\n          ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n            switch (result) {\r\n              case (\"Yes\") {\r\n                lroll = DiceRoll (\"2d6\")\r\n                if (lroll < player.luckcurrent) {\r\n                  Log (\"Dealt 2 more stamina damage\")\r\n                  msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n                  game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n                  UpdateMnameStatPane\r\n                  entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n                  Log (entry)\r\n                  player.luckcurrent = player.luckcurrent - 1\r\n                }\r\n                else {\r\n                  Log (\"Did not roll successfully.  No addition to stamina damage.\")\r\n                  msg (\"You luck roll was unsuccessful!\")\r\n                  player.luckcurrent = player.luckcurrent - 1\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n        Log (\"ShowMenu ends.\")\r\n      }\r\n      else {\r\n        Log (\"proll is than than mroll\")\r\n        msg (\"You were damaged for 2 Stamina!\")\r\n        ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false) {\r\n          if (LCase(result) = \"yes\") {\r\n            msg (\"FIX ME!!!  THIS IS NOT SETUP!  I'm just adding 4 to stamina.\")\r\n          }\r\n          else {\r\n            msg (\"Okay.  Skipping that bit, then!\")\r\n          }\r\n        }\r\n        player.staminacurrent = player.staminacurrent - 2\r\n        entry = \"mname.stamina = \"+mname.stamina\r\n        Log (entry)\r\n        entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n        Log (entry)\r\n        Log (\"mname.stamina is less than 0. AND: Running ShowMenu for reducing player.staminacurrent\")\r\n        entry = \"player.staminacurrent = \"+player.staminacurrent\r\n        Log (entry)\r\n      }\r\n      UpdateMnameStatPane\r\n      // The next 6 lines are for debugging\r\n      // BE SURE TO REMOVE THEM!!!\r\n      stamina = \"mname stamina = \"+ mname.stamina\r\n      Log (stamina)\r\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n      Log (entry)\r\n    }\r\n    else {\r\n      msg (CapFirst(mname.article) + \" is already defeated!\")\r\n    }\r\n    if (mname.stamina<1) {\r\n      msg (CapFirst(GetDisplayName(mname)) + \" has been defeated!\")\r\n      RemoveObject (mname)\r\n      JS.eval (\"setTimeout(function(){uiHide('#customStatusPane');},500);\")\r\n    }\r\n    Log (\"end of combat function\")\r\n  ]]></function>\r\n  <function name=\"FightRounds\" parameters=\"object, rounds\">\r\n    if (not TypeOf(rounds) = \"int\") {\r\n      if (not IsInt(rounds)) {\r\n        error (\"FightRounds:  rounds parameter must be an integer\")\r\n      }\r\n      else {\r\n        rounds = ToInt(rounds)\r\n      }\r\n    }\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    combat (game.pov.opponent)\r\n    SetTurnTimeout (rounds+1) {\r\n      game.pov.opponent = null\r\n      game.pov.incombat = false\r\n    }\r\n  </function>\r\n  <function name=\"FightUntilDead\" parameters=\"object\">\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    combat (game.pov.opponent)\r\n  </function>\r\n  <function name=\"UpdateMnameStatPane\"><![CDATA[\r\n    JS.eval (\"$('#customStatusPane').html('### <br/>Stamina: !');$('#customStatusPane').html($('#customStatusPane').html().replace(/###/,'\"+CapFirst(GetDisplayName(game.temp_mname))+\"').replace(/!/,'\"+game.temp_mname.stamina+\"'));\")\r\n  ]]></function>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n\r\n(You have added things since I've been changing this, and I don't want you to lose anything.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Make a new game and replace it's full code with this:</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"City of Thieves\"&gt;\n    &lt;gameid&gt;279159d1-909e-4eb4-af6e-c07a43336a6b&lt;/gameid&gt;\n    &lt;version&gt;1.0.1&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;author&gt;Ian Livingstone&lt;/author&gt;\n    &lt;category&gt;Fantasy&lt;/category&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;customstatuspane /&gt;\n    &lt;start type=\"script\"&gt;\n      player.skillmax = 6 + DiceRoll (\"1d6\")\n      player.skillcurrent = player.skillmax\n      player.staminamax = 12 + DiceRoll (\"2d6\")\n      player.staminacurrent = player.staminamax\n      player.luckmax = 6 + DiceRoll (\"1d6\")\n      player.luckcurrent = player.luckmax\n    &lt;/start&gt;\n    &lt;inituserinterface type=\"script\"&gt;&lt;![CDATA[\n      JS.setCustomStatus (\"### &lt;br/&gt;Stamina: !\")\n      JS.uiHide (\"#customStatusPane\")\n    ]]&gt;&lt;/inituserinterface&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\n      // replaced your while script with the next line:\n      // FightRounds (FirstDEATHHAWK, 3)\n      //\n      // You could also put this line:\n      FightUntilDead (FirstDEATHHAWK)\n      //\n      // OR, TO JUST ATTACK ONCE:\n      // combat(FirstDEATHHAWK)\n      //\n      // End of KV's changes\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\n    &lt;/enter&gt;\n    &lt;beforeenter type=\"script\"&gt;\n    &lt;/beforeenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;statusattributes type=\"stringdictionary\"&gt;\n        &lt;item&gt;\n          &lt;key&gt;skilldisplay&lt;/key&gt;\n          &lt;value&gt;Skill: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;staminadisplay&lt;/key&gt;\n          &lt;value&gt;Stamina: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;luckdisplay&lt;/key&gt;\n          &lt;value&gt;Luck: !&lt;/value&gt;\n        &lt;/item&gt;\n      &lt;/statusattributes&gt;\n      &lt;provisions type=\"int\"&gt;10&lt;/provisions&gt;\n      &lt;gold type=\"int\"&gt;0&lt;/gold&gt;\n      &lt;jewels type=\"int\"&gt;0&lt;/jewels&gt;\n      &lt;skillcurrent type=\"int\"&gt;0&lt;/skillcurrent&gt;\n      &lt;skillmax type=\"int\"&gt;0&lt;/skillmax&gt;\n      &lt;staminacurrent type=\"int\"&gt;0&lt;/staminacurrent&gt;\n      &lt;staminamax type=\"int\"&gt;0&lt;/staminamax&gt;\n      &lt;luckcurrent type=\"int\"&gt;0&lt;/luckcurrent&gt;\n      &lt;luckmax type=\"int\"&gt;0&lt;/luckmax&gt;\n      &lt;changedstaminacurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.staminacurrent &gt; player.staminamax) {\n          player.staminacurrent = player.staminamax\n        }\n        if (player.staminacurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\n      ]]&gt;&lt;/changedstaminacurrent&gt;\n      &lt;changedskillcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.skillcurrent &gt; player.skillmax) {\n          player.skillcurrent = player.skillmax\n        }\n        if (player.skillcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\n      ]]&gt;&lt;/changedskillcurrent&gt;\n      &lt;changedluckcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.luckcurrent &gt; player.luckmax) {\n          player.luckcurrent = player.luckmax\n        }\n        if (player.luckcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\n      ]]&gt;&lt;/changedluckcurrent&gt;\n      &lt;object name=\"sword\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Sword&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"leatherarmor\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Leather Armor&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"backpack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Backpack&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"FirstDEATHHAWK\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;stamina type=\"int\"&gt;5&lt;/stamina&gt;\n      &lt;skill type=\"int\"&gt;4&lt;/skill&gt;\n      &lt;alias&gt;First DEATH HAWK&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;changedstamina type=\"script\"&gt;\n        // Added by KV for debugging\n        Log (\"CHANGEDSTAMINA SCRIPT:   FirstDEATHHAWK.stamina = \"+ ToString(FirstDEATHHAWK.stamina))\n      &lt;/changedstamina&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofskill\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Skill&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofstamina\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Stamina&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\n      player.staminacurrent = player.staminamax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofluck\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Luck&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\n      player.luckmax = player.luckmax + 1\n      player.luckcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=\"fight_until_dead_turnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (HasAttribute(game.pov,\"incombat\")) {\n        if (game.pov.incombat) {\n          if (HasAttribute(game.pov,\"opponent\")) {\n            if (game.pov.parent = game.pov.opponent.parent) {\n              if (game.pov.opponent.stamina &gt; 0) {\n                combat (game.pov.opponent)\n                JS.uiShow (\"#customStatusPane\")\n                UpdateMnameStatPane\n                // This is just to exit the function without a bunch of else statements.\n                return (true)\n              }\n            }\n          }\n        }\n      }\n      JS.uiHide (\"#customStatusPane\")\n    ]]&gt;&lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;function name=\"combat\" parameters=\"mname\" type=\"string\"&gt;&lt;![CDATA[\n    if (mname.stamina&gt;0) {\n      game.temp_mname = mname\n      JS.uiShow (\"#customStatusPane\")\n      UpdateMnameStatPane\n      // added this next line for debbuging\n      // BE SURE TO REMOVE IT!!\n      Log (\"Running combat function.\")\n      // END OF KV MOVING THINGS\n      mroll = mname.skill + DiceRoll (\"2d6\")\n      proll = player.skillcurrent + DiceRoll (\"2d6\")\n      msg (\"&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player Roll: \"+ proll)\n      msg (\"&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \" Roll: \"+ mroll)\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n      Log (entry)\n      if (proll &gt; mroll) {\n        Log (\"proll is greater than mroll\")\n        msg (\"You damaged your opponent for 2 Stamina!\")\n        UpdateMnameStatPane\n        Log (\"You damaged your opponent for 2 Stamina!\")\n        game.temp_mname.stamina = game.temp_mname.stamina - 2\n        entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n        UpdateMnameStatPane\n        Log (entry)\n        if (game.temp_mname.stamina&gt;0) {\n          Log (\"game.temp_mname.stamina is greater than 0. Running ShowMenu for more damage\")\n          entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n          Log (entry)\n          ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n            switch (result) {\n              case (\"Yes\") {\n                lroll = DiceRoll (\"2d6\")\n                if (lroll &lt; player.luckcurrent) {\n                  Log (\"Dealt 2 more stamina damage\")\n                  msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n                  game.temp_mname.stamina = game.temp_mname.stamina - 2\n                  UpdateMnameStatPane\n                  entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n                  Log (entry)\n                  player.luckcurrent = player.luckcurrent - 1\n                }\n                else {\n                  Log (\"Did not roll successfully.  No addition to stamina damage.\")\n                  msg (\"You luck roll was unsuccessful!\")\n                  player.luckcurrent = player.luckcurrent - 1\n                }\n              }\n            }\n          }\n        }\n        Log (\"ShowMenu ends.\")\n      }\n      else {\n        Log (\"proll is than than mroll\")\n        msg (\"You were damaged for 2 Stamina!\")\n        ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false) {\n          if (LCase(result) = \"yes\") {\n            msg (\"FIX ME!!!  THIS IS NOT SETUP!  I'm just adding 4 to stamina.\")\n          }\n          else {\n            msg (\"Okay.  Skipping that bit, then!\")\n          }\n        }\n        player.staminacurrent = player.staminacurrent - 2\n        entry = \"mname.stamina = \"+mname.stamina\n        Log (entry)\n        entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n        Log (entry)\n        Log (\"mname.stamina is less than 0. AND: Running ShowMenu for reducing player.staminacurrent\")\n        entry = \"player.staminacurrent = \"+player.staminacurrent\n        Log (entry)\n      }\n      UpdateMnameStatPane\n      // The next 6 lines are for debugging\n      // BE SURE TO REMOVE THEM!!!\n      stamina = \"mname stamina = \"+ mname.stamina\n      Log (stamina)\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n      Log (entry)\n    }\n    else {\n      msg (CapFirst(mname.article) + \" is already defeated!\")\n    }\n    if (mname.stamina&lt;1) {\n      msg (CapFirst(GetDisplayName(mname)) + \" has been defeated!\")\n      RemoveObject (mname)\n      JS.eval (\"setTimeout(function(){uiHide('#customStatusPane');},500);\")\n    }\n    Log (\"end of combat function\")\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"FightRounds\" parameters=\"object, rounds\"&gt;\n    if (not TypeOf(rounds) = \"int\") {\n      if (not IsInt(rounds)) {\n        error (\"FightRounds:  rounds parameter must be an integer\")\n      }\n      else {\n        rounds = ToInt(rounds)\n      }\n    }\n    game.pov.opponent = object\n    game.pov.incombat = true\n    combat (game.pov.opponent)\n    SetTurnTimeout (rounds+1) {\n      game.pov.opponent = null\n      game.pov.incombat = false\n    }\n  &lt;/function&gt;\n  &lt;function name=\"FightUntilDead\" parameters=\"object\"&gt;\n    game.pov.opponent = object\n    game.pov.incombat = true\n    combat (game.pov.opponent)\n  &lt;/function&gt;\n  &lt;function name=\"UpdateMnameStatPane\"&gt;&lt;![CDATA[\n    JS.eval (\"$('#customStatusPane').html('### &lt;br/&gt;Stamina: !');$('#customStatusPane').html($('#customStatusPane').html().replace(/###/,'\"+CapFirst(GetDisplayName(game.temp_mname))+\"').replace(/!/,'\"+game.temp_mname.stamina+\"'));\")\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n<p>(You have added things since I've been changing this, and I don't want you to lose anything.)</p>\n\n",
      "PostDate": "2018-01-30T21:24:03.7522671Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5cbc630b-0c8c-47f7-8793-38d0ce3054df",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yep, HK.\r\n\r\nI had to move a ShowMenu around in a lengthy script.\r\n\r\nIt gives you a chance to save yourself before you die, but the attribute changed before calling the menu.  So, you died, then the menu popped up: \"WOULD YOU LIKE A CHANCE TO LIVE?!?!?!?\"\r\n\r\n(Clicking anything was fruitless, of course.  It was just post-death torture!)",
      "EditableFormat": "markdown",
      "HTML": "<p>Yep, HK.</p>\n<p>I had to move a ShowMenu around in a lengthy script.</p>\n<p>It gives you a chance to save yourself before you die, but the attribute changed before calling the menu.  So, you died, then the menu popped up: \"WOULD YOU LIKE A CHANCE TO LIVE?!?!?!?\"</p>\n<p>(Clicking anything was fruitless, of course.  It was just post-death torture!)</p>\n\n",
      "PostDate": "2018-01-30T21:26:31.2826965Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "164a7150-5806-4a78-8a9a-b8e52dead6e5",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ok. So that is all working good. I have another problem. How do I test that the player actually has luck to test their luck? Once it gets to zero they shouldn't have the option to test luck anymore.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ok. So that is all working good. I have another problem. How do I test that the player actually has luck to test their luck? Once it gets to zero they shouldn't have the option to test luck anymore.</p>\n\n",
      "PostDate": "2018-01-31T05:38:55.1002312Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a37339a7-7602-4819-86d5-1a586e1011eb",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If the attribute is called ```luck```:\r\n\r\n```\r\nif(player.luck>0){\r\n  //Do the thing to test luck.\r\n}\r\nelse{\r\n  //Do something else (if you want to; you don't have to have an else).\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>If the attribute is called <code>luck</code>:</p>\n<pre><code>if(player.luck&gt;0){\n  //Do the thing to test luck.\n}\nelse{\n  //Do something else (if you want to; you don't have to have an else).\n}\n</code></pre>\n\n",
      "PostDate": "2018-01-31T05:42:27.119844Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6a1f98a0-d0ca-40cd-9fa7-22125e80a2fc",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yeah, got that. But where do I put it into my code?",
      "EditableFormat": "markdown",
      "HTML": "<p>Yeah, got that. But where do I put it into my code?</p>\n\n",
      "PostDate": "2018-01-31T06:02:30.8554507Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e982c75d-1c8f-4796-bd70-f024449d9443",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is the part you don't want to run unless ```player.luckcurrent``` is greater than 0:\r\n\r\n```\r\n        ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n          switch (result) {\r\n            case (\"Yes\") {\r\n              lroll = DiceRoll (\"2d6\")\r\n              if (lroll < player.luckcurrent) {\r\n                Log (\"Dealt 2 more stamina damage\")\r\n                msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n                game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n                UpdateMnameStatPane\r\n                entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n                Log (entry)\r\n                player.luckcurrent = player.luckcurrent - 1\r\n              }\r\n              else {\r\n                Log (\"Did not roll successfully.  No addition to stamina damage.\")\r\n                msg (\"You luck roll was unsuccessful!\")\r\n                player.luckcurrent = player.luckcurrent - 1\r\n              }\r\n            }\r\n          }\r\n        }\r\n```\r\n\r\n---\r\nThat is the script which uses luck to change stuff.  \r\n\r\nYou need to nest that inside an ```if{}``` statement:\r\n```\r\nif (player.luckcurrent > 0 ){\r\n  // Run the script to use luck to change stuff.\r\n}\r\n```\r\n\r\n---\r\nIn this instance that would look like this:\r\n\r\n```\r\n      if (player.luckcurrent>0) {\r\n        ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n          switch (result) {\r\n            case (\"Yes\") {\r\n              lroll = DiceRoll (\"2d6\")\r\n              if (lroll < player.luckcurrent) {\r\n                Log (\"Dealt 2 more stamina damage\")\r\n                msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n                game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n                UpdateMnameStatPane\r\n                entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n                Log (entry)\r\n                player.luckcurrent = player.luckcurrent - 1\r\n              }\r\n              else {\r\n                Log (\"Did not roll successfully.  No addition to stamina damage.\")\r\n                msg (\"You luck roll was unsuccessful!\")\r\n                player.luckcurrent = player.luckcurrent - 1\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n```\r\n\r\n---\r\nMaking the entire combat script (the most recent version I know of) this:\r\n\r\n```\r\nif (mname.stamina>0) {\r\n  game.temp_mname = mname\r\n  JS.uiShow (\"#customStatusPane\")\r\n  UpdateMnameStatPane\r\n  // added this next line for debbuging\r\n  // BE SURE TO REMOVE IT!!\r\n  Log (\"Running combat function.\")\r\n  // END OF KV MOVING THINGS\r\n  mroll = mname.skill + DiceRoll (\"2d6\")\r\n  proll = player.skillcurrent + DiceRoll (\"2d6\")\r\n  msg (\"<b><font color=\\\"blue\\\">Player Roll: \"+ proll)\r\n  msg (\"<b><font color=\\\"red\\\">\" + mname.alias + \" Roll: \"+ mroll)\r\n  entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n  Log (entry)\r\n  if (proll > mroll) {\r\n    Log (\"proll is greater than mroll\")\r\n    msg (\"You damaged your opponent for 2 Stamina!\")\r\n    UpdateMnameStatPane\r\n    Log (\"You damaged your opponent for 2 Stamina!\")\r\n    game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n    UpdateMnameStatPane\r\n    Log (entry)\r\n    if (game.temp_mname.stamina>0) {\r\n      Log (\"game.temp_mname.stamina is greater than 0. Running ShowMenu for more damage\")\r\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n      Log (entry)\r\n      if (player.luckcurrent>0) {\r\n        ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n          switch (result) {\r\n            case (\"Yes\") {\r\n              lroll = DiceRoll (\"2d6\")\r\n              if (lroll < player.luckcurrent) {\r\n                Log (\"Dealt 2 more stamina damage\")\r\n                msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n                game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n                UpdateMnameStatPane\r\n                entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n                Log (entry)\r\n                player.luckcurrent = player.luckcurrent - 1\r\n              }\r\n              else {\r\n                Log (\"Did not roll successfully.  No addition to stamina damage.\")\r\n                msg (\"You luck roll was unsuccessful!\")\r\n                player.luckcurrent = player.luckcurrent - 1\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    Log (\"proll is than than mroll\")\r\n    msg (\"You were damaged for 2 Stamina!\")\r\n    ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false) {\r\n      if (LCase(result) = \"yes\") {\r\n        msg (\"FIX ME!!!  THIS IS NOT SETUP!  I'm just adding 4 to stamina.\")\r\n      }\r\n      else {\r\n        msg (\"Okay.  Skipping that bit, then!\")\r\n      }\r\n    }\r\n    player.staminacurrent = player.staminacurrent - 2\r\n    entry = \"mname.stamina = \"+mname.stamina\r\n    Log (entry)\r\n    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n    Log (entry)\r\n    Log (\"mname.stamina is less than 0. AND: Running ShowMenu for reducing player.staminacurrent\")\r\n    entry = \"player.staminacurrent = \"+player.staminacurrent\r\n    Log (entry)\r\n  }\r\n  UpdateMnameStatPane\r\n  // The next 4 lines are for debugging  BE SURE TO REMOVE THEM!!! (In fact, remove all lines using Log().)\r\n  stamina = \"mname stamina = \"+ mname.stamina\r\n  Log (stamina)\r\n  entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n  Log (entry)\r\n}\r\nelse {\r\n  msg (CapFirst(mname.article) + \" is already defeated!\")\r\n}\r\nif (mname.stamina<1) {\r\n  msg (CapFirst(GetDisplayName(mname)) + \" has been defeated!\")\r\n  RemoveObject (mname)\r\n  JS.eval (\"setTimeout(function(){uiHide('#customStatusPane');},500);\")\r\n}\r\nLog (\"end of combat function\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>This is the part you don't want to run unless <code>player.luckcurrent</code> is greater than 0:</p>\n<pre><code>        ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n          switch (result) {\n            case (\"Yes\") {\n              lroll = DiceRoll (\"2d6\")\n              if (lroll &lt; player.luckcurrent) {\n                Log (\"Dealt 2 more stamina damage\")\n                msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n                game.temp_mname.stamina = game.temp_mname.stamina - 2\n                UpdateMnameStatPane\n                entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n                Log (entry)\n                player.luckcurrent = player.luckcurrent - 1\n              }\n              else {\n                Log (\"Did not roll successfully.  No addition to stamina damage.\")\n                msg (\"You luck roll was unsuccessful!\")\n                player.luckcurrent = player.luckcurrent - 1\n              }\n            }\n          }\n        }\n</code></pre>\n<hr>\n<p>That is the script which uses luck to change stuff.</p>\n<p>You need to nest that inside an <code>if{}</code> statement:</p>\n<pre><code>if (player.luckcurrent &gt; 0 ){\n  // Run the script to use luck to change stuff.\n}\n</code></pre>\n<hr>\n<p>In this instance that would look like this:</p>\n<pre><code>      if (player.luckcurrent&gt;0) {\n        ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n          switch (result) {\n            case (\"Yes\") {\n              lroll = DiceRoll (\"2d6\")\n              if (lroll &lt; player.luckcurrent) {\n                Log (\"Dealt 2 more stamina damage\")\n                msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n                game.temp_mname.stamina = game.temp_mname.stamina - 2\n                UpdateMnameStatPane\n                entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n                Log (entry)\n                player.luckcurrent = player.luckcurrent - 1\n              }\n              else {\n                Log (\"Did not roll successfully.  No addition to stamina damage.\")\n                msg (\"You luck roll was unsuccessful!\")\n                player.luckcurrent = player.luckcurrent - 1\n              }\n            }\n          }\n        }\n      }\n</code></pre>\n<hr>\n<p>Making the entire combat script (the most recent version I know of) this:</p>\n<pre><code>if (mname.stamina&gt;0) {\n  game.temp_mname = mname\n  JS.uiShow (\"#customStatusPane\")\n  UpdateMnameStatPane\n  // added this next line for debbuging\n  // BE SURE TO REMOVE IT!!\n  Log (\"Running combat function.\")\n  // END OF KV MOVING THINGS\n  mroll = mname.skill + DiceRoll (\"2d6\")\n  proll = player.skillcurrent + DiceRoll (\"2d6\")\n  msg (\"&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player Roll: \"+ proll)\n  msg (\"&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \" Roll: \"+ mroll)\n  entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n  Log (entry)\n  if (proll &gt; mroll) {\n    Log (\"proll is greater than mroll\")\n    msg (\"You damaged your opponent for 2 Stamina!\")\n    UpdateMnameStatPane\n    Log (\"You damaged your opponent for 2 Stamina!\")\n    game.temp_mname.stamina = game.temp_mname.stamina - 2\n    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n    UpdateMnameStatPane\n    Log (entry)\n    if (game.temp_mname.stamina&gt;0) {\n      Log (\"game.temp_mname.stamina is greater than 0. Running ShowMenu for more damage\")\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n      Log (entry)\n      if (player.luckcurrent&gt;0) {\n        ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n          switch (result) {\n            case (\"Yes\") {\n              lroll = DiceRoll (\"2d6\")\n              if (lroll &lt; player.luckcurrent) {\n                Log (\"Dealt 2 more stamina damage\")\n                msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n                game.temp_mname.stamina = game.temp_mname.stamina - 2\n                UpdateMnameStatPane\n                entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n                Log (entry)\n                player.luckcurrent = player.luckcurrent - 1\n              }\n              else {\n                Log (\"Did not roll successfully.  No addition to stamina damage.\")\n                msg (\"You luck roll was unsuccessful!\")\n                player.luckcurrent = player.luckcurrent - 1\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  else {\n    Log (\"proll is than than mroll\")\n    msg (\"You were damaged for 2 Stamina!\")\n    ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false) {\n      if (LCase(result) = \"yes\") {\n        msg (\"FIX ME!!!  THIS IS NOT SETUP!  I'm just adding 4 to stamina.\")\n      }\n      else {\n        msg (\"Okay.  Skipping that bit, then!\")\n      }\n    }\n    player.staminacurrent = player.staminacurrent - 2\n    entry = \"mname.stamina = \"+mname.stamina\n    Log (entry)\n    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n    Log (entry)\n    Log (\"mname.stamina is less than 0. AND: Running ShowMenu for reducing player.staminacurrent\")\n    entry = \"player.staminacurrent = \"+player.staminacurrent\n    Log (entry)\n  }\n  UpdateMnameStatPane\n  // The next 4 lines are for debugging  BE SURE TO REMOVE THEM!!! (In fact, remove all lines using Log().)\n  stamina = \"mname stamina = \"+ mname.stamina\n  Log (stamina)\n  entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n  Log (entry)\n}\nelse {\n  msg (CapFirst(mname.article) + \" is already defeated!\")\n}\nif (mname.stamina&lt;1) {\n  msg (CapFirst(GetDisplayName(mname)) + \" has been defeated!\")\n  RemoveObject (mname)\n  JS.eval (\"setTimeout(function(){uiHide('#customStatusPane');},500);\")\n}\nLog (\"end of combat function\")\n</code></pre>\n\n",
      "PostDate": "2018-01-31T06:18:00.0177704Z",
      "LastEditDate": "2018-01-31T06:20:16.3085442Z",
      "link": null
    },
    {
      "PostId": "c2c1156f-26fa-4ba4-8945-57973cb9ab3e",
      "UserId": 340011,
      "Username": "wooterslw",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7d20dd39301d8b9be2be0abaf005968d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ok. So new problem. When I add that and the player's luck is zero, after the enemy attacks and does damage it goes to a prompt. If I type a command, like \"look\" the next round of combat happens. But, I don't want the combat to stop until it's over. So how do I fi that?",
      "EditableFormat": "markdown",
      "HTML": "<p>Ok. So new problem. When I add that and the player's luck is zero, after the enemy attacks and does damage it goes to a prompt. If I type a command, like \"look\" the next round of combat happens. But, I don't want the combat to stop until it's over. So how do I fi that?</p>\n\n",
      "PostDate": "2018-01-31T06:44:04.3020572Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "970936a6-c8dd-4332-a3cc-4e97cbf08c5e",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How about this?\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"City of Thieves\">\r\n    <gameid>279159d1-909e-4eb4-af6e-c07a43336a6b</gameid>\r\n    <version>1.0.1</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <author>Ian Livingstone</author>\r\n    <category>Fantasy</category>\r\n    <feature_advancedscripts />\r\n    <customstatuspane />\r\n    <start type=\"script\">\r\n      player.skillmax = 6 + DiceRoll (\"1d6\")\r\n      player.skillcurrent = player.skillmax\r\n      player.staminamax = 12 + DiceRoll (\"2d6\")\r\n      player.staminacurrent = player.staminamax\r\n      player.luckmax = 6 + DiceRoll (\"1d6\")\r\n      player.luckcurrent = player.luckmax\r\n    </start>\r\n    <inituserinterface type=\"script\"><![CDATA[\r\n      JS.setCustomStatus (\"### <br/>Stamina: !\")\r\n      JS.uiHide (\"#customStatusPane\")\r\n    ]]></inituserinterface>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\">\r\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\r\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\r\n      // replaced your while script with the next line:\r\n      // FightRounds (FirstDEATHHAWK, 3)\r\n      //\r\n      // You could also put this line:\r\n      FightUntilDead (FirstDEATHHAWK)\r\n      //\r\n      // OR, TO JUST ATTACK ONCE:\r\n      // combat(FirstDEATHHAWK)\r\n      //\r\n      // End of KV's changes\r\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\r\n    </enter>\r\n    <beforeenter type=\"script\">\r\n    </beforeenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <statusattributes type=\"stringdictionary\">\r\n        <item>\r\n          <key>skilldisplay</key>\r\n          <value>Skill: !</value>\r\n        </item>\r\n        <item>\r\n          <key>staminadisplay</key>\r\n          <value>Stamina: !</value>\r\n        </item>\r\n        <item>\r\n          <key>luckdisplay</key>\r\n          <value>Luck: !</value>\r\n        </item>\r\n      </statusattributes>\r\n      <provisions type=\"int\">10</provisions>\r\n      <gold type=\"int\">0</gold>\r\n      <jewels type=\"int\">0</jewels>\r\n      <skillcurrent type=\"int\">0</skillcurrent>\r\n      <skillmax type=\"int\">0</skillmax>\r\n      <staminacurrent type=\"int\">0</staminacurrent>\r\n      <staminamax type=\"int\">0</staminamax>\r\n      <luckcurrent type=\"int\">0</luckcurrent>\r\n      <luckmax type=\"int\">0</luckmax>\r\n      <changedstaminacurrent type=\"script\"><![CDATA[\r\n        if (player.staminacurrent > player.staminamax) {\r\n          player.staminacurrent = player.staminamax\r\n        }\r\n        if (player.staminacurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\r\n      ]]></changedstaminacurrent>\r\n      <changedskillcurrent type=\"script\"><![CDATA[\r\n        if (player.skillcurrent > player.skillmax) {\r\n          player.skillcurrent = player.skillmax\r\n        }\r\n        if (player.skillcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\r\n      ]]></changedskillcurrent>\r\n      <changedluckcurrent type=\"script\"><![CDATA[\r\n        if (player.luckcurrent > player.luckmax) {\r\n          player.luckcurrent = player.luckmax\r\n        }\r\n        if (player.luckcurrent < 1 ) {\r\n          MoveObject (game.pov, Game Over)\r\n        }\r\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\r\n      ]]></changedluckcurrent>\r\n      <object name=\"sword\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Sword</alias>\r\n      </object>\r\n      <object name=\"leatherarmor\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Leather Armor</alias>\r\n      </object>\r\n      <object name=\"backpack\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>Backpack</alias>\r\n      </object>\r\n    </object>\r\n    <object name=\"FirstDEATHHAWK\">\r\n      <inherit name=\"editor_object\" />\r\n      <stamina type=\"int\">5</stamina>\r\n      <skill type=\"int\">4</skill>\r\n      <alias>First DEATH HAWK</alias>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <changedstamina type=\"script\">\r\n        // Added by KV for debugging\r\n        Log (\"CHANGEDSTAMINA SCRIPT:   FirstDEATHHAWK.stamina = \"+ ToString(FirstDEATHHAWK.stamina))\r\n      </changedstamina>\r\n    </object>\r\n  </object>\r\n  <object name=\"potionofskill\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Skill</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofstamina\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Stamina</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\r\n      player.staminacurrent = player.staminamax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <object name=\"potionofluck\">\r\n    <inherit name=\"editor_object\" />\r\n    <alias>Potion of Luck</alias>\r\n    <take />\r\n    <feature_usegive />\r\n    <use type=\"script\">\r\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\r\n      player.luckmax = player.luckmax + 1\r\n      player.luckcurrent = player.skillmax\r\n    </use>\r\n    <drink type=\"script\">\r\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\r\n      player.skillcurrent = player.skillmax\r\n    </drink>\r\n  </object>\r\n  <turnscript name=\"fight_until_dead_turnscript\">\r\n    <enabled />\r\n    <script><![CDATA[\r\n      if (HasAttribute(game.pov,\"incombat\")) {\r\n        if (game.pov.incombat) {\r\n          Log (\"incombat\")\r\n          if (HasAttribute(game.pov,\"opponent\")) {\r\n            if (game.pov.parent = game.pov.opponent.parent) {\r\n              if (game.pov.opponent.stamina > 0) {\r\n                combat (game.pov.opponent)\r\n                JS.uiShow (\"#customStatusPane\")\r\n                UpdateMnameStatPane\r\n                // This is just to exit the function without a bunch of else statements.\r\n                return (true)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      JS.uiHide (\"#customStatusPane\")\r\n    ]]></script>\r\n  </turnscript>\r\n  <function name=\"combat\" parameters=\"mname\" type=\"string\"><![CDATA[\r\n    if (mname.stamina>0) {\r\n      game.temp_mname = mname\r\n      JS.uiShow (\"#customStatusPane\")\r\n      UpdateMnameStatPane\r\n      Log (\"Running combat function.\")\r\n      msg (\"<table style=\\\"width: 75%\\\"><tr><th>Combatant</th> <th align=\\\"center\\\">Skill</th> <th align=\\\"center\\\">Stamina</th> <th align=\\\"center\\\">Luck</th></tr> <tr> <td><b><font color=\\\"blue\\\">Player</b></font></td> <td align=\\\"center\\\">{player.skillcurrent}</td> <td align=\\\"center\\\">{player.staminacurrent}</td> <td align=\\\"center\\\">{player.luckcurrent}</td> </tr> <td><b><font color=\\\"red\\\">\" + mname.alias + \"</b></font></td> <td align=\\\"center\\\">\" + mname.skill + \"</td> <td align=\\\"center\\\">\" + mname.stamina + \"</td></tr> </table>\")\r\n      mroll = mname.skill + DiceRoll (\"2d6\")\r\n      proll = player.skillcurrent + DiceRoll (\"2d6\")\r\n      msg (\"<b><font color=\\\"blue\\\">Player Roll: \"+ proll)\r\n      msg (\"<b><font color=\\\"red\\\">\" + mname.alias + \" Roll: \"+ mroll)\r\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n      Log (entry)\r\n      if (proll > mroll) {\r\n        Log (\"proll is greater than mroll\")\r\n        msg (\"You damaged your opponent for 2 Stamina!\")\r\n        UpdateMnameStatPane\r\n        Log (\"You damaged your opponent for 2 Stamina!\")\r\n        game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n        entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n        UpdateMnameStatPane\r\n        Log (entry)\r\n        if (game.temp_mname.stamina>0) {\r\n          Log (\"game.temp_mname.stamina is greater than 0. Running ShowMenu for more damage\")\r\n          entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n          Log (entry)\r\n          if (player.luckcurrent>0) {\r\n            ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\r\n              switch (result) {\r\n                case (\"Yes\") {\r\n                  lroll = DiceRoll (\"2d6\")\r\n                  if (lroll < player.luckcurrent) {\r\n                    Log (\"Dealt 2 more stamina damage\")\r\n                    msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\r\n                    game.temp_mname.stamina = game.temp_mname.stamina - 2\r\n                    UpdateMnameStatPane\r\n                    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n                    Log (entry)\r\n                    player.luckcurrent = player.luckcurrent - 1\r\n                  }\r\n                  else {\r\n                    Log (\"Did not roll successfully.  No addition to stamina damage.\")\r\n                    msg (\"You luck roll was unsuccessful!\")\r\n                    player.luckcurrent = player.luckcurrent - 1\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        Log (\"proll is than than mroll\")\r\n        msg (\"You were damaged for 2 Stamina!\")\r\n        if (player.luckcurrent>0) {\r\n          ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false) {\r\n            if (LCase(result) = \"yes\") {\r\n              msg (\"FIX ME!!!  THIS IS NOT SETUP!  I'm just adding 4 to stamina.\")\r\n            }\r\n            else {\r\n              msg (\"Okay.  Skipping that bit, then!\")\r\n            }\r\n          }\r\n        }\r\n        player.staminacurrent = player.staminacurrent - 2\r\n        entry = \"mname.stamina = \"+mname.stamina\r\n        Log (entry)\r\n        entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n        Log (entry)\r\n        Log (\"mname.stamina is less than 0. AND: Running ShowMenu for reducing player.staminacurrent\")\r\n        entry = \"player.staminacurrent = \"+player.staminacurrent\r\n        Log (entry)\r\n      }\r\n      UpdateMnameStatPane\r\n      stamina = \"mname stamina = \"+ mname.stamina\r\n      Log (stamina)\r\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\r\n      Log (entry)\r\n    }\r\n    else {\r\n      msg (CapFirst(mname.article) + \" is already defeated!\")\r\n    }\r\n    if (mname.stamina<1) {\r\n      msg (CapFirst(GetDisplayName(mname)) + \" has been defeated!\")\r\n      RemoveObject (mname)\r\n      JS.eval (\"setTimeout(function(){uiHide('#customStatusPane');},500);\")\r\n    }\r\n    Log (\"end of combat function\")\r\n  ]]></function>\r\n  <function name=\"FightRounds\" parameters=\"object, rounds\">\r\n    if (not TypeOf(rounds) = \"int\") {\r\n      if (not IsInt(rounds)) {\r\n        error (\"FightRounds:  rounds parameter must be an integer\")\r\n      }\r\n      else {\r\n        rounds = ToInt(rounds)\r\n      }\r\n    }\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    combat (game.pov.opponent)\r\n    SetTurnTimeout (rounds+1) {\r\n      game.pov.opponent = null\r\n      game.pov.incombat = false\r\n    }\r\n  </function>\r\n  <function name=\"FightUntilDead\" parameters=\"object\">\r\n    game.pov.opponent = object\r\n    game.pov.incombat = true\r\n    combat (game.pov.opponent)\r\n  </function>\r\n  <function name=\"UpdateMnameStatPane\"><![CDATA[\r\n    JS.eval (\"$('#customStatusPane').html('### <br/>Stamina: !');$('#customStatusPane').html($('#customStatusPane').html().replace(/###/,'\"+CapFirst(GetDisplayName(game.temp_mname))+\"').replace(/!/,'\"+game.temp_mname.stamina+\"'));\")\r\n  ]]></function>\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>How about this?</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"City of Thieves\"&gt;\n    &lt;gameid&gt;279159d1-909e-4eb4-af6e-c07a43336a6b&lt;/gameid&gt;\n    &lt;version&gt;1.0.1&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;author&gt;Ian Livingstone&lt;/author&gt;\n    &lt;category&gt;Fantasy&lt;/category&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;customstatuspane /&gt;\n    &lt;start type=\"script\"&gt;\n      player.skillmax = 6 + DiceRoll (\"1d6\")\n      player.skillcurrent = player.skillmax\n      player.staminamax = 12 + DiceRoll (\"2d6\")\n      player.staminacurrent = player.staminamax\n      player.luckmax = 6 + DiceRoll (\"1d6\")\n      player.luckcurrent = player.luckmax\n    &lt;/start&gt;\n    &lt;inituserinterface type=\"script\"&gt;&lt;![CDATA[\n      JS.setCustomStatus (\"### &lt;br/&gt;Stamina: !\")\n      JS.uiHide (\"#customStatusPane\")\n    ]]&gt;&lt;/inituserinterface&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;\n      msg (\" \" + FirstDEATHHAWK.skill + \" - \" + FirstDEATHHAWK.stamina)\n      // KV moved FirstDEATHHAWK to this room to make testing easy, and \\\n      // replaced your while script with the next line:\n      // FightRounds (FirstDEATHHAWK, 3)\n      //\n      // You could also put this line:\n      FightUntilDead (FirstDEATHHAWK)\n      //\n      // OR, TO JUST ATTACK ONCE:\n      // combat(FirstDEATHHAWK)\n      //\n      // End of KV's changes\n      msg (\"Enemy Stamine is \" + FirstDEATHHAWK.stamina)\n    &lt;/enter&gt;\n    &lt;beforeenter type=\"script\"&gt;\n    &lt;/beforeenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;statusattributes type=\"stringdictionary\"&gt;\n        &lt;item&gt;\n          &lt;key&gt;skilldisplay&lt;/key&gt;\n          &lt;value&gt;Skill: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;staminadisplay&lt;/key&gt;\n          &lt;value&gt;Stamina: !&lt;/value&gt;\n        &lt;/item&gt;\n        &lt;item&gt;\n          &lt;key&gt;luckdisplay&lt;/key&gt;\n          &lt;value&gt;Luck: !&lt;/value&gt;\n        &lt;/item&gt;\n      &lt;/statusattributes&gt;\n      &lt;provisions type=\"int\"&gt;10&lt;/provisions&gt;\n      &lt;gold type=\"int\"&gt;0&lt;/gold&gt;\n      &lt;jewels type=\"int\"&gt;0&lt;/jewels&gt;\n      &lt;skillcurrent type=\"int\"&gt;0&lt;/skillcurrent&gt;\n      &lt;skillmax type=\"int\"&gt;0&lt;/skillmax&gt;\n      &lt;staminacurrent type=\"int\"&gt;0&lt;/staminacurrent&gt;\n      &lt;staminamax type=\"int\"&gt;0&lt;/staminamax&gt;\n      &lt;luckcurrent type=\"int\"&gt;0&lt;/luckcurrent&gt;\n      &lt;luckmax type=\"int\"&gt;0&lt;/luckmax&gt;\n      &lt;changedstaminacurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.staminacurrent &gt; player.staminamax) {\n          player.staminacurrent = player.staminamax\n        }\n        if (player.staminacurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.staminadisplay = player.staminacurrent + \" / \" + player.staminamax\n      ]]&gt;&lt;/changedstaminacurrent&gt;\n      &lt;changedskillcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.skillcurrent &gt; player.skillmax) {\n          player.skillcurrent = player.skillmax\n        }\n        if (player.skillcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.skilldisplay = player.skillcurrent + \" / \" + player.skillmax\n      ]]&gt;&lt;/changedskillcurrent&gt;\n      &lt;changedluckcurrent type=\"script\"&gt;&lt;![CDATA[\n        if (player.luckcurrent &gt; player.luckmax) {\n          player.luckcurrent = player.luckmax\n        }\n        if (player.luckcurrent &lt; 1 ) {\n          MoveObject (game.pov, Game Over)\n        }\n        player.luckdisplay = player.luckcurrent + \" / \" + player.luckmax\n      ]]&gt;&lt;/changedluckcurrent&gt;\n      &lt;object name=\"sword\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Sword&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"leatherarmor\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Leather Armor&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;object name=\"backpack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;Backpack&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"FirstDEATHHAWK\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;stamina type=\"int\"&gt;5&lt;/stamina&gt;\n      &lt;skill type=\"int\"&gt;4&lt;/skill&gt;\n      &lt;alias&gt;First DEATH HAWK&lt;/alias&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;changedstamina type=\"script\"&gt;\n        // Added by KV for debugging\n        Log (\"CHANGEDSTAMINA SCRIPT:   FirstDEATHHAWK.stamina = \"+ ToString(FirstDEATHHAWK.stamina))\n      &lt;/changedstamina&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofskill\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Skill&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofstamina\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Stamina&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Stamina to it's maximum value.\")\n      player.staminacurrent = player.staminamax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;object name=\"potionofluck\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;alias&gt;Potion of Luck&lt;/alias&gt;\n    &lt;take /&gt;\n    &lt;feature_usegive /&gt;\n    &lt;use type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Luck to it's maximum value and increase it by 1!\")\n      player.luckmax = player.luckmax + 1\n      player.luckcurrent = player.skillmax\n    &lt;/use&gt;\n    &lt;drink type=\"script\"&gt;\n      msg (\"You drink the potion and restore your Skill to it's maximum value.\")\n      player.skillcurrent = player.skillmax\n    &lt;/drink&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=\"fight_until_dead_turnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (HasAttribute(game.pov,\"incombat\")) {\n        if (game.pov.incombat) {\n          Log (\"incombat\")\n          if (HasAttribute(game.pov,\"opponent\")) {\n            if (game.pov.parent = game.pov.opponent.parent) {\n              if (game.pov.opponent.stamina &gt; 0) {\n                combat (game.pov.opponent)\n                JS.uiShow (\"#customStatusPane\")\n                UpdateMnameStatPane\n                // This is just to exit the function without a bunch of else statements.\n                return (true)\n              }\n            }\n          }\n        }\n      }\n      JS.uiHide (\"#customStatusPane\")\n    ]]&gt;&lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;function name=\"combat\" parameters=\"mname\" type=\"string\"&gt;&lt;![CDATA[\n    if (mname.stamina&gt;0) {\n      game.temp_mname = mname\n      JS.uiShow (\"#customStatusPane\")\n      UpdateMnameStatPane\n      Log (\"Running combat function.\")\n      msg (\"&lt;table style=\\\"width: 75%\\\"&gt;&lt;tr&gt;&lt;th&gt;Combatant&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Skill&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Stamina&lt;/th&gt; &lt;th align=\\\"center\\\"&gt;Luck&lt;/th&gt;&lt;/tr&gt; &lt;tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.skillcurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.staminacurrent}&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;{player.luckcurrent}&lt;/td&gt; &lt;/tr&gt; &lt;td&gt;&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \"&lt;/b&gt;&lt;/font&gt;&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.skill + \"&lt;/td&gt; &lt;td align=\\\"center\\\"&gt;\" + mname.stamina + \"&lt;/td&gt;&lt;/tr&gt; &lt;/table&gt;\")\n      mroll = mname.skill + DiceRoll (\"2d6\")\n      proll = player.skillcurrent + DiceRoll (\"2d6\")\n      msg (\"&lt;b&gt;&lt;font color=\\\"blue\\\"&gt;Player Roll: \"+ proll)\n      msg (\"&lt;b&gt;&lt;font color=\\\"red\\\"&gt;\" + mname.alias + \" Roll: \"+ mroll)\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n      Log (entry)\n      if (proll &gt; mroll) {\n        Log (\"proll is greater than mroll\")\n        msg (\"You damaged your opponent for 2 Stamina!\")\n        UpdateMnameStatPane\n        Log (\"You damaged your opponent for 2 Stamina!\")\n        game.temp_mname.stamina = game.temp_mname.stamina - 2\n        entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n        UpdateMnameStatPane\n        Log (entry)\n        if (game.temp_mname.stamina&gt;0) {\n          Log (\"game.temp_mname.stamina is greater than 0. Running ShowMenu for more damage\")\n          entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n          Log (entry)\n          if (player.luckcurrent&gt;0) {\n            ShowMenu (\"Do you want to test your Luck for more damage?\", Split (\"Yes; No\", \";\"), false) {\n              switch (result) {\n                case (\"Yes\") {\n                  lroll = DiceRoll (\"2d6\")\n                  if (lroll &lt; player.luckcurrent) {\n                    Log (\"Dealt 2 more stamina damage\")\n                    msg (\"Your luck roll was successful! You dealt 2 more Stamina damage!\")\n                    game.temp_mname.stamina = game.temp_mname.stamina - 2\n                    UpdateMnameStatPane\n                    entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n                    Log (entry)\n                    player.luckcurrent = player.luckcurrent - 1\n                  }\n                  else {\n                    Log (\"Did not roll successfully.  No addition to stamina damage.\")\n                    msg (\"You luck roll was unsuccessful!\")\n                    player.luckcurrent = player.luckcurrent - 1\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      else {\n        Log (\"proll is than than mroll\")\n        msg (\"You were damaged for 2 Stamina!\")\n        if (player.luckcurrent&gt;0) {\n          ShowMenu (\"Do you want to test your Luck to reduce the damage?\", Split (\"Yes; No\", \";\"), false) {\n            if (LCase(result) = \"yes\") {\n              msg (\"FIX ME!!!  THIS IS NOT SETUP!  I'm just adding 4 to stamina.\")\n            }\n            else {\n              msg (\"Okay.  Skipping that bit, then!\")\n            }\n          }\n        }\n        player.staminacurrent = player.staminacurrent - 2\n        entry = \"mname.stamina = \"+mname.stamina\n        Log (entry)\n        entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n        Log (entry)\n        Log (\"mname.stamina is less than 0. AND: Running ShowMenu for reducing player.staminacurrent\")\n        entry = \"player.staminacurrent = \"+player.staminacurrent\n        Log (entry)\n      }\n      UpdateMnameStatPane\n      stamina = \"mname stamina = \"+ mname.stamina\n      Log (stamina)\n      entry = \"game.temp_mname.stamina = \"+game.temp_mname.stamina\n      Log (entry)\n    }\n    else {\n      msg (CapFirst(mname.article) + \" is already defeated!\")\n    }\n    if (mname.stamina&lt;1) {\n      msg (CapFirst(GetDisplayName(mname)) + \" has been defeated!\")\n      RemoveObject (mname)\n      JS.eval (\"setTimeout(function(){uiHide('#customStatusPane');},500);\")\n    }\n    Log (\"end of combat function\")\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"FightRounds\" parameters=\"object, rounds\"&gt;\n    if (not TypeOf(rounds) = \"int\") {\n      if (not IsInt(rounds)) {\n        error (\"FightRounds:  rounds parameter must be an integer\")\n      }\n      else {\n        rounds = ToInt(rounds)\n      }\n    }\n    game.pov.opponent = object\n    game.pov.incombat = true\n    combat (game.pov.opponent)\n    SetTurnTimeout (rounds+1) {\n      game.pov.opponent = null\n      game.pov.incombat = false\n    }\n  &lt;/function&gt;\n  &lt;function name=\"FightUntilDead\" parameters=\"object\"&gt;\n    game.pov.opponent = object\n    game.pov.incombat = true\n    combat (game.pov.opponent)\n  &lt;/function&gt;\n  &lt;function name=\"UpdateMnameStatPane\"&gt;&lt;![CDATA[\n    JS.eval (\"$('#customStatusPane').html('### &lt;br/&gt;Stamina: !');$('#customStatusPane').html($('#customStatusPane').html().replace(/###/,'\"+CapFirst(GetDisplayName(game.temp_mname))+\"').replace(/!/,'\"+game.temp_mname.stamina+\"'));\")\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-01-31T07:36:21.5259295Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
