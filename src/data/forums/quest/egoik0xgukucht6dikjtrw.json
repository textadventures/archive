{
  "Topic": {
    "TopicId": "egoik0xgukucht6dikjtrw",
    "ForumId": "10",
    "Title": "Make  NPC companion carry objects?",
    "LastUpdated": "2018-02-10T14:30:02.5588577Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "624ce4f6-16f9-45f8-8f0c-4defbf797a14",
      "UserId": 263865,
      "Username": "NecroDeath",
      "AvatarUrl": "http://i.imgur.com/1w7HHAhb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Is it possible to make a companion NPC carry an object, and in room description make it say, \"Fred (carrying x).\r\n\r\nThanks!",
      "EditableFormat": "markdown",
      "HTML": "<p>Is it possible to make a companion NPC carry an object, and in room description make it say, \"Fred (carrying x).</p>\n<p>Thanks!</p>\n\n",
      "PostDate": "2018-02-10T14:30:02.5588577Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0a0d1443-a40f-45c4-a5a9-b2af0951534e",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "1\\. Set it up so you can GIVE something TO Fred.\r\n\r\n2\\. In the GIVE this TO something script on the **x** object, put this under Fred's script:\r\n\r\n<details>\r\n\r\n```\r\nmsg (\"You give x to Fred.\")\r\nMoveObject (this, Fred)\r\nFred.alias = GetDisplayAlias(Fred) + \" (carrying x)\"\r\n```\r\n<img width='100%' src='https://user-images.githubusercontent.com/30656341/36063075-e09c6344-0e3d-11e8-99bc-d0e0ff0cb8f8.png'/>\r\n\r\n<img width='100%' src='https://user-images.githubusercontent.com/30656341/36063087-103ce4d4-0e3e-11e8-9660-e1a3f452291a.png'/>\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/36063104-2d839fec-0e3e-11e8-88bd-757e54b9fad3.png)\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/36063161-d0ddef12-0e3e-11e8-9986-31790f1de3e4.png)\r\n\r\n<img width='100%' src='https://user-images.githubusercontent.com/30656341/36063133-69968c38-0e3e-11e8-95d6-2939a131b986.png'/>\r\n\r\n<img width='100%' src='https://user-images.githubusercontent.com/30656341/36063170-f27c4e02-0e3e-11e8-8aa8-6247c6486047.png'/>\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>1. Set it up so you can GIVE something TO Fred.</p>\n<p>2. In the GIVE this TO something script on the <strong>x</strong> object, put this under Fred's script:</p>\n<details>\n<pre><code>msg (\"You give x to Fred.\")\nMoveObject (this, Fred)\nFred.alias = GetDisplayAlias(Fred) + \" (carrying x)\"\n</code></pre>\n<img width=\"100%\" src=\"https://user-images.githubusercontent.com/30656341/36063075-e09c6344-0e3d-11e8-99bc-d0e0ff0cb8f8.png\">\n<img width=\"100%\" src=\"https://user-images.githubusercontent.com/30656341/36063087-103ce4d4-0e3e-11e8-9660-e1a3f452291a.png\">\n<p><img src=\"https://user-images.githubusercontent.com/30656341/36063104-2d839fec-0e3e-11e8-88bd-757e54b9fad3.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/36063161-d0ddef12-0e3e-11e8-9986-31790f1de3e4.png\" alt=\"image\"></p>\n<img width=\"100%\" src=\"https://user-images.githubusercontent.com/30656341/36063133-69968c38-0e3e-11e8-95d6-2939a131b986.png\">\n<img width=\"100%\" src=\"https://user-images.githubusercontent.com/30656341/36063170-f27c4e02-0e3e-11e8-8aa8-6247c6486047.png\">\n</details>\n\n",
      "PostDate": "2018-02-10T14:48:05.3266768Z",
      "LastEditDate": "2018-02-11T00:07:07.3444249Z",
      "link": null
    },
    {
      "PostId": "8e7ba1b2-c9fb-42c3-83a2-d6849f6293e0",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "### OR...\r\n\r\nYou can make Fred a surface type of container, changing the Contents prefix and adding a List prefix and message to print when trying to put something on him.\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/36063208-643ed8ac-0e3f-11e8-90ec-f6d7d0fbcc17.png)\r\n\r\n**EDITED**\r\nIn this case, the GIVE this TO OTHER OBJECT  script targeting Fred should be:\r\n```\r\nmsg (\"You give x to Fred.\")\r\nMoveObject (this, Fred)\r\n```\r\n\r\n---\r\nIf Fred is the only NPC who might have this, and you want the player to be able to just take it, you can make the object's take script this:\r\n\r\n\r\n```\r\nif (this.parent=Fred) {\r\n  msg (\"Fred hands it over.\")\r\n}\r\nelse {\r\n  msg (\"You pick it up.\")\r\n}\r\nAddToInventory (this)\r\n```\r\n\r\n---\r\nTo go an extra step (in either example), add the **x** object to Fred's ASK script, so he can tell you about it, hand it over, or tell you what needs to be done to acquire it.\r\n\r\n(I know you know this part, but someone else may be working from this post one day.)\r\n\r\n---\r\nCheers!",
      "EditableFormat": "markdown",
      "HTML": "<h3>OR...</h3>\n<p>You can make Fred a surface type of container, changing the Contents prefix and adding a List prefix and message to print when trying to put something on him.</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/36063208-643ed8ac-0e3f-11e8-90ec-f6d7d0fbcc17.png\" alt=\"image\"></p>\n<p><strong>EDITED</strong><br>\nIn this case, the GIVE this TO OTHER OBJECT  script targeting Fred should be:</p>\n<pre><code>msg (\"You give x to Fred.\")\nMoveObject (this, Fred)\n</code></pre>\n<hr>\n<p>If Fred is the only NPC who might have this, and you want the player to be able to just take it, you can make the object's take script this:</p>\n<pre><code>if (this.parent=Fred) {\n  msg (\"Fred hands it over.\")\n}\nelse {\n  msg (\"You pick it up.\")\n}\nAddToInventory (this)\n</code></pre>\n<hr>\n<p>To go an extra step (in either example), add the <strong>x</strong> object to Fred's ASK script, so he can tell you about it, hand it over, or tell you what needs to be done to acquire it.</p>\n<p>(I know you know this part, but someone else may be working from this post one day.)</p>\n<hr>\n<p>Cheers!</p>\n\n",
      "PostDate": "2018-02-10T15:04:45.3365668Z",
      "LastEditDate": "2018-02-10T18:32:04.4271774Z",
      "link": null
    },
    {
      "PostId": "bd3fbc6a-d4da-46d2-ba5f-28858c6352aa",
      "UserId": 263865,
      "Username": "NecroDeath",
      "AvatarUrl": "http://i.imgur.com/1w7HHAhb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks K.V. !",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks K.V. !</p>\n\n",
      "PostDate": "2018-02-10T16:29:19.8556117Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "abdb7175-ccbd-4c65-a7e3-cbf024009e29",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Argh!\r\n\r\nI missed a spot!\r\n\r\nI edited the first script.",
      "EditableFormat": "markdown",
      "HTML": "<p>Argh!</p>\n<p>I missed a spot!</p>\n<p>I edited the first script.</p>\n\n",
      "PostDate": "2018-02-10T16:36:39.3674344Z",
      "LastEditDate": "2018-02-11T00:08:10.084495Z",
      "link": null
    },
    {
      "PostId": "d10d0c43-61ee-4932-8a29-4643e2113a72",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi, apologies for hijacking thread.\r\nIf 'Fred' is carrying more objects, lets say 'y' and 'z', it seems a lot to do adding similar scripts for each object Fred is carrying.\r\nCould you use a 'Scope' function.\r\n> Look at Fred\r\nFred is a tall, blond man. Fred is carrying x,y,z.\r\n\r\nCould you use a script: GetDirectChildren(fred)?\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi, apologies for hijacking thread.<br>\nIf 'Fred' is carrying more objects, lets say 'y' and 'z', it seems a lot to do adding similar scripts for each object Fred is carrying.<br>\nCould you use a 'Scope' function.</p>\n<blockquote>\n<p>Look at Fred<br>\nFred is a tall, blond man. Fred is carrying x,y,z.</p>\n</blockquote>\n<p>Could you use a script: GetDirectChildren(fred)?</p>\n\n",
      "PostDate": "2018-02-10T18:05:08.9651095Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e860ae82-1184-4ca6-8973-7b1ee0297acc",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you go the second route, making Fred a surface, it will list what he's carrying when you look at him.\r\n\r\nOtherwise, if you don't make Fred a surface, Doctor Agon is on top of it:\r\n\r\n**Fred.look**\r\n```\r\nif (not ListCount(GetDirectChildren(Fred)) = 0){\r\n  Fred.alias = \"Fred (carrying: \" + GetDirectChildren(Fred) + \")\"\r\n}\r\nelse {\r\n  Fred.alias = \"Fred\"\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>If you go the second route, making Fred a surface, it will list what he's carrying when you look at him.</p>\n<p>Otherwise, if you don't make Fred a surface, Doctor Agon is on top of it:</p>\n<p><strong>Fred.look</strong></p>\n<pre><code>if (not ListCount(GetDirectChildren(Fred)) = 0){\n  Fred.alias = \"Fred (carrying: \" + GetDirectChildren(Fred) + \")\"\n}\nelse {\n  Fred.alias = \"Fred\"\n}\n</code></pre>\n\n",
      "PostDate": "2018-02-10T18:38:20.6104556Z",
      "LastEditDate": "2018-02-10T18:38:48.8666658Z",
      "link": null
    },
    {
      "PostId": "a081244e-8a22-4b03-9eca-cf18267ee4dc",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I was thinking more on the lines of the players 'Inventory' command.\r\nSetting up a function ```'GetNpcInv'``` with a parameter 'object'\r\nand the following script:\r\n```\r\nlist = FormatObjectList(object.alias + \" is carrying \", object, Template(\"And\"), \".\")\r\nif (list = \"\") {\r\n  msg (Template(\"NotCarryingAnything\"))\r\n}\r\nelse {\r\n  msg (list)\r\n}\r\n```\r\nThen in Fred's look at description, having it call the function, with the parameter 'Fred'.\r\nI probably like making more work for myself than is necessary.",
      "EditableFormat": "markdown",
      "HTML": "<p>I was thinking more on the lines of the players 'Inventory' command.<br>\nSetting up a function <code>'GetNpcInv'</code> with a parameter 'object'<br>\nand the following script:</p>\n<pre><code>list = FormatObjectList(object.alias + \" is carrying \", object, Template(\"And\"), \".\")\nif (list = \"\") {\n  msg (Template(\"NotCarryingAnything\"))\n}\nelse {\n  msg (list)\n}\n</code></pre>\n<p>Then in Fred's look at description, having it call the function, with the parameter 'Fred'.<br>\nI probably like making more work for myself than is necessary.</p>\n\n",
      "PostDate": "2018-02-10T19:35:28.2237405Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e4afbdbc-9d05-46a0-a4c2-e7689f789493",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh, that is better!\r\n\r\n...and my script *would* print a list rather than a formatted list!\r\n\r\n---\r\nHow about this?\r\n\r\n---\r\n\r\nRevised\r\n```\r\n  <function name=\"NpcInventory\" parameters=\"npc\" type=\"string\"><![CDATA[\r\n    if (ListCount(GetDirectChildren(npc))<1) {\r\n      return (CapFirst(npc.gender) + \" is not carrying anything.\")\r\n    }\r\n    pre = CapFirst(npc.gender) + \" is carrying \"\r\n    return (FormatObjectList(pre, npc, \"and\", \".\"))\r\n  ]]></function>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh, that is better!</p>\n<p>...and my script <em>would</em> print a list rather than a formatted list!</p>\n<hr>\n<p>How about this?</p>\n<hr>\n<p>Revised</p>\n<pre><code>  &lt;function name=\"NpcInventory\" parameters=\"npc\" type=\"string\"&gt;&lt;![CDATA[\n    if (ListCount(GetDirectChildren(npc))&lt;1) {\n      return (CapFirst(npc.gender) + \" is not carrying anything.\")\n    }\n    pre = CapFirst(npc.gender) + \" is carrying \"\n    return (FormatObjectList(pre, npc, \"and\", \".\"))\n  ]]&gt;&lt;/function&gt;\n</code></pre>\n\n",
      "PostDate": "2018-02-10T19:48:19.4936543Z",
      "LastEditDate": "2018-02-10T19:52:34.6045528Z",
      "link": null
    },
    {
      "PostId": "0fee7cdf-48ec-4fb4-924c-7c7191223725",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I never thought of using ```.gender```, I did make a revision of my own to my scripting:\r\n```\r\nlist = FormatObjectList(CapFirst(GetDisplayAlias(object)) + \" is carrying \", object, Template(\"And\"), \".\")\r\nif (list = \"\") {\r\n  msg (CapFirst(GetDisplayAlias(object)) + \" is not carrying anything.\")\r\n}\r\nelse {\r\n  msg (list)\r\n}\r\n```\r\nJust in case the objects alias had not been set. \r\nAlso didn't realise I hadn't altered the 'not carrying anything' section.",
      "EditableFormat": "markdown",
      "HTML": "<p>I never thought of using <code>.gender</code>, I did make a revision of my own to my scripting:</p>\n<pre><code>list = FormatObjectList(CapFirst(GetDisplayAlias(object)) + \" is carrying \", object, Template(\"And\"), \".\")\nif (list = \"\") {\n  msg (CapFirst(GetDisplayAlias(object)) + \" is not carrying anything.\")\n}\nelse {\n  msg (list)\n}\n</code></pre>\n<p>Just in case the objects alias had not been set.<br>\nAlso didn't realise I hadn't altered the 'not carrying anything' section.</p>\n\n",
      "PostDate": "2018-02-10T22:07:43.1744092Z",
      "LastEditDate": "2018-02-10T23:59:22.0194319Z",
      "link": null
    },
    {
      "PostId": "2e779219-511e-4c79-9183-f90d2943dddd",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Edit: No, I'm wrong\r\nI thought FormatObjectList had an optional final parameter like FormatList",
      "EditableFormat": "markdown",
      "HTML": "<p>Edit: No, I'm wrong<br>\nI thought FormatObjectList had an optional final parameter like FormatList</p>\n\n",
      "PostDate": "2018-02-10T22:12:11.0150401Z",
      "LastEditDate": "2018-02-10T22:14:01.9946142Z",
      "link": null
    },
    {
      "PostId": "f5f95d96-efd7-47f5-9ba0-7d3c297a710a",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@KV, Is there something missing from your script?\r\nDoes it need to print a message?\r\n**Update:** Printing a message, instead of returning a value\r\n```\r\n<function name=\"NpcInventory\" parameters=\"npc\"><![CDATA[\r\n    if (ListCount(GetDirectChildren(npc))<1) {\r\n      msg (CapFirst(npc.gender) + \" is not carrying anything.\")\r\n    }\r\n    else {\r\n      pre = CapFirst(npc.gender) + \" is carrying \"\r\n      msg (FormatObjectList(pre, npc, \"and\", \".\"))\r\n    }\r\n  ]]></function>\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>@KV, Is there something missing from your script?<br>\nDoes it need to print a message?<br>\n<strong>Update:</strong> Printing a message, instead of returning a value</p>\n<pre><code>&lt;function name=\"NpcInventory\" parameters=\"npc\"&gt;&lt;![CDATA[\n    if (ListCount(GetDirectChildren(npc))&lt;1) {\n      msg (CapFirst(npc.gender) + \" is not carrying anything.\")\n    }\n    else {\n      pre = CapFirst(npc.gender) + \" is carrying \"\n      msg (FormatObjectList(pre, npc, \"and\", \".\"))\n    }\n  ]]&gt;&lt;/function&gt;\n</code></pre>\n\n",
      "PostDate": "2018-02-10T23:15:54.5211275Z",
      "LastEditDate": "2018-02-10T23:24:19.3533553Z",
      "link": null
    },
    {
      "PostId": "397fb838-c832-4980-88a5-c4ede7e9b4ac",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@mrangel\r\n\r\nI had the boolean at the end at first, and it kept throwing errors.\r\n\r\nThe docs show that last parameter, too:\r\n```\r\nFormatObjectList (string pre-list, object parent, string pre-final, string post-list, boolean use inventory verbs)\r\n```\r\n\r\n...then, I just added all the elements to the game so I could look at the function, and I found that parameter no longer exists.",
      "EditableFormat": "markdown",
      "HTML": "<p>@mrangel</p>\n<p>I had the boolean at the end at first, and it kept throwing errors.</p>\n<p>The docs show that last parameter, too:</p>\n<pre><code>FormatObjectList (string pre-list, object parent, string pre-final, string post-list, boolean use inventory verbs)\n</code></pre>\n<p>...then, I just added all the elements to the game so I could look at the function, and I found that parameter no longer exists.</p>\n\n",
      "PostDate": "2018-02-10T23:26:36.8062586Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "87754e7a-5149-4048-af05-46b15a526cfb",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@Doctor Agon\r\n\r\nNo, sir.  I have a command which prints the returned string.\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Fred Carries Things\">\r\n    <gameid>803a9ebb-d611-4253-b116-698982bba250</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <isroom />\r\n    <enter type=\"script\">\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"Fred\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"namedmale\" />\r\n      <object name=\"widget\">\r\n        <inherit name=\"editor_object\" />\r\n      </object>\r\n      <object name=\"thingy\">\r\n        <inherit name=\"editor_object\" />\r\n      </object>\r\n    </object>\r\n  </object>\r\n  <command name=\"npc_inventory_cmd\">\r\n    <pattern>#object#, inventory;#object#, i;#object# inventory;#object# i</pattern>\r\n    <script>\r\n      msg (ScopeNpcInventory (object))\r\n    </script>\r\n  </command>\r\n  <function name=\"ScopeNpcInventory\" parameters=\"npc\" type=\"string\"><![CDATA[\r\n    if (ListCount(GetDirectChildren(npc))<1) {\r\n      return (CapFirst(npc.gender) + \" is not carrying anything.\")\r\n    }\r\n    pre = CapFirst(npc.gender) + \" is carrying \"\r\n    return (FormatObjectList(pre, npc, \"and\", \".\"))\r\n  ]]></function>\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>@Doctor Agon</p>\n<p>No, sir.  I have a command which prints the returned string.</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Fred Carries Things\"&gt;\n    &lt;gameid&gt;803a9ebb-d611-4253-b116-698982bba250&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;isroom /&gt;\n    &lt;enter type=\"script\"&gt;\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"Fred\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"namedmale\" /&gt;\n      &lt;object name=\"widget\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n      &lt;/object&gt;\n      &lt;object name=\"thingy\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command name=\"npc_inventory_cmd\"&gt;\n    &lt;pattern&gt;#object#, inventory;#object#, i;#object# inventory;#object# i&lt;/pattern&gt;\n    &lt;script&gt;\n      msg (ScopeNpcInventory (object))\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=\"ScopeNpcInventory\" parameters=\"npc\" type=\"string\"&gt;&lt;![CDATA[\n    if (ListCount(GetDirectChildren(npc))&lt;1) {\n      return (CapFirst(npc.gender) + \" is not carrying anything.\")\n    }\n    pre = CapFirst(npc.gender) + \" is carrying \"\n    return (FormatObjectList(pre, npc, \"and\", \".\"))\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-02-10T23:32:27.9365417Z",
      "LastEditDate": "2018-02-10T23:34:31.6432066Z",
      "link": null
    },
    {
      "PostId": "946530db-9549-4beb-ac08-0309040a9624",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, ok. Didn't realise that. My bad.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, ok. Didn't realise that. My bad.</p>\n\n",
      "PostDate": "2018-02-10T23:35:24.0988774Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2645b3cc-0997-44fc-a676-d9e0093bc563",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well... Actually, I neglected to mention that part...  So, you're good.  (Or \"your good\", rather.  Ha-ha!)",
      "EditableFormat": "markdown",
      "HTML": "<p>Well... Actually, I neglected to mention that part...  So, you're good.  (Or \"your good\", rather.  Ha-ha!)</p>\n\n",
      "PostDate": "2018-02-10T23:39:53.1331116Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e1342ce0-4a69-439d-a860-b61f2959fc10",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Revised, rebooted, and reduxed (with a little bit of code from everyone):\r\n\r\n```\r\n  <command name=\"npc_inventory_cmd\">\r\n    <pattern>#object#, inventory;#object#, i;#object# inventory;#object# i</pattern>\r\n    <script>\r\n      PrintNpcInventory (object)\r\n    </script>\r\n  </command>\r\n```\r\n```\r\n  <function name=\"FormatNpcInventory\" parameters=\"npc\" type=\"string\"><![CDATA[\r\n    if (ListCount(GetDirectChildren(npc))<1) {\r\n      return (\"nothing\")\r\n    }\r\n    return (FormatObjectList(\"\", npc, \"and\", \"\"))\r\n  ]]></function>\r\n```\r\n```\r\n  <function name=\"PrintNpcInventory\" parameters=\"npc\">\r\n    msg (CapFirst(GetDisplayName(npc)) + \" is carrying \" + FormatNpcInventory(npc) + \".\")\r\n  </function>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Revised, rebooted, and reduxed (with a little bit of code from everyone):</p>\n<pre><code>  &lt;command name=\"npc_inventory_cmd\"&gt;\n    &lt;pattern&gt;#object#, inventory;#object#, i;#object# inventory;#object# i&lt;/pattern&gt;\n    &lt;script&gt;\n      PrintNpcInventory (object)\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n<pre><code>  &lt;function name=\"FormatNpcInventory\" parameters=\"npc\" type=\"string\"&gt;&lt;![CDATA[\n    if (ListCount(GetDirectChildren(npc))&lt;1) {\n      return (\"nothing\")\n    }\n    return (FormatObjectList(\"\", npc, \"and\", \"\"))\n  ]]&gt;&lt;/function&gt;\n</code></pre>\n<pre><code>  &lt;function name=\"PrintNpcInventory\" parameters=\"npc\"&gt;\n    msg (CapFirst(GetDisplayName(npc)) + \" is carrying \" + FormatNpcInventory(npc) + \".\")\n  &lt;/function&gt;\n</code></pre>\n\n",
      "PostDate": "2018-02-10T23:54:17.127808Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8f314ea7-fe07-4933-a11c-d744d42b6ec0",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Weren't there some fancy scoping features which were added in the latest release?\r\n\r\nIs there a way to put ```object1``` in scope  instead of \"Fred\", to cover all objects?\r\n\r\n```\r\n  <command name=\"ask_npc_for_object_cmd\">\r\n    <pattern>ask #object1# for #object2#;#object1#, give me #object2#</pattern>\r\n    <scope>Fred</scope>\r\n    <script>\r\n      if (not HasAttribute(object1,\"giver\")) {\r\n        msg (CapFirst(object1.gender) + \" can't do that.\")\r\n      }\r\n      else {\r\n        if (DictionaryContains(object1.givedict,object2.name)) {\r\n          invoke (ScriptDictionaryItem(object1.givedict, object2.name))\r\n        }\r\n        else {\r\n          msg (CapFirst(GetDisplayName(object1)) + \" shakes \" + object1.possessive + \" head.\")\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Weren't there some fancy scoping features which were added in the latest release?</p>\n<p>Is there a way to put <code>object1</code> in scope  instead of \"Fred\", to cover all objects?</p>\n<pre><code>  &lt;command name=\"ask_npc_for_object_cmd\"&gt;\n    &lt;pattern&gt;ask #object1# for #object2#;#object1#, give me #object2#&lt;/pattern&gt;\n    &lt;scope&gt;Fred&lt;/scope&gt;\n    &lt;script&gt;\n      if (not HasAttribute(object1,\"giver\")) {\n        msg (CapFirst(object1.gender) + \" can't do that.\")\n      }\n      else {\n        if (DictionaryContains(object1.givedict,object2.name)) {\n          invoke (ScriptDictionaryItem(object1.givedict, object2.name))\n        }\n        else {\n          msg (CapFirst(GetDisplayName(object1)) + \" shakes \" + object1.possessive + \" head.\")\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2018-02-11T00:39:35.4644913Z",
      "LastEditDate": "2018-02-11T01:36:18.5385528Z",
      "link": null
    },
    {
      "PostId": "881090f2-ad95-4139-958a-5050fde36a8d",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Weren't there some fancy scoping features which were added in the latest release?\r\n>\r\n> Is there a way to put object1 in scope instead of \"Fred\", to cover all objects?\r\n\r\nCan't remember the names of all the options now; but off the top of my head (and it's nearly 3am, so sorry if I messed up the XML)…\r\n\r\n```\r\n  <command name=\"ask_npc_for_object_cmd\">\r\n    <pattern>ask #object1# for #object2#;#object1#, give me #object2#</pattern>\r\n    <scope>object1=room|object2=none</scope>\r\n    <changecommandscope type=\"script\">\r\n      if (variable = \"object1\") {\r\n        // for 'object1', remove all non-giver items from scope\r\n        // I'm assuming \"giver\" is a boolean attribute?\r\n        foreach (to_remove, FilterByNotAttribute (items, \"giver\", true)) {\r\n          list remove (items, to_remove)\r\n        }\r\n      }\r\n      else if (variable = \"object2\") {\r\n        giver = DictionaryItem(matched, \"object1\")\r\n        // get the first matched object (giver), and add its children to scope\r\n        foreach (o, GetDirectChildren(giver)) {\r\n          list add (items, o)\r\n        }\r\n      }\r\n    </changecommandscope>\r\n    <script>\r\n      if (not HasAttribute(object1,\"giver\")) {\r\n        msg (CapFirst(object1.gender) + \" can't do that.\")\r\n      }\r\n      else {\r\n        if (DictionaryContains(object1.givedict,object2.name)) {\r\n          invoke (ScriptDictionaryItem(object1.givedict, object2.name))\r\n        }\r\n        else {\r\n          msg (CapFirst(GetDisplayName(object1)) + \" shakes \" + object1.possessive + \" head.\")\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Weren't there some fancy scoping features which were added in the latest release?</p>\n<p>Is there a way to put object1 in scope instead of \"Fred\", to cover all objects?</p>\n</blockquote>\n<p>Can't remember the names of all the options now; but off the top of my head (and it's nearly 3am, so sorry if I messed up the XML)…</p>\n<pre><code>  &lt;command name=\"ask_npc_for_object_cmd\"&gt;\n    &lt;pattern&gt;ask #object1# for #object2#;#object1#, give me #object2#&lt;/pattern&gt;\n    &lt;scope&gt;object1=room|object2=none&lt;/scope&gt;\n    &lt;changecommandscope type=\"script\"&gt;\n      if (variable = \"object1\") {\n        // for 'object1', remove all non-giver items from scope\n        // I'm assuming \"giver\" is a boolean attribute?\n        foreach (to_remove, FilterByNotAttribute (items, \"giver\", true)) {\n          list remove (items, to_remove)\n        }\n      }\n      else if (variable = \"object2\") {\n        giver = DictionaryItem(matched, \"object1\")\n        // get the first matched object (giver), and add its children to scope\n        foreach (o, GetDirectChildren(giver)) {\n          list add (items, o)\n        }\n      }\n    &lt;/changecommandscope&gt;\n    &lt;script&gt;\n      if (not HasAttribute(object1,\"giver\")) {\n        msg (CapFirst(object1.gender) + \" can't do that.\")\n      }\n      else {\n        if (DictionaryContains(object1.givedict,object2.name)) {\n          invoke (ScriptDictionaryItem(object1.givedict, object2.name))\n        }\n        else {\n          msg (CapFirst(GetDisplayName(object1)) + \" shakes \" + object1.possessive + \" head.\")\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2018-02-11T02:46:51.2011536Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "33e67c61-00dd-46c4-a8db-eddfc8a9a262",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How do you ```ask fred for x```.\r\nobject x is inside 'fred' as it were.\r\nI've tried various coding, but I keep getting the same response ```I can't see that (x).```\r\nAny help or guidance is appreciated.",
      "EditableFormat": "markdown",
      "HTML": "<p>How do you <code>ask fred for x</code>.<br>\nobject x is inside 'fred' as it were.<br>\nI've tried various coding, but I keep getting the same response <code>I can't see that (x).</code><br>\nAny help or guidance is appreciated.</p>\n\n",
      "PostDate": "2018-02-12T09:06:43.1343799Z",
      "LastEditDate": "2018-02-12T09:08:45.1416222Z",
      "link": null
    },
    {
      "PostId": "b9a778b7-9daa-4bbb-96e0-a6b7a13cb387",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Put Fred in scope. (Or make him a surface.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Put Fred in scope. (Or make him a surface.)</p>\n\n",
      "PostDate": "2018-02-12T13:35:17.5358529Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "78e4134f-22f9-4df6-99ac-a26e34c29c37",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think I still might need more help. \r\nDidn't really want to make 'Fred' a surface.",
      "EditableFormat": "markdown",
      "HTML": "<p>I think I still might need more help.<br>\nDidn't really want to make 'Fred' a surface.</p>\n\n",
      "PostDate": "2018-02-12T20:40:51.5028124Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b8ea98d0-c69e-4463-a3b2-7717b1ebc683",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I put Fred (who is not a surface in this example) in scope in the command in this script:\r\n\r\nhttp://textadventures.co.uk/forum/quest/topic/egoik0xgukucht6dikjtrw/make-npc-companion-carry-objects#8f314ea7-fe07-4933-a11c-d744d42b6ec0\r\n\r\nHere's the entire game, to see everything working together:\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Fred Carries Things\">\r\n    <gameid>803a9ebb-d611-4253-b116-698982bba250</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <isroom />\r\n    <enter type=\"script\">\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"Fred\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"namedmale\" />\r\n      <givedict type=\"scriptdictionary\">\r\n        <item key=\"thingy\"><![CDATA[\r\n          msg (\"\\\"It's my favorite thingy,\\\" says Fred.  \\\"Take good care of it.\\\"<br/><br/>He hands it over.\")\r\n          AddToInventory (thingy)\r\n        ]]></item>\r\n        <item key=\"widget\"><![CDATA[\r\n          firsttime {\r\n            msg (\"\\\"This widget is mine,\\\" says Fred.  \\\"Go find your own.\\\"<br/>\")\r\n          }\r\n          otherwise {\r\n            msg (\"\\\"I've already told you,\\\" says Fred.  \\\"You can't have it.\\\"<br/>\")\r\n          }\r\n        ]]></item>\r\n      </givedict>\r\n      <giver />\r\n      <object name=\"widget\">\r\n        <inherit name=\"editor_object\" />\r\n      </object>\r\n      <object name=\"thingy\">\r\n        <inherit name=\"editor_object\" />\r\n      </object>\r\n      <object name=\"cane\">\r\n        <inherit name=\"editor_object\" />\r\n      </object>\r\n    </object>\r\n  </object>\r\n  <command name=\"npc_inventory_cmd\">\r\n    <pattern>#object#, inventory;#object#, i;#object# inventory;#object# i</pattern>\r\n    <script>\r\n      PrintNpcInventory (object)\r\n    </script>\r\n  </command>\r\n  <command name=\"ask_npc_for_object_cmd\">\r\n    <pattern>ask #object1# for #object2#;#object1#, give me #object2#;get #object2# from #object1#;take #object2# from #object1#</pattern>\r\n    <scope>Fred</scope>\r\n    <script>\r\n      if (not HasAttribute(object1,\"giver\")) {\r\n        msg (CapFirst(object1.gender) + \" can't do that.\")\r\n      }\r\n      else {\r\n        if (DictionaryContains(object1.givedict,object2.name)) {\r\n          invoke (ScriptDictionaryItem(object1.givedict, object2.name))\r\n        }\r\n        else {\r\n          msg (CapFirst(GetDisplayName(object1)) + \" shakes \" + object1.possessive + \" head.\")\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n  <function name=\"FormatNpcInventory\" parameters=\"npc\" type=\"string\"><![CDATA[\r\n    if (ListCount(GetDirectChildren(npc))<1) {\r\n      return (\"nothing\")\r\n    }\r\n    return (FormatObjectList(\"\", npc, \"and\", \"\"))\r\n  ]]></function>\r\n  <function name=\"PrintNpcInventory\" parameters=\"npc\">\r\n    msg (CapFirst(GetDisplayName(npc)) + \" is carrying \" + FormatNpcInventory(npc) + \".\")\r\n  </function>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n---\r\n\r\n...and mrangel shows a way to put anything in the room in scope in the post just after it.",
      "EditableFormat": "markdown",
      "HTML": "<p>I put Fred (who is not a surface in this example) in scope in the command in this script:</p>\n<p>http://textadventures.co.uk/forum/quest/topic/egoik0xgukucht6dikjtrw/make-npc-companion-carry-objects#8f314ea7-fe07-4933-a11c-d744d42b6ec0</p>\n<p>Here's the entire game, to see everything working together:</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Fred Carries Things\"&gt;\n    &lt;gameid&gt;803a9ebb-d611-4253-b116-698982bba250&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;isroom /&gt;\n    &lt;enter type=\"script\"&gt;\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"Fred\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"namedmale\" /&gt;\n      &lt;givedict type=\"scriptdictionary\"&gt;\n        &lt;item key=\"thingy\"&gt;&lt;![CDATA[\n          msg (\"\\\"It's my favorite thingy,\\\" says Fred.  \\\"Take good care of it.\\\"&lt;br/&gt;&lt;br/&gt;He hands it over.\")\n          AddToInventory (thingy)\n        ]]&gt;&lt;/item&gt;\n        &lt;item key=\"widget\"&gt;&lt;![CDATA[\n          firsttime {\n            msg (\"\\\"This widget is mine,\\\" says Fred.  \\\"Go find your own.\\\"&lt;br/&gt;\")\n          }\n          otherwise {\n            msg (\"\\\"I've already told you,\\\" says Fred.  \\\"You can't have it.\\\"&lt;br/&gt;\")\n          }\n        ]]&gt;&lt;/item&gt;\n      &lt;/givedict&gt;\n      &lt;giver /&gt;\n      &lt;object name=\"widget\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n      &lt;/object&gt;\n      &lt;object name=\"thingy\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n      &lt;/object&gt;\n      &lt;object name=\"cane\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command name=\"npc_inventory_cmd\"&gt;\n    &lt;pattern&gt;#object#, inventory;#object#, i;#object# inventory;#object# i&lt;/pattern&gt;\n    &lt;script&gt;\n      PrintNpcInventory (object)\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"ask_npc_for_object_cmd\"&gt;\n    &lt;pattern&gt;ask #object1# for #object2#;#object1#, give me #object2#;get #object2# from #object1#;take #object2# from #object1#&lt;/pattern&gt;\n    &lt;scope&gt;Fred&lt;/scope&gt;\n    &lt;script&gt;\n      if (not HasAttribute(object1,\"giver\")) {\n        msg (CapFirst(object1.gender) + \" can't do that.\")\n      }\n      else {\n        if (DictionaryContains(object1.givedict,object2.name)) {\n          invoke (ScriptDictionaryItem(object1.givedict, object2.name))\n        }\n        else {\n          msg (CapFirst(GetDisplayName(object1)) + \" shakes \" + object1.possessive + \" head.\")\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=\"FormatNpcInventory\" parameters=\"npc\" type=\"string\"&gt;&lt;![CDATA[\n    if (ListCount(GetDirectChildren(npc))&lt;1) {\n      return (\"nothing\")\n    }\n    return (FormatObjectList(\"\", npc, \"and\", \"\"))\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"PrintNpcInventory\" parameters=\"npc\"&gt;\n    msg (CapFirst(GetDisplayName(npc)) + \" is carrying \" + FormatNpcInventory(npc) + \".\")\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n<hr>\n<p>...and mrangel shows a way to put anything in the room in scope in the post just after it.</p>\n\n",
      "PostDate": "2018-02-12T20:59:50.1375146Z",
      "LastEditDate": "2018-02-12T21:02:30.0795574Z",
      "link": null
    },
    {
      "PostId": "4c6463bc-fe39-4825-9d44-8d3c9d19cc21",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I looked at both those two codes and I thought;\r\n```script dictionary??? Huh? Wha'th'ell??```\r\nI was aware of this thing called a script dictionary, but never actually used it.\r\nAnother nugget of information to add.\r\nThanks",
      "EditableFormat": "markdown",
      "HTML": "<p>I looked at both those two codes and I thought;<br>\n<code>script dictionary??? Huh? Wha'th'ell??</code><br>\nI was aware of this thing called a script dictionary, but never actually used it.<br>\nAnother nugget of information to add.<br>\nThanks</p>\n\n",
      "PostDate": "2018-02-13T08:05:00.1955206Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "97cb43d1-5ffe-4935-8727-0028fa0f5a15",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Script Dictionary:\r\n\r\ninput (item's \"key\"): string\r\noutput (item's \"value\"): script\r\n\r\nScriptDictionaryItem (SCRIPT_DICTIONARY, INPUT) --> returns: OUTPUT (as a script)\r\n\r\nso, you either have to:\r\n\r\n1. store the 'script output' into a Script VARIABLE:\r\n\r\n```\r\n<![CDATA[\r\n\r\n  example_script_variable => ScriptDictionaryItem (SCRIPT_DICTIONARY, INPUT)\r\n\r\n  example_object.example_script_attribute => ScriptDictionaryItem (SCRIPT_DICTIONARY, INPUT)\r\n\r\n]]>\r\n```\r\n\r\n2. use/call/do/invoke the script output:\r\n\r\ninvoke (ScriptDictionaryItem (SCRIPT_DICTIONARY, INPUT))\r\n\r\n---------\r\n\r\nfor example:\r\n\r\n```\r\n<game name=\"example_game\">\r\n\r\n  <attr name=\"start\" type=\"script\">\r\n\r\n    do (example_object, \"example_script_attribute\")\r\n\r\n  </attr>\r\n\r\n</game>\r\n\r\n<object name=\"example_object\">\r\n\r\n  <attr name=\"example_script_attribute\" type=\"script\">\r\n\r\n    show menu (\"Color?\", this.example_scriptdictionary_attribute, false) {\r\n      invoke (ScriptDictionaryItem (this.example_scriptdictionary_attribute, result))\r\n    }\r\n\r\n  </attr>\r\n\r\n  <example_scriptdictionary_attribute type=\"scriptdictionary\">\r\n\r\n    <item key=\"red\">\r\n      msg (\"Color: red\")\r\n    </item>\r\n\r\n    <item key=\"blue\">\r\n      msg (\"Color: blue\")\r\n    </item>\r\n\r\n    <item key=\"yellow\">\r\n      msg (\"Color: yellow\")\r\n    </item>\r\n\r\n  </example_scriptdictionary_attribute>\r\n\r\n</object>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Script Dictionary:</p>\n<p>input (item's \"key\"): string<br>\noutput (item's \"value\"): script</p>\n<p>ScriptDictionaryItem (SCRIPT_DICTIONARY, INPUT) --&gt; returns: OUTPUT (as a script)</p>\n<p>so, you either have to:</p>\n<ol>\n<li>store the 'script output' into a Script VARIABLE:</li>\n</ol>\n<pre><code>&lt;![CDATA[\n\n  example_script_variable =&gt; ScriptDictionaryItem (SCRIPT_DICTIONARY, INPUT)\n\n  example_object.example_script_attribute =&gt; ScriptDictionaryItem (SCRIPT_DICTIONARY, INPUT)\n\n]]&gt;\n</code></pre>\n<ol start=\"2\">\n<li>use/call/do/invoke the script output:</li>\n</ol>\n<p>invoke (ScriptDictionaryItem (SCRIPT_DICTIONARY, INPUT))</p>\n<hr>\n<p>for example:</p>\n<pre><code>&lt;game name=\"example_game\"&gt;\n\n  &lt;attr name=\"start\" type=\"script\"&gt;\n\n    do (example_object, \"example_script_attribute\")\n\n  &lt;/attr&gt;\n\n&lt;/game&gt;\n\n&lt;object name=\"example_object\"&gt;\n\n  &lt;attr name=\"example_script_attribute\" type=\"script\"&gt;\n\n    show menu (\"Color?\", this.example_scriptdictionary_attribute, false) {\n      invoke (ScriptDictionaryItem (this.example_scriptdictionary_attribute, result))\n    }\n\n  &lt;/attr&gt;\n\n  &lt;example_scriptdictionary_attribute type=\"scriptdictionary\"&gt;\n\n    &lt;item key=\"red\"&gt;\n      msg (\"Color: red\")\n    &lt;/item&gt;\n\n    &lt;item key=\"blue\"&gt;\n      msg (\"Color: blue\")\n    &lt;/item&gt;\n\n    &lt;item key=\"yellow\"&gt;\n      msg (\"Color: yellow\")\n    &lt;/item&gt;\n\n  &lt;/example_scriptdictionary_attribute&gt;\n\n&lt;/object&gt;\n</code></pre>\n\n",
      "PostDate": "2018-02-13T17:05:38.6577205Z",
      "LastEditDate": "2018-02-13T17:19:59.6742954Z",
      "link": null
    },
    {
      "PostId": "f95c9c75-b75a-4b16-ad38-f60476619c62",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi,\r\nJust trying to understand your 'changecommandscope' script and how it works.\r\n```\r\nif (variable = \"object1\") {\r\n  // for 'object1', remove all non-giver items from scope\r\n  // I'm assuming \"giver\" is a boolean attribute?\r\n  foreach (to_remove, FilterByNotAttribute (items, \"giver\", true)) {\r\n    list remove (items, to_remove)\r\n  }\r\n}\r\nelse if (variable = \"object2\") {\r\n  giver = DictionaryItem(matched, \"object1\")\r\n  // get the first matched object (giver), and add its children to scope\r\n  foreach (o, GetDirectChildren(giver)) {\r\n    list add (items, o)\r\n  }\r\n}\r\n```\r\nA couple of questions though:\r\n1: Why are you checking for object1 in the first section, if object1 is not in the room, wont quest say ```I cant see that(object1)``` anyway?\r\n2: Why are you using the function 'DictionaryItem'.\r\n\r\nSorry, if these questions are a bit basic, but just trying to be a better coder.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi,<br>\nJust trying to understand your 'changecommandscope' script and how it works.</p>\n<pre><code>if (variable = \"object1\") {\n  // for 'object1', remove all non-giver items from scope\n  // I'm assuming \"giver\" is a boolean attribute?\n  foreach (to_remove, FilterByNotAttribute (items, \"giver\", true)) {\n    list remove (items, to_remove)\n  }\n}\nelse if (variable = \"object2\") {\n  giver = DictionaryItem(matched, \"object1\")\n  // get the first matched object (giver), and add its children to scope\n  foreach (o, GetDirectChildren(giver)) {\n    list add (items, o)\n  }\n}\n</code></pre>\n<p>A couple of questions though:<br>\n1: Why are you checking for object1 in the first section, if object1 is not in the room, wont quest say <code>I cant see that(object1)</code> anyway?<br>\n2: Why are you using the function 'DictionaryItem'.</p>\n<p>Sorry, if these questions are a bit basic, but just trying to be a better coder.</p>\n\n",
      "PostDate": "2018-02-18T20:15:13.5717218Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1188a65a-a929-4cd9-ad1d-c5bca0cc4deb",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Why are you checking for object1 in the first section, if object1 is not in the room, wont quest say, \"I cant see that(object1) \"anyway?\r\n\r\n```changecommandscope``` makes Quest \"see\" the item(s) in the script.  \r\n\r\nThe scope is basically the list of things you can interact with.\r\n\r\nThis is adding something to that list before the script even checks the list to see what you can interact with.\r\n\r\nSo, if I have an object named \"Fred\", and I put \"Fred\" as the value for the ```scope``` attribute of that command, ```changecommandscope``` will add all of Fred's direct children to the list of things you can interact with before it tries to run script.  Hence, everything carried by Fred can be examined, taken, or what have you.  (You can also put things in an off-the-map room, and add that room to a command's ```scope``` attribute.  Then, you could interact with all of those items, but they wouldn't show up in the Places and Objects pane or the room description.)\r\n\r\n---\r\n>Why are you using the function 'DictionaryItem'.\r\n\r\nThis is totally a guess, because I'm not sure where that dictionary is being created, but I *think* it has something to do with the Regex cache.\r\n\r\nI'm assuming ```matched``` is a dictionary which holds Regex values, and mrangel is pulling the value of ```object1``` from that dictionary, then getting that object's direct children, which are add to scope before the command actually runs.\r\n\r\n---\r\nI'm basing that on this:\r\n\r\n```smack #object1# with #object#```\r\n\r\nQuest turns that into Regex:\r\n\r\n```^smack (?<object1>.+) with (?<object2>.+)$```\r\n\r\nI'm assuming that a dictionary called ```matched``` then stores the values once the command's script is run?\r\n\r\n---\r\nhttp://docs.textadventures.co.uk/quest/complex_commands.html\r\n\r\nhttp://docs.textadventures.co.uk/quest/pattern_matching.html\r\n\r\n\r\n---\r\n### NOTE:\r\n\r\n<s>That still didn't make this work when putting \"object1\" in the scope.**\r\n\r\nPutting \"Fred\" in that command's scope works perfectly, though.\r\n\r\nI was trying to make a command which would handle the variable ```object1```, so that command could be used in any game at any time.</s>\r\n\r\nI messed up somehow when I first tried it, but mrangel's code works perfectly.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Why are you checking for object1 in the first section, if object1 is not in the room, wont quest say, \"I cant see that(object1) \"anyway?</p>\n</blockquote>\n<p><code>changecommandscope</code> makes Quest \"see\" the item(s) in the script.</p>\n<p>The scope is basically the list of things you can interact with.</p>\n<p>This is adding something to that list before the script even checks the list to see what you can interact with.</p>\n<p>So, if I have an object named \"Fred\", and I put \"Fred\" as the value for the <code>scope</code> attribute of that command, <code>changecommandscope</code> will add all of Fred's direct children to the list of things you can interact with before it tries to run script.  Hence, everything carried by Fred can be examined, taken, or what have you.  (You can also put things in an off-the-map room, and add that room to a command's <code>scope</code> attribute.  Then, you could interact with all of those items, but they wouldn't show up in the Places and Objects pane or the room description.)</p>\n<hr>\n<blockquote>\n<p>Why are you using the function 'DictionaryItem'.</p>\n</blockquote>\n<p>This is totally a guess, because I'm not sure where that dictionary is being created, but I <em>think</em> it has something to do with the Regex cache.</p>\n<p>I'm assuming <code>matched</code> is a dictionary which holds Regex values, and mrangel is pulling the value of <code>object1</code> from that dictionary, then getting that object's direct children, which are add to scope before the command actually runs.</p>\n<hr>\n<p>I'm basing that on this:</p>\n<p><code>smack #object1# with #object#</code></p>\n<p>Quest turns that into Regex:</p>\n<p><code>^smack (?&lt;object1&gt;.+) with (?&lt;object2&gt;.+)$</code></p>\n<p>I'm assuming that a dictionary called <code>matched</code> then stores the values once the command's script is run?</p>\n<hr>\n<p>http://docs.textadventures.co.uk/quest/complex_commands.html</p>\n<p>http://docs.textadventures.co.uk/quest/pattern_matching.html</p>\n<hr>\n<h3>NOTE:</h3>\n<p><s>That still didn't make this work when putting \"object1\" in the scope.**</s></p><s>\n<p>Putting \"Fred\" in that command's scope works perfectly, though.</p>\n</s><p><s>I was trying to make a command which would handle the variable <code>object1</code>, so that command could be used in any game at any time.</s></p>\n<p>I messed up somehow when I first tried it, but mrangel's code works perfectly.</p>\n\n",
      "PostDate": "2018-02-18T20:47:12.5177732Z",
      "LastEditDate": "2018-02-19T03:48:06.7251256Z",
      "link": null
    },
    {
      "PostId": "2295ed97-4720-49e5-8e5f-26448b8132c4",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "### MY THEORY:\r\nThe ```GetScope()``` script is using ```GetObject()``` on whatever is in the scope field. <sup onmouseover=\"$('#actually').show();\"><a href=\"#(It's actually more complicated than that.  It involves Split() and foreach, but let's just keep it simple for  ...simplicity's sake? Or did I mess that up already?)\" onClick=\"$('#actually').show();\" title=\"(It's actually more complicated than that.  It involves Split() and foreach, but let's just keep it simple for  ...simplicity's sake? Or did I mess that up already?)\">FOOTNOTE 1</a></sup>\r\n\r\nSo, whatever we put in the scope field is a string.\r\n\r\nYou can only do ```GetObject(string)```.  It doesn't work on an element (or a variable or an object).  So, ```object``` or ```object1```, ```game.pov```, ```clone_name.prototype```, ```game.pov.radio_contact```, or anything like that will not work.\r\n\r\nIf it's an object you're entering in the scope, you're really entering object.name.  Then, the ```GetScope()``` script treats it like a string.\r\n\r\nCheck out the ```GetScope()``` and ```GetScoping()``` scripts, if you really enjoy having your mind blown.\r\n\r\n\r\n---\r\nl find it easier to just make the NPC a surface.\r\n\r\nhttp://textadventures.co.uk/forum/quest/topic/egoik0xgukucht6dikjtrw/make-npc-companion-carry-objects#8e7ba1b2-c9fb-42c3-83a2-d6849f6293e0\r\n\r\nI've added a function and changed the take script on things which an NPC might be carrying, to make it universal.\r\n\r\n<details>\r\n\r\n**EDITED TWICE**\r\n\r\n```\r\n        <take type=\"script\">\r\n          TakeFromGiver (this)\r\n        </take>\r\n```\r\n```\r\n  <function name=\"TakeFromGiver\" parameters=\"this\">\r\n    if (HasAttribute(this.parent, \"giver\")) {\r\n      negatory = CapFirst(this.gender) + \" seems to belong to \"+ GetDisplayName(this.parent) + \".\"\r\n      if (this.parent.giver) {\r\n        if (not GetBoolean(this, \"notgiveable\")) {\r\n          if (DictionaryContains(this.parent.givedict, this.name)) {\r\n            invoke (ScriptDictionaryItem(this.parent.givedict, this.name))\r\n          }\r\n          else {\r\n            msg (CapFirst(GetDisplayName(this.parent)) + \" hands \" + this.article + \" over.\")\r\n            AddToInventory (this)\r\n          }\r\n        }\r\n        else {\r\n          if (DictionaryContains(this.parent.givedict, this.name)) {\r\n            invoke (ScriptDictionaryItem(this.parent.givedict, this.name))\r\n          }\r\n          else {\r\n            msg (negatory)\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        msg (negatory)\r\n      }\r\n    }\r\n    else {\r\n      msg (\"You pick it up.\")\r\n      AddToInventory (this)\r\n    }\r\n  </function>\r\n```\r\n\r\n</details>\r\n\r\n---\r\nExample game (with Fred as a surface):\r\n\r\n<details>\r\n\r\n\r\n```\r\n<!--Saved by Quest 5.7.6623.30864-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Fred Carries Things (Surface Edition)\">\r\n    <gameid>803a9ebb-d611-4253-b116-698982bba250</gameid>\r\n    <version>0.0.1</version>\r\n    <firstpublished>2018</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <isroom />\r\n    <enter type=\"script\">\r\n    </enter>\r\n    <beforeenter type=\"script\">\r\n    </beforeenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"Fred\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"namedmale\" />\r\n      <inherit name=\"surface\" />\r\n      <giver />\r\n      <take type=\"boolean\">false</take>\r\n      <feature_container />\r\n      <contentsprefix>who is carrying</contentsprefix>\r\n      <hidechildren type=\"boolean\">false</hidechildren>\r\n      <look type=\"script\"><![CDATA[\r\n        msg (\"He's just your average NPC.<br/>\")\r\n        if (ListCount(GetDirectChildren(Fred))>0) {\r\n          PrintNpcInventory (Fred)\r\n        }\r\n      ]]></look>\r\n      <addscript type=\"script\">\r\n        msg (\"\\\"Get that off me!\\\" says Fred.\")\r\n      </addscript>\r\n      <givedict type=\"scriptdictionary\">\r\n        <item key=\"thingy\"><![CDATA[\r\n          msg (\"\\\"It's my favorite thingy,\\\" says Fred.  \\\"Take good care of it.\\\"<br/><br/>He hands it over.\")\r\n          AddToInventory (thingy)\r\n        ]]></item>\r\n        <item key=\"widget\"><![CDATA[\r\n          firsttime {\r\n            msg (\"\\\"This widget is mine,\\\" says Fred.  \\\"Go find your own.\\\"<br/>\")\r\n          }\r\n          otherwise {\r\n            msg (\"\\\"I've already told you,\\\" says Fred.  \\\"You can't have it.\\\"<br/>\")\r\n          }\r\n        ]]></item>\r\n      </givedict>\r\n      <ask type=\"scriptdictionary\">\r\n        <item key=\"cane\"><![CDATA[\r\n          msg (\"\\\"I was planning on keeping it for myself,\\\" he says, \\\"but you can take it.\\\"\")\r\n          cane.take => {\r\n            TakeFromGiver (this)\r\n          }\r\n        ]]></item>\r\n      </ask>\r\n      <object name=\"widget\">\r\n        <inherit name=\"editor_object\" />\r\n        <take type=\"script\">\r\n          TakeFromGiver (this)\r\n        </take>\r\n      </object>\r\n      <object name=\"thingy\">\r\n        <inherit name=\"editor_object\" />\r\n        <take type=\"script\">\r\n          TakeFromGiver (this)\r\n        </take>\r\n        <notgiveable />\r\n      </object>\r\n      <object name=\"cane\">\r\n        <inherit name=\"editor_object\" />\r\n        <take type=\"script\">\r\n          TakeFromGiver (this)\r\n        </take>\r\n      </object>\r\n    </object>\r\n  </object>\r\n  <command name=\"npc_inventory_cmd\">\r\n    <pattern>#object#, inventory;#object#, i;#object# inventory;#object# i</pattern>\r\n    <script>\r\n      PrintNpcInventory (object)\r\n    </script>\r\n  </command>\r\n  <command name=\"ask_npc_for_object_cmd\">\r\n    <pattern>ask #object1# for #object2#;#object1#, give me #object2#;get #object2# from #object1#;take #object2# from #object1#</pattern>\r\n    <scope>Fred</scope>\r\n    <script>\r\n      if (not HasAttribute(object1,\"giver\")) {\r\n        msg (CapFirst(object1.gender) + \" can't do that.\")\r\n      }\r\n      else {\r\n        if (DictionaryContains(object1.givedict,object2.name)) {\r\n          invoke (ScriptDictionaryItem(object1.givedict, object2.name))\r\n        }\r\n        else {\r\n          msg (CapFirst(GetDisplayName(object1)) + \" shakes \" + object1.possessive + \" head.\")\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n  <function name=\"FormatNpcInventory\" parameters=\"npc\" type=\"string\"><![CDATA[\r\n    if (ListCount(GetDirectChildren(npc))<1) {\r\n      return (\"nothing\")\r\n    }\r\n    return (FormatObjectList(\"\", npc, \"and\", \"\"))\r\n  ]]></function>\r\n  <function name=\"PrintNpcInventory\" parameters=\"npc\">\r\n    msg (CapFirst(GetDisplayName(npc)) + \" is carrying \" + FormatNpcInventory(npc) + \".\")\r\n  </function>\r\n  <function name=\"TakeFromGiver\" parameters=\"this\">\r\n    if (HasAttribute(this.parent, \"giver\")) {\r\n      negatory = CapFirst(this.gender) + \" seems to belong to \"+ GetDisplayName(this.parent) + \".\"\r\n      if (this.parent.giver) {\r\n        if (not GetBoolean(this, \"notgiveable\")) {\r\n          if (DictionaryContains(this.parent.givedict, this.name)) {\r\n            invoke (ScriptDictionaryItem(this.parent.givedict, this.name))\r\n          }\r\n          else {\r\n            msg (CapFirst(GetDisplayName(this.parent)) + \" hands \" + this.article + \" over.\")\r\n            AddToInventory (this)\r\n          }\r\n        }\r\n        else {\r\n          if (DictionaryContains(this.parent.givedict, this.name)) {\r\n            invoke (ScriptDictionaryItem(this.parent.givedict, this.name))\r\n          }\r\n          else {\r\n            msg (negatory)\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        msg (negatory)\r\n      }\r\n    }\r\n    else {\r\n      msg (\"You pick it up.\")\r\n      AddToInventory (this)\r\n    }\r\n  </function>\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<h3>MY THEORY:</h3>\n<p>The <code>GetScope()</code> script is using <code>GetObject()</code> on whatever is in the scope field. <sup><a href=\"#(It's%20actually%20more%20complicated%20than%20that.%20%20It%20involves%20Split()%20and%20foreach,%20but%20let's%20just%20keep%20it%20simple%20for%20%20...simplicity's%20sake?%20Or%20did%20I%20mess%20that%20up%20already?)\" title=\"(It's actually more complicated than that.  It involves Split() and foreach, but let's just keep it simple for  ...simplicity's sake? Or did I mess that up already?)\">FOOTNOTE 1</a></sup></p>\n<p>So, whatever we put in the scope field is a string.</p>\n<p>You can only do <code>GetObject(string)</code>.  It doesn't work on an element (or a variable or an object).  So, <code>object</code> or <code>object1</code>, <code>game.pov</code>, <code>clone_name.prototype</code>, <code>game.pov.radio_contact</code>, or anything like that will not work.</p>\n<p>If it's an object you're entering in the scope, you're really entering object.name.  Then, the <code>GetScope()</code> script treats it like a string.</p>\n<p>Check out the <code>GetScope()</code> and <code>GetScoping()</code> scripts, if you really enjoy having your mind blown.</p>\n<hr>\n<p>l find it easier to just make the NPC a surface.</p>\n<p>http://textadventures.co.uk/forum/quest/topic/egoik0xgukucht6dikjtrw/make-npc-companion-carry-objects#8e7ba1b2-c9fb-42c3-83a2-d6849f6293e0</p>\n<p>I've added a function and changed the take script on things which an NPC might be carrying, to make it universal.</p>\n<details>\n<p><strong>EDITED TWICE</strong></p>\n<pre><code>        &lt;take type=\"script\"&gt;\n          TakeFromGiver (this)\n        &lt;/take&gt;\n</code></pre>\n<pre><code>  &lt;function name=\"TakeFromGiver\" parameters=\"this\"&gt;\n    if (HasAttribute(this.parent, \"giver\")) {\n      negatory = CapFirst(this.gender) + \" seems to belong to \"+ GetDisplayName(this.parent) + \".\"\n      if (this.parent.giver) {\n        if (not GetBoolean(this, \"notgiveable\")) {\n          if (DictionaryContains(this.parent.givedict, this.name)) {\n            invoke (ScriptDictionaryItem(this.parent.givedict, this.name))\n          }\n          else {\n            msg (CapFirst(GetDisplayName(this.parent)) + \" hands \" + this.article + \" over.\")\n            AddToInventory (this)\n          }\n        }\n        else {\n          if (DictionaryContains(this.parent.givedict, this.name)) {\n            invoke (ScriptDictionaryItem(this.parent.givedict, this.name))\n          }\n          else {\n            msg (negatory)\n          }\n        }\n      }\n      else {\n        msg (negatory)\n      }\n    }\n    else {\n      msg (\"You pick it up.\")\n      AddToInventory (this)\n    }\n  &lt;/function&gt;\n</code></pre>\n</details>\n<hr>\n<p>Example game (with Fred as a surface):</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6623.30864--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Fred Carries Things (Surface Edition)\"&gt;\n    &lt;gameid&gt;803a9ebb-d611-4253-b116-698982bba250&lt;/gameid&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;isroom /&gt;\n    &lt;enter type=\"script\"&gt;\n    &lt;/enter&gt;\n    &lt;beforeenter type=\"script\"&gt;\n    &lt;/beforeenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"Fred\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"namedmale\" /&gt;\n      &lt;inherit name=\"surface\" /&gt;\n      &lt;giver /&gt;\n      &lt;take type=\"boolean\"&gt;false&lt;/take&gt;\n      &lt;feature_container /&gt;\n      &lt;contentsprefix&gt;who is carrying&lt;/contentsprefix&gt;\n      &lt;hidechildren type=\"boolean\"&gt;false&lt;/hidechildren&gt;\n      &lt;look type=\"script\"&gt;&lt;![CDATA[\n        msg (\"He's just your average NPC.&lt;br/&gt;\")\n        if (ListCount(GetDirectChildren(Fred))&gt;0) {\n          PrintNpcInventory (Fred)\n        }\n      ]]&gt;&lt;/look&gt;\n      &lt;addscript type=\"script\"&gt;\n        msg (\"\\\"Get that off me!\\\" says Fred.\")\n      &lt;/addscript&gt;\n      &lt;givedict type=\"scriptdictionary\"&gt;\n        &lt;item key=\"thingy\"&gt;&lt;![CDATA[\n          msg (\"\\\"It's my favorite thingy,\\\" says Fred.  \\\"Take good care of it.\\\"&lt;br/&gt;&lt;br/&gt;He hands it over.\")\n          AddToInventory (thingy)\n        ]]&gt;&lt;/item&gt;\n        &lt;item key=\"widget\"&gt;&lt;![CDATA[\n          firsttime {\n            msg (\"\\\"This widget is mine,\\\" says Fred.  \\\"Go find your own.\\\"&lt;br/&gt;\")\n          }\n          otherwise {\n            msg (\"\\\"I've already told you,\\\" says Fred.  \\\"You can't have it.\\\"&lt;br/&gt;\")\n          }\n        ]]&gt;&lt;/item&gt;\n      &lt;/givedict&gt;\n      &lt;ask type=\"scriptdictionary\"&gt;\n        &lt;item key=\"cane\"&gt;&lt;![CDATA[\n          msg (\"\\\"I was planning on keeping it for myself,\\\" he says, \\\"but you can take it.\\\"\")\n          cane.take =&gt; {\n            TakeFromGiver (this)\n          }\n        ]]&gt;&lt;/item&gt;\n      &lt;/ask&gt;\n      &lt;object name=\"widget\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;take type=\"script\"&gt;\n          TakeFromGiver (this)\n        &lt;/take&gt;\n      &lt;/object&gt;\n      &lt;object name=\"thingy\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;take type=\"script\"&gt;\n          TakeFromGiver (this)\n        &lt;/take&gt;\n        &lt;notgiveable /&gt;\n      &lt;/object&gt;\n      &lt;object name=\"cane\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;take type=\"script\"&gt;\n          TakeFromGiver (this)\n        &lt;/take&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command name=\"npc_inventory_cmd\"&gt;\n    &lt;pattern&gt;#object#, inventory;#object#, i;#object# inventory;#object# i&lt;/pattern&gt;\n    &lt;script&gt;\n      PrintNpcInventory (object)\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"ask_npc_for_object_cmd\"&gt;\n    &lt;pattern&gt;ask #object1# for #object2#;#object1#, give me #object2#;get #object2# from #object1#;take #object2# from #object1#&lt;/pattern&gt;\n    &lt;scope&gt;Fred&lt;/scope&gt;\n    &lt;script&gt;\n      if (not HasAttribute(object1,\"giver\")) {\n        msg (CapFirst(object1.gender) + \" can't do that.\")\n      }\n      else {\n        if (DictionaryContains(object1.givedict,object2.name)) {\n          invoke (ScriptDictionaryItem(object1.givedict, object2.name))\n        }\n        else {\n          msg (CapFirst(GetDisplayName(object1)) + \" shakes \" + object1.possessive + \" head.\")\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=\"FormatNpcInventory\" parameters=\"npc\" type=\"string\"&gt;&lt;![CDATA[\n    if (ListCount(GetDirectChildren(npc))&lt;1) {\n      return (\"nothing\")\n    }\n    return (FormatObjectList(\"\", npc, \"and\", \"\"))\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"PrintNpcInventory\" parameters=\"npc\"&gt;\n    msg (CapFirst(GetDisplayName(npc)) + \" is carrying \" + FormatNpcInventory(npc) + \".\")\n  &lt;/function&gt;\n  &lt;function name=\"TakeFromGiver\" parameters=\"this\"&gt;\n    if (HasAttribute(this.parent, \"giver\")) {\n      negatory = CapFirst(this.gender) + \" seems to belong to \"+ GetDisplayName(this.parent) + \".\"\n      if (this.parent.giver) {\n        if (not GetBoolean(this, \"notgiveable\")) {\n          if (DictionaryContains(this.parent.givedict, this.name)) {\n            invoke (ScriptDictionaryItem(this.parent.givedict, this.name))\n          }\n          else {\n            msg (CapFirst(GetDisplayName(this.parent)) + \" hands \" + this.article + \" over.\")\n            AddToInventory (this)\n          }\n        }\n        else {\n          if (DictionaryContains(this.parent.givedict, this.name)) {\n            invoke (ScriptDictionaryItem(this.parent.givedict, this.name))\n          }\n          else {\n            msg (negatory)\n          }\n        }\n      }\n      else {\n        msg (negatory)\n      }\n    }\n    else {\n      msg (\"You pick it up.\")\n      AddToInventory (this)\n    }\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-02-18T23:30:51.7675162Z",
      "LastEditDate": "2018-02-19T03:43:10.3131148Z",
      "link": null
    },
    {
      "PostId": "04f019f6-ace8-4668-8d8c-03f444fe6dfc",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> 1: Why are you checking for object1 in the first section, if object1 is not in the room, wont quest say I cant see that(object1) anyway?\r\n\r\n```\r\n==> Ask fre for box\r\n\r\nWhich Fre did you mean?\r\n1. Fred\r\n2. French flag\r\n```\r\nParaphrasing off the top of my head, maybe that's not the exact wording, but you get the idea.\r\nWhen determining what you can see, the parser uses the changecommandscope script to change the list of items.\r\nIn the case f object1, it removes everything that isn't a \"giver\" from the list, so you type \"fre\" and the parser knows you meant Fred.\r\n\r\n> 2: Why are you using the function 'DictionaryItem'.\r\n\r\n`matched` is a dictionary of the parameters that have already been identified. In this case the command is `ask #object1# for #object2#`. So if you put `ask fred for box` and he's holding multiple boxes, it will ask you to choose one. But when it's building the list of boxes, `DictionaryItem(matched, \"object1\")` will be Fred. It adds the boxes Fred is carrying to the list, but not the boxes Max is carrying, or the box you already have.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>1: Why are you checking for object1 in the first section, if object1 is not in the room, wont quest say I cant see that(object1) anyway?</p>\n</blockquote>\n<pre><code>==&gt; Ask fre for box\n\nWhich Fre did you mean?\n1. Fred\n2. French flag\n</code></pre>\n<p>Paraphrasing off the top of my head, maybe that's not the exact wording, but you get the idea.<br>\nWhen determining what you can see, the parser uses the changecommandscope script to change the list of items.<br>\nIn the case f object1, it removes everything that isn't a \"giver\" from the list, so you type \"fre\" and the parser knows you meant Fred.</p>\n<blockquote>\n<p>2: Why are you using the function 'DictionaryItem'.</p>\n</blockquote>\n<p><code>matched</code> is a dictionary of the parameters that have already been identified. In this case the command is <code>ask #object1# for #object2#</code>. So if you put <code>ask fred for box</code> and he's holding multiple boxes, it will ask you to choose one. But when it's building the list of boxes, <code>DictionaryItem(matched, \"object1\")</code> will be Fred. It adds the boxes Fred is carrying to the list, but not the boxes Max is carrying, or the box you already have.</p>\n\n",
      "PostDate": "2018-02-19T03:30:10.5615054Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4841069b-8296-4642-aa70-b61060c11675",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, finally!\r\n\r\nI thought I pasted mrangels entire code over mine last night, but I must have erred in some way.\r\n\r\nThis works:\r\nhttp://textadventures.co.uk/forum/quest/topic/egoik0xgukucht6dikjtrw/make-npc-companion-carry-objects#881090f2-ad95-4139-958a-5050fde36a8d",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, finally!</p>\n<p>I thought I pasted mrangels entire code over mine last night, but I must have erred in some way.</p>\n<p>This works:<br>\nhttp://textadventures.co.uk/forum/quest/topic/egoik0xgukucht6dikjtrw/make-npc-companion-carry-objects#881090f2-ad95-4139-958a-5050fde36a8d</p>\n\n",
      "PostDate": "2018-02-19T03:46:30.7971184Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "682684eb-bc5e-4162-b1e4-89b7d61b2b93",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(A little note: The script as I posted might have issues with the case of `get #object2# from #object1#`, because I'm not sure which order the scope script will be called for the two arguments. I think it will parse them in the order they occur i the player's input; so the object2 part of the script should form a list of all the objects held by all givers in the event that object1 hasn't been parsed yet. Or we could rely on the backup scope in that case, but that's a little inelegant)",
      "EditableFormat": "markdown",
      "HTML": "<p>(A little note: The script as I posted might have issues with the case of <code>get #object2# from #object1#</code>, because I'm not sure which order the scope script will be called for the two arguments. I think it will parse them in the order they occur i the player's input; so the object2 part of the script should form a list of all the objects held by all givers in the event that object1 hasn't been parsed yet. Or we could rely on the backup scope in that case, but that's a little inelegant)</p>\n\n",
      "PostDate": "2018-02-19T10:08:27.4042359Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c8f8875b-6125-429a-a3b8-4ff590668927",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks all, I think I've got the hang of this now, and after reading this post;\r\nhttp://textadventures.co.uk/forum/quest/topic/lyxihkcrnkgl1v97f1ym8w/placing-things-in-scope-solved\r\nit's making a lot more sense.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks all, I think I've got the hang of this now, and after reading this post;<br>\nhttp://textadventures.co.uk/forum/quest/topic/lyxihkcrnkgl1v97f1ym8w/placing-things-in-scope-solved<br>\nit's making a lot more sense.</p>\n\n",
      "PostDate": "2018-02-19T21:36:05.6567536Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
