{
  "Topic": {
    "TopicId": "5899",
    "ForumId": "10",
    "Title": "Trouble with Variables",
    "LastUpdated": "2016-01-20T19:59:31+00:00",
    "ReplyCount": 5
  },
  "Posts": [
    {
      "PostId": "40798",
      "UserId": 0,
      "Username": "H-Segher-G",
      "UserAvatar": null,
      "UserGravatar": "912673f33342c8c75a5becc9990b5384",
      "EditableText": "Greetings! I'm afraid my first post on the forums is to be a request for help, as I have what is likely a very small problem. In the opening scene of my text adventure, the player character encounters a sleeping character. Given that this particular encounter only happens once, at the start of the game, I have tried to include a variable which allows me to use an 'if' command to result in different dialogue next time the player engages in conversation with said character. As there are numerous ways of waking said character and engaging in the initial dialogue which is partly unique and not to be repeated, once the character has been woken using one method, a variable which marks the character as being awake is changed to true, and an 'if' command then checks this variable should the player attempt to initiate dialogue again, and decides on the appropriate course of action. So, in the 'firstenter' script which is also responsible for displaying a unique one-time message, I've added this variable 'triedtowakeleslie = false'. When dialogue is initiated, an 'if' command checks this variable to determine whether the character is awake or not, and then present the appropriate dialogue. The problem is, when I try speaking to the character, Leslie... I get this error;\n\nError running script&#058; Error compiling expression 'triedtowakeleslie = false': Unknown object or variable 'triedtowakeleslie'\n\nWhat's happening here?\n\nI have attached the relevant section of code, I do apologise, it's quite a wall of the stuff. To avoid spoilers, I've replaced descriptions and messages with placeholders, please excuse them. Any help would be appreciated, I have no programming experience so I'm probably making a silly mistake.\n \n[code:1nsl5k1c]    \n    &lt;firstenter type=&quot;script&quot;&gt;\n      triedtowakeleslie = false\n      msg (&quot;She's still asleep!&quot;)\n    &lt;/firstenter&gt;\n    &lt;object name=&quot;player&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;inherit name=&quot;editor_player&quot; /&gt;\n    &lt;/object&gt;\n    &lt;object name=&quot;The Manager&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;inherit name=&quot;namedfemale&quot; /&gt;\n      &lt;gender&gt;She&lt;/gender&gt;\n      &lt;takemsg&gt;Eh? What do you plan on doing? proposing to her?&lt;/takemsg&gt;\n      &lt;take /&gt;\n      &lt;drop type=&quot;boolean&quot;&gt;false&lt;/drop&gt;\n      &lt;article&gt;Female&lt;/article&gt;\n      &lt;alias&gt;Leslie&lt;/alias&gt;\n      &lt;look&gt;&lt;!&#91;CDATA&#91;This is where the look message was&#46;&#93;&#93;&gt;&lt;/look&gt;\n      &lt;alt type=&quot;stringlist&quot;&gt;\n        &lt;value&gt;leslie&lt;/value&gt;\n        &lt;value&gt;Leslie&lt;/value&gt;\n      &lt;/alt&gt;\n      &lt;listalias&gt;Manager Leslie&lt;/listalias&gt;\n      &lt;displayverbs type=&quot;stringlist&quot;&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;Speak to&lt;/value&gt;\n      &lt;/displayverbs&gt;\n      &lt;speak type=&quot;script&quot;&gt;\n        if (triedtowakeleslie = false) {\n          topics = Split (&quot;Approach Leslie&quot;, &quot;;&quot;)\n          ShowMenu (&quot;Speaking with Leslie&quot;, topics, false) {\n            switch (result) {\n              case (&quot;Approach Leslie&quot;) {\n                msg (&quot;\\&quot;H&#46;&#46;&#46; Hello?\\&quot; Stuff&#46;&quot;)\n                triedtowakeleslie = true\n                if (triedtowakeleslie = true) {\n                  leslietopics2 = Split (&quot;Placeholder;Boo!&quot;, &quot;;&quot;)\n                  ShowMenu (&quot;&quot;, leslietopics2, false) {\n                    switch (result) {\n                      case (&quot;Placeholder!&quot;) {\n                        msg (&quot;placeholder&#46;&quot;)\n                      }\n                      case (&quot;Boo!&quot;) {\n                        msg (&quot;\\&quot;Ugh&#46;\\&quot;&quot;)\n                      }\n                    }\n                  }\n                }\n                else {\n                  msg (&quot;You shouldn't be here, and you KNOW it&#46;&quot;)\n                }\n              }\n            }\n          }\n        }\n        else {\n          msg (&quot;Hold it, Stranger&#46; Placeholder for 'triedtowakeleslie = true' dialogue tree&#46;&quot;)\n        }[/code:1nsl5k1c]",
      "EditableFormat": "bbcode",
      "HTML": "Greetings! I'm afraid my first post on the forums is to be a request for help, as I have what is likely a very small problem. In the opening scene of my text adventure, the player character encounters a sleeping character. Given that this particular encounter only happens once, at the start of the game, I have tried to include a variable which allows me to use an 'if' command to result in different dialogue next time the player engages in conversation with said character. As there are numerous ways of waking said character and engaging in the initial dialogue which is partly unique and not to be repeated, once the character has been woken using one method, a variable which marks the character as being awake is changed to true, and an 'if' command then checks this variable should the player attempt to initiate dialogue again, and decides on the appropriate course of action. So, in the 'firstenter' script which is also responsible for displaying a unique one-time message, I've added this variable 'triedtowakeleslie = false'. When dialogue is initiated, an 'if' command checks this variable to determine whether the character is awake or not, and then present the appropriate dialogue. The problem is, when I try speaking to the character, Leslie... I get this error;<br/><br/>Error running script&#058; Error compiling expression 'triedtowakeleslie = false': Unknown object or variable 'triedtowakeleslie'<br/><br/>What's happening here?<br/><br/>I have attached the relevant section of code, I do apologise, it's quite a wall of the stuff. To avoid spoilers, I've replaced descriptions and messages with placeholders, please excuse them. Any help would be appreciated, I have no programming experience so I'm probably making a silly mistake.<br/> <br/><pre><code>    <br/>    &lt;firstenter type=&quot;script&quot;&gt;<br/>      triedtowakeleslie = false<br/>      msg (&quot;She's still asleep!&quot;)<br/>    &lt;/firstenter&gt;<br/>    &lt;object name=&quot;player&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;inherit name=&quot;editor_player&quot; /&gt;<br/>    &lt;/object&gt;<br/>    &lt;object name=&quot;The Manager&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;inherit name=&quot;namedfemale&quot; /&gt;<br/>      &lt;gender&gt;She&lt;/gender&gt;<br/>      &lt;takemsg&gt;Eh? What do you plan on doing? proposing to her?&lt;/takemsg&gt;<br/>      &lt;take /&gt;<br/>      &lt;drop type=&quot;boolean&quot;&gt;false&lt;/drop&gt;<br/>      &lt;article&gt;Female&lt;/article&gt;<br/>      &lt;alias&gt;Leslie&lt;/alias&gt;<br/>      &lt;look&gt;&lt;!&#91;CDATA&#91;This is where the look message was&#46;&#93;&#93;&gt;&lt;/look&gt;<br/>      &lt;alt type=&quot;stringlist&quot;&gt;<br/>        &lt;value&gt;leslie&lt;/value&gt;<br/>        &lt;value&gt;Leslie&lt;/value&gt;<br/>      &lt;/alt&gt;<br/>      &lt;listalias&gt;Manager Leslie&lt;/listalias&gt;<br/>      &lt;displayverbs type=&quot;stringlist&quot;&gt;<br/>        &lt;value&gt;Look at&lt;/value&gt;<br/>        &lt;value&gt;Speak to&lt;/value&gt;<br/>      &lt;/displayverbs&gt;<br/>      &lt;speak type=&quot;script&quot;&gt;<br/>        if (triedtowakeleslie = false) {<br/>          topics = Split (&quot;Approach Leslie&quot;, &quot;;&quot;)<br/>          ShowMenu (&quot;Speaking with Leslie&quot;, topics, false) {<br/>            switch (result) {<br/>              case (&quot;Approach Leslie&quot;) {<br/>                msg (&quot;\\&quot;H&#46;&#46;&#46; Hello?\\&quot; Stuff&#46;&quot;)<br/>                triedtowakeleslie = true<br/>                if (triedtowakeleslie = true) {<br/>                  leslietopics2 = Split (&quot;Placeholder;Boo!&quot;, &quot;;&quot;)<br/>                  ShowMenu (&quot;&quot;, leslietopics2, false) {<br/>                    switch (result) {<br/>                      case (&quot;Placeholder!&quot;) {<br/>                        msg (&quot;placeholder&#46;&quot;)<br/>                      }<br/>                      case (&quot;Boo!&quot;) {<br/>                        msg (&quot;\\&quot;Ugh&#46;\\&quot;&quot;)<br/>                      }<br/>                    }<br/>                  }<br/>                }<br/>                else {<br/>                  msg (&quot;You shouldn't be here, and you KNOW it&#46;&quot;)<br/>                }<br/>              }<br/>            }<br/>          }<br/>        }<br/>        else {<br/>          msg (&quot;Hold it, Stranger&#46; Placeholder for 'triedtowakeleslie = true' dialogue tree&#46;&quot;)<br/>        }</code></pre>",
      "PostDate": "2016-01-19T22:22:40+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "40799",
      "UserId": 0,
      "Username": "lightwriter",
      "UserAvatar": null,
      "UserGravatar": "4361dea0f293c64bea42cb1253ce25d4",
      "EditableText": "Variables can only be used locally, as in the same script, where as attributes can be used globally (within any script)",
      "EditableFormat": "bbcode",
      "HTML": "Variables can only be used locally, as in the same script, where as attributes can be used globally (within any script)",
      "PostDate": "2016-01-19T22:43:44+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "40800",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "If I understand you correctly, you simply want the conversation with a sleepy Leslie different than a conversation with a fully alert Leslie.\n\nHere is my fix.  Instead of messing with variables and attributes and booleans/flags (which can lead to problems like the one you are seeing), just create a second Leslie and store that Leslie in a &quot;dead room&quot; or make them invisible.  When whatever happens to fully wake Leslie up just move Leslie1 to &quot;dead room&quot; (or make invisible) and move Leslie2 to current room (or make visible).\n\nLet me know if that solves your problem.\n\nGood luck!",
      "EditableFormat": "bbcode",
      "HTML": "If I understand you correctly, you simply want the conversation with a sleepy Leslie different than a conversation with a fully alert Leslie.<br/><br/>Here is my fix.  Instead of messing with variables and attributes and booleans/flags (which can lead to problems like the one you are seeing), just create a second Leslie and store that Leslie in a &quot;dead room&quot; or make them invisible.  When whatever happens to fully wake Leslie up just move Leslie1 to &quot;dead room&quot; (or make invisible) and move Leslie2 to current room (or make visible).<br/><br/>Let me know if that solves your problem.<br/><br/>Good luck!",
      "PostDate": "2016-01-19T23:19:14+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "40804",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "there's also the 'firsttime~otherwise' Function~Script&#058; <!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/scripts/firsttime.html\">http://docs.textadventures.co.uk/quest/ ... ttime.html</a><!-- m --> ~~~ but for additional conditional branchings, you're going to need 'if' Scripts and Attributes.\n\n------\n\nas to keeping your design, to further what Lightwriter mentioned:\n\nin quest, there's this terminology:\n\nVARIABLES\n-&gt; Variables\n-&gt; Attributes\n-&gt; Parameters\n\nVariables are local, which means that they're limited to the script block that you've created (and are using them) within. This means that once the script block is done, those Variables that you created are destroyed, which is why you're getting the error that your 'triedtowakeleslie' Variable doesn't exist.\n\nexamples of commonly used Variable names~labels (notice that there's no: Object_name.Variable_name syntax):\n\n// triedtowakeleslie: this is an exception, yours is not common, lol.\nhandled\nresult (built-in Variable used automatically by quest for the 'get input' and 'show menu' Scripts~Functions)\nvalue\netc etc etc\n\nWHEREAS, Attributes are global, you can use them anywhere, so long as the Object that they're contained within (or attached to) exists, of course (notice that Attributes are 'attached', the use of the dot~period, to the Object that contains them, in code, that is):\n\n[code:jcyvkqyf]game&#46;triedtowakeleslie = true\ngame&#46;triedtowakeleslie = false\nplayer&#46;strength = 50\nmonster&#46;strength = 25\nHK&#46;strength = 100\nHK&#46;favorite_color = &quot;black&quot;\norc&#46;dead = false\norc&#46;dead = true\nplayer&#46;right_hand = sword\nHK&#46;favorite_colors = split (&quot;black;red&quot;, &quot;;&quot;)\netc etc etc\n\nif (student&#46;score &gt; 90) {\n  student&#46;grade = &quot;A&quot;\n} else if (student&#46;score &gt; 80) {\n  student&#46;grade = &quot;B&quot;\n} else if (student&#46;score &gt; 70) {\n  student&#46;grade = &quot;C&quot;\n} else if (student&#46;score &gt; 60) {\n  student&#46;grade = &quot;D&quot;\n} else {\n  student&#46;grade = &quot;F&quot;\n}\n\nif (game&#46;state = 0) {\n  orc&#46;life = 10\n} else if (game&#46;state = 100) {\n  orc&#46;life = 10000000000000000\n}\n\netc etc etc etc[/code:jcyvkqyf]\n\n------\n\nParameters deal with Commands and Functions, if you know coding basics, these shouldn't need explanation. If you don't know coding basics, Parameters, Functions, and Commands, take some time to understand, not easy stuff to get when this stuff is new to someone.\n\n--------------\n\nin general, using Attributes makes everything easy, but if you know some coding~programming, then you can save resources by using Variables, as you already understand how they work, and can build Functions~Commands that use local variables when they can, as opposed to creating new Attributes.",
      "EditableFormat": "bbcode",
      "HTML": "there's also the 'firsttime~otherwise' Function~Script&#058; <!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/scripts/firsttime.html\">http://docs.textadventures.co.uk/quest/ ... ttime.html</a><!-- m --> ~~~ but for additional conditional branchings, you're going to need 'if' Scripts and Attributes.<br/><br/>------<br/><br/>as to keeping your design, to further what Lightwriter mentioned:<br/><br/>in quest, there's this terminology:<br/><br/>VARIABLES<br/>-&gt; Variables<br/>-&gt; Attributes<br/>-&gt; Parameters<br/><br/>Variables are local, which means that they're limited to the script block that you've created (and are using them) within. This means that once the script block is done, those Variables that you created are destroyed, which is why you're getting the error that your 'triedtowakeleslie' Variable doesn't exist.<br/><br/>examples of commonly used Variable names~labels (notice that there's no: Object_name.Variable_name syntax):<br/><br/>// triedtowakeleslie: this is an exception, yours is not common, lol.<br/>handled<br/>result (built-in Variable used automatically by quest for the 'get input' and 'show menu' Scripts~Functions)<br/>value<br/>etc etc etc<br/><br/>WHEREAS, Attributes are global, you can use them anywhere, so long as the Object that they're contained within (or attached to) exists, of course (notice that Attributes are 'attached', the use of the dot~period, to the Object that contains them, in code, that is):<br/><br/><pre><code>game&#46;triedtowakeleslie = true<br/>game&#46;triedtowakeleslie = false<br/>player&#46;strength = 50<br/>monster&#46;strength = 25<br/>HK&#46;strength = 100<br/>HK&#46;favorite_color = &quot;black&quot;<br/>orc&#46;dead = false<br/>orc&#46;dead = true<br/>player&#46;right_hand = sword<br/>HK&#46;favorite_colors = split (&quot;black;red&quot;, &quot;;&quot;)<br/>etc etc etc<br/><br/>if (student&#46;score &gt; 90) {<br/>  student&#46;grade = &quot;A&quot;<br/>} else if (student&#46;score &gt; 80) {<br/>  student&#46;grade = &quot;B&quot;<br/>} else if (student&#46;score &gt; 70) {<br/>  student&#46;grade = &quot;C&quot;<br/>} else if (student&#46;score &gt; 60) {<br/>  student&#46;grade = &quot;D&quot;<br/>} else {<br/>  student&#46;grade = &quot;F&quot;<br/>}<br/><br/>if (game&#46;state = 0) {<br/>  orc&#46;life = 10<br/>} else if (game&#46;state = 100) {<br/>  orc&#46;life = 10000000000000000<br/>}<br/><br/>etc etc etc etc</code></pre><br/><br/>------<br/><br/>Parameters deal with Commands and Functions, if you know coding basics, these shouldn't need explanation. If you don't know coding basics, Parameters, Functions, and Commands, take some time to understand, not easy stuff to get when this stuff is new to someone.<br/><br/>--------------<br/><br/>in general, using Attributes makes everything easy, but if you know some coding~programming, then you can save resources by using Variables, as you already understand how they work, and can build Functions~Commands that use local variables when they can, as opposed to creating new Attributes.",
      "PostDate": "2016-01-20T03:44:46+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "40813",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Short answer: if you change your usages of &quot;triedtowakeleslie&quot; to &quot;player.triedtowakeleslie&quot;, then it should work, provided you either create the attribute on the player to begin with or initialize it in some startup script (so that &quot;if (player.triedtowakeleslie = false)&quot; will have an attribute to check).\n\nIf you don't want to actually initialize the attribute, then just change your &quot;if&quot; to be &quot;if (GetBoolean(player, &quot;triedtowakeleslie&quot;) = false). GetBoolean will return false in the case the attribute has not yet been defined.\n\nAnd you can replace &quot;if (player.triedtowakeleslie = false)&quot; with &quot;if (not player.triedtowakeleslie)&quot;, if you prefer the way that reads. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "Short answer: if you change your usages of &quot;triedtowakeleslie&quot; to &quot;player.triedtowakeleslie&quot;, then it should work, provided you either create the attribute on the player to begin with or initialize it in some startup script (so that &quot;if (player.triedtowakeleslie = false)&quot; will have an attribute to check).<br/><br/>If you don't want to actually initialize the attribute, then just change your &quot;if&quot; to be &quot;if (GetBoolean(player, &quot;triedtowakeleslie&quot;) = false). GetBoolean will return false in the case the attribute has not yet been defined.<br/><br/>And you can replace &quot;if (player.triedtowakeleslie = false)&quot; with &quot;if (not player.triedtowakeleslie)&quot;, if you prefer the way that reads. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2016-01-20T12:12:26+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "40831",
      "UserId": 0,
      "Username": "H-Segher-G",
      "UserAvatar": null,
      "UserGravatar": "912673f33342c8c75a5becc9990b5384",
      "EditableText": "Ok! Thank you all very much for the help, I wasn't aware that a variable was local... So, I'm now using the attribute 'TheManager.triedtowake' and it's working perfectly. Thank you.\n\nAlthough I haven't used it here, XanMag, thanks for the alternate method, I'll bear it in mind as it might come in handy later on.",
      "EditableFormat": "bbcode",
      "HTML": "Ok! Thank you all very much for the help, I wasn't aware that a variable was local... So, I'm now using the attribute 'TheManager.triedtowake' and it's working perfectly. Thank you.<br/><br/>Although I haven't used it here, XanMag, thanks for the alternate method, I'll bear it in mind as it might come in handy later on.",
      "PostDate": "2016-01-20T19:59:31+00:00",
      "LastEditDate": null
    }
  ]
}
