{
  "Topic": {
    "TopicId": "fi7rs8pxxkmfgb6z2xk5eg",
    "ForumId": "10",
    "Title": "Unexpected error messages with nested Wait { }",
    "LastUpdated": "2018-04-22T10:10:10.5002147Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "ca8aebff-dfe7-425f-92a3-a77a5168a555",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "A game I'm working on has nested wait operations to release text in chunks. When I respond to a 'continue' with the space bar I sometimes get an error message:\r\n>Error running script: Only one wait can be in progress at a time.\r\n\r\nAnyone know why this happens and what I can do about it?",
      "EditableFormat": "markdown",
      "HTML": "<p>A game I'm working on has nested wait operations to release text in chunks. When I respond to a 'continue' with the space bar I sometimes get an error message:</p>\n<blockquote>\n<p>Error running script: Only one wait can be in progress at a time.</p>\n</blockquote>\n<p>Anyone know why this happens and what I can do about it?</p>\n\n",
      "PostDate": "2018-04-22T10:10:10.5002147Z",
      "LastEditDate": "2018-04-25T05:40:10.379247Z",
      "link": null
    },
    {
      "PostId": "4cf0498c-337e-4407-a6de-18b9423cd1db",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It means that Quest is still waiting for the first continue to be clicked when the second starts, which would suggest your `wait` blocks are not properly nested. Just guessing, but do you have more than two? I would see if the thord is properly nested in the second.",
      "EditableFormat": "markdown",
      "HTML": "<p>It means that Quest is still waiting for the first continue to be clicked when the second starts, which would suggest your <code>wait</code> blocks are not properly nested. Just guessing, but do you have more than two? I would see if the thord is properly nested in the second.</p>\n\n",
      "PostDate": "2018-04-22T11:11:03.6130807Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9284c0ea-563f-4dcf-b418-184f88a46d0e",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "As this is a transient error I'm assuming it is something to do with the way that Quest is preprocessing the code for execution and executing it in parallel with user input. I've simplified the structure and removed one of the waits, which seems to have made the problem go away!",
      "EditableFormat": "markdown",
      "HTML": "<p>As this is a transient error I'm assuming it is something to do with the way that Quest is preprocessing the code for execution and executing it in parallel with user input. I've simplified the structure and removed one of the waits, which seems to have made the problem go away!</p>\n\n",
      "PostDate": "2018-04-22T13:59:31.139544Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "51ca5b7f-a217-4836-b762-1991d57289b0",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is not properly nested, and will throw the error of which you speak:\r\n```\r\nmsg (\"hello\")\r\nwait {\r\n  msg (\"Hello\")\r\n}\r\nwait {\r\n  msg (\"HELLO!\")\r\n}\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/39096747-8585796e-4619-11e8-9742-9660f6df6d02.png)\r\n\r\n\r\n---\r\nThis is properly nested:\r\n\r\n```\r\nmsg (\"hello\")\r\nwait {\r\n  msg (\"Hello\")\r\n  wait {\r\n    msg (\"HELLO!\")\r\n  }\r\n}\r\n```\r\n\r\n<a href=\"https://user-images.githubusercontent.com/30656341/39096829-5d28f4b8-461a-11e8-94ef-866d986287ea.gif\"><img src=\"https://user-images.githubusercontent.com/30656341/39096829-5d28f4b8-461a-11e8-94ef-866d986287ea.gif\" loop/></a>",
      "EditableFormat": "markdown",
      "HTML": "<p>This is not properly nested, and will throw the error of which you speak:</p>\n<pre><code>msg (\"hello\")\nwait {\n  msg (\"Hello\")\n}\nwait {\n  msg (\"HELLO!\")\n}\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/39096747-8585796e-4619-11e8-9742-9660f6df6d02.png\" alt=\"image\"></p>\n<hr>\n<p>This is properly nested:</p>\n<pre><code>msg (\"hello\")\nwait {\n  msg (\"Hello\")\n  wait {\n    msg (\"HELLO!\")\n  }\n}\n</code></pre>\n<p><a href=\"https://user-images.githubusercontent.com/30656341/39096829-5d28f4b8-461a-11e8-94ef-866d986287ea.gif\"><img src=\"https://user-images.githubusercontent.com/30656341/39096829-5d28f4b8-461a-11e8-94ef-866d986287ea.gif\"></a></p>\n\n",
      "PostDate": "2018-04-22T15:46:54.9778766Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d86505de-1977-40a7-847d-a7db534774fd",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "other possibilities (though bad syntax/nesting is the most likely cause, unless you're trying to do looping - see below):\r\n\r\n1. you're looping, which just can't be done with waited-on-inputs from the player, be it 'wait', 'get input', 'show menu', or whatever else, unfortunately in quest)\r\n\r\n2. you're having scripts (which use the 'wait') running at the same time, such as maybe through using the special 'change' scripts.",
      "EditableFormat": "markdown",
      "HTML": "<p>other possibilities (though bad syntax/nesting is the most likely cause, unless you're trying to do looping - see below):</p>\n<ol>\n<li>\n<p>you're looping, which just can't be done with waited-on-inputs from the player, be it 'wait', 'get input', 'show menu', or whatever else, unfortunately in quest)</p>\n</li>\n<li>\n<p>you're having scripts (which use the 'wait') running at the same time, such as maybe through using the special 'change' scripts.</p>\n</li>\n</ol>\n\n",
      "PostDate": "2018-04-22T16:09:29.6564538Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6147ba04-a027-4e4b-80ed-92ff88e17db6",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Is this sort of code a problem as well? ...why does 'faulty code' not fail every time?\r\n```\r\nif (test) {\r\n    wait {...}\r\n }\r\n else {\r\n    wait {...}\r\n }\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Is this sort of code a problem as well? ...why does 'faulty code' not fail every time?</p>\n<pre><code>if (test) {\n    wait {...}\n }\n else {\n    wait {...}\n }\n</code></pre>\n\n",
      "PostDate": "2018-04-22T20:26:29.8732241Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1a7036d0-7a49-48b9-a97d-171bd7b4dcc2",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That should be fine.\r\n\r\nThe only reason for it only happening sometimes is that some of the code is only firing sometimes. This will fail if test is true, but will be fine if it is false:\r\n```\r\nif (test) {\r\n  wait {...}\r\n}\r\nwait {...}\r\n ",
      "EditableFormat": "markdown",
      "HTML": "<p>That should be fine.</p>\n<p>The only reason for it only happening sometimes is that some of the code is only firing sometimes. This will fail if test is true, but will be fine if it is false:</p>\n<pre><code>if (test) {\n  wait {...}\n}\nwait {...}\n \n</code></pre>\n\n",
      "PostDate": "2018-04-22T20:40:55.5739046Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fd0eae48-e470-456d-94dd-18939d42b353",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I keep hoping someone will say \"Hey, I've had that problem, here's what you do...\" I'm going to have to investigate to explain more about this issue. It does feel as if something is happening lower down over which I have no control and no knowledge. Back soon...",
      "EditableFormat": "markdown",
      "HTML": "<p>I keep hoping someone will say \"Hey, I've had that problem, here's what you do...\" I'm going to have to investigate to explain more about this issue. It does feel as if something is happening lower down over which I have no control and no knowledge. Back soon...</p>\n\n",
      "PostDate": "2018-04-24T06:53:41.9656284Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1d2e5f1d-3d6c-4685-be5d-6e24f72d90f2",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here is an example game that has your problem. If you look at the room, it will be okay, unless you are holding the teapot, in which case you will get your error message. The problem is in the \"description\" script of the room.\r\n\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"wait_error\">\r\n    <gameid>0f0486a9-e5b2-4f8a-abc3-1519b40c8737</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description type=\"script\">\r\n      msg (\"You look around the room...\")\r\n      if (Got(teapot)) {\r\n        wait {\r\n          msg (\"Even as you feel the weight of the teapot in your arms...\")\r\n        }\r\n      }\r\n      wait {\r\n        msg (\"... It's just a room.\")\r\n      }\r\n    </description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"teapot\">\r\n      <inherit name=\"editor_object\" />\r\n      <take />\r\n    </object>\r\n  </object>\r\n</asl>",
      "EditableFormat": "markdown",
      "HTML": "<p>Here is an example game that has your problem. If you look at the room, it will be okay, unless you are holding the teapot, in which case you will get your error message. The problem is in the \"description\" script of the room.</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"wait_error\"&gt;\n    &lt;gameid&gt;0f0486a9-e5b2-4f8a-abc3-1519b40c8737&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description type=\"script\"&gt;\n      msg (\"You look around the room...\")\n      if (Got(teapot)) {\n        wait {\n          msg (\"Even as you feel the weight of the teapot in your arms...\")\n        }\n      }\n      wait {\n        msg (\"... It's just a room.\")\n      }\n    &lt;/description&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"teapot\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;take /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2018-04-24T07:05:01.5079052Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "987d05fa-2bac-4cc8-bd99-529165585454",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here is test code that shows the problem...at least on my machine! \r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Nested Waits\">\r\n    <gameid>3b83f264-2b03-4ce5-8dac-95788bb3dfb7</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"wait responder\">\r\n      <inherit name=\"editor_object\" />\r\n      <dowait type=\"script\"><![CDATA[\r\n        msg (\"Start here...\")\r\n        wait {\r\n          msg (\"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. — That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, — That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn that mankind are more disposed to suffer, while evils are sufferable than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security. — Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.<br/>\")\r\n          wait {\r\n            msg (\"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. — That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, — That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn that mankind are more disposed to suffer, while evils are sufferable than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security. — Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.<br/>\")\r\n            wait {\r\n              msg (\"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. — That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, — That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn that mankind are more disposed to suffer, while evils are sufferable than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security. — Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.<br/>\")\r\n              wait {\r\n                msg (\"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. — That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, — That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn that mankind are more disposed to suffer, while evils are sufferable than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security. — Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.<br/>\")\r\n                wait {\r\n                  msg (\"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. — That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, — That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn that mankind are more disposed to suffer, while evils are sufferable than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security. — Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.<br/>\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      ]]></dowait>\r\n      <look>Code to illustrate nested wait problem.</look>\r\n    </object>\r\n  </object>\r\n  <verb>\r\n    <property>dowait</property>\r\n    <pattern>dowait</pattern>\r\n    <defaultexpression>\"You can't dowait \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n</asl>",
      "EditableFormat": "markdown",
      "HTML": "<p>Here is test code that shows the problem...at least on my machine!</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Nested Waits\"&gt;\n    &lt;gameid&gt;3b83f264-2b03-4ce5-8dac-95788bb3dfb7&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"wait responder\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;dowait type=\"script\"&gt;&lt;![CDATA[\n        msg (\"Start here...\")\n        wait {\n          msg (\"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. — That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, — That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn that mankind are more disposed to suffer, while evils are sufferable than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security. — Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.&lt;br/&gt;\")\n          wait {\n            msg (\"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. — That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, — That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn that mankind are more disposed to suffer, while evils are sufferable than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security. — Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.&lt;br/&gt;\")\n            wait {\n              msg (\"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. — That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, — That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn that mankind are more disposed to suffer, while evils are sufferable than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security. — Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.&lt;br/&gt;\")\n              wait {\n                msg (\"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. — That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, — That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn that mankind are more disposed to suffer, while evils are sufferable than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security. — Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.&lt;br/&gt;\")\n                wait {\n                  msg (\"We hold these truths to be self-evident, that all men are created equal, that they are endowed by their Creator with certain unalienable Rights, that among these are Life, Liberty and the pursuit of Happiness. — That to secure these rights, Governments are instituted among Men, deriving their just powers from the consent of the governed, — That whenever any Form of Government becomes destructive of these ends, it is the Right of the People to alter or to abolish it, and to institute new Government, laying its foundation on such principles and organizing its powers in such form, as to them shall seem most likely to effect their Safety and Happiness. Prudence, indeed, will dictate that Governments long established should not be changed for light and transient causes; and accordingly all experience hath shewn that mankind are more disposed to suffer, while evils are sufferable than to right themselves by abolishing the forms to which they are accustomed. But when a long train of abuses and usurpations, pursuing invariably the same Object evinces a design to reduce them under absolute Despotism, it is their right, it is their duty, to throw off such Government, and to provide new Guards for their future security. — Such has been the patient sufferance of these Colonies; and such is now the necessity which constrains them to alter their former Systems of Government. The history of the present King of Great Britain is a history of repeated injuries and usurpations, all having in direct object the establishment of an absolute Tyranny over these States. To prove this, let Facts be submitted to a candid world.&lt;br/&gt;\")\n                }\n              }\n            }\n          }\n        }\n      ]]&gt;&lt;/dowait&gt;\n      &lt;look&gt;Code to illustrate nested wait problem.&lt;/look&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;verb&gt;\n    &lt;property&gt;dowait&lt;/property&gt;\n    &lt;pattern&gt;dowait&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't dowait \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2018-04-24T07:29:10.8699896Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4d1af1ca-62fa-4df3-8b53-ece95b5e966c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Does it work if you changed the contents of the big messages?\r\nIf it only happens if you're displaying huge messages, maybe it could be some kind of timing issue or race condition?",
      "EditableFormat": "markdown",
      "HTML": "<p>Does it work if you changed the contents of the big messages?<br>\nIf it only happens if you're displaying huge messages, maybe it could be some kind of timing issue or race condition?</p>\n\n",
      "PostDate": "2018-04-24T08:05:32.9186502Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9c502792-0921-4b9f-84bb-6d6f246174e2",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I found it happening when there were several levels of nesting and quite a bit of text to display. I thought it might be due to hitting the space bar while text was being displayed but I found this code brought up the problem immediately though not every time! ...so it looks like a race condition issue.",
      "EditableFormat": "markdown",
      "HTML": "<p>I found it happening when there were several levels of nesting and quite a bit of text to display. I thought it might be due to hitting the space bar while text was being displayed but I found this code brought up the problem immediately though not every time! ...so it looks like a race condition issue.</p>\n\n",
      "PostDate": "2018-04-24T08:22:10.6986476Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a3ec9182-5bd1-48a2-908e-943cf545fae5",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "DavyB,\r\n\r\nYour example game throws no errors on my machine.\r\n\r\nI'm running Quest 5.7.2 on Windows 10.\r\n\r\n<a href=\"https://user-images.githubusercontent.com/30656341/39183880-1c1ef184-4787-11e8-8a4b-16657534ba93.gif\"><img src=\"https://user-images.githubusercontent.com/30656341/39183880-1c1ef184-4787-11e8-8a4b-16657534ba93.gif\" loop/></a>",
      "EditableFormat": "markdown",
      "HTML": "<p>DavyB,</p>\n<p>Your example game throws no errors on my machine.</p>\n<p>I'm running Quest 5.7.2 on Windows 10.</p>\n<p><a href=\"https://user-images.githubusercontent.com/30656341/39183880-1c1ef184-4787-11e8-8a4b-16657534ba93.gif\"><img src=\"https://user-images.githubusercontent.com/30656341/39183880-1c1ef184-4787-11e8-8a4b-16657534ba93.gif\"></a></p>\n\n",
      "PostDate": "2018-04-24T11:17:49.7238068Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "897cbfbd-9f56-4f97-bc07-65f621dfbe37",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I keep hoping someone will say \"Hey, I've had that problem, here's what you do...\"\r\n\r\nHey, I've had that problem!\r\n\r\nHere's what I do: http://textadventures.co.uk/forum/quest/topic/fi7rs8pxxkmfgb6z2xk5eg/unexpected-error-messages-with-nested-wait#51ca5b7f-a217-4836-b762-1991d57289b0\r\n\r\n\r\n...but that is what you did in your example game, and your example works on my machine...\r\n\r\nHave you tested your example game to make sure it throws errors?  Or did you just assume it would?  (I only ask because I make such assumptions quite frequently, only to find that I failed to recreate the error.)\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I keep hoping someone will say \"Hey, I've had that problem, here's what you do...\"</p>\n</blockquote>\n<p>Hey, I've had that problem!</p>\n<p>Here's what I do: http://textadventures.co.uk/forum/quest/topic/fi7rs8pxxkmfgb6z2xk5eg/unexpected-error-messages-with-nested-wait#51ca5b7f-a217-4836-b762-1991d57289b0</p>\n<p>...but that is what you did in your example game, and your example works on my machine...</p>\n<p>Have you tested your example game to make sure it throws errors?  Or did you just assume it would?  (I only ask because I make such assumptions quite frequently, only to find that I failed to recreate the error.)</p>\n\n",
      "PostDate": "2018-04-24T11:20:58.0451662Z",
      "LastEditDate": "2018-04-24T11:42:41.3119891Z",
      "link": null
    },
    {
      "PostId": "afe7dde0-2171-4204-88a7-694ca2a6bb2f",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi KV, that game fails on my machine quite consistently. I'm running Windows 8. It fails in different ways in different places. I made Quest hang up completely at one point and needed to use the Task Manager to stop it! I can try it on Windows 7...",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi KV, that game fails on my machine quite consistently. I'm running Windows 8. It fails in different ways in different places. I made Quest hang up completely at one point and needed to use the Task Manager to stop it! I can try it on Windows 7...</p>\n\n",
      "PostDate": "2018-04-24T12:35:43.4331802Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c5a28c3b-fede-4cf9-b645-8f526feb8a3b",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "...yes, I can get it to fail under Windows 7 as well. Have you tried hitting the space bar while text is being displayed? i.e. not waiting for the _continue_ to appear?",
      "EditableFormat": "markdown",
      "HTML": "<p>...yes, I can get it to fail under Windows 7 as well. Have you tried hitting the space bar while text is being displayed? i.e. not waiting for the <em>continue</em> to appear?</p>\n\n",
      "PostDate": "2018-04-24T12:48:04.970824Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4988ce7d-3ac5-4138-b7d7-c70198bfaf5f",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">  Have you tried hitting the space bar while text is being displayed?\r\n\r\nI just spammed the spacebar all the way through it.  No errors here. \r\n\r\nI'm going to try on my Windows 7 machine.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Have you tried hitting the space bar while text is being displayed?</p>\n</blockquote>\n<p>I just spammed the spacebar all the way through it.  No errors here.</p>\n<p>I'm going to try on my Windows 7 machine.</p>\n\n",
      "PostDate": "2018-04-24T12:50:08.1384214Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "65089f6b-7615-407c-a9f6-3c0000149c10",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "No errors using Windows 7 on my end, either.",
      "EditableFormat": "markdown",
      "HTML": "<p>No errors using Windows 7 on my end, either.</p>\n\n",
      "PostDate": "2018-04-24T13:02:10.3417352Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3bed6e5f-ca5b-43a2-bdef-bb6352c32058",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Hi KV, that game fails on my machine quite consistently. I'm running Windows 8. \r\n\r\nThis is referencing the example game that you just posted, correct?\r\n\r\n> It fails in different ways in different places.\r\n\r\nWhich different ways in which different places?\r\n\r\nI can only find one way to trigger the script.  From there, I can either click the link (which is error-free on my end) or press any key (which is error-free on my end).\r\n\r\n---\r\nI'm not implying that you have an imaginary problem or anything.  I just can't recreate the error, and I wanted to see it so I could help.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Hi KV, that game fails on my machine quite consistently. I'm running Windows 8.</p>\n</blockquote>\n<p>This is referencing the example game that you just posted, correct?</p>\n<blockquote>\n<p>It fails in different ways in different places.</p>\n</blockquote>\n<p>Which different ways in which different places?</p>\n<p>I can only find one way to trigger the script.  From there, I can either click the link (which is error-free on my end) or press any key (which is error-free on my end).</p>\n<hr>\n<p>I'm not implying that you have an imaginary problem or anything.  I just can't recreate the error, and I wanted to see it so I could help.</p>\n\n",
      "PostDate": "2018-04-24T13:06:33.9837973Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9732d26c-7710-4fc3-ac18-0c6e85ee9d60",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "KV, I've sent a screen shot to you by gmail. Couldn't seem to paste it here?\r\n\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>KV, I've sent a screen shot to you by gmail. Couldn't seem to paste it here?</p>\n\n",
      "PostDate": "2018-04-24T13:25:21.9118328Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9647a9c6-8828-4f40-b575-e1701e803071",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Got the screenshot.\r\n\r\nIt looks like that is being clicked more than once in the pane.  Each click starts the script from the beginning instead of ending the wait.\r\n\r\n---\r\nIn **playercore.js**, in the initial function, in the bit of code starting on line 97:\r\n\r\nI changed the onclick script for the elementmenu class to avoid the error when clicking on something in the pane during a wait:\r\n\r\n```\r\n    $(document).on(\"click\", \".elementmenu\", function (event) {\r\n            // KV added this check for wait mode\r\n            if(_waitMode){\r\n                endWait();\r\n                return;\r\n\t    }\r\n            // END OF ADDITION BY KV\r\n\t    if (!$(this).hasClass(\"disabled\")) {\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            $(this).jjmenu_popup();\r\n            $(this).blur();\r\n            return false;\r\n        }\r\n    });\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Got the screenshot.</p>\n<p>It looks like that is being clicked more than once in the pane.  Each click starts the script from the beginning instead of ending the wait.</p>\n<hr>\n<p>In <strong>playercore.js</strong>, in the initial function, in the bit of code starting on line 97:</p>\n<p>I changed the onclick script for the elementmenu class to avoid the error when clicking on something in the pane during a wait:</p>\n<pre><code>    $(document).on(\"click\", \".elementmenu\", function (event) {\n            // KV added this check for wait mode\n            if(_waitMode){\n                endWait();\n                return;\n\t    }\n            // END OF ADDITION BY KV\n\t    if (!$(this).hasClass(\"disabled\")) {\n            event.preventDefault();\n            event.stopPropagation();\n            $(this).jjmenu_popup();\n            $(this).blur();\n            return false;\n        }\n    });\n</code></pre>\n\n",
      "PostDate": "2018-04-24T13:59:57.8381642Z",
      "LastEditDate": "2018-04-24T14:01:26.4297556Z",
      "link": null
    },
    {
      "PostId": "e33eb98a-7207-4913-a4fa-f2bf256915b7",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I also just noticed that pressing ENTER while a button in the pane is selected has a different effect than clicking it!\r\n\r\nThis will cause the error, too!!!\r\n\r\nBe right back!",
      "EditableFormat": "markdown",
      "HTML": "<p>I also just noticed that pressing ENTER while a button in the pane is selected has a different effect than clicking it!</p>\n<p>This will cause the error, too!!!</p>\n<p>Be right back!</p>\n\n",
      "PostDate": "2018-04-24T14:04:39.4730313Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "67fbf723-35c7-41da-beb6-bc12b95a7216",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay...\r\n\r\nWhen clicking on a button in the pane, the button remains selected.  Then, pressing enter \"clicks\" that button, but it doesn't seem to be handled as an actual click.  Something to do with submitting forms I think...",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay...</p>\n<p>When clicking on a button in the pane, the button remains selected.  Then, pressing enter \"clicks\" that button, but it doesn't seem to be handled as an actual click.  Something to do with submitting forms I think...</p>\n\n",
      "PostDate": "2018-04-24T14:22:08.5441279Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e39bd225-bae9-4696-ac0c-5636e37d3e6b",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Just to summarise my understanding so far. If a player waits for continue to appear and clicks on it, all is fine. Hitting any key should also work and I'd become used to hitting the space bar instead of clicking. Failures can sometimes occur in that situation if the space bar is pushed before the next continue appears. Experimenting, I find that hitting most keys is also fine but return is a problem as well as the space bar. I guess this hasn't come up before because most players patiently wait to click 'continue'!",
      "EditableFormat": "markdown",
      "HTML": "<p>Just to summarise my understanding so far. If a player waits for continue to appear and clicks on it, all is fine. Hitting any key should also work and I'd become used to hitting the space bar instead of clicking. Failures can sometimes occur in that situation if the space bar is pushed before the next continue appears. Experimenting, I find that hitting most keys is also fine but return is a problem as well as the space bar. I guess this hasn't come up before because most players patiently wait to click 'continue'!</p>\n\n",
      "PostDate": "2018-04-24T14:40:59.654814Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f2b52b43-aef9-4534-98e6-ef06d4927737",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Alrighty...\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/39194671-dd29790a-47a3-11e8-9c87-dfac2568008e.png)\r\n\r\n---\r\n\r\nWhen clicking on \"dowait\" in the pane under 'wait responder', the button stays selected.  Pressing a key afterwards caused that to somehow simulate a button click which onclick couldn't prevent.  So, I added code to take the focus off of a ui-button on clicking it.\r\n\r\n```$('.ui-button').on(\"click\",function(e){$(this).blur();if (_waitMode){endWait();e.preventDefault;e.stopPropagation;}});```\r\n\r\nThat works as long as the player doesn't use tab to select the button.\r\n\r\nThis keeps the player from selecting a button during a wait:\r\n\r\n```$('.ui-button').on(\"focus\",function(e){if (_waitMode){$(this).blur();}});```\r\n\r\n\r\n\r\nSo, I put it all together, and add this line to game.inituserinterface:\r\n\r\n```\r\nJS.eval (\"$(document).on(\\\"click\\\", \\\".elementmenu\\\", function (event) {if(_waitMode){endWait();return;}if (!$(this).hasClass(\\\"disabled\\\")) {event.preventDefault();event.stopPropagation();$(this).jjmenu_popup();$(this).blur();return false;}});$('.ui-button').on(\\\"click\\\",function(e){$(this).blur();if (_waitMode){endWait();e.preventDefault;e.stopPropagation;}});$('.ui-button').on(\\\"focus\\\",function(e){if (_waitMode){$(this).blur();}});\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Alrighty...</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/39194671-dd29790a-47a3-11e8-9c87-dfac2568008e.png\" alt=\"image\"></p>\n<hr>\n<p>When clicking on \"dowait\" in the pane under 'wait responder', the button stays selected.  Pressing a key afterwards caused that to somehow simulate a button click which onclick couldn't prevent.  So, I added code to take the focus off of a ui-button on clicking it.</p>\n<p><code>$('.ui-button').on(\"click\",function(e){$(this).blur();if (_waitMode){endWait();e.preventDefault;e.stopPropagation;}});</code></p>\n<p>That works as long as the player doesn't use tab to select the button.</p>\n<p>This keeps the player from selecting a button during a wait:</p>\n<p><code>$('.ui-button').on(\"focus\",function(e){if (_waitMode){$(this).blur();}});</code></p>\n<p>So, I put it all together, and add this line to game.inituserinterface:</p>\n<pre><code>JS.eval (\"$(document).on(\\\"click\\\", \\\".elementmenu\\\", function (event) {if(_waitMode){endWait();return;}if (!$(this).hasClass(\\\"disabled\\\")) {event.preventDefault();event.stopPropagation();$(this).jjmenu_popup();$(this).blur();return false;}});$('.ui-button').on(\\\"click\\\",function(e){$(this).blur();if (_waitMode){endWait();e.preventDefault;e.stopPropagation;}});$('.ui-button').on(\\\"focus\\\",function(e){if (_waitMode){$(this).blur();}});\")\n</code></pre>\n\n",
      "PostDate": "2018-04-24T14:52:25.6902938Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8a5e2f42-c4c2-4540-a1c2-9d8f3ae6b6c1",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks KV, all now seems perfect. Will that code be in the next release?",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks KV, all now seems perfect. Will that code be in the next release?</p>\n\n",
      "PostDate": "2018-04-24T15:12:44.8534688Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d7247e7c-62ed-4f1b-a533-24c7b7034f0d",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It works!\r\n\r\nAwesome!\r\n\r\n---\r\nThat's definitely a bug.   I think something that has the same effect will probably be added. (Pixie will probably know a better (or more efficient) way to handle it.)",
      "EditableFormat": "markdown",
      "HTML": "<p>It works!</p>\n<p>Awesome!</p>\n<hr>\n<p>That's definitely a bug.   I think something that has the same effect will probably be added. (Pixie will probably know a better (or more efficient) way to handle it.)</p>\n\n",
      "PostDate": "2018-04-24T18:35:07.994422Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b4f315bb-45df-424d-a2a1-dbb092b449ec",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay, for the moment I can slot that code into games as a workaround. Thanks for your help.",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay, for the moment I can slot that code into games as a workaround. Thanks for your help.</p>\n\n",
      "PostDate": "2018-04-24T19:16:17.8448956Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2df48908-98ec-45e6-9bb7-b3539620ef82",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That looks like quite an ugly workaround to me :S You're using script to move the focus off the buttons, rather than actually disabling the buttons. I *think* the error might still occur if a Timeout event (in Quest or in Javascript) starts a 'wait' while the player is clicking the verb button, before they release the mouse.\r\n\r\nWouldn't changing the verb buttons so they can't be clicked be more efficient? Or have I missed something? My first instinct would be to try changing the function that handles the click.\r\n```\r\nfunction paneButtonClick(target, button) {\r\n    if (_waitMode) return;\r\n```\r\n(followed by the rest of that function as it is)",
      "EditableFormat": "markdown",
      "HTML": "<p>That looks like quite an ugly workaround to me :S You're using script to move the focus off the buttons, rather than actually disabling the buttons. I <em>think</em> the error might still occur if a Timeout event (in Quest or in Javascript) starts a 'wait' while the player is clicking the verb button, before they release the mouse.</p>\n<p>Wouldn't changing the verb buttons so they can't be clicked be more efficient? Or have I missed something? My first instinct would be to try changing the function that handles the click.</p>\n<pre><code>function paneButtonClick(target, button) {\n    if (_waitMode) return;\n</code></pre>\n<p>(followed by the rest of that function as it is)</p>\n\n",
      "PostDate": "2018-04-24T19:48:12.4300955Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "edf9784c-4066-4f0d-a194-ae7bdf4df7d6",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That sounds more efficient, but it still doesn't keep the ENTER button from sending a click through while the button is selected.\r\n\r\n<a href=\"https://user-images.githubusercontent.com/30656341/39215967-8811cac6-47df-11e8-9d2e-2da8e9fc584a.gif\"><img src=\"https://user-images.githubusercontent.com/30656341/39215967-8811cac6-47df-11e8-9d2e-2da8e9fc584a.gif\" width=\"70%\" loop/></a>",
      "EditableFormat": "markdown",
      "HTML": "<p>That sounds more efficient, but it still doesn't keep the ENTER button from sending a click through while the button is selected.</p>\n<p><a href=\"https://user-images.githubusercontent.com/30656341/39215967-8811cac6-47df-11e8-9d2e-2da8e9fc584a.gif\"><img src=\"https://user-images.githubusercontent.com/30656341/39215967-8811cac6-47df-11e8-9d2e-2da8e9fc584a.gif\" width=\"70%\"></a></p>\n\n",
      "PostDate": "2018-04-24T21:51:06.6574856Z",
      "LastEditDate": "2018-04-24T21:52:13.4121041Z",
      "link": null
    },
    {
      "PostId": "7af81934-c683-404e-a1a6-cadfe291af7b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK, I don't understand that.\r\n\r\nDoes pressing enter on a verb button not call paneButtonClick?\r\n\r\nEDIT: No, I don't get this at all.\r\nClicking the verb buttons calls paneButtonClick; which extracts the selected object name and the verb name, composes them into a command, and calls `sendCommand()`.\r\n\r\nWhich should then return without doing anything if `_waitMode` is true.\r\nAll the functions which actually pass data back to the server check _waitMode first, ensuring that no clicks get back to the server while waiting.\r\n (... actually, only true in the web version. I assume the desktop version performs this check somewhere else?)",
      "EditableFormat": "markdown",
      "HTML": "<p>OK, I don't understand that.</p>\n<p>Does pressing enter on a verb button not call paneButtonClick?</p>\n<p>EDIT: No, I don't get this at all.<br>\nClicking the verb buttons calls paneButtonClick; which extracts the selected object name and the verb name, composes them into a command, and calls <code>sendCommand()</code>.</p>\n<p>Which should then return without doing anything if <code>_waitMode</code> is true.<br>\nAll the functions which actually pass data back to the server check _waitMode first, ensuring that no clicks get back to the server while waiting.<br>\n(... actually, only true in the web version. I assume the desktop version performs this check somewhere else?)</p>\n\n",
      "PostDate": "2018-04-24T23:01:47.5582156Z",
      "LastEditDate": "2018-04-24T23:17:53.2762666Z",
      "link": null
    },
    {
      "PostId": "8c2fd3d4-91b2-4194-89ec-dbcbe88f8624",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Seems to be doing the same in desktop version.  It's confused me as well.\r\n\r\nI tried onkeypress on everything, but to no avail. That's why I broke down and used onfocus to blur the damned button.",
      "EditableFormat": "markdown",
      "HTML": "<p>Seems to be doing the same in desktop version.  It's confused me as well.</p>\n<p>I tried onkeypress on everything, but to no avail. That's why I broke down and used onfocus to blur the damned button.</p>\n\n",
      "PostDate": "2018-04-25T02:11:23.6477507Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cb946653-f99d-4e75-842b-34ee4f76123d",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Aha!  You led me to the problem, mrangel!\r\n\r\n```sendCommand()``` doesn't check for ```_waitMode``` in **desktopplayer.js**!\r\n\r\nThis seems to do the trick:\r\n\r\n```\r\nJS.eval (\"function sendCommand(text, metadata) { if(_waitMode){endWait();return;}   markScrollPosition();    var data = new Object();    data[\\\"command\\\"] = text;    if (typeof metadata != \\\"undefined\\\") {        data[\\\"metadata\\\"] = metadata;    }    UIEvent(\\\"RunCommand\\\", JSON.stringify(data));}\")\r\n```\r\n\r\n---\r\nThe same thing in actual Javascript:\r\n\r\n\r\n```\r\nfunction sendCommand(text, metadata) { \r\n    // Added by KV\r\n    if(_waitMode){\r\n        endWait();\r\n        return;\r\n    }\r\n    // END OF ADDITION BY KV\r\n    markScrollPosition();\r\n    var data = new Object();\r\n    data[\"command\"] = text;\r\n    if (typeof metadata != \"undefined\") {\r\n        data[\"metadata\"] = metadata;\r\n    }\r\n    UIEvent(\"RunCommand\", JSON.stringify(data));\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Aha!  You led me to the problem, mrangel!</p>\n<p><code>sendCommand()</code> doesn't check for <code>_waitMode</code> in <strong>desktopplayer.js</strong>!</p>\n<p>This seems to do the trick:</p>\n<pre><code>JS.eval (\"function sendCommand(text, metadata) { if(_waitMode){endWait();return;}   markScrollPosition();    var data = new Object();    data[\\\"command\\\"] = text;    if (typeof metadata != \\\"undefined\\\") {        data[\\\"metadata\\\"] = metadata;    }    UIEvent(\\\"RunCommand\\\", JSON.stringify(data));}\")\n</code></pre>\n<hr>\n<p>The same thing in actual Javascript:</p>\n<pre><code>function sendCommand(text, metadata) { \n    // Added by KV\n    if(_waitMode){\n        endWait();\n        return;\n    }\n    // END OF ADDITION BY KV\n    markScrollPosition();\n    var data = new Object();\n    data[\"command\"] = text;\n    if (typeof metadata != \"undefined\") {\n        data[\"metadata\"] = metadata;\n    }\n    UIEvent(\"RunCommand\", JSON.stringify(data));\n}\n</code></pre>\n\n",
      "PostDate": "2018-04-25T02:29:17.4346842Z",
      "LastEditDate": "2018-04-25T02:34:57.3506799Z",
      "link": null
    },
    {
      "PostId": "8d7d0647-24f1-4065-aabf-b37f1d10bebf",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "...I've taken away [SOLVED] while the discussion continues... :)",
      "EditableFormat": "markdown",
      "HTML": "<p>...I've taken away [SOLVED] while the discussion continues... :)</p>\n\n",
      "PostDate": "2018-04-25T05:42:23.4914085Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d88fe495-72bc-4ffc-9790-36c338a883cd",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If it were up to me (and no one pointed out any flaws), I would have this:\r\n\r\n```\r\n$(window).on('keydown',function(e){\r\n    if(_waitMode){\r\n    \tendWait();\r\n    \te.preventDefault();\r\n    \te.stopPropagation();\r\n    }\r\n});\r\n\r\n$(window).on('click',function(e){\r\n    if(_waitMode){\r\n    \tendWait();\r\n    \te.preventDefault();\r\n    \te.stopPropagation();\r\n    }\r\n});\r\n```\r\n\r\n---\r\nAny button press or any click anywhere in the window will run```endWait()``` with this setup.  I've tested it out, and I can't see that it breaks anything.  Plus, you can hit Enter or the spacebar while that button is in focus, and it doesn't throw the error.",
      "EditableFormat": "markdown",
      "HTML": "<p>If it were up to me (and no one pointed out any flaws), I would have this:</p>\n<pre><code>$(window).on('keydown',function(e){\n    if(_waitMode){\n    \tendWait();\n    \te.preventDefault();\n    \te.stopPropagation();\n    }\n});\n\n$(window).on('click',function(e){\n    if(_waitMode){\n    \tendWait();\n    \te.preventDefault();\n    \te.stopPropagation();\n    }\n});\n</code></pre>\n<hr>\n<p>Any button press or any click anywhere in the window will run<code>endWait()</code> with this setup.  I've tested it out, and I can't see that it breaks anything.  Plus, you can hit Enter or the spacebar while that button is in focus, and it doesn't throw the error.</p>\n\n",
      "PostDate": "2018-04-25T07:37:24.9841005Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "308fa6eb-7bf6-4c09-8553-41ed1e626e40",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That looks AND feels good. I've also tried it out and don't see any issues. You must be close to an optimal solution KV!",
      "EditableFormat": "markdown",
      "HTML": "<p>That looks AND feels good. I've also tried it out and don't see any issues. You must be close to an optimal solution KV!</p>\n\n",
      "PostDate": "2018-04-25T10:36:38.0373676Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cb37fea4-c486-4437-9569-bcfe3d634abc",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm not sure that catching all clicks is a good thing.\r\nWould that mean that if you click the label of the inventory pane, for example, it would end the wait instead of expanding/collapsing the pane? Will clicking the scroll bar (as if anyone still uses that) end a wait?\r\n\r\nI can imagine situations where the game gives you a \"Continue ...\" button before starting a timed puzzle; in which case players might still want to show the compass and inventory, and even select the relevant item in the inventory to save a second or two. I'd expect that to be supported; only triggering the 'continue' when you actually try to do something.\r\n\r\nDifferent players might have different expectations, but I would expect that a \"Continue...\" link would block me from taking any game actions. I wouldn't expect it to be dismissed by clicking on display elements that don't correspond to any activity by the player character.\r\n\r\n(haven't tested it yet, but I'm also curious how this would interact with my drag-and-dock panes script)",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm not sure that catching all clicks is a good thing.<br>\nWould that mean that if you click the label of the inventory pane, for example, it would end the wait instead of expanding/collapsing the pane? Will clicking the scroll bar (as if anyone still uses that) end a wait?</p>\n<p>I can imagine situations where the game gives you a \"Continue ...\" button before starting a timed puzzle; in which case players might still want to show the compass and inventory, and even select the relevant item in the inventory to save a second or two. I'd expect that to be supported; only triggering the 'continue' when you actually try to do something.</p>\n<p>Different players might have different expectations, but I would expect that a \"Continue...\" link would block me from taking any game actions. I wouldn't expect it to be dismissed by clicking on display elements that don't correspond to any activity by the player character.</p>\n<p>(haven't tested it yet, but I'm also curious how this would interact with my drag-and-dock panes script)</p>\n\n",
      "PostDate": "2018-04-25T11:05:49.4771034Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "86a3f037-ae33-46da-a7d9-76fc0872fe43",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The clicks and keypresses already either end the wait, cause errors, or simply don't work when ```_waitMode``` is true.\r\n\r\nIs ```_waitMode``` ever true without an author initiating it to pause play?",
      "EditableFormat": "markdown",
      "HTML": "<p>The clicks and keypresses already either end the wait, cause errors, or simply don't work when <code>_waitMode</code> is true.</p>\n<p>Is <code>_waitMode</code> ever true without an author initiating it to pause play?</p>\n\n",
      "PostDate": "2018-04-25T11:50:24.2018995Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2a918274-00a5-486d-b7c1-0deb63b091ee",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Would that mean that if you click the label of the inventory pane, for example, it would end the wait instead of expanding/collapsing the pane? \r\n\r\nGood point!\r\n\r\n---\r\n> Will clicking the scroll bar (as if anyone still uses that) end a wait?\r\n\r\nIt didn't, but I had to test it to make sure!\r\n\r\n\r\n> I can imagine situations where the game gives you a \"Continue ...\" button before starting a timed puzzle; in which case players might still want to show the compass and inventory, and even select the relevant item in the inventory to save a second or two. I'd expect that to be supported; only triggering the 'continue' when you actually try to do something.\r\n\r\nVery good thinking!\r\n\r\n\r\n```\r\n$(window).on('keydown',function(e){\r\n    if(_waitMode){\r\n    \tendWait();\r\n    \te.preventDefault();\r\n    \te.stopPropagation();\r\n    }\r\n});\r\n\r\n$('#divOutuput').on('click',function(e){\r\n    if(_waitMode){\r\n    \tendWait();\r\n    \te.preventDefault();\r\n    \te.stopPropagation();\r\n    }\r\n});\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Would that mean that if you click the label of the inventory pane, for example, it would end the wait instead of expanding/collapsing the pane?</p>\n</blockquote>\n<p>Good point!</p>\n<hr>\n<blockquote>\n<p>Will clicking the scroll bar (as if anyone still uses that) end a wait?</p>\n</blockquote>\n<p>It didn't, but I had to test it to make sure!</p>\n<blockquote>\n<p>I can imagine situations where the game gives you a \"Continue ...\" button before starting a timed puzzle; in which case players might still want to show the compass and inventory, and even select the relevant item in the inventory to save a second or two. I'd expect that to be supported; only triggering the 'continue' when you actually try to do something.</p>\n</blockquote>\n<p>Very good thinking!</p>\n<pre><code>$(window).on('keydown',function(e){\n    if(_waitMode){\n    \tendWait();\n    \te.preventDefault();\n    \te.stopPropagation();\n    }\n});\n\n$('#divOutuput').on('click',function(e){\n    if(_waitMode){\n    \tendWait();\n    \te.preventDefault();\n    \te.stopPropagation();\n    }\n});\n</code></pre>\n\n",
      "PostDate": "2018-04-25T12:24:58.8858062Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "159fe3cf-bb62-4d3e-9a00-c3af5c15bfa3",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Did this fix end up in 5.8? I don't see it mentioned. Happy to continue with the patch but obviously better if I can leave it out.",
      "EditableFormat": "markdown",
      "HTML": "<p>Did this fix end up in 5.8? I don't see it mentioned. Happy to continue with the patch but obviously better if I can leave it out.</p>\n\n",
      "PostDate": "2018-06-04T20:57:46.1282209Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3859f220-cb98-404d-aefc-b2dec52c7266",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I don't think it was added (not 100% sure, though).",
      "EditableFormat": "markdown",
      "HTML": "<p>I don't think it was added (not 100% sure, though).</p>\n\n",
      "PostDate": "2018-06-04T21:54:20.5186464Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c417ab63-dfe9-41c1-b6bd-07a1b3c43add",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "For online authors (or desktop authors) who want to experiment with this, you can add this to your User Interface Initialisation script:\r\n\r\n```\r\n// Apply WAIT fix\r\nJS.eval(\"$(window).on('keydown',function(e){     if(_waitMode){     \tendWait();     \te.preventDefault();     \te.stopPropagation();     } });  $('#divOutuput').on('click',function(e){     if(_waitMode){     \tendWait();     \te.preventDefault();     \te.stopPropagation();     } });\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>For online authors (or desktop authors) who want to experiment with this, you can add this to your User Interface Initialisation script:</p>\n<pre><code>// Apply WAIT fix\nJS.eval(\"$(window).on('keydown',function(e){     if(_waitMode){     \tendWait();     \te.preventDefault();     \te.stopPropagation();     } });  $('#divOutuput').on('click',function(e){     if(_waitMode){     \tendWait();     \te.preventDefault();     \te.stopPropagation();     } });\")\n</code></pre>\n\n",
      "PostDate": "2018-06-05T01:21:37.3090361Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
