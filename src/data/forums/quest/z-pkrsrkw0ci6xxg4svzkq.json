{
  "Topic": {
    "TopicId": "z-pkrsrkw0ci6xxg4svzkq",
    "ForumId": "10",
    "Title": "I Need Professional Help With This One!",
    "LastUpdated": "2018-10-06T11:58:30.0300892Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "ffb3c884-c638-473e-994a-86ed172ca6a5",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is the last major issue I'm trying to resolve before uploading my Map Demo 2.0.  This involves KV's Grid Image library with accompanying js script, which together display image files for each room on the map.\r\n\r\nIn short, when restoring a saved game, it takes way too long, depending on how much of the explored map is being restored.  If only a quarter of the map has been explored, reloading is pretty fast.  If half of the map needs to be reloaded, it takes several seconds.  But if the whole map needs to be reloaded, it takes up to a minute and a half!  So reloading time is exponential, not linear!\r\n\r\nThe entire map is about 400 rooms, each with its own grid image.  I'm pretty sure that the problem lies in the accumulating image files that have to be reloaded.  But because of the exponential reloading time, it's possible that image files are somehow being \"cached\" unnecessarily -- this was, in fact, an issue that had occurred before that KV tried to fix, but it's possible that he only partially fixed it (I have indicated, under \"GridImageLib.js (js script)\", the lines of code where he addressed this).\r\n\r\nTo be sure, I have reduced all of the image file sizes.  Strangely, this seems to make no difference in reloading time.\r\n\r\nKV's grid image code consists of 2 parts: GridImageLib.aslx (library), and GridImageLib.js (js script).  The library also modifies the built-in Grid_DrawRoom function.  Loading the grid images starts with calling the SetupGridImages function (located near the bottom of the library), which is done once in the Start tab in a new game, and once in the InitUI tab in a restored game (so only once in either a new or restored game).\r\n\r\n<details>\r\n<summary>GridImageLib.aslx (library)</summary>\r\n\r\n```\r\n<library>\r\n  \r\n\t<function name=\"SetGridImgPath\" parameters=\"filename\">\r\n\t\tJS.setImagePath (GetFileUrl(\"_FILENAME_\"))\r\n\t</function>\r\n  \r\n\t<function name=\"Grid_DrawRoom\" parameters=\"room, redraw, playerobject\"><![CDATA[\r\n\t\tif (room.grid_render) {\r\n\t\t  if (redraw or not Grid_GetRoomBooleanForPlayer(playerobject, room, \"grid_isdrawn\")) {\r\n\t\t\tif (room.parent <> null) {\r\n\t\t\t  Grid_DrawRoom (room.parent, redraw, playerobject)\r\n\t\t\t}\r\n\r\n// +++++++++++++++ THE ONLY CHANGES KV MADE TO GRID_DRAWROOM START HERE +++++++++++++++++\r\n\t\t\tgridx = Grid_GetGridCoordinateForPlayer(game.pov, room, \"x\")\r\n\t\t\tgridy = Grid_GetGridCoordinateForPlayer(game.pov, room, \"y\")\r\n\t\t\tJS.Grid_DrawBox (gridx, gridy, Grid_GetGridCoordinateForPlayer(game.pov, room, \"z\"), room.grid_width, room.grid_length, room.grid_border, room.grid_borderwidth, room.grid_fill, room.grid_bordersides)\r\n\t\t\tif (HasString(room, \"grid_image\")) {\r\n\t\t\t  imgfile = false\r\n\t\t\t  imgexts = Split(\".png;.jpeg;.gif;.jpg;svg\",\";\")\r\n\t\t\t  room.imageid = room.name+\"-grid-image\"\r\n\t\t\t  JS.eval (\"var roomImageId = '\"+room.imageid+\"';var gridX = '\"+gridx+\"';var gridY = '\"+gridy+\"';var roomGridWidth = '\"+room.grid_width+\"';var roomGridHeight = '\"+room.grid_length+\"';customDrawImage('\"+room.grid_image+\"');\")\r\n\t\t\t}\r\n// +++++++++++++++ THE ONLY CHANGES KV MADE TO GRID_DRAWROOM END HERE +++++++++++++++++\r\n\r\n\t\t\tif (LengthOf(room.grid_label) > 0) {\r\n\t\t\t  label_x = Grid_GetGridCoordinateForPlayer(game.pov, room, \"x\") + room.grid_width/2.0\r\n\t\t\t  label_y = (Grid_GetGridCoordinateForPlayer(game.pov, room, \"y\") + room.grid_length/2.0) - 0.5\r\n\t\t\t  JS.Grid_DrawLabel (label_x, label_y, Grid_GetGridCoordinateForPlayer(game.pov, room, \"z\"), room.grid_label, room.grid_label_colour)\r\n\t\t\t}\r\n\t\t\tforeach (exit, AllExits()) {\r\n\t\t\t  if (exit.grid_render and exit.parent = room and exit.grid_length > 0) {\r\n\t\t\t\tGrid_DrawLine (Grid_GetGridCoordinateForPlayer(game.pov, exit, \"x\"), Grid_GetGridCoordinateForPlayer(game.pov, exit, \"y\"), Grid_GetGridCoordinateForPlayer(game.pov, exit, \"end_x\"), Grid_GetGridCoordinateForPlayer(game.pov, exit, \"end_y\"), game.mapexitcolour, game.mapexitwidth)\r\n\t\t\t  }\r\n\t\t\t}\r\n\t\t\tGrid_SetRoomBooleanForPlayer (playerobject, room, \"grid_isdrawn\", true)\r\n\t\t  }\r\n\t\t}\r\n\t]]></function>\r\n    \r\n  <function name=\"FinishTurn\">\r\n    if (HasAttribute(game,\"runturnscripts\")) {\r\n      if (GetBoolean(game,\"runturnscripts\")) {\r\n\t    if (not GetBoolean(game, \"suppressturnscripts\")) {\r\n\t  \t  RunTurnScripts\r\n\t\t  game.runturnscripts = false\r\n\t    }\r\n\t  }\r\n\t}\r\n\telse {\r\n\t  if (not GetBoolean(game, \"suppressturnscripts\")) {\r\n\t  \tRunTurnScripts\r\n\t  }\r\n\t}\r\n\tgame.suppressturnscripts = false\r\n\tUpdateStatusAttributes\r\n\tCheckDarkness\r\n\tUpdateObjectLinks\r\n  </function>\r\n  \r\n  <function name=\"AslSet\" parameters=\"data\">\r\n    //game.suppressturnscripts = true\r\n    data = Split(data,\"||\")\r\n\r\n    foreach (bit, data) {\r\n      stuff = Split(bit,\"=\")\r\n      obj_attr = stuff[0]\r\n      obj_attr = Split(obj_attr,\".\")\r\n\t  if (ListCount(obj_attr)>2){\r\n\t    exclude = obj_attr[ListCount(obj_attr)-1]\r\n\t    obj = Join(ListExclude(obj_attr,exclude),\".\")\r\n\t\tobj_attr = NewStringList()\r\n\t\tlist add (obj_attr, obj)\r\n\t\tlist add (obj_attr, exclude)\r\n\t  }\r\n\t  else {\r\n        obj = obj_attr[0]\r\n\t  }\r\n      obj = GetObject(obj)\r\n      attr = obj_attr[1]\r\n      val = stuff[1]\r\n      if (EndsWith(val,\"_toInt\")) {\r\n        val = ToInt(Replace(val,\"_toInt\",\"\"))\r\n      }\r\n      if(LCase(val)=\"true\"){\r\n        val = true\r\n      }\r\n      else if(LCase(val)=\"false\"){\r\n        val = false\r\n      }\r\n      else if (EndsWith(val,\"_toDouble\")) {\r\n        val = ToDouble(Replace(val,\"_toDouble\",\"\"))\r\n      }\r\n      set (obj, attr, val)\r\n    }\r\n  </function>\r\n  \r\n// +++++++++++++++ THIS IS WHERE THE LOADING OF IMAGE FILES STARTS +++++++++++++++++\r\n  <function name=\"SetupGridImages\"><![CDATA[\r\n\t  SetGridImgPath(\"\")\r\n\t  foreach (room, AllObjects()) {\r\n\t\tif (HasAttribute(room,\"grid_image\")) {\r\n\t\t  JS.eval (\"imagesToCheck.push('\"+room.grid_image+\"');checkImages();\")\r\n\t\t}\r\n\t  }\r\n  ]]></function>\r\n\r\n<javascript src=\"GridImageLib.js\" />\r\n  \r\n  </library>\r\n```\r\n\r\n</details>\r\n\r\n<details>\r\n<summary>GridImageLib.js (js script)</summary>\r\n\r\n```\r\nvar questImagePath = \"\";\r\n\r\nsetImagePath = function(path) {\r\n  questImagePath = path;\r\n};\r\n\r\ngetFileUrlJS = function(filename){\r\n  if(filename.indexOf(\"://\") > 0) {\r\n\treturn (filename);\r\n  } else {\r\n\treturn questImagePath.replace(\"_FILENAME_\", filename);\r\n  }\r\n};\r\nvar imagesToCheck = [];\r\n\r\nfunction checkImages(){\r\n\timagesToCheck.forEach(function(img){\r\n\t\tisFileGood(img)\r\n\t});\r\n};\r\n\r\nvar failedImgs = [];\r\n\r\nfunction imgFail(imgFailed){\r\n\tfailedImgs.push(imgFailed.src);\r\n};\r\n\r\n// The function below was updated by KV to clear out image elements that were caching and slowing a restored game.\r\nfunction isFileGood(url){\r\n    imgFile = getFileUrlJS(url);\r\n    $('body').append(\"<img style='display:none' onload='$(this).remove();' onerror='imgFail(this);$(this).remove();' src='\"+imgFile+\"'/>\");\r\n};\r\n\r\ncustomDrawImage = function(url){\r\n\tvar imgFile = getFileUrlJS(url);\r\n\tvar failnumber = failedImgs.indexOf(imgFile);\r\n\tif(failnumber === -1){\r\n\t\tASLEvent('AslSet', roomImageId.replace(\"-\",\".\").replace(\"grid-image\",\"grid_image\")+\"=\"+imgFile);\r\n\t\tgridApi.drawCustomLayerImage(roomImageId, imgFile, parseFloat(gridX), parseFloat(gridY), parseInt(roomGridWidth), parseInt(roomGridHeight));\r\n\t}\r\n};\r\n```\r\n\r\n</details>\r\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\nSo is there anywhere in the code where image files are being inefficiently or unnecessarily \"cached\", thus increasing reload time?\r\n\r\nOther than further reducing the image files, is there any way to make the game reload faster? (I have eliminated most exits in the game and each room is fairly bare bones, so those things should not be issues.)\r\n\r\nI can provide all the files for inspection if that helps.  Thank you.",
      "EditableFormat": "markdown",
      "HTML": "<p>This is the last major issue I'm trying to resolve before uploading my Map Demo 2.0.  This involves KV's Grid Image library with accompanying js script, which together display image files for each room on the map.</p>\n<p>In short, when restoring a saved game, it takes way too long, depending on how much of the explored map is being restored.  If only a quarter of the map has been explored, reloading is pretty fast.  If half of the map needs to be reloaded, it takes several seconds.  But if the whole map needs to be reloaded, it takes up to a minute and a half!  So reloading time is exponential, not linear!</p>\n<p>The entire map is about 400 rooms, each with its own grid image.  I'm pretty sure that the problem lies in the accumulating image files that have to be reloaded.  But because of the exponential reloading time, it's possible that image files are somehow being \"cached\" unnecessarily -- this was, in fact, an issue that had occurred before that KV tried to fix, but it's possible that he only partially fixed it (I have indicated, under \"GridImageLib.js (js script)\", the lines of code where he addressed this).</p>\n<p>To be sure, I have reduced all of the image file sizes.  Strangely, this seems to make no difference in reloading time.</p>\n<p>KV's grid image code consists of 2 parts: GridImageLib.aslx (library), and GridImageLib.js (js script).  The library also modifies the built-in Grid_DrawRoom function.  Loading the grid images starts with calling the SetupGridImages function (located near the bottom of the library), which is done once in the Start tab in a new game, and once in the InitUI tab in a restored game (so only once in either a new or restored game).</p>\n<details>\n<summary>GridImageLib.aslx (library)</summary>\n<pre><code>&lt;library&gt;\n  \n\t&lt;function name=\"SetGridImgPath\" parameters=\"filename\"&gt;\n\t\tJS.setImagePath (GetFileUrl(\"_FILENAME_\"))\n\t&lt;/function&gt;\n  \n\t&lt;function name=\"Grid_DrawRoom\" parameters=\"room, redraw, playerobject\"&gt;&lt;![CDATA[\n\t\tif (room.grid_render) {\n\t\t  if (redraw or not Grid_GetRoomBooleanForPlayer(playerobject, room, \"grid_isdrawn\")) {\n\t\t\tif (room.parent &lt;&gt; null) {\n\t\t\t  Grid_DrawRoom (room.parent, redraw, playerobject)\n\t\t\t}\n\n// +++++++++++++++ THE ONLY CHANGES KV MADE TO GRID_DRAWROOM START HERE +++++++++++++++++\n\t\t\tgridx = Grid_GetGridCoordinateForPlayer(game.pov, room, \"x\")\n\t\t\tgridy = Grid_GetGridCoordinateForPlayer(game.pov, room, \"y\")\n\t\t\tJS.Grid_DrawBox (gridx, gridy, Grid_GetGridCoordinateForPlayer(game.pov, room, \"z\"), room.grid_width, room.grid_length, room.grid_border, room.grid_borderwidth, room.grid_fill, room.grid_bordersides)\n\t\t\tif (HasString(room, \"grid_image\")) {\n\t\t\t  imgfile = false\n\t\t\t  imgexts = Split(\".png;.jpeg;.gif;.jpg;svg\",\";\")\n\t\t\t  room.imageid = room.name+\"-grid-image\"\n\t\t\t  JS.eval (\"var roomImageId = '\"+room.imageid+\"';var gridX = '\"+gridx+\"';var gridY = '\"+gridy+\"';var roomGridWidth = '\"+room.grid_width+\"';var roomGridHeight = '\"+room.grid_length+\"';customDrawImage('\"+room.grid_image+\"');\")\n\t\t\t}\n// +++++++++++++++ THE ONLY CHANGES KV MADE TO GRID_DRAWROOM END HERE +++++++++++++++++\n\n\t\t\tif (LengthOf(room.grid_label) &gt; 0) {\n\t\t\t  label_x = Grid_GetGridCoordinateForPlayer(game.pov, room, \"x\") + room.grid_width/2.0\n\t\t\t  label_y = (Grid_GetGridCoordinateForPlayer(game.pov, room, \"y\") + room.grid_length/2.0) - 0.5\n\t\t\t  JS.Grid_DrawLabel (label_x, label_y, Grid_GetGridCoordinateForPlayer(game.pov, room, \"z\"), room.grid_label, room.grid_label_colour)\n\t\t\t}\n\t\t\tforeach (exit, AllExits()) {\n\t\t\t  if (exit.grid_render and exit.parent = room and exit.grid_length &gt; 0) {\n\t\t\t\tGrid_DrawLine (Grid_GetGridCoordinateForPlayer(game.pov, exit, \"x\"), Grid_GetGridCoordinateForPlayer(game.pov, exit, \"y\"), Grid_GetGridCoordinateForPlayer(game.pov, exit, \"end_x\"), Grid_GetGridCoordinateForPlayer(game.pov, exit, \"end_y\"), game.mapexitcolour, game.mapexitwidth)\n\t\t\t  }\n\t\t\t}\n\t\t\tGrid_SetRoomBooleanForPlayer (playerobject, room, \"grid_isdrawn\", true)\n\t\t  }\n\t\t}\n\t]]&gt;&lt;/function&gt;\n    \n  &lt;function name=\"FinishTurn\"&gt;\n    if (HasAttribute(game,\"runturnscripts\")) {\n      if (GetBoolean(game,\"runturnscripts\")) {\n\t    if (not GetBoolean(game, \"suppressturnscripts\")) {\n\t  \t  RunTurnScripts\n\t\t  game.runturnscripts = false\n\t    }\n\t  }\n\t}\n\telse {\n\t  if (not GetBoolean(game, \"suppressturnscripts\")) {\n\t  \tRunTurnScripts\n\t  }\n\t}\n\tgame.suppressturnscripts = false\n\tUpdateStatusAttributes\n\tCheckDarkness\n\tUpdateObjectLinks\n  &lt;/function&gt;\n  \n  &lt;function name=\"AslSet\" parameters=\"data\"&gt;\n    //game.suppressturnscripts = true\n    data = Split(data,\"||\")\n\n    foreach (bit, data) {\n      stuff = Split(bit,\"=\")\n      obj_attr = stuff[0]\n      obj_attr = Split(obj_attr,\".\")\n\t  if (ListCount(obj_attr)&gt;2){\n\t    exclude = obj_attr[ListCount(obj_attr)-1]\n\t    obj = Join(ListExclude(obj_attr,exclude),\".\")\n\t\tobj_attr = NewStringList()\n\t\tlist add (obj_attr, obj)\n\t\tlist add (obj_attr, exclude)\n\t  }\n\t  else {\n        obj = obj_attr[0]\n\t  }\n      obj = GetObject(obj)\n      attr = obj_attr[1]\n      val = stuff[1]\n      if (EndsWith(val,\"_toInt\")) {\n        val = ToInt(Replace(val,\"_toInt\",\"\"))\n      }\n      if(LCase(val)=\"true\"){\n        val = true\n      }\n      else if(LCase(val)=\"false\"){\n        val = false\n      }\n      else if (EndsWith(val,\"_toDouble\")) {\n        val = ToDouble(Replace(val,\"_toDouble\",\"\"))\n      }\n      set (obj, attr, val)\n    }\n  &lt;/function&gt;\n  \n// +++++++++++++++ THIS IS WHERE THE LOADING OF IMAGE FILES STARTS +++++++++++++++++\n  &lt;function name=\"SetupGridImages\"&gt;&lt;![CDATA[\n\t  SetGridImgPath(\"\")\n\t  foreach (room, AllObjects()) {\n\t\tif (HasAttribute(room,\"grid_image\")) {\n\t\t  JS.eval (\"imagesToCheck.push('\"+room.grid_image+\"');checkImages();\")\n\t\t}\n\t  }\n  ]]&gt;&lt;/function&gt;\n\n&lt;javascript src=\"GridImageLib.js\" /&gt;\n  \n  &lt;/library&gt;\n</code></pre>\n</details>\n<details>\n<summary>GridImageLib.js (js script)</summary>\n<pre><code>var questImagePath = \"\";\n\nsetImagePath = function(path) {\n  questImagePath = path;\n};\n\ngetFileUrlJS = function(filename){\n  if(filename.indexOf(\"://\") &gt; 0) {\n\treturn (filename);\n  } else {\n\treturn questImagePath.replace(\"_FILENAME_\", filename);\n  }\n};\nvar imagesToCheck = [];\n\nfunction checkImages(){\n\timagesToCheck.forEach(function(img){\n\t\tisFileGood(img)\n\t});\n};\n\nvar failedImgs = [];\n\nfunction imgFail(imgFailed){\n\tfailedImgs.push(imgFailed.src);\n};\n\n// The function below was updated by KV to clear out image elements that were caching and slowing a restored game.\nfunction isFileGood(url){\n    imgFile = getFileUrlJS(url);\n    $('body').append(\"&lt;img style='display:none' onload='$(this).remove();' onerror='imgFail(this);$(this).remove();' src='\"+imgFile+\"'/&gt;\");\n};\n\ncustomDrawImage = function(url){\n\tvar imgFile = getFileUrlJS(url);\n\tvar failnumber = failedImgs.indexOf(imgFile);\n\tif(failnumber === -1){\n\t\tASLEvent('AslSet', roomImageId.replace(\"-\",\".\").replace(\"grid-image\",\"grid_image\")+\"=\"+imgFile);\n\t\tgridApi.drawCustomLayerImage(roomImageId, imgFile, parseFloat(gridX), parseFloat(gridY), parseInt(roomGridWidth), parseInt(roomGridHeight));\n\t}\n};\n</code></pre>\n</details>\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n<p>So is there anywhere in the code where image files are being inefficiently or unnecessarily \"cached\", thus increasing reload time?</p>\n<p>Other than further reducing the image files, is there any way to make the game reload faster? (I have eliminated most exits in the game and each room is fairly bare bones, so those things should not be issues.)</p>\n<p>I can provide all the files for inspection if that helps.  Thank you.</p>\n\n",
      "PostDate": "2018-10-06T11:58:30.0300892Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7614016c-e534-4fce-9cbf-78ef8bc65ad5",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This code near the bottom of GridImageLib.js may be at the crux of the issue:\r\n```\r\nfunction isFileGood(url){\r\n    imgFile = getFileUrlJS(url);\r\n    $('body').append(\"<img style='display:none' onload='$(this).remove();' onerror='imgFail(this);$(this).remove();' src='\"+imgFile+\"'/>\");\r\n};\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>This code near the bottom of GridImageLib.js may be at the crux of the issue:</p>\n<pre><code>function isFileGood(url){\n    imgFile = getFileUrlJS(url);\n    $('body').append(\"&lt;img style='display:none' onload='$(this).remove();' onerror='imgFail(this);$(this).remove();' src='\"+imgFile+\"'/&gt;\");\n};\n</code></pre>\n\n",
      "PostDate": "2018-10-07T08:51:25.716969Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9cabbb98-16d5-41e8-843a-380a6c9b271f",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Bump.",
      "EditableFormat": "markdown",
      "HTML": "<p>Bump.</p>\n\n",
      "PostDate": "2018-10-12T13:21:20.2956637Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0760e056-c037-4653-994b-9fa208348887",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm neither a professional nor one who knows much about the grid. \r\nHope you'll get help from someone who knows how too!\r\nLooking forward to see what you've accomplished.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm neither a professional nor one who knows much about the grid.<br>\nHope you'll get help from someone who knows how too!<br>\nLooking forward to see what you've accomplished.</p>\n\n",
      "PostDate": "2018-10-13T06:10:31.8126999Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "14a5d7c1-92cc-45cf-b3ed-6458ca26ee6e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "While it's loading, what do you get if you enter `$('body > img');` in your browser's javascript console?",
      "EditableFormat": "markdown",
      "HTML": "<p>While it's loading, what do you get if you enter <code>$('body &gt; img');</code> in your browser's javascript console?</p>\n\n",
      "PostDate": "2018-10-13T11:04:54.0026122Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e0502e08-65a7-4dbe-98b6-fe43f1008a16",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@CMB\r\nThanks for the encouragement.  I look forward to seeing your game too.\r\n\r\n@MA\r\nActually, I've only run this demo offline.  Haven't even uploaded it yet.",
      "EditableFormat": "markdown",
      "HTML": "<p>@CMB<br>\nThanks for the encouragement.  I look forward to seeing your game too.</p>\n<p>@MA<br>\nActually, I've only run this demo offline.  Haven't even uploaded it yet.</p>\n\n",
      "PostDate": "2018-10-13T13:47:39.6543221Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f90fe651-fe99-4dcb-aefc-5952bc499414",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Not sure if you can get at the console in the offline version; but would be interesting to know if the slowdown is within Quest itself, or in the browser.",
      "EditableFormat": "markdown",
      "HTML": "<p>Not sure if you can get at the console in the offline version; but would be interesting to know if the slowdown is within Quest itself, or in the browser.</p>\n\n",
      "PostDate": "2018-10-13T13:51:37.9273548Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b73bc52b-48d2-430b-93f6-bf078e7add00",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How would I get at the console in the offline version?",
      "EditableFormat": "markdown",
      "HTML": "<p>How would I get at the console in the offline version?</p>\n\n",
      "PostDate": "2018-10-13T14:34:27.9436461Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "05a9b8f9-e26e-481b-b9cf-7030d84a3135",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I haven't tried it, but there's a chance Ctrl+Shift+J or Ctrl+Shift+I might bring up developer tools.\r\nBut this could be one of the places where desktop and online behave completely differently, because I believe data between the frontend and backend is synchronised differently.",
      "EditableFormat": "markdown",
      "HTML": "<p>I haven't tried it, but there's a chance Ctrl+Shift+J or Ctrl+Shift+I might bring up developer tools.<br>\nBut this could be one of the places where desktop and online behave completely differently, because I believe data between the frontend and backend is synchronised differently.</p>\n\n",
      "PostDate": "2018-10-13T16:46:29.7287095Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9c0c5a06-727b-4f3e-b9b1-17247d2c71de",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ctrl+Shift+J or I doesn't do anything in-game or in the editor (desktop mode).  However, I'm looking at HTML tools in-game to see if I can get a clue about anything (don't understand most of this stuff though).",
      "EditableFormat": "markdown",
      "HTML": "<p>Ctrl+Shift+J or I doesn't do anything in-game or in the editor (desktop mode).  However, I'm looking at HTML tools in-game to see if I can get a clue about anything (don't understand most of this stuff though).</p>\n\n",
      "PostDate": "2018-10-13T21:21:47.0820517Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "199c6a8c-07b4-4221-9e4d-9874a3e03b82",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "When in-game, under the \"HTML Tools\" menu button, under the \"Profiles\" tab, there is a radio button set to \"Collect Javascript CPU Profile\".  Near the bottom, I pressed on the \"Start\" button, which causes a \"Profile 1\" to be recorded in the background.  When you press \"Stop\", the profile stops recording and you can see any error messages, as well as a table of resource allocations.\r\n\r\nSo I started a new game in desktop.  Before doing any commands, I started a new \"Profile 1\" recording and then stopped it after several seconds, still without running any commands (just idling).  These 2 error messages came up:\r\n\r\n```Failed to clear temp storage: It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources. SecurityError```\r\n\r\n```Failed to create temp file 2 : It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources.```\r\n\r\nI restarted the recording again (now in \"Profile 2\") and moved the player around, running other commands, etc.  Then I stopped recording \"Profile 2\" and looked at the error messages.  The only thing added was a repeat of the second error message:\r\n\r\n```Failed to create temp file 2 : It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources.```\r\n\r\nThis will continue ad nauseum each time you restart the recording, do stuff, and stop it again; i.e., another copy of the second error message will appear each time.  Other than that, there were no other messages.\r\n\r\nThis sounds pertinent, but I have no idea what, if anything, can be done about it.  Any ideas?  Thanks.",
      "EditableFormat": "markdown",
      "HTML": "<p>When in-game, under the \"HTML Tools\" menu button, under the \"Profiles\" tab, there is a radio button set to \"Collect Javascript CPU Profile\".  Near the bottom, I pressed on the \"Start\" button, which causes a \"Profile 1\" to be recorded in the background.  When you press \"Stop\", the profile stops recording and you can see any error messages, as well as a table of resource allocations.</p>\n<p>So I started a new game in desktop.  Before doing any commands, I started a new \"Profile 1\" recording and then stopped it after several seconds, still without running any commands (just idling).  These 2 error messages came up:</p>\n<p><code>Failed to clear temp storage: It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources. SecurityError</code></p>\n<p><code>Failed to create temp file 2 : It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources.</code></p>\n<p>I restarted the recording again (now in \"Profile 2\") and moved the player around, running other commands, etc.  Then I stopped recording \"Profile 2\" and looked at the error messages.  The only thing added was a repeat of the second error message:</p>\n<p><code>Failed to create temp file 2 : It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources.</code></p>\n<p>This will continue ad nauseum each time you restart the recording, do stuff, and stop it again; i.e., another copy of the second error message will appear each time.  Other than that, there were no other messages.</p>\n<p>This sounds pertinent, but I have no idea what, if anything, can be done about it.  Any ideas?  Thanks.</p>\n\n",
      "PostDate": "2018-10-14T04:22:42.0117207Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4e08ae4f-cea4-4055-90d0-d5e238fae1eb",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Just bumping this so KV can find this : )",
      "EditableFormat": "markdown",
      "HTML": "<p>Just bumping this so KV can find this : )</p>\n\n",
      "PostDate": "2018-10-19T11:22:28.8871901Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "deb295a2-6517-4661-8649-bc0ee82a3c0b",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Just bumping this so KV can find this : )\r\n\r\nSend the link to the thread in a PM to him. He's not here as much but he checks in every now and then. That way you can be sure that he don't miss it :)",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Just bumping this so KV can find this : )</p>\n</blockquote>\n<p>Send the link to the thread in a PM to him. He's not here as much but he checks in every now and then. That way you can be sure that he don't miss it :)</p>\n\n",
      "PostDate": "2018-10-19T11:41:55.3290826Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5b36e57c-4dc2-45f7-8bae-d267cb09d4a2",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Done!  Thank you Cheese!",
      "EditableFormat": "markdown",
      "HTML": "<p>Done!  Thank you Cheese!</p>\n\n",
      "PostDate": "2018-10-19T12:34:44.4687066Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8b81e662-c5ba-4e67-a72b-dfe50d1946f2",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello!\r\n\r\nWhen you open the HTML tools click on 'Console', then try mrangel's thing:\r\n\r\n>While it's loading, what do you get if you enter ```$('body > img');``` in your browser's javascript console?",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello!</p>\n<p>When you open the HTML tools click on 'Console', then try mrangel's thing:</p>\n<blockquote>\n<p>While it's loading, what do you get if you enter <code>$('body &gt; img');</code> in your browser's javascript console?</p>\n</blockquote>\n\n",
      "PostDate": "2018-10-20T03:22:41.6144536Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c6c93cc6-d4ad-43c8-8e3d-fbffae34fe75",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "When I was in the HTML Console in-game (offline), I tried the Ctrl-Shift-I and Ctrl-Shift-J thing.  Nothing happened.  I input ```$('body > img');``` into the HTML Console, but I don't see anything happening (it goes away the next time you open the HTML Console).\r\n\r\nAs for the javascript console, how do I get to it?  I've only been testing this demo offline so far.  I can upload it and try it online too if that helps.",
      "EditableFormat": "markdown",
      "HTML": "<p>When I was in the HTML Console in-game (offline), I tried the Ctrl-Shift-I and Ctrl-Shift-J thing.  Nothing happened.  I input <code>$('body &gt; img');</code> into the HTML Console, but I don't see anything happening (it goes away the next time you open the HTML Console).</p>\n<p>As for the javascript console, how do I get to it?  I've only been testing this demo offline so far.  I can upload it and try it online too if that helps.</p>\n\n",
      "PostDate": "2018-10-20T08:14:53.7483047Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "48af7db7-fbe1-4751-b972-d1edd85c2984",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> As for the javascript console, how do I get to it?\r\n\r\nWhen you open the HTML tools click on 'Console'.  Then, you're there.\r\n\r\n> Nothing happened. I input ```$('body > img');``` into the HTML Console, but I don't see anything happening (it goes away the next time you open the HTML Console).\r\n\r\nI don't know what that's supposed to do.  mrangel knows a lot about JS than I do.\r\n\r\nIf you pasted it into the HTML tools window with the Console tab selected and pressed ENTER, you successfully followed mrangel's instructions.\r\n\r\n```Ctrl-Shift-I``` and ```Ctrl-Shift-J``` only works in a browser.  ```Ctrl+Shift+I``` is the equivalent of opening the HTML tools.  ```Ctrl-Shift-J``` just opens the JS console in a browser.  That has no equivalent in Quest.\r\n\r\nTo get to the JS console in Quest, we can only open the HTML tools and click on Console.\r\n\r\n---\r\nOh... I'm rusty...\r\n\r\nI think ```$('body > img');``` should show a list of loaded images in the body element.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>As for the javascript console, how do I get to it?</p>\n</blockquote>\n<p>When you open the HTML tools click on 'Console'.  Then, you're there.</p>\n<blockquote>\n<p>Nothing happened. I input <code>$('body &gt; img');</code> into the HTML Console, but I don't see anything happening (it goes away the next time you open the HTML Console).</p>\n</blockquote>\n<p>I don't know what that's supposed to do.  mrangel knows a lot about JS than I do.</p>\n<p>If you pasted it into the HTML tools window with the Console tab selected and pressed ENTER, you successfully followed mrangel's instructions.</p>\n<p><code>Ctrl-Shift-I</code> and <code>Ctrl-Shift-J</code> only works in a browser.  <code>Ctrl+Shift+I</code> is the equivalent of opening the HTML tools.  <code>Ctrl-Shift-J</code> just opens the JS console in a browser.  That has no equivalent in Quest.</p>\n<p>To get to the JS console in Quest, we can only open the HTML tools and click on Console.</p>\n<hr>\n<p>Oh... I'm rusty...</p>\n<p>I think <code>$('body &gt; img');</code> should show a list of loaded images in the body element.</p>\n\n",
      "PostDate": "2018-10-20T14:27:42.9072105Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c5a8140e-8569-4279-822c-95068cdc683a",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Actually, my brain must be a little rusty. `$('body > img').length;` would probably be more useful (see if it's 0). Or `console.log($('body > img'));` if the former gives no output at all.\r\n\r\nMy intention is basically to see if any of the temporary images used for URL testing have been created; if they're all created at once, they could end up blocking each other due to the browser's maximum concurrent requests. If they _don't_ exist during the slowdown you described, it likely means that the code is running slowly within Quest, before being passed to the browser.",
      "EditableFormat": "markdown",
      "HTML": "<p>Actually, my brain must be a little rusty. <code>$('body &gt; img').length;</code> would probably be more useful (see if it's 0). Or <code>console.log($('body &gt; img'));</code> if the former gives no output at all.</p>\n<p>My intention is basically to see if any of the temporary images used for URL testing have been created; if they're all created at once, they could end up blocking each other due to the browser's maximum concurrent requests. If they <em>don't</em> exist during the slowdown you described, it likely means that the code is running slowly within Quest, before being passed to the browser.</p>\n\n",
      "PostDate": "2018-10-20T21:13:00.5989033Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9f31f910-1b07-49a1-8b2f-fcdd6905189b",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```$('body > img').length;``` gives a result of zero.\r\n\r\n```$('body > img');``` gives empty square brackets.",
      "EditableFormat": "markdown",
      "HTML": "<p><code>$('body &gt; img').length;</code> gives a result of zero.</p>\n<p><code>$('body &gt; img');</code> gives empty square brackets.</p>\n\n",
      "PostDate": "2018-10-22T08:26:34.9120141Z",
      "LastEditDate": "2018-10-22T08:28:54.8891499Z",
      "link": null
    },
    {
      "PostId": "0c16d9ac-9102-431d-8684-3aff0ec811ab",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I guess the problem must be on the Quest side then. I'll have to dig into the script and work out what will be run in what order when the save is restored. Unfortunately I'm kind of snowed under with work-related stuff right now, but I'm sure I'll be able to find time sooner or later.",
      "EditableFormat": "markdown",
      "HTML": "<p>I guess the problem must be on the Quest side then. I'll have to dig into the script and work out what will be run in what order when the save is restored. Unfortunately I'm kind of snowed under with work-related stuff right now, but I'm sure I'll be able to find time sooner or later.</p>\n\n",
      "PostDate": "2018-10-22T08:55:10.4215043Z",
      "LastEditDate": "2018-10-22T08:56:01.0273685Z",
      "link": null
    }
  ]
}
