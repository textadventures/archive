{
  "Topic": {
    "TopicId": "4104",
    "ForumId": "10",
    "Title": "Newbie question: Adventure and Gamebook?",
    "LastUpdated": "2014-01-21T06:47:14+00:00",
    "ReplyCount": 8
  },
  "Posts": [
    {
      "PostId": "27377",
      "UserId": 0,
      "Username": "gernotg",
      "UserAvatar": null,
      "UserGravatar": "ac4ee49ebfcb27982dd9398e86610805",
      "EditableText": "Hi everyone,\n\nI'm still trying to get started, but I'm stuck at the most basic level. I want to create a game that has rooms and objects with properties, but I want the interface to look like a game book. Or, at least in certain cases, I would like to be able to switch to a game book interface.\n\nFor example, let's say I am in a room with a particular object or person, when the character interacts with that object or has a conversation with that person, I want a series of game-book-style menus such as &quot;person says xyz, respond a) b), or c)&quot;, and at the end of the conversation or interaction, return to normal adventure mode.\n\nWhen I start my game as a text adventure, I can't figure out how to create the game-book-style interaction sequences, and when I start it as a game book, I can't figure out how to add rooms and objects with properties... Please help!\n\nThanks,\n\nGernot",
      "EditableFormat": "bbcode",
      "HTML": "Hi everyone,<br/><br/>I'm still trying to get started, but I'm stuck at the most basic level. I want to create a game that has rooms and objects with properties, but I want the interface to look like a game book. Or, at least in certain cases, I would like to be able to switch to a game book interface.<br/><br/>For example, let's say I am in a room with a particular object or person, when the character interacts with that object or has a conversation with that person, I want a series of game-book-style menus such as &quot;person says xyz, respond a) b), or c)&quot;, and at the end of the conversation or interaction, return to normal adventure mode.<br/><br/>When I start my game as a text adventure, I can't figure out how to create the game-book-style interaction sequences, and when I start it as a game book, I can't figure out how to add rooms and objects with properties... Please help!<br/><br/>Thanks,<br/><br/>Gernot",
      "PostDate": "2014-01-03T20:20:48+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "27378",
      "UserId": 0,
      "Username": "tbritton",
      "UserAvatar": null,
      "UserGravatar": "aa3d953baab30b778c1351a982d82eb8",
      "EditableText": "First link below shows how to create a menu for use with objects.  For interaction with characters use ask, tell or talk.  Ask and tell can be set up with the gui, not sure about talk.  These would all be done in adventure mode.\n\n<!-- m --><a class=\"postlink\" href=\"http://quest5.net/wiki/Showing_a_menu\">http://quest5.net/wiki/Showing_a_menu</a><!-- m -->\n\n<!-- m --><a class=\"postlink\" href=\"http://quest5.net/wiki/Dynamic_Menus_for_Conversations\">http://quest5.net/wiki/Dynamic_Menus_for_Conversations</a><!-- m -->",
      "EditableFormat": "bbcode",
      "HTML": "First link below shows how to create a menu for use with objects.  For interaction with characters use ask, tell or talk.  Ask and tell can be set up with the gui, not sure about talk.  These would all be done in adventure mode.<br/><br/><!-- m --><a class=\"postlink\" href=\"http://quest5.net/wiki/Showing_a_menu\">http://quest5.net/wiki/Showing_a_menu</a><!-- m --><br/><br/><!-- m --><a class=\"postlink\" href=\"http://quest5.net/wiki/Dynamic_Menus_for_Conversations\">http://quest5.net/wiki/Dynamic_Menus_for_Conversations</a><!-- m -->",
      "PostDate": "2014-01-04T00:23:03+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "27382",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "here's a start of trying to make a hybrid of TA (Text Adventure) and GB (Game Book):\n\n<!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=18&amp;t=4025\">viewtopic.php?f=18&amp;t=4025</a><!-- l -->\n\nI'm not sure if this will be of any help to you, as I haven't looked at it myself yet, but it's worth a look.\n\n--------------\n\nalso, here's a Journal Library, I haven't looked at this yet, but it might be the closest thing in the TA to the pages in a GB:\n\n<!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=18&amp;t=2610\">viewtopic.php?f=18&amp;t=2610</a><!-- l -->\n\notherwise, maybe one of the good programmers~coders here can craft a GB pages feature in the TA for you.\n\n-------------\n\nI can't help you with GB stuff, but if you want or need any help with the TA stuff, I'd be glad to try to help you with anything.",
      "EditableFormat": "bbcode",
      "HTML": "here's a start of trying to make a hybrid of TA (Text Adventure) and GB (Game Book):<br/><br/><!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=18&amp;t=4025\">viewtopic.php?f=18&amp;t=4025</a><!-- l --><br/><br/>I'm not sure if this will be of any help to you, as I haven't looked at it myself yet, but it's worth a look.<br/><br/>--------------<br/><br/>also, here's a Journal Library, I haven't looked at this yet, but it might be the closest thing in the TA to the pages in a GB:<br/><br/><!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=18&amp;t=2610\">viewtopic.php?f=18&amp;t=2610</a><!-- l --><br/><br/>otherwise, maybe one of the good programmers~coders here can craft a GB pages feature in the TA for you.<br/><br/>-------------<br/><br/>I can't help you with GB stuff, but if you want or need any help with the TA stuff, I'd be glad to try to help you with anything.",
      "PostDate": "2014-01-04T06:20:28+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "27384",
      "UserId": 0,
      "Username": "gernotg",
      "UserAvatar": null,
      "UserGravatar": "ac4ee49ebfcb27982dd9398e86610805",
      "EditableText": "Thank you very much for the pointers. It seems clear that the correct way to go is to use menus from the TA setup.\nOne simple way I see to implement menus is to print statements with links to commands, like\n           Would you like to {command:open box:open} the box?\n\nBut is there a way to create a link that calls a script or function, without creating a command? Something along the lines of:\n           By the way, do you have {script&#058;player.hairlength=&quot;long&quot;:long} or {script&#058;player.hairlength=&quot;short&quot;:short} hair?",
      "EditableFormat": "bbcode",
      "HTML": "Thank you very much for the pointers. It seems clear that the correct way to go is to use menus from the TA setup.<br/>One simple way I see to implement menus is to print statements with links to commands, like<br/>           Would you like to {command:open box:open} the box?<br/><br/>But is there a way to create a link that calls a script or function, without creating a command? Something along the lines of:<br/>           By the way, do you have {script&#058;player.hairlength=&quot;long&quot;:long} or {script&#058;player.hairlength=&quot;short&quot;:short} hair?",
      "PostDate": "2014-01-04T09:14:39+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "27385",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "I don't know of a way to do it without any commands at all, but in my own work, I created a single command as a gateway to scripts. Its code is here:\n\n[code:yp1g4euf]  &lt;command name=&quot;Dungeons_DoScriptCmd&quot;&gt;\n    &lt;pattern&gt;DoScript #text1# #text2#;DoScript #text1#&lt;/pattern&gt;\n    &lt;script&gt;\n      &lt;!&#91;CDATA&#91;\n     // text = object&#46;attribute parameters\n        // text2 = parameter string (param1,param2,&#46;&#46;&#46;)\n        source = Split(text1, &quot;&#46;&quot;)\n        object = StringListItem(source, 0)\n        attribute = StringListItem(source, 1)\n        if (not IsDefined(&quot;text2&quot;)) {\n          text2 = &quot;&quot;\n        }\n        args = Split(text2, &quot;,&quot;)\n        params = NewDictionary()\n        argnum = 1\n        foreach (arg, args) {\n          dictionary add(params, &quot;arg&quot;+argnum, arg)\n          argnum = argnum + 1\n        }\n        //msg(&quot;object = &quot; + object + &quot;, attribute = &quot; + attribute + &quot;, params = &quot; + params)\n        do (GetObject(object), attribute, params)\n      &#93;&#93;&gt;\n    &lt;/script&gt;\n  &lt;/command&gt;\n[/code:yp1g4euf]\nYou could use this as is or make your own variant. It doesn't allow direct inline script, but it does allow a script to be called on an object. You specify the object and script attribute to be called as &quot;object.script&quot;. You an also pass an additional string, which is a comma-separated list of arguments (e.g. &quot;foo,bar,3,5&quot;), and they appear to the script as variables arg1, arg2, etc.\n\nYour example would then be:\n\n[code:yp1g4euf]By the way, do you have {command&#58;DoScript player&#46;sethairlength long&#58;long} or {command&#58;DoScript player&#46;sethairlength short&#58;short} hair?[/code:yp1g4euf]\n\nwhere you'd have a script attribute on the player like to handle setting the hair length:\n\n&lt;sethairlength type=&quot;script&quot;&gt;\n    this.hairlength = arg1\n&lt;/sethairlength&gt;\n\nHope that helps.",
      "EditableFormat": "bbcode",
      "HTML": "I don't know of a way to do it without any commands at all, but in my own work, I created a single command as a gateway to scripts. Its code is here:<br/><br/><pre><code>  &lt;command name=&quot;Dungeons_DoScriptCmd&quot;&gt;<br/>    &lt;pattern&gt;DoScript #text1# #text2#;DoScript #text1#&lt;/pattern&gt;<br/>    &lt;script&gt;<br/>      &lt;!&#91;CDATA&#91;<br/>     // text = object&#46;attribute parameters<br/>        // text2 = parameter string (param1,param2,&#46;&#46;&#46;)<br/>        source = Split(text1, &quot;&#46;&quot;)<br/>        object = StringListItem(source, 0)<br/>        attribute = StringListItem(source, 1)<br/>        if (not IsDefined(&quot;text2&quot;)) {<br/>          text2 = &quot;&quot;<br/>        }<br/>        args = Split(text2, &quot;,&quot;)<br/>        params = NewDictionary()<br/>        argnum = 1<br/>        foreach (arg, args) {<br/>          dictionary add(params, &quot;arg&quot;+argnum, arg)<br/>          argnum = argnum + 1<br/>        }<br/>        //msg(&quot;object = &quot; + object + &quot;, attribute = &quot; + attribute + &quot;, params = &quot; + params)<br/>        do (GetObject(object), attribute, params)<br/>      &#93;&#93;&gt;<br/>    &lt;/script&gt;<br/>  &lt;/command&gt;<br/></code></pre><br/>You could use this as is or make your own variant. It doesn't allow direct inline script, but it does allow a script to be called on an object. You specify the object and script attribute to be called as &quot;object.script&quot;. You an also pass an additional string, which is a comma-separated list of arguments (e.g. &quot;foo,bar,3,5&quot;), and they appear to the script as variables arg1, arg2, etc.<br/><br/>Your example would then be:<br/><br/><pre><code>By the way, do you have {command&#58;DoScript player&#46;sethairlength long&#58;long} or {command&#58;DoScript player&#46;sethairlength short&#58;short} hair?</code></pre><br/><br/>where you'd have a script attribute on the player like to handle setting the hair length:<br/><br/>&lt;sethairlength type=&quot;script&quot;&gt;<br/>    this.hairlength = arg1<br/>&lt;/sethairlength&gt;<br/><br/>Hope that helps.",
      "PostDate": "2014-01-04T09:46:57+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "27389",
      "UserId": 0,
      "Username": "gernotg",
      "UserAvatar": null,
      "UserGravatar": "ac4ee49ebfcb27982dd9398e86610805",
      "EditableText": "Thanks, jaynabonne!\n\nI was not able to get the script to work quite as is. For some reason, it did not consider &quot;player.hairlength&quot; as one string, but instead used the dot to separate my line into several commands, so I modified your command to use spaces instead:\n\n  &lt;command name=&quot;DoScriptCmd&quot;&gt;\n    &lt;pattern&gt;DoScript #text#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      args = Split(text,&quot; &quot;)\n      count = ListCount( args )\n      if ( count &lt; 2 ) {\n        msg (&quot;Usage: DoScript object script [parms]&quot;)\n      }\n      else {\n        object = StringListItem(args, 0)\n        attribute = StringListItem(args, 1)\n        params = NewDictionary()\n        if ( count &gt; 2 ) {\n          for (idx, 2, count - 1) {\n            dictionary add (params, &quot;arg&quot;+(idx-1), StringListItem(args, idx))\n          }\n        }\n        obj = GetObject(object)\n        if ( obj = null ) {\n          msg (object + &quot; does not specify a valid object.&quot;)\n        }\n        else if ( not HasScript( obj, attribute ) ) {\n          msg (object + &quot; does not have a script &quot; + attribute + &quot;.&quot;)\n        }\n        else {\n          do (obj, attribute, params)\n        }\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n\nThis now works, and I can use it to call scripts. The one qualm I still have is that the &quot;DoScript xxx yyy&quot; is still displayed as a command when the user clicks on the link. Is there any way around that?",
      "EditableFormat": "bbcode",
      "HTML": "Thanks, jaynabonne!<br/><br/>I was not able to get the script to work quite as is. For some reason, it did not consider &quot;player.hairlength&quot; as one string, but instead used the dot to separate my line into several commands, so I modified your command to use spaces instead:<br/><br/>  &lt;command name=&quot;DoScriptCmd&quot;&gt;<br/>    &lt;pattern&gt;DoScript #text#&lt;/pattern&gt;<br/>    &lt;script&gt;&lt;![CDATA[<br/>      args = Split(text,&quot; &quot;)<br/>      count = ListCount( args )<br/>      if ( count &lt; 2 ) {<br/>        msg (&quot;Usage: DoScript object script [parms]&quot;)<br/>      }<br/>      else {<br/>        object = StringListItem(args, 0)<br/>        attribute = StringListItem(args, 1)<br/>        params = NewDictionary()<br/>        if ( count &gt; 2 ) {<br/>          for (idx, 2, count - 1) {<br/>            dictionary add (params, &quot;arg&quot;+(idx-1), StringListItem(args, idx))<br/>          }<br/>        }<br/>        obj = GetObject(object)<br/>        if ( obj = null ) {<br/>          msg (object + &quot; does not specify a valid object.&quot;)<br/>        }<br/>        else if ( not HasScript( obj, attribute ) ) {<br/>          msg (object + &quot; does not have a script &quot; + attribute + &quot;.&quot;)<br/>        }<br/>        else {<br/>          do (obj, attribute, params)<br/>        }<br/>      }<br/>    ]]&gt;&lt;/script&gt;<br/>  &lt;/command&gt;<br/><br/>This now works, and I can use it to call scripts. The one qualm I still have is that the &quot;DoScript xxx yyy&quot; is still displayed as a command when the user clicks on the link. Is there any way around that?",
      "PostDate": "2014-01-04T20:56:26+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "27390",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "You have to override some default Quest behavior to get rid of that (ah yes, the bane of customization). The place to look is in HandleCommand. The easiest way to modify it is to:\n\n1) In the Quest editor, click the Filter dropdown below the left pane and check &quot;Show Library Elements&quot;. Then\n2) Look for the function &quot;HandleCommand&quot; in the Functions area. \n3) Click on it. It will appear in the script editor on the right.\n4) Click the Copy button at the top right of the screen. That will pull the script up into your game file.\n5) In Script view (since I think you are comfortable with script!), find this text and get rid of it:\n\n[code:yjo9r6nj]          if (not shownlink) {\n            msg (&quot;&quot;)\n            OutputTextRaw (&quot;&amp;gt; &quot; + SafeXML(command))\n          }[/code:yjo9r6nj]\n\nThat should do it.",
      "EditableFormat": "bbcode",
      "HTML": "You have to override some default Quest behavior to get rid of that (ah yes, the bane of customization). The place to look is in HandleCommand. The easiest way to modify it is to:<br/><br/>1) In the Quest editor, click the Filter dropdown below the left pane and check &quot;Show Library Elements&quot;. Then<br/>2) Look for the function &quot;HandleCommand&quot; in the Functions area. <br/>3) Click on it. It will appear in the script editor on the right.<br/>4) Click the Copy button at the top right of the screen. That will pull the script up into your game file.<br/>5) In Script view (since I think you are comfortable with script!), find this text and get rid of it:<br/><br/><pre><code>          if (not shownlink) {<br/>            msg (&quot;&quot;)<br/>            OutputTextRaw (&quot;&amp;gt; &quot; + SafeXML(command))<br/>          }</code></pre><br/><br/>That should do it.",
      "PostDate": "2014-01-04T21:24:01+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "27391",
      "UserId": 0,
      "Username": "gernotg",
      "UserAvatar": null,
      "UserGravatar": "ac4ee49ebfcb27982dd9398e86610805",
      "EditableText": "Thanks!!",
      "EditableFormat": "bbcode",
      "HTML": "Thanks!!",
      "PostDate": "2014-01-04T21:56:12+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "27536",
      "UserId": 0,
      "Username": "gernotg",
      "UserAvatar": null,
      "UserGravatar": "ac4ee49ebfcb27982dd9398e86610805",
      "EditableText": "When you leave a room, quest disables some hyperlinks, for example to objects that are no longer available. Can I somehow tap into that same mechanism and disable command links that are not available anymore?\n\nFor example, I would like to disable a previous printed &quot;{command:open box:open}&quot; link when the player leaves the room, or for example if the box is now open. Or, since keeping track of all previously printed links seems like a big task, it would be nice to have a way to specify an expression to say whether the link should be active or not, i.e. {command : open box : open : ( box.parent = game.pov.parent ) and ( not box.is_open ) }.\n\nAny ideas?",
      "EditableFormat": "bbcode",
      "HTML": "When you leave a room, quest disables some hyperlinks, for example to objects that are no longer available. Can I somehow tap into that same mechanism and disable command links that are not available anymore?<br/><br/>For example, I would like to disable a previous printed &quot;{command:open box:open}&quot; link when the player leaves the room, or for example if the box is now open. Or, since keeping track of all previously printed links seems like a big task, it would be nice to have a way to specify an expression to say whether the link should be active or not, i.e. {command : open box : open : ( box.parent = game.pov.parent ) and ( not box.is_open ) }.<br/><br/>Any ideas?",
      "PostDate": "2014-01-21T06:47:14+00:00",
      "LastEditDate": null
    }
  ]
}
