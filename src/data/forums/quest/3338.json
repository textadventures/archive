{
  "Topic": {
    "TopicId": "3338",
    "ForumId": "10",
    "Title": "Questions About String Lists & Combat",
    "LastUpdated": "2012-12-01T22:30:30+00:00",
    "ReplyCount": 1
  },
  "Posts": [
    {
      "PostId": "21949",
      "UserId": 0,
      "Username": "182crazyking",
      "UserAvatar": null,
      "UserGravatar": "54bbdc03f4145a66b9d80bb0d2c58573",
      "EditableText": "Hey guys, I've got a pair of newbie questions about some stuff that I'm working on, and I'd really appreciate it if you could help answer them for me! <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> \n\nFirst off, I want to add a value to a list upon using an object, and then refer to that list later on (learning a move for combat, then using it in actual combat). So I added this script&#058;\n\n[img:2ovoxwq6]http&#58;//i325&#46;photobucket&#46;com/albums/k367/182crazyking/StringListProblem&#46;jpg[/img:2ovoxwq6]\n\n(I made my test game Tron-esque, for laughs.)\nNow, later in the game I run a script telling the game to display a menu with options from the list CombatMenu. However, it returns the error: [i:2ovoxwq6]Error running script&#058; Unknown object or variable 'CombatMenu'[/i:2ovoxwq6].\nNow, I've done a few things where the string list is created, objects are added to it, and then it's displayed in a menu in the same script (i.e. &quot;verb object&quot; rather than &quot;use object&quot; then &quot;verb object&quot;). So is there any way to create and add to a list that is remembered by the game? Sorry if my question is a bit unclear; basically, [b:2ovoxwq6]how can I get Quest to add variables to a list when one action is taken, and then display a menu containing that list when a separate action is taken?[/b:2ovoxwq6]\n\nAnd secondly, I need a functional combat system after the whole string-list bug is ironed out. When a player attacks an enemy (as in, use the verb attack on an enemy), my goal is to display a menu consisting of all of the skills the player knows for combat. After they choose a skill from that list, they do damage based on what they chose, and then the enemy does damage based on a random number generator that generates a number between 1-6 (to deal 0-5 points of damage). The number generator/damage health script works perfectly on the enemy's end, but I cannot for the life of me figure out how to give my enemy a health attribute, and then reduce it throughout the course of the game. After a lot of failed attempts, here's what I have so far:\n\n[img:2ovoxwq6]http&#58;//i325&#46;photobucket&#46;com/albums/k367/182crazyking/DamageScriptProblem&#46;jpg[/img:2ovoxwq6]\n\nThat's just the stuff that I know will work. In a previous attempt, I had tried to set a new variable called &quot;enemyhealth&quot; equal to fifty, and then add an &quot;If...&quot; script that would delete the enemy if its health was below 1. However, I wasn't able to find anything that could reduce a pre-established variable. Again, I'm probably not being super clear, but [b:2ovoxwq6]how could I set an enemy's health to a certain number, reduce it by certain amounts, and then hide that enemy when its health is less than zero?[/b:2ovoxwq6]\n\nThanks in advance for any help! <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->\n\nEDIT: Also, attached is my game if you want to poke around with it.",
      "EditableFormat": "bbcode",
      "HTML": "Hey guys, I've got a pair of newbie questions about some stuff that I'm working on, and I'd really appreciate it if you could help answer them for me! <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> <br/><br/>First off, I want to add a value to a list upon using an object, and then refer to that list later on (learning a move for combat, then using it in actual combat). So I added this script&#058;<br/><br/><img src=\"http&#58;//i325&#46;photobucket&#46;com/albums/k367/182crazyking/StringListProblem&#46;jpg\" alt=\"\" /><br/><br/>(I made my test game Tron-esque, for laughs.)<br/>Now, later in the game I run a script telling the game to display a menu with options from the list CombatMenu. However, it returns the error: <span style=\"font-style:italic;\">Error running script&#058; Unknown object or variable 'CombatMenu'</span>.<br/>Now, I've done a few things where the string list is created, objects are added to it, and then it's displayed in a menu in the same script (i.e. &quot;verb object&quot; rather than &quot;use object&quot; then &quot;verb object&quot;). So is there any way to create and add to a list that is remembered by the game? Sorry if my question is a bit unclear; basically, <span style=\"font-weight:bold;\">how can I get Quest to add variables to a list when one action is taken, and then display a menu containing that list when a separate action is taken?</span><br/><br/>And secondly, I need a functional combat system after the whole string-list bug is ironed out. When a player attacks an enemy (as in, use the verb attack on an enemy), my goal is to display a menu consisting of all of the skills the player knows for combat. After they choose a skill from that list, they do damage based on what they chose, and then the enemy does damage based on a random number generator that generates a number between 1-6 (to deal 0-5 points of damage). The number generator/damage health script works perfectly on the enemy's end, but I cannot for the life of me figure out how to give my enemy a health attribute, and then reduce it throughout the course of the game. After a lot of failed attempts, here's what I have so far:<br/><br/><img src=\"http&#58;//i325&#46;photobucket&#46;com/albums/k367/182crazyking/DamageScriptProblem&#46;jpg\" alt=\"\" /><br/><br/>That's just the stuff that I know will work. In a previous attempt, I had tried to set a new variable called &quot;enemyhealth&quot; equal to fifty, and then add an &quot;If...&quot; script that would delete the enemy if its health was below 1. However, I wasn't able to find anything that could reduce a pre-established variable. Again, I'm probably not being super clear, but <span style=\"font-weight:bold;\">how could I set an enemy's health to a certain number, reduce it by certain amounts, and then hide that enemy when its health is less than zero?</span><br/><br/>Thanks in advance for any help! <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --><br/><br/>EDIT: Also, attached is my game if you want to poke around with it.<div><a href=\"/forumattachments/425/CombatTest.aslx\">CombatTest.aslx</a></div>",
      "PostDate": "2012-12-01T19:38:04+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "21950",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "I see something running through both of your questions. Let's tackle the first one first.\n\nA word about variables: a simple variable name used in a script, one which is not an object or an attribute of an object, is always a local variable to that script. In other words, it only exists within that script, and it goes away when the script exits. As you discovered, while you remain within the script, the variable exists. Once it exits... poof! And same named variables used in different scripts are actually different, unrelated variables.\n\nWhat you need is a global place to store your data. You almost (perhaps accidentally) got the answer in your question: &quot;So is there any way to create and add to a list that is remembered by the game?&quot;\n\nThe answer is to store the list as an attribute of the global game object (you could also store it as an attribute of the player). Instead of using CombatMenu, use game.CombatMenu. The former is a local variable. The latter is a persistent attribute of the game object.\n\nKeep in mind that if you do &quot;new string list&quot; every time you learn a new skill, then you will wipe out the old list. So you will need to check if the list already exists. If it does, then move onto to setting the new skill. Else create it first.\n\nYour second question seems similar. You want a way to associate a value with the enemy. The answer is the same: use an attribute. You can create an integer attribute (for example) on the enemy, and then decrease it by your &quot;dmg&quot; amount. If the value goes to zero or negative, then move the enemy off to some hidden room (I call mine &quot;Limbo&quot; typically) so the player can no longer see it.\n\nHope that helps!",
      "EditableFormat": "bbcode",
      "HTML": "I see something running through both of your questions. Let's tackle the first one first.<br/><br/>A word about variables: a simple variable name used in a script, one which is not an object or an attribute of an object, is always a local variable to that script. In other words, it only exists within that script, and it goes away when the script exits. As you discovered, while you remain within the script, the variable exists. Once it exits... poof! And same named variables used in different scripts are actually different, unrelated variables.<br/><br/>What you need is a global place to store your data. You almost (perhaps accidentally) got the answer in your question: &quot;So is there any way to create and add to a list that is remembered by the game?&quot;<br/><br/>The answer is to store the list as an attribute of the global game object (you could also store it as an attribute of the player). Instead of using CombatMenu, use game.CombatMenu. The former is a local variable. The latter is a persistent attribute of the game object.<br/><br/>Keep in mind that if you do &quot;new string list&quot; every time you learn a new skill, then you will wipe out the old list. So you will need to check if the list already exists. If it does, then move onto to setting the new skill. Else create it first.<br/><br/>Your second question seems similar. You want a way to associate a value with the enemy. The answer is the same: use an attribute. You can create an integer attribute (for example) on the enemy, and then decrease it by your &quot;dmg&quot; amount. If the value goes to zero or negative, then move the enemy off to some hidden room (I call mine &quot;Limbo&quot; typically) so the player can no longer see it.<br/><br/>Hope that helps!",
      "PostDate": "2012-12-01T22:30:30+00:00",
      "LastEditDate": null
    }
  ]
}