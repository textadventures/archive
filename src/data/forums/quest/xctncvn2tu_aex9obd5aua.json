{
  "Topic": {
    "TopicId": "xctncvn2tu_aex9obd5aua",
    "ForumId": "10",
    "Title": "item purchase/price?",
    "LastUpdated": "2018-06-16T20:59:07.6094845Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "d18161a4-ba72-432d-8526-5a10786d520e",
      "UserId": 190794,
      "Username": "ScottStark",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi everyone, im currently building a game on quest online and have implemented the money system. I would like to know what the simplest way of requiring the player to have and exchange a certain amount of money to purchase an item is. Thank you in advance!",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi everyone, im currently building a game on quest online and have implemented the money system. I would like to know what the simplest way of requiring the player to have and exchange a certain amount of money to purchase an item is. Thank you in advance!</p>\n\n",
      "PostDate": "2018-06-16T20:59:07.6094845Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fad732b6-edd5-48af-b512-e59a8c3cf8f9",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(filler for getting my edited post, updated/posted)\r\n(again, filler for getting my edited post, updated/posted)\r\n(again, filler for getting my edited post, updated/posted)\r\n\r\n-----------------------------\r\n\r\nan example (using scripting) of (the illusion of) transactions:\r\n\r\nAttribute Manipulation\r\n\r\n```\r\nplayer.currency = 300\r\n\r\ncreate (\"shop_owner\")\r\nshop_owner.parent = room\r\nshop_owner.currency = 500\r\n\r\ncreate (\"katana\")\r\nkatana.price = 100\r\nkatana.parent = shop_owner\r\n\r\nshop_owner.buy => {\r\n  if (katana.parent = shop_owner) {\r\n    if (player.currency >= katana.price) {\r\n      player.currency = player.currency - katana.price\r\n      shop_owner.currency = shop_owner.currency + katana.price\r\n      katana.parent = player\r\n      msg (\"You buy the katana from the shop owner\")\r\n    } else {\r\n      msg (\"You don't have enough currency to buy the katana from the shop owner\")\r\n    }\r\n  } else {\r\n    msg (\"The shop owner has no katanas to sell to you\")\r\n  }\r\n}\r\n\r\nshop_owner.sell => {\r\n  if (katana.parent = player) {\r\n    if (shop_owner.currency >= katana.price / 2) {\r\n      shop_owner.currency = shop_owner.currency - katana.price / 2\r\n      player.currency = player.currency + katana.price / 2\r\n      katana.parent = shop_owner\r\n      msg (\"You sell the katana to the shop owner\")\r\n    } else {\r\n      msg (\"The shop owner doesn't have enough currency to buy the katana from you\")\r\n    }\r\n  } else {\r\n    msg (\"You don't have a katana to sell to the shop owner\")\r\n  }\r\n}\r\n\r\ndo (shop_owner, \"buy\")\r\n\r\ndo (shop_owner, \"sell\")\r\n```\r\n\r\n----------\r\n\r\nwhen selling, it's common in RPGs (as having a mercantile/haggling system is more complex like found in, at least, TES: Morrowind --- I've not played TES:Oblivion nor TES:Skyrim), that you only sell an item for half of its price, so that's why I got the '/ 2' (dividing by half:2)\r\n\r\n------------\r\n\r\nthe 'shop_owner.buy' and 'shop_owner.sell' Script Attributes (\"Verbs\"), need the 'CDATA' tags, for the '<,>' symbols to be parsed/understood as being the 'greater than, lesser than' operations/symbols, but I'm not sure on the correct syntax for it when used with the scripting for creating Script Attributes (\"Verbs\"):\r\n\r\nmaybe like this? ......\r\n\r\n```\r\nshop_owner.buy =>\r\n\r\n  <![CDATA[\r\n\r\n    {\r\n\r\n      if (katana.parent = shop_owner) {\r\n        if (player.currency >= katana.price) {\r\n          player.currency = player.currency - katana.price\r\n          shop_owner.currency = shop_owner.currency + katana.price\r\n          katana.parent = player\r\n          msg (\"You buy the katana from the shop owner\")\r\n        } else {\r\n          msg (\"You don't have enough currency to buy the katana from the shop owner\")\r\n        }\r\n      } else {\r\n        msg (\"The shop owner has no katanas to sell to you\")\r\n      }\r\n\r\n    }\r\n\r\n  ]]>\r\n\r\nshop_owner.sell =>\r\n\r\n  <![CDATA[\r\n\r\n    {\r\n\r\n      if (katana.parent = player) {\r\n        if (shop_owner.currency >= katana.price / 2) {\r\n          shop_owner.currency = shop_owner.currency - katana.price / 2\r\n          player.currency = player.currency + katana.price / 2\r\n          katana.parent = shop_owner\r\n          msg (\"You sell the katana to the shop owner\")\r\n        } else {\r\n          msg (\"The shop owner doesn't have enough currency to buy the katana from you\")\r\n        }\r\n      } else {\r\n        msg (\"You don't have a katana to sell to the shop owner\")\r\n      }\r\n\r\n    }\r\n\r\n  ]]>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>(filler for getting my edited post, updated/posted)<br>\n(again, filler for getting my edited post, updated/posted)<br>\n(again, filler for getting my edited post, updated/posted)</p>\n<hr>\n<p>an example (using scripting) of (the illusion of) transactions:</p>\n<p>Attribute Manipulation</p>\n<pre><code>player.currency = 300\n\ncreate (\"shop_owner\")\nshop_owner.parent = room\nshop_owner.currency = 500\n\ncreate (\"katana\")\nkatana.price = 100\nkatana.parent = shop_owner\n\nshop_owner.buy =&gt; {\n  if (katana.parent = shop_owner) {\n    if (player.currency &gt;= katana.price) {\n      player.currency = player.currency - katana.price\n      shop_owner.currency = shop_owner.currency + katana.price\n      katana.parent = player\n      msg (\"You buy the katana from the shop owner\")\n    } else {\n      msg (\"You don't have enough currency to buy the katana from the shop owner\")\n    }\n  } else {\n    msg (\"The shop owner has no katanas to sell to you\")\n  }\n}\n\nshop_owner.sell =&gt; {\n  if (katana.parent = player) {\n    if (shop_owner.currency &gt;= katana.price / 2) {\n      shop_owner.currency = shop_owner.currency - katana.price / 2\n      player.currency = player.currency + katana.price / 2\n      katana.parent = shop_owner\n      msg (\"You sell the katana to the shop owner\")\n    } else {\n      msg (\"The shop owner doesn't have enough currency to buy the katana from you\")\n    }\n  } else {\n    msg (\"You don't have a katana to sell to the shop owner\")\n  }\n}\n\ndo (shop_owner, \"buy\")\n\ndo (shop_owner, \"sell\")\n</code></pre>\n<hr>\n<p>when selling, it's common in RPGs (as having a mercantile/haggling system is more complex like found in, at least, TES: Morrowind --- I've not played TES:Oblivion nor TES:Skyrim), that you only sell an item for half of its price, so that's why I got the '/ 2' (dividing by half:2)</p>\n<hr>\n<p>the 'shop_owner.buy' and 'shop_owner.sell' Script Attributes (\"Verbs\"), need the 'CDATA' tags, for the '&lt;,&gt;' symbols to be parsed/understood as being the 'greater than, lesser than' operations/symbols, but I'm not sure on the correct syntax for it when used with the scripting for creating Script Attributes (\"Verbs\"):</p>\n<p>maybe like this? ......</p>\n<pre><code>shop_owner.buy =&gt;\n\n  &lt;![CDATA[\n\n    {\n\n      if (katana.parent = shop_owner) {\n        if (player.currency &gt;= katana.price) {\n          player.currency = player.currency - katana.price\n          shop_owner.currency = shop_owner.currency + katana.price\n          katana.parent = player\n          msg (\"You buy the katana from the shop owner\")\n        } else {\n          msg (\"You don't have enough currency to buy the katana from the shop owner\")\n        }\n      } else {\n        msg (\"The shop owner has no katanas to sell to you\")\n      }\n\n    }\n\n  ]]&gt;\n\nshop_owner.sell =&gt;\n\n  &lt;![CDATA[\n\n    {\n\n      if (katana.parent = player) {\n        if (shop_owner.currency &gt;= katana.price / 2) {\n          shop_owner.currency = shop_owner.currency - katana.price / 2\n          player.currency = player.currency + katana.price / 2\n          katana.parent = shop_owner\n          msg (\"You sell the katana to the shop owner\")\n        } else {\n          msg (\"The shop owner doesn't have enough currency to buy the katana from you\")\n        }\n      } else {\n        msg (\"You don't have a katana to sell to the shop owner\")\n      }\n\n    }\n\n  ]]&gt;\n</code></pre>\n\n",
      "PostDate": "2018-06-16T21:22:31.6398229Z",
      "LastEditDate": "2018-06-16T21:45:33.9770403Z",
      "link": null
    },
    {
      "PostId": "1d989a26-f32d-4e14-a82c-9509198f2bd4",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "learning to use (basic) Attributes ('Attribute' VARIABLES) and the 'if' Script is not easy if you're new to coding, but in doing so, you can do 90% of everything that you want to do for/within your game/game-making. Learning more coding, for better or worse, gets into diminishing returns (for example, learning to use List/Dictionary Attributes adds 5%, for 95% = 90% + 5%, of doing everything that you want to do for/within your game/game-making).\r\n\r\nhere's some help on using quest and with learning to code with quest:\r\n\r\nhttp://textadventures.co.uk/forum/general/topic/ljjm32av4e2t9ot49k478g/help#710be61e-eae1-4af1-8363-520cc718ba1c\r\n\r\nand specifically, here's a detailed guide on learning to use (basic) Attributes and the 'if' Script:\r\n\r\nhttp://textadventures.co.uk/forum/samples/topic/5559/attributes-and-if-script-guide-by-hk (the first/upper part/half is on a bit of the coding structure of quest, near the middle is the start of the guide on using Attributes and the 'if' Script, and near the bottom of this link's first post is the part on doing transactions: buying/selling)\r\n\r\n(though, it's probably not easy to understand if you're new to coding, as I'm not good at explaining, better to find Pixie's and/or KV's posts/threads, as they're easier to understand than mine)",
      "EditableFormat": "markdown",
      "HTML": "<p>learning to use (basic) Attributes ('Attribute' VARIABLES) and the 'if' Script is not easy if you're new to coding, but in doing so, you can do 90% of everything that you want to do for/within your game/game-making. Learning more coding, for better or worse, gets into diminishing returns (for example, learning to use List/Dictionary Attributes adds 5%, for 95% = 90% + 5%, of doing everything that you want to do for/within your game/game-making).</p>\n<p>here's some help on using quest and with learning to code with quest:</p>\n<p>http://textadventures.co.uk/forum/general/topic/ljjm32av4e2t9ot49k478g/help#710be61e-eae1-4af1-8363-520cc718ba1c</p>\n<p>and specifically, here's a detailed guide on learning to use (basic) Attributes and the 'if' Script:</p>\n<p>http://textadventures.co.uk/forum/samples/topic/5559/attributes-and-if-script-guide-by-hk (the first/upper part/half is on a bit of the coding structure of quest, near the middle is the start of the guide on using Attributes and the 'if' Script, and near the bottom of this link's first post is the part on doing transactions: buying/selling)</p>\n<p>(though, it's probably not easy to understand if you're new to coding, as I'm not good at explaining, better to find Pixie's and/or KV's posts/threads, as they're easier to understand than mine)</p>\n\n",
      "PostDate": "2018-06-16T21:58:47.8632522Z",
      "LastEditDate": "2018-06-16T22:01:09.927391Z",
      "link": null
    },
    {
      "PostId": "f9209e09-c0d1-466d-a694-cb202b24250a",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "There is a tutorial that might be useful:\r\nhttp://docs.textadventures.co.uk/quest/shop.html",
      "EditableFormat": "markdown",
      "HTML": "<p>There is a tutorial that might be useful:<br>\nhttp://docs.textadventures.co.uk/quest/shop.html</p>\n\n",
      "PostDate": "2018-06-16T22:28:59.7768256Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0ff16b86-d20a-4be0-8230-484d44bc171c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> the 'shop_owner.buy' and 'shop_owner.sell' Script Attributes (\"Verbs\"), need the 'CDATA' tags, for the '<,>' symbols to be parsed/understood as being the 'greater than, lesser than' operations/symbols\r\n\r\nNo, they don't.\r\n*When loading an XML document*, you need a CDATA block to tell the XML parser that the `<` and `>` characters should be passed on to the IScript parser, rather than interpreted as XML.\r\n\r\nThe script block following the `=>` operator doesn't need a CDATA block around it, because it's being handed directly to the IScript constructor; the XML parser isn't being run at that point. In this case, the CDATA tags should be around the entire script that contains the `shop_owner.buy => {` line.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>the 'shop_owner.buy' and 'shop_owner.sell' Script Attributes (\"Verbs\"), need the 'CDATA' tags, for the '&lt;,&gt;' symbols to be parsed/understood as being the 'greater than, lesser than' operations/symbols</p>\n</blockquote>\n<p>No, they don't.<br>\n<em>When loading an XML document</em>, you need a CDATA block to tell the XML parser that the <code>&lt;</code> and <code>&gt;</code> characters should be passed on to the IScript parser, rather than interpreted as XML.</p>\n<p>The script block following the <code>=&gt;</code> operator doesn't need a CDATA block around it, because it's being handed directly to the IScript constructor; the XML parser isn't being run at that point. In this case, the CDATA tags should be around the entire script that contains the <code>shop_owner.buy =&gt; {</code> line.</p>\n\n",
      "PostDate": "2018-06-17T00:59:50.2498503Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3fe3437c-64b6-4d4f-b678-2f4d1bd975ec",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(filler for getting my edited post, updated/posted)\r\n\r\n---------------\r\n\r\nah, thanks for explaining it! (I'm still pretty new/ignorant of wrappers, compiling, translating, etc, parsers, and etc internal coding constructs and its operations, in how quest works internally, so this explanation has been of great help in understanding it better)\r\n\r\nso, you mean like this, then (if I understand):\r\n\r\n```\r\n<game name=\"EXAMPLE\">\r\n\r\n  <attr name=\"start\" type=\"script\">\r\n\r\n    <![CDATA[\r\n\r\n      player.currency = 300\r\n\r\n      create (\"shop_owner\")\r\n      shop_owner.parent = room\r\n      shop_owner.currency = 500\r\n\r\n      create (\"katana\")\r\n      katana.parent = shop_owner\r\n      katana.price = 100\r\n\r\n      shop_owner.buy =>  {\r\n        if (katana.parent = shop_owner) {\r\n          if (player.currency >= katana.price) {\r\n            player.currency = player.currency - katana.price\r\n            shop_owner.currency = shop_owner.currency + katana.price\r\n            katana.parent = player\r\n            msg (\"You buy the katana from the shop owner\")\r\n          } else {\r\n            msg (\"You don't have enough currency to buy the katana from the shop owner\")\r\n          }\r\n        } else {\r\n          msg (\"The shop owner has no katanas to sell to you\")\r\n        }\r\n      }\r\n\r\n      shop_owner.sell => {\r\n        if (katana.parent = player) {\r\n          if (shop_owner.currency >= katana.price / 2) {\r\n            shop_owner.currency = shop_owner.currency - katana.price / 2\r\n            player.currency = player.currency + katana.price / 2\r\n            katana.parent = shop_owner\r\n            msg (\"You sell the katana to the shop owner\")\r\n          } else {\r\n            msg (\"The shop owner doesn't have enough currency to buy the katana from you\")\r\n          }\r\n        } else {\r\n          msg (\"You don't have a katana to sell to the shop owner\")\r\n        }\r\n      }\r\n\r\n      do (shop_owner, \"buy\")\r\n\r\n      do (shop_owner, \"sell\")\r\n\r\n    ]]>\r\n\r\n  </attr>\r\n\r\n</game>\r\n\r\n<object name=\"room\">\r\n\r\n  <inherit name=\"editor_room\" />\r\n\r\n</object>\r\n\r\n<object name=\"player\">\r\n\r\n  <inherit name=\"editor_object\" />\r\n  <inherit name=\"editor_player\" />\r\n\r\n  <attr name=\"parent\" type=\"object\">room</attr>\r\n\r\n</object>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>(filler for getting my edited post, updated/posted)</p>\n<hr>\n<p>ah, thanks for explaining it! (I'm still pretty new/ignorant of wrappers, compiling, translating, etc, parsers, and etc internal coding constructs and its operations, in how quest works internally, so this explanation has been of great help in understanding it better)</p>\n<p>so, you mean like this, then (if I understand):</p>\n<pre><code>&lt;game name=\"EXAMPLE\"&gt;\n\n  &lt;attr name=\"start\" type=\"script\"&gt;\n\n    &lt;![CDATA[\n\n      player.currency = 300\n\n      create (\"shop_owner\")\n      shop_owner.parent = room\n      shop_owner.currency = 500\n\n      create (\"katana\")\n      katana.parent = shop_owner\n      katana.price = 100\n\n      shop_owner.buy =&gt;  {\n        if (katana.parent = shop_owner) {\n          if (player.currency &gt;= katana.price) {\n            player.currency = player.currency - katana.price\n            shop_owner.currency = shop_owner.currency + katana.price\n            katana.parent = player\n            msg (\"You buy the katana from the shop owner\")\n          } else {\n            msg (\"You don't have enough currency to buy the katana from the shop owner\")\n          }\n        } else {\n          msg (\"The shop owner has no katanas to sell to you\")\n        }\n      }\n\n      shop_owner.sell =&gt; {\n        if (katana.parent = player) {\n          if (shop_owner.currency &gt;= katana.price / 2) {\n            shop_owner.currency = shop_owner.currency - katana.price / 2\n            player.currency = player.currency + katana.price / 2\n            katana.parent = shop_owner\n            msg (\"You sell the katana to the shop owner\")\n          } else {\n            msg (\"The shop owner doesn't have enough currency to buy the katana from you\")\n          }\n        } else {\n          msg (\"You don't have a katana to sell to the shop owner\")\n        }\n      }\n\n      do (shop_owner, \"buy\")\n\n      do (shop_owner, \"sell\")\n\n    ]]&gt;\n\n  &lt;/attr&gt;\n\n&lt;/game&gt;\n\n&lt;object name=\"room\"&gt;\n\n  &lt;inherit name=\"editor_room\" /&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"player\"&gt;\n\n  &lt;inherit name=\"editor_object\" /&gt;\n  &lt;inherit name=\"editor_player\" /&gt;\n\n  &lt;attr name=\"parent\" type=\"object\"&gt;room&lt;/attr&gt;\n\n&lt;/object&gt;\n</code></pre>\n\n",
      "PostDate": "2018-06-17T04:12:41.4269737Z",
      "LastEditDate": "2018-06-17T04:27:28.7627883Z",
      "link": null
    }
  ]
}
