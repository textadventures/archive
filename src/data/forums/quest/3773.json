{
  "Topic": {
    "TopicId": "3773",
    "ForumId": "10",
    "Title": "Portable Lightsource",
    "LastUpdated": "2013-07-04T12:29:53+01:00",
    "ReplyCount": 8
  },
  "Posts": [
    {
      "PostId": "25277",
      "UserId": 0,
      "Username": "Carrot",
      "UserAvatar": null,
      "UserGravatar": "12db43b39ade4bc3e479fc45c24e4f23",
      "EditableText": "Am I being thick?\n\nI created an object, Lamp.\n\nI made it switchable and I made it a lightsource.\n\nBut it seems to be always on. - Yet doesn't work as a lightsource when carried either.\n\nI found this:\n[quote=&quot;Pertex&quot;:2w695cmg]...\n\n[code:2w695cmg]\n   &lt;function name=&quot;ScopeVisibleLightsource&quot; type=&quot;objectlist&quot; parameters=&quot;lightstrength&quot;&gt;    \n    result = ScopeVisibleNotHeld()\n    result = ListCombine(result, ScopeReachableInventory())        &lt;---add this line\n    lightobjects = NewObjectList()\n    foreach (obj, result) {\n[/code:2w695cmg][/quote:2w695cmg]\n\nIn another thread ([size=85:2w695cmg][url=http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=18&amp;t=3743:2w695cmg]Making a basic 'brass lantern' that[/url:2w695cmg][/size:2w695cmg])\n\nI did that, and it solved the issue of the light not illuminating the room when it is carried.\n\nNow how do I make the damnable thing switchable?\n\nAnd is there any other neater solution than modifying a core file to sort out the carrying side of things?",
      "EditableFormat": "bbcode",
      "HTML": "Am I being thick?<br/><br/>I created an object, Lamp.<br/><br/>I made it switchable and I made it a lightsource.<br/><br/>But it seems to be always on. - Yet doesn't work as a lightsource when carried either.<br/><br/>I found this:<br/><blockquote><cite>Pertex wrote:</cite>...<br/><br/><pre><code><br/>   &lt;function name=&quot;ScopeVisibleLightsource&quot; type=&quot;objectlist&quot; parameters=&quot;lightstrength&quot;&gt;    <br/>    result = ScopeVisibleNotHeld()<br/>    result = ListCombine(result, ScopeReachableInventory())        &lt;---add this line<br/>    lightobjects = NewObjectList()<br/>    foreach (obj, result) {<br/></code></pre></blockquote><br/><br/>In another thread (<span style=\"font-size:85\"><a href=\"http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=18&amp;t=3743\" rel=\"nofollow\">Making a basic 'brass lantern' that</a></span>)<br/><br/>I did that, and it solved the issue of the light not illuminating the room when it is carried.<br/><br/>Now how do I make the damnable thing switchable?<br/><br/>And is there any other neater solution than modifying a core file to sort out the carrying side of things?",
      "PostDate": "2013-07-03T17:49:18+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25280",
      "UserId": 0,
      "Username": "Pertex",
      "UserAvatar": "5940_1369854251.gif",
      "UserGravatar": "4cc1e52f99452e841ecf4cbee9eadde9",
      "EditableText": "[quote=&quot;Carrot&quot;:320d114u]\nI made it switchable and I made it a lightsource.\nBut it seems to be always on.\n[/quote:320d114u]\nSure, there is no build-in connection between switchable and lightsource, you have to do this by script.\n\n[attachment=0:320d114u]<!-- ia0 -->lamp.jpg<!-- ia0 -->[/attachment:320d114u]\n\n[quote=&quot;Carrot&quot;:320d114u]\nAnd is there any other neater solution than modifying a core file to sort out the carrying side of things?[/quote:320d114u]\nNo, not at the moment. I changed it in the corefiles and Alex has to accept the pull request, then it will be in the next version/nightly build.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>Carrot wrote:</cite><br/>I made it switchable and I made it a lightsource.<br/>But it seems to be always on.<br/></blockquote><br/>Sure, there is no build-in connection between switchable and lightsource, you have to do this by script.<br/><br/><div><img src=\"/forumattachments/653/lamp.jpg\" alt=\"lamp.jpg\" /></div><br/><br/><blockquote><cite>Carrot wrote:</cite><br/>And is there any other neater solution than modifying a core file to sort out the carrying side of things?</blockquote><br/>No, not at the moment. I changed it in the corefiles and Alex has to accept the pull request, then it will be in the next version/nightly build.",
      "PostDate": "2013-07-03T21:24:34+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25281",
      "UserId": 0,
      "Username": "Carrot",
      "UserAvatar": null,
      "UserGravatar": "12db43b39ade4bc3e479fc45c24e4f23",
      "EditableText": "Cheers. I looked at that but didn't like leaving a blank field. I should have just tried it <!-- s;) --><img src=\"{SMILIES_PATH}/icon_wink.gif\" alt=\";)\" title=\"Wink\" /><!-- s;) -->",
      "EditableFormat": "bbcode",
      "HTML": "Cheers. I looked at that but didn't like leaving a blank field. I should have just tried it <!-- s;) --><img src=\"{SMILIES_PATH}/icon_wink.gif\" alt=\";)\" title=\"Wink\" /><!-- s;) -->",
      "PostDate": "2013-07-03T21:52:18+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25282",
      "UserId": 0,
      "Username": "Carrot",
      "UserAvatar": null,
      "UserGravatar": "12db43b39ade4bc3e479fc45c24e4f23",
      "EditableText": "Ok, that is excellent and I have it working.\n\nI have one question.  How do I prevent the player from dropping the light source in a dark room?\n\nI know I can do it by naming each room in an &quot;if&quot; script, ie &quot;if player is in this room or this room or this room etc... do not drop lamp&quot;\n\nI can see no way to query &quot;if room is dark&quot;.\n\nI am presuming it may work with &quot;if object attribute equals&quot; and an &quot;expression&quot; rather than an &quot;object&quot;\n\nBut I am not sure what to do.",
      "EditableFormat": "bbcode",
      "HTML": "Ok, that is excellent and I have it working.<br/><br/>I have one question.  How do I prevent the player from dropping the light source in a dark room?<br/><br/>I know I can do it by naming each room in an &quot;if&quot; script, ie &quot;if player is in this room or this room or this room etc... do not drop lamp&quot;<br/><br/>I can see no way to query &quot;if room is dark&quot;.<br/><br/>I am presuming it may work with &quot;if object attribute equals&quot; and an &quot;expression&quot; rather than an &quot;object&quot;<br/><br/>But I am not sure what to do.",
      "PostDate": "2013-07-04T00:03:55+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25283",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Not sure, as I haven't experimented with lightness and darkness, but looking at CheckDarkness in coredescriptions.aslx, it appears a dark room will have a Boolean attribute &quot;dark&quot; set to true. So you can do:\n\n[code:32ssunu0]if (GetBoolean(room, &quot;dark&quot;))[/code:32ssunu0]\n\nto check if a room is dark.",
      "EditableFormat": "bbcode",
      "HTML": "Not sure, as I haven't experimented with lightness and darkness, but looking at CheckDarkness in coredescriptions.aslx, it appears a dark room will have a Boolean attribute &quot;dark&quot; set to true. So you can do:<br/><br/><pre><code>if (GetBoolean(room, &quot;dark&quot;))</code></pre><br/><br/>to check if a room is dark.",
      "PostDate": "2013-07-04T00:19:53+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25284",
      "UserId": 0,
      "Username": "Carrot",
      "UserAvatar": null,
      "UserGravatar": "12db43b39ade4bc3e479fc45c24e4f23",
      "EditableText": "*runs off to try it*\n\n[edit]\n\nIt worked (sort of), needed a slight tweak.  And thanks to this thread -&gt; [url=http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=10&amp;t=3691:21joje8d]How to: current location?[/url:21joje8d], I found that tweak.\n\nI set the script to expression, and both of the following codes worked <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D -->\n\n[code:21joje8d](GetBoolean(game&#46;pov&#46;parent, &quot;dark&quot;))[/code:21joje8d]\n\n[code:21joje8d](GetBoolean(player&#46;parent, &quot;dark&quot;))[/code:21joje8d]\n\nI currently have this in my test game\n\n[code:21joje8d]&lt;object name=&quot;lamp&quot;&gt;\n  &lt;inherit name=&quot;editor_object&quot; /&gt;\n  &lt;inherit name=&quot;switchable&quot; /&gt;\n  &lt;alias&gt;lamp&lt;/alias&gt;\n  &lt;take /&gt;\n  &lt;switchedondesc&gt;It is emitting a steady, bright light&#46;&lt;/switchedondesc&gt;\n  &lt;switchedoffdesc&gt;It is currently off&#46;&lt;/switchedoffdesc&gt;\n  &lt;look&gt;A simple lamp&#46;&lt;/look&gt;\n  &lt;onswitchon type=&quot;script&quot;&gt;\n    SetObjectLightstrength (lamp, &quot;strong&quot;)\n  &lt;/onswitchon&gt;\n  &lt;onswitchoff type=&quot;script&quot;&gt;\n    SetObjectLightstrength (lamp, &quot;&quot;)\n  &lt;/onswitchoff&gt;\n  &lt;drop type=&quot;script&quot;&gt;\n    if ((GetBoolean(game&#46;pov&#46;parent, &quot;dark&quot;))) {\n      msg (&quot;You don't think it wise to leave a light behind when exploring dark places&quot;)\n    }\n    else {\n      msg (&quot;You drop the lamp&#46;&quot;)\n    }\n  &lt;/drop&gt;\n&lt;/object&gt;\n\n&lt;function name=&quot;ScopeVisibleLightsource&quot; parameters=&quot;lightstrength&quot; type=&quot;objectlist&quot;&gt;\n  result = ScopeVisibleNotHeld()\n  result = ListCombine(result, ScopeReachableInventory())\n  lightobjects = NewObjectList()\n  foreach (obj, result) {\n    if (GetBoolean(obj, &quot;lightsource&quot;) and GetString(obj, &quot;lightstrength&quot;) = lightstrength) {\n      list add (lightobjects, obj)\n    }\n  }\n  exits = ScopeExits()\n  foreach (obj, exits) {\n    if (GetBoolean(obj, &quot;lightsource&quot;) and GetString(obj, &quot;lightstrength&quot;) = lightstrength) {\n      list add (lightobjects, obj)\n    }\n  }\n  return (lightobjects)\n&lt;/function&gt;[/code:21joje8d]",
      "EditableFormat": "bbcode",
      "HTML": "*runs off to try it*<br/><br/>[edit]<br/><br/>It worked (sort of), needed a slight tweak.  And thanks to this thread -&gt; <a href=\"http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=10&amp;t=3691\" rel=\"nofollow\">How to: current location?</a>, I found that tweak.<br/><br/>I set the script to expression, and both of the following codes worked <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --><br/><br/><pre><code>(GetBoolean(game&#46;pov&#46;parent, &quot;dark&quot;))</code></pre><br/><br/><pre><code>(GetBoolean(player&#46;parent, &quot;dark&quot;))</code></pre><br/><br/>I currently have this in my test game<br/><br/><pre><code>&lt;object name=&quot;lamp&quot;&gt;<br/>  &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>  &lt;inherit name=&quot;switchable&quot; /&gt;<br/>  &lt;alias&gt;lamp&lt;/alias&gt;<br/>  &lt;take /&gt;<br/>  &lt;switchedondesc&gt;It is emitting a steady, bright light&#46;&lt;/switchedondesc&gt;<br/>  &lt;switchedoffdesc&gt;It is currently off&#46;&lt;/switchedoffdesc&gt;<br/>  &lt;look&gt;A simple lamp&#46;&lt;/look&gt;<br/>  &lt;onswitchon type=&quot;script&quot;&gt;<br/>    SetObjectLightstrength (lamp, &quot;strong&quot;)<br/>  &lt;/onswitchon&gt;<br/>  &lt;onswitchoff type=&quot;script&quot;&gt;<br/>    SetObjectLightstrength (lamp, &quot;&quot;)<br/>  &lt;/onswitchoff&gt;<br/>  &lt;drop type=&quot;script&quot;&gt;<br/>    if ((GetBoolean(game&#46;pov&#46;parent, &quot;dark&quot;))) {<br/>      msg (&quot;You don't think it wise to leave a light behind when exploring dark places&quot;)<br/>    }<br/>    else {<br/>      msg (&quot;You drop the lamp&#46;&quot;)<br/>    }<br/>  &lt;/drop&gt;<br/>&lt;/object&gt;<br/><br/>&lt;function name=&quot;ScopeVisibleLightsource&quot; parameters=&quot;lightstrength&quot; type=&quot;objectlist&quot;&gt;<br/>  result = ScopeVisibleNotHeld()<br/>  result = ListCombine(result, ScopeReachableInventory())<br/>  lightobjects = NewObjectList()<br/>  foreach (obj, result) {<br/>    if (GetBoolean(obj, &quot;lightsource&quot;) and GetString(obj, &quot;lightstrength&quot;) = lightstrength) {<br/>      list add (lightobjects, obj)<br/>    }<br/>  }<br/>  exits = ScopeExits()<br/>  foreach (obj, exits) {<br/>    if (GetBoolean(obj, &quot;lightsource&quot;) and GetString(obj, &quot;lightstrength&quot;) = lightstrength) {<br/>      list add (lightobjects, obj)<br/>    }<br/>  }<br/>  return (lightobjects)<br/>&lt;/function&gt;</code></pre>",
      "PostDate": "2013-07-04T00:22:32+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25323",
      "UserId": 0,
      "Username": "Carrot",
      "UserAvatar": null,
      "UserGravatar": "12db43b39ade4bc3e479fc45c24e4f23",
      "EditableText": "I wrote out the steps to add this through the GUI for another forum member in this thread: [url=http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=10&amp;t=3780:c8dwn9nu]Flashlights[/url:c8dwn9nu], so thought I would add that here also:\n\n[quote=&quot;Carrot&quot;:c8dwn9nu][snip]\n\n[b:c8dwn9nu]Make a switchable, portable lightsource:[/b:c8dwn9nu]\n[list=1:c8dwn9nu]\n[*:c8dwn9nu]Create a new object - we will call it lamp.[/*:m:c8dwn9nu]\n[*:c8dwn9nu]On the [b:c8dwn9nu][Setup][/b:c8dwn9nu] tab, give it a description (Text). e.g. [i:c8dwn9nu]A simple lamp.[/i:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]On the [b:c8dwn9nu][Inventory][/b:c8dwn9nu] tab, mark the check-box [b:c8dwn9nu]Object can be taken[/b:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]On the [b:c8dwn9nu][Options][/b:c8dwn9nu] tab, make it [b:c8dwn9nu]Switchable[/b:c8dwn9nu] from the drop-down menu.[/*:m:c8dwn9nu]\n[*:c8dwn9nu]Add [b:c8dwn9nu]Extra object description when switched on:[/b:c8dwn9nu], e.g. [i:c8dwn9nu]It is emitting a steady light.[/i:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]Add [b:c8dwn9nu]Extra object description when switched off:[/b:c8dwn9nu], e.g. [i:c8dwn9nu]It is currently off[/i:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu][list=i:c8dwn9nu][*:c8dwn9nu]Under [b:c8dwn9nu]after switching on the object:[/b:c8dwn9nu], click on [b:c8dwn9nu][Add new script][/b:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]scroll down the options to the section marked [b:c8dwn9nu]Darkness[/b:c8dwn9nu] and select [b:c8dwn9nu]Set object brightness[/b:c8dwn9nu] and click [b:c8dwn9nu][Add][/b:c8dwn9nu] at the bottom of the pop-up window.[/*:m:c8dwn9nu]\n[*:c8dwn9nu]You will now hav 4 drop-down boxes, in the [b:c8dwn9nu]2nd[/b:c8dwn9nu]drop-down, choose the object we are making a switchable lightsource - in this case [b:c8dwn9nu]lamp[/b:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]and in the [b:c8dwn9nu]4th[/b:c8dwn9nu] drop-down, choose [b:c8dwn9nu]strong[/b:c8dwn9nu][/*:m:c8dwn9nu][/list:o:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]Under [b:c8dwn9nu]after switching off the object:[/b:c8dwn9nu], follow the instructions above, but leave the 4th drop-down blank.[/*:m:c8dwn9nu][/list:o:c8dwn9nu]\n\n[b:c8dwn9nu]Making a carried lightsource illuminate a room:[/b:c8dwn9nu]\n[list=1:c8dwn9nu][*:c8dwn9nu]In the bottom left-hand corner of the GUI, click on [b:c8dwn9nu]Filter[/b:c8dwn9nu] and place a check-mark next to [b:c8dwn9nu]Show Library Elements[/b:c8dwn9nu], if one is not already present.[/*:m:c8dwn9nu]\n[*:c8dwn9nu]In the search box above the left pane type [i:c8dwn9nu]ScopeVisibleLightsource[/i:c8dwn9nu] (it is not case sensitive) and search.[/*:m:c8dwn9nu]\n[*:c8dwn9nu]Select [b:c8dwn9nu]ScopeVisibleLightsource[/b:c8dwn9nu] from the list on the left, and at the top of the GUI there should be a yellowish bar that says [b:c8dwn9nu]From library CoreScopes.aslx[/b:c8dwn9nu], follow that bar across and click [b:c8dwn9nu][Copy][/b:c8dwn9nu] (otherwise you will not be able to edit it).[/*:m:c8dwn9nu]\n[*:c8dwn9nu]Scroll to the bottom of the GUI and click [b:c8dwn9nu][Add new script][/b:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]Scroll down to [b:c8dwn9nu]Variables[/b:c8dwn9nu], select [b:c8dwn9nu]Set a variable or attribute[/b:c8dwn9nu] and click [b:c8dwn9nu][Add][/b:c8dwn9nu] at the bottom of the window.[/*:m:c8dwn9nu]\n[*:c8dwn9nu]In the box next to [b:c8dwn9nu]Set variable[/b:c8dwn9nu] type [i:c8dwn9nu]result[/i:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]and in the box next to [b:c8dwn9nu]expression[/b:c8dwn9nu] type [i:c8dwn9nu]ListCombine(result, ScopeReachableInventory())[/i:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]This step, I don't know if it matters or not - at the top of the script window is a tool bar, on it click the [b:c8dwn9nu]up arrow[/b:c8dwn9nu] until your newly created script sits between [b:c8dwn9nu]Set variable result = ScopeVisibleNotHeld()[/b:c8dwn9nu] and [b:c8dwn9nu]Set variable lightobjects = new object list[/b:c8dwn9nu][/*:m:c8dwn9nu][/list:o:c8dwn9nu]\n\n[b:c8dwn9nu]Preventing the player from dropping a light source in a dark area:[/b:c8dwn9nu]\n[list=1:c8dwn9nu]\n[*:c8dwn9nu]Select your object from the left hand pane, e.g. [b:c8dwn9nu]lamp[/b:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]Select the [b:c8dwn9nu][Inventory][/b:c8dwn9nu] tab.[/*:m:c8dwn9nu]\n[*:c8dwn9nu]Under [b:c8dwn9nu]Drop[/b:c8dwn9nu] select [b:c8dwn9nu]Run script[/b:c8dwn9nu] from the drop down box[/*:m:c8dwn9nu]\n[*:c8dwn9nu]Click [b:c8dwn9nu][Add new script][/b:c8dwn9nu] and click [b:c8dwn9nu][If][/b:c8dwn9nu] at the top of the window.[/*:m:c8dwn9nu]\n[*:c8dwn9nu]Make sure the drop-down at the beginning of the If statement is set to [b:c8dwn9nu]expression[/b:c8dwn9nu] and in the blank box next to it type [i:c8dwn9nu](GetBoolean(game.pov.parent, &quot;dark&quot;))[/i:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]Click the [b:c8dwn9nu][Add new script][/b:c8dwn9nu] directly below the if statement you just created and above the button [b:c8dwn9nu][Add Else If][/b:c8dwn9nu], and click [b:c8dwn9nu][Print][/b:c8dwn9nu] at the top of the window.[/*:m:c8dwn9nu]\n[*:c8dwn9nu]Make sure the drop-down next to [b:c8dwn9nu]Print[/b:c8dwn9nu] is set to [b:c8dwn9nu]message[/b:c8dwn9nu] and type a message into the box to the right, e.g. [i:c8dwn9nu]You don't think it wise to leave a light behind when exploring dark places[/i:c8dwn9nu][/*:m:c8dwn9nu]\n[*:c8dwn9nu]Click [b:c8dwn9nu][Add Else][/b:c8dwn9nu] then click the [b:c8dwn9nu][Add new script][/b:c8dwn9nu] that just appeared, click [b:c8dwn9nu][Print][/b:c8dwn9nu] and add another message, e.g. [i:c8dwn9nu]You drop the lamp[/i:c8dwn9nu].[/*:m:c8dwn9nu][/list:o:c8dwn9nu]\n\nHope this is helpful (and that I have copied the steps out correctly!\n\nDirect thanks goes to [url=http&#58;//forum&#46;textadventures&#46;co&#46;uk/memberlist&#46;php?mode=viewprofile&amp;u=5940:c8dwn9nu]Pertex[/url:c8dwn9nu], and [url=http&#58;//forum&#46;textadventures&#46;co&#46;uk/memberlist&#46;php?mode=viewprofile&amp;u=6579:c8dwn9nu]jayanbonne[/url:c8dwn9nu] for help specific to my queries, and other threads I have already linked to.[/quote:c8dwn9nu]",
      "EditableFormat": "bbcode",
      "HTML": "I wrote out the steps to add this through the GUI for another forum member in this thread: <a href=\"http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=10&amp;t=3780\" rel=\"nofollow\">Flashlights</a>, so thought I would add that here also:<br/><br/><blockquote><cite>Carrot wrote:</cite>[snip]<br/><br/><span style=\"font-weight:bold;\">Make a switchable, portable lightsource:</span><br/>[list=1]<br/>[*]Create a new object - we will call it lamp.[/*:m]<br/>[*]On the <span style=\"font-weight:bold;\">[Setup]</span> tab, give it a description (Text). e.g. <span style=\"font-style:italic;\">A simple lamp.</span>[/*:m]<br/>[*]On the <span style=\"font-weight:bold;\">[Inventory]</span> tab, mark the check-box <span style=\"font-weight:bold;\">Object can be taken</span>[/*:m]<br/>[*]On the <span style=\"font-weight:bold;\">[Options]</span> tab, make it <span style=\"font-weight:bold;\">Switchable</span> from the drop-down menu.[/*:m]<br/>[*]Add <span style=\"font-weight:bold;\">Extra object description when switched on:</span>, e.g. <span style=\"font-style:italic;\">It is emitting a steady light.</span>[/*:m]<br/>[*]Add <span style=\"font-weight:bold;\">Extra object description when switched off:</span>, e.g. <span style=\"font-style:italic;\">It is currently off</span>[/*:m]<br/>[*][list=i][*]Under <span style=\"font-weight:bold;\">after switching on the object:</span>, click on <span style=\"font-weight:bold;\">[Add new script]</span>[/*:m]<br/>[*]scroll down the options to the section marked <span style=\"font-weight:bold;\">Darkness</span> and select <span style=\"font-weight:bold;\">Set object brightness</span> and click <span style=\"font-weight:bold;\">[Add]</span> at the bottom of the pop-up window.[/*:m]<br/>[*]You will now hav 4 drop-down boxes, in the <span style=\"font-weight:bold;\">2nd</span>drop-down, choose the object we are making a switchable lightsource - in this case <span style=\"font-weight:bold;\">lamp</span>[/*:m]<br/>[*]and in the <span style=\"font-weight:bold;\">4th</span> drop-down, choose <span style=\"font-weight:bold;\">strong</span>[/*:m][/list:o][/*:m]<br/>[*]Under <span style=\"font-weight:bold;\">after switching off the object:</span>, follow the instructions above, but leave the 4th drop-down blank.[/*:m][/list:o]<br/><br/><span style=\"font-weight:bold;\">Making a carried lightsource illuminate a room:</span><br/>[list=1][*]In the bottom left-hand corner of the GUI, click on <span style=\"font-weight:bold;\">Filter</span> and place a check-mark next to <span style=\"font-weight:bold;\">Show Library Elements</span>, if one is not already present.[/*:m]<br/>[*]In the search box above the left pane type <span style=\"font-style:italic;\">ScopeVisibleLightsource</span> (it is not case sensitive) and search.[/*:m]<br/>[*]Select <span style=\"font-weight:bold;\">ScopeVisibleLightsource</span> from the list on the left, and at the top of the GUI there should be a yellowish bar that says <span style=\"font-weight:bold;\">From library CoreScopes.aslx</span>, follow that bar across and click <span style=\"font-weight:bold;\">[Copy]</span> (otherwise you will not be able to edit it).[/*:m]<br/>[*]Scroll to the bottom of the GUI and click <span style=\"font-weight:bold;\">[Add new script]</span>[/*:m]<br/>[*]Scroll down to <span style=\"font-weight:bold;\">Variables</span>, select <span style=\"font-weight:bold;\">Set a variable or attribute</span> and click <span style=\"font-weight:bold;\">[Add]</span> at the bottom of the window.[/*:m]<br/>[*]In the box next to <span style=\"font-weight:bold;\">Set variable</span> type <span style=\"font-style:italic;\">result</span>[/*:m]<br/>[*]and in the box next to <span style=\"font-weight:bold;\">expression</span> type <span style=\"font-style:italic;\">ListCombine(result, ScopeReachableInventory())</span>[/*:m]<br/>[*]This step, I don't know if it matters or not - at the top of the script window is a tool bar, on it click the <span style=\"font-weight:bold;\">up arrow</span> until your newly created script sits between <span style=\"font-weight:bold;\">Set variable result = ScopeVisibleNotHeld()</span> and <span style=\"font-weight:bold;\">Set variable lightobjects = new object list</span>[/*:m][/list:o]<br/><br/><span style=\"font-weight:bold;\">Preventing the player from dropping a light source in a dark area:</span><br/>[list=1]<br/>[*]Select your object from the left hand pane, e.g. <span style=\"font-weight:bold;\">lamp</span>[/*:m]<br/>[*]Select the <span style=\"font-weight:bold;\">[Inventory]</span> tab.[/*:m]<br/>[*]Under <span style=\"font-weight:bold;\">Drop</span> select <span style=\"font-weight:bold;\">Run script</span> from the drop down box[/*:m]<br/>[*]Click <span style=\"font-weight:bold;\">[Add new script]</span> and click <span style=\"font-weight:bold;\">[If]</span> at the top of the window.[/*:m]<br/>[*]Make sure the drop-down at the beginning of the If statement is set to <span style=\"font-weight:bold;\">expression</span> and in the blank box next to it type <span style=\"font-style:italic;\">(GetBoolean(game.pov.parent, &quot;dark&quot;))</span>[/*:m]<br/>[*]Click the <span style=\"font-weight:bold;\">[Add new script]</span> directly below the if statement you just created and above the button <span style=\"font-weight:bold;\">[Add Else If]</span>, and click <span style=\"font-weight:bold;\">[Print]</span> at the top of the window.[/*:m]<br/>[*]Make sure the drop-down next to <span style=\"font-weight:bold;\">Print</span> is set to <span style=\"font-weight:bold;\">message</span> and type a message into the box to the right, e.g. <span style=\"font-style:italic;\">You don't think it wise to leave a light behind when exploring dark places</span>[/*:m]<br/>[*]Click <span style=\"font-weight:bold;\">[Add Else]</span> then click the <span style=\"font-weight:bold;\">[Add new script]</span> that just appeared, click <span style=\"font-weight:bold;\">[Print]</span> and add another message, e.g. <span style=\"font-style:italic;\">You drop the lamp</span>.[/*:m][/list:o]<br/><br/>Hope this is helpful (and that I have copied the steps out correctly!<br/><br/>Direct thanks goes to <a href=\"http&#58;//forum&#46;textadventures&#46;co&#46;uk/memberlist&#46;php?mode=viewprofile&amp;u=5940\" rel=\"nofollow\">Pertex</a>, and <a href=\"http&#58;//forum&#46;textadventures&#46;co&#46;uk/memberlist&#46;php?mode=viewprofile&amp;u=6579\" rel=\"nofollow\">jayanbonne</a> for help specific to my queries, and other threads I have already linked to.</blockquote>",
      "PostDate": "2013-07-04T11:35:23+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25324",
      "UserId": 0,
      "Username": "Pertex",
      "UserAvatar": "5940_1369854251.gif",
      "UserGravatar": "4cc1e52f99452e841ecf4cbee9eadde9",
      "EditableText": "If you don't mind I would add your tutorial to the wiki. Could you perhaps create some screenshots of the scripts or  append your game file so that I can create the images?",
      "EditableFormat": "bbcode",
      "HTML": "If you don't mind I would add your tutorial to the wiki. Could you perhaps create some screenshots of the scripts or  append your game file so that I can create the images?",
      "PostDate": "2013-07-04T11:53:14+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25325",
      "UserId": 0,
      "Username": "Carrot",
      "UserAvatar": null,
      "UserGravatar": "12db43b39ade4bc3e479fc45c24e4f23",
      "EditableText": "[quote=&quot;Pertex&quot;:36ev50as]If you don't mind I would add your tutorial to the wiki. Could you perhaps create some screenshots of the scripts or  append your game file so that I can create the images?[/quote:36ev50as]\n\nSure I have just created a simple 2 room game to showcase these options <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->\n\n[attachment=0:36ev50as]<!-- ia0 -->PortableLightsource.aslx<!-- ia0 -->[/attachment:36ev50as]\n\n[edit]\n\nThis includes adding the verbs &quot;Switch on&quot; and &quot;Switch off&quot; to the Inventory verbs pane. (should this not be a default action for switchable, takable objects?)\n\n[edit#2]\n\nNote also the conditional script for moving to a dark room placed on the exit of the light room.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>Pertex wrote:</cite>If you don't mind I would add your tutorial to the wiki. Could you perhaps create some screenshots of the scripts or  append your game file so that I can create the images?</blockquote><br/><br/>Sure I have just created a simple 2 room game to showcase these options <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --><br/><br/><div><a href=\"/forumattachments/656/PortableLightsource.aslx\">PortableLightsource.aslx</a></div><br/><br/>[edit]<br/><br/>This includes adding the verbs &quot;Switch on&quot; and &quot;Switch off&quot; to the Inventory verbs pane. (should this not be a default action for switchable, takable objects?)<br/><br/>[edit#2]<br/><br/>Note also the conditional script for moving to a dark room placed on the exit of the light room.",
      "PostDate": "2013-07-04T12:29:53+01:00",
      "LastEditDate": null
    }
  ]
}