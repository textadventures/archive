{
  "Topic": {
    "TopicId": "tad47undpemlc6uhwij8rg",
    "ForumId": "10",
    "Title": "Moving Panes/ Mobile UI [Solved!]",
    "LastUpdated": "2018-06-25T11:35:27.0161047Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "57c4639a-5ff8-4a49-bdd7-ec89bd744c3a",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "My game uses the custom command pane (and I added the compass, inventory and status while I was at it), which works well on desktop browsers. When running the game on a mobile browser though, nothing from the right side is visible. Is there a common workaround for this?\r\n\r\nWhat I'd really like to do, is fix the custom command button to the bottom of the screen (I would then add another button for inventory and look, and ditch the compass and status). I have the text box turned off, so the UI would then just use those buttons and hyperlinks. \r\n\r\nSo does anyone know how to move the panes to the bottom? Would this let them appear on mobile browsers?",
      "EditableFormat": "markdown",
      "HTML": "<p>My game uses the custom command pane (and I added the compass, inventory and status while I was at it), which works well on desktop browsers. When running the game on a mobile browser though, nothing from the right side is visible. Is there a common workaround for this?</p>\n<p>What I'd really like to do, is fix the custom command button to the bottom of the screen (I would then add another button for inventory and look, and ditch the compass and status). I have the text box turned off, so the UI would then just use those buttons and hyperlinks.</p>\n<p>So does anyone know how to move the panes to the bottom? Would this let them appear on mobile browsers?</p>\n\n",
      "PostDate": "2018-06-25T11:35:27.0161047Z",
      "LastEditDate": "2018-06-27T17:43:16.6876715Z",
      "link": null
    },
    {
      "PostId": "18a0333d-a1fd-4134-ba1f-e3e3fb834a1d",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "On mobile, there might not be spave for a sidebar. So the sidebar is minimised, and there's a button next to the command bar that makes it appear.\r\n\r\nNot sure if moving it to the bottom would work for you, but there's got to be some way to make it work. Probably by overriding a bunch of JS functions.",
      "EditableFormat": "markdown",
      "HTML": "<p>On mobile, there might not be spave for a sidebar. So the sidebar is minimised, and there's a button next to the command bar that makes it appear.</p>\n<p>Not sure if moving it to the bottom would work for you, but there's got to be some way to make it work. Probably by overriding a bunch of JS functions.</p>\n\n",
      "PostDate": "2018-06-25T13:13:14.3306149Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b21fcf87-d3d1-401e-a8a9-876db99da978",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I tried reactivating the command bar and tested on mobile. The + button beside the command prompt pulled up a few command buttons, but none of them were the custom command I added (visible on the sidebar on desktop). \r\n\r\nAny idea which JS functions I should look into to try moving the custom command pane to the bottom? Maybe I could put it into the txtCommandDiv element?\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I tried reactivating the command bar and tested on mobile. The + button beside the command prompt pulled up a few command buttons, but none of them were the custom command I added (visible on the sidebar on desktop).</p>\n<p>Any idea which JS functions I should look into to try moving the custom command pane to the bottom? Maybe I could put it into the txtCommandDiv element?</p>\n\n",
      "PostDate": "2018-06-26T00:26:06.9650835Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dfb071d7-e579-44b3-bd1f-dfcd3b2e2e81",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It would appear that the elements of interest are: #gamePanes and #commandPane (which is inside the #gamePanes div). I tried to use:\r\n\r\n    JS.setCss(\"#gamePanes\", \"position: fixed; bottom: 0; left: 0\")\r\n\r\nBut that didn't work. I'm realizing though that even if I succeed in moving the panes to the bottom, that doesn't mean they'll appear on the mobile browser version, much like the status bar is not shown, despite the fact that it is pinned to the top (and therefore doesn't squeeze the screen horizontally).\r\n\r\nDoes anyone know what functions in Quest control whether or not elements appear on mobile browsers vs desktop browsers? There seems to be some code dedicated to the mobile experience, since a \"+\" button appears in the #txtCommandDiv on mobile that isn't visible on desktop...\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>It would appear that the elements of interest are: #gamePanes and #commandPane (which is inside the #gamePanes div). I tried to use:</p>\n<pre><code>JS.setCss(\"#gamePanes\", \"position: fixed; bottom: 0; left: 0\")\n</code></pre>\n<p>But that didn't work. I'm realizing though that even if I succeed in moving the panes to the bottom, that doesn't mean they'll appear on the mobile browser version, much like the status bar is not shown, despite the fact that it is pinned to the top (and therefore doesn't squeeze the screen horizontally).</p>\n<p>Does anyone know what functions in Quest control whether or not elements appear on mobile browsers vs desktop browsers? There seems to be some code dedicated to the mobile experience, since a \"+\" button appears in the #txtCommandDiv on mobile that isn't visible on desktop...</p>\n\n",
      "PostDate": "2018-06-26T02:11:56.4784418Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "44e6ed85-ac38-4aaa-ace2-5c2cea7bc407",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello.\r\n\r\nDrop this in your \"User interface initialisation\" script, and see if you like it:\r\n\r\n```\r\n// Using a 2 second timeout to give the page time to load.\r\nSetTimeout (2) {\r\n  cmds = ProcessText(\"{command:Look}&emsp;{command:Wait}\")\r\n  s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\">\"\r\n  s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\r\n  s = s + Chr(60) + \"/div>\"\r\n  JS.eval (\"var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));\")\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello.</p>\n<p>Drop this in your \"User interface initialisation\" script, and see if you like it:</p>\n<pre><code>// Using a 2 second timeout to give the page time to load.\nSetTimeout (2) {\n  cmds = ProcessText(\"{command:Look}&amp;emsp;{command:Wait}\")\n  s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\"&gt;\"\n  s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\n  s = s + Chr(60) + \"/div&gt;\"\n  JS.eval (\"var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));\")\n}\n</code></pre>\n\n",
      "PostDate": "2018-06-26T02:24:27.8309029Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f6bea0a0-d34a-400d-85e3-95e29179fa30",
      "UserId": 363629,
      "Username": "msmud99",
      "AvatarUrl": "https://secure.gravatar.com/avatar/923ed66643197e2dfdc3554e2f9c5b05?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello,\r\n\r\nand apropos User interface initialisation\" script:   I want to publish my adventure in 2 Versions -- Story-mode (incl. 'help' such as panes, Hyperlinks etc) and hard-core-mode (without the help, text-only).  Is there a way to switch panes on/off after the start of the game, i.e. via a question hard core on/off ? Or do I have to revert back to Publishing 2 Versions ?",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello,</p>\n<p>and apropos User interface initialisation\" script:   I want to publish my adventure in 2 Versions -- Story-mode (incl. 'help' such as panes, Hyperlinks etc) and hard-core-mode (without the help, text-only).  Is there a way to switch panes on/off after the start of the game, i.e. via a question hard core on/off ? Or do I have to revert back to Publishing 2 Versions ?</p>\n\n",
      "PostDate": "2018-06-26T08:41:51.0541892Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e45a2240-856c-4674-8e4a-c7f786804442",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you Richard Headkid! I just tested that code on mobile web and it is exactly what I wanted. With a little tweaking, I'm happy with how the UI looks on both mobile and desktop. The one remaining issue is the status pane. I'm only using it to display score, but for the moment that is remains missing on mobile.\r\n\r\nCan I do something similar to what you showed above with the status pane, to move it to the bottom of the screen, so I would have my commands \"Ship's Computer; Look; Inventory\" and then \"Score: 0\" next to them?",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you Richard Headkid! I just tested that code on mobile web and it is exactly what I wanted. With a little tweaking, I'm happy with how the UI looks on both mobile and desktop. The one remaining issue is the status pane. I'm only using it to display score, but for the moment that is remains missing on mobile.</p>\n<p>Can I do something similar to what you showed above with the status pane, to move it to the bottom of the screen, so I would have my commands \"Ship's Computer; Look; Inventory\" and then \"Score: 0\" next to them?</p>\n\n",
      "PostDate": "2018-06-26T11:08:52.4535095Z",
      "LastEditDate": "2018-06-26T12:00:33.5088006Z",
      "link": null
    },
    {
      "PostId": "65eec7b6-0b5a-4859-aa0f-e0de6b77fd75",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Is there a way to switch panes on/off after the start of the game, i.e. via a question hard core on/off ?\r\n\r\n```\r\n// Show the panes\r\nJS.uiHide(\"#gamePanes\")\r\n```\r\n\r\n```\r\n// Hide the panes\r\nJS.uiShow(\"#gamePanes\")\r\n```\r\n\r\n---\r\n> Can I do something similar to what you showed above with the status pane, to move it to the bottom of the screen, so I would have my commands \"Ship's Computer; Look; Inventory\" and then \"Score: 0\" next to them?\r\n\r\n```\r\nSetTimeout (2) {\r\n  cmds = ProcessText(\"{command:Look}&emsp;{command:Wait}\" + Chr(60) + \"span id=\\\"custom-score-div\\\">\" + Chr(60) + \"br/>Score: {game.score}\" + Chr(60) + \"/span>\")\r\n  s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;padding-bottom:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\">\"\r\n  s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\r\n  s = s + Chr(60) + \"/div>\"\r\n  JS.eval (\"var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));\")\r\n}\r\n```\r\n\r\n---\r\nThat will put it underneath the command prompt.  \r\n\r\n![image](https://user-images.githubusercontent.com/30656341/41931988-576ab846-7945-11e8-8d65-569dcd160a8d.png)\r\n\r\n---\r\nIf you want it stuck to the bottom of the screen, you'd have to fiddle with the CSS settings.  I would advise to just let it come after the txtCommandDiv element.  It's much easier that way.\r\n\r\n---\r\n**EDIT**\r\n\r\nThe score needs to be updated, and I forgot to add that.\r\n\r\nSee this post:\r\nhttp://textadventures.co.uk/forum/quest/topic/tad47undpemlc6uhwij8rg/moving-panes-mobile-ui#67a9cbf7-f3bf-4efc-bac4-f8c3aa20919c",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Is there a way to switch panes on/off after the start of the game, i.e. via a question hard core on/off ?</p>\n</blockquote>\n<pre><code>// Show the panes\nJS.uiHide(\"#gamePanes\")\n</code></pre>\n<pre><code>// Hide the panes\nJS.uiShow(\"#gamePanes\")\n</code></pre>\n<hr>\n<blockquote>\n<p>Can I do something similar to what you showed above with the status pane, to move it to the bottom of the screen, so I would have my commands \"Ship's Computer; Look; Inventory\" and then \"Score: 0\" next to them?</p>\n</blockquote>\n<pre><code>SetTimeout (2) {\n  cmds = ProcessText(\"{command:Look}&amp;emsp;{command:Wait}\" + Chr(60) + \"span id=\\\"custom-score-div\\\"&gt;\" + Chr(60) + \"br/&gt;Score: {game.score}\" + Chr(60) + \"/span&gt;\")\n  s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;padding-bottom:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\"&gt;\"\n  s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\n  s = s + Chr(60) + \"/div&gt;\"\n  JS.eval (\"var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));\")\n}\n</code></pre>\n<hr>\n<p>That will put it underneath the command prompt.</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41931988-576ab846-7945-11e8-8d65-569dcd160a8d.png\" alt=\"image\"></p>\n<hr>\n<p>If you want it stuck to the bottom of the screen, you'd have to fiddle with the CSS settings.  I would advise to just let it come after the txtCommandDiv element.  It's much easier that way.</p>\n<hr>\n<p><strong>EDIT</strong></p>\n<p>The score needs to be updated, and I forgot to add that.</p>\n<p>See this post:<br>\nhttp://textadventures.co.uk/forum/quest/topic/tad47undpemlc6uhwij8rg/moving-panes-mobile-ui#67a9cbf7-f3bf-4efc-bac4-f8c3aa20919c</p>\n\n",
      "PostDate": "2018-06-26T18:37:20.7091319Z",
      "LastEditDate": "2018-06-26T20:57:21.1270862Z",
      "link": null
    },
    {
      "PostId": "1832f4b7-38bd-48bd-b26a-a8d2223decde",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "NOTE\r\n\r\nWhen I post code, I use ```\" + Chr(60) + \"``` instead of ```<``` so the online authors can paste in my code without causing an error.\r\n\r\nSo, my ```\"\" + Chr(60) + \"br/>\"``` is really just ```\"<br/>\"```.",
      "EditableFormat": "markdown",
      "HTML": "<p>NOTE</p>\n<p>When I post code, I use <code>\" + Chr(60) + \"</code> instead of <code>&lt;</code> so the online authors can paste in my code without causing an error.</p>\n<p>So, my <code>\"\" + Chr(60) + \"br/&gt;\"</code> is really just <code>\"&lt;br/&gt;\"</code>.</p>\n\n",
      "PostDate": "2018-06-26T19:06:57.8602437Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7645d34f-64b9-4727-8826-cfcf9dd92e91",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "We can also add buttons:\r\n\r\n```\r\n  // Put your custom commands here, separated by ;\r\n  // Feel free to replace \"jump;help\" as I only used them for the example\r\n  customcmds = \"jump;help\"\r\n  // Everything else is internal.\r\n  customcmds = Split(customcmds, \";\")\r\n  foreach (cmd, customcmds) {\r\n    JS.eval (\"$('#controlButtons').append(\\\"\"+Chr(60)+\"button id=\\\\\\\"cmd\" + CapFirst(cmd) + \"\\\\\\\" onclick=\\\\\\\"sendCommand('\" + cmd + \"')\\\\\\\" class=\\\\\\\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\\\\\\\" role=\\\\\\\"button\\\\\\\" type=\\\\\\\"button\\\\\\\" aria-disabled=\\\\\\\"false\\\\\\\">\"+Chr(60)+\"span class=\\\\\\\"ui-button-text\\\\\\\">\" + CapFirst(cmd) + Chr(60) + \"/span>\" + Chr(60) + \"/button>\\\");\")\r\n  }\r\n\r\n```\r\n\r\n---\r\n![image](https://user-images.githubusercontent.com/30656341/41937491-0f1a5cac-7956-11e8-8a4d-81843b76f69c.png)\r\n\r\n---\r\nI just now noticed the spacing does not exist between the added buttons.  I tried to apply a quick fix, but those buttons are being ornery.",
      "EditableFormat": "markdown",
      "HTML": "<p>We can also add buttons:</p>\n<pre><code>  // Put your custom commands here, separated by ;\n  // Feel free to replace \"jump;help\" as I only used them for the example\n  customcmds = \"jump;help\"\n  // Everything else is internal.\n  customcmds = Split(customcmds, \";\")\n  foreach (cmd, customcmds) {\n    JS.eval (\"$('#controlButtons').append(\\\"\"+Chr(60)+\"button id=\\\\\\\"cmd\" + CapFirst(cmd) + \"\\\\\\\" onclick=\\\\\\\"sendCommand('\" + cmd + \"')\\\\\\\" class=\\\\\\\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\\\\\\\" role=\\\\\\\"button\\\\\\\" type=\\\\\\\"button\\\\\\\" aria-disabled=\\\\\\\"false\\\\\\\"&gt;\"+Chr(60)+\"span class=\\\\\\\"ui-button-text\\\\\\\"&gt;\" + CapFirst(cmd) + Chr(60) + \"/span&gt;\" + Chr(60) + \"/button&gt;\\\");\")\n  }\n\n</code></pre>\n<hr>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/41937491-0f1a5cac-7956-11e8-8a4d-81843b76f69c.png\" alt=\"image\"></p>\n<hr>\n<p>I just now noticed the spacing does not exist between the added buttons.  I tried to apply a quick fix, but those buttons are being ornery.</p>\n\n",
      "PostDate": "2018-06-26T20:35:59.4253384Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "87a30e01-aa46-4dcb-a2b7-44752d43b537",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "These all work.\r\n\r\nThe code I use is ```JS.panesVisible (true)``` to show panes and ```JS.panesVisible (false)``` to close them.\r\n\r\nSomeone else had code that moved the panes around, if that's applicable here.",
      "EditableFormat": "markdown",
      "HTML": "<p>These all work.</p>\n<p>The code I use is <code>JS.panesVisible (true)</code> to show panes and <code>JS.panesVisible (false)</code> to close them.</p>\n<p>Someone else had code that moved the panes around, if that's applicable here.</p>\n\n",
      "PostDate": "2018-06-26T20:43:12.2227412Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "67a9cbf7-f3bf-4efc-bac4-f8c3aa20919c",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I forgot about updating the score!\r\n\r\n```\r\nSetTimeout (2) {\r\n  cmds = ProcessText(\"{command:Look}&emsp;{command:Wait}\" + Chr(60) + \"span id=\\\"custom-score-div\\\">\" + Chr(60) + \"br/>Score: {game.score}\" + Chr(60) + \"/span>\")\r\n  s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;padding-bottom:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\">\"\r\n  s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\r\n  s = s + Chr(60) + \"/div>\"\r\n  JS.eval (\"var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));\")\r\n}\r\n```\r\n\r\n---\r\n### A turn script is the easiest way to handle updating the score.\r\n\r\nTurn script (be sure it's enabled):\r\n\r\n**edited**\r\n```\r\nJS.eval(\"$('#custom-score-div').html('\" + Chr(60) + \"br/>Score: \" + ProcessText(\"{game.score}\") + \"');\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>I forgot about updating the score!</p>\n<pre><code>SetTimeout (2) {\n  cmds = ProcessText(\"{command:Look}&amp;emsp;{command:Wait}\" + Chr(60) + \"span id=\\\"custom-score-div\\\"&gt;\" + Chr(60) + \"br/&gt;Score: {game.score}\" + Chr(60) + \"/span&gt;\")\n  s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;padding-bottom:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\"&gt;\"\n  s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\n  s = s + Chr(60) + \"/div&gt;\"\n  JS.eval (\"var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));\")\n}\n</code></pre>\n<hr>\n<h3>A turn script is the easiest way to handle updating the score.</h3>\n<p>Turn script (be sure it's enabled):</p>\n<p><strong>edited</strong></p>\n<pre><code>JS.eval(\"$('#custom-score-div').html('\" + Chr(60) + \"br/&gt;Score: \" + ProcessText(\"{game.score}\") + \"');\")\n</code></pre>\n\n",
      "PostDate": "2018-06-26T20:53:31.4101033Z",
      "LastEditDate": "2018-06-26T21:02:37.6533821Z",
      "link": null
    },
    {
      "PostId": "af890319-6716-4627-84fd-4faad2396b8e",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "# Update(s)\r\n\r\nOkay...  Now it checks for a mobile browser before it adds any of this stuff.  (It doesn't add anything if it's not running in a mobile browser.)\r\n\r\nI broke it down into functions.\r\n\r\nI also added the score to the More tab.\r\n\r\n---\r\nTest game:\r\nhttp://textadventures.co.uk/games/view/awnpodulbu2azc_otrp28a/mobile-cmds\r\n\r\n\r\n...and here is the test game's code.  (If anyone would like a breakdown, or has a specific question, just ask.)\r\n\r\n<details>\r\n\r\n```xml\r\n<!--Saved by Quest 5.7.6615.29455-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"mobile-cmds\">\r\n    <gameid>d58995f3-e027-41a1-85f9-2e4058ca69a6</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <feature_advancedscripts />\r\n    <menufont>Georgia, serif</menufont>\r\n    <commandpane />\r\n    <showscore />\r\n    <inituserinterface type=\"script\">\r\n      SetupMobileStuff\r\n      // This next line is NOT needed for the mobile stuff!\r\n      JS.setCommands(\"Look;Wait;Jump;Help\")\r\n    </inituserinterface>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <turnscript name=\"update_mobile_score\">\r\n    <enabled />\r\n    <script><![CDATA[\r\n      JS.eval (\"if (typeof (currentTab) === 'string'){$('#custom-score-div').html('\" + Chr(60) + \"br/>Score: \" + ProcessText(\"{game.score}\") + \"');}\")\r\n      JS.eval (\"if (typeof (currentTab) === 'string'){$('#more-score-div').html('Score: \" + ProcessText(\"{game.score}\") + \"');}\")\r\n    ]]></script>\r\n  </turnscript>\r\n  <command name=\"test\">\r\n    <pattern>test</pattern>\r\n    <script>\r\n      IncreaseScore (1)\r\n      msg (\"Your score has increased by 1!\")\r\n    </script>\r\n  </command>\r\n  <function name=\"SetupMobileStuff\">\r\n    SetTimeout (2) {\r\n      SetupStuffUnderParser\r\n      AddStuffToMobileMore\r\n    }\r\n  </function>\r\n  <function name=\"SetupStuffUnderParser\"><![CDATA[\r\n    cmds = ProcessText(\"{command:Look}&emsp;{command:Wait}\" + Chr(60) + \"span id=\\\"custom-score-div\\\">\" + Chr(60) + \"br/>Score: {game.score}\" + Chr(60) + \"/span>\")\r\n    s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;padding-bottom:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\">\"\r\n    s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\r\n    s = s + Chr(60) + \"/div>\"\r\n    JS.eval (\"if (typeof (currentTab) === 'string'){var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));}\")\r\n  ]]></function>\r\n  <function name=\"AddStuffToMobileMore\"><![CDATA[\r\n    customcmds = \"jump;help\"\r\n    customcmds = Split(customcmds, \";\")\r\n    foreach (cmd, customcmds) {\r\n      JS.eval (\"$('#controlButtons').append(\\\"\"+Chr(60)+\"button id=\\\\\\\"cmd\" + CapFirst(cmd) + \"\\\\\\\" onclick=\\\\\\\"sendCommand('\" + cmd + \"')\\\\\\\" class=\\\\\\\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\\\\\\\" role=\\\\\\\"button\\\\\\\" type=\\\\\\\"button\\\\\\\" aria-disabled=\\\\\\\"false\\\\\\\">\"+Chr(60)+\"span class=\\\\\\\"ui-button-text\\\\\\\">\" + CapFirst(cmd) + Chr(60) + \"/span>\" + Chr(60) + \"/button>\\\");\")\r\n    }\r\n    JS.eval (\"if (typeof (currentTab) === 'string'){$('#gameMore').append('\" + Chr(60) + \"hr/>\" + Chr(60) + \"span id=\\\"more-score-div\\\">Score: \" + ProcessText(\"{game.score}\") + Chr(60) + \"/span>');}\")\r\n  ]]></function>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n---\r\n<a href=\"https://user-images.githubusercontent.com/30656341/41940168-7833b7b8-795d-11e8-9c51-7d1a0270d14c.gif\"><img loop src=\"https://user-images.githubusercontent.com/30656341/41940168-7833b7b8-795d-11e8-9c51-7d1a0270d14c.gif\"/></a>\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<h1>Update(s)</h1>\n<p>Okay...  Now it checks for a mobile browser before it adds any of this stuff.  (It doesn't add anything if it's not running in a mobile browser.)</p>\n<p>I broke it down into functions.</p>\n<p>I also added the score to the More tab.</p>\n<hr>\n<p>Test game:<br>\nhttp://textadventures.co.uk/games/view/awnpodulbu2azc_otrp28a/mobile-cmds</p>\n<p>...and here is the test game's code.  (If anyone would like a breakdown, or has a specific question, just ask.)</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6615.29455--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"mobile-cmds\"&gt;\n    &lt;gameid&gt;d58995f3-e027-41a1-85f9-2e4058ca69a6&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;menufont&gt;Georgia, serif&lt;/menufont&gt;\n    &lt;commandpane /&gt;\n    &lt;showscore /&gt;\n    &lt;inituserinterface type=\"script\"&gt;\n      SetupMobileStuff\n      // This next line is NOT needed for the mobile stuff!\n      JS.setCommands(\"Look;Wait;Jump;Help\")\n    &lt;/inituserinterface&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=\"update_mobile_score\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;&lt;![CDATA[\n      JS.eval (\"if (typeof (currentTab) === 'string'){$('#custom-score-div').html('\" + Chr(60) + \"br/&gt;Score: \" + ProcessText(\"{game.score}\") + \"');}\")\n      JS.eval (\"if (typeof (currentTab) === 'string'){$('#more-score-div').html('Score: \" + ProcessText(\"{game.score}\") + \"');}\")\n    ]]&gt;&lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;command name=\"test\"&gt;\n    &lt;pattern&gt;test&lt;/pattern&gt;\n    &lt;script&gt;\n      IncreaseScore (1)\n      msg (\"Your score has increased by 1!\")\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=\"SetupMobileStuff\"&gt;\n    SetTimeout (2) {\n      SetupStuffUnderParser\n      AddStuffToMobileMore\n    }\n  &lt;/function&gt;\n  &lt;function name=\"SetupStuffUnderParser\"&gt;&lt;![CDATA[\n    cmds = ProcessText(\"{command:Look}&amp;emsp;{command:Wait}\" + Chr(60) + \"span id=\\\"custom-score-div\\\"&gt;\" + Chr(60) + \"br/&gt;Score: {game.score}\" + Chr(60) + \"/span&gt;\")\n    s = Chr(60) + \"div style=\\\\\\\"padding-top:6px;padding-bottom:6px;\\\\\\\" id=\\\\\\\"mobile-cmds\\\\\\\"&gt;\"\n    s = s + Replace(cmds, Chr(34), Chr(92) + Chr(34))\n    s = s + Chr(60) + \"/div&gt;\"\n    JS.eval (\"if (typeof (currentTab) === 'string'){var s = \\\"\"+s+\"\\\";$('body').append(s);$('#mobile-cmds').insertAfter($('#txtCommandDiv'));}\")\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"AddStuffToMobileMore\"&gt;&lt;![CDATA[\n    customcmds = \"jump;help\"\n    customcmds = Split(customcmds, \";\")\n    foreach (cmd, customcmds) {\n      JS.eval (\"$('#controlButtons').append(\\\"\"+Chr(60)+\"button id=\\\\\\\"cmd\" + CapFirst(cmd) + \"\\\\\\\" onclick=\\\\\\\"sendCommand('\" + cmd + \"')\\\\\\\" class=\\\\\\\"ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only\\\\\\\" role=\\\\\\\"button\\\\\\\" type=\\\\\\\"button\\\\\\\" aria-disabled=\\\\\\\"false\\\\\\\"&gt;\"+Chr(60)+\"span class=\\\\\\\"ui-button-text\\\\\\\"&gt;\" + CapFirst(cmd) + Chr(60) + \"/span&gt;\" + Chr(60) + \"/button&gt;\\\");\")\n    }\n    JS.eval (\"if (typeof (currentTab) === 'string'){$('#gameMore').append('\" + Chr(60) + \"hr/&gt;\" + Chr(60) + \"span id=\\\"more-score-div\\\"&gt;Score: \" + ProcessText(\"{game.score}\") + Chr(60) + \"/span&gt;');}\")\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n<hr>\n<p><a href=\"https://user-images.githubusercontent.com/30656341/41940168-7833b7b8-795d-11e8-9c51-7d1a0270d14c.gif\"><img src=\"https://user-images.githubusercontent.com/30656341/41940168-7833b7b8-795d-11e8-9c51-7d1a0270d14c.gif\"></a></p>\n\n",
      "PostDate": "2018-06-26T21:35:09.2482917Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4ad2ae0e-ab17-4897-87bd-af400fb57f4c",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Beautiful! This is very helpful, thank you!",
      "EditableFormat": "markdown",
      "HTML": "<p>Beautiful! This is very helpful, thank you!</p>\n\n",
      "PostDate": "2018-06-27T17:42:45.8243801Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
