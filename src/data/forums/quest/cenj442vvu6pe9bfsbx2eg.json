{
  "Topic": {
    "TopicId": "cenj442vvu6pe9bfsbx2eg",
    "ForumId": "10",
    "Title": "Problem with shop",
    "LastUpdated": "2017-02-10T08:03:44.1821568Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "38e5c7ca-16a5-4e54-a52f-7ed42b91bf10",
      "UserId": 291548,
      "Username": "KeinJrr",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So ok I decide to create a shop, add some said attribute, add some stocking room and test play, when I enter I got heaps of error like this\r\n\r\nError running script: Error evaluating expression '(not GetBoolean(game.pov.parent, \"visited\")) and HasScript(game.pov.parent, \"beforefirstenter\")': GetBoolean function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetDirectChildren (game.pov.parent)': GetDirectChildren function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetBoolean(game.pov.parent, \"dark\")': GetBoolean function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetBoolean(room, \"transparent\")': GetBoolean function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetAllChildObjects(newParent)': GetAllChildObjects function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetBoolean(room, \"transparent\")': GetBoolean function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetAllChildObjects(newParent)': GetAllChildObjects function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetBoolean(room, \"transparent\")': GetBoolean function expected object parameter but was passed 'null'\r\nError running script: Error evaluating expression 'GetAllChildObjects(newParent)': GetAllChildObjects function expected object parameter but was passed 'null'\r\nalso attempt to use <b>buy</b> command, I got the above error.",
      "EditableFormat": "markdown",
      "HTML": "<p>So ok I decide to create a shop, add some said attribute, add some stocking room and test play, when I enter I got heaps of error like this</p>\n<p>Error running script: Error evaluating expression '(not GetBoolean(game.pov.parent, \"visited\")) and HasScript(game.pov.parent, \"beforefirstenter\")': GetBoolean function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetDirectChildren (game.pov.parent)': GetDirectChildren function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetBoolean(game.pov.parent, \"dark\")': GetBoolean function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetBoolean(room, \"transparent\")': GetBoolean function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetAllChildObjects(newParent)': GetAllChildObjects function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetBoolean(room, \"transparent\")': GetBoolean function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetAllChildObjects(newParent)': GetAllChildObjects function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetAllChildObjects(room)': GetAllChildObjects function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetBoolean(room, \"transparent\")': GetBoolean function expected object parameter but was passed 'null'<br>\nError running script: Error evaluating expression 'GetAllChildObjects(newParent)': GetAllChildObjects function expected object parameter but was passed 'null'<br>\nalso attempt to use <b>buy</b> command, I got the above error.</p>\n\n",
      "PostDate": "2017-02-10T08:03:44.1821568Z",
      "LastEditDate": null
    },
    {
      "PostId": "6dad89f6-a58c-4a15-9987-90e187d7494d",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Somehow the player is nowhere. The player, like all objects, has an attribute, \"parent\", which is its currently location, and that value is null. Why that happens is hard to say without seeing the code, but look at any part where you are moving the player.",
      "EditableFormat": "markdown",
      "HTML": "<p>Somehow the player is nowhere. The player, like all objects, has an attribute, \"parent\", which is its currently location, and that value is null. Why that happens is hard to say without seeing the code, but look at any part where you are moving the player.</p>\n\n",
      "PostDate": "2017-02-10T08:42:57.4331606Z",
      "LastEditDate": null
    },
    {
      "PostId": "9f54b4ea-463e-47fc-8e7a-d9e61233c11b",
      "UserId": 26011,
      "Username": "onimike",
      "AvatarUrl": "http://i.imgur.com/yL1GRWab.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi Kevin, like The Pixie said hard to tell whats wrong without the code. But what I can say is if you do something like this below its pretty easy to go from there.\r\n\r\n```\r\nshopmenu = NewStringList()\r\nlist add (shopmenu, \"weapons\")\r\nlist add (shopmenu, \"tools\")\r\nlist add (shopmenu, \"item\")\r\nShowMenu (\"What would you like to buy?\", shopmenu, true) {\r\n  msg (\"You choose \" +result+ \".\")\r\n  if (result<>null) {\r\n  }\r\n  else if (result = \"weapons\") {\r\n    BuyWeapons\r\n  }\r\n  else if (result = \"tools\") {\r\n    BuyTools\r\n  }\r\n  else if (result = \"item\") {\r\n    BuyItems\r\n  }\r\n  else {\r\n    msg (\"You canceled!\")\r\n  }\r\n}\r\n```\r\n\r\nWhat I did was make a command (You could use a verb on an NPC as well) called it \"shop\" then added in this script. In the script you see I call a function like 'BuyWeapons' which is a Function I also created containing another menu of available weapons, same goes for tools and items so once clicked on an option it will open up a second menu with the correct things you wish to buy. When you want to buy just check your currency system if you have (>=   xamount) then move said item to inventory else you don't have enough to purchase that.\r\n\r\nHope it helps\r\nMike  \r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi Kevin, like The Pixie said hard to tell whats wrong without the code. But what I can say is if you do something like this below its pretty easy to go from there.</p>\n<pre><code>shopmenu = NewStringList()\nlist add (shopmenu, \"weapons\")\nlist add (shopmenu, \"tools\")\nlist add (shopmenu, \"item\")\nShowMenu (\"What would you like to buy?\", shopmenu, true) {\n  msg (\"You choose \" +result+ \".\")\n  if (result&lt;&gt;null) {\n  }\n  else if (result = \"weapons\") {\n    BuyWeapons\n  }\n  else if (result = \"tools\") {\n    BuyTools\n  }\n  else if (result = \"item\") {\n    BuyItems\n  }\n  else {\n    msg (\"You canceled!\")\n  }\n}\n</code></pre>\n<p>What I did was make a command (You could use a verb on an NPC as well) called it \"shop\" then added in this script. In the script you see I call a function like 'BuyWeapons' which is a Function I also created containing another menu of available weapons, same goes for tools and items so once clicked on an option it will open up a second menu with the correct things you wish to buy. When you want to buy just check your currency system if you have (&gt;=   xamount) then move said item to inventory else you don't have enough to purchase that.</p>\n<p>Hope it helps<br>\nMike</p>\n\n",
      "PostDate": "2017-02-10T13:38:49.593641Z",
      "LastEditDate": null
    },
    {
      "PostId": "c99955f7-b60b-40f3-9f4b-d0c08ece24ee",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "quest requires that there be a Player Object within a Room Object, as all of it's underlying code is based upon this requirement:\r\n\r\nhttp://docs.textadventures.co.uk/quest/asl_requirements.html\r\n\r\nso, either make sure you've got:\r\n\r\na custom Player Object (set as being a Player object, and having the 'game.pov' being set as this Player Object) within some Room Object (using the GUI/Editor and/or the 'parent' Object Attribute), and/or check any of your game code that might be messing with this too... (we'd need to see your entire game code, if you can't find the cause yourself)\r\n\r\nor that your default 'player' Player Object is within a Room Object, and/or check any of your game code that might be messing with this too... (we'd need to see your entire game code, if you can't find the cause yourself)\r\n\r\nalso, note that there's the 'game.pov' (the pov feature) too, which might have gotten messed up accidentally by you, if you've been working with it or changing some of the code around (it's a simple fix, but again, we'd need to see your entire game code to find the cause): http://docs.textadventures.co.uk/quest/tutorial/changing_the_player_object.html",
      "EditableFormat": "markdown",
      "HTML": "<p>quest requires that there be a Player Object within a Room Object, as all of it's underlying code is based upon this requirement:</p>\n<p>http://docs.textadventures.co.uk/quest/asl_requirements.html</p>\n<p>so, either make sure you've got:</p>\n<p>a custom Player Object (set as being a Player object, and having the 'game.pov' being set as this Player Object) within some Room Object (using the GUI/Editor and/or the 'parent' Object Attribute), and/or check any of your game code that might be messing with this too... (we'd need to see your entire game code, if you can't find the cause yourself)</p>\n<p>or that your default 'player' Player Object is within a Room Object, and/or check any of your game code that might be messing with this too... (we'd need to see your entire game code, if you can't find the cause yourself)</p>\n<p>also, note that there's the 'game.pov' (the pov feature) too, which might have gotten messed up accidentally by you, if you've been working with it or changing some of the code around (it's a simple fix, but again, we'd need to see your entire game code to find the cause): http://docs.textadventures.co.uk/quest/tutorial/changing_the_player_object.html</p>\n\n",
      "PostDate": "2017-02-10T21:17:57.4223068Z",
      "LastEditDate": "2017-02-10T21:19:39.4147739Z"
    }
  ]
}
