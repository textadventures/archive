{
  "Topic": {
    "TopicId": "6047",
    "ForumId": "10",
    "Title": "Script running twice after entering a room",
    "LastUpdated": "2016-04-01T12:33:08+01:00",
    "ReplyCount": 13
  },
  "Posts": [
    {
      "PostId": "41762",
      "UserId": 0,
      "Username": "Marion34",
      "UserAvatar": null,
      "UserGravatar": "b346b65b88f5c853fc275e49752bb699",
      "EditableText": "Hi ! I am programming a game with Quest and I really enjoy this software. But I have a little problem. Sometimes, I program a script in the &quot;After entering the room&quot; part, and the script runs twice in the game. For example, I write the text &quot;This is a nice room&quot; in &quot;After entering the room&quot;, but when the player enters the room, instead of writing just \n\n[code:iaifr7qj]This is a nice room[/code:iaifr7qj]\n\nthe game shows :\n\n[code:iaifr7qj]This is a nice room&#46;\n\nThis is a nice room&#46;[/code:iaifr7qj]\n\n\nThat's quite annoying when there is a long text written at this moment. How does this come from and how can I fix it ?\nThank you very much for your help <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "Hi ! I am programming a game with Quest and I really enjoy this software. But I have a little problem. Sometimes, I program a script in the &quot;After entering the room&quot; part, and the script runs twice in the game. For example, I write the text &quot;This is a nice room&quot; in &quot;After entering the room&quot;, but when the player enters the room, instead of writing just <br/><br/><pre><code>This is a nice room</code></pre><br/><br/>the game shows :<br/><br/><pre><code>This is a nice room&#46;<br/><br/>This is a nice room&#46;</code></pre><br/><br/><br/>That's quite annoying when there is a long text written at this moment. How does this come from and how can I fix it ?<br/>Thank you very much for your help <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2016-03-16T18:51:46+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "41771",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "Probably a dumb question on my part, but do you also have the same description written in the room description on the setup tab for the room AND also have the box ticked for automatically display room descriptions in the room description tab under the game object?",
      "EditableFormat": "bbcode",
      "HTML": "Probably a dumb question on my part, but do you also have the same description written in the room description on the setup tab for the room AND also have the box ticked for automatically display room descriptions in the room description tab under the game object?",
      "PostDate": "2016-03-16T21:13:35+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "41777",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "It would help if you could post your code or game, which experiences the problem. What you're describing shouldn't be happening, and yet it is. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> So either it's something in your game or a bug in Quest. Either way, I just tried it, and it worked ok for me, so code that has the problem would be helpful.",
      "EditableFormat": "bbcode",
      "HTML": "It would help if you could post your code or game, which experiences the problem. What you're describing shouldn't be happening, and yet it is. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> So either it's something in your game or a bug in Quest. Either way, I just tried it, and it worked ok for me, so code that has the problem would be helpful.",
      "PostDate": "2016-03-16T22:37:29+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "41779",
      "UserId": 0,
      "Username": "Marion34",
      "UserAvatar": null,
      "UserGravatar": "b346b65b88f5c853fc275e49752bb699",
      "EditableText": "I don't use the the room description, I only use the After entering room script. But yes the box for automatically display room descriptions in the room description tab under the game object is ticked... I will try again by unticking it. Thank you <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "I don't use the the room description, I only use the After entering room script. But yes the box for automatically display room descriptions in the room description tab under the game object is ticked... I will try again by unticking it. Thank you <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2016-03-16T23:06:52+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "41780",
      "UserId": 0,
      "Username": "Marion34",
      "UserAvatar": null,
      "UserGravatar": "b346b65b88f5c853fc275e49752bb699",
      "EditableText": "Still got the problem after unticking it. Here is the code of one room with the problem, but others have too. I have nothing on this room but the text when entering it :\n\n[code:3u70aqky]&lt;object name=&quot;Skaro&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;usedefaultprefix type=&quot;boolean&quot;&gt;false&lt;/usedefaultprefix&gt;\n    &lt;enter type=&quot;script&quot;&gt;\n      msg (&quot;Vous êtes sur Skaro&#46;&quot;)\n    &lt;/enter&gt;\n  &lt;/object&gt;[/code:3u70aqky]",
      "EditableFormat": "bbcode",
      "HTML": "Still got the problem after unticking it. Here is the code of one room with the problem, but others have too. I have nothing on this room but the text when entering it :<br/><br/><pre><code>&lt;object name=&quot;Skaro&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;usedefaultprefix type=&quot;boolean&quot;&gt;false&lt;/usedefaultprefix&gt;<br/>    &lt;enter type=&quot;script&quot;&gt;<br/>      msg (&quot;Vous êtes sur Skaro&#46;&quot;)<br/>    &lt;/enter&gt;<br/>  &lt;/object&gt;</code></pre>",
      "PostDate": "2016-03-16T23:27:10+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "41784",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "The reason I wanted to see code (as  in a full failing set of code) is to that often the problem isn't where you think it is. That's what makes it so hard to work out - it's something you did and forgot, or it's something obscure elsewhere in the code that you didn't realize would have that effect. \n\nFor example, does that string appear anywhere else in the code? Do you have turn scripts doing anything fancy (e.g. moving the player or other objects around)? Or any manner of other things? Viewing a single piece of code in isolation is often not helpful.\n\nIf you don't wish to post your game code, can you reproduce the problem in a smaller sample game? If not, then it might be useful to work out what's different between the two. If you can get something complete you can post, then post it!\n\n(I also notice you have French in your msg. Are you using the French language library? If so, then perhaps there's a problem in there.)",
      "EditableFormat": "bbcode",
      "HTML": "The reason I wanted to see code (as  in a full failing set of code) is to that often the problem isn't where you think it is. That's what makes it so hard to work out - it's something you did and forgot, or it's something obscure elsewhere in the code that you didn't realize would have that effect. <br/><br/>For example, does that string appear anywhere else in the code? Do you have turn scripts doing anything fancy (e.g. moving the player or other objects around)? Or any manner of other things? Viewing a single piece of code in isolation is often not helpful.<br/><br/>If you don't wish to post your game code, can you reproduce the problem in a smaller sample game? If not, then it might be useful to work out what's different between the two. If you can get something complete you can post, then post it!<br/><br/>(I also notice you have French in your msg. Are you using the French language library? If so, then perhaps there's a problem in there.)",
      "PostDate": "2016-03-17T07:25:01+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "41786",
      "UserId": 0,
      "Username": "Marion34",
      "UserAvatar": null,
      "UserGravatar": "b346b65b88f5c853fc275e49752bb699",
      "EditableText": "No, this is the only time this string appears in the all code. I have no turn script at all.\n\nYes I am using the French language library. I will try to make a very short game with a very few script, and see if there is the same problem.\n\nThank you for your help <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "No, this is the only time this string appears in the all code. I have no turn script at all.<br/><br/>Yes I am using the French language library. I will try to make a very short game with a very few script, and see if there is the same problem.<br/><br/>Thank you for your help <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2016-03-17T08:43:31+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "41787",
      "UserId": 0,
      "Username": "Marion34",
      "UserAvatar": null,
      "UserGravatar": "b346b65b88f5c853fc275e49752bb699",
      "EditableText": "I made a test creating another game with the french library, I have ticked and unticked the same boxes in the two games. The texts appears once. It doesn't seem to have the same problem. \nMaybe it's because I have made a long game with long strings... I can post the code here but it is really, really long :-/",
      "EditableFormat": "bbcode",
      "HTML": "I made a test creating another game with the french library, I have ticked and unticked the same boxes in the two games. The texts appears once. It doesn't seem to have the same problem. <br/>Maybe it's because I have made a long game with long strings... I can post the code here but it is really, really long :-/",
      "PostDate": "2016-03-17T10:06:28+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "41788",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "If you click on Full Editor &amp; Preview, you can then upload your game as an attachment.",
      "EditableFormat": "bbcode",
      "HTML": "If you click on Full Editor &amp; Preview, you can then upload your game as an attachment.",
      "PostDate": "2016-03-17T10:22:14+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "41790",
      "UserId": 0,
      "Username": "Marion34",
      "UserAvatar": null,
      "UserGravatar": "b346b65b88f5c853fc275e49752bb699",
      "EditableText": "I have changed something in the script in order to upload the game as an attachment, and it doesn't have the problem any more.\n\nI think it's something related to the &quot;After entering the room the first time&quot; script, because I just added a simple condition for the script to run the first time the player enters the room, and the double string thing stopped when entering the next room (when it did that before). That's strange...",
      "EditableFormat": "bbcode",
      "HTML": "I have changed something in the script in order to upload the game as an attachment, and it doesn't have the problem any more.<br/><br/>I think it's something related to the &quot;After entering the room the first time&quot; script, because I just added a simple condition for the script to run the first time the player enters the room, and the double string thing stopped when entering the next room (when it did that before). That's strange...",
      "PostDate": "2016-03-17T10:35:58+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "42027",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "I have a room a player gets moved into frequently after &quot;retreating&quot; from other rooms.\n\nI was getting the double room description as well.\n\nI switched the room description to print only once using the 'First time' script and left the otherwise blank.\n\nThe game functions just fine, but now I am getting two room titles printed when being &quot;thrown&quot; back into this room.  It's just ugly.  Any ideas to fix?  Thanks!",
      "EditableFormat": "bbcode",
      "HTML": "I have a room a player gets moved into frequently after &quot;retreating&quot; from other rooms.<br/><br/>I was getting the double room description as well.<br/><br/>I switched the room description to print only once using the 'First time' script and left the otherwise blank.<br/><br/>The game functions just fine, but now I am getting two room titles printed when being &quot;thrown&quot; back into this room.  It's just ugly.  Any ideas to fix?  Thanks!",
      "PostDate": "2016-04-01T05:40:40+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42028",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "My first guess is that you are moving the player to the room twice, and each time Quest prints the room name and description. Can you paste the &quot;retreating&quot; script into a post? Also, the entire code, XML and all, for the room, could be useful.",
      "EditableFormat": "bbcode",
      "HTML": "My first guess is that you are moving the player to the room twice, and each time Quest prints the room name and description. Can you paste the &quot;retreating&quot; script into a post? Also, the entire code, XML and all, for the room, could be useful.",
      "PostDate": "2016-04-01T07:40:08+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42030",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "Here is code that returns the player to the 'forest room'.\n\n[code:3k99tj4v]   &lt;beforefirstenter type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      msg (&quot;You take a peek into the bar,&lt;br/&gt;and your eyes do not stray far&lt;br/&gt;before you see an awful sight&lt;br/&gt;drunks and thugs prepared to fight&#46;&lt;br/&gt;&lt;br/&gt;Do you wish to walk on through,&lt;br/&gt;or do you want a plan perused?&lt;br/&gt;Going in without a plan&lt;br/&gt;may equate to one dead man&#46;&lt;br/&gt;&lt;br/&gt;It is your choice&#46;  It is your day&#46;&lt;br/&gt;Yes or no, what do you say?&quot;)\n      get input {\n        switch (LCase(result)) {\n          case (&quot;yes&quot;,&quot;yea&quot;,&quot;yep&quot;,&quot;y&quot;) {\n            msg (&quot;You step inside the rough saloon&#46;&lt;br/&gt;The patrons glare at the new bafoon&#46;&lt;br/&gt;They whisper in such soft mumbles,&lt;br/&gt;Their voices rise, a million bumbles&#46;&lt;br/&gt;&lt;br/&gt;You continue on like you have a pair,&lt;br/&gt;but there's anxiousness up in the air&#46;  &lt;br/&gt;You grab a seat upon a stool,&lt;br/&gt;you're near the bar&#46;  Let's see it fool&#46; &quot;)\n            MoveObject (player, saloon)\n          }\n          case (&quot;no&quot;,&quot;nope&quot;,&quot;nay&quot;,&quot;n&quot;) {\n            msg (&quot;Wise to plan before you jump&lt;br/&gt;into a bar where you're the chump&#46;&lt;br/&gt;Come back when you're good and able,&lt;br/&gt;and saunter up and grab a table&#46;&quot;)\n            MoveObject (player, forest room)\n          }\n        }\n      }[/code:3k99tj4v]\n And here is the code for the forest room description.\n[code:3k99tj4v]  &lt;object name=&quot;forest room&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;description type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      firsttime {\n        msg (&quot;This is a room shrouded in trees&#46;&lt;br/&gt;There are three directions, if you please&#46;&lt;br/&gt;&lt;br/&gt;Go north if you do not scare&lt;br/&gt;into a cave, the home of bear&#46;&lt;br/&gt;&lt;br/&gt;Or do go west if you so choose&lt;br/&gt;into the land that's filled with booze&#46;&lt;br/&gt;&lt;br/&gt;Or maybe east is what is sought,&lt;br/&gt;the lands of dragons to be fought!&quot;)\n      }[/code:3k99tj4v] It is a first time description with a blank otherwise.  For now I figured printing the room name twice is better than the entire description.  The player has another room that is set up identically to this one (the 'saloon').  Same thing happens.\n\nBelow is the entire .aslx file.\n[attachment=0:3k99tj4v]<!-- ia0 -->Job To Rob.aslx<!-- ia0 -->[/attachment:3k99tj4v]",
      "EditableFormat": "bbcode",
      "HTML": "Here is code that returns the player to the 'forest room'.<br/><br/><pre><code>   &lt;beforefirstenter type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      msg (&quot;You take a peek into the bar,&lt;br/&gt;and your eyes do not stray far&lt;br/&gt;before you see an awful sight&lt;br/&gt;drunks and thugs prepared to fight&#46;&lt;br/&gt;&lt;br/&gt;Do you wish to walk on through,&lt;br/&gt;or do you want a plan perused?&lt;br/&gt;Going in without a plan&lt;br/&gt;may equate to one dead man&#46;&lt;br/&gt;&lt;br/&gt;It is your choice&#46;  It is your day&#46;&lt;br/&gt;Yes or no, what do you say?&quot;)<br/>      get input {<br/>        switch (LCase(result)) {<br/>          case (&quot;yes&quot;,&quot;yea&quot;,&quot;yep&quot;,&quot;y&quot;) {<br/>            msg (&quot;You step inside the rough saloon&#46;&lt;br/&gt;The patrons glare at the new bafoon&#46;&lt;br/&gt;They whisper in such soft mumbles,&lt;br/&gt;Their voices rise, a million bumbles&#46;&lt;br/&gt;&lt;br/&gt;You continue on like you have a pair,&lt;br/&gt;but there's anxiousness up in the air&#46;  &lt;br/&gt;You grab a seat upon a stool,&lt;br/&gt;you're near the bar&#46;  Let's see it fool&#46; &quot;)<br/>            MoveObject (player, saloon)<br/>          }<br/>          case (&quot;no&quot;,&quot;nope&quot;,&quot;nay&quot;,&quot;n&quot;) {<br/>            msg (&quot;Wise to plan before you jump&lt;br/&gt;into a bar where you're the chump&#46;&lt;br/&gt;Come back when you're good and able,&lt;br/&gt;and saunter up and grab a table&#46;&quot;)<br/>            MoveObject (player, forest room)<br/>          }<br/>        }<br/>      }</code></pre><br/> And here is the code for the forest room description.<br/><pre><code>  &lt;object name=&quot;forest room&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;description type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      firsttime {<br/>        msg (&quot;This is a room shrouded in trees&#46;&lt;br/&gt;There are three directions, if you please&#46;&lt;br/&gt;&lt;br/&gt;Go north if you do not scare&lt;br/&gt;into a cave, the home of bear&#46;&lt;br/&gt;&lt;br/&gt;Or do go west if you so choose&lt;br/&gt;into the land that's filled with booze&#46;&lt;br/&gt;&lt;br/&gt;Or maybe east is what is sought,&lt;br/&gt;the lands of dragons to be fought!&quot;)<br/>      }</code></pre> It is a first time description with a blank otherwise.  For now I figured printing the room name twice is better than the entire description.  The player has another room that is set up identically to this one (the 'saloon').  Same thing happens.<br/><br/>Below is the entire .aslx file.<br/><div><a href=\"/forumattachments/1549/Job To Rob.aslx\">Job To Rob.aslx</a></div>",
      "PostDate": "2016-04-01T08:36:56+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42032",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "Generally when you go in a room this happens:\n\n[code:3fxg78tj]The before enter script is run\nShowRoomDescription is run\nThe after enter script is run[/code:3fxg78tj]\n\nWhat you are doing is moving the player in that first step. And that then triggers those three steps as well.\n\n[code:3fxg78tj]The before enter script is run, player is moved\n  The before enter script is run\n  ShowRoomDescription is run\n  The after enter script is run\nShowRoomDescription is run\nThe after enter script is run[/code:3fxg78tj]\n\nSo ShowRoomDescription is run twice, once for entering the saloon, and once for entering the forest, but in reverse order, and the function itself just describes the current room, whatever it is, so the ShowRoomDescription for entering the saloon gives the description for the forest instead. Does that make sense?\n\nTo fix it, the best way is probably to have the script on the exit going to the saloon, rather than the saloon itself.",
      "EditableFormat": "bbcode",
      "HTML": "Generally when you go in a room this happens:<br/><br/><pre><code>The before enter script is run<br/>ShowRoomDescription is run<br/>The after enter script is run</code></pre><br/><br/>What you are doing is moving the player in that first step. And that then triggers those three steps as well.<br/><br/><pre><code>The before enter script is run, player is moved<br/>  The before enter script is run<br/>  ShowRoomDescription is run<br/>  The after enter script is run<br/>ShowRoomDescription is run<br/>The after enter script is run</code></pre><br/><br/>So ShowRoomDescription is run twice, once for entering the saloon, and once for entering the forest, but in reverse order, and the function itself just describes the current room, whatever it is, so the ShowRoomDescription for entering the saloon gives the description for the forest instead. Does that make sense?<br/><br/>To fix it, the best way is probably to have the script on the exit going to the saloon, rather than the saloon itself.",
      "PostDate": "2016-04-01T12:33:08+01:00",
      "LastEditDate": null
    }
  ]
}