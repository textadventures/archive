{
  "Topic": {
    "TopicId": "5436",
    "ForumId": "24",
    "Title": "Javascript variables clearing",
    "LastUpdated": "2015-08-24T14:41:52+01:00",
    "ReplyCount": 2
  },
  "Posts": [
    {
      "PostId": "37737",
      "UserId": 0,
      "Username": "TangentialFox",
      "UserAvatar": null,
      "UserGravatar": "a0e580d8812152a0a6a83f5e01f05f0d",
      "EditableText": "Hello! Before I begin, I must say I'm not sure if this problem has been discussed or resolved previously, but to the best of my knowledge, I could not find anything regarding it.\n\n[b:216e2sbx]The Problem:[/b:216e2sbx] When using squiffy and transitioning to more sections, it appears previous javascript variables clear out! I am new to squiffy and its design, so I may be making a mistake.\n\nTo prove that its a problem, [b:216e2sbx]a simple example[/b:216e2sbx]:\n[code:216e2sbx]\n@start caption1\n    &#91;&#91;caption1&#93;&#93;&#58;\n    var a = 1;\n    var b = 2;\n    squiffy&#46;set(&quot;a&quot;,a);\n    squiffy&#46;story&#46;go(&quot;caption2&quot;)\n    \n&#91;&#91;caption2&#93;&#93;&#58;\nSome content text&#46;&#46;&#46;&lt;br&gt;\n&#91;&#91;Continue&#46;&#46;&#46;&#93;&#93;(caption3)\n\n    &#91;&#91;caption3&#93;&#93;&#58;\n    squiffy&#46;set(&quot;test&quot;,&quot;hello&quot;);\n    squiffy&#46;set(&quot;b&quot;,b);\n    squiffy&#46;story&#46;go(&quot;caption4&quot;);\n    \n&#91;&#91;caption4&#93;&#93;&#58;\nSome text that will never be seen (error in caption3)&#46;\n[/code:216e2sbx]\n\nWhen the above code runs, all works fine, squiffy's &quot;a&quot; is set equal to 1, but when you try it again on &quot;b&quot; further down, it errors out, as if the javascript variable b never existed!\n\nIs this intentional by squiffy's design? If so, is there a way to counter it? I'm trying to organize a game that involves objects with properties and methods (most declared upon start up of the game). I keep these variables in javascript for ease, but I know I could simply convert them to a squiffy attribute during the start up and it would resolve the issue.\n\nThanks in advanced for any help!",
      "EditableFormat": "bbcode",
      "HTML": "Hello! Before I begin, I must say I'm not sure if this problem has been discussed or resolved previously, but to the best of my knowledge, I could not find anything regarding it.<br/><br/><span style=\"font-weight:bold;\">The Problem:</span> When using squiffy and transitioning to more sections, it appears previous javascript variables clear out! I am new to squiffy and its design, so I may be making a mistake.<br/><br/>To prove that its a problem, <span style=\"font-weight:bold;\">a simple example</span>:<br/><pre><code><br/>@start caption1<br/>    &#91;&#91;caption1&#93;&#93;&#58;<br/>    var a = 1;<br/>    var b = 2;<br/>    squiffy&#46;set(&quot;a&quot;,a);<br/>    squiffy&#46;story&#46;go(&quot;caption2&quot;)<br/>    <br/>&#91;&#91;caption2&#93;&#93;&#58;<br/>Some content text&#46;&#46;&#46;&lt;br&gt;<br/>&#91;&#91;Continue&#46;&#46;&#46;&#93;&#93;(caption3)<br/><br/>    &#91;&#91;caption3&#93;&#93;&#58;<br/>    squiffy&#46;set(&quot;test&quot;,&quot;hello&quot;);<br/>    squiffy&#46;set(&quot;b&quot;,b);<br/>    squiffy&#46;story&#46;go(&quot;caption4&quot;);<br/>    <br/>&#91;&#91;caption4&#93;&#93;&#58;<br/>Some text that will never be seen (error in caption3)&#46;<br/></code></pre><br/><br/>When the above code runs, all works fine, squiffy's &quot;a&quot; is set equal to 1, but when you try it again on &quot;b&quot; further down, it errors out, as if the javascript variable b never existed!<br/><br/>Is this intentional by squiffy's design? If so, is there a way to counter it? I'm trying to organize a game that involves objects with properties and methods (most declared upon start up of the game). I keep these variables in javascript for ease, but I know I could simply convert them to a squiffy attribute during the start up and it would resolve the issue.<br/><br/>Thanks in advanced for any help!",
      "PostDate": "2015-08-23T23:01:27+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "37742",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "You're confusing JavaScript variables with Squiffy attributes. You have to set the attribute to be able to get it. In your code, in the &quot;caption1&quot; section you're [b:2dt7rbig]only[/b:2dt7rbig] setting an attribute called &quot;a&quot;. Your variable &quot;b&quot; isn't being saved.",
      "EditableFormat": "bbcode",
      "HTML": "You're confusing JavaScript variables with Squiffy attributes. You have to set the attribute to be able to get it. In your code, in the &quot;caption1&quot; section you're <span style=\"font-weight:bold;\">only</span> setting an attribute called &quot;a&quot;. Your variable &quot;b&quot; isn't being saved.",
      "PostDate": "2015-08-24T12:56:46+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "37747",
      "UserId": 0,
      "Username": "TangentialFox",
      "UserAvatar": null,
      "UserGravatar": "a0e580d8812152a0a6a83f5e01f05f0d",
      "EditableText": "Thank you Alex! If I set the variable &quot;b&quot; equal to the Squiffy attribute &quot;b&quot; where &quot;a&quot; is set, it should work out fine.\n\nThe work I'm having problem with involves something such as this:\n\n[code:2cyj0jyf]\n&lt;!-- Room setup --&gt;\n&#91;&#91;setup&#93;&#93;&#58;\nfunction Room(desc, north, east, south, west) {\n      this&#46;desc = desc;\n      this&#46;north = north;\n      this&#46;east = east;\n      this&#46;south = south;\n      this&#46;west = west;\n    }\nvar home = new Room(&quot;Your home is unique, a makeshift house built near the edge of the forest and ocean&#46; Your happy to call it home, it took you a week to build it, fence and all!&quot;,&quot;Dark Woods&quot;,&quot;Ghost Town&quot;,&quot;Meadow&quot;,&quot;Beach&quot;);\n\nvar town = new Room(&quot;&#46;&#46;&#46;&quot;);\n\n&lt;!-- When you eventually get to your home&#46;&#46;&#46; --&gt;\n\t&#91;&#91;home&#93;&#93;&#58;\n\tsquiffy&#46;set(&quot;location&quot;,&quot;home&quot;);\n\tsquiffy&#46;set(&quot;roomDesc&quot;,home&#46;desc);\n\tsquiffy&#46;set(&quot;roomNorth&quot;,home&#46;north);\n\tsquiffy&#46;set(&quot;roomEast&quot;,home&#46;east);\n\tsquiffy&#46;set(&quot;roomSouth&quot;,home&#46;south);\n\tsquiffy&#46;set(&quot;roomWest&quot;,home&#46;west);\n\t\n{roomDesc}&lt;br&gt;\nYou can go &#91;&#91;north ({roomNorth})&#93;&#93;(travel,direction=north), &#91;&#91;west ({roomWest})&#93;&#93;(travel,direction=west), &#91;&#91;south ({roomSouth})&#93;&#93;(travel,direction=south), &#91;&#91;east ({roomEast})&#93;&#93;(travel,direction=east)&#46; You are currently at {location}&#46;\n\n\t&#91;&#91;location&#93;&#93;&#58;\n\t//code to perform a function of where to travel based on current location and direction chosen&#46;\n[/code:2cyj0jyf]\n\nSo, in order to fix this, I'll need to assign var home here instead.\n\n[code:2cyj0jyf]\n&lt;!-- When you eventually get to your home&#46;&#46;&#46; --&gt;\n\t&#91;&#91;home&#93;&#93;&#58;\n\tvar home = {\n    \t\tdesc&#58;&quot;Your home is unique, a makeshift house built near the edge of the forest and ocean&#46; Your happy to call it home, it took you a week to build it, fence and all!&quot;,\n    \t\tnorth&#58;&quot;Dark Woods&quot;,\n    \t\teast&#58;&quot;Ghost Town&quot;,\n    \t\tsouth&#58;&quot;Meadow&quot;,\n    \t\twest&#58;&quot;Beach&quot;\n\t};\n\t\n\tsquiffy&#46;set(&quot;location&quot;,&quot;home&quot;);\n\tsquiffy&#46;set(&quot;roomDesc&quot;,home&#46;desc);\n\tsquiffy&#46;set(&quot;roomNorth&quot;,home&#46;north);\n\tsquiffy&#46;set(&quot;roomEast&quot;,home&#46;east);\n\tsquiffy&#46;set(&quot;roomSouth&quot;,home&#46;south);\n\tsquiffy&#46;set(&quot;roomWest&quot;,home&#46;west);\n\t\nYou are currently at {location}&#46;\t\n{roomDesc}&lt;br&gt;\nYou can go &#91;&#91;north ({roomNorth})&#93;&#93;(travel,direction=north), &#91;&#91;west ({roomWest})&#93;&#93;(travel,direction=west), &#91;&#91;south ({roomSouth})&#93;&#93;(travel,direction=south), &#91;&#91;east ({roomEast})&#93;&#93;(travel,direction=east)&#46;\n[/code:2cyj0jyf]\n\nThanks again Alex! It works perfectly!",
      "EditableFormat": "bbcode",
      "HTML": "Thank you Alex! If I set the variable &quot;b&quot; equal to the Squiffy attribute &quot;b&quot; where &quot;a&quot; is set, it should work out fine.<br/><br/>The work I'm having problem with involves something such as this:<br/><br/><pre><code><br/>&lt;!-- Room setup --&gt;<br/>&#91;&#91;setup&#93;&#93;&#58;<br/>function Room(desc, north, east, south, west) {<br/>      this&#46;desc = desc;<br/>      this&#46;north = north;<br/>      this&#46;east = east;<br/>      this&#46;south = south;<br/>      this&#46;west = west;<br/>    }<br/>var home = new Room(&quot;Your home is unique, a makeshift house built near the edge of the forest and ocean&#46; Your happy to call it home, it took you a week to build it, fence and all!&quot;,&quot;Dark Woods&quot;,&quot;Ghost Town&quot;,&quot;Meadow&quot;,&quot;Beach&quot;);<br/><br/>var town = new Room(&quot;&#46;&#46;&#46;&quot;);<br/><br/>&lt;!-- When you eventually get to your home&#46;&#46;&#46; --&gt;<br/>\t&#91;&#91;home&#93;&#93;&#58;<br/>\tsquiffy&#46;set(&quot;location&quot;,&quot;home&quot;);<br/>\tsquiffy&#46;set(&quot;roomDesc&quot;,home&#46;desc);<br/>\tsquiffy&#46;set(&quot;roomNorth&quot;,home&#46;north);<br/>\tsquiffy&#46;set(&quot;roomEast&quot;,home&#46;east);<br/>\tsquiffy&#46;set(&quot;roomSouth&quot;,home&#46;south);<br/>\tsquiffy&#46;set(&quot;roomWest&quot;,home&#46;west);<br/>\t<br/>{roomDesc}&lt;br&gt;<br/>You can go &#91;&#91;north ({roomNorth})&#93;&#93;(travel,direction=north), &#91;&#91;west ({roomWest})&#93;&#93;(travel,direction=west), &#91;&#91;south ({roomSouth})&#93;&#93;(travel,direction=south), &#91;&#91;east ({roomEast})&#93;&#93;(travel,direction=east)&#46; You are currently at {location}&#46;<br/><br/>\t&#91;&#91;location&#93;&#93;&#58;<br/>\t//code to perform a function of where to travel based on current location and direction chosen&#46;<br/></code></pre><br/><br/>So, in order to fix this, I'll need to assign var home here instead.<br/><br/><pre><code><br/>&lt;!-- When you eventually get to your home&#46;&#46;&#46; --&gt;<br/>\t&#91;&#91;home&#93;&#93;&#58;<br/>\tvar home = {<br/>    \t\tdesc&#58;&quot;Your home is unique, a makeshift house built near the edge of the forest and ocean&#46; Your happy to call it home, it took you a week to build it, fence and all!&quot;,<br/>    \t\tnorth&#58;&quot;Dark Woods&quot;,<br/>    \t\teast&#58;&quot;Ghost Town&quot;,<br/>    \t\tsouth&#58;&quot;Meadow&quot;,<br/>    \t\twest&#58;&quot;Beach&quot;<br/>\t};<br/>\t<br/>\tsquiffy&#46;set(&quot;location&quot;,&quot;home&quot;);<br/>\tsquiffy&#46;set(&quot;roomDesc&quot;,home&#46;desc);<br/>\tsquiffy&#46;set(&quot;roomNorth&quot;,home&#46;north);<br/>\tsquiffy&#46;set(&quot;roomEast&quot;,home&#46;east);<br/>\tsquiffy&#46;set(&quot;roomSouth&quot;,home&#46;south);<br/>\tsquiffy&#46;set(&quot;roomWest&quot;,home&#46;west);<br/>\t<br/>You are currently at {location}&#46;\t<br/>{roomDesc}&lt;br&gt;<br/>You can go &#91;&#91;north ({roomNorth})&#93;&#93;(travel,direction=north), &#91;&#91;west ({roomWest})&#93;&#93;(travel,direction=west), &#91;&#91;south ({roomSouth})&#93;&#93;(travel,direction=south), &#91;&#91;east ({roomEast})&#93;&#93;(travel,direction=east)&#46;<br/></code></pre><br/><br/>Thanks again Alex! It works perfectly!",
      "PostDate": "2015-08-24T14:41:52+01:00",
      "LastEditDate": null
    }
  ]
}
