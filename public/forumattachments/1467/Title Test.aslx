<!--Saved by Quest 5.6.5783.24153-->
<asl version="550">
  <include ref="English.aslx" />
  <include ref="Core.aslx" />
  <game name="Title Test">
    <gameid>7ceddfee-9d30-4032-8a24-5a73410758e0</gameid>
    <version>1.0</version>
    <firstpublished>2016</firstpublished>
    <css><![CDATA[<style type="text/css">div#txtCommandDiv {border:none; font-size:12pt; font-family:Georgia, serif; } input#txtCommand { outline:none; border:none; font-size:16px; margin:0; padding:0; }</style>
   
       <style type="text/css">
                 
        div#txtCommandDiv {
            border: none;
            background: no-repeat;
          }
          input#txtCommand {
            outline:none;
            border: none;
            margin:0;
            padding:0;
            max-width: 1000px;
          }
          #status { display: none !important; visibility: hidden !important; }       
          </style>
                                                                                                ]]></css>
    <showscore />
    <showhealth />
    <feature_asktell />
    <defaultfontsize type="int">17</defaultfontsize>
    <underlinehyperlinks type="boolean">false</underlinehyperlinks>
    <setcustompadding />
    <custompaddingbottom type="int">100</custompaddingbottom>
    <defaultwebfont>Amarante</defaultwebfont>
    <defaultbackground>Black</defaultbackground>
    <setcustomwidth />
    <defaultforeground>DarkGreen</defaultforeground>
    <custompaddingleft type="int">50</custompaddingleft>
    <custompaddingright type="int">50</custompaddingright>
    <showborder type="boolean">false</showborder>
    <enablehyperlinks type="boolean">false</enablehyperlinks>
    <backgroundimage>black background.jpg</backgroundimage>
    <setbackgroundopacity type="boolean">false</setbackgroundopacity>
    <backgroundopacity type="double">0</backgroundopacity>
    <showpanes />
    <showlocation type="boolean">false</showlocation>
    <customwidth type="int">1300</customwidth>
    <showtitle type="boolean">false</showtitle>
    <attr name="autodescription_youarein" type="int">0</attr>
    <custompaddingtop type="int">50</custompaddingtop>
    <attr name="autodescription_description" type="int">1</attr>
    <attr name="autodescription_youcansee" type="int">0</attr>
    <statusattributes type="stringdictionary">
      <item>
        <key>percent</key>
        <value><![CDATA[<div style="width:100%; height:24px; border:1px solid blue;"><div style="background-color:blue;width:!%;height:100%"></div></div><div style="text-align:center">!%</div>]]></value>
      </item>
    </statusattributes>
    <percent type="int">0</percent>
    <pov type="object">Xanadu</pov>
    <start type="script"><![CDATA[
      JS.eval ("getCSSRule('a.cmdlink').style.color='#000000'")
      JS.setCommandBarStyle (GetCurrentTextFormat("") + ";border:" + game.defaultbackground)
      if (GetBoolean(twentyfourhours, "morning")) {
        if (RandomChance(90)) {
          msg ("test<br/>test<br/>test")
        }
      }
    ]]></start>
    <onhealthzero type="script">
      msg ("You have had the life sucked out of you.  Good luck in your next life...")
    </onhealthzero>
    <object name="twentyfourhours">
      <inherit name="editor_object" />
      <HoursCount type="int">0</HoursCount>
      <changedHoursCount type="script"><![CDATA[
        if (twentyfourhours.HoursCount = 30) {
          if (GetBoolean(Xanadu, "inside")) {
            msg ("<br/>Even being inside, you can tell that the morning sun has risen in the sky.  The air in here is noticeably warmer.")
            SetObjectFlagOff (twentyfourhours, "morning")
            SetObjectFlagOn (twentyfourhours, "noon")
          }
          else {
            msg ("<br/>The shadows have grown shorter and the sun hangs directly over your head.  It's hot out here.")
            SetObjectFlagOff (twentyfourhours, "morning")
            SetObjectFlagOn (twentyfourhours, "noon")
          }
        }
        else if (twentyfourhours.HoursCount = 45) {
          if (GetBoolean(Xanadu, "inside")) {
            msg ("<br/>It's still hot, but the heat seems to be fading a bit in here and a breeze gently brushes the walls outside.")
            SetObjectFlagOff (twentyfourhours, "noon")
            SetObjectFlagOn (twentyfourhours, "afternoon")
          }
          else {
            msg ("<br/>You have noticed the shadows have grown longer and a slight breeze gives reprieve to your hot skin.")
            SetObjectFlagOff (twentyfourhours, "noon")
            SetObjectFlagOn (twentyfourhours, "afternoon")
          }
        }
        else if (twentyfourhours.HoursCount = 60) {
          if (GetBoolean(Xanadu, "inside")) {
            msg ("<br/>The light in the room seems to be retreating.  The shadows grow darker and the room colder.")
            SetObjectFlagOff (twentyfourhours, "afternoon")
            SetObjectFlagOn (twentyfourhours, "dusk")
          }
          else {
            msg ("<br/>The sun is shrinking on the horizon and the once bright sky is rapidly darkening.   A chill is ushered in by a whistling wind.")
            SetObjectFlagOff (twentyfourhours, "afternoon")
            SetObjectFlagOn (twentyfourhours, "dusk")
          }
        }
        else if (twentyfourhours.HoursCount = 75) {
          if (GetBoolean(Xanadu, "inside")) {
            msg ("<br/>The room has grown quite cold.  Despite the growing darkness in the room, you can see a cloud of microscopic water crystals every time you exhale.")
            SetObjectFlagOff (twentyfourhours, "dusk")
            SetObjectFlagOn (twentyfourhours, "evening")
            average bat.presentin = false
          }
          else {
            msg ("<br/>The sun has fully retreated leaving the dark sky and the stars to keep you company.  It is quite chilly out here now.")
            SetObjectFlagOff (twentyfourhours, "dusk")
            SetObjectFlagOn (twentyfourhours, "evening")
            SetObjectFlagOff (average bat, "present")
            MoveObject (average bat, Item Warehouse)
            average bat.presentin = false
          }
        }
        else if (twentyfourhours.HoursCount = 90) {
          if (GetBoolean(Xanadu, "inside")) {
            SetObjectFlagOff (twentyfourhours, "evening")
            SetObjectFlagOn (twentyfourhours, "midnight")
            SetObjectFlagOn (twentyfourhours, "dark")
            bats.presentin = false
            if (GetBoolean(Xanadu, "light")) {
              msg ("<br/>The darkness in the room would be absolute now if it wasn't for your light source.  Your light, however, does nothing for the bitter cold.")
            }
            else {
              msg ("<br/>The moonlight offers insufficient light.  It is now pitch black in here.  If you have a lightsource, you better get to using it.")
            }
          }
          else {
            msg ("<br/>It is uncomfortably cold now and the only light you can use to travel by is supplied by the moon and the faint stars overhead.")
            bats.presentin = false
            MoveObject (large bats, Item Warehouse)
            MoveObject (small bats, Item Warehouse)
            MoveObject (bats, Item Warehouse)
            SetObjectFlagOff (twentyfourhours, "evening")
            SetObjectFlagOn (twentyfourhours, "midnight")
          }
        }
        else if (twentyfourhours.HoursCount = 1) {
          if (GetBoolean(Xanadu, "inside")) {
            msg ("<br/>The room brightens a bit and warmth begins to return to the air.")
            SetObjectFlagOff (twentyfourhours, "midnight")
            SetObjectFlagOn (twentyfourhours, "dawn")
            SetObjectFlagOff (twentyfourhours, "dark")
            bats2.presentin = false
          }
          else {
            msg ("<br/>The warming sun has peaked over the horizon and its light casts long shadow across the ground.")
            SetObjectFlagOff (twentyfourhours, "midnight")
            SetObjectFlagOn (twentyfourhours, "dawn")
            SetObjectFlagOff (twentyfourhours, "dark")
            bats2.presentin = false
            MoveObject (bats2, Item Warehouse)
            MoveObject (small bats, Item Warehouse)
            MoveObject (large bats, Item Warehouse)
            MoveObject (enormous bats, Item Warehouse)
          }
        }
        else if (twentyfourhours.HoursCount = 105) {
          if (GetBoolean(Xanadu, "inside")) {
            msg ("<br/>The room has become a little brighter and warmer.")
            SetObjectFlagOff (twentyfourhours, "dawn")
            SetObjectFlagOn (twentyfourhours, "morning")
            bats.presentin = false
          }
          else {
            msg ("<br/>Thankfully, the stars have become invisible, the winds subsided, and the air has warmed.")
            SetObjectFlagOff (twentyfourhours, "dawn")
            SetObjectFlagOn (twentyfourhours, "morning")
            bats.presentin = false
          }
        }
        else if (twentyfourhours.HoursCount = 15) {
          if (GetBoolean(Xanadu, "inside")) {
            msg ("<br/>Even being inside, you can tell that the morning sun has risen in the sky.  The air in here is noticeably warmer.")
            SetObjectFlagOff (twentyfourhours, "dawn")
            SetObjectFlagOn (twentyfourhours, "morning")
          }
          else {
            msg ("<br/>The morning sun is rising in the distance, stretching the shadows and warming the air.")
            SetObjectFlagOff (twentyfourhours, "dawn")
            SetObjectFlagOn (twentyfourhours, "morning")
            SetObjectFlagOff (bats, "present")
            MoveObject (bats, Item Warehouse)
          }
        }
        else if (twentyfourhours.HoursCount = 120) {
          twentyfourhours.HoursCount = 1
          SetObjectFlagOff (enormous bats, "present")
          MoveObject (enormous bats, Item Warehouse)
        }
      ]]></changedHoursCount>
    </object>
    <object name="inside">
      <inherit name="editor_object" />
    </object>
    <object name="outside">
      <inherit name="editor_object" />
    </object>
  </game>
  <object name="Title Room">
    <inherit name="editor_room" />
    <usedefaultprefix type="boolean">false</usedefaultprefix>
    <firstenter type="script">
    </firstenter>
    <beforefirstenter type="script">
    </beforefirstenter>
    <enter type="script"><![CDATA[
      SetFontSize (40)
      SetTimeout (5) {
        picture ("Xanadu 4 gif.gif")
        SetTimeout (10) {
          ClearScreen
          msg ("It all started innocently enough...")
        }
        SetTimeout (15) {
          ClearScreen
          msg ("...you went with Straussberger, a friend and American military hero, to search an abandoned terrorist compound for clues.")
        }
        SetTimeout (24) {
          ClearScreen
          msg ("You arrived on location.<br/><br/>But... you were attacked before you arrived at the compound.")
        }
        SetTimeout (32) {
          ClearScreen
          msg ("Your car exploded.  You awoke on a cliff's edge, left for dead.  Alone...")
        }
        SetTimeout (40) {
          ClearScreen
          msg ("Somehow you survived and managed to defend your life against the pursuing Dingo henchmen and get into the compound safely.")
        }
        SetTimeout (50) {
          ClearScreen
          msg ("You thought you were safe, but when you arrived at the compound you found it occupied.  You were captured by Dr. Dingo - who turned out being your old friend.  <br/><br/>Or so you thought...")
        }
        SetTimeout (61) {
          ClearScreen
          msg ("You escaped your cell and met a creature named Blerk who became your only trusted companion.")
        }
        SetTimeout (68) {
          ClearScreen
          msg ("The two of you discovered that Dr. Dingo had an imposter that presented himself as your friend, Straussberger.  It was time to discover who the real Dr. Dingo was.")
        }
        SetTimeout (77) {
          ClearScreen
          msg ("In your adventure, you and Blerk traversed the compound overcoming seemingly insurmountable obstacles.  Finally, you discovered the real Dr. Dingo.")
        }
        SetTimeout (86) {
          ClearScreen
          msg ("To your surprise, you found the real Dr. Dingo was actually a female.  An alluring woman.  Beautiful.  Red hair.  Shapely.  Dangerous.<br/>")
          SetTimeout (7) {
            msg ("<br/>Despite her beauty, it was dangerous.  You had to leave.")
          }
        }
        SetTimeout (97) {
          ClearScreen
          msg ("Against all odds... <br/>")
          SetTimeout (3) {
            msg ("You found the real Straussberger.  You befriended Blerk.  You made plans for the three of you to escape.")
          }
        }
        SetTimeout (108) {
          ClearScreen
          msg ("After escaping, you collapsed.... fatigued in the hot desert.")
        }
        SetTimeout (114) {
          ClearScreen
          msg ("You wake up...")
        }
        SetTimeout (119) {
          ClearScreen
          msg ("...in a strange hut in an unknown village.  A lady is asking you questions about who you are, why you are here, and why dangerous looking people have come looking for you.")
        }
        SetTimeout (129) {
          ClearScreen
          msg ("But... you remember nothing...<br/>")
        }
        SetTimeout (134) {
          ClearScreen
          msg ("Your adventure begins.")
          SetFontSize (17)
        }
        SetTimeout (137) {
          msg ("<br/><br/><br/><br/><font color = \"green\">Please press any key to continue.")
          wait {
            stop sound
            MoveObject (Xanadu, hut)
          }
        }
      }
      play sound ("Club Diver.mp3", false, false)
    ]]></enter>
    <beforeenter type="script">
      HideCommandBar
    </beforeenter>
    <object name="Xanadu">
      <inherit name="editor_object" />
      <inherit name="editor_player" />
      <takemsg>How about you try and take yourself and see how that works out for you.</takemsg>
      <drop type="boolean">false</drop>
      <dropmsg>As much as you might like to drop yourself off and forget about yourself forever, you cannot.</dropmsg>
      <alt type="stringlist">
        <value>me</value>
      </alt>
      <maxscore type="int">100</maxscore>
      <score type="int">0</score>
      <look type="script">
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("You are looking like you, just dirtier and a little rougher around the edges.  Your head has cleared a bit, but you still don't recall much of anything other than your name.")
        }
        else {
          msg ("You look terrible.  Your head hurts.  You are very hungry and your throat is raw.  You've seen better days.")
        }
      </look>
      <changedscore type="script">
        game.percent = Xanadu.score*100 / Xanadu.maxscore
        msg ("Your percent is now " + game.percent)
      </changedscore>
      <attr name="pov_look" type="script">
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("You are looking like you, just dirtier and a little rougher around the edges.  Your head has cleared a bit, but you still don't recall much of anything other than your name.")
        }
        else {
          msg ("You look terrible.  Your head hurts.  You are very hungry and your throat is raw.  You've seen better days.")
        }
      </attr>
    </object>
  </object>
  <object name="hut">
    <inherit name="editor_room" />
    <alias><![CDATA[<b><u>Inside a hut</b></u>]]></alias>
    <usedefaultprefix type="boolean">false</usedefaultprefix>
    <description type="script"><![CDATA[
      if (GetBoolean(hut, "observed")) {
        msg ("You are inside a crudely-made hut.  <br/><br/>A few young children continue to run in and out of the hut playing some sort of game.  Calista is tending to the chickens.")
      }
      else {
        msg ("You are inside a crudely-made hut.<br/><br/>Children are scurrying around, running into and out of the hut, shrieking with delight as they do so.  Despite their joy, they are giving you quite a headache.  There is a large, colorfully dressed woman working on the other side of the hut.  Her back is turned toward you, but she occassionally glances over her shoulder at you and offers a smile.")
      }
    ]]></description>
    <enter type="script">
      ClearScreen
      ShowCommandBar
      SetObjectFlagOn (Xanadu, "inside")
    </enter>
    <beforeenter type="script">
      SetFontName ("'Courier New', Courier, monospace")
    </beforeenter>
    <onexit type="script">
      SetObjectFlagOff (Xanadu, "inside")
    </onexit>
    <firstenter type="script">
    </firstenter>
    <object name="woman">
      <inherit name="editor_object" />
      <alt type="stringlist">
        <value>lady</value>
        <value>gal</value>
        <value>girl</value>
        <value>women</value>
      </alt>
      <takemsg>She appears heavy.  She also would probably not enjoy being part of your inventory.  You leave her alone.</takemsg>
      <drop />
      <look type="script">
        if (GetBoolean(woman, "observed")) {
          msg ("She is wearing a colorful robe and is currently tending to the chickens.  Occassionally, she'll turn in your direction, smile, and nod.")
        }
        else {
          msg ("She is colorfully dressed in a long silky robe.  Currently, she facing away from you, busy working on something.  You can't tell what she is doing because she makes a better door than a window.  She is quiet but not eerily so.  From her occassional smile, she seems glad you are here.")
        }
      </look>
      <speak type="script"><![CDATA[
        firsttime {
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Did you enjoy your drink, sir?\" she asks while smiling at you.  \"Those there drinks will make you feel better.\"")
          }
          else {
            msg ("\"Well, 'ello dearie,\" she says in a thick, pleasant accent.  \"My name is Calista.  How are you feeling?  Is there something that you need?\"  She smiles.<br/><br/>Come to think of it, you are pretty thirsty.")
            MakeObjectVisible (woman1)
            MakeObjectInvisible (woman)
          }
        }
        otherwise {
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Did you enjoy your drink, sir?\" she asks while smiling at you.  \"Those there drinks will make you feel better.\"")
          }
          else {
            msg ("She listens and her countenance suggests that she feels pity for you.  \"You do not look so good, sir.  Would like something to drink?  You should really get a drink.  I would be happy to make you one.\"  She smiles at you and adds, \"Just let me know, sir.")
          }
        }
      ]]></speak>
      <watch type="script">
        if (GetBoolean(woman, "observed")) {
          msg ("So far you've seen her slit the throats of a few chickens, pluck them, and hang them on the line.")
        }
        else {
          msg ("You cringe as you see the woman slit the throat of a live chicken.  She hangs it on a thin rope with a few other featherless birds.  She moves down the line to another headless chicken and begins plucking.  She must be getting ready for a meal.")
          SetObjectFlagOn (woman, "observed")
        }
      </watch>
      <observe type="script">
        if (GetBoolean(woman, "observed")) {
          msg ("So far you've seen her slit the throats of a few chickens, pluck them, and hang them on the line.")
        }
        else {
          msg ("You cringe as you see the woman slit the throat of a live chicken.  She hangs it on a thin rope with a few other featherless birds.  She moves down the line to another headless chicken and begins plucking.  She must be getting ready for a meal.")
          SetObjectFlagOn (woman, "observed")
        }
      </observe>
      <askdefault type="script">
        msg ("You begin to speak, but she shushes you and asks if you need a drink.")
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("\"I know nothing of the sort.  Relax and gather your strength.\"")
        }
        else {
          msg ("You begin to speak, but she shushes you and asks if you need a drink.")
        }
      </askdefault>
      <ask type="scriptdictionary">
        <item key="drink water beverage thirst thirsty"><![CDATA[
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Ah.  You like, yes?\"  Calista smiles.  \"But, you should not drink another, sir.  Too many will make you sick.\"")
          }
          else {
            if (GetBoolean(drink1, "received")) {
              msg ("\"Despite it's looks,\" she says with a smile, \"it is quite healthy.  Drink up.  You'll feel better in no time.\"")
            }
            else {
              msg ("\"Yes, right away, good sir.\"  <br/><br/>Calista exits the hut and within a few moments she returns with a brown cup.  She walks over to the chickens and grabs a few items, grinds them up and sprinkles them in the cup.  She walks towards you and shoves the big drink into your hands.  \"Drink up, sir,\" she says with a smile.")
              AddToInventory (drink1)
              MakeObjectVisible (drink1)
              SetObjectFlagOn (drink1, "received")
            }
          }
        ]]></item>
        <item key="kids children kid child boys girls boy girl">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Ah, you know.  Kids will be kids.  Chasing, playing.  They are having fun, yes.\"  Calista smiles and returns to her work.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="akhet akhet! akhet!!">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Akhet.  Akhet means...\" she thinks.  \"In English, Akhet means mountain of light.  Horizon.\"  She waves a finger northward before returning to her chickens.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="me xanadu magoo">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"You?\" she chuckles.  \"I know as much about you as you do.  I'm sorry I cannot help.  Maybe the juju man can help?\" she says quietly.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="village town city">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Eh.  Eh.  It's not much to you Americans, but it is home.  Home provides for us.\"  She smiles and goes back to multilating the chickens.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="gesseende geseende geseen geseend gesende">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Geseende.  Bless you.  You have been blessed,\" she answers.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="chickens work job">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Does this bother you?\" she says as she waves at the chickens.  \"I'm just preparing meals for the village.  It is my duty to serve my fellow villagers.\"  She smiles at you and continues working.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir?  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="bat bats enormous giantbats smallbats kolf aanval">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"As far I I know, they do no harm.  Actually, That game those kids play they call 'kolf aanval' or attack of the bats.   Personally,\" she says with a smile, \"they keep the bugs in check.\" ")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir?  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="rope line hang hanging">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"For hanging my chickens,\" she clucks as she returns to her work.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="hut house home">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"This here hut,\" she begins with a prideful smile, \"has seen six kids born and raised.  It's not much but I keep it tidy.  My husband would have wanted it that way.\"")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="husband spouse hubby con">
          if (GetBoolean(Xanadu, "quenched")) {
            firsttime {
              msg ("\"Ah.  Dear Con,\" Calista begins with a hint of pride.  \"He was a fabulous husband and father.  Gone missing a year ago on after going hunting.  Hasn't been seen since.  I hold to the hope he is alive but... I am a realist with a family to raise.  He'd be proud of us.\"  She continues her work at the chickens.")
            }
            otherwise {
              msg ("\"Con's missing.  Likely dead,\" she says bluntly.  \"I miss him, but he lives in our family.\"")
            }
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
      </ask>
      <tell type="scriptdictionary">
        <item key="drink water beverage thirst thirsty"><![CDATA[
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Ah.  You like, yes?\"  Calista smiles.  \"But, you should not drink another, sir.  Too many will make you sick.\"")
          }
          else {
            msg ("\"Yes, right away, good sir.\"  <br/><br/>Calista exits the hut and within a few moments she returns with a brown cup.  She walks over to the chickens and grabs a few items, grinds them up and sprinkles them in the cup.  She walks towards you and shoves the big drink into your hands.  \"Drink up, sir,\" she says with a smile.")
            AddToInventory (drink1)
            MakeObjectVisible (drink1)
          }
        ]]></item>
      </tell>
    </object>
    <object name="children">
      <inherit name="editor_object" />
      <usedefaultprefix type="boolean">false</usedefaultprefix>
      <alt type="stringlist">
        <value>kids</value>
        <value>child</value>
        <value>kid</value>
      </alt>
      <takemsg>Are you some sort of sick pedophile??  Creep.  Let the kids play their game and leave them alone.</takemsg>
      <look type="script">
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("The children are young - you'd say ranging from five to ten years of age.  They are playing some sort of game that you sort of understand as hide-and-seek they are speaking a language that you do not understand.  They are loud, but seem to be having a good time.")
        }
        else {
          msg ("The children are young, loud and obnoxious.  They are playing some sort of game where evidently 'loudness' is an advantageous quality.  Your head is throbbing and you wish they would just shut up so you could think.")
        }
      </look>
      <speak type="script"><![CDATA[
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("The child regards you when you speak by putting one finger up near their lips and offering the universal 'shush' command.  Evidently, you are disturbing their game.  <br/><br/>The kid notices your expression, quietly shuffles over to you, bops you on the nose with his thumb and whispers, <b>\"Geseende\"</b> in your ear.")
        }
        else {
          msg ("You don't feel like talking right now, especially to a bunch of kids who are loud and obnoxious.  Your throat feels as if you have been swallowing glass.  You better quench that thirst before doing anything else.")
        }
      ]]></speak>
      <askdefault type="script">
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("The children try to ignore your questions and plead quietly with you to remain quiet so you do not give away their location.  Must be part of the game...")
        }
        else {
          msg ("The sound of your own voice above the din just adds to your headache.  You should get hydrated and perhaps the screaming demons in your head will go away.")
        }
      </askdefault>
      <telldefault type="script">
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("The children try to ignore your riveting comments and wave their hands in your direction in a gesture for you to stay quiet and not ruin their game...")
        }
        else {
          msg ("Your voice comes out gravely and manly - definitely not like your own.  Before yapping up a storm, perhaps you should quench your thirst?")
        }
      </telldefault>
      <watch type="script"><![CDATA[
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("With a little settling of your stomach and clearing of the cobwebs, you watch the children play their game.  A few kids run in, sometimes one, sometimes two or three.  Shortly thereafter another kid enters and tries to tag one of the others.  But, the kid doesn't tag normally, but instead raises one hand up with two outstretched, curved fingers and pokes them down on one of the other kids.  Occassionally, before a kid gets poked, they will shout <b>\"Akhet! Akhet!\"</b> at which point the \"tagger\" races from the hut screaming while the other children laugh and follow.")
          SetObjectFlagOn (game1, "watched")
        }
        else if (GetBoolean(game1, "watched")) {
          msg ("The kids are still running around playing a game.  It's all nice and quiet until one kids shouts <b>\"Akhet!\"</b> just before getting tagged.  Then they all run and scream, chasing the \"tagger\" out of the hut.")
        }
        else {
          msg ("They just look like a bunch of annoying kids who are loud and contributing to your headache.  You really need to get rid of this headache so you can focus and figure out what to do next.")
        }
      ]]></watch>
      <ask type="scriptdictionary">
        <item key="akhet akhet! akhet!!"><![CDATA[
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("The nearest child looks at you and smiles wide.  \"Akhet.  Akhet!\"<br/><br/>Evidently the children don't speak much English.")
          }
          else {
            msg ("Your throat is too sore to speak.  You should look into getting a drink first.")
          }
        ]]></item>
        <item key="gesseende geseende geseen geseend gesende"><![CDATA[
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"One of the children quietly comes over and places her thumb on your forehead.  Geseende.\"  She smiles and goes about playing her game.<br/><br/>Evidently the children don't speak much English.")
          }
          else {
            msg ("Your throat is too sore to speak.  You should look into getting a drink first.")
          }
        ]]></item>
        <item key="con dad father da pops">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("A faint frown passes his face and he says, \"Geseende.\"  He returns happily playing his game.")
          }
          else {
            msg ("Your throat is too sore to speak.  You should look into getting a drink first.")
          }
        </item>
        <item key="bats bat">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("The nearest child looks at you and smiles wide.  He makes a fist and wiggles his thumb and pinky back and forth.  Evidently he doesn't speak much English.")
          }
          else {
            msg ("Your throat is too sore to speak.  You should look into getting a drink first.")
          }
        </item>
      </ask>
    </object>
    <command name="watch game cmd">
      <pattern>watch children; watch game; watch kids; watch kids play game; watch children play game; watch children play; observe children playing; observe children playing game; observe kids; observe kid; watch kid play game; watch child play; observe game; watch; observe</pattern>
      <script><![CDATA[
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("With a little settling of your stomach and clearing of the cobwebs, you watch the children play their game.  A few kids run in, sometimes one, sometimes two or three.  Shortly thereafter another kid enters and tries to tag one of the others.  But, the kid doesn't tag normally, but instead raises one hand up with two outstretched, curved fingers and pokes them down on one of the other kids.  Occassionally, before a kid gets poked, they will shout <b>\"Akhet! Akhet!\"</b> at which point the \"tagger\" races from the hut screaming while the other children laugh and follow.")
          SetObjectFlagOn (game1, "watched")
        }
        else if (GetBoolean(game1, "watched")) {
          msg ("The kids are still running around playing a game.  It's all nice and quiet until one kids shouts <b>\"Akhet!\"</b> just before getting tagged.  Then they all run and scream, chasing the \"tagger\" out of the hut.")
        }
        else {
          msg ("They just look like a bunch of annoying kids who are loud and contributing to your headache.  You really need to get rid of this headache so you can focus and figure out what to do next.")
        }
      ]]></script>
    </command>
    <object name="game1">
      <inherit name="editor_object" />
      <alias>game</alias>
      <scenery />
      <visible />
      <takemsg>You cannot take the game they are playing.</takemsg>
      <alt type="stringlist">
        <value>play</value>
      </alt>
      <look type="script"><![CDATA[
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("With a little settling of your stomach and clearing of the cobwebs, you watch the children play their game.  A few kids run in, sometimes one, sometimes two or three.  Shortly thereafter another kid enters and tries to tag one of the others.  But, the kid doesn't tag normally, but instead raises one hand up with two outstretched, curved fingers and pokes them down on one of the other kids.  Occassionally, before a kid gets poked, they will shout <b>\"Akhet! Akhet!\"</b> at which point the \"tagger\" races from the hut screaming while the other children laugh and follow.")
        }
        else {
          msg ("They just look like a bunch of annoying kids who are loud and contributing to your headache.  You really need to get rid of this headache so you can focus and figure out what to do next.")
        }
      ]]></look>
    </object>
    <object name="drink1">
      <inherit name="editor_object" />
      <alias>foul concoction</alias>
      <visible type="boolean">false</visible>
      <look>It has the consistency of a milkshake, is lime green, and has an earthy odor.  According to the kind lady in the hut, it works wonders for your mind and body.</look>
      <take />
      <dropmsg>You keep a hold of it for fear of spilling it.</dropmsg>
      <takemsg>You pick it up.</takemsg>
      <drop type="boolean">false</drop>
      <alt type="stringlist">
        <value>drink</value>
        <value>beverage</value>
      </alt>
      <drink type="script"><![CDATA[
        SetObjectFlagOn (Xanadu, "quenched")
        msg ("You look over at the friendly lady and she smiles and offers an encouraging nod.  You raise the concoction to your lips and tip it back.<br/><br/>*Gulp... gulp, gulp, gulp*<br/><br/>It goes down a lot easier than you expected.  Almost immediately you begin to feel a little better!<br/><br/>Calista smiles.  \"Good, yes?\"  She returns her attention to the chickens.")
        RemoveObject (drink1)
        AddToInventory (coconut cup)
        MakeObjectVisible (coconut cup)
      ]]></drink>
    </object>
    <object name="coconut cup">
      <inherit name="editor_object" />
      <visible type="boolean">false</visible>
      <look>It's brown and fuzzy and hard.  It looks like a hollowed out half of a coconut only about half the size.</look>
      <take />
      <takemsg>You are carrying a small hollow nut... go figure.</takemsg>
      <dropmsg>Your nut finally dropped!</dropmsg>
      <alt type="stringlist">
        <value>nut</value>
        <value>glass</value>
      </alt>
    </object>
    <command name="ask drink cmd">
      <pattern>ask for drink; ask woman for drink; ask calista for drink; get drink; ask for water; ask for beverage; ask woman for water; ask woman for beverage; ask girl for beverage; ask calista for water; ask calista for beverage; ask calista for drink</pattern>
      <script><![CDATA[
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("\"Ah.  You like, yes?\"  Calista smiles.  \"But, you should not drink another, sir.  Too many will make you sick.\"")
        }
        else {
          if (GetBoolean(drink1, "received")) {
            msg ("\"Despite its looks,\" she says with a smile, \"it is quite healthy.  Drink up.  You'll feel better in no time.\"")
          }
          else {
            msg ("\"Yes, right away, good sir.\"  <br/><br/>Calista exits the hut and within a few moments she returns with a brown cup.  She walks over to the chickens and grabs a few items, grinds them up and sprinkles them in the cup.  She walks towards you and shoves the big drink into your hands.  \"Drink up, sir,\" she says with a smile.")
            AddToInventory (drink1)
            MakeObjectVisible (drink1)
            SetObjectFlagOn (drink1, "received")
            MakeObjectInvisible (woman)
            MakeObjectVisible (woman1)
          }
        }
      ]]></script>
    </command>
    <exit alias="north" to="village outskirts">
      <inherit name="northdirection" />
      <lockmessage type="string"></lockmessage>
      <runscript />
      <script type="script">
        if (GetBoolean(Xanadu, "quenched")) {
          firsttime {
            msg ("With renewed strength you head out of the hut.")
            MoveObject (Xanadu, village outskirts)
          }
          otherwise {
            msg ("You walk out of the hut.")
            MoveObject (Xanadu, village outskirts)
          }
        }
        else {
          msg ("You are too weak to go walking around.  You'll need to regain some of your strength first.")
        }
      </script>
    </exit>
    <object name="chickens">
      <inherit name="editor_object" />
      <alt type="stringlist">
        <value>chicken</value>
        <value>bird</value>
        <value>chick</value>
        <value>birds</value>
        <value>chicks</value>
        <value>chickens</value>
      </alt>
      <visible />
      <scenery />
      <look>The chickens are in various stages of butchering.  Some are freshly decapitated and dripping blood, some are freshly plucked, and some look like they are ready for cooking.  They all hang on a line.</look>
      <takemsg>These birds are going to feed the villagers.  Certainly you aren't going to steal their food.</takemsg>
    </object>
    <object name="rope">
      <inherit name="editor_object" />
      <scenery />
      <look>It's a tight line fastened from wall to wall across the corner of the hut.  From it, hang several dead chickens.</look>
      <takemsg>The room is secured to the walls of the hut.  That and it is not yours to take.</takemsg>
      <alt type="stringlist">
        <value>line</value>
        <value>cord</value>
      </alt>
    </object>
    <object name="woman1">
      <inherit name="editor_object" />
      <alt type="stringlist">
        <value>lady</value>
        <value>gal</value>
        <value>girl</value>
        <value>women</value>
        <value>woman</value>
      </alt>
      <takemsg>She appears heavy.  She also would probably not enjoy being part of your inventory.  You leave her alone.</takemsg>
      <drop />
      <alias>Calista</alias>
      <visible type="boolean">false</visible>
      <usedefaultprefix type="boolean">false</usedefaultprefix>
      <look type="script">
        if (GetBoolean(woman, "observed")) {
          msg ("Calista is wearing a colorful robe and is currently tending to the chickens.  Occassionally, she'll turn in your direction, smile, and nod.")
        }
        else {
          msg ("She is colorfully dressed in a long silky robe.  Currently, she facing away from you, busy working on something.  You can't tell what she is doing because she makes a better door than a window.  She is quiet but not eerily so.  From her occassional smile, she seems glad you are here.")
        }
      </look>
      <speak type="script"><![CDATA[
        firsttime {
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Did you enjoy your drink, sir?\" she asks while smiling at you.  \"Those there drinks will make you feel better.\"")
          }
          else {
            msg ("\"Well, 'ello dearie,\" she says in a thick, pleasant accent.  \"My name is Calista.  How are you feeling?  Is there something that you need?\"  She smiles.<br/><br/>Come to think of it, you are pretty thirsty.")
            MakeObjectVisible (Calista)
            MakeObjectInvisible (woman)
          }
        }
        otherwise {
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Did you enjoy your drink, sir?\" she asks while smiling at you.  \"Those there drinks will make you feel better.\"")
          }
          else {
            msg ("She listens and her countenance suggests that she feels pity for you.  \"You do not look so good, sir.  Would like something to drink?  You should really get a drink.  I would be happy to make you one.\"  She smiles at you and adds, \"Just let me know, sir.")
          }
        }
      ]]></speak>
      <watch type="script">
        if (GetBoolean(woman, "observed")) {
          msg ("So far you've seen her slit the throats of a few chickens, pluck them, and hang them on the line.")
        }
        else {
          msg ("You cringe as you see the woman slit the throat of a live chicken.  She hangs it on a thin rope with a few other featherless birds.  She moves down the line to another headless chicken and begins plucking.  She must be getting ready for a meal.")
          SetObjectFlagOn (woman, "observed")
        }
      </watch>
      <observe type="script">
        if (GetBoolean(woman, "observed")) {
          msg ("So far you've seen her slit the throats of a few chickens, pluck them, and hang them on the line.")
        }
        else {
          msg ("You cringe as you see the woman slit the throat of a live chicken.  She hangs it on a thin rope with a few other featherless birds.  She moves down the line to another headless chicken and begins plucking.  She must be getting ready for a meal.")
          SetObjectFlagOn (woman, "observed")
        }
      </observe>
      <askdefault type="script">
        msg ("You begin to speak, but she shushes you and asks if you need a drink.")
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("\"I know nothing of the sort.  Relax and gather your strength.\"")
        }
        else {
          msg ("You begin to speak, but she shushes you and asks if you need a drink.")
        }
      </askdefault>
      <ask type="scriptdictionary">
        <item key="drink water beverage thirst thirsty"><![CDATA[
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Ah.  You like, yes?\"  Calista smiles.  \"But, you should not drink another, sir.  Too many will make you sick.\"")
          }
          else {
            if (GetBoolean(drink1, "received")) {
              msg ("\"Despite it's looks,\" she says with a smile, \"it is quite healthy.  Drink up.  You'll feel better in no time.\"")
            }
            else {
              msg ("\"Yes, right away, good sir.\"  <br/><br/>Calista exits the hut and within a few moments she returns with a brown cup.  She walks over to the chickens and grabs a few items, grinds them up and sprinkles them in the cup.  She walks towards you and shoves the big drink into your hands.  \"Drink up, sir,\" she says with a smile.")
              AddToInventory (drink1)
              MakeObjectVisible (drink1)
              SetObjectFlagOn (drink1, "received")
            }
          }
        ]]></item>
        <item key="kids children kid child boys girls boy girl">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Ah, you know.  Kids will be kids.  Chasing, playing.  They are having fun, yes.\"  Calista smiles and returns to her work.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="akhet akhet! akhet!!">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Akhet.  Akhet means...\" she thinks.  \"In English, Akhet means mountain of light.  Horizon.\"  She waves a finger northward before returning to her chickens.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="me xanadu magoo">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"You?\" she chuckles.  \"I know as much about you as you do.  I'm sorry I cannot help.  Maybe the juju man can help?\" she says quietly.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="village town city">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Eh.  Eh.  It's not much to you Americans, but it is home.  Home provides for us.\"  She smiles and goes back to multilating the chickens.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="gesseende geseende geseen geseend gesende">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Geseende.  Bless you.  You have been blessed,\" she answers.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="chickens work job">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Does this bother you?\" she says as she waves at the chickens.  \"I'm just preparing meals for the village.  It is my duty to serve my fellow villagers.\"  She smiles at you and continues working.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir?  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="bat bats enormous giantbats smallbats kolf aanval">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"As far I I know, they do no harm.  Actually, That game those kids play they call 'kolf aanval' or attack of the bats.   Personally,\" she says with a smile, \"they keep the bugs in check.\" ")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir?  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="rope line hang hanging">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"For hanging my chickens,\" she clucks as she returns to her work.")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="hut house home">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"This here hut,\" she begins with a prideful smile, \"has seen six kids born and raised.  It's not much but I keep it tidy.  My husband would have wanted it that way.\"")
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
        <item key="husband spouse hubby con">
          if (GetBoolean(Xanadu, "quenched")) {
            firsttime {
              msg ("\"Ah.  Dear Con,\" Calista begins with a hint of pride.  \"He was a fabulous husband and father.  Gone missing a year ago on after going hunting.  Hasn't been seen since.  I hold to the hope he is alive but... I am a realist with a family to raise.  He'd be proud of us.\"  She continues her work at the chickens.")
            }
            otherwise {
              msg ("\"Con's missing.  Likely dead,\" she says bluntly.  \"I miss him, but he lives in our family.\"")
            }
          }
          else {
            msg ("You begin to speak but your throat is raw.  It feels like you have been eating a diet rich in sand.  Calista notices your efforts and says, \"Do you need a drink, sir.  I'll be glad to get you one.  Just ask.\"  She smiles and continues working.")
          }
        </item>
      </ask>
      <tell type="scriptdictionary">
        <item key="drink water beverage thirst thirsty"><![CDATA[
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"Ah.  You like, yes?\"  Calista smiles.  \"But, you should not drink another, sir.  Too many will make you sick.\"")
          }
          else {
            msg ("\"Yes, right away, good sir.\"  <br/><br/>Calista exits the hut and within a few moments she returns with a brown cup.  She walks over to the chickens and grabs a few items, grinds them up and sprinkles them in the cup.  She walks towards you and shoves the big drink into your hands.  \"Drink up, sir,\" she says with a smile.")
            AddToInventory (drink1)
            MakeObjectVisible (drink1)
          }
        ]]></item>
      </tell>
    </object>
    <turnscript name="Hut TS">
      <enabled />
      <script><![CDATA[
        if (game.pov.parent = hut) {
          if (GetBoolean(Xanadu, "quenched")) {
            if (RandomChance(50)) {
              msg ("<br/>The children squeal with delight as they are chased in and out of the hut.")
            }
          }
          else {
            if (RandomChance(50)) {
              msg ("<br/>The squealing of the children compound your headache!  <i>JUST BE QUIET<i> you think.")
            }
          }
        }
      ]]></script>
    </turnscript>
    <command name="shut up kids cmd">
      <pattern type="string"><![CDATA[^(tell|ask) (?<object>.*) to (be quiet|keep quiet|shut up|hush|be silent)$]]></pattern>
      <script>
        if (object = children) {
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("You yell at the kids to be quiet.  They pause, look at you, and smile before continuing to play their game.  They obviously do not speak much english.")
          }
          else {
            msg ("You begin to plead, but your throat is so parched that only a raspy croak escapes your lips.  Better quench that thirst first.")
          }
        }
        else if (object = woman) {
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("For some reason you tell the nice lady to be quiet, but she pays you no mind.")
          }
          else {
            msg ("You begin to plead, but your throat is so parched that only a raspy croak escapes your lips.  Better quench that thirst first.")
          }
        }
        else if (object = woman1) {
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("For some reason you tell the nice lady to be quiet, but she pays you no mind.")
          }
          else {
            msg ("You begin to plead, but your throat is so parched that only a raspy croak escapes your lips.  Better quench that thirst first.")
          }
        }
        else {
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("Even though it is being very quiet, you tell it to shut up anyway.  Nothing happens.")
          }
          else {
            msg ("You begin to plead, but your throat is so parched that only a raspy croak escapes your lips.  Better quench that thirst first.")
          }
        }
      </script>
    </command>
    <command name="play game cmd">
      <pattern>play game; play with kids; play game with kids; join in game; join game; join game with kids</pattern>
      <script>
        msg ("You'd stick out like a sore thumb.  Besides, you don't know how to play anyway.")
      </script>
    </command>
  </object>
  <command name="credit cmd">
    <pattern>credit; credits</pattern>
    <script><![CDATA[
      msg ("Credits:<br/><br/><u>Intro Music</u><br/>\"Club Diver\" Kevin MacLeod (incompetech.com)<br/>Licensed under Creative Commons: By Attribution 3.0 License<br/>http://creativecommons.org/licenses/by/3.0/<br/><br/><u>Layout</u><br/>Panes:  HaganeSteel<br/>Basic Layout:  OurJud, Jay (and others)")
    ]]></script>
  </command>
  <verb>
    <property>watch</property>
    <pattern>watch; observe</pattern>
    <defaultexpression>"You can't watch " + object.article + "."</defaultexpression>
  </verb>
  <object name="village outskirts">
    <inherit name="editor_room" />
    <description>All things considered, the hut to your south looks quite welcoming.  Similar looking, but less kempt huts line the dirt path that heads off to the northeast.  The open desert from which you stumbled into this village stretches out in all other directions.</description>
    <exit alias="south" to="hut">
      <inherit name="southdirection" />
    </exit>
    <object name="children1">
      <inherit name="editor_object" />
      <usedefaultprefix type="boolean">false</usedefaultprefix>
      <alt type="stringlist">
        <value>kids</value>
        <value>child</value>
        <value>kid</value>
      </alt>
      <takemsg>Are you some sort of sick pedophile??  Creep.  Let the kids play their game and leave them alone.</takemsg>
      <alias>children</alias>
      <look type="script">
        msg ("The children are young - you'd say ranging from five to ten years of age.  They are playing some sort of game that you sort of understand as hide-and-seek they are speaking a language that you do not understand.  They are loud, but seem to be having a good time.  It's kind of nice to watch them enjoy themselves as all you have seen lately is tough times.")
      </look>
      <speak type="script"><![CDATA[
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("The child regards you when you speak by putting one finger up near their lips and offering the universal 'shush' command.  Evidently, you are disturbing their game.  <br/><br/>The kid notices your expression, quietly shuffles over to you, bops you on the nose with his thumb and whispers, <b>\"Geseende\"</b> in your ear.")
        }
        else {
          msg ("You don't feel like talking right now, especially to a bunch of kids who are loud and obnoxious.  Your throat feels as if you have been swallowing glass.  You better quench that thirst before doing anything else.")
        }
      ]]></speak>
      <askdefault type="script">
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("The children try to ignore your questions and plead quietly with you to remain quiet so you do not give away their location.  Must be part of the game...")
        }
        else {
          msg ("The sound of your own voice above the din just adds to your headache.  You should get hydrated and perhaps the screaming demons in your head will go away.")
        }
      </askdefault>
      <telldefault type="script">
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("The children try to ignore your riveting comments and wave their hands in your direction in a gesture for you to stay quiet and not ruin their game...")
        }
        else {
          msg ("Your voice comes out gravely and manly - definitely not like your own.  Before yapping up a storm, perhaps you should quench your thirst?")
        }
      </telldefault>
      <watch type="script"><![CDATA[
        if (GetBoolean(Xanadu, "quenched")) {
          msg ("With a little settling of your stomach and clearing of the cobwebs, you watch the children play their game.  A few kids run in, sometimes one, sometimes two or three.  Shortly thereafter another kid enters and tries to tag one of the others.  But, the kid doesn't tag normally, but instead raises one hand up with two outstretched, curved fingers and pokes them down on one of the other kids.  Occassionally, before a kid gets poked, they will shout <b>\"Akhet! Akhet!\"</b> at which point the \"tagger\" races from the hut screaming while the other children laugh and follow.")
          SetObjectFlagOn (game1, "watched")
        }
        else if (GetBoolean(game1, "watched")) {
          msg ("The kids are still running around playing a game.  It's all nice and quiet until one kids shouts <b>\"Akhet!\"</b> just before getting tagged.  Then they all run and scream, chasing the \"tagger\" out of the hut.")
        }
        else {
          msg ("They just look like a bunch of annoying kids who are loud and contributing to your headache.  You really need to get rid of this headache so you can focus and figure out what to do next.")
        }
      ]]></watch>
      <ask type="scriptdictionary">
        <item key="akhet akhet! akhet!!"><![CDATA[
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("The nearest child looks at you and smiles wide.  \"Akhet.  Akhet!\"<br/><br/>Evidently the children don't speak much English.")
          }
          else {
            msg ("Your throat is too sore to speak.  You should look into getting a drink first.")
          }
        ]]></item>
        <item key="gesseende geseende geseen geseend gesende"><![CDATA[
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("\"One of the children quietly comes over and places her thumb on your forehead.  Geseende.\"  She smiles and goes about playing her game.<br/><br/>Evidently the children don't speak much English.")
          }
          else {
            msg ("Your throat is too sore to speak.  You should look into getting a drink first.")
          }
        ]]></item>
        <item key="con dad father da pops">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("A faint frown passes his face and he says, \"Geseende.\"  He returns happily playing his game.")
          }
          else {
            msg ("Your throat is too sore to speak.  You should look into getting a drink first.")
          }
        </item>
        <item key="bats bat">
          if (GetBoolean(Xanadu, "quenched")) {
            msg ("The nearest child looks at you and smiles wide.  He makes a fist and wiggles his thumb and pinky back and forth.  Evidently he doesn't speak much English.")
          }
          else {
            msg ("Your throat is too sore to speak.  You should look into getting a drink first.")
          }
        </item>
      </ask>
    </object>
    <command name="play game cmd1">
      <pattern>play game; play with kids; play game with kids; join in game; join game; join game with kids</pattern>
      <script>
        msg ("You'd stick out like a sore thumb.  Besides, you don't know how to play anyway.")
      </script>
    </command>
    <command name="open desert dir cmd">
      <pattern>sw; w; nw; n; southwest; west; northwest; north</pattern>
      <script>
        wrongdir = GetRandomInt(1,5)
        if (wrongdir = 1) {
          wrongdir = "You dare not venture out into the open desert.  You'll only find death out there."
        }
        else if (wrongdir=2) {
          wrongdir = "You're crazy.  It's hot.  It's dry.  It's hostile.  You'd day out there in under a couple hours."
        }
        else if (wrongdir=3) {
          wrongdir = "That's the way you came from before waking up in the cot.  You don't want to go back that way."
        }
        else if (wrongdir=4) {
          wrongdir = "That's where you came from in the last episode of this trilogy.  You do not want to go back."
        }
        else if (wrongdir=5) {
          wrongdir = "No way.  Too hot.  Too sandy.  Forward progress is in the other direction."
        }
        msg ("You consider it, but..." + wrongdir)
      </script>
    </command>
    <exit alias="northeast" to="dirt path">
      <inherit name="northeastdirection" />
    </exit>
  </object>
  <object name="Item Warehouse">
    <inherit name="editor_room" />
    <object name="large bats">
      <inherit name="editor_object" />
      <look>The large bats are about the size of a housecat.  From what you can tell, they have leathery wings and pointy teeth.  Gross.</look>
      <takemsg>If you could catch one, what would plan to do with it?  Let it gnaw your face off?  Leave it alone unless you have a better plan.</takemsg>
      <scenery />
    </object>
    <object name="small bats">
      <inherit name="editor_object" />
      <look>Even though they aren't as large, they are creepier.  They fly more erratically and much faster than the big ones, seemingly disappearing and reappearing in the night sky.  Watching them in this cold desert air sends shivers up your spine.</look>
      <takemsg>They are too small, too fast, and too high for you to catch.  Leave those gross things alone.</takemsg>
      <scenery />
    </object>
    <object name="bats">
      <inherit name="editor_object" />
      <takemsg>You are going to take all the bats?  No thanks.</takemsg>
      <presentin type="boolean">false</presentin>
      <look type="script">
        if (GetBoolean(twentyfourhours, "dawn")) {
          msg ("Most of the bats seem to be flying off to the east-northeast.  Some are flying due north and fewer of them are flying west.")
        }
        else {
          msg ("The circling bats overhead are in two varieties - small and large - and all are serenading each other.  Ick.")
        }
      </look>
    </object>
    <object name="enormous bats">
      <inherit name="editor_object" />
      <look>You aren't sure exactly what they are... There can't be bats that large can there?  They are almost your size... and they are fast.  The colony of smaller bats part the dark, cold sky as one cuts through at great speeds.  You better keep your distance from those big critters!</look>
      <presentin type="boolean">false</presentin>
    </object>
    <object name="average bat">
      <inherit name="editor_object" />
      <look>The bat glides around in search of food and you can hear a faint squeak every once and a while.</look>
      <takemsg>You cannot take the bat.  It is out of reach.  Besides, what would you do with it?</takemsg>
      <alias>bat</alias>
      <presentin type="boolean">false</presentin>
    </object>
    <object name="bats2">
      <inherit name="editor_object" />
      <alias>bats</alias>
      <look>The black cloud of bats that zip to and fro come in three shapes and sizes.  You big out the large ones quite easily and the smaller ones continue to dart around sporadically.  Most disturbing are the enormous bats that have now camouflaged themselves amongst the smaller ones.</look>
      <takemsg>Don't be ludicrous.</takemsg>
    </object>
  </object>
  <turnscript name="HoursCount TS">
    <enabled />
    <script>
      twentyfourhours.HoursCount = twentyfourhours.HoursCount + 1
    </script>
  </turnscript>
  <object name="dirt path">
    <inherit name="editor_room" />
    <descprefix>You are on</descprefix>
    <description><![CDATA[You are on the dirt path.  To your south is a shanty.  To the north is another hut that is falling apart.<br/>]]></description>
    <enter type="script">
    </enter>
    <exit alias="southwest" to="village outskirts">
      <inherit name="southwestdirection" />
    </exit>
    <exit name="shantylock" alias="south" to="shanty">
      <inherit name="southdirection" />
      <locked />
      <lockmessage>The door stands in your way.</lockmessage>
    </exit>
    <exit alias="northeast" to="dirt path2">
      <inherit name="northeastdirection" />
    </exit>
    <object name="shanty1">
      <inherit name="editor_object" />
      <alias>shanty</alias>
      <scenery />
      <visible />
      <look>It's a shanty on the south side of the road.  It is made of wood and tied together with various bits of metal wire.  Its front door stands to your south.</look>
      <knockon>Try knocking on the door genius.</knockon>
    </object>
    <object name="front door">
      <inherit name="editor_object" />
      <inherit name="openable" />
      <look>Simple.  Made of wood.  Looks like it might have floated in as jettison, if there was an ocean nearby that would have washed it ashore.  On it, at eye level, is a wooden sign with the word 'HUGO' written in white lettering.</look>
      <scenery />
      <alt type="stringlist">
        <value>on door</value>
      </alt>
      <feature_container />
      <knockon type="script"><![CDATA[
        firsttime {
          MakeObjectVisible (grumpy man)
          msg ("You knock on the door and wait patiently.  In a matter of seconds the door opens a crack.  You thought that maybe a brief breeze opened the door because you see no one looking back through the crack.  <br/><br/>\"What do you want?\" grumbles a gruff voice.  <br/><br/>You step back in surprise.<br/><br/>\"Down here.\" <br/><br/>You look down.  About four feet off the ground you see a set of eyes peering back, surrounded by a dark face.  The inside of the shanty is too dark to see much more than that.<br/><br/>That is one short guy...")
          PrintCentered ("<br/>Please press any key.")
          wait {
            msg ("<br/>After an awkward pause... \"How rude.\"  <br/><br/>The grumpy man slams the door in your face.")
            MakeObjectInvisible (grumpy man)
          }
        }
        otherwise {
          msg ("You knock on the door and take a step back.  This time you decide to look down to meet the homeowner's eyes when he opens the door.<br/><br/>After a brief few seconds, he opens the door.  \"You again?\" he grumbles.  \"What do you want?\"")
          MakeObjectVisible (grumpy man)
          SetTurnTimeout (3) {
            if (game.pov.parent = dirt path) {
              msg ("<br/>\"Ah, harumph.  Go away.\"<br/><br/>The door is slammed in your face again.")
              MakeObjectInvisible (grumpy man)
            }
            else {
              MakeObjectInvisible (grumpy man)
            }
          }
        }
      ]]></knockon>
      <openscript type="script">
        if (GetBoolean(shanty1, "open")) {
          msg ("You open the door and step inside.")
          MoveObject (Xanadu, shanty)
        }
        else {
          msg ("You haven't been invited.  You just can't go walking in there!")
        }
      </openscript>
    </object>
    <object name="wood">
      <inherit name="editor_object" />
      <scenery />
      <look>It's just the wood that has been used to build the shanty.  Nothing special.</look>
      <takemsg>You take the wood from this shanty and it might fall down.  That would be rude.</takemsg>
    </object>
    <object name="wire">
      <inherit name="editor_object" />
      <takemsg>If you remove the wire from the shanty, the wood might fall apart.  That would be rude and pointless.</takemsg>
      <look>The bits of wire looks like it has been gathered from a variety of sources.  It holds the wood together.</look>
      <scenery />
    </object>
    <object name="grumpy man">
      <inherit name="editor_object" />
      <visible type="boolean">false</visible>
      <look>All you can deduce is that the man is short and big-eyed.  He is waiting on you and it appears to be rather impatient.</look>
      <convo type="stringlist">
        <value>'Quit wasting my time!'</value>
        <value>'Leave me alone!'</value>
        <value>'Why do you keep bugging me!'</value>
        <value>'I'm old.  I'm hungry.  And I don't need you!'</value>
        <value>'Get off my... get of my... my... GO AWAY!'</value>
        <value>'Shoo!  Go away!'</value>
        <value>'Grrrrr....'  Did he just growl at you or was that his stomach?</value>
        <value>'Rude.  You... Are... Rude.'</value>
        <value>'Quit bothering an old man!'</value>
      </convo>
      <alt type="stringlist">
        <value>old man</value>
      </alt>
      <speak type="script">
        n = ToString (GetRandomInt (0, DictionaryCount (grumpy man.convo2) - 1))
        m = ScriptDictionaryItem(grumpy man.convo2, n)
        msg ("The man glares at you and says, " + m)
      </speak>
      <convo2 type="scriptdictionary">
        <item key="1">
          msg ("Test 1")
        </item>
        <item key="2">
          msg ("Test 2")
        </item>
      </convo2>
    </object>
    <object name="sign">
      <inherit name="editor_object" />
      <look>It's a sign on the front door of the shanty that reads "HUGO".</look>
      <read>It says "HUGO" in painted, white lettering.</read>
    </object>
  </object>
  <object name="shanty">
    <inherit name="editor_room" />
    <description>The inside of the shanty is cluttered.  You wonder if its occupant is a hoarder?  There is, what you would call junk, haphazardously stacked and piled in the very small room.  Hugo sits nearby on a tree stump that is covered in a ratty cloth.</description>
    <enter type="script">
      SetObjectFlagOn (Xanadu, "inside")
    </enter>
    <onexit type="script">
      SetObjectFlagOff (Xanadu, "inside")
    </onexit>
    <exit alias="north" to="dirt path">
      <inherit name="northdirection" />
    </exit>
  </object>
  <object name="dirt path1">
    <inherit name="editor_room" />
    <descprefix>You are on</descprefix>
    <alias>dirt path</alias>
    <description type="script">
      if (GetBoolean(twentyfourhours, "dawn")) {
        msg ("You are on a dirt path.  To your north is a gated cemetery and to your south there is a small animal pen.  There seems to be a bit a small crowd gathered to the east.")
      }
      else if (GetBoolean(twentyfourhours, "morning")) {
        msg ("You are on a dirt path.  To your north is a gated cemetery and to your south there is a small animal pen.  There seems to be a bit a small crowd gathered to the east.")
      }
      else if (GetBoolean(twentyfourhours, "afternoon")) {
        msg ("You are on a dirt path.  To your north is a gated cemetery and to your south there is a small animal pen.  There are just a couple people bustling around to the east.")
      }
      else if (GetBoolean(twentyfourhours, "noon")) {
        msg ("You are on a dirt path.  To your north is a gated cemetery and to your south there is a small animal pen.  There seems to be a quite a crowd to the east.")
      }
      else if (GetBoolean(twentyfourhours, "dusk")) {
        msg ("You are on a dirt path.  To your north is a gated cemetery and to your south there is a small animal pen.  There are some most unattended stalls to your east.")
      }
      else if (GetBoolean(twentyfourhours, "evening")) {
        msg ("You are on a dirt path.  To your north is a gated cemetery and to your south there is a small animal pen.  The market to the east is completely deserted, save the bats.")
      }
      else if (GetBoolean(twentyfourhours, "midnight")) {
        msg ("You are on a dirt path.  To your north is a gated cemetery and to your south there is a small animal pen.  The market to the east is completely deserted.")
      }
    </description>
    <exit alias="southwest" to="dirt path2">
      <inherit name="southwestdirection" />
    </exit>
    <exit alias="north" to="cemetery">
      <inherit name="northdirection" />
    </exit>
    <exit alias="east" to="market">
      <inherit name="eastdirection" />
    </exit>
  </object>
  <object name="shack">
    <inherit name="editor_room" />
    <enter type="script">
      SetObjectFlagOn (Xanadu, "inside")
    </enter>
    <onexit type="script">
      SetObjectFlagOff (Xanadu, "inside")
    </onexit>
    <object name="juju man">
      <inherit name="editor_object" />
      <inherit name="namedmale" />
    </object>
    <exit alias="south" to="dirt path">
      <inherit name="southdirection" />
    </exit>
  </object>
  <object name="dirt path2">
    <inherit name="editor_room" />
    <descprefix>You are on</descprefix>
    <alias>dirt path</alias>
    <exit alias="southwest" to="dirt path">
      <inherit name="southwestdirection" />
    </exit>
    <exit alias="south" to="lean to">
      <inherit name="southdirection" />
    </exit>
    <exit alias="northeast" to="dirt path1">
      <inherit name="northeastdirection" />
    </exit>
  </object>
  <object name="lean to">
    <inherit name="editor_room" />
    <alias>lean-to</alias>
    <enter type="script">
      SetObjectFlagOn (Xanadu, "inside")
    </enter>
    <onexit type="script">
      SetObjectFlagOff (Xanadu, "inside")
    </onexit>
    <exit alias="north" to="dirt path2">
      <inherit name="northdirection" />
    </exit>
  </object>
  <object name="cemetery">
    <inherit name="editor_room" />
    <description>It is a small cemetery with about twenty-five or thrity roughly etched grave markers.  In the northeast corner of the cemetery you notice a thick, but withered and rotting tree.</description>
    <exit alias="south" to="dirt path2">
      <inherit name="southdirection" />
    </exit>
  </object>
  <turnscript name="Random Bats TS">
    <enabled />
    <script><![CDATA[
      if (GetBoolean(twentyfourhours, "midnight")) {
        if (GetBoolean(Xanadu, "inside")) {
          if (bats2.presentin = true) {
            if (RandomChance(5)) {
              msg ("<br/>The hellish bat composed percussion beyond the walls has faded for now.")
              bats2.presentin = false
            }
          }
          else {
            if (RandomChance(95)) {
              msg ("<br/>The gnawing, clawing, and shrieking bats seem to reverberate through the walls and into the room.")
              bats2.presentin = true
            }
          }
        }
        else {
          if (bats2.presentin = true) {
            if (RandomChance(5)) {
              msg ("<br/>The sky above silences as the bats disappear in pursuit of some unfortunate prey.")
              MoveObject (bats, Item Warehouse)
              bats2.presentin = false
              MoveObject (bats2, Item Warehouse)
              MoveObject (small bats, Item Warehouse)
              MoveObject (large bats, Item Warehouse)
              MoveObject (enormous bats, Item Warehouse)
            }
          }
          else {
            if (RandomChance(95)) {
              msg ("<br/>The screeching above you is about all you can hear and the sky above you looks like a black, rippling ocean.")
              MoveObjectHere (bats)
              bats2.presentin = true
              MoveObjectHere (bats2)
              MoveObjectHere (small bats)
              MoveObjectHere (large bats)
              MoveObjectHere (enormous bats)
            }
          }
        }
      }
      if (GetBoolean(twentyfourhours, "dawn")) {
        if (GetBoolean(Xanadu, "inside")) {
          if (bats.presentin = true) {
            if (RandomChance(20)) {
              msg ("<br/>The incessant gnawing and flapping outside have subsided for now.")
              bats.presentin = false
            }
          }
          else {
            if (RandomChance(80)) {
              msg ("<br/>A terrible chewing and scuttling noise can be heard from beyond the outermost wall.")
              bats.presentin = true
            }
          }
        }
        else {
          if (bats.presentin = true) {
            if (RandomChance(20)) {
              msg ("<br/>The shrieking bats have disappeared into the northern dawning sky.")
              MoveObject (bats, Item Warehouse)
              bats.presentin = false
            }
          }
          else {
            if (RandomChance(80)) {
              msg ("<br/>As if by command, the bats are flying in unison toward the northern horizon.")
              MoveObjectHere (bats)
              bats.presentin = true
            }
          }
        }
      }
      if (GetBoolean(twentyfourhours, "dusk")) {
        if (GetBoolean(Xanadu, "inside")) {
          if (average bat.presentin = true) {
            if (RandomChance(30)) {
              msg ("<br/>The incessant gnawing and flapping outside have subsided for now.")
              average bat.presentin = false
            }
          }
          else {
            if (RandomChance(70)) {
              msg ("<br/>You can hear an occassional flapping and scratching as if something is outside the walls.")
              average bat.presentin = true
            }
          }
        }
        else {
          if (average bat.presentin = true) {
            if (RandomChance(20)) {
              x = GetRandomInt(1, 8)
              if (x = 1) {
                direction = "north"
              }
              else if (x=2) {
                direction = "east"
              }
              else if (x=3) {
                direction = "south"
              }
              else if (x=4) {
                direction = "west"
              }
              else if (x=5) {
                direction = "northwest"
              }
              else if (x=6) {
                direction = "southwest"
              }
              else if (x=7) {
                direction = "northeast"
              }
              else if (x=8) {
                direction = "southeast"
              }
              msg (<br/>"The circling bat must have noticed something other than you to pester.  You see it fly off to the " + direction + ".")
              MoveObject (average bat, Item Warehouse)
              average bat.presentin = false
            }
          }
          else {
            if (RandomChance(80)) {
              msg ("<br/>You notice a lone circular bat circling overhead.")
              MoveObjectHere (average bat)
              average bat.presentin = true
            }
          }
        }
      }
      if (GetBoolean(twentyfourhours, "evening")) {
        if (GetBoolean(Xanadu, "inside")) {
          if (bats.presentin = true) {
            if (RandomChance(15)) {
              msg ("<br/>The angry flapping and gnawing outside has lessened for now.")
              bats.presentin = false
            }
          }
          else {
            if (RandomChance(85)) {
              msg ("<br/>The bat sounds seem disturbingly loud and close.")
              bats.presentin = true
            }
          }
        }
        else {
          if (bats.presentin = true) {
            if (RandomChance(15)) {
              msg ("<br/>For a brief moment, the skies are cleared of the horde of bats.")
              MoveObject (bats, Item Warehouse)
              bats.presentin = false
            }
          }
          else {
            if (RandomChance(85)) {
              msg ("<br/>The darkening sky is nearly <i>filled</i> with bats - some large, some small.")
              MoveObjectHere (bats)
              bats.presentin = true
            }
          }
        }
      }
    ]]></script>
  </turnscript>
  <command name="bat listening cmd">
    <pattern>listen to bats; listen to bat; listen to large bat; listen to small bat; listen to enormous bat; listen; listen for bats; listen for bat; listen for large bat; listen for small bat; listen for enormous bat; listen at bats; listen at bat; listen at large bat; listen at small bat; listen at enormous bat</pattern>
    <script>
      if (GetBoolean(bats, "presentin")) {
        if (GetBoolean(Xanadu, "inside")) {
          msg ("The bats are making bone chilling sounds outside.  There must be quite a few because you can hear them collectively gnawing and clawing at the walls and screeching amongst them selves.")
        }
        else {
          msg ("Unlike birds, these animals are producing an out of sync chorus of screeches that send chills down your spine.")
        }
      }
      else if (GetBoolean(bats2, "presentin")) {
        if (GetBoolean(Xanadu, "inside")) {
          msg ("It's horrendous.  You cringe to imagine how many bats must be crawling along the outer walls.  It's hard to concentrate in here.")
        }
        else {
          msg ("Despite you being out in the open, these bats are loud.  The shrillness of their songs is loud and disturbing.")
        }
      }
      else if (GetBoolean(average bat, "presentin")) {
        if (GetBoolean(Xanadu, "inside")) {
          msg ("It's fairly quiet in here, but as you listen closely, you can hear the sounds of a lone bat beyond these walls.")
        }
        else {
          msg ("The lone bat remains quiet for most of its flight but quietly calls out on occassion.")
        }
      }
      else {
        msg ("Thankfully, those creepy bastards are not around at the moment.")
      }
    </script>
  </command>
  <object name="market">
    <inherit name="editor_room" />
    <exit alias="west" to="dirt path1">
      <inherit name="westdirection" />
    </exit>
    <exit alias="north" to="church">
      <inherit name="northdirection" />
    </exit>
    <exit alias="southeast" to="north bank">
      <inherit name="southeastdirection" />
    </exit>
    <exit alias="south" to="north shore">
      <inherit name="southdirection" />
    </exit>
  </object>
  <object name="lake">
    <inherit name="editor_room" />
    <exit alias="north" to="north shore">
      <inherit name="northdirection" />
    </exit>
    <exit alias="south" to="lake2">
      <inherit name="southdirection" />
    </exit>
  </object>
  <object name="lake2">
    <inherit name="editor_room" />
    <exit alias="north" to="lake">
      <inherit name="northdirection" />
    </exit>
    <exit alias="south" to="lake3">
      <inherit name="southdirection" />
    </exit>
  </object>
  <object name="lake3">
    <inherit name="editor_room" />
    <exit alias="north" to="lake2">
      <inherit name="northdirection" />
    </exit>
    <exit alias="south" to="south shore">
      <inherit name="southdirection" />
    </exit>
    <exit alias="east" to="east bank2">
      <inherit name="eastdirection" />
    </exit>
  </object>
  <object name="north shore">
    <inherit name="editor_room" />
    <exit alias="north" to="market">
      <inherit name="northdirection" />
    </exit>
    <exit alias="south" to="lake">
      <inherit name="southdirection" />
    </exit>
    <exit alias="southeast" to="north bank">
      <inherit name="southeastdirection" />
    </exit>
  </object>
  <object name="south shore">
    <inherit name="editor_room" />
    <exit alias="north" to="lake3">
      <inherit name="northdirection" />
    </exit>
    <exit alias="south" to="south bank">
      <inherit name="southdirection" />
    </exit>
  </object>
  <object name="north bank">
    <inherit name="editor_room" />
    <exit alias="northwest" to="market">
      <inherit name="northwestdirection" />
    </exit>
    <exit alias="south" to="east bank">
      <inherit name="southdirection" />
    </exit>
  </object>
  <object name="east bank">
    <inherit name="editor_room" />
    <exit alias="north" to="north bank">
      <inherit name="northdirection" />
    </exit>
    <exit alias="south" to="east bank1">
      <inherit name="southdirection" />
    </exit>
  </object>
  <object name="east bank1">
    <inherit name="editor_room" />
    <exit alias="north" to="east bank">
      <inherit name="northdirection" />
    </exit>
  </object>
  <object name="south bank">
    <inherit name="editor_room" />
    <exit alias="north" to="south shore">
      <inherit name="northdirection" />
    </exit>
  </object>
  <object name="east bank2">
    <inherit name="editor_room" />
    <exit alias="west" to="lake3">
      <inherit name="westdirection" />
    </exit>
  </object>
  <object name="church">
    <inherit name="editor_room" />
    <enter type="script">
      SetObjectFlagOn (Xanadu, "inside")
    </enter>
    <onexit type="script">
      SetObjectFlagOff (Xanadu, "inside")
    </onexit>
    <exit alias="south" to="market">
      <inherit name="southdirection" />
    </exit>
  </object>
  <verb>
    <property>knockon</property>
    <pattern>knock on; knock; rap; knock at; rap at; rap on; bang; bang on; bang at</pattern>
    <defaultexpression>"You can't knock on; knock; rap " + object.article + "."</defaultexpression>
  </verb>
  <command name="wait for TOD cmd" />
  <function name="ClearScreen">
    request (ClearScreen, "")
    OutputTextNoBr (game.css)
  </function>
  <function name="InitUserInterface"><![CDATA[
    JS.setCommandBarStyle (GetCurrentTextFormat("") + ";border:" + game.defaultbackground)
    JS.eval ("$('#status').hide();")
    JS.SetBackgroundCol ("black")
    JS.eval ("$('#txtCommandDiv').prepend('&gt;&nbsp;')")
    JS.OutputTextNoBr (game.css)
    JS.eval ("$('#statusVarsLabel').insertBefore('#inventoryLabel')")
    JS.eval ("$('#statusVarsAccordion').insertBefore('#inventoryLabel')")
    JS.eval ("$('#compassLabel').insertBefore('#inventoryLabel')")
    JS.eval ("$('#compassAccordion').insertBefore('#inventoryLabel')")
    JS.eval ("$('#placesObjectsLabel').insertBefore('#inventoryLabel')")
    JS.eval ("$('#placesObjectsAccordion').insertBefore('#inventoryLabel')")
    JS.eval ("$('#gamePanes').css('background-color', 'rgba(0, 0, 0, 0)')")
    JS.eval ("$('#statusVars').css('background-color', 'black')")
    JS.eval ("$('#statusVars').css('color', 'blue')")
    request (SetInterfaceString, "PlacesObjectsLabel=Objects")
    JS.eval ("$('#inventoryAccordion.ui-widget-content').css('background', 'black')")
    JS.eval ("$('#inventoryAccordion.ui-widget-content').css('color', 'blue')")
    JS.eval ("$('#statusVarsLabel').css('background', 'black')")
    JS.eval ("$('#statusVarsLabel').css('color', 'blue')")
    JS.eval ("$('#inventoryLabel').css('background', 'black')")
    JS.eval ("$('#inventoryLabel').css('color', 'blue')")
    JS.eval ("$('#placesObjectsLabel').css('background', 'black')")
    JS.eval ("$('#placesObjectsLabel').css('color', 'blue')")
    JS.eval ("$('#placesObjectsAccordion.ui-widget-content').css('background', 'black')")
    JS.eval ("$('#placesObjectsAccordion.ui-widget-content').css('color', 'blue')")
    JS.eval ("$('.ui-state-active').css('border', '1px solid darkgoldenrod')")
    JS.eval ("$('.ui-widget-content').css('border', 'blue')")
    JS.eval ("$('#gamePanesFinished').html('<h2></h2>')")
    JS.eval ("$('.ui-button').css('background', 'black')")
    JS.eval ("$('.ui-button').css('border', '1px blue')")
    JS.eval ("$('.ui-button-text').css('color', 'blue')")
    JS.eval ("$('.ui-button').mousedown(function() { $(this).css('background-color', 'blue'); } )")
    JS.eval ("$('.ui-button-text').mousedown(function() { $(this).css('color', 'black'); } )")
    JS.eval ("$('#gameBorder').mouseup(function() { $('.ui-button-text').css('color', 'blue'); } )")
    JS.eval ("$('#gameBorder').mouseup(function() { $('.ui-button').css('background-color', 'black'); } )")
    JS.eval ("var styleSelecting = $('<style>.ui-selecting { color: black; background-color: blue;}</style>');  $('html > head').append(styleSelecting)")
    JS.eval ("var styleUnselecting = $('<style>.ui-unselecting { color: blue; background-color: black;}</style>');  $('html > head').append(styleUnselecting)")
    JS.eval ("var styleSelected = $('<style>.ui-selected { color: black; background-color: blue;}</style>');  $('html > head').append(styleSelected)")
    JS.eval (" var arrowUrl = 'images/ui-icons_f9bd01_256x240.png'; var styleArrow = $('<style>.ui-state-default .ui-icon { background-image: url('+ arrowUrl +'); }</style>');  $('html > head').append(styleArrow) ")
    JS.eval ("$('#cmdCompassN').css('background', 'black')")
    JS.eval ("$('#cmdCompassE').css('background', 'black')")
    JS.eval ("$('#cmdCompassS').css('background', 'black')")
    JS.eval ("$('#cmdCompassW').css('background', 'black')")
    JS.eval ("$('#cmdCompassNW').css('background', 'black')")
    JS.eval ("$('#cmdCompassNE').css('background', 'black')")
    JS.eval ("$('#cmdCompassSW').css('background', 'black')")
    JS.eval ("$('#cmdCompassSE').css('background', 'black')")
    JS.eval ("$('#cmdCompassU').css('background', 'black')")
    JS.eval ("$('#cmdCompassIn').css('background', 'black')")
    JS.eval ("$('#cmdCompassD').css('background', 'black')")
    JS.eval ("$('#cmdCompassOut').css('background', 'black')")
    JS.eval ("$('#cmdCompassN').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassE').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassW').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassS').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassNW').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassNE').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassSE').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassSW').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassIn').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassOut').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassU').css('border', '2px solid blue')")
    JS.eval ("$('#cmdCompassD').css('border', '2px solid blue')")
    JS.eval ("$('#compassLabel').css('background', 'black')")
    JS.eval ("$('#compassLabel').css('color', 'blue')")
    JS.eval ("$('#compassAccordion').css('background', 'black')")
    OutputTextNoBr (game.css)
    request (SetInterfaceString, "TypeHereLabel=")
    if (GetBoolean(game, "inprogress")) {
    }
    else {
      game.inprogress = true
    }
  ]]></function>
  <function name="HideCommandBar">
    request (Hide, "Command")
  </function>
  <function name="ShowCommandBar">
    request (Show, "Command")
  </function>
</asl>