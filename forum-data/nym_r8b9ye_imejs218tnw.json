{
  "Topic": {
    "TopicId": "nym_r8b9ye_imejs218tnw",
    "ForumId": "15",
    "Title": "Quest 6: Adding QUIT and RESTART commands",
    "LastUpdated": "2020-12-05T20:13:15.4036338Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "18483fcd-2afd-4ae5-b14c-bada4ccbcd46",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```js\r\ncommands.push(new Cmd('MetaRestart', {\r\n  regex:/^restart$/,\r\n  script:function() {\r\n    //NOTE:  This command is for everyone accustomed to INFOCOM and/or Inform games.\r\n  \r\n      askQuestion('Do you really want to restart the game? {b:[Y/N]}', function(result) {\r\n      \r\n      switch (result){\r\n\t\tcase \"Yes\":\r\n\t\tcase \"yes\":\r\n\t\tcase \"Y\":\r\n\t\tcase \"y\":\r\n\t\tcase \"YES\":\r\n\t\t    location.reload();\r\n\t\t    break;\r\n\t\tcase \"No\":\r\n\t\tcase \"no\":\r\n\t\tcase \"N\":\r\n\t\tcase \"n\":\r\n\t\tcase \"NO\":\r\n\t\t\tmsg(\"Wise decision.  Game on!\");\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tmsg(\"That wasn't a 'Yes' or a 'No'. So, the game continues!\");\r\n\t  }\r\n    });\r\n  return;\r\n  },\r\n}));\r\n\r\n\r\ncommands.push(new Cmd('MetaQuit', {\r\n  regex:/^quit$/,\r\n  script:function() {\r\n    //NOTE:  This command is for everyone accustomed to INFOCOM and/or Inform games.\r\n  \r\n      askQuestion('Do you really want to quit the game? {b:[Y/N]}', function(result) {\r\n      \r\n      switch (result){\r\n\t\tcase \"Yes\":\r\n\t\tcase \"yes\":\r\n\t\tcase \"Y\":\r\n\t\tcase \"y\":\r\n\t\tcase \"YES\":\r\n\t\t\t//msg(\"<br>Turns taken: {game.turnCount}<br>Score: {game.score} out of a possible {game.maxScore}<br>\");\r\n\t\t\tmsg(\"THANKS FOR PLAYING!\")\r\n\t\t\tmsg(\"<input type=\\\"button\\\" style='color:white;background-color:black'\\\r\n\t\t\t value=\\\"CLICK HERE TO PLAY AGAIN!\\\" onClick=\\\"window.location.reload(true)\\\">\");\r\n\t\t    io.finish();\r\n\t\t    break;\r\n\t\tcase \"No\":\r\n\t\tcase \"no\":\r\n\t\tcase \"N\":\r\n\t\tcase \"n\":\r\n\t\tcase \"NO\":\r\n\t\t\tmsg(\"Wise decision.  Game on!\");\r\n\t\t\tbreak;\r\n\t\tdefault:\r\n\t\t\tmsg(\"That wasn't a 'Yes' or a 'No'. So, the game continues!\");\r\n\t  }\r\n    });\r\n  return;\r\n  },\r\n}));\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>commands.push(new Cmd('MetaRestart', {\n  regex:/^restart$/,\n  script:function() {\n    //NOTE:  This command is for everyone accustomed to INFOCOM and/or Inform games.\n  \n      askQuestion('Do you really want to restart the game? {b:[Y/N]}', function(result) {\n      \n      switch (result){\n\t\tcase \"Yes\":\n\t\tcase \"yes\":\n\t\tcase \"Y\":\n\t\tcase \"y\":\n\t\tcase \"YES\":\n\t\t    location.reload();\n\t\t    break;\n\t\tcase \"No\":\n\t\tcase \"no\":\n\t\tcase \"N\":\n\t\tcase \"n\":\n\t\tcase \"NO\":\n\t\t\tmsg(\"Wise decision.  Game on!\");\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tmsg(\"That wasn't a 'Yes' or a 'No'. So, the game continues!\");\n\t  }\n    });\n  return;\n  },\n}));\n\n\ncommands.push(new Cmd('MetaQuit', {\n  regex:/^quit$/,\n  script:function() {\n    //NOTE:  This command is for everyone accustomed to INFOCOM and/or Inform games.\n  \n      askQuestion('Do you really want to quit the game? {b:[Y/N]}', function(result) {\n      \n      switch (result){\n\t\tcase \"Yes\":\n\t\tcase \"yes\":\n\t\tcase \"Y\":\n\t\tcase \"y\":\n\t\tcase \"YES\":\n\t\t\t//msg(\"&lt;br&gt;Turns taken: {game.turnCount}&lt;br&gt;Score: {game.score} out of a possible {game.maxScore}&lt;br&gt;\");\n\t\t\tmsg(\"THANKS FOR PLAYING!\")\n\t\t\tmsg(\"&lt;input type=\\\"button\\\" style='color:white;background-color:black'\\\n\t\t\t value=\\\"CLICK HERE TO PLAY AGAIN!\\\" onClick=\\\"window.location.reload(true)\\\"&gt;\");\n\t\t    io.finish();\n\t\t    break;\n\t\tcase \"No\":\n\t\tcase \"no\":\n\t\tcase \"N\":\n\t\tcase \"n\":\n\t\tcase \"NO\":\n\t\t\tmsg(\"Wise decision.  Game on!\");\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tmsg(\"That wasn't a 'Yes' or a 'No'. So, the game continues!\");\n\t  }\n    });\n  return;\n  },\n}));\n</code></pre>\n\n",
      "PostDate": "2020-12-05T20:13:15.4036338Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6bfb8862-f124-459e-8235-7014be7a7abd",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "My personal view is that there is a reload button in every browser to do this, so I will not be putting it into Quest 6.\r\n\r\nHowever, a better way to check the result is with a regular expression.\r\n```\r\ncommands.push(new Cmd('MetaRestart', {\r\n  regex:/^restart$/,\r\n  script:function() {\r\n    //NOTE:  This command is for everyone accustomed to INFOCOM and/or Inform games.\r\n  \r\n    askQuestion('Do you really want to restart the game? {b:[Y/N]}', function(result) {\r\n      if (result.match(/^(y|yes)$/i)) {\r\n  \t    location.reload()\r\n      }\r\n      else if (result.match(/^(n|no)$/i)) {\r\n  \t\t  msg(\"Wise decision.  Game on!\");\r\n      }\r\n      else {\r\n  \t    msg(\"That wasn't a 'Yes' or a 'No'. So, the game continues!\");\r\n\t    }\r\n    });\r\n    return world.SUCCESS_NO_TURNSCRIPTS;\r\n  },\r\n}))\r\n```\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>My personal view is that there is a reload button in every browser to do this, so I will not be putting it into Quest 6.</p>\n<p>However, a better way to check the result is with a regular expression.</p>\n<pre><code>commands.push(new Cmd('MetaRestart', {\n  regex:/^restart$/,\n  script:function() {\n    //NOTE:  This command is for everyone accustomed to INFOCOM and/or Inform games.\n  \n    askQuestion('Do you really want to restart the game? {b:[Y/N]}', function(result) {\n      if (result.match(/^(y|yes)$/i)) {\n  \t    location.reload()\n      }\n      else if (result.match(/^(n|no)$/i)) {\n  \t\t  msg(\"Wise decision.  Game on!\");\n      }\n      else {\n  \t    msg(\"That wasn't a 'Yes' or a 'No'. So, the game continues!\");\n\t    }\n    });\n    return world.SUCCESS_NO_TURNSCRIPTS;\n  },\n}))\n</code></pre>\n\n",
      "PostDate": "2020-12-06T10:05:35.432963Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e06768ba-76a3-4b20-b56c-f6c777b7e890",
      "UserId": 17418,
      "Username": "Dakin Quelia",
      "AvatarUrl": "https://i.imgur.com/tq43O8ob.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello,\r\n\r\nHow do you make a button to call Restart Command (or other command) ? Exists it a function to call CMD ?\r\n\r\nI don't sure how do that.\r\n\r\nThanks.\r\n\r\nBest regards",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello,</p>\n<p>How do you make a button to call Restart Command (or other command) ? Exists it a function to call CMD ?</p>\n<p>I don't sure how do that.</p>\n<p>Thanks.</p>\n<p>Best regards</p>\n\n",
      "PostDate": "2020-12-08T20:30:20.6522672Z",
      "LastEditDate": "2020-12-08T20:32:50.06256Z",
      "link": null
    },
    {
      "PostId": "81d04579-237c-43a6-b192-83cc1bfe9469",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello again!\r\n\r\nI don't think Pixie has the command stuff set up in the Text Processor yet.\r\n\r\nThat being said, we could make our own links:\r\n\r\n```\r\n\tvar lnk = `<a href='javascript:void(0)' onclick='parser.quickCmd(findCmd(\"MetaRestart\"))'>RESTART!</a>`\r\n\tmsg(lnk)\r\n```\r\n\r\n---\r\n...or buttons:\r\n\r\n```\r\n\tvar lnk = `<button href='javascript:void(0)' onclick='parser.quickCmd(findCmd(\"MetaRestart\"))'>RESTART!</button>`\r\n\tmsg(lnk)\r\n```\r\n\r\n\r\n---\r\nAlso:\r\n\r\n\r\n```js\r\n//UPDATED 2020.12.08\r\ncommands.push(new Cmd('MetaRestart', {\r\n  regex:/^restart$/,\r\n  script:function() {\r\n      var result = window.confirm(\"Do you really want to restart the game?\")\r\n      if (result) {\r\n  \t    location.reload()\r\n      }\r\n      else{\r\n  \t\t  msg(\"Wise decision.  Game on!\");\r\n      }\r\n      return world.SUCCESS_NO_TURNSCRIPTS;\r\n  },\r\n}));\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello again!</p>\n<p>I don't think Pixie has the command stuff set up in the Text Processor yet.</p>\n<p>That being said, we could make our own links:</p>\n<pre><code>\tvar lnk = `&lt;a href='javascript:void(0)' onclick='parser.quickCmd(findCmd(\"MetaRestart\"))'&gt;RESTART!&lt;/a&gt;`\n\tmsg(lnk)\n</code></pre>\n<hr>\n<p>...or buttons:</p>\n<pre><code>\tvar lnk = `&lt;button href='javascript:void(0)' onclick='parser.quickCmd(findCmd(\"MetaRestart\"))'&gt;RESTART!&lt;/button&gt;`\n\tmsg(lnk)\n</code></pre>\n<hr>\n<p>Also:</p>\n<pre><code>//UPDATED 2020.12.08\ncommands.push(new Cmd('MetaRestart', {\n  regex:/^restart$/,\n  script:function() {\n      var result = window.confirm(\"Do you really want to restart the game?\")\n      if (result) {\n  \t    location.reload()\n      }\n      else{\n  \t\t  msg(\"Wise decision.  Game on!\");\n      }\n      return world.SUCCESS_NO_TURNSCRIPTS;\n  },\n}));\n</code></pre>\n\n",
      "PostDate": "2020-12-08T21:00:39.8742229Z",
      "LastEditDate": "2020-12-08T21:01:35.1173874Z",
      "link": null
    },
    {
      "PostId": "f07fd8f4-d6c8-4bf6-b1be-65697d0c1f6c",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I don't think Pixie has the command stuff set up in the Text Processor yet.\r\n\r\nDo you mean this?\r\nhttps://github.com/ThePix/QuestJS/wiki/The-Text-Processor#commandcmd",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I don't think Pixie has the command stuff set up in the Text Processor yet.</p>\n</blockquote>\n<p>Do you mean this?<br>\nhttps://github.com/ThePix/QuestJS/wiki/The-Text-Processor#commandcmd</p>\n\n",
      "PostDate": "2020-12-08T21:21:03.5020527Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d14bc533-fa53-4d7d-8a00-716323c3a0bb",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">>I don't think Pixie has the command stuff set up in the Text Processor yet.\r\n>\r\n>Do you mean this?\r\n\r\nI get an error (and I don't think I fooled around with any code in my text.js, but I can't promise that).\r\n\r\n```\r\nUncaught ReferenceError: link is not defined\r\n    cmd file:///home/rh/Downloads/QuestJS-work_in_progress/lib/_text.js:417\r\n    processText file:///home/rh/Downloads/QuestJS-work_in_progress/lib/_text.js:86\r\n    processText file:///home/rh/Downloads/QuestJS-work_in_progress/lib/_text.js:30\r\n    <anonymous> debugger eval code:1\r\ndebugger eval code:417:5\r\n```\r\n\r\n---\r\nI'm looking into it after a bite to eat.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<blockquote>\n<p>I don't think Pixie has the command stuff set up in the Text Processor yet.</p>\n</blockquote>\n<p>Do you mean this?</p>\n</blockquote>\n<p>I get an error (and I don't think I fooled around with any code in my text.js, but I can't promise that).</p>\n<pre><code>Uncaught ReferenceError: link is not defined\n    cmd file:///home/rh/Downloads/QuestJS-work_in_progress/lib/_text.js:417\n    processText file:///home/rh/Downloads/QuestJS-work_in_progress/lib/_text.js:86\n    processText file:///home/rh/Downloads/QuestJS-work_in_progress/lib/_text.js:30\n    &lt;anonymous&gt; debugger eval code:1\ndebugger eval code:417:5\n</code></pre>\n<hr>\n<p>I'm looking into it after a bite to eat.</p>\n\n",
      "PostDate": "2020-12-08T22:05:39.1258521Z",
      "LastEditDate": "2020-12-08T22:06:06.9615909Z",
      "link": null
    },
    {
      "PostId": "362e7879-1b45-4449-9bf2-57b6a15c50f4",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "https://github.com/ThePix/QuestJS/blob/master/lib/_text.js#L425\r\n\r\nI see ```io.cmd-link``` where it should be ```io.cmdlink```.\r\n\r\nFixed that, and now the link isn't quite right.\r\n\r\nSo...\r\n\r\nhttps://github.com/ThePix/QuestJS/blob/master/lib/_io.js#L754\r\n\r\nChanged this . . .\r\n\r\n```\r\nio.cmdlink = function(command, str) {\r\n  return '<a class=\"cmd-link\" onclick=\"parser.parse(\\'' + command + '\\')\">' + str + \"</a>\";\r\n}\r\n\r\n\r\n``` \r\n\r\nto:\r\n\r\n\r\n```\r\nio.cmdlink = function(command, str) {\r\n  return `<a class=\"cmd-link\" onclick=\"parser.parse('${command}')\">${str}</a>`;\r\n}\r\n\r\n```\r\n\r\n...and SUCCESS!",
      "EditableFormat": "markdown",
      "HTML": "<p>https://github.com/ThePix/QuestJS/blob/master/lib/_text.js#L425</p>\n<p>I see <code>io.cmd-link</code> where it should be <code>io.cmdlink</code>.</p>\n<p>Fixed that, and now the link isn't quite right.</p>\n<p>So...</p>\n<p>https://github.com/ThePix/QuestJS/blob/master/lib/_io.js#L754</p>\n<p>Changed this . . .</p>\n<pre><code>io.cmdlink = function(command, str) {\n  return '&lt;a class=\"cmd-link\" onclick=\"parser.parse(\\'' + command + '\\')\"&gt;' + str + \"&lt;/a&gt;\";\n}\n\n\n</code></pre>\n<p>to:</p>\n<pre><code>io.cmdlink = function(command, str) {\n  return `&lt;a class=\"cmd-link\" onclick=\"parser.parse('${command}')\"&gt;${str}&lt;/a&gt;`;\n}\n\n</code></pre>\n<p>...and SUCCESS!</p>\n\n",
      "PostDate": "2020-12-08T23:13:58.8771929Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3c073787-afb7-4c28-9f5c-4b8cebceefab",
      "UserId": 17418,
      "Username": "Dakin Quelia",
      "AvatarUrl": "https://i.imgur.com/tq43O8ob.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Finally I solved :\r\n\r\n```\r\nlet savename = $(\"#savename\").val();\r\nparser.parse(`save ${savename}`;\r\n```\r\n\r\nThanks to you, ThePixie and Richard Headkid ! :D",
      "EditableFormat": "markdown",
      "HTML": "<p>Finally I solved :</p>\n<pre><code>let savename = $(\"#savename\").val();\nparser.parse(`save ${savename}`;\n</code></pre>\n<p>Thanks to you, ThePixie and Richard Headkid ! :D</p>\n\n",
      "PostDate": "2020-12-09T00:32:03.6799598Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
