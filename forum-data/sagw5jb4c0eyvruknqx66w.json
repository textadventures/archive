{
  "Topic": {
    "TopicId": "sagw5jb4c0eyvruknqx66w",
    "ForumId": "10",
    "Title": "Changing npc alias",
    "LastUpdated": "2023-09-13T22:03:26.4730599Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "20d4561f-0d5d-48dd-af6b-3ca81a5b6035",
      "UserId": 293645,
      "Username": "CrowJazz",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello everyone,\r\nSo here's the context with an example.\r\n\r\nMy player has a switchable object:\r\nBlack Watch (default = OFF)\r\n\r\nI have a npc object who has the attributes: \r\nname = \"npc1\"\r\nif(Black Watch is switched off)\r\n{\r\n    alias = \"totally normal salary man\"\r\n}\r\nelse\r\n{\r\n    alias = \"Rogue (Serial Killer)\"\r\n}\r\n\r\nNow my problem is no matter how much I switch ON or OFF with the is switched off condition. I always see the object in the room description like this:\r\n\r\ndescription = \"blablabla npc1 blablabla\"\r\n\r\ninstead of:\r\n\r\ndescription = \"blablabla totally normal salary man blablabla\"\r\nor\r\ndescription = \"blablabla Rogue (Serial Killer) blablabla\"\r\n\r\nIt is because I've misunderstood the usage of an alias? Or do I have to change the entire name that doesn't like this: \"name (character title between those)\" ?",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello everyone,<br>\nSo here's the context with an example.</p>\n<p>My player has a switchable object:<br>\nBlack Watch (default = OFF)</p>\n<p>I have a npc object who has the attributes:<br>\nname = \"npc1\"<br>\nif(Black Watch is switched off)<br>\n{<br>\nalias = \"totally normal salary man\"<br>\n}<br>\nelse<br>\n{<br>\nalias = \"Rogue (Serial Killer)\"<br>\n}</p>\n<p>Now my problem is no matter how much I switch ON or OFF with the is switched off condition. I always see the object in the room description like this:</p>\n<p>description = \"blablabla npc1 blablabla\"</p>\n<p>instead of:</p>\n<p>description = \"blablabla totally normal salary man blablabla\"<br>\nor<br>\ndescription = \"blablabla Rogue (Serial Killer) blablabla\"</p>\n<p>It is because I've misunderstood the usage of an alias? Or do I have to change the entire name that doesn't like this: \"name (character title between those)\" ?</p>\n\n",
      "PostDate": "2023-09-13T22:03:26.4730599Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7f3eadf3-032f-42ad-8b74-0db426a819e7",
      "UserId": 579655,
      "Username": "Jennifer Wren",
      "AvatarUrl": "https://i.imgur.com/t1XUS1Kb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Is it npc1.alias? ",
      "EditableFormat": "markdown",
      "HTML": "<p>Is it npc1.alias?</p>\n\n",
      "PostDate": "2023-09-13T22:58:01.0510054Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "86bfce22-78cc-4ede-8c57-6dc7f43c564d",
      "UserId": 391695,
      "Username": "GamerOver9000",
      "AvatarUrl": "https://secure.gravatar.com/avatar/36e6a025a2710445d7e878e7864013d4?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You'll have to do npc1.alias = \"whatever you want\" or this.alias = \"whatever you want\".\r\n\r\nFor the description you'll have to use concatenation and do \"blah blah blah \" + this.alias + \" blah blah blah\". Make sure you change the description into a script.",
      "EditableFormat": "markdown",
      "HTML": "<p>You'll have to do npc1.alias = \"whatever you want\" or this.alias = \"whatever you want\".</p>\n<p>For the description you'll have to use concatenation and do \"blah blah blah \" + this.alias + \" blah blah blah\". Make sure you change the description into a script.</p>\n\n",
      "PostDate": "2023-09-13T23:11:26.0847031Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "efebe107-4dc8-46d2-8196-4465c5d57882",
      "UserId": 293645,
      "Username": "CrowJazz",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It is npc1.alias for the attribute. \r\nI wanted to use that method to rename the npc within a same room. \r\n\r\nSo I didn't need to duplicate him from hidden to revealed. \r\n\r\nThat way the room description will change alias 1 into alias 2 depending on the state if the watch. \r\n\r\nI want that alias to change the displayed object name in the room description. ",
      "EditableFormat": "markdown",
      "HTML": "<p>It is npc1.alias for the attribute.<br>\nI wanted to use that method to rename the npc within a same room.</p>\n<p>So I didn't need to duplicate him from hidden to revealed.</p>\n<p>That way the room description will change alias 1 into alias 2 depending on the state if the watch.</p>\n<p>I want that alias to change the displayed object name in the room description.</p>\n\n",
      "PostDate": "2023-09-14T08:20:13.4879958Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1e53f9a1-d724-49ee-a693-afd2d87a6f85",
      "UserId": 391695,
      "Username": "GamerOver9000",
      "AvatarUrl": "https://secure.gravatar.com/avatar/36e6a025a2710445d7e878e7864013d4?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Its difficult to tell without seeing your Quest project so you'll have to keep double checking things until you find the issue. If you have the following then it should be working.\r\n\r\nYour if statement should be similar to this.\r\n<pre><code>\r\nif (Black Watch is switched off){\r\n     npc1.alias = \"totally normal salary man\"\r\n}\r\nelse {\r\n     npc1.alias = \"Rogue (Serial Killer)\"\r\n}\r\n</code></pre>\r\n\r\nYour description should look something like this.\r\n<pre><code>\r\nnpc1.description = \"Your text here \" + npc1.alias + \" your text here.\"\r\n</code></pre>\r\n\r\nLastly, make sure that the watch is actually being switched on and off.",
      "EditableFormat": "markdown",
      "HTML": "<p>Its difficult to tell without seeing your Quest project so you'll have to keep double checking things until you find the issue. If you have the following then it should be working.</p>\n<p>Your if statement should be similar to this.</p>\n<pre><code>\nif (Black Watch is switched off){\n     npc1.alias = \"totally normal salary man\"\n}\nelse {\n     npc1.alias = \"Rogue (Serial Killer)\"\n}\n</code></pre>\n<p>Your description should look something like this.</p>\n<pre><code>\nnpc1.description = \"Your text here \" + npc1.alias + \" your text here.\"\n</code></pre>\n<p>Lastly, make sure that the watch is actually being switched on and off.</p>\n\n",
      "PostDate": "2023-09-14T11:51:26.317054Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "75a96c05-62d0-4ee4-8916-ce82aacce728",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Your description should look something like this.\r\n\r\nIf the room description is text rather than a script, it would make more sense to have something like:\r\n```\r\nblah blah blah {object:npc1} blah blah blah\r\n```\r\nThere is no real need to use a script unless you're doing something that only a script can do.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Your description should look something like this.</p>\n</blockquote>\n<p>If the room description is text rather than a script, it would make more sense to have something like:</p>\n<pre><code>blah blah blah {object:npc1} blah blah blah\n</code></pre>\n<p>There is no real need to use a script unless you're doing something that only a script can do.</p>\n\n",
      "PostDate": "2023-09-14T16:07:18.8084676Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8a5d9250-7097-425c-8283-4dd41fbfaae7",
      "UserId": 293645,
      "Username": "CrowJazz",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "-GamerOver9000\r\nI see. I will try it right away! Thank you for the example. \r\n\r\n-mrangel\r\nSo it's actually better to disable the auto description and make our own room description? Does it affect the north, south, east, west, etc directions?\r\n\r\nOr did I misunderstand something?",
      "EditableFormat": "markdown",
      "HTML": "<p>-GamerOver9000<br>\nI see. I will try it right away! Thank you for the example.</p>\n<p>-mrangel<br>\nSo it's actually better to disable the auto description and make our own room description? Does it affect the north, south, east, west, etc directions?</p>\n<p>Or did I misunderstand something?</p>\n\n",
      "PostDate": "2023-09-14T20:48:47.3543347Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5925744f-9bad-4d03-9b08-8c6463ec404e",
      "UserId": 293645,
      "Username": "CrowJazz",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I can confirm that I can switch the watch on and off work (because I've used two different descriptions for Rogue).\r\nBut my npc keep being called \"npc1\".\r\n\r\nIt is normal, when you leave the code view and look at the object setup of npc1 to see the alias empty by default? I can't write anything inside (it doesn't let me) so I guess it detects the script but can't set a new alias on an empty string?\r\n\r\nI'm really confused x)",
      "EditableFormat": "markdown",
      "HTML": "<p>I can confirm that I can switch the watch on and off work (because I've used two different descriptions for Rogue).<br>\nBut my npc keep being called \"npc1\".</p>\n<p>It is normal, when you leave the code view and look at the object setup of npc1 to see the alias empty by default? I can't write anything inside (it doesn't let me) so I guess it detects the script but can't set a new alias on an empty string?</p>\n<p>I'm really confused x)</p>\n\n",
      "PostDate": "2023-09-14T21:21:35.5453034Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5b6ac913-fe1f-4cba-be53-65d578af6ab7",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> So it's actually better to disable the auto description and make our own room description? Does it affect the north, south, east, west, etc directions?\r\n\r\nNo, I was responding to the previous suggestion to use scripts.\r\n\r\nSo… does switching the watch on and off change both the NPC's `look` and `alias` attributes?\r\n\r\nIt would be helpful if you could show the script you are using for this, and where you are using it.\r\n\r\nAre you switching it on or off before entering the room?",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>So it's actually better to disable the auto description and make our own room description? Does it affect the north, south, east, west, etc directions?</p>\n</blockquote>\n<p>No, I was responding to the previous suggestion to use scripts.</p>\n<p>So… does switching the watch on and off change both the NPC's <code>look</code> and <code>alias</code> attributes?</p>\n<p>It would be helpful if you could show the script you are using for this, and where you are using it.</p>\n<p>Are you switching it on or off before entering the room?</p>\n\n",
      "PostDate": "2023-09-14T23:26:25.240698Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "23842d93-908b-46b8-8b1e-8d91169964e8",
      "UserId": 293645,
      "Username": "CrowJazz",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay, so here is the basic script for the salary man (Rogue):\r\n\r\n```<object name=\"npc1\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"male\" />\r\n      <drop type=\"boolean\">false</drop>\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n      </displayverbs>\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      <alt type=\"stringlist\" />\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n      </inventoryverbs>\r\n      <scenery type=\"boolean\">false</scenery>\r\n      <attr name=\"feature_startscript\" type=\"boolean\">false</attr>\r\n      <attr name=\"feature_player\" type=\"boolean\">false</attr>\r\n      <suffix type=\"string\"></suffix>\r\n      <not_all />\r\n      <look type=\"script\">\r\n        if (not IsSwitchedOn(Black Watch)) {\r\n          msg (\"Here is Rogue the murderer!\")\r\n        }\r\n        else {\r\n          msg (\"A normal salary man\")\r\n        }\r\n      </look>\r\n      <alias type=\"script\">\r\n        if (IsSwitchedOn(Black Watch)) {\r\n          npc1.alias = \"Rogue (Serial Killer)\"\r\n          return (alias)\r\n        }\r\n        else {\r\n          npc1.alias = \"Salary man\"\r\n          return (alias)\r\n        }\r\n      </alias>\r\n    </object>\r\n```\r\n\r\nIt actually works for the [look] command, but not for the {alias} attribute. I always see the default description with \"npc1\" showing up and not the alias for some reasons...",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay, so here is the basic script for the salary man (Rogue):</p>\n<pre><code>      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"male\" /&gt;\n      &lt;drop type=\"boolean\"&gt;false&lt;/drop&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n      &lt;/displayverbs&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;alt type=\"stringlist\" /&gt;\n      &lt;inventoryverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n      &lt;/inventoryverbs&gt;\n      &lt;scenery type=\"boolean\"&gt;false&lt;/scenery&gt;\n      &lt;attr name=\"feature_startscript\" type=\"boolean\"&gt;false&lt;/attr&gt;\n      &lt;attr name=\"feature_player\" type=\"boolean\"&gt;false&lt;/attr&gt;\n      &lt;suffix type=\"string\"&gt;&lt;/suffix&gt;\n      &lt;not_all /&gt;\n      &lt;look type=\"script\"&gt;\n        if (not IsSwitchedOn(Black Watch)) {\n          msg (\"Here is Rogue the murderer!\")\n        }\n        else {\n          msg (\"A normal salary man\")\n        }\n      &lt;/look&gt;\n      &lt;alias type=\"script\"&gt;\n        if (IsSwitchedOn(Black Watch)) {\n          npc1.alias = \"Rogue (Serial Killer)\"\n          return (alias)\n        }\n        else {\n          npc1.alias = \"Salary man\"\n          return (alias)\n        }\n      &lt;/alias&gt;\n    &lt;/object&gt;\n</code></pre>\n<p>It actually works for the [look] command, but not for the {alias} attribute. I always see the default description with \"npc1\" showing up and not the alias for some reasons...</p>\n\n",
      "PostDate": "2023-09-15T08:02:37.065211Z",
      "LastEditDate": "2023-09-15T08:03:28.2706539Z",
      "link": null
    },
    {
      "PostId": "b21b896b-16bf-450d-8d60-0b7d997bfe4b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah… that's the issue. When displaying the list of objects in a room, Quest uses `GetDisplayAlias`, which does the following:\r\n* If the object has a string attribute called `alias`\r\n   * Return the alias\r\n* else\r\n   * Return the name\r\n\r\nIn this case, the alias is a script, but there's nothing that runs a script.\r\n\r\nYou could set the alias to be the string: `{either IsSwitchedOn(Black Watch):Rogue (Serial Killer):Salary Man}` - that will work in room descriptions, because Text Processor directives like `{either` are automatically run when the string is printed. **But** that won't work for the Places and Objects pane in the sidebar, which will display the code instead of the name.\r\n\r\nAlternatively, you could run the code when the watch is switched on or off; which is what it sounded like you were doing from your original post.\r\n\r\nOn the \"Black Watch\" object's \"switchable\" tab, you could use the two scripts at the bottom.\r\n* \"After switching on the object:\"<pre> <code>npc1.alias = \"Rogue (Serial Killer)\"</code></pre>\r\n* \"After switching off the object:\"<pre> <code>npc1.alias = \"Salary man\"</code></pre>\r\n\r\nThe downside of this method is that your Black Watch ends up containing a big list of characters' alternate names.\r\n\r\nIf there are a lot of characters this applies to, then it might be worth making a more general script:\r\n* \"After switching on the object:\"\r\n<pre> <code>foreach (obj, AllObjects ()) {\r\n  if (HasAttribute (obj, \"watch_on_alias\")) {\r\n    obj.watch_off_alias = obj.alias\r\n    obj.alias = obj.watch_on_alias\r\n  }\r\n}</code></pre>\r\n* \"After switching off the object:\"\r\n<pre> <code>foreach (obj, AllObjects ()) {\r\n  if (HasAttribute (obj, \"watch_off_alias\")) {\r\n    obj.watch_on_alias = obj.alias\r\n    obj.alias = obj.watch_off_alias\r\n  }\r\n}</code></pre>\r\n\r\nThen you could give the man two attributes:\r\n```\r\n      <alias type=\"string\">Salary man</alias>\r\n      <attr name=\"watch_on_alias\" type=\"string\">Rogue (Serial Killer)</attr>\r\n```\r\nand it will switch between them as necessary (assuming the watch is initially switched off)\r\n\r\nThe advantage of this method is that each object's real alias is stored on that object, rather than in a single big list; and the script doesn't need modifying as more NPCs are added to the system.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah… that's the issue. When displaying the list of objects in a room, Quest uses <code>GetDisplayAlias</code>, which does the following:</p>\n<ul>\n<li>If the object has a string attribute called <code>alias</code>\n<ul>\n<li>Return the alias</li>\n</ul>\n</li>\n<li>else\n<ul>\n<li>Return the name</li>\n</ul>\n</li>\n</ul>\n<p>In this case, the alias is a script, but there's nothing that runs a script.</p>\n<p>You could set the alias to be the string: <code>{either IsSwitchedOn(Black Watch):Rogue (Serial Killer):Salary Man}</code> - that will work in room descriptions, because Text Processor directives like <code>{either</code> are automatically run when the string is printed. <strong>But</strong> that won't work for the Places and Objects pane in the sidebar, which will display the code instead of the name.</p>\n<p>Alternatively, you could run the code when the watch is switched on or off; which is what it sounded like you were doing from your original post.</p>\n<p>On the \"Black Watch\" object's \"switchable\" tab, you could use the two scripts at the bottom.</p>\n<ul>\n<li>\"After switching on the object:\"<pre> <code>npc1.alias = \"Rogue (Serial Killer)\"</code></pre></li>\n<li>\"After switching off the object:\"<pre> <code>npc1.alias = \"Salary man\"</code></pre></li>\n</ul>\n<p>The downside of this method is that your Black Watch ends up containing a big list of characters' alternate names.</p>\n<p>If there are a lot of characters this applies to, then it might be worth making a more general script:</p>\n<ul>\n<li>\"After switching on the object:\"</li>\n</ul>\n<pre> <code>foreach (obj, AllObjects ()) {\n  if (HasAttribute (obj, \"watch_on_alias\")) {\n    obj.watch_off_alias = obj.alias\n    obj.alias = obj.watch_on_alias\n  }\n}</code></pre>\n<ul>\n<li>\"After switching off the object:\"</li>\n</ul>\n<pre> <code>foreach (obj, AllObjects ()) {\n  if (HasAttribute (obj, \"watch_off_alias\")) {\n    obj.watch_on_alias = obj.alias\n    obj.alias = obj.watch_off_alias\n  }\n}</code></pre>\n<p>Then you could give the man two attributes:</p>\n<pre><code>      &lt;alias type=\"string\"&gt;Salary man&lt;/alias&gt;\n      &lt;attr name=\"watch_on_alias\" type=\"string\"&gt;Rogue (Serial Killer)&lt;/attr&gt;\n</code></pre>\n<p>and it will switch between them as necessary (assuming the watch is initially switched off)</p>\n<p>The advantage of this method is that each object's real alias is stored on that object, rather than in a single big list; and the script doesn't need modifying as more NPCs are added to the system.</p>\n\n",
      "PostDate": "2023-09-15T19:26:22.2685984Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
