{
  "Topic": {
    "TopicId": "fsuybaghpeyhlalptqqrmq",
    "ForumId": "10",
    "Title": "How to save/load your game in \"novella\" theme?",
    "LastUpdated": "2018-10-23T13:03:28.1590403Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "695816c0-7520-481a-9ff5-d942630e14f1",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I am trying to make a game without using the command bar. Most stuff works like a charm, but for the life of me, I can't figure out how to make the game save if you can't type in \"save\". Does anyone have a good solution for save/load mechanic in \"novella\" theme?",
      "EditableFormat": "markdown",
      "HTML": "<p>I am trying to make a game without using the command bar. Most stuff works like a charm, but for the life of me, I can't figure out how to make the game save if you can't type in \"save\". Does anyone have a good solution for save/load mechanic in \"novella\" theme?</p>\n\n",
      "PostDate": "2018-10-23T13:03:28.1590403Z",
      "LastEditDate": "2018-10-23T13:04:09.5000456Z",
      "link": null
    },
    {
      "PostId": "105ca450-de7a-45a9-85ee-810b86affd8a",
      "UserId": 25543,
      "Username": "Silver",
      "AvatarUrl": "https://i.imgur.com/LMGdoqRb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Game progress saves automatically online and there’s a bar at the top of offline games with a save button on it (or there used to be).\r\nOtherwise you’d need to devise a way of incorporating the save function in link form into your game using the command function with the text processor. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Game progress saves automatically online and there’s a bar at the top of offline games with a save button on it (or there used to be).<br>\nOtherwise you’d need to devise a way of incorporating the save function in link form into your game using the command function with the text processor.</p>\n\n",
      "PostDate": "2018-10-23T13:56:05.350393Z",
      "LastEditDate": "2018-10-23T13:58:08.1337692Z",
      "link": null
    },
    {
      "PostId": "26d8a6ee-d4b4-4936-9576-6b073e328e4b",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I understand that and I apologize for being unprecise. You see, I am aiming for a bit of immersion, so I would like to be able to save only when using a typwriter. I have an idea how to sidestep the issue by summoning the command bar when using the typewriter, waiting for input so that the player can write \"save\", and then removing the command bar after that. But, I would really like to skip the whole command bar interface. So please, any help would be appreciated.\r\n\r\nWhile we are at it, I also have a puzzle where you need to put some items into a big suitcase in order to be able to carry those things from location A to location B. I made it work, but the problem I am having is that any player can open the suitcase while it is in the inventory. I would like to make the suitcase unopenable while in my inventory, and then openable again when dropping it on the ground. I wonder if you might know those two commands for making objects openable/unopenable on request? I know you can tick it on/ff in the UI, but I need to be able to do it through a script.",
      "EditableFormat": "markdown",
      "HTML": "<p>I understand that and I apologize for being unprecise. You see, I am aiming for a bit of immersion, so I would like to be able to save only when using a typwriter. I have an idea how to sidestep the issue by summoning the command bar when using the typewriter, waiting for input so that the player can write \"save\", and then removing the command bar after that. But, I would really like to skip the whole command bar interface. So please, any help would be appreciated.</p>\n<p>While we are at it, I also have a puzzle where you need to put some items into a big suitcase in order to be able to carry those things from location A to location B. I made it work, but the problem I am having is that any player can open the suitcase while it is in the inventory. I would like to make the suitcase unopenable while in my inventory, and then openable again when dropping it on the ground. I wonder if you might know those two commands for making objects openable/unopenable on request? I know you can tick it on/ff in the UI, but I need to be able to do it through a script.</p>\n\n",
      "PostDate": "2018-10-23T14:01:05.866156Z",
      "LastEditDate": "2018-10-23T14:09:07.7876199Z",
      "link": null
    },
    {
      "PostId": "3da7c385-ec7e-4ab4-b206-e38b28030275",
      "UserId": 25543,
      "Username": "Silver",
      "AvatarUrl": "https://i.imgur.com/LMGdoqRb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The first issue can be resolved using the text processor - I’m afk atm so cant give an example presently. I’ll get back to you later though if nobody else does. \r\n\r\nThe second issue you use the code I showed you earlier where the game checks if the object is carried first before performing the action. I’ll give an example of that too later if nobody else answers. ",
      "EditableFormat": "markdown",
      "HTML": "<p>The first issue can be resolved using the text processor - I’m afk atm so cant give an example presently. I’ll get back to you later though if nobody else does.</p>\n<p>The second issue you use the code I showed you earlier where the game checks if the object is carried first before performing the action. I’ll give an example of that too later if nobody else answers.</p>\n\n",
      "PostDate": "2018-10-23T14:12:20.3690531Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "58a2046c-7d15-45c0-8813-d91cf589a4d1",
      "UserId": 25543,
      "Username": "Silver",
      "AvatarUrl": "https://i.imgur.com/LMGdoqRb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "One of the problems is though (as I wanted to do something similar with one of my games) you can’t get rid of the existing save systems. Unless that’s changed, I couldn’t work out how to do it a couple of years back though. ",
      "EditableFormat": "markdown",
      "HTML": "<p>One of the problems is though (as I wanted to do something similar with one of my games) you can’t get rid of the existing save systems. Unless that’s changed, I couldn’t work out how to do it a couple of years back though.</p>\n\n",
      "PostDate": "2018-10-23T14:21:47.9270106Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1702f63f-1080-4975-8c3a-37d040ac61ed",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The thing is, I am pretty good with IF statements and I really don't see how you can make it work through an IF script. I already have a very complicated IF script upon picking up the suitcase, so I am worried that doing it through a script would cause more headaches down the line. But I ll wait.\r\n\r\nAll I really need is just the command to make the suitcase unopenable for the duration of being inside my inventory. Something like:\r\n>> Add_to_inventory object suitcase\r\n>> Make_suitcase_unopenable\r\n\r\nThe same could be probably achieved if anyone just knew the \"save\" command. I could just use the computer and then call on \"save\" command.\r\n\r\nUnfortunately, I don't understand the programming language, so I am just stuck at this point. It's probably something like JS.SaveGame or something. I really wish there was a dictionary or a list with these commands somewhere where you can go check it.",
      "EditableFormat": "markdown",
      "HTML": "<p>The thing is, I am pretty good with IF statements and I really don't see how you can make it work through an IF script. I already have a very complicated IF script upon picking up the suitcase, so I am worried that doing it through a script would cause more headaches down the line. But I ll wait.</p>\n<p>All I really need is just the command to make the suitcase unopenable for the duration of being inside my inventory. Something like:</p>\n<blockquote>\n<blockquote>\n<p>Add_to_inventory object suitcase<br>\nMake_suitcase_unopenable</p>\n</blockquote>\n</blockquote>\n<p>The same could be probably achieved if anyone just knew the \"save\" command. I could just use the computer and then call on \"save\" command.</p>\n<p>Unfortunately, I don't understand the programming language, so I am just stuck at this point. It's probably something like JS.SaveGame or something. I really wish there was a dictionary or a list with these commands somewhere where you can go check it.</p>\n\n",
      "PostDate": "2018-10-23T14:40:05.2143569Z",
      "LastEditDate": "2018-10-23T14:48:10.3190293Z",
      "link": null
    },
    {
      "PostId": "e66d899b-f463-4e15-9c94-963b3e18ca31",
      "UserId": 25543,
      "Username": "Silver",
      "AvatarUrl": "https://i.imgur.com/LMGdoqRb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You need to place the If command within the function to open the suitcase. I’m still afk but I can imagine the problem - it’s a core function which can’t be edited in that way.\r\nWell it can, you just need to know how to edit the core functions but that also alters the core function for the entire game. It’s doable though. \r\nAlternatively you’d need to build your own suitcase from scratch (rather than using the core container function). Someone like the pixie or hk are better placed than me to tackle that hurdle though. ",
      "EditableFormat": "markdown",
      "HTML": "<p>You need to place the If command within the function to open the suitcase. I’m still afk but I can imagine the problem - it’s a core function which can’t be edited in that way.<br>\nWell it can, you just need to know how to edit the core functions but that also alters the core function for the entire game. It’s doable though.<br>\nAlternatively you’d need to build your own suitcase from scratch (rather than using the core container function). Someone like the pixie or hk are better placed than me to tackle that hurdle though.</p>\n\n",
      "PostDate": "2018-10-23T15:41:20.5897974Z",
      "LastEditDate": "2018-10-23T15:54:37.0221609Z",
      "link": null
    },
    {
      "PostId": "a9e0f779-df26-4c2f-8aea-63e7f111578e",
      "UserId": 25543,
      "Username": "Silver",
      "AvatarUrl": "https://i.imgur.com/LMGdoqRb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">Unfortunately, I don't understand the programming language, so I am just stuck at this point. It's probably something like JS.SaveGame or something. I really wish there was a dictionary or a list with these commands somewhere where you can go check it.\r\n\r\nThere’s something you can do which opens up the core commands including save. I forget what it is atm and I’m afk.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Unfortunately, I don't understand the programming language, so I am just stuck at this point. It's probably something like JS.SaveGame or something. I really wish there was a dictionary or a list with these commands somewhere where you can go check it.</p>\n</blockquote>\n<p>There’s something you can do which opens up the core commands including save. I forget what it is atm and I’m afk.</p>\n\n",
      "PostDate": "2018-10-23T15:56:56.8809864Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6360d362-0fcf-4c2b-a81a-b69ad461b5c3",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well, until I was waiting for the answer I came up with my own script for saving upon using the typewriter. Like I said, I would still like to avoid using the commandbar, but if anyone else is interested, this might be a temporary solution. It's not perfect since I cant figure out how to get input and then save and then immediately remove the command bar, but I made it so that the command bar pretty much disappears on the very next action. Any other ideas would be appreciated.\r\n\r\n```\r\nmsg (\"It occurs to you that it would probably be a good idea to <b>save</b> your memories on a sheet of paper in case you ever want to revisit them for whatever reason.\")\r\nrequest (Show, \"Command\")\r\nSetTurnTimeoutID (2, \"\") {\r\n  request (Hide, \"Command\")\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Well, until I was waiting for the answer I came up with my own script for saving upon using the typewriter. Like I said, I would still like to avoid using the commandbar, but if anyone else is interested, this might be a temporary solution. It's not perfect since I cant figure out how to get input and then save and then immediately remove the command bar, but I made it so that the command bar pretty much disappears on the very next action. Any other ideas would be appreciated.</p>\n<pre><code>msg (\"It occurs to you that it would probably be a good idea to &lt;b&gt;save&lt;/b&gt; your memories on a sheet of paper in case you ever want to revisit them for whatever reason.\")\nrequest (Show, \"Command\")\nSetTurnTimeoutID (2, \"\") {\n  request (Hide, \"Command\")\n}\n</code></pre>\n\n",
      "PostDate": "2018-10-23T16:34:28.2926107Z",
      "LastEditDate": "2018-10-23T16:35:05.6029827Z",
      "link": null
    },
    {
      "PostId": "4e930718-a63d-486a-b2ba-92e0812d7318",
      "UserId": 25543,
      "Username": "Silver",
      "AvatarUrl": "https://i.imgur.com/LMGdoqRb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "2 seconds to type something? XD ",
      "EditableFormat": "markdown",
      "HTML": "<p>2 seconds to type something? XD</p>\n\n",
      "PostDate": "2018-10-23T16:40:16.0656183Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "aedd6c12-81ad-4e76-9bfe-dbe116aca074",
      "UserId": 25543,
      "Username": "Silver",
      "AvatarUrl": "https://i.imgur.com/LMGdoqRb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Are you working online or offline?\r\n\r\nIn days of yore I think you got to the core commands by clicking something at the bottom left of the offline Quest program. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Are you working online or offline?</p>\n<p>In days of yore I think you got to the core commands by clicking something at the bottom left of the offline Quest program.</p>\n\n",
      "PostDate": "2018-10-23T16:44:05.1980159Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "91141a5e-d8e5-4c5a-8df4-729ac0f6ea72",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Its 2 turns, not 2 seconds. And I am using offline version.",
      "EditableFormat": "markdown",
      "HTML": "<p>Its 2 turns, not 2 seconds. And I am using offline version.</p>\n\n",
      "PostDate": "2018-10-23T17:46:56.8616553Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "675b60c2-581e-4725-94f6-e4c6ea092f9c",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yes you can type in save. No, I have not played novella before.",
      "EditableFormat": "markdown",
      "HTML": "<p>Yes you can type in save. No, I have not played novella before.</p>\n\n",
      "PostDate": "2018-10-23T18:20:10.0430206Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "52967f9b-c588-434f-b6e2-692916780847",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Jmnevil54, I understand that you can type \"save\" in the command bar. I want to avoid using the command bar and create a game that operates only through links. So how can one save without the command bar? There must be some way to call the save command without actually having to type it.\r\n\r\nAlso, I was wondering how to make an item switch from being openable to unopenable? I know that you can tick it on/off in UI, but how would one do it with a script command?",
      "EditableFormat": "markdown",
      "HTML": "<p>Jmnevil54, I understand that you can type \"save\" in the command bar. I want to avoid using the command bar and create a game that operates only through links. So how can one save without the command bar? There must be some way to call the save command without actually having to type it.</p>\n<p>Also, I was wondering how to make an item switch from being openable to unopenable? I know that you can tick it on/off in UI, but how would one do it with a script command?</p>\n\n",
      "PostDate": "2018-10-23T18:42:44.7666481Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9890ae29-00ed-49ad-9ac5-1fa43597ffe4",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You can run the 'save' command as if the player typed it by doing:\r\n```\r\ndo (save, \"script\")\r\n```\r\nwhich runs the script associated with the save command.\r\n\r\n<hr />\r\n\r\nYou could also use a command link, I think. Something like this:\r\n```\r\nmsg (\"Would you like to {command:save} your game?\")\r\n```\r\nIn this case, the player can click the word \"save\" and Quest automatically types it into the command bar and submits it. This works even if the command bar is hidden.\r\n\r\n<hr />\r\n\r\nA third option would be to use the parser directly:\r\n```\r\nHandleSingleCommand (\"save\")\r\n```\r\nThat one causes Quest to deal with the command exactly as if the player had typed \"save\".\r\n\r\n<hr/>\r\n\r\nThese same three methods can be used to automate just about any command the player could enter. This is quite a useful trick to learn.\r\nFor example, if you wanted to have the player automatically use a spanner on an engine, running its normal \"use\" verb, you could use any of the following:\r\n\r\n1. `do (useon, \"script\", QuickParams (\"object1\", spanner, \"object2\", engine))`\r\n2. `msg (\"You probably want to {command:use spanner on engine}.\")`\r\n3. `HandleSingleCommand (\"use spanner on engine\")`",
      "EditableFormat": "markdown",
      "HTML": "<p>You can run the 'save' command as if the player typed it by doing:</p>\n<pre><code>do (save, \"script\")\n</code></pre>\n<p>which runs the script associated with the save command.</p>\n<hr>\n<p>You could also use a command link, I think. Something like this:</p>\n<pre><code>msg (\"Would you like to {command:save} your game?\")\n</code></pre>\n<p>In this case, the player can click the word \"save\" and Quest automatically types it into the command bar and submits it. This works even if the command bar is hidden.</p>\n<hr>\n<p>A third option would be to use the parser directly:</p>\n<pre><code>HandleSingleCommand (\"save\")\n</code></pre>\n<p>That one causes Quest to deal with the command exactly as if the player had typed \"save\".</p>\n<hr>\n<p>These same three methods can be used to automate just about any command the player could enter. This is quite a useful trick to learn.<br>\nFor example, if you wanted to have the player automatically use a spanner on an engine, running its normal \"use\" verb, you could use any of the following:</p>\n<ol>\n<li><code>do (useon, \"script\", QuickParams (\"object1\", spanner, \"object2\", engine))</code></li>\n<li><code>msg (\"You probably want to {command:use spanner on engine}.\")</code></li>\n<li><code>HandleSingleCommand (\"use spanner on engine\")</code></li>\n</ol>\n\n",
      "PostDate": "2018-10-23T21:03:21.896375Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ec350d71-4797-40b8-bb03-d389f5d65e85",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks Mrangel! You are a master at this craft! Also, I was wondering how to make an item switch from being openable to unopenable? I know that you can tick it on/off in UI, but how would one do it with a script command?",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks Mrangel! You are a master at this craft! Also, I was wondering how to make an item switch from being openable to unopenable? I know that you can tick it on/off in UI, but how would one do it with a script command?</p>\n\n",
      "PostDate": "2018-10-23T21:10:10.6963359Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b96ce131-a9a6-453a-9bcb-4528015a01e0",
      "UserId": 25543,
      "Username": "Silver",
      "AvatarUrl": "https://i.imgur.com/LMGdoqRb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You swap the openable object for an unopenable one with the same name. ",
      "EditableFormat": "markdown",
      "HTML": "<p>You swap the openable object for an unopenable one with the same name.</p>\n\n",
      "PostDate": "2018-10-24T06:17:38.7343651Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "96091a0b-fdd0-43da-8944-a820a7c53528",
      "UserId": 25543,
      "Username": "Silver",
      "AvatarUrl": "https://i.imgur.com/LMGdoqRb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I should probably expand on that. As always there’s a few ways to do it but what I always do is have a room that isn’t connected to the game that is used to store objects. So if I want to change the properties of an object I simply move the current one to the room and the one in the room into the game. \r\nSo in your situation you could have an object that’s a suitcase in the game and a container suitcase in the object room. Using a key on the object in the game ‘unlocks’ the case and you simply run a script moving the suitcase to the room and the container suitcase into the game with the message ‘it has unlocked’. ",
      "EditableFormat": "markdown",
      "HTML": "<p>I should probably expand on that. As always there’s a few ways to do it but what I always do is have a room that isn’t connected to the game that is used to store objects. So if I want to change the properties of an object I simply move the current one to the room and the one in the room into the game.<br>\nSo in your situation you could have an object that’s a suitcase in the game and a container suitcase in the object room. Using a key on the object in the game ‘unlocks’ the case and you simply run a script moving the suitcase to the room and the container suitcase into the game with the message ‘it has unlocked’.</p>\n\n",
      "PostDate": "2018-10-24T08:19:46.9434706Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ec3e4452-85d9-4ff3-9f97-ff2a52d1cddf",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I know that you can tick it on/off in UI, but how would one do it with a script command?\r\n\r\nThat tickbox is for the `open` attribute. mSo to tick or untick it during play, you would use:\r\n```\r\nobject.open = false\r\n```\r\nor\r\n```\r\nobject.open = true\r\n```\r\n\r\n(One mistake I've seen a few times is someone using `if (someobject.open) {` to check if an object is open. This checks if it's openable, and the attribute to check if it's currently open is `isopen`)\r\n\r\nIf you want a suitcase to be only openable when it's on the ground, one method would be adding this to the script that runs when you take it:\r\n```\r\nif (suitcase.isopen) {\r\n  msg (\"You close it and pick it up\")\r\n  suitcase.isopen = false\r\n}\r\nsuitcase.open = false\r\nAddToInventory (suitcase)\r\n```\r\nThat way it guards against someone opening it and then picking it up. _However_, setting `suitcase.open = true` in the drop script would be a bit more complicated. Because the \"drop\" script is also run when you put it inside a container, even a container that you're still holding. So you'd probably need to check that.\r\n\r\nA simpler method might be to create a `changedparent` attribute for the suitcase; this will automatically run whenever it is taken, dropped, or moved - so you can avoid adding extra complexity to existing take/drop scripts. This would be a script attribute; I believe in the desktop version of Quest you can create these in the attributes tab; in the web version you'd need to use an initialise script.\r\n\r\nThe changedparent could be:\r\n```\r\nthis.hasbeenmoved = true\r\nif (Contains (game.pov, this) or GetBoolean (this.parent, \"open\")) {\r\n  if (GetBoolean (this, \"isopen\")) {\r\n    msg (\"The suitcase is too unwieldy when it's open, so you have to close it.\")\r\n    this.isopen = false\r\n  }\r\n  this.open = false\r\n}\r\nelse {\r\n  this.open = true\r\n}\r\n```\r\nThat would disable opening the suitcase if it's in the inventory or inside an openable container; and would display a message and close it if the player tries to pick it up while it's open.\r\n\r\nUnder Quest 5.8, this could be simplified a little:\r\n```\r\nthis.hasbeenmoved = true\r\nthis.open = GetBoolean (this.parent, \"isroom\")\r\nif (this.isopen and not this.open) {\r\n  msg (\"You have to close it.\")\r\n  this.isopen = false\r\n}\r\n```\r\n(object can be opened only if the object it's inside of is a room ... though the previous version would also allow it to be opened on a table or other surface)\r\n\r\nI always recommend using the change script attributes where possible, because they make it easier to respond to the results of the player's action, rather than the action itself.\r\nThe drop script is a good example. A lot of people have a script for when an object is dropped, which they use to mean \"when a player stops carrying it\". But if you put an object in a container, the drop script runs. If you give an object to an NPC and _they_ put it on the ground, the drop script is not run. If you have a \"sprint\" command which has a chance of objects randomly falling out of the player's pockets, the drop script is not run. But the `changedparent` script is run every time an object is moved.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I know that you can tick it on/off in UI, but how would one do it with a script command?</p>\n</blockquote>\n<p>That tickbox is for the <code>open</code> attribute. mSo to tick or untick it during play, you would use:</p>\n<pre><code>object.open = false\n</code></pre>\n<p>or</p>\n<pre><code>object.open = true\n</code></pre>\n<p>(One mistake I've seen a few times is someone using <code>if (someobject.open) {</code> to check if an object is open. This checks if it's openable, and the attribute to check if it's currently open is <code>isopen</code>)</p>\n<p>If you want a suitcase to be only openable when it's on the ground, one method would be adding this to the script that runs when you take it:</p>\n<pre><code>if (suitcase.isopen) {\n  msg (\"You close it and pick it up\")\n  suitcase.isopen = false\n}\nsuitcase.open = false\nAddToInventory (suitcase)\n</code></pre>\n<p>That way it guards against someone opening it and then picking it up. <em>However</em>, setting <code>suitcase.open = true</code> in the drop script would be a bit more complicated. Because the \"drop\" script is also run when you put it inside a container, even a container that you're still holding. So you'd probably need to check that.</p>\n<p>A simpler method might be to create a <code>changedparent</code> attribute for the suitcase; this will automatically run whenever it is taken, dropped, or moved - so you can avoid adding extra complexity to existing take/drop scripts. This would be a script attribute; I believe in the desktop version of Quest you can create these in the attributes tab; in the web version you'd need to use an initialise script.</p>\n<p>The changedparent could be:</p>\n<pre><code>this.hasbeenmoved = true\nif (Contains (game.pov, this) or GetBoolean (this.parent, \"open\")) {\n  if (GetBoolean (this, \"isopen\")) {\n    msg (\"The suitcase is too unwieldy when it's open, so you have to close it.\")\n    this.isopen = false\n  }\n  this.open = false\n}\nelse {\n  this.open = true\n}\n</code></pre>\n<p>That would disable opening the suitcase if it's in the inventory or inside an openable container; and would display a message and close it if the player tries to pick it up while it's open.</p>\n<p>Under Quest 5.8, this could be simplified a little:</p>\n<pre><code>this.hasbeenmoved = true\nthis.open = GetBoolean (this.parent, \"isroom\")\nif (this.isopen and not this.open) {\n  msg (\"You have to close it.\")\n  this.isopen = false\n}\n</code></pre>\n<p>(object can be opened only if the object it's inside of is a room ... though the previous version would also allow it to be opened on a table or other surface)</p>\n<p>I always recommend using the change script attributes where possible, because they make it easier to respond to the results of the player's action, rather than the action itself.<br>\nThe drop script is a good example. A lot of people have a script for when an object is dropped, which they use to mean \"when a player stops carrying it\". But if you put an object in a container, the drop script runs. If you give an object to an NPC and <em>they</em> put it on the ground, the drop script is not run. If you have a \"sprint\" command which has a chance of objects randomly falling out of the player's pockets, the drop script is not run. But the <code>changedparent</code> script is run every time an object is moved.</p>\n\n",
      "PostDate": "2018-10-24T09:03:07.7347643Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a7d68400-7b9b-475e-9782-077e4583c454",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks Mrangel! You hit the nail on the head again. This was extremely helpful. I just have one more question. When I try opening the suitcase in the inventory, I get the default message: \"You can't open it\". Is there any way to change that message into: \"You can't open the suitcase while you are carrying it.\"\r\n\r\nHave in mind that I will have to open the case later, so I will need to have two variations of what happens when you try opening the case. One when the suitcase is openable and one for when the case is not openable. Thanks in advance! Oh, how I wish I had your knowledge!",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks Mrangel! You hit the nail on the head again. This was extremely helpful. I just have one more question. When I try opening the suitcase in the inventory, I get the default message: \"You can't open it\". Is there any way to change that message into: \"You can't open the suitcase while you are carrying it.\"</p>\n<p>Have in mind that I will have to open the case later, so I will need to have two variations of what happens when you try opening the case. One when the suitcase is openable and one for when the case is not openable. Thanks in advance! Oh, how I wish I had your knowledge!</p>\n\n",
      "PostDate": "2018-10-24T13:11:41.5889257Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7a8d9b95-557c-482e-a36c-c0bac8f8a646",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I don't think the message can be changed. However, you could decide to use an openscript instead.\r\n\r\nYou can give a container a script attribute named \"openscript\" that will be run instead of setting the isopen attribute to true.\r\n\r\nSo if you have the container always openable, but make its openscript:\r\n```\r\nif (Contains (game.pov, this)) {\r\n  msg (\"You can't open the suitcase while carrying it.\")\r\n}\r\nelse {\r\n  OpenObject (this)\r\n}\r\n```\r\n(the script will run only if the suitcase is reachable, openable, and unlocked, so you wouldn't want to set `open` to false if you were using this. However, you'd probably still want to use either the `changedparent` or `open` scripts to close the case when picking it up)\r\n\r\n\r\n(the `openscript` attribute is probably somewhere on the container tab, but I don't have the editor in front of me right now)",
      "EditableFormat": "markdown",
      "HTML": "<p>I don't think the message can be changed. However, you could decide to use an openscript instead.</p>\n<p>You can give a container a script attribute named \"openscript\" that will be run instead of setting the isopen attribute to true.</p>\n<p>So if you have the container always openable, but make its openscript:</p>\n<pre><code>if (Contains (game.pov, this)) {\n  msg (\"You can't open the suitcase while carrying it.\")\n}\nelse {\n  OpenObject (this)\n}\n</code></pre>\n<p>(the script will run only if the suitcase is reachable, openable, and unlocked, so you wouldn't want to set <code>open</code> to false if you were using this. However, you'd probably still want to use either the <code>changedparent</code> or <code>open</code> scripts to close the case when picking it up)</p>\n<p>(the <code>openscript</code> attribute is probably somewhere on the container tab, but I don't have the editor in front of me right now)</p>\n\n",
      "PostDate": "2018-10-24T19:15:07.3222641Z",
      "LastEditDate": "2018-10-24T22:50:48.0429318Z",
      "link": null
    },
    {
      "PostId": "d5a6668f-bc71-4369-909c-516a62b47ce3",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Mrangel, I just wanted to come back and say thank you! Your knowledge and expertise is a credit to this site, which cannot be repaid with an ordinary thank you. Since you saved me so much time, I would like to repay my gratitude with this:\r\n\r\nFor days I've been bashing my head against a rock,\r\nOnly frustration and anger preventing me to stop!\r\nAs I listen to the endless ticking of the clock,\r\nBloody veins in my eyes remind me of my block!\r\nHow much longer can I endure this shock,\r\nWill I ever solve this problem like a doc?\r\nThen comes this dude with a name like a croc,\r\nOut of nowhere and with an avatar of a frog.\r\nHe barely acknowledges me by picking up the rock\r\nAnd then breaking it with but a gentle knock!\r\n\r\n:)",
      "EditableFormat": "markdown",
      "HTML": "<p>Mrangel, I just wanted to come back and say thank you! Your knowledge and expertise is a credit to this site, which cannot be repaid with an ordinary thank you. Since you saved me so much time, I would like to repay my gratitude with this:</p>\n<p>For days I've been bashing my head against a rock,<br>\nOnly frustration and anger preventing me to stop!<br>\nAs I listen to the endless ticking of the clock,<br>\nBloody veins in my eyes remind me of my block!<br>\nHow much longer can I endure this shock,<br>\nWill I ever solve this problem like a doc?<br>\nThen comes this dude with a name like a croc,<br>\nOut of nowhere and with an avatar of a frog.<br>\nHe barely acknowledges me by picking up the rock<br>\nAnd then breaking it with but a gentle knock!</p>\n<p>:)</p>\n\n",
      "PostDate": "2018-10-24T22:45:19.289203Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
