{
  "Topic": {
    "TopicId": "nzc5tkveck25tgtmr4aw6w",
    "ForumId": "10",
    "Title": "Is it possible to have the number of different objects/pages counted for you?",
    "LastUpdated": "2019-08-27T10:48:09.8215697Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "76914926-5bc0-4988-8f55-2b5a3a55678d",
      "UserId": 418279,
      "Username": "Zesc",
      "AvatarUrl": "https://i.imgur.com/bGcfC7sb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Greetings, fellow Quest users.\r\n\r\nA gamebook-dolt needs your help. To be exactly, i just need the number of different pages i have in total. (Minus a few that are entirely script, but i can count those by hand and subtract later.)\r\n\r\nThe problem is that i have, even when all directories under ```Pages``` are fold together already nigh-200 entries. I don't have to tell you that counting the entire tree by hand is tedious and prone to errors. So i would like to be able to have them counted, but couldn't find a way to do so.\r\n\r\nI though that looking at ```Pages``` (Disable Simple Mode) could give me a number... It doesn't.\r\n\r\nAnyone got a suggestions? I'd highly appreciate it, and thanks in advance.",
      "EditableFormat": "markdown",
      "HTML": "<p>Greetings, fellow Quest users.</p>\n<p>A gamebook-dolt needs your help. To be exactly, i just need the number of different pages i have in total. (Minus a few that are entirely script, but i can count those by hand and subtract later.)</p>\n<p>The problem is that i have, even when all directories under <code>Pages</code> are fold together already nigh-200 entries. I don't have to tell you that counting the entire tree by hand is tedious and prone to errors. So i would like to be able to have them counted, but couldn't find a way to do so.</p>\n<p>I though that looking at <code>Pages</code> (Disable Simple Mode) could give me a number... It doesn't.</p>\n<p>Anyone got a suggestions? I'd highly appreciate it, and thanks in advance.</p>\n\n",
      "PostDate": "2019-08-27T10:48:09.8215697Z",
      "LastEditDate": "2019-08-27T10:49:00.6925233Z",
      "link": null
    },
    {
      "PostId": "27e55c53-765c-46fc-bb5c-a20fa7936828",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Off the top of my head:\r\n```\r\nThis gamebook has {eval ListCount (AllObjects())-1} pages!\r\n```\r\n\r\nI believe (havent tested it) that for a gamebook, `AllObjects()` will return all pages plus the player.\r\n\r\nIf you want only text pages, you can write a script to loop over AllObjects and count the ones with a specific type. I'd give an dxample, but don't remember the name of the type.\r\n\r\nEdit: your script would look something like:\r\n```\r\ntextpages = 0\r\nscripttextpages = 0\r\nscriptpages = 0\r\nforeach (page, AllObjects()) {\r\n  if (DoesInherit (page, \"defaultplayer\")) {\r\n    // do nothing here, because we're counting pages\r\n    // and as far as I'm aware, AllObjects() returns all pages plus the player object\r\n  }\r\n  else if (DoesInherit (page, \"script\")) {\r\n    scriptpages = scriptpages + 1\r\n  }\r\n  else if (DoesInherit (page, \"scripttext\")) {\r\n    scripttextpages = scripttextpages + 1\r\n  }\r\n  else {\r\n    textpages = textpages + 1\r\n  }\r\n}\r\nmsg (\"Page count by type:<ul><li>Text: \"+textpages+\"</li><li>Text and Script: \"+scripttextpages+\"</li><li>Script: \"+scriptpages+\"</li></ul>\")\r\n```\r\n\r\nOf course, you'd need to do this in the game. I'd recommend either making a \"game stats\" page (and only adding a link to it temporarily if you don't want players to see it), or (if you only want to count them once) adding the code, getting your answer, and removing it again.",
      "EditableFormat": "markdown",
      "HTML": "<p>Off the top of my head:</p>\n<pre><code>This gamebook has {eval ListCount (AllObjects())-1} pages!\n</code></pre>\n<p>I believe (havent tested it) that for a gamebook, <code>AllObjects()</code> will return all pages plus the player.</p>\n<p>If you want only text pages, you can write a script to loop over AllObjects and count the ones with a specific type. I'd give an dxample, but don't remember the name of the type.</p>\n<p>Edit: your script would look something like:</p>\n<pre><code>textpages = 0\nscripttextpages = 0\nscriptpages = 0\nforeach (page, AllObjects()) {\n  if (DoesInherit (page, \"defaultplayer\")) {\n    // do nothing here, because we're counting pages\n    // and as far as I'm aware, AllObjects() returns all pages plus the player object\n  }\n  else if (DoesInherit (page, \"script\")) {\n    scriptpages = scriptpages + 1\n  }\n  else if (DoesInherit (page, \"scripttext\")) {\n    scripttextpages = scripttextpages + 1\n  }\n  else {\n    textpages = textpages + 1\n  }\n}\nmsg (\"Page count by type:&lt;ul&gt;&lt;li&gt;Text: \"+textpages+\"&lt;/li&gt;&lt;li&gt;Text and Script: \"+scripttextpages+\"&lt;/li&gt;&lt;li&gt;Script: \"+scriptpages+\"&lt;/li&gt;&lt;/ul&gt;\")\n</code></pre>\n<p>Of course, you'd need to do this in the game. I'd recommend either making a \"game stats\" page (and only adding a link to it temporarily if you don't want players to see it), or (if you only want to count them once) adding the code, getting your answer, and removing it again.</p>\n\n",
      "PostDate": "2019-08-27T11:25:30.8647695Z",
      "LastEditDate": "2019-08-28T21:48:26.7831479Z",
      "link": null
    },
    {
      "PostId": "5a69c237-a02f-4cb2-aca1-9e7f3188a794",
      "UserId": 418279,
      "Username": "Zesc",
      "AvatarUrl": "https://i.imgur.com/bGcfC7sb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So, i'm now going to do one of my favourit activities: nitpicking over work that others have done for me. :P\r\n\r\nYour little code is prining out the message after every counting step, resulting in 228 outputs for me. Wrong placement of the curly braces? Also, you've forgoten that ```game```is also an object. (Forgivable, since this is just a gamebook shenenigan.)\r\n\r\nAnyway, big thanks for this handy-dandy little script, it will be very usefull in the future. I still can't believe you have to do this with a counting script, but the only other option i've seen would have been opening ```Pages``` with Notepad++ and look at the line count.",
      "EditableFormat": "markdown",
      "HTML": "<p>So, i'm now going to do one of my favourit activities: nitpicking over work that others have done for me. :P</p>\n<p>Your little code is prining out the message after every counting step, resulting in 228 outputs for me. Wrong placement of the curly braces? Also, you've forgoten that <code>game</code>is also an object. (Forgivable, since this is just a gamebook shenenigan.)</p>\n<p>Anyway, big thanks for this handy-dandy little script, it will be very usefull in the future. I still can't believe you have to do this with a counting script, but the only other option i've seen would have been opening <code>Pages</code> with Notepad++ and look at the line count.</p>\n\n",
      "PostDate": "2019-08-28T17:52:07.0984951Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e7af998f-b8a6-4b20-90c2-bf9129102ffa",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(filler for getting my edited post, updated/posted)\r\n\r\n-----------\r\n\r\nyou need to put this code into the 'start' Script Attribute of the required and special 'game' Object, so it's only done once, at the very start of your game, but if you create new pages during game play, you'd need to run this code again, if you want to get the new count of pages you got now\r\n\r\nor, you can have your first page, be set to the Page Type: [script] or [text + script], and put this code into it (it's scripting) instead (if the 'start' Script Attribute of the special and required 'game' Object doesn't exist in the Game Book)\r\n\r\nto handle the special and required 'game' Object (mrangel and myself didn't know that both the default 'player' Player Object and the special and required 'game' Object were included as Pages/Objects that the 'AllObjects()' Script/Function counts)\r\n\r\n(and a little tweaking of mrangel's code, and a small correction: mrangel forgot to change 'scripttextpages' to 'textpages' in the 'else' condition, likely due to copy-pasting - the one pitfall of using copy-pasting, lol-sighs-argh, I always to this mistake too)\r\n\r\n```\r\ntextpages = 0\r\nscripttextpages = 0\r\nscriptpages = 0\r\n\r\nforeach (page, AllObjects()) {\r\n\r\n  if (not page = game and not DoesInherit (page, \"defaultplayer\")) {\r\n\r\n    // if the above line doesn't work, try this line instead: if (not page.name = game.name and not DoesInherit (page, \"defaultplayer\")) {\r\n\r\n    // also, if the Game Book has the 'pov' feature (and you got it set up), you can do this code line instead as well: if (not page = game and not page = game.pov) {\r\n\r\n    // if that doesn't work, try this code line instead: if (not page = game and not page.name = game.pov.name) {\r\n\r\n    // or lastly, if that doesn't work, try this code line instead: if (not page.name = game.name and not page.name = game.pov.name) {\r\n\r\n    if (DoesInherit (page, \"script\")) {\r\n      scriptpages = scriptpages + 1\r\n    } else if (DoesInherit (page, \"scripttext\")) {\r\n      scripttextpages = scripttextpages + 1\r\n    } else {\r\n      textpages = textpages + 1\r\n    }\r\n\r\n  }\r\n\r\n  msg (\"Page count by type:<ul><li>Text: \"+textpages+\"</li><li>Text and Script: \"+scripttextpages+\"</li><li>Script: \"+scriptpages+\"</li></ul>\")\r\n}\r\n```\r\n\r\n--------\r\n\r\nif you want to store those count Values for reuse later/elsewhere:\r\n\r\n(or replace 'game' in all of my 'game.XXX', aka: game.scriptpages, game.scripttextpages, game.textpages, with either: 'player' or 'whatever_you_renamed_the_default_player_object_as' or 'whatever_you_named_your_first_page_as' or 'the_name_of_whatever_page_that_you_want_to_use_to_hold_these_integer_attributes')\r\n\r\n```\r\ngame.textpages = 0\r\ngame.scripttextpages = 0\r\ngame.scriptpages = 0\r\n\r\nforeach (page, AllObjects()) {\r\n\r\n  if (not page = game and not DoesInherit (page, \"defaultplayer\")) {\r\n\r\n    // if the above line doesn't work, try this line instead: if (not page.name = game.name and not DoesInherit (page, \"defaultplayer\")) {\r\n\r\n    // also, if the Game Book has the 'pov' feature (and you got it set up), you can do this code line instead as well: if (not page = game and not page = game.pov) {\r\n\r\n    // if that doesn't work, try this code line instead: if (not page = game and not page.name = game.pov.name) {\r\n\r\n    // or lastly, if that doesn't work, try this code line instead: if (not page.name = game.name and not page.name = game.pov.name) {\r\n\r\n    if (DoesInherit (page, \"script\")) {\r\n      game.scriptpages = game.scriptpages + 1\r\n    } else if (DoesInherit (page, \"scripttext\")) {\r\n      game.scripttextpages = game.scripttextpages + 1\r\n    } else {\r\n      game.textpages = game.textpages + 1\r\n    }\r\n\r\n  }\r\n\r\n  msg (\"Page count by type:<ul><li>Text: \"+game.textpages+\"</li><li>Text and Script: \"+game.scripttextpages+\"</li><li>Script: \"+game.scriptpages+\"</li></ul>\")\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>(filler for getting my edited post, updated/posted)</p>\n<hr>\n<p>you need to put this code into the 'start' Script Attribute of the required and special 'game' Object, so it's only done once, at the very start of your game, but if you create new pages during game play, you'd need to run this code again, if you want to get the new count of pages you got now</p>\n<p>or, you can have your first page, be set to the Page Type: [script] or [text + script], and put this code into it (it's scripting) instead (if the 'start' Script Attribute of the special and required 'game' Object doesn't exist in the Game Book)</p>\n<p>to handle the special and required 'game' Object (mrangel and myself didn't know that both the default 'player' Player Object and the special and required 'game' Object were included as Pages/Objects that the 'AllObjects()' Script/Function counts)</p>\n<p>(and a little tweaking of mrangel's code, and a small correction: mrangel forgot to change 'scripttextpages' to 'textpages' in the 'else' condition, likely due to copy-pasting - the one pitfall of using copy-pasting, lol-sighs-argh, I always to this mistake too)</p>\n<pre><code>textpages = 0\nscripttextpages = 0\nscriptpages = 0\n\nforeach (page, AllObjects()) {\n\n  if (not page = game and not DoesInherit (page, \"defaultplayer\")) {\n\n    // if the above line doesn't work, try this line instead: if (not page.name = game.name and not DoesInherit (page, \"defaultplayer\")) {\n\n    // also, if the Game Book has the 'pov' feature (and you got it set up), you can do this code line instead as well: if (not page = game and not page = game.pov) {\n\n    // if that doesn't work, try this code line instead: if (not page = game and not page.name = game.pov.name) {\n\n    // or lastly, if that doesn't work, try this code line instead: if (not page.name = game.name and not page.name = game.pov.name) {\n\n    if (DoesInherit (page, \"script\")) {\n      scriptpages = scriptpages + 1\n    } else if (DoesInherit (page, \"scripttext\")) {\n      scripttextpages = scripttextpages + 1\n    } else {\n      textpages = textpages + 1\n    }\n\n  }\n\n  msg (\"Page count by type:&lt;ul&gt;&lt;li&gt;Text: \"+textpages+\"&lt;/li&gt;&lt;li&gt;Text and Script: \"+scripttextpages+\"&lt;/li&gt;&lt;li&gt;Script: \"+scriptpages+\"&lt;/li&gt;&lt;/ul&gt;\")\n}\n</code></pre>\n<hr>\n<p>if you want to store those count Values for reuse later/elsewhere:</p>\n<p>(or replace 'game' in all of my 'game.XXX', aka: game.scriptpages, game.scripttextpages, game.textpages, with either: 'player' or 'whatever_you_renamed_the_default_player_object_as' or 'whatever_you_named_your_first_page_as' or 'the_name_of_whatever_page_that_you_want_to_use_to_hold_these_integer_attributes')</p>\n<pre><code>game.textpages = 0\ngame.scripttextpages = 0\ngame.scriptpages = 0\n\nforeach (page, AllObjects()) {\n\n  if (not page = game and not DoesInherit (page, \"defaultplayer\")) {\n\n    // if the above line doesn't work, try this line instead: if (not page.name = game.name and not DoesInherit (page, \"defaultplayer\")) {\n\n    // also, if the Game Book has the 'pov' feature (and you got it set up), you can do this code line instead as well: if (not page = game and not page = game.pov) {\n\n    // if that doesn't work, try this code line instead: if (not page = game and not page.name = game.pov.name) {\n\n    // or lastly, if that doesn't work, try this code line instead: if (not page.name = game.name and not page.name = game.pov.name) {\n\n    if (DoesInherit (page, \"script\")) {\n      game.scriptpages = game.scriptpages + 1\n    } else if (DoesInherit (page, \"scripttext\")) {\n      game.scripttextpages = game.scripttextpages + 1\n    } else {\n      game.textpages = game.textpages + 1\n    }\n\n  }\n\n  msg (\"Page count by type:&lt;ul&gt;&lt;li&gt;Text: \"+game.textpages+\"&lt;/li&gt;&lt;li&gt;Text and Script: \"+game.scripttextpages+\"&lt;/li&gt;&lt;li&gt;Script: \"+game.scriptpages+\"&lt;/li&gt;&lt;/ul&gt;\")\n}\n</code></pre>\n\n",
      "PostDate": "2019-08-28T18:12:21.1103586Z",
      "LastEditDate": "2019-08-28T18:32:24.5806396Z",
      "link": null
    },
    {
      "PostId": "5ebbee20-bee5-4b3f-85cf-387b17a30adf",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Your little code is prining out the message after every counting step, resulting in 228 outputs for me. Wrong placement of the curly braces?\r\n\r\nYeah; one misplaced brace. The hazards of typing on my phone, with the onscreen keyboard, where I don't have access to Quest to test it.\r\n\r\nI've now edited the code in the post above to fix it.\r\n\r\n> Also, you've forgoten that `game` is also an object. (Forgivable, since this is just a gamebook shenenigan.)\r\n\r\nNo I didn't. `game` might or might not be an object (Quest uses the word \"object\" to mean three different things, depending if you're looking at the documentation, Quest code, or the source code of the editor. One of those definitions includes `game`, the others don't)\r\n\r\nBut whether it's an object or not is irrelevant. `game` is *not* in the list returned by `AllObjects()`.\r\n\r\nI took a while to respond to this, because I wanted to double check that this is still the same in gamebooks.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Your little code is prining out the message after every counting step, resulting in 228 outputs for me. Wrong placement of the curly braces?</p>\n</blockquote>\n<p>Yeah; one misplaced brace. The hazards of typing on my phone, with the onscreen keyboard, where I don't have access to Quest to test it.</p>\n<p>I've now edited the code in the post above to fix it.</p>\n<blockquote>\n<p>Also, you've forgoten that <code>game</code> is also an object. (Forgivable, since this is just a gamebook shenenigan.)</p>\n</blockquote>\n<p>No I didn't. <code>game</code> might or might not be an object (Quest uses the word \"object\" to mean three different things, depending if you're looking at the documentation, Quest code, or the source code of the editor. One of those definitions includes <code>game</code>, the others don't)</p>\n<p>But whether it's an object or not is irrelevant. <code>game</code> is <em>not</em> in the list returned by <code>AllObjects()</code>.</p>\n<p>I took a while to respond to this, because I wanted to double check that this is still the same in gamebooks.</p>\n\n",
      "PostDate": "2019-08-28T22:03:35.9475596Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "57fbaf77-3b6a-4a8c-8eb9-d1efe7d2255f",
      "UserId": 418279,
      "Username": "Zesc",
      "AvatarUrl": "https://i.imgur.com/bGcfC7sb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> But whether it's an object or not is irrelevant. game is not in the list returned by ```AllObjects()```.\r\n\r\nOh, i wasn't aware of this. It's... odd.\r\n\r\nAnyway, mrnagel and hegemonkhan, thanks for your input, this really saved me from loads of frustration.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>But whether it's an object or not is irrelevant. game is not in the list returned by <code>AllObjects()</code>.</p>\n</blockquote>\n<p>Oh, i wasn't aware of this. It's... odd.</p>\n<p>Anyway, mrnagel and hegemonkhan, thanks for your input, this really saved me from loads of frustration.</p>\n\n",
      "PostDate": "2019-08-30T08:25:39.3504587Z",
      "LastEditDate": "2019-08-30T08:26:35.2464944Z",
      "link": null
    }
  ]
}
