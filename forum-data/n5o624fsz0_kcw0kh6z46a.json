{
  "Topic": {
    "TopicId": "n5o624fsz0_kcw0kh6z46a",
    "ForumId": "10",
    "Title": "Dealing with NPCs' possessions",
    "LastUpdated": "2017-09-07T20:25:15.5403262Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "4175774b-ecb7-4b62-82af-14a22cca09c5",
      "UserId": 320736,
      "Username": "Jador",
      "AvatarUrl": "https://secure.gravatar.com/avatar/64777628764a68532923e3c8e4946c4d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm trying to figure out how to create a verb associated with an NPC's possessions.  The examples are:\r\n\r\nTake Demon's Sword\r\nand\r\nGrab Demon's Horns.\r\n\r\nI can't figure out how to make an object that the game recognizes as \"demon's sword\" or \"demon's horns.\"",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm trying to figure out how to create a verb associated with an NPC's possessions.  The examples are:</p>\n<p>Take Demon's Sword<br>\nand<br>\nGrab Demon's Horns.</p>\n<p>I can't figure out how to make an object that the game recognizes as \"demon's sword\" or \"demon's horns.\"</p>\n\n",
      "PostDate": "2017-09-07T20:25:15.5403262Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f8f1a52c-41e2-4681-9077-758e76b80ec2",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "#### UPDATE\r\n\r\nClick the link for a much more efficient method. (http://textadventures.co.uk/forum/quest/topic/n5o624fsz0_kcw0kh6z46a/dealing-with-npcs-possessions#8f079b35-1292-4b9a-8967-65f789f55dfc)\r\n\r\n<details><summary>Click here to see the complicated way to do it.</summary>\r\n\r\n\r\n#### First turn on advanced scripts for the game:\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30184919-30d62f30-93e5-11e7-86a0-13e7da676239.png)\r\n\r\n#### Then, click on the Advanced Scripts tab, and adjust your backdrop script to include objects in the NPC object.  (Substitute 'demon' with your NPC's name.)\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30184943-464cd828-93e5-11e7-8f4f-3fc8b00b68ec.png)\r\n\r\n\r\n#### Make sure you set it up so the sword can be taken. \r\n\r\n**( Also, to make it respond correctly (instead of saying 'You pick it up.' when you initially take it from an NPC), add a line with ```{once: You take the demon's sword.}{notfirst: You pick it up.}```)**\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30184994-68a85c44-93e5-11e7-80d4-193af7e2f284.png)\r\n\r\n#### Also make sure the sword has 'demon's sword' as the alias and in other names:\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30185066-9f17128e-93e5-11e7-9958-ddc37df333dc.png)\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30185080-ad480bce-93e5-11e7-8174-9819b2cc7584.png)\r\n\r\n\r\n---\r\nTRANSCRIPT:\r\n\r\n<div  style=\"background:black !important;color:white;padding:12px;border-radius:25px\">\r\n<samp>\r\n<center><h3>NPC possessions</h3></center>\r\n\r\nYou are in a room.\r\nYou can see demon.\r\n\r\n\\> take the demon's sword\r\nYou take the demon's sword.\r\n\r\n\\> drop it\r\nYou drop it.\r\n\r\n\\> get it\r\nYou pick it up.\r\n</samp>\r\n</div>\r\n\r\n\r\n---\r\n\r\n##  EXTRA STEP:\r\n\r\n**Add an in-room description to your NPC that tells the player he is carrying a sword.**\r\n\r\n#### Activate the feature be ticking the 'In-room Descriptions' box:\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30185425-f0f03896-93e6-11e7-9180-8736ad9fc609.png)\r\n\r\n\r\n#### Then add a line like this to the appropriate field:\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30185455-1b29b484-93e7-11e7-8194-c2497b6ded91.png)\r\n\r\n\r\n\r\n---\r\nTRANSCRIPT:\r\n\r\n<div  style=\"background:black !important;color:white;padding:12px;border-radius:25px\">\r\n<samp>\r\n<center><h3>NPC possessions</h3></center>\r\n\r\nYou are in a room.\r\nYou can see demon.\r\n\r\nThe demon is carrying a sword.\r\n\r\n\r\n\\> get the demon's sword\r\nYou take the demon's sword.\r\n\r\n\\> l\r\nYou are in a room.\r\nYou can see demon.\r\n\r\n</sample>\r\n</div>\r\n\r\n---\r\n\r\nExample game:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"NPC possessions\">\r\n    <gameid>51f2bdf9-9949-4a2a-9a6c-6cc593238a47</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <feature_advancedscripts />\r\n    <scopebackdrop type=\"script\">\r\n      foreach (o, GetDirectChildren(demon)) {\r\n        list add (items, o)\r\n      }\r\n    </scopebackdrop>\r\n    <appendobjectdescription />\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"demon\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"namedmale\" />\r\n      <alt type=\"stringlist\" />\r\n      <listalias type=\"string\"></listalias>\r\n      <inroomdescription><![CDATA[{if sword.parent=demon: <br/>The demon is carrying a sword.<br/>}]]></inroomdescription>\r\n      <object name=\"sword\">\r\n        <inherit name=\"editor_object\" />\r\n        <take />\r\n        <alt type=\"stringlist\">\r\n          <value>demon's sword</value>\r\n        </alt>\r\n        <alias>demon's sword</alias>\r\n        <takemsg>{once: You take the demon's sword.}{notfirst: You pick it up.}</takemsg>\r\n      </object>\r\n    </object>\r\n  </object>\r\n</asl>\r\n```\r\n\r\n\r\n\r\n---\r\n### Resource:\r\n\r\nhttp://docs.textadventures.co.uk/quest/advanced_scope.html\r\n\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<h4>UPDATE</h4>\n<p>Click the link for a much more efficient method. (http://textadventures.co.uk/forum/quest/topic/n5o624fsz0_kcw0kh6z46a/dealing-with-npcs-possessions#8f079b35-1292-4b9a-8967-65f789f55dfc)</p>\n<details><summary>Click here to see the complicated way to do it.</summary>\n<h4>First turn on advanced scripts for the game:</h4>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30184919-30d62f30-93e5-11e7-86a0-13e7da676239.png\" alt=\"image\"></p>\n<h4>Then, click on the Advanced Scripts tab, and adjust your backdrop script to include objects in the NPC object.  (Substitute 'demon' with your NPC's name.)</h4>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30184943-464cd828-93e5-11e7-8f4f-3fc8b00b68ec.png\" alt=\"image\"></p>\n<h4>Make sure you set it up so the sword can be taken.</h4>\n<p><strong>( Also, to make it respond correctly (instead of saying 'You pick it up.' when you initially take it from an NPC), add a line with <code>{once: You take the demon's sword.}{notfirst: You pick it up.}</code>)</strong></p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30184994-68a85c44-93e5-11e7-80d4-193af7e2f284.png\" alt=\"image\"></p>\n<h4>Also make sure the sword has 'demon's sword' as the alias and in other names:</h4>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30185066-9f17128e-93e5-11e7-9958-ddc37df333dc.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30185080-ad480bce-93e5-11e7-8174-9819b2cc7584.png\" alt=\"image\"></p>\n<hr>\n<p>TRANSCRIPT:</p>\n<div style=\"background: black !important; color: white; padding: 12px\">\n<samp>\n<center><h3>NPC possessions</h3></center>\n<p>You are in a room.<br>\nYou can see demon.</p>\n<p>&gt; take the demon's sword<br>\nYou take the demon's sword.</p>\n<p>&gt; drop it<br>\nYou drop it.</p>\n<p>&gt; get it<br>\nYou pick it up.<br>\n</p>\n</samp></div>\n<hr>\n<h2>EXTRA STEP:</h2>\n<p><strong>Add an in-room description to your NPC that tells the player he is carrying a sword.</strong></p>\n<h4>Activate the feature be ticking the 'In-room Descriptions' box:</h4>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30185425-f0f03896-93e6-11e7-9180-8736ad9fc609.png\" alt=\"image\"></p>\n<h4>Then add a line like this to the appropriate field:</h4>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30185455-1b29b484-93e7-11e7-8194-c2497b6ded91.png\" alt=\"image\"></p>\n<hr>\n<p>TRANSCRIPT:</p>\n<div style=\"background: black !important; color: white; padding: 12px\">\n<samp>\n<center><h3>NPC possessions</h3></center>\n<p>You are in a room.<br>\nYou can see demon.</p>\n<p>The demon is carrying a sword.</p>\n<p>&gt; get the demon's sword<br>\nYou take the demon's sword.</p>\n<p>&gt; l<br>\nYou are in a room.<br>\nYou can see demon.</p>\n\n</samp></div>\n<hr>\n<p>Example game:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"NPC possessions\"&gt;\n    &lt;gameid&gt;51f2bdf9-9949-4a2a-9a6c-6cc593238a47&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;scopebackdrop type=\"script\"&gt;\n      foreach (o, GetDirectChildren(demon)) {\n        list add (items, o)\n      }\n    &lt;/scopebackdrop&gt;\n    &lt;appendobjectdescription /&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"demon\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"namedmale\" /&gt;\n      &lt;alt type=\"stringlist\" /&gt;\n      &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n      &lt;inroomdescription&gt;&lt;![CDATA[{if sword.parent=demon: &lt;br/&gt;The demon is carrying a sword.&lt;br/&gt;}]]&gt;&lt;/inroomdescription&gt;\n      &lt;object name=\"sword\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;take /&gt;\n        &lt;alt type=\"stringlist\"&gt;\n          &lt;value&gt;demon's sword&lt;/value&gt;\n        &lt;/alt&gt;\n        &lt;alias&gt;demon's sword&lt;/alias&gt;\n        &lt;takemsg&gt;{once: You take the demon's sword.}{notfirst: You pick it up.}&lt;/takemsg&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<h3>Resource:</h3>\n<p>http://docs.textadventures.co.uk/quest/advanced_scope.html</p>\n</details>\n\n",
      "PostDate": "2017-09-07T21:14:15.332203Z",
      "LastEditDate": "2017-09-08T03:04:58.2521075Z",
      "link": null
    },
    {
      "PostId": "6937f791-c46c-4620-a387-57ea6d02266e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Interesting :p I was just playing with something that's tangentially relevant. I'm also trying to take a box off the demon; who obviously doesn't want to give it up. Here's the 'take' script I have for the box:\r\n```\r\nif (demon.is_distracted) {\r\n  msg (\"You grab the box while the demon is distracted\")\r\n  this.parent = game.pov\r\n  this.take = true\r\n}\r\nelse {\r\n  dmg = GetRandomInt(5, 20)\r\n  take_damage (dmg, \"The demon sees you reaching for his box, and gives you a slap that makes your ears ring\")\r\n}\r\n```\r\nI figured that's the easiest way to make a box that is initially a challenge to obtain, but later on reverts to the standard behaviour.",
      "EditableFormat": "markdown",
      "HTML": "<p>Interesting :p I was just playing with something that's tangentially relevant. I'm also trying to take a box off the demon; who obviously doesn't want to give it up. Here's the 'take' script I have for the box:</p>\n<pre><code>if (demon.is_distracted) {\n  msg (\"You grab the box while the demon is distracted\")\n  this.parent = game.pov\n  this.take = true\n}\nelse {\n  dmg = GetRandomInt(5, 20)\n  take_damage (dmg, \"The demon sees you reaching for his box, and gives you a slap that makes your ears ring\")\n}\n</code></pre>\n<p>I figured that's the easiest way to make a box that is initially a challenge to obtain, but later on reverts to the standard behaviour.</p>\n\n",
      "PostDate": "2017-09-07T21:30:43.832662Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4dec5a14-9152-459d-b19c-f27d62419d7a",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@mrangel\r\n\r\nHey, that's pretty good!\r\n\r\n\r\n@Jador\r\n\r\nAn easier way would be just putting the sword in the room with the demon and making it scenery.\r\n\r\nThen, you wouldn't have to deal with the scope script, and you could put the in-room description on the sword.\r\n\r\nThrowing a take script in like mrangel posted would make it much more fun/challenging, too!  \r\n\r\n\r\nNOTE: You'd need a different script under ELSE, though.  It appears that mrangel has created a function he's calling in that second line.  <s>...and you'd probably want to put all of that under a ```firsttime``` as well.  Then set it up to just print the normal take message for taking the box once it has been moved.</s>",
      "EditableFormat": "markdown",
      "HTML": "<p>@mrangel</p>\n<p>Hey, that's pretty good!</p>\n<p>@Jador</p>\n<p>An easier way would be just putting the sword in the room with the demon and making it scenery.</p>\n<p>Then, you wouldn't have to deal with the scope script, and you could put the in-room description on the sword.</p>\n<p>Throwing a take script in like mrangel posted would make it much more fun/challenging, too!</p>\n<p>NOTE: You'd need a different script under ELSE, though.  It appears that mrangel has created a function he's calling in that second line.  <s>...and you'd probably want to put all of that under a <code>firsttime</code> as well.  Then set it up to just print the normal take message for taking the box once it has been moved.</s></p>\n\n",
      "PostDate": "2017-09-07T22:03:32.9607405Z",
      "LastEditDate": "2017-09-08T02:01:28.6391353Z",
      "link": null
    },
    {
      "PostId": "df2a7b3d-84f2-4a1e-b647-d63aff532dc6",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "KV: using a```firsttime``` block doesn't seem to make sense to me. The demon will keep on hitting you as long as you keep on trying to take his object, which seems like perfectly reasonable behaviour. Until you actually manage it, of course, at which point ```this.take = true``` replaces the script attribute with a boolean, restoring the default behaviour for an object that can be taken. I figured that was simpler.",
      "EditableFormat": "markdown",
      "HTML": "<p>KV: using a<code>firsttime</code> block doesn't seem to make sense to me. The demon will keep on hitting you as long as you keep on trying to take his object, which seems like perfectly reasonable behaviour. Until you actually manage it, of course, at which point <code>this.take = true</code> replaces the script attribute with a boolean, restoring the default behaviour for an object that can be taken. I figured that was simpler.</p>\n\n",
      "PostDate": "2017-09-07T22:56:45.2625895Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "30a1324d-1d3b-4f98-8568-02a9e6385241",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That scope script seems an awful lot of effort. I just made my NPCs containers (\"surface\" type, so they don't get open or close verbs, and change the prefix to \"Carrying\"). Then you can see his stuff when you look at him, and in the room description, depending on your settings.",
      "EditableFormat": "markdown",
      "HTML": "<p>That scope script seems an awful lot of effort. I just made my NPCs containers (\"surface\" type, so they don't get open or close verbs, and change the prefix to \"Carrying\"). Then you can see his stuff when you look at him, and in the room description, depending on your settings.</p>\n\n",
      "PostDate": "2017-09-08T01:29:39.012185Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "135fb814-cd09-4d59-bafa-66cb85d2b14e",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">using a firsttime block doesn't seem to make sense to me. The demon will keep on hitting you as long as you keep on trying to take his object...\r\n\r\nOh, I was running my fingertips without thinking it through (and, apparently, without reading your code through).  (Sorry!)  The ```this.take``` attribute is the way I'd do it.\r\n\r\n>That scope script seems an awful lot of effort. I just made my NPCs containers\r\n\r\nYep, yep!  This is probably the most efficient way to do it, but most new folks seem to be leery of using containers, so I went with the scope (for some reason -- even though it's complicated, too; ha-ha! I'm crazy).\r\n\r\nAll of the NPCs like this are transparent containers in my last game.  (Of course, that was because I had no clue how to use the scope functions back then. )\r\n\r\nRecently I've been using the scope script and altering the 'look' script to list the direct children.  It seemed to be about the same amount of work as fooling around with all the container settings.  Removing 'Open' and 'Close' from the verbs list and all that...\r\n \r\n...but making them surfaces is pretty darn slick!!!",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>using a firsttime block doesn't seem to make sense to me. The demon will keep on hitting you as long as you keep on trying to take his object...</p>\n</blockquote>\n<p>Oh, I was running my fingertips without thinking it through (and, apparently, without reading your code through).  (Sorry!)  The <code>this.take</code> attribute is the way I'd do it.</p>\n<blockquote>\n<p>That scope script seems an awful lot of effort. I just made my NPCs containers</p>\n</blockquote>\n<p>Yep, yep!  This is probably the most efficient way to do it, but most new folks seem to be leery of using containers, so I went with the scope (for some reason -- even though it's complicated, too; ha-ha! I'm crazy).</p>\n<p>All of the NPCs like this are transparent containers in my last game.  (Of course, that was because I had no clue how to use the scope functions back then. )</p>\n<p>Recently I've been using the scope script and altering the 'look' script to list the direct children.  It seemed to be about the same amount of work as fooling around with all the container settings.  Removing 'Open' and 'Close' from the verbs list and all that...</p>\n<p>...but making them surfaces is pretty darn slick!!!</p>\n\n",
      "PostDate": "2017-09-08T02:00:45.1512242Z",
      "LastEditDate": "2017-09-08T02:04:37.7355315Z",
      "link": null
    },
    {
      "PostId": "8f079b35-1292-4b9a-8967-65f789f55dfc",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "REVISED (thanks for the help, [mrangel](http://textadventures.co.uk/forum/quest/topic/n5o624fsz0_kcw0kh6z46a/dealing-with-npcs-possessions#30a1324d-1d3b-4f98-8568-02a9e6385241)!)\r\n\r\n---\r\n\r\n#### Go the the **Features** tab on the NPC, and select **Container**:\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30194491-2b844628-9419-11e7-89c1-ee6b6a7ca2dd.png)\r\n\r\n---\r\n#### Click on the **Container** tab that appears\r\n\r\n- Change it to Surface in the drop-down menu\r\n- Check both boxes (Hide children and List children)\r\n- Put your own custom messages in the input fields\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30194581-c381fb78-9419-11e7-93a1-c07e3c38d7d5.png)\r\n\r\n---\r\n#### Set up the sword\r\n\r\n- Set up 'other names' the game will understand as the sword (you need to put \"demon's sword\" here because you can't use an apostrophe in the object name) and add the description.  (I left the alias blank for now, so it will simply print 'sword'.  This will be changed to \"demon's sword\" once it has been taken the first time (see the next step).  This way, it will print 'He is carrying a sword' rather than 'He is carrying a demon's sword.')\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30194880-801af43c-941b-11e7-93fc-74dc68d84082.png)\r\n\r\n---\r\n#### Set up a script for taking the sword under the object's **Inventory** tab:\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30194682-490a0b14-941a-11e7-9127-59162e854bda.png)\r\n\r\n---\r\nHere's my example script for taking the sword:\r\n\r\n```\r\nif (not this.hasbeenmoved) {\r\n  msg (\"\\\"Not so fast!\\\" roars the demon as he moves the sword out of your reach.  \\\"A game first, I think!<br/><br/>\\\"Tell me a word that rhymes with DUCK!\\\"<br/><br/><center><h3>JUST ENTER THE WORD BY ITSELF AND PRESS <b>ENTER</b></h3></center>\")\r\n  get input {\r\n    result = LCase(result)\r\n    if (EndsWith(result, \"uck\")) {\r\n      msg (\"\\\"Well played, lad!\\\" exclaims the demon, handing you his sword and giving you a pat on the back.<br/>\")\r\n      MoveObject (this, player)\r\n      this.alias = \"demon's sword\"\r\n    }\r\n    else {\r\n      msg (\"\\\"Wrong!\\\" <br/><br/>The demon laughs at your lack of poetic skill and returns to doing nothing in particular.<br/>\")\r\n    }\r\n  }\r\n}\r\nelse {\r\n  msg (\"You pick it up.\")\r\n  MoveObject (this, player)\r\n}\r\n```\r\n\r\n\r\n---\r\n***TRANSCRIPT:***\r\n\r\n<div  style=\"background:black !important;color:white;padding:12px;border-radius:25px\">\r\n<samp>\r\n<center><h3>NPC possessions</h3></center>\r\n\r\nYou are in a room.\r\nYou can see a demon.\r\n\r\n\\> get the demon's sword\r\nI can't see that.\r\n\r\n\\> x demon\r\nThe demon is green, ugly, and generally nasty-looking.\r\n...and he doesn't appear to like it when you stare at him...\r\n\r\nHe is carrying a sword.\r\n\r\n\\> get the demon's sword\r\n\"Not so fast!\" roars the demon as he moves the sword out of your reach. \"A game first, I think!\r\n\r\n\"Tell me a word that rhymes with DUCK!\"\r\n\r\n### **JUST ENTER THE WORD BY ITSELF AND PRESS ENTER**\r\n\r\n\r\n\r\n**You entered: truck.**\r\n\r\n\"Well played, lad!\" exclaims the demon, handing you his sword and giving you a pat on the back.\r\n\r\n\r\n\\> i\r\nYou are carrying a demon's sword.\r\n\r\n\\> drop sword\r\nYou drop it.\r\n\r\n\\> get it\r\nYou pick it up.\r\n</samp>\r\n</div>\r\n\r\n---\r\n\r\n<details><summary>Click here to view the example game's code.</summary>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"NPC possessions\">\r\n    <gameid>51f2bdf9-9949-4a2a-9a6c-6cc593238a47</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <appendobjectdescription type=\"boolean\">false</appendobjectdescription>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"demon\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"namedmale\" />\r\n      <inherit name=\"surface\" />\r\n      <feature_container />\r\n      <hidechildren />\r\n      <listchildren />\r\n      <listchildrenprefix>He is carrying</listchildrenprefix>\r\n      <look><![CDATA[The demon is green, ugly, and generally nasty-looking.<br/>...and he doesn't appear to like it when you stare at him...<br/>]]></look>\r\n      <scenery type=\"boolean\">false</scenery>\r\n      <speak>\"No time to talk right now, lad,\" he says.</speak>\r\n      <contentsprefix>who is carrying </contentsprefix>\r\n      <object name=\"sword\">\r\n        <inherit name=\"editor_object\" />\r\n        <look><![CDATA[The Sword of Whatever - once thought to be a myth, but now you know that's not the case!<br/><br/>It's said to have been forged by WhoEvers back in the day, so it's probably a pretty good sword, right?<br/>]]></look>\r\n        <take type=\"script\"><![CDATA[\r\n          if (not this.hasbeenmoved) {\r\n            msg (\"\\\"Not so fast!\\\" roars the demon as he moves the sword out of your reach.  \\\"A game first, I think!<br/><br/>\\\"Tell me a word that rhymes with DUCK!\\\"<br/><br/><center><h3>JUST ENTER THE WORD BY ITSELF AND PRESS <b>ENTER</b></h3></center>\")\r\n            get input {\r\n              result = LCase(result)\r\n              if (EndsWith(result, \"uck\")) {\r\n                msg (\"<br><b>You entered: \" + result + \".<b><br/>\")\r\n                msg (\"\\\"Well played, lad!\\\" exclaims the demon, handing you his sword and giving you a pat on the back.<br/>\")\r\n                MoveObject (this, player)\r\n                this.alias = \"demon's sword\"\r\n              }\r\n              else {\r\n                msg (\"\\\"Wrong!\\\" <br/><br/>The demon laughs at your lack of poetic skill and returns to doing nothing in particular.<br/>\")\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            msg (\"You pick it up.\")\r\n            MoveObject (this, player)\r\n          }\r\n        ]]></take>\r\n        <alt type=\"stringlist\">\r\n          <value>demon's sword</value>\r\n        </alt>\r\n      </object>\r\n    </object>\r\n  </object>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n---\r\n\r\n#### **Resources:**\r\n\r\n[mrangel](http://textadventures.co.uk/user/view/15sc1UtrKE_AtrcyYd1vOw/mrangel): http://textadventures.co.uk/forum/quest/topic/n5o624fsz0_kcw0kh6z46a/dealing-with-npcs-possessions#30a1324d-1d3b-4f98-8568-02a9e6385241\r\n\r\nhttp://docs.textadventures.co.uk/quest/tutorial/using_containers.html",
      "EditableFormat": "markdown",
      "HTML": "<p>REVISED (thanks for the help, <a href=\"http://textadventures.co.uk/forum/quest/topic/n5o624fsz0_kcw0kh6z46a/dealing-with-npcs-possessions#30a1324d-1d3b-4f98-8568-02a9e6385241\">mrangel</a>!)</p>\n<hr>\n<h4>Go the the <strong>Features</strong> tab on the NPC, and select <strong>Container</strong>:</h4>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30194491-2b844628-9419-11e7-89c1-ee6b6a7ca2dd.png\" alt=\"image\"></p>\n<hr>\n<h4>Click on the <strong>Container</strong> tab that appears</h4>\n<ul>\n<li>Change it to Surface in the drop-down menu</li>\n<li>Check both boxes (Hide children and List children)</li>\n<li>Put your own custom messages in the input fields</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30194581-c381fb78-9419-11e7-93a1-c07e3c38d7d5.png\" alt=\"image\"></p>\n<hr>\n<h4>Set up the sword</h4>\n<ul>\n<li>Set up 'other names' the game will understand as the sword (you need to put \"demon's sword\" here because you can't use an apostrophe in the object name) and add the description.  (I left the alias blank for now, so it will simply print 'sword'.  This will be changed to \"demon's sword\" once it has been taken the first time (see the next step).  This way, it will print 'He is carrying a sword' rather than 'He is carrying a demon's sword.')</li>\n</ul>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30194880-801af43c-941b-11e7-93fc-74dc68d84082.png\" alt=\"image\"></p>\n<hr>\n<h4>Set up a script for taking the sword under the object's <strong>Inventory</strong> tab:</h4>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30194682-490a0b14-941a-11e7-9127-59162e854bda.png\" alt=\"image\"></p>\n<hr>\n<p>Here's my example script for taking the sword:</p>\n<pre><code>if (not this.hasbeenmoved) {\n  msg (\"\\\"Not so fast!\\\" roars the demon as he moves the sword out of your reach.  \\\"A game first, I think!&lt;br/&gt;&lt;br/&gt;\\\"Tell me a word that rhymes with DUCK!\\\"&lt;br/&gt;&lt;br/&gt;&lt;center&gt;&lt;h3&gt;JUST ENTER THE WORD BY ITSELF AND PRESS &lt;b&gt;ENTER&lt;/b&gt;&lt;/h3&gt;&lt;/center&gt;\")\n  get input {\n    result = LCase(result)\n    if (EndsWith(result, \"uck\")) {\n      msg (\"\\\"Well played, lad!\\\" exclaims the demon, handing you his sword and giving you a pat on the back.&lt;br/&gt;\")\n      MoveObject (this, player)\n      this.alias = \"demon's sword\"\n    }\n    else {\n      msg (\"\\\"Wrong!\\\" &lt;br/&gt;&lt;br/&gt;The demon laughs at your lack of poetic skill and returns to doing nothing in particular.&lt;br/&gt;\")\n    }\n  }\n}\nelse {\n  msg (\"You pick it up.\")\n  MoveObject (this, player)\n}\n</code></pre>\n<hr>\n<p><strong><em>TRANSCRIPT:</em></strong></p>\n<div style=\"background: black !important; color: white; padding: 12px\">\n<samp>\n<center><h3>NPC possessions</h3></center>\n<p>You are in a room.<br>\nYou can see a demon.</p>\n<p>&gt; get the demon's sword<br>\nI can't see that.</p>\n<p>&gt; x demon<br>\nThe demon is green, ugly, and generally nasty-looking.<br>\n...and he doesn't appear to like it when you stare at him...</p>\n<p>He is carrying a sword.</p>\n<p>&gt; get the demon's sword<br>\n\"Not so fast!\" roars the demon as he moves the sword out of your reach. \"A game first, I think!</p>\n<p>\"Tell me a word that rhymes with DUCK!\"</p>\n<h3><strong>JUST ENTER THE WORD BY ITSELF AND PRESS ENTER</strong></h3>\n<p><strong>You entered: truck.</strong></p>\n<p>\"Well played, lad!\" exclaims the demon, handing you his sword and giving you a pat on the back.</p>\n<p>&gt; i<br>\nYou are carrying a demon's sword.</p>\n<p>&gt; drop sword<br>\nYou drop it.</p>\n<p>&gt; get it<br>\nYou pick it up.<br>\n</p>\n</samp></div>\n<hr>\n<details><summary>Click here to view the example game's code.</summary>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"NPC possessions\"&gt;\n    &lt;gameid&gt;51f2bdf9-9949-4a2a-9a6c-6cc593238a47&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;appendobjectdescription type=\"boolean\"&gt;false&lt;/appendobjectdescription&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"demon\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"namedmale\" /&gt;\n      &lt;inherit name=\"surface\" /&gt;\n      &lt;feature_container /&gt;\n      &lt;hidechildren /&gt;\n      &lt;listchildren /&gt;\n      &lt;listchildrenprefix&gt;He is carrying&lt;/listchildrenprefix&gt;\n      &lt;look&gt;&lt;![CDATA[The demon is green, ugly, and generally nasty-looking.&lt;br/&gt;...and he doesn't appear to like it when you stare at him...&lt;br/&gt;]]&gt;&lt;/look&gt;\n      &lt;scenery type=\"boolean\"&gt;false&lt;/scenery&gt;\n      &lt;speak&gt;\"No time to talk right now, lad,\" he says.&lt;/speak&gt;\n      &lt;contentsprefix&gt;who is carrying &lt;/contentsprefix&gt;\n      &lt;object name=\"sword\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;look&gt;&lt;![CDATA[The Sword of Whatever - once thought to be a myth, but now you know that's not the case!&lt;br/&gt;&lt;br/&gt;It's said to have been forged by WhoEvers back in the day, so it's probably a pretty good sword, right?&lt;br/&gt;]]&gt;&lt;/look&gt;\n        &lt;take type=\"script\"&gt;&lt;![CDATA[\n          if (not this.hasbeenmoved) {\n            msg (\"\\\"Not so fast!\\\" roars the demon as he moves the sword out of your reach.  \\\"A game first, I think!&lt;br/&gt;&lt;br/&gt;\\\"Tell me a word that rhymes with DUCK!\\\"&lt;br/&gt;&lt;br/&gt;&lt;center&gt;&lt;h3&gt;JUST ENTER THE WORD BY ITSELF AND PRESS &lt;b&gt;ENTER&lt;/b&gt;&lt;/h3&gt;&lt;/center&gt;\")\n            get input {\n              result = LCase(result)\n              if (EndsWith(result, \"uck\")) {\n                msg (\"&lt;br&gt;&lt;b&gt;You entered: \" + result + \".&lt;b&gt;&lt;br/&gt;\")\n                msg (\"\\\"Well played, lad!\\\" exclaims the demon, handing you his sword and giving you a pat on the back.&lt;br/&gt;\")\n                MoveObject (this, player)\n                this.alias = \"demon's sword\"\n              }\n              else {\n                msg (\"\\\"Wrong!\\\" &lt;br/&gt;&lt;br/&gt;The demon laughs at your lack of poetic skill and returns to doing nothing in particular.&lt;br/&gt;\")\n              }\n            }\n          }\n          else {\n            msg (\"You pick it up.\")\n            MoveObject (this, player)\n          }\n        ]]&gt;&lt;/take&gt;\n        &lt;alt type=\"stringlist\"&gt;\n          &lt;value&gt;demon's sword&lt;/value&gt;\n        &lt;/alt&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n<hr>\n<h4><strong>Resources:</strong></h4>\n<p><a href=\"http://textadventures.co.uk/user/view/15sc1UtrKE_AtrcyYd1vOw/mrangel\">mrangel</a>: http://textadventures.co.uk/forum/quest/topic/n5o624fsz0_kcw0kh6z46a/dealing-with-npcs-possessions#30a1324d-1d3b-4f98-8568-02a9e6385241</p>\n<p>http://docs.textadventures.co.uk/quest/tutorial/using_containers.html</p>\n\n",
      "PostDate": "2017-09-08T03:02:35.655311Z",
      "LastEditDate": "2017-09-08T03:44:32.5379019Z",
      "link": null
    },
    {
      "PostId": "9fadd77d-42f6-482d-828d-accc0a097c39",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "EQUIPMENT SYSTEM BASICS:\r\n\r\n----------------------\r\n\r\nfor an equipment system:\r\n\r\nuse Object (reference/pointer) Attributes and/or Objectlist (reference/pointer) Attributes, Objects, and Object Types / Types / Inherited Attributes\r\n\r\n---------------------\r\n\r\nas for identification/flagging of what Object, there's a few methods:\r\n\r\n1. Your Object's naming/labeling convention/system:\r\n\r\nhttp://docs.textadventures.co.uk/quest/functions/#string\r\n\r\n'StartsWith', 'EndsWith', 'Mid', etc\r\n\r\n2. A normal Attribute: a String, Boolean, Integer, etc:\r\n\r\n'HasAttribute', 'HasXXX', 'GetAttribute', 'GetXXX'\r\n\r\n3. An Inherited Attribute (via using Object Types / Types):\r\n\r\n'DoesInherit'\r\n\r\n-------------------------------------------\r\n\r\nAlso, using Commands with the identification/flagging and scripting methods mentioned above, an example:\r\n\r\n```\r\n<object name=\"demon_sword\">\r\n</object>\r\n\r\n<object name=\"demon_axe\">\r\n</object>\r\n\r\n<object name=\"holy_sword\">\r\n</object>\r\n\r\n</object name=\"holy_axe\">\r\n</object>\r\n\r\n<command name=\"example_command\">\r\n  <pattern>example #object_parameter#</pattern>\r\n  <script>\r\n    if (StartsWith (object_parameter.name, \"demon\")) {\r\n      object_parameter.parent = game.pov\r\n      game.pov.equipment_object_attribute = object_parameter\r\n    }\r\n  </script>\r\n  <unresolved>Wrong input: the '#object#' Parameter, looks for that inputted Object ONLY within the room you're currently in, so either you typed in an Object that doesn't exist at all, or it just doesn't exist within the room you're currently in</unresolved>\r\n</command>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>EQUIPMENT SYSTEM BASICS:</p>\n<hr>\n<p>for an equipment system:</p>\n<p>use Object (reference/pointer) Attributes and/or Objectlist (reference/pointer) Attributes, Objects, and Object Types / Types / Inherited Attributes</p>\n<hr>\n<p>as for identification/flagging of what Object, there's a few methods:</p>\n<ol>\n<li>Your Object's naming/labeling convention/system:</li>\n</ol>\n<p>http://docs.textadventures.co.uk/quest/functions/#string</p>\n<p>'StartsWith', 'EndsWith', 'Mid', etc</p>\n<ol start=\"2\">\n<li>A normal Attribute: a String, Boolean, Integer, etc:</li>\n</ol>\n<p>'HasAttribute', 'HasXXX', 'GetAttribute', 'GetXXX'</p>\n<ol start=\"3\">\n<li>An Inherited Attribute (via using Object Types / Types):</li>\n</ol>\n<p>'DoesInherit'</p>\n<hr>\n<p>Also, using Commands with the identification/flagging and scripting methods mentioned above, an example:</p>\n<pre><code>&lt;object name=\"demon_sword\"&gt;\n&lt;/object&gt;\n\n&lt;object name=\"demon_axe\"&gt;\n&lt;/object&gt;\n\n&lt;object name=\"holy_sword\"&gt;\n&lt;/object&gt;\n\n&lt;/object name=\"holy_axe\"&gt;\n&lt;/object&gt;\n\n&lt;command name=\"example_command\"&gt;\n  &lt;pattern&gt;example #object_parameter#&lt;/pattern&gt;\n  &lt;script&gt;\n    if (StartsWith (object_parameter.name, \"demon\")) {\n      object_parameter.parent = game.pov\n      game.pov.equipment_object_attribute = object_parameter\n    }\n  &lt;/script&gt;\n  &lt;unresolved&gt;Wrong input: the '#object#' Parameter, looks for that inputted Object ONLY within the room you're currently in, so either you typed in an Object that doesn't exist at all, or it just doesn't exist within the room you're currently in&lt;/unresolved&gt;\n&lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2017-09-08T03:45:12.5441742Z",
      "LastEditDate": "2017-09-08T03:56:05.4586067Z",
      "link": null
    },
    {
      "PostId": "35236ee5-4745-4478-addb-b1d898305b3a",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, I didn't know about ```this.hasbeenmoved```. I think I prefer my version though… avoid wrapping an 'if' statement around everything, fewer levels of indentation in case the function later gets big enough that you're scrolling up and down to find the matching braces.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, I didn't know about <code>this.hasbeenmoved</code>. I think I prefer my version though… avoid wrapping an 'if' statement around everything, fewer levels of indentation in case the function later gets big enough that you're scrolling up and down to find the matching braces.</p>\n\n",
      "PostDate": "2017-09-08T09:02:16.6060125Z",
      "LastEditDate": "2017-09-08T09:03:43.7236779Z",
      "link": null
    }
  ]
}
