{
  "Topic": {
    "TopicId": "bhog9vukvkmrh7xedu1ceq",
    "ForumId": "10",
    "Title": "Can the text processor set flags?",
    "LastUpdated": "2017-07-25T16:27:47.3036153Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "1c053bb7-7e7c-43bb-8f02-d233d748823e",
      "UserId": 227864,
      "Username": "Talon",
      "AvatarUrl": "https://secure.gravatar.com/avatar/3b6191c9adc337e83fec8e293e3fc584?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I know you can now use the text processor to evaluate lots more things(Which has been a blast working with) but could I also use it to set flag/attributes,  for example if a random scene taken from a string list had happened I'd like for a flag to be set for something following up later but not directly connected\r\n\r\nIe, get a random string about a raccoon being seen running away, setting a flag for you to find stolen items in the Raccoons stash later if you find the right tree trunk",
      "EditableFormat": "markdown",
      "HTML": "<p>I know you can now use the text processor to evaluate lots more things(Which has been a blast working with) but could I also use it to set flag/attributes,  for example if a random scene taken from a string list had happened I'd like for a flag to be set for something following up later but not directly connected</p>\n<p>Ie, get a random string about a raccoon being seen running away, setting a flag for you to find stolen items in the Raccoons stash later if you find the right tree trunk</p>\n\n",
      "PostDate": "2017-07-25T16:27:47.3036153Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "85fb8dd6-5667-4aed-a1cf-1984a19ab18c",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You could do that in a function, and use eval to call the function. Have the function return something, if only \"\".",
      "EditableFormat": "markdown",
      "HTML": "<p>You could do that in a function, and use eval to call the function. Have the function return something, if only \"\".</p>\n\n",
      "PostDate": "2017-07-25T17:30:44.0588384Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "530413ca-d73f-4043-ad73-4d1691a73dce",
      "UserId": 227864,
      "Username": "Talon",
      "AvatarUrl": "https://secure.gravatar.com/avatar/3b6191c9adc337e83fec8e293e3fc584?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "hmm that might work, though still in my infancy of working with making new functions, Also  since i'm using it with a little idea i worked on  earlier (A list randomly but not repeatedly working) I suppose i could set the flag to be applied if the list no longer has the entry that passed.\r\n\r\n-That didn't work, think its time I actually work to learn about functions rather than jury rigging something",
      "EditableFormat": "markdown",
      "HTML": "<p>hmm that might work, though still in my infancy of working with making new functions, Also  since i'm using it with a little idea i worked on  earlier (A list randomly but not repeatedly working) I suppose i could set the flag to be applied if the list no longer has the entry that passed.</p>\n<p>-That didn't work, think its time I actually work to learn about functions rather than jury rigging something</p>\n\n",
      "PostDate": "2017-07-25T17:53:54.5166174Z",
      "LastEditDate": "2017-07-25T18:21:26.5696962Z",
      "link": null
    },
    {
      "PostId": "6b626527-f20b-482c-913c-3350364bca18",
      "UserId": 227864,
      "Username": "Talon",
      "AvatarUrl": "https://secure.gravatar.com/avatar/3b6191c9adc337e83fec8e293e3fc584?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "An attempt to make a function, \r\nFigured I would simplify my attempt to see if i can get it working in principle, the logic i'm trying to work is to check weather a  string list contains a string, if not a flag would be set (The actual string i'm using is much much more complex)\r\n~~~\r\n//{color:green: A large  skunk scurries into the bushes} is what i want to check to see if the string list still contains\r\n//player.N1 is the string list\r\n//if its found to contain the string  nothing happens, if not would set the flag.\r\nIf  ListContains (player.N1, {color:green: A large  skunk scurries into the bushes}) {\r\nif () {\r\n}\r\nelse {\r\n  msg (\"test pass Set flag\") \r\n } \r\n~~~\r\n\r\n\r\nwhere am i going wrong?",
      "EditableFormat": "markdown",
      "HTML": "<p>An attempt to make a function,<br>\nFigured I would simplify my attempt to see if i can get it working in principle, the logic i'm trying to work is to check weather a  string list contains a string, if not a flag would be set (The actual string i'm using is much much more complex)</p>\n<pre><code>//{color:green: A large  skunk scurries into the bushes} is what i want to check to see if the string list still contains\n//player.N1 is the string list\n//if its found to contain the string  nothing happens, if not would set the flag.\nIf  ListContains (player.N1, {color:green: A large  skunk scurries into the bushes}) {\nif () {\n}\nelse {\n&nbsp;&nbsp;msg (\"test pass Set flag\") \n } \n</code></pre>\n<p>where am i going wrong?</p>\n\n",
      "PostDate": "2017-07-27T00:59:05.4895031Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9eb7596a-f639-4a3b-9827-da9a439d93a0",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(filler for getting my edited post updated/posted)\r\n(again, filler for getting my edited post updated/posted)\r\n\r\n------------------\r\n\r\n@ Talon:\r\n\r\nYou can use Commands with text processor commands, which the Pixie+Jay created a cool 'level up' functionality in their 'level lib' library file, which increases/decreases (sets/re-sets) Attributes as you click on the text processor command's Command-hyperlink. As far as I know, this is the only way to adjust/set/re-set Attributes within a text processor command.\r\n\r\nhere's Pixie+Jay 'level lib' library file:  https://textadventures.co.uk/forum/samples/topic/4057/letting-the-player-set-attributes\r\n(it's really hard to get the syntax correct, took me a long time to figure it out, and I still have to reference this library file to get it right every time I try to do this type of coding, it's not easy. So, ask for help, and I or Pixie or whoever, will help you with it)\r\n\r\nYou can always use normal scripting to do this type of stuff, and then if you also still want, you can then use the text processor command of the new set/re-set Attribute (through using the normal scripting).\r\n\r\n----------\r\n\r\n@ Talon:\r\n\r\nsee if this works ... (the 'CDATA' tags probably aren't needed, and they might cause errors as well, so try removing them if you get errors / if it doesn't work, and see if it then works without the 'cdata' tags)\r\n\r\n```\r\n<game name=\"example_game\">\r\n  <attr name=\"test_flag\" type=\"boolean\">false</attr>\r\n  <attr name=\"start\" type=\"script\">\r\n    <![CDATA[\r\n      example_dynamic_function (player.N1, \"{color:green: A large skunk scurries into the bushes}\", game, \"test_flag\", true)\r\n      on ready {\r\n        msg (\"testing: is the 'game.test_flag' Attribute's Value = 'true', ???\")\r\n        msg (\"testing continued: and its value is: \" + this.test_flag)\r\n      }\r\n    ]]>\r\n  </attr>\r\n</game>\r\n\r\n<object name=\"player\">\r\n  <attr name=\"N1\" type=\"stringlist\">\r\n    <value>\r\n      <![CDATA[\r\n        {color:green: A large skunk scurries into the bushes}\r\n      ]]>\r\n    </value>\r\n    <value>BLAH_1</value>\r\n    <value>BLAH_2</value>\r\n  </attr>\r\n</object>\r\n\r\n<function name=\"example_dynamic_function\" parameters=\"name_of_object_dot_name_of_list_attribute_stringlist_parameter, list_item_check_string_parameter, name_of_object_object_parameter, name_of_attribute_string_parameter, set_value_parameter\">\r\n  if (not ListContains (name_of_object_dot_name_of_list_attribute_stringlist_parameter, list_item_check_string_parameter)) {\r\n    set (name_of_object_object_parameter, name_of_attribute_string_parameter, set_value_parameter)\r\n  }\r\n</function>\r\n```\r\n\r\n--------------\r\n\r\nask if you need help with how to transfer/use/put this code into your game's code and/or a new game's code, and/or ask if you got any questions about anything, and/or need anything explained, and/or need help with anything.\r\n\r\n(let me know if this works or not, if not, we'll see if we can work on figuring out how to get it to work, or maybe Pixie or who-ever will already post a solution and/or inform us that it's not possible to do --- this is unlikely, quest is very powerful)",
      "EditableFormat": "markdown",
      "HTML": "<p>(filler for getting my edited post updated/posted)<br>\n(again, filler for getting my edited post updated/posted)</p>\n<hr>\n<p>@ Talon:</p>\n<p>You can use Commands with text processor commands, which the Pixie+Jay created a cool 'level up' functionality in their 'level lib' library file, which increases/decreases (sets/re-sets) Attributes as you click on the text processor command's Command-hyperlink. As far as I know, this is the only way to adjust/set/re-set Attributes within a text processor command.</p>\n<p>here's Pixie+Jay 'level lib' library file:  https://textadventures.co.uk/forum/samples/topic/4057/letting-the-player-set-attributes<br>\n(it's really hard to get the syntax correct, took me a long time to figure it out, and I still have to reference this library file to get it right every time I try to do this type of coding, it's not easy. So, ask for help, and I or Pixie or whoever, will help you with it)</p>\n<p>You can always use normal scripting to do this type of stuff, and then if you also still want, you can then use the text processor command of the new set/re-set Attribute (through using the normal scripting).</p>\n<hr>\n<p>@ Talon:</p>\n<p>see if this works ... (the 'CDATA' tags probably aren't needed, and they might cause errors as well, so try removing them if you get errors / if it doesn't work, and see if it then works without the 'cdata' tags)</p>\n<pre><code>&lt;game name=\"example_game\"&gt;\n  &lt;attr name=\"test_flag\" type=\"boolean\"&gt;false&lt;/attr&gt;\n  &lt;attr name=\"start\" type=\"script\"&gt;\n    &lt;![CDATA[\n      example_dynamic_function (player.N1, \"{color:green: A large skunk scurries into the bushes}\", game, \"test_flag\", true)\n      on ready {\n        msg (\"testing: is the 'game.test_flag' Attribute's Value = 'true', ???\")\n        msg (\"testing continued: and its value is: \" + this.test_flag)\n      }\n    ]]&gt;\n  &lt;/attr&gt;\n&lt;/game&gt;\n\n&lt;object name=\"player\"&gt;\n  &lt;attr name=\"N1\" type=\"stringlist\"&gt;\n    &lt;value&gt;\n      &lt;![CDATA[\n        {color:green: A large skunk scurries into the bushes}\n      ]]&gt;\n    &lt;/value&gt;\n    &lt;value&gt;BLAH_1&lt;/value&gt;\n    &lt;value&gt;BLAH_2&lt;/value&gt;\n  &lt;/attr&gt;\n&lt;/object&gt;\n\n&lt;function name=\"example_dynamic_function\" parameters=\"name_of_object_dot_name_of_list_attribute_stringlist_parameter, list_item_check_string_parameter, name_of_object_object_parameter, name_of_attribute_string_parameter, set_value_parameter\"&gt;\n  if (not ListContains (name_of_object_dot_name_of_list_attribute_stringlist_parameter, list_item_check_string_parameter)) {\n    set (name_of_object_object_parameter, name_of_attribute_string_parameter, set_value_parameter)\n  }\n&lt;/function&gt;\n</code></pre>\n<hr>\n<p>ask if you need help with how to transfer/use/put this code into your game's code and/or a new game's code, and/or ask if you got any questions about anything, and/or need anything explained, and/or need help with anything.</p>\n<p>(let me know if this works or not, if not, we'll see if we can work on figuring out how to get it to work, or maybe Pixie or who-ever will already post a solution and/or inform us that it's not possible to do --- this is unlikely, quest is very powerful)</p>\n\n",
      "PostDate": "2017-07-27T01:34:09.8619555Z",
      "LastEditDate": "2017-07-27T02:30:08.4916825Z",
      "link": null
    },
    {
      "PostId": "cfa23e79-20d7-4157-b367-a3b01c30aad6",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Your code:\r\n\r\n```\r\n//{color:green: A large  skunk scurries into the bushes} is what i want to check to see if the string list still contains\r\n//player.N1 is the string list\r\n//if its found to contain the string  nothing happens, if not would set the flag.\r\nIf  ListContains (player.N1, {color:green: A large  skunk scurries into the bushes}) {\r\nif () {\r\n}\r\nelse {\r\n  msg (\"test pass Set flag\") \r\n } \r\n```\r\n\r\nA slight variation of HK's code (with your stuff plugged in):\r\n\r\n**This is to be plugged into Code View only, not a text input field. I put it on the room description in this example.**\r\n```\r\nif (ListContains (player.N1, \"{color:green: A large  skunk scurries into the bushes}\")) {\r\n  msg (\"test pass Set flag\")\r\n}\r\nelse {\r\n  msg (\"{color:green: A large  skunk scurries into the bushes}\")\r\n  list add (player.N1, \"{color:green: A large  skunk scurries into the bushes}\")\r\n}\r\n```\r\n\r\n>You are in a room.\r\n<span style=\"color:green\">A large skunk scurries into the bushes</span>\r\n\r\n>\\> look\r\nYou are in a room.\r\ntest pass Set flag\r\n\r\n>\\> l\r\nYou are in a room.\r\ntest pass Set flag\r\n\r\n---\r\n![image](https://user-images.githubusercontent.com/27799208/28653872-b1f585f4-7255-11e7-90bc-dabeaa03b079.png)\r\n\r\n---\r\n\r\nHere's the code view of the entire (very <sub>small</sub>) example game:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"n1\">\r\n    <gameid>53a13aa2-091c-45e9-b0fe-ce8851db218f</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description type=\"script\">\r\n      if (ListContains (player.N1, \"{color:green: A large  skunk scurries into the bushes}\")) {\r\n        msg (\"test pass Set flag\")\r\n      }\r\n      else {\r\n        msg (\"{color:green: A large  skunk scurries into the bushes}\")\r\n        list add (player.N1, \"{color:green: A large  skunk scurries into the bushes}\")\r\n      }\r\n    </description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <N1 type=\"stringlist\" />\r\n    </object>\r\n  </object>\r\n</asl>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Your code:</p>\n<pre><code>//{color:green: A large  skunk scurries into the bushes} is what i want to check to see if the string list still contains\n//player.N1 is the string list\n//if its found to contain the string  nothing happens, if not would set the flag.\nIf  ListContains (player.N1, {color:green: A large  skunk scurries into the bushes}) {\nif () {\n}\nelse {\n  msg (\"test pass Set flag\") \n } \n</code></pre>\n<p>A slight variation of HK's code (with your stuff plugged in):</p>\n<p><strong>This is to be plugged into Code View only, not a text input field. I put it on the room description in this example.</strong></p>\n<pre><code>if (ListContains (player.N1, \"{color:green: A large  skunk scurries into the bushes}\")) {\n  msg (\"test pass Set flag\")\n}\nelse {\n  msg (\"{color:green: A large  skunk scurries into the bushes}\")\n  list add (player.N1, \"{color:green: A large  skunk scurries into the bushes}\")\n}\n</code></pre>\n<blockquote>\n<p>You are in a room.<br>\n<span style=\"color: green\">A large skunk scurries into the bushes</span></p>\n</blockquote>\n<blockquote>\n<p>&gt; look<br>\nYou are in a room.<br>\ntest pass Set flag</p>\n</blockquote>\n<blockquote>\n<p>&gt; l<br>\nYou are in a room.<br>\ntest pass Set flag</p>\n</blockquote>\n<hr>\n<p><img src=\"https://user-images.githubusercontent.com/27799208/28653872-b1f585f4-7255-11e7-90bc-dabeaa03b079.png\" alt=\"image\"></p>\n<hr>\n<p>Here's the code view of the entire (very <sub>small</sub>) example game:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"n1\"&gt;\n    &lt;gameid&gt;53a13aa2-091c-45e9-b0fe-ce8851db218f&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description type=\"script\"&gt;\n      if (ListContains (player.N1, \"{color:green: A large  skunk scurries into the bushes}\")) {\n        msg (\"test pass Set flag\")\n      }\n      else {\n        msg (\"{color:green: A large  skunk scurries into the bushes}\")\n        list add (player.N1, \"{color:green: A large  skunk scurries into the bushes}\")\n      }\n    &lt;/description&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;N1 type=\"stringlist\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2017-07-27T03:52:47.0158749Z",
      "LastEditDate": "2017-07-27T03:59:41.8315939Z",
      "link": null
    }
  ]
}
