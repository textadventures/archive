{
  "Topic": {
    "TopicId": "5osmvx3giekbieokebi7hg",
    "ForumId": "10",
    "Title": "About limiting taken Objects [Solved]",
    "LastUpdated": "2019-05-29T16:50:33.9077024Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "b554a7c9-87bb-4fb9-b2a5-333c6d2699a2",
      "UserId": 421655,
      "Username": "Wallanda",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm fairly new to Quest and coding in general, and probably getting ahead of myself with this...\r\nI'm trying to make a sort of RPG, but I hit a wall trying to figure out how to limit the things the player can take before moving on.\r\nLike, I want them to pick 2 things from a selection of items and once they do - force them to the next stage of the story with those items in their inventory.\r\n\r\nThanks for any help in advance!",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm fairly new to Quest and coding in general, and probably getting ahead of myself with this...<br>\nI'm trying to make a sort of RPG, but I hit a wall trying to figure out how to limit the things the player can take before moving on.<br>\nLike, I want them to pick 2 things from a selection of items and once they do - force them to the next stage of the story with those items in their inventory.</p>\n<p>Thanks for any help in advance!</p>\n\n",
      "PostDate": "2019-05-29T16:50:33.9077024Z",
      "LastEditDate": "2019-06-02T09:26:25.9674768Z",
      "link": null
    },
    {
      "PostId": "4ec45940-1cce-42df-965e-f8d0da74db4b",
      "UserId": 381795,
      "Username": "devilmaymoan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "there is probably a better way to do this but you could trigger a menu that asks which combination of objects they want to take.\r\n\r\nobject 1+2\r\n              1+3\r\n              2+3 \r\nand once the selection is made move the 2 object to the player inventory and then move the player to the next room\r\n\r\nwould look something like this\r\n\r\n```msg (\"There is 3 things in the room but you can only take 2 of them with you.\")\r\nobjchoice = split(\"hat and vest;vest and glove;hat and glove\", \";\")\r\nShowMenu (\"What do you want to take?\", objchoice, false) {\r\n  switch (result) {\r\n    case (\"vest and glove\") {\r\n      msg (\"you chose the vest and glove.\")\r\n      MoveObject (glove, player)\r\n      MoveObject (vest, player)\r\n      MoveObject (player, room2)\r\n    }\r\n    case (\"hat and glove\") {\r\n      msg (\"you chose the hat and glove.\")\r\n      MoveObject (hat, player)\r\n      MoveObject (glove, player)\r\n      MoveObject (player, room2)\r\n    }\r\n    case (\"hat and vest\") {\r\n      msg (\"you chose the hat and vest.\")\r\n      MoveObject (hat, player)\r\n      MoveObject (vest, player)\r\n      MoveObject (player, room2)\r\n    }\r\n  }\r\n}",
      "EditableFormat": "markdown",
      "HTML": "<p>there is probably a better way to do this but you could trigger a menu that asks which combination of objects they want to take.</p>\n<p>object 1+2<br>\n1+3<br>\n2+3<br>\nand once the selection is made move the 2 object to the player inventory and then move the player to the next room</p>\n<p>would look something like this</p>\n<pre><code>objchoice = split(\"hat and vest;vest and glove;hat and glove\", \";\")\nShowMenu (\"What do you want to take?\", objchoice, false) {\n  switch (result) {\n    case (\"vest and glove\") {\n      msg (\"you chose the vest and glove.\")\n      MoveObject (glove, player)\n      MoveObject (vest, player)\n      MoveObject (player, room2)\n    }\n    case (\"hat and glove\") {\n      msg (\"you chose the hat and glove.\")\n      MoveObject (hat, player)\n      MoveObject (glove, player)\n      MoveObject (player, room2)\n    }\n    case (\"hat and vest\") {\n      msg (\"you chose the hat and vest.\")\n      MoveObject (hat, player)\n      MoveObject (vest, player)\n      MoveObject (player, room2)\n    }\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2019-05-29T19:09:34.4587606Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "690a8af8-651a-488d-b163-8bd0d9cd5e9b",
      "UserId": 381795,
      "Username": "devilmaymoan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "you can script that in the room1 description and put the 3 object in a object or hidden room. when the player make a choice he will receive the items and be moved to room 2 .\r\n\r\nthere is no chance of him taking anything since the object are not there with him in the room.",
      "EditableFormat": "markdown",
      "HTML": "<p>you can script that in the room1 description and put the 3 object in a object or hidden room. when the player make a choice he will receive the items and be moved to room 2 .</p>\n<p>there is no chance of him taking anything since the object are not there with him in the room.</p>\n\n",
      "PostDate": "2019-05-29T19:16:06.1738143Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "07d2fa31-3302-4bf8-9c18-8a2c0ba55062",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If it's objects in the first room, then I'd say put a custom \"take\" command in that room. It will run instead of the default take command as long as the player is in that room.\r\n\r\nI'd copy the pattern from the built-in take command, to make sure it matches all the same cases. And then give it a script like this:\r\n\r\n```\r\n// A list of objects - in case there's objects in the room that can't be taken\r\nlimited_objects = Split(\"bell;book;candle;hat;tea\")\r\n\r\n// how many the player can take:\r\nobjects_to_take = 3\r\n\r\n// take the object they've selected\r\nDoTake (object, false)\r\n\r\n// check if they've got too many objects\r\nforeach (obj, limited_objects) {\r\n  if (Contains (game.pov, GetObject (obj))) {\r\n    objects_to_take = objects_to_take - 1\r\n  }\r\n}\r\n\r\nif (objects_to_take < 0) {\r\n  msg (\"This shouldn't be possible, but you've taken too many objects. Please drop one.\")\r\n}\r\nelse if (objects_to_take = 0) {\r\n  msg (\"That's it!\")\r\n  MoveObject (game.pov, the next room)\r\n}\r\nelse {\r\n  msg (\"You can take \" + objects_to_take + \" more objects.\")\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>If it's objects in the first room, then I'd say put a custom \"take\" command in that room. It will run instead of the default take command as long as the player is in that room.</p>\n<p>I'd copy the pattern from the built-in take command, to make sure it matches all the same cases. And then give it a script like this:</p>\n<pre><code>// A list of objects - in case there's objects in the room that can't be taken\nlimited_objects = Split(\"bell;book;candle;hat;tea\")\n\n// how many the player can take:\nobjects_to_take = 3\n\n// take the object they've selected\nDoTake (object, false)\n\n// check if they've got too many objects\nforeach (obj, limited_objects) {\n  if (Contains (game.pov, GetObject (obj))) {\n    objects_to_take = objects_to_take - 1\n  }\n}\n\nif (objects_to_take &lt; 0) {\n  msg (\"This shouldn't be possible, but you've taken too many objects. Please drop one.\")\n}\nelse if (objects_to_take = 0) {\n  msg (\"That's it!\")\n  MoveObject (game.pov, the next room)\n}\nelse {\n  msg (\"You can take \" + objects_to_take + \" more objects.\")\n}\n</code></pre>\n\n",
      "PostDate": "2019-05-29T21:39:35.9619017Z",
      "LastEditDate": "2019-05-29T21:40:07.2956033Z",
      "link": null
    },
    {
      "PostId": "ed057477-5a51-46bd-97bf-3c66e0b4ffca",
      "UserId": 421655,
      "Username": "Wallanda",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Update:\r\n\r\nAlright, so\r\n-  devilmaymoan's option works, but there's way too many combinations for the game screen. I'm having the player choose from several weapons and there's _quite a number_ of them.\r\nI'll explore that code a little more and, if anything, I'll chop down the number of given weapons for comfort.\r\n\r\n- mrangel's looks to be exactly what I need, but when I try to configure it with my own objects and rooms the game shows ''Error compiling expression 'object': Unknown object or variable 'object' ''.\r\n\r\nIt might be that it's messing with my code to give the player a shortsword if they choose to err ''take/pick'' ransack the Swords pile. Once again, I'm a noob, still learning stuff.",
      "EditableFormat": "markdown",
      "HTML": "<p>Update:</p>\n<p>Alright, so</p>\n<ul>\n<li>\n<p>devilmaymoan's option works, but there's way too many combinations for the game screen. I'm having the player choose from several weapons and there's <em>quite a number</em> of them.<br>\nI'll explore that code a little more and, if anything, I'll chop down the number of given weapons for comfort.</p>\n</li>\n<li>\n<p>mrangel's looks to be exactly what I need, but when I try to configure it with my own objects and rooms the game shows ''Error compiling expression 'object': Unknown object or variable 'object' ''.</p>\n</li>\n</ul>\n<p>It might be that it's messing with my code to give the player a shortsword if they choose to err ''take/pick'' ransack the Swords pile. Once again, I'm a noob, still learning stuff.</p>\n\n",
      "PostDate": "2019-05-30T08:55:56.7543687Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "75d4e456-dcf3-4493-9d74-c2fa1b9293f5",
      "UserId": 282833,
      "Username": "Io",
      "AvatarUrl": "http://i.imgur.com/XVmdocTb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\nmrangel's looks to be exactly what I need, but when I try to configure it with my own objects and rooms the game shows ''Error compiling expression 'object': Unknown object or variable 'object' ''.\r\n```\r\n\r\nI don't think you're supposed to actually put 'object'. Put the name of the object in question.",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>mrangel's looks to be exactly what I need, but when I try to configure it with my own objects and rooms the game shows ''Error compiling expression 'object': Unknown object or variable 'object' ''.\n</code></pre>\n<p>I don't think you're supposed to actually put 'object'. Put the name of the object in question.</p>\n\n",
      "PostDate": "2019-05-30T16:01:06.5069349Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "aaf0cca2-a01c-4a3e-bbad-6146fd542edc",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hmm… I'm not quite sure, but I would assume the pattern for that command is something like `^(get|take|pick up) (?<object>.+)$` if it's a regular expression? `object` should be defined.\r\n\r\n> It might be that it's messing with my code to give the player a shortsword if they choose to err ''take/pick'' ransack the Swords pile.\r\n\r\nThat's why I called `DoTake` to do the actual picking up; so that objects with custom take scripts still work fine.\r\nIf you've got any other commands which cause the player to gain items, you'd presumably want to change those too.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hmm… I'm not quite sure, but I would assume the pattern for that command is something like <code>^(get|take|pick up) (?&lt;object&gt;.+)$</code> if it's a regular expression? <code>object</code> should be defined.</p>\n<blockquote>\n<p>It might be that it's messing with my code to give the player a shortsword if they choose to err ''take/pick'' ransack the Swords pile.</p>\n</blockquote>\n<p>That's why I called <code>DoTake</code> to do the actual picking up; so that objects with custom take scripts still work fine.<br>\nIf you've got any other commands which cause the player to gain items, you'd presumably want to change those too.</p>\n\n",
      "PostDate": "2019-05-30T16:18:30.7687184Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "52229a2d-d67e-4851-9159-46f5e9911367",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here’s what I have done in the past (and I will clarify if needed (just ask)):\r\n\r\nI create a integer counter that subtracts from 2.  Then I subtract one from that counter if an item is picked up and add one to the counter if the item is dropped.  Once two items are picked up the counter reaches zero and I put an if counter equal to zero script on the take command as well prohibiting the player from picking up of a third item.\r\n\r\nThis works well given that you either close the room, remove the items in question, close the shop... basically you would need to prevent the player from carrying things wherever they want, dropping them, and picking up more than a second item.\r\n\r\nSounds like it might be messy but it is the method that works for me.  Let me know if you need to see examples or code.",
      "EditableFormat": "markdown",
      "HTML": "<p>Here’s what I have done in the past (and I will clarify if needed (just ask)):</p>\n<p>I create a integer counter that subtracts from 2.  Then I subtract one from that counter if an item is picked up and add one to the counter if the item is dropped.  Once two items are picked up the counter reaches zero and I put an if counter equal to zero script on the take command as well prohibiting the player from picking up of a third item.</p>\n<p>This works well given that you either close the room, remove the items in question, close the shop... basically you would need to prevent the player from carrying things wherever they want, dropping them, and picking up more than a second item.</p>\n<p>Sounds like it might be messy but it is the method that works for me.  Let me know if you need to see examples or code.</p>\n\n",
      "PostDate": "2019-05-30T19:11:05.3365222Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3d6b7f1a-746c-47ce-8cdb-46bf42427909",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Do you want to know how I've done it? I 've created an attribute, like ```player.items = 0``` and everytime you take an object, add one to it ```player.items = player.items + 1```.\r\n\r\nThen you change the take object's command to a different script.\r\n```\r\nif (player.items > 9) {\r\n  player.items = player.items + 1\r\n  add to inventory (object)\r\n}\r\nelse {\r\n  msg ( \"You are carrying too many items.\" )\r\n```\r\n\r\nYou will need to change the drop command's code as well, to subtract one item from the attribute. ```player.items = player.items - 1```\r\n\r\nEdit: Needed to add ` things",
      "EditableFormat": "markdown",
      "HTML": "<p>Do you want to know how I've done it? I 've created an attribute, like <code>player.items = 0</code> and everytime you take an object, add one to it <code>player.items = player.items + 1</code>.</p>\n<p>Then you change the take object's command to a different script.</p>\n<pre><code>if (player.items &gt; 9) {\n  player.items = player.items + 1\n  add to inventory (object)\n}\nelse {\n  msg ( \"You are carrying too many items.\" )\n</code></pre>\n<p>You will need to change the drop command's code as well, to subtract one item from the attribute. <code>player.items = player.items - 1</code></p>\n<p>Edit: Needed to add ` things</p>\n\n",
      "PostDate": "2019-05-30T19:21:55.5985325Z",
      "LastEditDate": "2019-05-30T19:22:47.9295772Z",
      "link": null
    },
    {
      "PostId": "52bff1fe-d6a7-46d7-9b7b-d7ad84151a94",
      "UserId": 421655,
      "Username": "Wallanda",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I took another look over mrangel's suggestion. I thought I figured it out, but now the problems are:\r\n\r\n- When I Play the game and choose the Swords pile it says '' You can't choose it.''\r\n- _Meanwhile for the other piles it drops an  ''Error running script: Too many parameters passed to DoTake function - 10 passed, but only 2 expected''_  **ok nvm solved that _somehow_**\r\n\r\nNow I just have all the choices giving me the result that I can't choose them...\r\n\r\nEdit: Apparently there was a Verb with ''\"You can't choose \" + object.article + \".\" Expression, which I don't remember creating. Alright, well, obviously I'm loosing my mind here.\r\n Taking out the Verb it now prints that it doesn't understand my command in that room so I'm at a loss\r\n\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I took another look over mrangel's suggestion. I thought I figured it out, but now the problems are:</p>\n<ul>\n<li>When I Play the game and choose the Swords pile it says '' You can't choose it.''</li>\n<li><em>Meanwhile for the other piles it drops an  ''Error running script: Too many parameters passed to DoTake function - 10 passed, but only 2 expected''</em>  <strong>ok nvm solved that <em>somehow</em></strong></li>\n</ul>\n<p>Now I just have all the choices giving me the result that I can't choose them...</p>\n<p>Edit: Apparently there was a Verb with ''\"You can't choose \" + object.article + \".\" Expression, which I don't remember creating. Alright, well, obviously I'm loosing my mind here.<br>\nTaking out the Verb it now prints that it doesn't understand my command in that room so I'm at a loss</p>\n\n",
      "PostDate": "2019-06-01T16:22:19.3227174Z",
      "LastEditDate": "2019-06-01T17:13:11.4338024Z",
      "link": null
    },
    {
      "PostId": "8511f1f3-b8d6-401d-914c-3c07d0032bc1",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "What is the pattern for your custom take command?\r\n\r\nIf it's saying that it doesn't understand your command, possibly the pattern isn't matching the command you typed.\r\n\r\nCan you show us the game? Might be easier to find the issue that way.",
      "EditableFormat": "markdown",
      "HTML": "<p>What is the pattern for your custom take command?</p>\n<p>If it's saying that it doesn't understand your command, possibly the pattern isn't matching the command you typed.</p>\n<p>Can you show us the game? Might be easier to find the issue that way.</p>\n\n",
      "PostDate": "2019-06-01T22:58:26.4431424Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bae58489-baa8-48dc-9f0b-01c07dc1dede",
      "UserId": 421655,
      "Username": "Wallanda",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh wait! It works!\r\nThere WAS a mistake in the take command pattern I had set. The facepalm was mighty...\r\nThe correct pattern that now let's the whole thing work: \r\n```take #object#; get #object#; pick up #object#; Choose #object#```\r\n\r\nThanks, mrangel!",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh wait! It works!<br>\nThere WAS a mistake in the take command pattern I had set. The facepalm was mighty...<br>\nThe correct pattern that now let's the whole thing work:<br>\n<code>take #object#; get #object#; pick up #object#; Choose #object#</code></p>\n<p>Thanks, mrangel!</p>\n\n",
      "PostDate": "2019-06-02T09:25:10.3143176Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
