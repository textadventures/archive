{
  "Topic": {
    "TopicId": "ieb-c_i8mesyquoqkjctdq",
    "ForumId": "10",
    "Title": "Error with custom function",
    "LastUpdated": "2024-11-22T14:34:36.7180457Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "bb01c30d-a6b9-44a6-9c5b-749efca469a3",
      "UserId": 200638,
      "Username": "Bttflover5566",
      "AvatarUrl": "https://i.imgur.com/vfnd4Bhb.jpeg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello, so I am making a npc score function for npc relationships but the function won't work because it won't recognize the npc object and says its an unknown object or variable.  I am using the npclib and the parameters of the function are obj and npc. \r\n\r\n```nscoredict = NewStringDictionary()\r\nd = NewStringDictionary()\r\ndictionary add (d, \"nscore\", nscore)\r\nobject.parent = npc\r\nnpc.parent = obj\r\nset (npc, \"score\", 10)\r\nset (npc, \"maxscore\", 20)\r\nnscore = npc.score + \"/\" + npc.maxscore\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello, so I am making a npc score function for npc relationships but the function won't work because it won't recognize the npc object and says its an unknown object or variable.  I am using the npclib and the parameters of the function are obj and npc.</p>\n<pre><code>d = NewStringDictionary()\ndictionary add (d, \"nscore\", nscore)\nobject.parent = npc\nnpc.parent = obj\nset (npc, \"score\", 10)\nset (npc, \"maxscore\", 20)\nnscore = npc.score + \"/\" + npc.maxscore\n</code></pre>\n\n",
      "PostDate": "2024-11-22T14:34:36.7180457Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "63d5b5fa-c2f7-451a-b408-cd1237a518b3",
      "UserId": 703786,
      "Username": "TextMisadventures",
      "AvatarUrl": "https://i.imgur.com/HoT06tvb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello.\r\n\r\nWhat are the function's parameters?\r\n\r\nIf that is your entire function's script, the parameters would need to be `nscore`, `object`,`npc`, and `obj`. Otherwise, none of those variables are defined in that script.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello.</p>\n<p>What are the function's parameters?</p>\n<p>If that is your entire function's script, the parameters would need to be <code>nscore</code>, <code>object</code>,<code>npc</code>, and <code>obj</code>. Otherwise, none of those variables are defined in that script.</p>\n\n",
      "PostDate": "2024-11-22T15:02:31.6013888Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "61f08048-de27-4e9d-8db7-64e125bfa521",
      "UserId": 200638,
      "Username": "Bttflover5566",
      "AvatarUrl": "https://i.imgur.com/vfnd4Bhb.jpeg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello, yes those are the parameters, but when I put all of those parameters in, it raises this error:\r\n\r\n```Error running script: Too few parameters passed to NpcScore function - only 2 passed, but 4 expected```\r\n\r\nSo I tried to fix it by removing parameters but it raised the other error",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello, yes those are the parameters, but when I put all of those parameters in, it raises this error:</p>\n<p><code>Error running script: Too few parameters passed to NpcScore function - only 2 passed, but 4 expected</code></p>\n<p>So I tried to fix it by removing parameters but it raised the other error</p>\n\n",
      "PostDate": "2024-11-22T15:20:17.3956962Z",
      "LastEditDate": "2024-11-22T15:24:58.6964645Z",
      "link": null
    },
    {
      "PostId": "ac657b9b-dfd8-4a66-aa4c-0f81faa6f5c1",
      "UserId": 703786,
      "Username": "TextMisadventures",
      "AvatarUrl": "https://i.imgur.com/HoT06tvb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you can copy the error it prints and paste  it here, we'd have a better idea of what is happening.\r\n\r\nIt might also help if we could see the code that is calling that function.\r\n\r\n---\r\n<pre><code>d = NewStringDictionary()\r\ndictionary add (d, \"nscore\", <b style=\"color:red\">nscore</b>)\r\n<b style=\"color:red\">object</b>.parent = <b style=\"color:red\">npc</b>\r\n<b style=\"color:red\">npc</b>.parent = <b style=\"color:red\">obj</b>\r\nset (<b style=\"color:red\">npc</b>, \"score\", 10)\r\nset (<b style=\"color:red\">npc</b>, \"maxscore\", 20)\r\n<b style=\"color:red\">nscore</b> = <b style=\"color:red\">npc</b>.score + \"/\" + <b style=\"color:red\">npc</b>.maxscore</code></pre>\r\n\r\n---\r\nEvery thing that is red could be problematic, depending on:\r\n- what all parameters were included when you created the function\r\n- what arguments are being passed when that function is called",
      "EditableFormat": "markdown",
      "HTML": "<p>If you can copy the error it prints and paste  it here, we'd have a better idea of what is happening.</p>\n<p>It might also help if we could see the code that is calling that function.</p>\n<hr>\n<pre><code>d = NewStringDictionary()\ndictionary add (d, \"nscore\", <b style=\"color: red\">nscore</b>)\n<b style=\"color: red\">object</b>.parent = <b style=\"color: red\">npc</b>\n<b style=\"color: red\">npc</b>.parent = <b style=\"color: red\">obj</b>\nset (<b style=\"color: red\">npc</b>, \"score\", 10)\nset (<b style=\"color: red\">npc</b>, \"maxscore\", 20)\n<b style=\"color: red\">nscore</b> = <b style=\"color: red\">npc</b>.score + \"/\" + <b style=\"color: red\">npc</b>.maxscore</code></pre>\n<hr>\n<p>Every thing that is red could be problematic, depending on:</p>\n<ul>\n<li>what all parameters were included when you created the function</li>\n<li>what arguments are being passed when that function is called</li>\n</ul>\n\n",
      "PostDate": "2024-11-22T16:25:12.2385915Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7af40d3f-8e5e-489c-b689-579680955bd2",
      "UserId": 703786,
      "Username": "TextMisadventures",
      "AvatarUrl": "https://i.imgur.com/HoT06tvb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Let's say (just for example's sake) that function's name is `Foo`.\r\n\r\nIn full code view, with each of those parameters included, the way you have posted it and explained it, that probably looks like this:\r\n<pre><code>   <span style=\"color:purple\">&lt;function</span> <span style=\"color:red\">name</span><span style=\"color:blue\">=\"Foo\"</span> <span style=\"color:red\">parameters</span><span style=\"color:blue\">=\"nscore, object, npc, obj\"</span><span style=\"color:purple\">></span>\r\n    d = NewStringDictionary()\r\n    dictionary add (d, \"nscore\", nscore)\r\n    object.parent =  npc\r\n    npc.parent = obj\r\n    set (npc, \"score\", 10)\r\n    set (npc, \"maxscore\", 20)\r\n    nscore = npc.score + \"/\" + npc.maxscore\r\n  <span style=\"color:purple\">&lt;/function></span></code></pre>\r\n\r\n---\r\nI'm not saying it <i>should</i> look like that, by the way. I'm just saying that's the way it seems like it would look as described.\r\n\r\n---\r\nThe code to call that would be something like:\r\n```\r\nFoo (\"42\", bar, Bob, room)\r\n```\r\n\r\nDepending on the objects `bar`, `Bob`, and `room` actually existing in the game.\r\n\r\n---\r\nIt would also better to use `object1` and `object2` rather than `object` and `obj`, to avoid confusion.\r\n\r\n---\r\nAlso, it looks like maybe you want `d` to do something, but I don't see that it does anything. And it doesn't exist after this script runs, because it is a local variable.\r\n\r\n---\r\nI don't know that `nscore` is actually being used either, really. And if you are passing an object attribute as this parameter, this function won't change that attribute. If that's the goal, you could add this after that last line of code:\r\n \r\n```\r\nset (npc, \"nscore\", nscore)\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Let's say (just for example's sake) that function's name is <code>Foo</code>.</p>\n<p>In full code view, with each of those parameters included, the way you have posted it and explained it, that probably looks like this:</p>\n<pre><code>   <span style=\"color: purple\">&lt;function</span> <span style=\"color: red\">name</span><span style=\"color: blue\">=\"Foo\"</span> <span style=\"color: red\">parameters</span><span style=\"color: blue\">=\"nscore, object, npc, obj\"</span><span style=\"color: purple\">&gt;</span>\n    d = NewStringDictionary()\n    dictionary add (d, \"nscore\", nscore)\n    object.parent =  npc\n    npc.parent = obj\n    set (npc, \"score\", 10)\n    set (npc, \"maxscore\", 20)\n    nscore = npc.score + \"/\" + npc.maxscore\n  <span style=\"color: purple\">&lt;/function&gt;</span></code></pre>\n<hr>\n<p>I'm not saying it <i>should</i> look like that, by the way. I'm just saying that's the way it seems like it would look as described.</p>\n<hr>\n<p>The code to call that would be something like:</p>\n<pre><code>Foo (\"42\", bar, Bob, room)\n</code></pre>\n<p>Depending on the objects <code>bar</code>, <code>Bob</code>, and <code>room</code> actually existing in the game.</p>\n<hr>\n<p>It would also better to use <code>object1</code> and <code>object2</code> rather than <code>object</code> and <code>obj</code>, to avoid confusion.</p>\n<hr>\n<p>Also, it looks like maybe you want <code>d</code> to do something, but I don't see that it does anything. And it doesn't exist after this script runs, because it is a local variable.</p>\n<hr>\n<p>I don't know that <code>nscore</code> is actually being used either, really. And if you are passing an object attribute as this parameter, this function won't change that attribute. If that's the goal, you could add this after that last line of code:</p>\n<pre><code>set (npc, \"nscore\", nscore)\n</code></pre>\n\n",
      "PostDate": "2024-11-22T16:25:52.5168628Z",
      "LastEditDate": "2024-11-22T16:33:21.480741Z",
      "link": null
    },
    {
      "PostId": "79fe853b-ad5b-43d9-a159-a1a69c248fdc",
      "UserId": 703786,
      "Username": "TextMisadventures",
      "AvatarUrl": "https://i.imgur.com/HoT06tvb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> `Error running script: Too few parameters passed to NpcScore function - only 2 passed, but 4 expected`\r\n\r\nWhat is the code you use to call `NpcScore`?",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p><code>Error running script: Too few parameters passed to NpcScore function - only 2 passed, but 4 expected</code></p>\n</blockquote>\n<p>What is the code you use to call <code>NpcScore</code>?</p>\n\n",
      "PostDate": "2024-11-22T16:37:13.2221887Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5a8baaff-f95d-46c8-8aae-c7fc04331ccf",
      "UserId": 200638,
      "Username": "Bttflover5566",
      "AvatarUrl": "https://i.imgur.com/vfnd4Bhb.jpeg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi, so the function is called NpcScore, the error raised was as mentioned  ```Error running script: Too few parameters passed to NpcScore function - only 2 passed, but 4 expected```\r\n\r\nand the code that calls the function is here: \r\n\r\n```\r\nNpcScore (npc, nscore)\r\nnpc.score = npc.score -1\r\nmsg (\"Your relationship with Tiffany has gone down by 1. \")\r\nmsg (nscore)\r\n```\r\n\r\nI was trying to add nscore to a string dictionary but I think I accidentally just made a new dictionary named \"d\" and nscore was supposed to display the npc score in a status attribute format by formatting it like npc.score/npc.maxscore so it would display like !/10 in a similar way to the player status score attribute. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi, so the function is called NpcScore, the error raised was as mentioned  <code>Error running script: Too few parameters passed to NpcScore function - only 2 passed, but 4 expected</code></p>\n<p>and the code that calls the function is here:</p>\n<pre><code>NpcScore (npc, nscore)\nnpc.score = npc.score -1\nmsg (\"Your relationship with Tiffany has gone down by 1. \")\nmsg (nscore)\n</code></pre>\n<p>I was trying to add nscore to a string dictionary but I think I accidentally just made a new dictionary named \"d\" and nscore was supposed to display the npc score in a status attribute format by formatting it like npc.score/npc.maxscore so it would display like !/10 in a similar way to the player status score attribute.</p>\n\n",
      "PostDate": "2024-11-22T16:40:52.9967042Z",
      "LastEditDate": "2024-11-22T16:41:35.2472925Z",
      "link": null
    },
    {
      "PostId": "1f3e0008-3bba-4a20-950c-bb59c4613b65",
      "UserId": 703786,
      "Username": "TextMisadventures",
      "AvatarUrl": "https://i.imgur.com/HoT06tvb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay, I see.\r\n\r\nWell, sort of, I think, haha. (I'm not making fun. It's hard to describe what we want code to do, and it's hard to share code without posting too much or not enough, haha.)\r\n\r\n```\r\n  // Create a new string dictionary\r\n    d = NewStringDictionary()\r\n  // Add an item to it\r\n    dictionary add (d, \"nscore\", nscore)\r\n  // That dictionary is never used again, and it does not exist once this script closes\r\n  // ---\r\n  // I'm assuming we are giving an object to an npc somewhere in this script\r\n    object.parent =  npc\r\n  // Then  we move the npc to a different location?\r\n    npc.parent = obj\r\n```\r\n\r\n---\r\nCan you post the first line of your function from full code view?\r\n\r\nIt should look something like this:\r\n<pre><code>   <span style=\"color:purple\">&lt;function</span> <span style=\"color:red\">name</span><span style=\"color:blue\">=\"Foo\"</span> <span style=\"color:red\">parameters</span><span style=\"color:blue\">=\"nscore, object, npc, obj\"</span><span style=\"color:purple\">></span></code></pre>",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay, I see.</p>\n<p>Well, sort of, I think, haha. (I'm not making fun. It's hard to describe what we want code to do, and it's hard to share code without posting too much or not enough, haha.)</p>\n<pre><code>  // Create a new string dictionary\n    d = NewStringDictionary()\n  // Add an item to it\n    dictionary add (d, \"nscore\", nscore)\n  // That dictionary is never used again, and it does not exist once this script closes\n  // ---\n  // I'm assuming we are giving an object to an npc somewhere in this script\n    object.parent =  npc\n  // Then  we move the npc to a different location?\n    npc.parent = obj\n</code></pre>\n<hr>\n<p>Can you post the first line of your function from full code view?</p>\n<p>It should look something like this:</p>\n<pre><code>   <span style=\"color: purple\">&lt;function</span> <span style=\"color: red\">name</span><span style=\"color: blue\">=\"Foo\"</span> <span style=\"color: red\">parameters</span><span style=\"color: blue\">=\"nscore, object, npc, obj\"</span><span style=\"color: purple\">&gt;</span></code></pre>\n\n",
      "PostDate": "2024-11-22T16:51:14.3758901Z",
      "LastEditDate": "2024-11-22T16:56:04.5115223Z",
      "link": null
    },
    {
      "PostId": "07398c58-b63a-463d-85e3-758dc9adfab0",
      "UserId": 200638,
      "Username": "Bttflover5566",
      "AvatarUrl": "https://i.imgur.com/vfnd4Bhb.jpeg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is the function code you asked for right?\r\n```<function name=\"NpcScore\" parameters=\"npc, obj, nscore, object\" type=\"int\">```\r\nI am trying to add a relationship score to npcs which is named \"nscore\" so I am basically setting a npc score for every npc with a max of 20\r\n\r\nI didn't mean to give any objects or move the npc I just wanted to have it so it defines the object in question as an npc and creates a score for that specific npc. But I am still figuring out how the function and parameter coding works and how the npclib library works and how to take said object that is an npc and add a score. \r\n\r\nIn other words I am trying to define the object which is a character so lets say the character is bob. I am trying to define the object \"bob\" as an npc and add an npc score to bob. \r\n\r\nBut what if I want to add it to all my npcs, thats what this function is supposed to do, when I run it, it is supposed to create a npc score for the npc in question (in this case bob).",
      "EditableFormat": "markdown",
      "HTML": "<p>This is the function code you asked for right?<br>\n<code>&lt;function name=\"NpcScore\" parameters=\"npc, obj, nscore, object\" type=\"int\"&gt;</code><br>\nI am trying to add a relationship score to npcs which is named \"nscore\" so I am basically setting a npc score for every npc with a max of 20</p>\n<p>I didn't mean to give any objects or move the npc I just wanted to have it so it defines the object in question as an npc and creates a score for that specific npc. But I am still figuring out how the function and parameter coding works and how the npclib library works and how to take said object that is an npc and add a score.</p>\n<p>In other words I am trying to define the object which is a character so lets say the character is bob. I am trying to define the object \"bob\" as an npc and add an npc score to bob.</p>\n<p>But what if I want to add it to all my npcs, thats what this function is supposed to do, when I run it, it is supposed to create a npc score for the npc in question (in this case bob).</p>\n\n",
      "PostDate": "2024-11-22T17:55:43.2559097Z",
      "LastEditDate": "2024-11-22T18:31:29.3179431Z",
      "link": null
    },
    {
      "PostId": "da899edd-c65b-4ffc-b05b-e29c7aa92511",
      "UserId": 200638,
      "Username": "Bttflover5566",
      "AvatarUrl": "https://i.imgur.com/vfnd4Bhb.jpeg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "From what I get, I don't need the obj and object parameters because it is just moving around bob and giving objects to bob so the function could be reduced to this\r\n```\r\n  </function>\r\n  <function name=\"NpcScore\" parameters=\"npc, nscore\" type=\"int\">\r\n    set (npc, \"score\", 10)\r\n    set (npc, \"maxscore\", 20)\r\n    nscore = npc.score + \"/\" + npc.maxscore\r\n```\r\nand the calling function code would look like this\r\n\r\n```\r\nNpcScore (npc, nscore)\r\n          npc.score = npc.score -1\r\n          msg (\"Your relationship with Tiffany has gone down by 1. \")\r\n          msg (nscore)\r\n```\r\nBut when I run the code I still get this error\r\n\r\n```Error running script: Error compiling expression 'npc': Unknown object or variable 'npc'```\r\nAnd it doesn't seem to be adding the attributes \"score\" and \"maxscore\" to bob",
      "EditableFormat": "markdown",
      "HTML": "<p>From what I get, I don't need the obj and object parameters because it is just moving around bob and giving objects to bob so the function could be reduced to this</p>\n<pre><code>  &lt;/function&gt;\n  &lt;function name=\"NpcScore\" parameters=\"npc, nscore\" type=\"int\"&gt;\n    set (npc, \"score\", 10)\n    set (npc, \"maxscore\", 20)\n    nscore = npc.score + \"/\" + npc.maxscore\n</code></pre>\n<p>and the calling function code would look like this</p>\n<pre><code>NpcScore (npc, nscore)\n          npc.score = npc.score -1\n          msg (\"Your relationship with Tiffany has gone down by 1. \")\n          msg (nscore)\n</code></pre>\n<p>But when I run the code I still get this error</p>\n<p><code>Error running script: Error compiling expression 'npc': Unknown object or variable 'npc'</code><br>\nAnd it doesn't seem to be adding the attributes \"score\" and \"maxscore\" to bob</p>\n\n",
      "PostDate": "2024-11-22T22:45:05.4899179Z",
      "LastEditDate": "2024-11-22T22:48:32.7389918Z",
      "link": null
    },
    {
      "PostId": "952dca94-8f30-4c1f-b3f3-62c38891cccf",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> And it doesn't seem to be adding the attributes \"score\" and \"maxscore\" to bob\r\n\r\nYour code doesn't mention bob anywhere. You tell it to add those attributes to an object named `npc`.\r\n\r\nIf the npc is named bob (its name is exactly `bob`), that code should be:\r\n\r\n```\r\nNpcScore (bob, nscore)\r\nbob.score = bob.score -1\r\nmsg (\"Your relationship with Tiffany has gone down by 1. \")\r\n```\r\nYou need to use the name of the npc object, so that the function knows which object to add the attributes to.\r\n\r\nHowever, the `nscore` attribute still makes no sense. In the line <code>NpcScore (bob, <b>nscore</b>)</code>, \"nscore\" refers to a variable that exists only outside the function. In the line <code>&lt;function name=\"NpcScore\" parameters=\"npc, <b>nscore</b>\" type=\"int\"></code>, \"nscore\" refers to a variable which only exists *inside* the function.\r\n\r\nThey are different variables even though they have the same name.\r\nThe inside nscore is created with the same value as the outside nscore, but changing the inside one doesn't change the outside one. If you want to get something out of a function, you need to use `return`. Like this:\r\n\r\nFunction code:\r\n```\r\n<function name=\"NpcScore\" parameters=\"npc\" type=\"string\">\r\n    npc.score = 10\r\n    npc.maxscore = 20\r\n    return (npc.score + \"/\" + npc.maxscore)\r\n</function>\r\n```\r\nand the code that calls it:\r\n<pre><code>nscore = NpcScore (<em style=\"color: blue\">bob</em>)\r\n<em style=\"color: blue\">bob</em>.score = <em style=\"color: blue\">bob</em>.score - 1\r\nmsg (\"Your relationship with Tiffany has gone down by 1. \")\r\nmsg (nscore)</code></pre>\r\n(replacing <code style=\"color: blue\">bob</code> with the actual name of the npc object you want to set the attributes for)\r\n\r\nHowever… nscore in this case will always be \"10/20\". It can't be anything else, because it's generated immediately after setting those initial values.\r\n\r\nThis also means that if the NPC's score and maxscore have already been set, they will be overwritten This probably isn't what you intended. In this case, I think it might be better to have a function which sets the initial values *if they haven't already been set*, then adds or subtracts a number, and then returns your nscore value after the change is made. So it would be:\r\nFunction code:\r\n```\r\n<function name=\"NpcScore\" parameters=\"npc, change\" type=\"string\">\r\n  if (not HasInt (npc, \"score\")) {\r\n    npc.score = 10\r\n    npc.maxscore = 20\r\n  }\r\n  if (IsDefined (\"change\")) {\r\n    npc.score = npc.score + change\r\n    if (npc.score > npc.maxscore) {\r\n      npc.score = npc.maxscore\r\n    }\r\n  }\r\n  return (npc.score + \"/\" + npc.maxscore)\r\n</function>\r\n```\r\nand the code that calls it:\r\n<pre><code>nscore = NpcScore (<em style=\"color: blue\">bob</em>, -1)\r\nmsg (\"Your relationship with Tiffany has gone down by 1. \")\r\nmsg (nscore)</code></pre>\r\n\r\nAll off the top of my head; typing on mobile so it's a bit harder to check any of this. Hope I'm making sense.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>And it doesn't seem to be adding the attributes \"score\" and \"maxscore\" to bob</p>\n</blockquote>\n<p>Your code doesn't mention bob anywhere. You tell it to add those attributes to an object named <code>npc</code>.</p>\n<p>If the npc is named bob (its name is exactly <code>bob</code>), that code should be:</p>\n<pre><code>NpcScore (bob, nscore)\nbob.score = bob.score -1\nmsg (\"Your relationship with Tiffany has gone down by 1. \")\n</code></pre>\n<p>You need to use the name of the npc object, so that the function knows which object to add the attributes to.</p>\n<p>However, the <code>nscore</code> attribute still makes no sense. In the line <code>NpcScore (bob, <b>nscore</b>)</code>, \"nscore\" refers to a variable that exists only outside the function. In the line <code>&lt;function name=\"NpcScore\" parameters=\"npc, <b>nscore</b>\" type=\"int\"&gt;</code>, \"nscore\" refers to a variable which only exists <em>inside</em> the function.</p>\n<p>They are different variables even though they have the same name.<br>\nThe inside nscore is created with the same value as the outside nscore, but changing the inside one doesn't change the outside one. If you want to get something out of a function, you need to use <code>return</code>. Like this:</p>\n<p>Function code:</p>\n<pre><code>&lt;function name=\"NpcScore\" parameters=\"npc\" type=\"string\"&gt;\n    npc.score = 10\n    npc.maxscore = 20\n    return (npc.score + \"/\" + npc.maxscore)\n&lt;/function&gt;\n</code></pre>\n<p>and the code that calls it:</p>\n<pre><code>nscore = NpcScore (<em style=\"color: blue\">bob</em>)\n<em style=\"color: blue\">bob</em>.score = <em style=\"color: blue\">bob</em>.score - 1\nmsg (\"Your relationship with Tiffany has gone down by 1. \")\nmsg (nscore)</code></pre>\n<p>(replacing <code style=\"color: blue\">bob</code> with the actual name of the npc object you want to set the attributes for)</p>\n<p>However… nscore in this case will always be \"10/20\". It can't be anything else, because it's generated immediately after setting those initial values.</p>\n<p>This also means that if the NPC's score and maxscore have already been set, they will be overwritten This probably isn't what you intended. In this case, I think it might be better to have a function which sets the initial values <em>if they haven't already been set</em>, then adds or subtracts a number, and then returns your nscore value after the change is made. So it would be:<br>\nFunction code:</p>\n<pre><code>&lt;function name=\"NpcScore\" parameters=\"npc, change\" type=\"string\"&gt;\n  if (not HasInt (npc, \"score\")) {\n    npc.score = 10\n    npc.maxscore = 20\n  }\n  if (IsDefined (\"change\")) {\n    npc.score = npc.score + change\n    if (npc.score &gt; npc.maxscore) {\n      npc.score = npc.maxscore\n    }\n  }\n  return (npc.score + \"/\" + npc.maxscore)\n&lt;/function&gt;\n</code></pre>\n<p>and the code that calls it:</p>\n<pre><code>nscore = NpcScore (<em style=\"color: blue\">bob</em>, -1)\nmsg (\"Your relationship with Tiffany has gone down by 1. \")\nmsg (nscore)</code></pre>\n<p>All off the top of my head; typing on mobile so it's a bit harder to check any of this. Hope I'm making sense.</p>\n\n",
      "PostDate": "2024-11-22T23:21:09.7403844Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8828b3ad-e6c7-4b87-b248-0cd76fa1f690",
      "UserId": 200638,
      "Username": "Bttflover5566",
      "AvatarUrl": "https://i.imgur.com/vfnd4Bhb.jpeg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ohhh okay I see what you mean now, I have to define it when I call the function.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ohhh okay I see what you mean now, I have to define it when I call the function.</p>\n\n",
      "PostDate": "2024-11-22T23:34:25.4316994Z",
      "LastEditDate": "2024-11-22T23:37:32.823126Z",
      "link": null
    },
    {
      "PostId": "b3aed20c-f2d8-46d5-9ba6-163879a83bc9",
      "UserId": 200638,
      "Username": "Bttflover5566",
      "AvatarUrl": "https://i.imgur.com/vfnd4Bhb.jpeg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "thank you!",
      "EditableFormat": "markdown",
      "HTML": "<p>thank you!</p>\n\n",
      "PostDate": "2024-11-22T23:47:48.6069019Z",
      "LastEditDate": "2024-11-22T23:56:06.5569967Z",
      "link": null
    }
  ]
}
