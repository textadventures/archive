{
  "Topic": {
    "TopicId": "udzjc3kzeesmrvevc3tbbq",
    "ForumId": "10",
    "Title": "More problems with creating object",
    "LastUpdated": "2018-10-17T02:16:59.6983911Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "901e0198-bc6f-46e1-99d4-869e4ec7a1d6",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hey, I'm having problems creating pokeballs again.\r\n1. Should I use a name or expression for the \"destory\" function? Do I use obj, this, or object?\r\n2. I am unable to take the object, but I can drop it.\r\n\r\nMy code.\r\n```\r\nplayer.pokedollar = player.pokedollar - 5000\r\nif (HasInt(game, \"pokeballcount\")) {\r\n  game.pokeballcount = game.pokeballcount + 1\r\n}\r\nelse {\r\n  game.pokeballcount = 1\r\n}\r\ncreate (\"pokeballcount\" + game.pokeballcount)\r\nobj = GetObject(\"pokeballcount\" + game.pokeballcount)\r\nobj.parent = player\r\nobj.displayverbs = Split(\"Look at;Use;Take\", \";\")\r\nobj.inventoryverbs = Split(\"Look at;Drop;Use\", \";\")\r\nobj.alias = \"Pokeball\"\r\nobj.look = \"A \" + obj.alias + \", a device that aids in catching Pokemon. Use it.\"\r\nobj.use => {\r\n  player.catchrate = player.catchrate + 1\r\n  destroy (\"this\")\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hey, I'm having problems creating pokeballs again.</p>\n<ol>\n<li>Should I use a name or expression for the \"destory\" function? Do I use obj, this, or object?</li>\n<li>I am unable to take the object, but I can drop it.</li>\n</ol>\n<p>My code.</p>\n<pre><code>player.pokedollar = player.pokedollar - 5000\nif (HasInt(game, \"pokeballcount\")) {\n  game.pokeballcount = game.pokeballcount + 1\n}\nelse {\n  game.pokeballcount = 1\n}\ncreate (\"pokeballcount\" + game.pokeballcount)\nobj = GetObject(\"pokeballcount\" + game.pokeballcount)\nobj.parent = player\nobj.displayverbs = Split(\"Look at;Use;Take\", \";\")\nobj.inventoryverbs = Split(\"Look at;Drop;Use\", \";\")\nobj.alias = \"Pokeball\"\nobj.look = \"A \" + obj.alias + \", a device that aids in catching Pokemon. Use it.\"\nobj.use =&gt; {\n  player.catchrate = player.catchrate + 1\n  destroy (\"this\")\n}\n</code></pre>\n\n",
      "PostDate": "2018-10-17T02:16:59.6983911Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "87bcd4ac-940c-44bd-b1ff-006775532e6f",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "the 'destroy (XXX)' Function takes/uses the Object's string name:\r\n\r\nhttp://docs.textadventures.co.uk/quest/scripts/destroy.html\r\n\r\n// create (\"NAME_OF_OBJECT\")\r\n\r\ndestroy (\"NAME_OF_OBJECT\")\r\n// or\r\ndestroy (NAME_OF_OBJECT.name)\r\n// or\r\nobject_variable = NAME_OF_OBJECT\r\ndestroy (object_variable.name)\r\n// or\r\nstring_variable = NAME_OF_OBJECT.name\r\ndestroy (string_variable)\r\n\r\n-----------\r\n\r\n```\r\nplayer.pokedollar = player.pokedollar - 5000\r\nif (HasInt(game, \"pokeballcount\")) {\r\n  game.pokeballcount = game.pokeballcount + 1\r\n}\r\nelse {\r\n  game.pokeballcount = 1\r\n}\r\n\r\n// --------------------------------------------\r\n\r\n// just to be safe that it works:\r\n\r\nstring_variable_1 = ToString (game.pokeballcount)\r\nstring_variable_2 = \"pokeballcount\" + string_variable_1\r\nobject_variable = create (string_variable_2)\r\n\r\n// but this (what you had --- with slight edit: in storing it into a Variable) probably works fine:\r\n\r\nobject_variable = create (\"pokeballcount\" + game.pokeballcount)\r\n\r\n// if not, then try this:\r\n\r\nobject_variable = create (\"pokeballcount\" + ToString (game.pokeballcount))\r\n\r\n// if still not, then use the 'just to be safe that it works' code above\r\n\r\n// -------------------------------------------\r\n\r\nobject_variable.parent = player\r\nobject_variable.take = true\r\nobject_variable.displayverbs = Split(\"Look at;Use;Take\", \";\")\r\nobject_variable.inventoryverbs = Split(\"Look at;Drop;Use\", \";\")\r\nobject_variable.alias = \"Pokeball\"\r\nobject_variable.look = \"A \" + object_variable.alias + \", a device that aids in catching Pokemon. Use it.\"\r\nobject_variable.use => {\r\n  player.catchrate = player.catchrate + 1\r\n  destroy (object_variable.name)\r\n}\r\n```\r\n\r\n-----------\r\n\r\nif you want your code to stay (mostly) the same as you had it, then you can use this code:\r\n\r\n```\r\nplayer.pokedollar = player.pokedollar - 5000\r\nif (HasInt(game, \"pokeballcount\")) {\r\n  game.pokeballcount = game.pokeballcount + 1\r\n}\r\nelse {\r\n  game.pokeballcount = 1\r\n}\r\nobj = create (\"pokeballcount\" + game.pokeballcount) // or: see above on alternative scripting\r\nobj.parent = player\r\nobj.take = true\r\nobj.displayverbs = Split(\"Look at;Use;Take\", \";\")\r\nobj.inventoryverbs = Split(\"Look at;Drop;Use\", \";\")\r\nobj.alias = \"Pokeball\"\r\nobj.look = \"A \" + obj.alias + \", a device that aids in catching Pokemon. Use it.\"\r\nobj.use => {\r\n  player.catchrate = player.catchrate + 1\r\n  destroy (obj.name)\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>the 'destroy (XXX)' Function takes/uses the Object's string name:</p>\n<p>http://docs.textadventures.co.uk/quest/scripts/destroy.html</p>\n<p>// create (\"NAME_OF_OBJECT\")</p>\n<p>destroy (\"NAME_OF_OBJECT\")<br>\n// or<br>\ndestroy (NAME_OF_OBJECT.name)<br>\n// or<br>\nobject_variable = NAME_OF_OBJECT<br>\ndestroy (object_variable.name)<br>\n// or<br>\nstring_variable = NAME_OF_OBJECT.name<br>\ndestroy (string_variable)</p>\n<hr>\n<pre><code>player.pokedollar = player.pokedollar - 5000\nif (HasInt(game, \"pokeballcount\")) {\n  game.pokeballcount = game.pokeballcount + 1\n}\nelse {\n  game.pokeballcount = 1\n}\n\n// --------------------------------------------\n\n// just to be safe that it works:\n\nstring_variable_1 = ToString (game.pokeballcount)\nstring_variable_2 = \"pokeballcount\" + string_variable_1\nobject_variable = create (string_variable_2)\n\n// but this (what you had --- with slight edit: in storing it into a Variable) probably works fine:\n\nobject_variable = create (\"pokeballcount\" + game.pokeballcount)\n\n// if not, then try this:\n\nobject_variable = create (\"pokeballcount\" + ToString (game.pokeballcount))\n\n// if still not, then use the 'just to be safe that it works' code above\n\n// -------------------------------------------\n\nobject_variable.parent = player\nobject_variable.take = true\nobject_variable.displayverbs = Split(\"Look at;Use;Take\", \";\")\nobject_variable.inventoryverbs = Split(\"Look at;Drop;Use\", \";\")\nobject_variable.alias = \"Pokeball\"\nobject_variable.look = \"A \" + object_variable.alias + \", a device that aids in catching Pokemon. Use it.\"\nobject_variable.use =&gt; {\n  player.catchrate = player.catchrate + 1\n  destroy (object_variable.name)\n}\n</code></pre>\n<hr>\n<p>if you want your code to stay (mostly) the same as you had it, then you can use this code:</p>\n<pre><code>player.pokedollar = player.pokedollar - 5000\nif (HasInt(game, \"pokeballcount\")) {\n  game.pokeballcount = game.pokeballcount + 1\n}\nelse {\n  game.pokeballcount = 1\n}\nobj = create (\"pokeballcount\" + game.pokeballcount) // or: see above on alternative scripting\nobj.parent = player\nobj.take = true\nobj.displayverbs = Split(\"Look at;Use;Take\", \";\")\nobj.inventoryverbs = Split(\"Look at;Drop;Use\", \";\")\nobj.alias = \"Pokeball\"\nobj.look = \"A \" + obj.alias + \", a device that aids in catching Pokemon. Use it.\"\nobj.use =&gt; {\n  player.catchrate = player.catchrate + 1\n  destroy (obj.name)\n}\n</code></pre>\n\n",
      "PostDate": "2018-10-17T02:56:28.1331591Z",
      "LastEditDate": "2018-10-17T02:57:23.4772646Z",
      "link": null
    },
    {
      "PostId": "81ab95a1-d7ab-4f5f-ba8b-f3ab784d737a",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I tried the second thing that you said, and I got:\r\n```Error running script: Element not found: 'object.name' ```\r\n\r\nI still need to figure out what to do for \"take.\"",
      "EditableFormat": "markdown",
      "HTML": "<p>I tried the second thing that you said, and I got:<br>\n<code>Error running script: Element not found: 'object.name'</code></p>\n<p>I still need to figure out what to do for \"take.\"</p>\n\n",
      "PostDate": "2018-10-17T04:12:43.3963319Z",
      "LastEditDate": "2018-10-20T02:20:17.0140357Z",
      "link": null
    },
    {
      "PostId": "02bb943f-66b8-490b-9185-8e1236be0759",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "1. You need the name of the object. You can't use `obj.name` like HK suggested, because the variable `obj` is only in scope as long as the creation function is running.\r\n\r\n     What you want is: `destroy (this.name)`\r\n\r\n2. To let the player take an object, you need to set `obj.take = true`. I think I pointed this out on the last version of this code you shared.",
      "EditableFormat": "markdown",
      "HTML": "<ol>\n<li>\n<p>You need the name of the object. You can't use <code>obj.name</code> like HK suggested, because the variable <code>obj</code> is only in scope as long as the creation function is running.</p>\n<p>What you want is: <code>destroy (this.name)</code></p>\n</li>\n<li>\n<p>To let the player take an object, you need to set <code>obj.take = true</code>. I think I pointed this out on the last version of this code you shared.</p>\n</li>\n</ol>\n\n",
      "PostDate": "2018-10-17T09:04:27.8783006Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9f63bacb-6319-4a43-bbc6-5f8bfc555148",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```To let the player take an object, you need to set obj.take = true. I think I pointed this out on the last version of this code you shared.```\r\nSorry, I missed it. Anyways, thank you!",
      "EditableFormat": "markdown",
      "HTML": "<p><code>To let the player take an object, you need to set obj.take = true. I think I pointed this out on the last version of this code you shared.</code><br>\nSorry, I missed it. Anyways, thank you!</p>\n\n",
      "PostDate": "2018-10-17T10:50:03.4909434Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "76ac05d5-48f6-454c-9ba0-bca8ad402e7e",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(filler for getting my edited post, updated/posted)\r\n\r\n-------------------\r\n\r\noops my bad, sorry jmnevil! (thank you for correcting and explaining my mistake, mrangel!)\r\n\r\nI wasn't paying attention to this part of code of mine:\r\n\r\n```\r\nobj.use => {\r\n  player.catchrate = player.catchrate + 1\r\n  destroy (obj.name)\r\n}\r\n```\r\n\r\nthe 'obj' isn't defined (its not storing the Object reference/pointer) for within its nested scripting... so that's why the error\r\n\r\noutside of the 'obj.use' Script Attribute: obj = YOUR_OBJECT: no error\r\ninside of the 'obj.use' Script Attribute: obj = ??? (null): ERROR!!!!\r\n\r\n--------\r\n\r\na quick-easy fix for it:\r\n\r\n```\r\ngame.stored_object = obj\r\n\r\nobj.use => {\r\n  player.catchrate = player.catchrate + 1\r\n  destroy (game.stored_object.name)\r\n}\r\n```\r\n\r\nand the full fixed code:\r\n\r\n```\r\nplayer.pokedollar = player.pokedollar - 5000\r\n\r\nif (HasInt(game, \"pokeballcount\")) {\r\n  game.pokeballcount = game.pokeballcount + 1\r\n} else {\r\n  game.pokeballcount = 1\r\n}\r\n\r\nobj = create (\"pokeballcount\" + game.pokeballcount) // or: in my previous post, see above on alternative scripting\r\n\r\nobj.parent = player\r\n\r\nobj.take = true // sorry, I had this line of code between the other code lines in my previous post, so easy to miss it, but now I've separated it out in this post, so you can see it this time\r\n\r\nobj.displayverbs = Split(\"Look at;Use;Take\", \";\")\r\nobj.inventoryverbs = Split(\"Look at;Drop;Use\", \";\")\r\n\r\nobj.alias = \"Pokeball\"\r\n\r\nobj.look = \"A \" + obj.alias + \", a device that aids in catching Pokemon. Use it.\"\r\n\r\ngame.stored_object = obj\r\n\r\nobj.use => {\r\n  player.catchrate = player.catchrate + 1\r\n  destroy (game.stored_object.name)\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>(filler for getting my edited post, updated/posted)</p>\n<hr>\n<p>oops my bad, sorry jmnevil! (thank you for correcting and explaining my mistake, mrangel!)</p>\n<p>I wasn't paying attention to this part of code of mine:</p>\n<pre><code>obj.use =&gt; {\n  player.catchrate = player.catchrate + 1\n  destroy (obj.name)\n}\n</code></pre>\n<p>the 'obj' isn't defined (its not storing the Object reference/pointer) for within its nested scripting... so that's why the error</p>\n<p>outside of the 'obj.use' Script Attribute: obj = YOUR_OBJECT: no error<br>\ninside of the 'obj.use' Script Attribute: obj = ??? (null): ERROR!!!!</p>\n<hr>\n<p>a quick-easy fix for it:</p>\n<pre><code>game.stored_object = obj\n\nobj.use =&gt; {\n  player.catchrate = player.catchrate + 1\n  destroy (game.stored_object.name)\n}\n</code></pre>\n<p>and the full fixed code:</p>\n<pre><code>player.pokedollar = player.pokedollar - 5000\n\nif (HasInt(game, \"pokeballcount\")) {\n  game.pokeballcount = game.pokeballcount + 1\n} else {\n  game.pokeballcount = 1\n}\n\nobj = create (\"pokeballcount\" + game.pokeballcount) // or: in my previous post, see above on alternative scripting\n\nobj.parent = player\n\nobj.take = true // sorry, I had this line of code between the other code lines in my previous post, so easy to miss it, but now I've separated it out in this post, so you can see it this time\n\nobj.displayverbs = Split(\"Look at;Use;Take\", \";\")\nobj.inventoryverbs = Split(\"Look at;Drop;Use\", \";\")\n\nobj.alias = \"Pokeball\"\n\nobj.look = \"A \" + obj.alias + \", a device that aids in catching Pokemon. Use it.\"\n\ngame.stored_object = obj\n\nobj.use =&gt; {\n  player.catchrate = player.catchrate + 1\n  destroy (game.stored_object.name)\n}\n</code></pre>\n\n",
      "PostDate": "2018-10-17T22:36:44.0388936Z",
      "LastEditDate": "2018-10-17T22:55:01.770481Z",
      "link": null
    },
    {
      "PostId": "c4099fbb-6eb2-4b9c-8346-c7b2e30b758b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@HK:\r\nThat makes no sense. You've got a script to create consumable objects, but you're using a global attribute to store a reference to the last one created?\r\n\r\nThe only sensible way to handle that change is to use `this` within the script attribute. As in:\r\n```\r\nobj.use => {\r\n  player.catchrate = player.catchrate + 1\r\n  destroy (this.name)\r\n}\r\n```\r\n... which is the answer I already gave.",
      "EditableFormat": "markdown",
      "HTML": "<p>@HK:<br>\nThat makes no sense. You've got a script to create consumable objects, but you're using a global attribute to store a reference to the last one created?</p>\n<p>The only sensible way to handle that change is to use <code>this</code> within the script attribute. As in:</p>\n<pre><code>obj.use =&gt; {\n  player.catchrate = player.catchrate + 1\n  destroy (this.name)\n}\n</code></pre>\n<p>... which is the answer I already gave.</p>\n\n",
      "PostDate": "2018-10-17T23:45:41.7936514Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e5f966e9-b6f3-4711-90cd-8e5dfcc0aab3",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "...smacks head...\r\n\r\n...I need to pay more attention...\r\n\r\n(we've had too many posts needing help with the issue of using nesting 'this' scope issue, wanting/needing/using a non-parent Object)\r\n\r\n... I need to pay more attention\r\n\r\nit's a Script Attribute and the Object we want is its parent for this case, so indeed, we can use 'this'\r\n\r\nI was just using an Attribute, which would be the quick-fix, if we weren't using the parent Object of a Script Attribute (weren't able to use 'this')...\r\n\r\nas I wasn't paying attention...\r\n\r\n... smacks head...",
      "EditableFormat": "markdown",
      "HTML": "<p>...smacks head...</p>\n<p>...I need to pay more attention...</p>\n<p>(we've had too many posts needing help with the issue of using nesting 'this' scope issue, wanting/needing/using a non-parent Object)</p>\n<p>... I need to pay more attention</p>\n<p>it's a Script Attribute and the Object we want is its parent for this case, so indeed, we can use 'this'</p>\n<p>I was just using an Attribute, which would be the quick-fix, if we weren't using the parent Object of a Script Attribute (weren't able to use 'this')...</p>\n<p>as I wasn't paying attention...</p>\n<p>... smacks head...</p>\n\n",
      "PostDate": "2018-10-18T02:24:42.2328759Z",
      "LastEditDate": "2018-10-18T02:28:49.2482065Z",
      "link": null
    },
    {
      "PostId": "7ace865d-7da3-4599-ae3c-33e16b79db7d",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "/me puts a band-aid on HK's head.",
      "EditableFormat": "markdown",
      "HTML": "<p>/me puts a band-aid on HK's head.</p>\n\n",
      "PostDate": "2018-10-19T08:26:28.4953589Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "91641372-662d-4c98-bd22-3c7548238ac4",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I got a very hard dense head (and am very hard headed), so don't worry, my head is quite fine... now the desk or hand or wall that I smacked my head against is... broken...",
      "EditableFormat": "markdown",
      "HTML": "<p>I got a very hard dense head (and am very hard headed), so don't worry, my head is quite fine... now the desk or hand or wall that I smacked my head against is... broken...</p>\n\n",
      "PostDate": "2018-10-19T12:33:42.9846684Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "07bfc5c3-5186-4472-a51a-85517220896e",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Now I'm getting:\r\n```Error running script: Element not found: 'this.name'```\r\n\r\nMaybe my game just doesn't like me...",
      "EditableFormat": "markdown",
      "HTML": "<p>Now I'm getting:<br>\n<code>Error running script: Element not found: 'this.name'</code></p>\n<p>Maybe my game just doesn't like me...</p>\n\n",
      "PostDate": "2018-10-20T02:19:39.3479613Z",
      "LastEditDate": "2018-10-20T02:20:01.9594088Z",
      "link": null
    },
    {
      "PostId": "3bbaef79-9642-4dfc-ab30-8eda2d750c86",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That sounds like you've put:\r\n`destroy (\"this.name\")`\r\ninstead of\r\n`destroy (this.name)`",
      "EditableFormat": "markdown",
      "HTML": "<p>That sounds like you've put:<br>\n<code>destroy (\"this.name\")</code><br>\ninstead of<br>\n<code>destroy (this.name)</code></p>\n\n",
      "PostDate": "2018-10-20T08:43:56.8434535Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "67000969-48cc-473b-ab6a-4afd4f36bb2b",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Strange. When I looked at it it said destroy-name-this.name, and the code was ```destroy (\"this.name\")```, then when I changed it to ```destroy (this.name)``` it became destory-expression-this.name. I'll play it when I have time. Thank you.",
      "EditableFormat": "markdown",
      "HTML": "<p>Strange. When I looked at it it said destroy-name-this.name, and the code was <code>destroy (\"this.name\")</code>, then when I changed it to <code>destroy (this.name)</code> it became destory-expression-this.name. I'll play it when I have time. Thank you.</p>\n\n",
      "PostDate": "2018-10-21T06:21:55.0218989Z",
      "LastEditDate": "2018-10-21T06:22:28.816125Z",
      "link": null
    }
  ]
}
