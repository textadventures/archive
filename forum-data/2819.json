{
  "Topic": {
    "TopicId": "2819",
    "ForumId": "10",
    "Title": "String Dictionary and Show menu",
    "LastUpdated": "2012-02-09T16:56:45+00:00",
    "ReplyCount": 2
  },
  "Posts": [
    {
      "PostId": "19549",
      "UserId": 0,
      "Username": "greenelvish",
      "UserAvatar": null,
      "UserGravatar": "a69ac77d24c1b46de06a5c279a9c04f6",
      "EditableText": "Hi,\n\nif I set a string dictionary (called &quot;pensieri&quot;) and a show menu script (with options taken from &quot;pensieri&quot;) and then I put both dictionary and script in the same function, everything works.\n\n[code:3f6p9mh5] &lt;function name=&quot;dialogo&quot;&gt;&lt;!&#91;CDATA&#91;\n    pensieri = NewStringDictionary()\n    dictionary add (pensieri, &quot;aggressione&quot;, &quot;Potresti aggredire quell'uomo e costringerlo a dirti come si fa ad uscire&#46;&quot;)\n    dictionary add (pensieri, &quot;domanda&quot;, &quot;Potresti anche solo chiedergli come si fa ad uscire&#46;&quot;)\n    dictionary add (pensieri, &quot;aspetta&quot;, &quot;Potresti infine restare dove sei, e attendere che sia lui ad accorgersi di te&#46;&quot;)\n    show menu (&quot;Senti di essere vicino alla salvezza, ma devi scegliere con cura le tue ultime mosse&#58;&quot;, pensieri, true) {\n      switch (result) {\n        case (&quot;aggressione&quot;) {\n          msg (&quot;La tensione si trasforma in rabbia e la rabbia si trasmette al tuo corpo&#46; Tutto avviene cosi' velocemente che quasi non ti accorgi di iniziare a correre per aggredire quell'uomo&#46; &lt;br/&gt;&lt;br/&gt; Succede pero' anche che ti schianti contro una parete di vetro&#46;&#46;&#46; praticamente invisibile, tanto era pultia e trasparente&#46;&quot;)\n          player&#46;cavia = 1\n          muori_per_scherzo\n        }\n        case (&quot;domanda&quot;) {\n          msg (&quot;Ti avvicini un po' e poi chiedi&#58; 'Mi scusi, saprebbe dirmi come si esce da qui?' &lt;br/&gt;&lt;br/&gt; Senza muoversi di un millimetro, l'uomo risponde con una strana voce gracchiante e metallica&#58; 'Ho sete, ragazzo mio&#46; Puoi fare niente per me?'&quot;)\n        }\n        case (&quot;aspetta&quot;) {\n          msg (&quot;Aspetti immobile e in silenzio, confidando che prima o poi l'uomo si voltera'&#46; Nel frattempo, ti viene voglia di esaminare i dettagli della stanza&#46;&quot;)\n          EnableTimer (aspetta)\n        }\n      }\n    }\n  &#93;&#93;&gt;&lt;/function&gt;[/code:3f6p9mh5] \n\nBut if - in order to manage items in a better way - I set the same string dictionary (copy and paste) in the Start Script (among other actions)\n\n[code:3f6p9mh5] &lt;start type=&quot;script&quot;&gt;\n      pensieri = NewStringDictionary()\n      dictionary add (pensieri, &quot;aggressione&quot;, &quot;Potresti aggredire quell'uomo e costringerlo a dirti come si fa ad uscire&#46;&quot;)\n      dictionary add (pensieri, &quot;domanda&quot;, &quot;Potresti anche solo chiedergli come si fa ad uscire&#46;&quot;)\n      dictionary add (pensieri, &quot;aspetta&quot;, &quot;Potresti infine restare dove sei, e attendere che sia lui ad accorgersi di te&#46;&quot;)\n      game&#46;displayroomdescriptiononstart = false\n      insert (&quot;descrizione_intro_1&#46;html&quot;)\n      wait {\n        insert (&quot;descrizione_intro_2&#46;html&quot;)\n        wait {\n          OnEnterRoom (null)\n        }\n      }\n    &lt;/start&gt;[/code:3f6p9mh5]\n \nand then I create a function with the same show menu script (copy and paste) with options taken from &quot;pensieri&quot;, \n\n\n[code:3f6p9mh5] &lt;/function&gt;\n  &lt;function name=&quot;dialogo&quot;&gt;&lt;!&#91;CDATA&#91;\n    show menu (&quot;Senti di essere vicino alla salvezza, ma devi scegliere con cura le tue ultime mosse&#58;&quot;, pensieri, true) {\n      switch (result) {\n        case (&quot;aggressione&quot;) {\n          msg (&quot;La tensione si trasforma in rabbia e la rabbia si trasmette al tuo corpo&#46; Tutto avviene cosi' velocemente che quasi non ti accorgi di iniziare a correre per aggredire quell'uomo&#46; &lt;br/&gt;&lt;br/&gt; Succede pero' anche che ti schianti contro una parete di vetro&#46;&#46;&#46; praticamente invisibile, tanto era pultia e trasparente&#46;&quot;)\n          player&#46;cavia = 1\n          muori_per_scherzo\n        }\n        case (&quot;domanda&quot;) {\n          msg (&quot;Ti avvicini un po' e poi chiedi&#58; 'Mi scusi, saprebbe dirmi come si esce da qui?' &lt;br/&gt;&lt;br/&gt; Senza muoversi di un millimetro, l'uomo risponde con una strana voce gracchiante e metallica&#58; 'Ho sete, ragazzo mio&#46; Puoi fare niente per me?'&quot;)\n        }\n        case (&quot;aspetta&quot;) {\n          msg (&quot;Aspetti immobile e in silenzio, confidando che prima o poi l'uomo si voltera'&#46; Nel frattempo, ti viene voglia di esaminare i dettagli della stanza&#46;&quot;)\n          EnableTimer (aspetta)\n        }\n      }\n    }\n  &#93;&#93;&gt;&lt;/function&gt;[/code:3f6p9mh5]\n\nQuest says: &quot;Error running script&#058; Unknown object or variable 'pensieri' &quot;. And sometimes it crashes.\n\nI think I'm doing something wrong...\n\nThank you",
      "EditableFormat": "bbcode",
      "HTML": "Hi,<br/><br/>if I set a string dictionary (called &quot;pensieri&quot;) and a show menu script (with options taken from &quot;pensieri&quot;) and then I put both dictionary and script in the same function, everything works.<br/><br/><pre><code> &lt;function name=&quot;dialogo&quot;&gt;&lt;!&#91;CDATA&#91;<br/>    pensieri = NewStringDictionary()<br/>    dictionary add (pensieri, &quot;aggressione&quot;, &quot;Potresti aggredire quell'uomo e costringerlo a dirti come si fa ad uscire&#46;&quot;)<br/>    dictionary add (pensieri, &quot;domanda&quot;, &quot;Potresti anche solo chiedergli come si fa ad uscire&#46;&quot;)<br/>    dictionary add (pensieri, &quot;aspetta&quot;, &quot;Potresti infine restare dove sei, e attendere che sia lui ad accorgersi di te&#46;&quot;)<br/>    show menu (&quot;Senti di essere vicino alla salvezza, ma devi scegliere con cura le tue ultime mosse&#58;&quot;, pensieri, true) {<br/>      switch (result) {<br/>        case (&quot;aggressione&quot;) {<br/>          msg (&quot;La tensione si trasforma in rabbia e la rabbia si trasmette al tuo corpo&#46; Tutto avviene cosi' velocemente che quasi non ti accorgi di iniziare a correre per aggredire quell'uomo&#46; &lt;br/&gt;&lt;br/&gt; Succede pero' anche che ti schianti contro una parete di vetro&#46;&#46;&#46; praticamente invisibile, tanto era pultia e trasparente&#46;&quot;)<br/>          player&#46;cavia = 1<br/>          muori_per_scherzo<br/>        }<br/>        case (&quot;domanda&quot;) {<br/>          msg (&quot;Ti avvicini un po' e poi chiedi&#58; 'Mi scusi, saprebbe dirmi come si esce da qui?' &lt;br/&gt;&lt;br/&gt; Senza muoversi di un millimetro, l'uomo risponde con una strana voce gracchiante e metallica&#58; 'Ho sete, ragazzo mio&#46; Puoi fare niente per me?'&quot;)<br/>        }<br/>        case (&quot;aspetta&quot;) {<br/>          msg (&quot;Aspetti immobile e in silenzio, confidando che prima o poi l'uomo si voltera'&#46; Nel frattempo, ti viene voglia di esaminare i dettagli della stanza&#46;&quot;)<br/>          EnableTimer (aspetta)<br/>        }<br/>      }<br/>    }<br/>  &#93;&#93;&gt;&lt;/function&gt;</code></pre> <br/><br/>But if - in order to manage items in a better way - I set the same string dictionary (copy and paste) in the Start Script (among other actions)<br/><br/><pre><code> &lt;start type=&quot;script&quot;&gt;<br/>      pensieri = NewStringDictionary()<br/>      dictionary add (pensieri, &quot;aggressione&quot;, &quot;Potresti aggredire quell'uomo e costringerlo a dirti come si fa ad uscire&#46;&quot;)<br/>      dictionary add (pensieri, &quot;domanda&quot;, &quot;Potresti anche solo chiedergli come si fa ad uscire&#46;&quot;)<br/>      dictionary add (pensieri, &quot;aspetta&quot;, &quot;Potresti infine restare dove sei, e attendere che sia lui ad accorgersi di te&#46;&quot;)<br/>      game&#46;displayroomdescriptiononstart = false<br/>      insert (&quot;descrizione_intro_1&#46;html&quot;)<br/>      wait {<br/>        insert (&quot;descrizione_intro_2&#46;html&quot;)<br/>        wait {<br/>          OnEnterRoom (null)<br/>        }<br/>      }<br/>    &lt;/start&gt;</code></pre><br/> <br/>and then I create a function with the same show menu script (copy and paste) with options taken from &quot;pensieri&quot;, <br/><br/><br/><pre><code> &lt;/function&gt;<br/>  &lt;function name=&quot;dialogo&quot;&gt;&lt;!&#91;CDATA&#91;<br/>    show menu (&quot;Senti di essere vicino alla salvezza, ma devi scegliere con cura le tue ultime mosse&#58;&quot;, pensieri, true) {<br/>      switch (result) {<br/>        case (&quot;aggressione&quot;) {<br/>          msg (&quot;La tensione si trasforma in rabbia e la rabbia si trasmette al tuo corpo&#46; Tutto avviene cosi' velocemente che quasi non ti accorgi di iniziare a correre per aggredire quell'uomo&#46; &lt;br/&gt;&lt;br/&gt; Succede pero' anche che ti schianti contro una parete di vetro&#46;&#46;&#46; praticamente invisibile, tanto era pultia e trasparente&#46;&quot;)<br/>          player&#46;cavia = 1<br/>          muori_per_scherzo<br/>        }<br/>        case (&quot;domanda&quot;) {<br/>          msg (&quot;Ti avvicini un po' e poi chiedi&#58; 'Mi scusi, saprebbe dirmi come si esce da qui?' &lt;br/&gt;&lt;br/&gt; Senza muoversi di un millimetro, l'uomo risponde con una strana voce gracchiante e metallica&#58; 'Ho sete, ragazzo mio&#46; Puoi fare niente per me?'&quot;)<br/>        }<br/>        case (&quot;aspetta&quot;) {<br/>          msg (&quot;Aspetti immobile e in silenzio, confidando che prima o poi l'uomo si voltera'&#46; Nel frattempo, ti viene voglia di esaminare i dettagli della stanza&#46;&quot;)<br/>          EnableTimer (aspetta)<br/>        }<br/>      }<br/>    }<br/>  &#93;&#93;&gt;&lt;/function&gt;</code></pre><br/><br/>Quest says: &quot;Error running script&#058; Unknown object or variable 'pensieri' &quot;. And sometimes it crashes.<br/><br/>I think I'm doing something wrong...<br/><br/>Thank you",
      "PostDate": "2012-02-09T15:50:05+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "19550",
      "UserId": 0,
      "Username": "Pertex",
      "UserAvatar": "5940_1369854251.gif",
      "UserGravatar": "4cc1e52f99452e841ecf4cbee9eadde9",
      "EditableText": "If you use   &quot;pensieri = NewStringDictionary()&quot; you are creating a local dictionary which is only known in this object. All other objects (and scripts) do not know this dictionary. So you have to add an objectname to the dictionary, where the dictionary is created/saved. Try to replace &quot;pensieri&quot; with &quot;game.pensieri&quot; whereever you use your dictionary, then its saved im the gameobject.\n\n[code:hypfp7a5]\n    game&#46;pensieri = NewStringDictionary()\n    dictionary add (game&#46;pensieri, &quot;aggressione&quot;, &quot;Pot&#46;&#46;&#46; uscire&#46;&quot;)\n   &#46;&#46;&#46;\n[/code:hypfp7a5]\n\nand\n\n[code:hypfp7a5]\n&lt;/function&gt;\n  &lt;function name=&quot;dialogo&quot;&gt;&lt;!&#91;CDATA&#91;\n    show menu (&quot;Senti di&#46;&#46;&#46;se&#58;&quot;, game&#46;pensieri, true) {\n   &#46;&#46;&#46;\n[/code:hypfp7a5]",
      "EditableFormat": "bbcode",
      "HTML": "If you use   &quot;pensieri = NewStringDictionary()&quot; you are creating a local dictionary which is only known in this object. All other objects (and scripts) do not know this dictionary. So you have to add an objectname to the dictionary, where the dictionary is created/saved. Try to replace &quot;pensieri&quot; with &quot;game.pensieri&quot; whereever you use your dictionary, then its saved im the gameobject.<br/><br/><pre><code><br/>    game&#46;pensieri = NewStringDictionary()<br/>    dictionary add (game&#46;pensieri, &quot;aggressione&quot;, &quot;Pot&#46;&#46;&#46; uscire&#46;&quot;)<br/>   &#46;&#46;&#46;<br/></code></pre><br/><br/>and<br/><br/><pre><code><br/>&lt;/function&gt;<br/>  &lt;function name=&quot;dialogo&quot;&gt;&lt;!&#91;CDATA&#91;<br/>    show menu (&quot;Senti di&#46;&#46;&#46;se&#58;&quot;, game&#46;pensieri, true) {<br/>   &#46;&#46;&#46;<br/></code></pre>",
      "PostDate": "2012-02-09T16:32:57+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "19552",
      "UserId": 0,
      "Username": "greenelvish",
      "UserAvatar": null,
      "UserGravatar": "a69ac77d24c1b46de06a5c279a9c04f6",
      "EditableText": "Thanks, Pertex! \n\nNow I know a new thing about Quest.  <!-- s:!: --><img src=\"{SMILIES_PATH}/icon_exclaim.gif\" alt=\":!:\" title=\"Exclamation\" /><!-- s:!: -->",
      "EditableFormat": "bbcode",
      "HTML": "Thanks, Pertex! <br/><br/>Now I know a new thing about Quest.  <!-- s:!: --><img src=\"{SMILIES_PATH}/icon_exclaim.gif\" alt=\":!:\" title=\"Exclamation\" /><!-- s:!: -->",
      "PostDate": "2012-02-09T16:56:45+00:00",
      "LastEditDate": null
    }
  ]
}
