{
  "Topic": {
    "TopicId": "vl8yzi_adkydvahncu7-yw",
    "ForumId": "10",
    "Title": "How to return to previous page in gamebook mode?",
    "LastUpdated": "2019-06-01T17:15:45.6681318Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "8b33009a-d305-44ca-a597-c538e94ecf8e",
      "UserId": 365704,
      "Username": "Yellow_Anonymous",
      "AvatarUrl": "https://secure.gravatar.com/avatar/e8610973a034b32181778e10a1021057?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello there. I'm using the gamebook style of game-making in Quest, and I have an idea for something similar to -if you've ever seen or heard of the game- Senran Kagura: Shinovi Versus, wherein a player can click on a highlighted word or phrase to learn more about it. To use an example from Senran Kagura, clicking on the word \"Kagura\" would produce a popup that gives some information on Kagura.\r\n\r\nI want to do something similar to that, however, I'm a bit stumped. I've dedicated specific pages to the \"pop-ups\", however, I intend for the player to be able to access these \"pop-up\" pages from more than one point in the game. Is there any way I can use a variable or an attribute to mark a page as the \"previous\" one so I can use a script in the \"pop-up\" pages to return the player to the \"previous\" page?\r\n\r\nIf I need to explain what I'm trying to accomplish in more clear detail, please let me know.\r\n\r\n(Also, while I'm here, could somebody please explain Squiffy to me? Is it just the gamebook feature for Quest, but as a standalone program? Does it have differing features?)",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello there. I'm using the gamebook style of game-making in Quest, and I have an idea for something similar to -if you've ever seen or heard of the game- Senran Kagura: Shinovi Versus, wherein a player can click on a highlighted word or phrase to learn more about it. To use an example from Senran Kagura, clicking on the word \"Kagura\" would produce a popup that gives some information on Kagura.</p>\n<p>I want to do something similar to that, however, I'm a bit stumped. I've dedicated specific pages to the \"pop-ups\", however, I intend for the player to be able to access these \"pop-up\" pages from more than one point in the game. Is there any way I can use a variable or an attribute to mark a page as the \"previous\" one so I can use a script in the \"pop-up\" pages to return the player to the \"previous\" page?</p>\n<p>If I need to explain what I'm trying to accomplish in more clear detail, please let me know.</p>\n<p>(Also, while I'm here, could somebody please explain Squiffy to me? Is it just the gamebook feature for Quest, but as a standalone program? Does it have differing features?)</p>\n\n",
      "PostDate": "2019-06-01T17:15:45.6681318Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9f15e25a-9a03-4b5d-88bf-bd95aac9ad1e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you have a script that runs on every turn (I believe there's an option for that in gamebook mode) you could use that to record the previous page.\r\n\r\nSomething like:\r\n```\r\nif (not game.currentpage = player.parent) {\r\n  game.previouspage = game.currentpage\r\n  game.currentpage = game.previouspage\r\n}\r\n```\r\nThat checks if the attribute `game.currentpage` is the same as the page the player is currently on; meaning that they've moved to a different page. If so, it sets `game.previouspage` to the previous value of `game.currentpage`, and sets `game.currentpage` to the current page.\r\n\r\nYou can then have a script on your 'popup' page which creates a link from there to `game.previouspage`.",
      "EditableFormat": "markdown",
      "HTML": "<p>If you have a script that runs on every turn (I believe there's an option for that in gamebook mode) you could use that to record the previous page.</p>\n<p>Something like:</p>\n<pre><code>if (not game.currentpage = player.parent) {\n  game.previouspage = game.currentpage\n  game.currentpage = game.previouspage\n}\n</code></pre>\n<p>That checks if the attribute <code>game.currentpage</code> is the same as the page the player is currently on; meaning that they've moved to a different page. If so, it sets <code>game.previouspage</code> to the previous value of <code>game.currentpage</code>, and sets <code>game.currentpage</code> to the current page.</p>\n<p>You can then have a script on your 'popup' page which creates a link from there to <code>game.previouspage</code>.</p>\n\n",
      "PostDate": "2019-06-01T23:07:04.8316927Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7a3349d6-b694-4990-a721-f173c02b5809",
      "UserId": 365704,
      "Username": "Yellow_Anonymous",
      "AvatarUrl": "https://secure.gravatar.com/avatar/e8610973a034b32181778e10a1021057?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks for your help! However, I've poured through the options, and there doesn't seem to be an option to run a script on every turn. Unless I've missed something. I appreciate the help immensely, however.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks for your help! However, I've poured through the options, and there doesn't seem to be an option to run a script on every turn. Unless I've missed something. I appreciate the help immensely, however.</p>\n\n",
      "PostDate": "2019-06-01T23:33:18.1916645Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dbdc72f7-5a98-4fff-8b77-80be60a64714",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> there doesn't seem to be an option to run a script on every turn\r\n\r\nThere's a script attribute named `game.roomenter` which is run in between changing the player's location (`player.parent`) and running the script or displaying the text for the new current page.\r\n\r\nIn the editor, it should be captioned \"Script when entering page\" on the \"Script\" tab of the game element. (I looked through the editor source to find it, as I don't have Quest running on this computer, but pretty sure I found the right one)\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>there doesn't seem to be an option to run a script on every turn</p>\n</blockquote>\n<p>There's a script attribute named <code>game.roomenter</code> which is run in between changing the player's location (<code>player.parent</code>) and running the script or displaying the text for the new current page.</p>\n<p>In the editor, it should be captioned \"Script when entering page\" on the \"Script\" tab of the game element. (I looked through the editor source to find it, as I don't have Quest running on this computer, but pretty sure I found the right one)</p>\n\n",
      "PostDate": "2019-06-02T10:05:15.083318Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "640f67a8-1069-4b9d-8606-dad6661fe723",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you were using this method, then on the \"popup\" pages, you'd want to make them script+text type, and have a script something like:\r\n\r\n<pre><code>if (not TypeOf (this, \"options\") = \"stringdictionary\") {\r\n  this.options = NewStringDictionary()\r\n}\r\nif (HasString (this, \"previouspagelink\")) {\r\n  dictionary remove (this.options, this.previouspagelink)\r\n}\r\nif (HasObject (game.previouspage)) {\r\n  this.previouspagelink = game.previouspage.name\r\n  dictionary add (this.options, this.previouspagelink, \"<em style=\"color: blue\">Back to previous page</em>\")\r\n}</code></pre>\r\n\r\n(slightly more complex than adding a \"previous page\" link, because if the popup has been visited from more than one place, you need to remove the link back to the page that was previous last time)",
      "EditableFormat": "markdown",
      "HTML": "<p>If you were using this method, then on the \"popup\" pages, you'd want to make them script+text type, and have a script something like:</p>\n<pre><code>if (not TypeOf (this, \"options\") = \"stringdictionary\") {\n  this.options = NewStringDictionary()\n}\nif (HasString (this, \"previouspagelink\")) {\n  dictionary remove (this.options, this.previouspagelink)\n}\nif (HasObject (game.previouspage)) {\n  this.previouspagelink = game.previouspage.name\n  dictionary add (this.options, this.previouspagelink, \"<em style=\"color: blue\">Back to previous page</em>\")\n}</code></pre>\n<p>(slightly more complex than adding a \"previous page\" link, because if the popup has been visited from more than one place, you need to remove the link back to the page that was previous last time)</p>\n\n",
      "PostDate": "2019-06-02T10:13:48.4186398Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1a4eceb6-fa56-40ea-b82b-5b2ef843542d",
      "UserId": 365704,
      "Username": "Yellow_Anonymous",
      "AvatarUrl": "https://secure.gravatar.com/avatar/e8610973a034b32181778e10a1021057?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Alrighty. I'll try it out!",
      "EditableFormat": "markdown",
      "HTML": "<p>Alrighty. I'll try it out!</p>\n\n",
      "PostDate": "2019-06-02T11:23:45.4722846Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e8fd10ff-0c4b-4a6e-8c54-3053d7830393",
      "UserId": 418279,
      "Username": "Zesc",
      "AvatarUrl": "https://i.imgur.com/bGcfC7sb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I hope i do not cause any inconvinience when taking over this thread, but i have a question closely connected to the above:\r\n\r\nI'm using a very similar code (see below) which works like mrangle's example, but more general and for all pages.\r\n\r\n```\r\nplayer.LastPage = player.Now\r\nplayer.Now = player.parent\r\nAddPageLink (player.parent, player.LastPage, \"Previous Page\")\r\n```\r\n\r\nBut this one has the issue of not removing the links once they are used, meaning that if the player enters the same page again from a different direction, it will have two links reading \"Previous Page\", bot leading to different pages.\r\n\r\nI actually found a way to prevent this when directly going back, but for each step i'd do this, i had to add two new lines of code (one to define the page, one to remove the link) but if the player decides to walk 64 rooms in one direction and then 65 back, i still get the issue.\r\n\r\nThis all would be no problem if there was something to clear all PageLinks of a given page, but there doesn't seems to be a script for that. Could i somehow refer to the attributes of a given page to get the expression of a PageLink?\r\n\r\nAnyone knowing how to do this? I regard this important to this topic since the other code will most likel have comparable problems.",
      "EditableFormat": "markdown",
      "HTML": "<p>I hope i do not cause any inconvinience when taking over this thread, but i have a question closely connected to the above:</p>\n<p>I'm using a very similar code (see below) which works like mrangle's example, but more general and for all pages.</p>\n<pre><code>player.LastPage = player.Now\nplayer.Now = player.parent\nAddPageLink (player.parent, player.LastPage, \"Previous Page\")\n</code></pre>\n<p>But this one has the issue of not removing the links once they are used, meaning that if the player enters the same page again from a different direction, it will have two links reading \"Previous Page\", bot leading to different pages.</p>\n<p>I actually found a way to prevent this when directly going back, but for each step i'd do this, i had to add two new lines of code (one to define the page, one to remove the link) but if the player decides to walk 64 rooms in one direction and then 65 back, i still get the issue.</p>\n<p>This all would be no problem if there was something to clear all PageLinks of a given page, but there doesn't seems to be a script for that. Could i somehow refer to the attributes of a given page to get the expression of a PageLink?</p>\n<p>Anyone knowing how to do this? I regard this important to this topic since the other code will most likel have comparable problems.</p>\n\n",
      "PostDate": "2019-06-02T15:03:43.7315541Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b79ff3ae-1338-49f2-8473-6da1b013ceed",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Wrote quite a large response, but \"sorry, you can't post that here\"",
      "EditableFormat": "markdown",
      "HTML": "<p>Wrote quite a large response, but \"sorry, you can't post that here\"</p>\n\n",
      "PostDate": "2019-06-02T22:17:13.7205245Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6919c9aa-d602-486f-986c-44379aba8432",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "<img src=\"https://photos.mrangel.info/damn_forum.png\" />",
      "EditableFormat": "markdown",
      "HTML": "<img src=\"https://photos.mrangel.info/damn_forum.png\">\n\n",
      "PostDate": "2019-06-02T22:23:27.290004Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "13974d18-92ba-4a39-a1ce-5ebcae9413c0",
      "UserId": 418279,
      "Username": "Zesc",
      "AvatarUrl": "https://i.imgur.com/bGcfC7sb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh, i didn't knew you could look for a DictionaryItem that way. Mostly because i did have multiple \"Previous Page\"-links. I guess in that case, it would just remove all of them?\r\n\r\nAlso,  ```player.parent.options = NewStringDictionary()``` does the job already, since i wanted to clear _all_ page links anyway.\r\n\r\nAll the essential links are added to my pages by scripts, since i foudn fiddling with the options in the GUI annoying and inefficient. It's much easier to pop a ```AddPageLink (this, Target, Name)``` and edit it than going through an annoying and prone-to-errors confirmation dialogue each time you want a new page. (Especially since hitting the tiny buttons is tricky on a 4K screen.)\r\n\r\nHowever, i don't understand your second block of code. It checks for ```\"options\"```and not ```player.parent.options``` to exist? And isn't the nested ```if ()``` checking for something that would first be defined if it results a negative?",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh, i didn't knew you could look for a DictionaryItem that way. Mostly because i did have multiple \"Previous Page\"-links. I guess in that case, it would just remove all of them?</p>\n<p>Also,  <code>player.parent.options = NewStringDictionary()</code> does the job already, since i wanted to clear <em>all</em> page links anyway.</p>\n<p>All the essential links are added to my pages by scripts, since i foudn fiddling with the options in the GUI annoying and inefficient. It's much easier to pop a <code>AddPageLink (this, Target, Name)</code> and edit it than going through an annoying and prone-to-errors confirmation dialogue each time you want a new page. (Especially since hitting the tiny buttons is tricky on a 4K screen.)</p>\n<p>However, i don't understand your second block of code. It checks for <code>\"options\"</code>and not <code>player.parent.options</code> to exist? And isn't the nested <code>if ()</code> checking for something that would first be defined if it results a negative?</p>\n\n",
      "PostDate": "2019-06-03T10:16:23.4232114Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
