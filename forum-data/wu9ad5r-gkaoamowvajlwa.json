{
  "Topic": {
    "TopicId": "wu9ad5r-gkaoamowvajlwa",
    "ForumId": "10",
    "Title": "NPC Conversation",
    "LastUpdated": "2017-06-23T20:28:17.982657Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "4b4953eb-341d-4a18-be3a-db67ebae3c34",
      "UserId": 310198,
      "Username": "eismanweiss",
      "AvatarUrl": "https://secure.gravatar.com/avatar/46c5ee24d74ea13ba5a68e8196480bcd?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello, I am working on my first game and running into an issue I have yet to resolve.  I would like for my player to have a discussion with Christian Doppler in which they are making observations about light waves.  When the player makes a correct observation, Doppler asks another question.  (This piece I am okay with.)  When the player makes an incorrect observation, Doppler asks them to look more closely and asks the question again.  I cannot seem to get an incorrect answer to loop back to the previous question, and I am not sure if I am missing something simple or if there is a more elegant way to approach these types of conversation.  Here is the code. Thank you in advance for your assistance in this matter.\r\n\r\n``` <object name=\"Christian Doppler\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"namedmale\" />\r\n      <look type=\"script\">\r\n        picture (\"Christian_Doppler.jpg\")\r\n      </look>\r\n      <speak type=\"script\">\r\n        Ask (\"Hello!  Would you like to help me study the way light and sound waves change as an object moves?\") {\r\n          if (true) {\r\n            msg (\"Great!  Let's look at this simulation.\")\r\n            DisplayHttpLink (\"Simulation\", \"http://zonalandeducation.com/mstm/physics/waves/dopplerEffect/dopplerEffect.html\", false)\r\n            msg (\"Mute (uncheck) the Snare drum sound. Try snapping your fingers every time a sound wave is produced. For now, let’s call this the frequency of waves emitted by the source.\")\r\n            msg (\"Is the frequency of waves emitted by the source constant, or does it change as the source moves?  In other words, does the way you snap your fingers get faster, slower, or it is constant as the source moves along the screen?\")\r\n            menulist = NewStringList()\r\n            list add (menulist, \"slower\")\r\n            list add (menulist, \"faster\")\r\n            list add (menulist, \"constant\")\r\n            ShowMenu (\"What do you think?\", menulist, false) {\r\n              if (result=\"slower\") {\r\n                msg (\"Are you sure.  Take another look, and make sure your sound is muted.\")\r\n                ShowMenu (\"What do you think?\", menulist, false) {switch}\r\n              }\r\n              else if (result=\"faster\") {\r\n                msg (\"Are you sure.  Take another look, and make sure your sound is muted.\")\r\n              }\r\n              else if (result=\"constant\") {\r\n                msg (\"Great! So what you are saying is that the waves emitted from the source have a constant frequency.\")\r\n              }\r\n            }\r\n          }\r\n          else if (false) {\r\n            msg (\"Oh. Okay.  I'll keep working then.  If you have any questions about waves, you know where to find me!\")\r\n          }\r\n        }```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello, I am working on my first game and running into an issue I have yet to resolve.  I would like for my player to have a discussion with Christian Doppler in which they are making observations about light waves.  When the player makes a correct observation, Doppler asks another question.  (This piece I am okay with.)  When the player makes an incorrect observation, Doppler asks them to look more closely and asks the question again.  I cannot seem to get an incorrect answer to loop back to the previous question, and I am not sure if I am missing something simple or if there is a more elegant way to approach these types of conversation.  Here is the code. Thank you in advance for your assistance in this matter.</p>\n<pre><code>      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"namedmale\" /&gt;\n      &lt;look type=\"script\"&gt;\n        picture (\"Christian_Doppler.jpg\")\n      &lt;/look&gt;\n      &lt;speak type=\"script\"&gt;\n        Ask (\"Hello!  Would you like to help me study the way light and sound waves change as an object moves?\") {\n          if (true) {\n            msg (\"Great!  Let's look at this simulation.\")\n            DisplayHttpLink (\"Simulation\", \"http://zonalandeducation.com/mstm/physics/waves/dopplerEffect/dopplerEffect.html\", false)\n            msg (\"Mute (uncheck) the Snare drum sound. Try snapping your fingers every time a sound wave is produced. For now, let’s call this the frequency of waves emitted by the source.\")\n            msg (\"Is the frequency of waves emitted by the source constant, or does it change as the source moves?  In other words, does the way you snap your fingers get faster, slower, or it is constant as the source moves along the screen?\")\n            menulist = NewStringList()\n            list add (menulist, \"slower\")\n            list add (menulist, \"faster\")\n            list add (menulist, \"constant\")\n            ShowMenu (\"What do you think?\", menulist, false) {\n              if (result=\"slower\") {\n                msg (\"Are you sure.  Take another look, and make sure your sound is muted.\")\n                ShowMenu (\"What do you think?\", menulist, false) {switch}\n              }\n              else if (result=\"faster\") {\n                msg (\"Are you sure.  Take another look, and make sure your sound is muted.\")\n              }\n              else if (result=\"constant\") {\n                msg (\"Great! So what you are saying is that the waves emitted from the source have a constant frequency.\")\n              }\n            }\n          }\n          else if (false) {\n            msg (\"Oh. Okay.  I'll keep working then.  If you have any questions about waves, you know where to find me!\")\n          }\n        }```\n</code></pre>\n\n",
      "PostDate": "2017-06-23T20:28:17.982657Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "522158a6-be8a-4f13-a6c4-a4d985fcc59e",
      "UserId": 310198,
      "Username": "eismanweiss",
      "AvatarUrl": "https://secure.gravatar.com/avatar/46c5ee24d74ea13ba5a68e8196480bcd?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "As an alternative to the above method, I have been trying a method where there is a \"conversationcounter\" attribute for the NPC and the user.  Not sure if this will help or over complicate the situation.\r\n\r\n```<object name=\"Christian Doppler2\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"namedmale\" />\r\n      <look type=\"script\">\r\n        picture (\"Christian_Doppler.jpg\")\r\n      </look>\r\n      <conversationcounter type=\"int\">0</conversationcounter>\r\n      <speak type=\"script\">\r\n        Ask (\"Hello!  Would you like to help me study the way light and sound waves change as an object moves?\") {\r\n          if (false) {\r\n            msg (\".Oh.  Okay.  Well, if you would like to learn more about waves, you know where to find me.  I had better get back to my research!\")\r\n          }\r\n          else if (true) {\r\n            msg (\"Great!  Let's look at this simulation\")\r\n            DisplayHttpLink (\"Simulation\", \"http://zonalandeducation.com/mstm/physics/waves/dopplerEffect/dopplerEffect.html\", false)\r\n            msg (\"Mute (uncheck) the Snare drum sound. Try snapping your fingers every time a sound wave is produced. For now, let’s call this the frequency of waves emitted by the source.\")\r\n            msg (\"Is the frequency of waves emitted by the source constant, or does it change as the source moves?  In other words, does the way you snap your fingers get faster, slower, or it is constant as the source moves along the screen?\")\r\n            question1 = NewStringList()\r\n            list add (question1, \"faster\")\r\n            list add (question1, \"slower\")\r\n            list add (question1, \"constant\")\r\n            ShowMenu (\"What do you think?\", question1, false) {\r\n              if (result=\"faster\") {\r\n                msg (\"Are you sure?  Make sure you have muted the sound and try again.\")\r\n              }\r\n              else if (result=\"slower\") {\r\n                msg (\"Are you sure?  Make sure you have muted the sound and try again.\")\r\n              }\r\n              else if (result = \"constant\") {\r\n                Christian Doppler2.conversationcounter = Christian Doppler2.conversationcounter + 1\r\n                msg (\"Great! So what you are saying is that the waves emitted from the source have a constant frequency.\")\r\n              }\r\n              if (Christian Doppler2.conversationcounter = 1) {\r\n                msg (\"Next Question\")\r\n              }\r\n              else if (Christian Doppler2.conversationcounter = 0) {\r\n              }\r\n            }\r\n          }\r\n        }\r\n```\r\n\r\nThanks!",
      "EditableFormat": "markdown",
      "HTML": "<p>As an alternative to the above method, I have been trying a method where there is a \"conversationcounter\" attribute for the NPC and the user.  Not sure if this will help or over complicate the situation.</p>\n<pre><code>      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"namedmale\" /&gt;\n      &lt;look type=\"script\"&gt;\n        picture (\"Christian_Doppler.jpg\")\n      &lt;/look&gt;\n      &lt;conversationcounter type=\"int\"&gt;0&lt;/conversationcounter&gt;\n      &lt;speak type=\"script\"&gt;\n        Ask (\"Hello!  Would you like to help me study the way light and sound waves change as an object moves?\") {\n          if (false) {\n            msg (\".Oh.  Okay.  Well, if you would like to learn more about waves, you know where to find me.  I had better get back to my research!\")\n          }\n          else if (true) {\n            msg (\"Great!  Let's look at this simulation\")\n            DisplayHttpLink (\"Simulation\", \"http://zonalandeducation.com/mstm/physics/waves/dopplerEffect/dopplerEffect.html\", false)\n            msg (\"Mute (uncheck) the Snare drum sound. Try snapping your fingers every time a sound wave is produced. For now, let’s call this the frequency of waves emitted by the source.\")\n            msg (\"Is the frequency of waves emitted by the source constant, or does it change as the source moves?  In other words, does the way you snap your fingers get faster, slower, or it is constant as the source moves along the screen?\")\n            question1 = NewStringList()\n            list add (question1, \"faster\")\n            list add (question1, \"slower\")\n            list add (question1, \"constant\")\n            ShowMenu (\"What do you think?\", question1, false) {\n              if (result=\"faster\") {\n                msg (\"Are you sure?  Make sure you have muted the sound and try again.\")\n              }\n              else if (result=\"slower\") {\n                msg (\"Are you sure?  Make sure you have muted the sound and try again.\")\n              }\n              else if (result = \"constant\") {\n                Christian Doppler2.conversationcounter = Christian Doppler2.conversationcounter + 1\n                msg (\"Great! So what you are saying is that the waves emitted from the source have a constant frequency.\")\n              }\n              if (Christian Doppler2.conversationcounter = 1) {\n                msg (\"Next Question\")\n              }\n              else if (Christian Doppler2.conversationcounter = 0) {\n              }\n            }\n          }\n        }\n</code></pre>\n<p>Thanks!</p>\n\n",
      "PostDate": "2017-06-23T20:31:17.9757185Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3232dd1d-8702-4261-a68e-1b605c33ce71",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The `ask` scipt command sets a variable called `result`, so should be used:\r\n```\r\nAsk (\"Hello!  Would you like to help me study the way light and sound waves change as an object moves?\") {\r\n          if (not result) {\r\n            msg (\".Oh.  Okay.  Well, if you would like to learn more about waves, you know where to find me.  I had better get back to my research!\")\r\n          }\r\n          else {\r\n            ...\r\n```\r\nThis will never happen:\r\n```\r\n          if (false) {\r\n            msg (\".Oh.  Okay.  Well, if you would like to learn more about waves, you know where to find me.  I had better get back to my research!\")\r\n```\r\n\r\nTo get the wrong answer to loop back, you will need to do all this in a function, and then call the function from within itself (called recursion). A simpler alternative might be to just allow the player to talk to Doppler again.",
      "EditableFormat": "markdown",
      "HTML": "<p>The <code>ask</code> scipt command sets a variable called <code>result</code>, so should be used:</p>\n<pre><code>Ask (\"Hello!  Would you like to help me study the way light and sound waves change as an object moves?\") {\n          if (not result) {\n            msg (\".Oh.  Okay.  Well, if you would like to learn more about waves, you know where to find me.  I had better get back to my research!\")\n          }\n          else {\n            ...\n</code></pre>\n<p>This will never happen:</p>\n<pre><code>          if (false) {\n            msg (\".Oh.  Okay.  Well, if you would like to learn more about waves, you know where to find me.  I had better get back to my research!\")\n</code></pre>\n<p>To get the wrong answer to loop back, you will need to do all this in a function, and then call the function from within itself (called recursion). A simpler alternative might be to just allow the player to talk to Doppler again.</p>\n\n",
      "PostDate": "2017-06-23T20:47:52.7538971Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bdcf7579-9430-4d13-9930-5bf07a9c221d",
      "UserId": 310198,
      "Username": "eismanweiss",
      "AvatarUrl": "https://secure.gravatar.com/avatar/46c5ee24d74ea13ba5a68e8196480bcd?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "There are going to be a series of questions, so I guess recursive functions are my only option.",
      "EditableFormat": "markdown",
      "HTML": "<p>There are going to be a series of questions, so I guess recursive functions are my only option.</p>\n\n",
      "PostDate": "2017-06-23T20:57:03.1867583Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "251da0fe-6ead-489b-af27-2a9f63646139",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "unfortunately, there's only (tail) recursion and/or using the 'while' Function for looping, but there's also the issue/crash/error that you got to deal with (you got to be much more creative with your scripting design) of doing looping while doing such functions that are waiting for (typed-in and/or maybe hyperlink/button presses) inputs and/or use a popup menu window for input selection ('get input','show menu', 'ask', etc), as only one of these can be active at a time, and the looping happens faster than the human can respond, thus creating two of them at the same time, and thus the error/crash. The tail recursion works pretty well, though if you can use 'while' instead of doing tail recursion, that's probably better/more-efficient/less-overhead, though I've no idea how the 'while' Function works compared to tail recursion in the number of operations/processes it's doing and/or how much overhead (activation record / frame) is involved with 'while' vs the 'tail' recursion.\r\n\r\nthere's also (list/string) iteration looping, but it's not the same thing as the 'looping' looping that we're talking about for your topic.\r\n\r\n-------------\r\n\r\nwe do have some advanced dialogue/conversation code/design/library available by Pixie/Jay(jaynabonne), if you're interested.\r\n\r\n(let me know if you need help finding them)\r\n\r\n-----------\r\n\r\nalso, maybe some of this can be of help to you as well (if at least for maybe ideas, anyways):\r\n\r\n(my brain wasn't working, and I didn't realize to consolidate my redundent functions into a single function using parameters, at the time, so ignore the bad/poor quality of it):\r\n\r\nhttp://textadventures.co.uk/forum/samples/topic/4988/character-creation-crude-code-and-sample-game\r\n\r\nask if you got any questions about anything or need help with anything",
      "EditableFormat": "markdown",
      "HTML": "<p>unfortunately, there's only (tail) recursion and/or using the 'while' Function for looping, but there's also the issue/crash/error that you got to deal with (you got to be much more creative with your scripting design) of doing looping while doing such functions that are waiting for (typed-in and/or maybe hyperlink/button presses) inputs and/or use a popup menu window for input selection ('get input','show menu', 'ask', etc), as only one of these can be active at a time, and the looping happens faster than the human can respond, thus creating two of them at the same time, and thus the error/crash. The tail recursion works pretty well, though if you can use 'while' instead of doing tail recursion, that's probably better/more-efficient/less-overhead, though I've no idea how the 'while' Function works compared to tail recursion in the number of operations/processes it's doing and/or how much overhead (activation record / frame) is involved with 'while' vs the 'tail' recursion.</p>\n<p>there's also (list/string) iteration looping, but it's not the same thing as the 'looping' looping that we're talking about for your topic.</p>\n<hr>\n<p>we do have some advanced dialogue/conversation code/design/library available by Pixie/Jay(jaynabonne), if you're interested.</p>\n<p>(let me know if you need help finding them)</p>\n<hr>\n<p>also, maybe some of this can be of help to you as well (if at least for maybe ideas, anyways):</p>\n<p>(my brain wasn't working, and I didn't realize to consolidate my redundent functions into a single function using parameters, at the time, so ignore the bad/poor quality of it):</p>\n<p>http://textadventures.co.uk/forum/samples/topic/4988/character-creation-crude-code-and-sample-game</p>\n<p>ask if you got any questions about anything or need help with anything</p>\n\n",
      "PostDate": "2017-06-24T01:32:05.4389766Z",
      "LastEditDate": "2017-06-24T01:36:44.2957909Z",
      "link": null
    }
  ]
}
