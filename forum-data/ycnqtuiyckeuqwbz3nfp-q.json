{
  "Topic": {
    "TopicId": "ycnqtuiyckeuqwbz3nfp-q",
    "ForumId": "10",
    "Title": "Quest JS - another sort of update",
    "LastUpdated": "2018-01-29T01:25:20.4374755Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "28f1014a-97d5-4192-96ed-5886bd3169c3",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I made the object links work (finally), but I need to figure out how to bind the functions to them on game load without the menu popping up...\r\n\r\nIt also displays the object's listalias in the pane, if the object has one.\r\n\r\n---\r\n\r\nThanks to Raist and mrangel!\r\n\r\n\r\n---\r\n\r\nQuestJS no longer compiles playable games, as of Quest 5.7.2.",
      "EditableFormat": "markdown",
      "HTML": "<p>I made the object links work (finally), but I need to figure out how to bind the functions to them on game load without the menu popping up...</p>\n<p>It also displays the object's listalias in the pane, if the object has one.</p>\n<hr>\n<p>Thanks to Raist and mrangel!</p>\n<hr>\n<p>QuestJS no longer compiles playable games, as of Quest 5.7.2.</p>\n\n",
      "PostDate": "2018-01-29T01:25:20.4374755Z",
      "LastEditDate": "2018-03-22T02:35:21.8223228Z",
      "link": null
    },
    {
      "PostId": "2400674e-9c15-49b4-8ee1-2db0f054129e",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I need this to happen when each link with the class 'elementmenu' is printed:\r\n\r\n```\r\nbindMenu($('.elementmenu').attr('id'), $('.elementmenu').attr('data-verbs'), $('.elementmenu').html(), false);\r\n```\r\n\r\nAny suggestions?",
      "EditableFormat": "markdown",
      "HTML": "<p>I need this to happen when each link with the class 'elementmenu' is printed:</p>\n<pre><code>bindMenu($('.elementmenu').attr('id'), $('.elementmenu').attr('data-verbs'), $('.elementmenu').html(), false);\n</code></pre>\n<p>Any suggestions?</p>\n\n",
      "PostDate": "2018-01-29T01:54:14.016317Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e356fcbc-9914-4a9e-8a0c-221a9e9df3fb",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ha!\r\n\r\nI got it!",
      "EditableFormat": "markdown",
      "HTML": "<p>Ha!</p>\n<p>I got it!</p>\n\n",
      "PostDate": "2018-01-29T02:00:32.5928739Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3831f2b7-218f-4cb0-9ff6-859ea0067a14",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "QuestJS no longer compiles playable games, as of Quest 5.7.2.",
      "EditableFormat": "markdown",
      "HTML": "<p>QuestJS no longer compiles playable games, as of Quest 5.7.2.</p>\n\n",
      "PostDate": "2018-01-29T02:14:50.5095979Z",
      "LastEditDate": "2018-03-22T02:35:41.1679604Z",
      "link": null
    },
    {
      "PostId": "91fc9a3f-239c-4d2b-a2ce-4d1d1a447247",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Good going.\r\n\r\nInterested to see the progress of this project; but from what I can understand, I don't think I like the core structure.\r\nAt some point I intend to try building my own JS-Quest thing, starting from the other way of doing it.",
      "EditableFormat": "markdown",
      "HTML": "<p>Good going.</p>\n<p>Interested to see the progress of this project; but from what I can understand, I don't think I like the core structure.<br>\nAt some point I intend to try building my own JS-Quest thing, starting from the other way of doing it.</p>\n\n",
      "PostDate": "2018-01-29T11:28:24.3545585Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "285f5b6b-2a60-4aba-9d3a-c88b9a7ca97b",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you, sir.\r\n\r\n..and yeah...  Quest JS just takes in a .quest file and (sometimes) spits out a website.\r\n\r\nYou still have to have Windows to run it.  (In fact, [I've gotten Quest to do everything EXCEPT play a game under Wine in Linux](https://textadventures.co.uk/forum/quest/topic/ilec7mfynuqns4zyp4umwq/getting-quest-to-run-outside-of-windows#493bddc6-039b-408a-ac1b-152c4cfb85ce), but I can't get Quest JS to even open under Wine.)  So, it's sort of worthless if you only have *Nix.\r\n\r\n...but, it *does*&nbsp;have 80% of the Quest functions translated to JS in the file called **game.js**.\r\n\r\nhttps://github.com/KVonGit/quest-js/blob/master/Compiler/game.js\r\n\r\nAs far as I can tell, the game will not compile when the game contains a function which does not exist in game.js.  (Or something to that effect.)\r\n\r\n---\r\nIn a perfect world, Quest would run under any platform, and you could compile to a website.\r\n\r\nAlex tried to pull this off with Quest 6, but the only part that runs in *Nix is the player, and you need gulp to run it on a local server.\r\n\r\nPlus, it only plays the example game you can publish with Quest 6.  AND if you alter that example game at all, nothing works when you play that game in the Quest 6 game runner (or hoster, or whatever it is).\r\n\r\nMr. Warren posted about Quest 6's editor running in *Nix and compiling to a website for quite a while, but the editor only runs in Windows.  \r\n\r\nThere are posts after the last update to Quest 6 which say QuestKit is (was) destined to be the Quest for all platforms.\r\n\r\nBasically, *it seems to me*&nbsp; that he realized Quest wasn't getting ported without rewriting more than 75% of it, especially anything concerning the GUI editor.\r\n\r\nAll the functions (and scripts) need JS equivalents to run in the browser without the server.\r\n\r\nBlah, blah, blah...\r\n\r\nI've tried to use MonoDevelop.  It will load the project, but it some of the files' formats don't work with it.  So, that failed.\r\n\r\nI toyed with the notion of creating a GTK+ interface, but I got nowhere fast with Glade.\r\n\r\nI do have a version of game.js I've been altering so I can run a quasi-Quest game from scratch.\r\n\r\nI've got an HTML file with the appropriate elements (and ids and classes).\r\n\r\nI just write a separate JS file, which works just like Quest's .aslx file, calling functions from game.js.\r\n\r\nIt works fairly well, except for the scrolling...  It works right most of the time.\r\n\r\n...but the scrolling doesn't matter.  Neither does the HTML at this point.\r\n\r\nOnce I get all the functions converted to JS, we could easily use the HTML from the web editor as the GUI, and just pull the values of the fields to created the game's own JS file.  (Did I make sense that entire time?  Probably not...)",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you, sir.</p>\n<p>..and yeah...  Quest JS just takes in a .quest file and (sometimes) spits out a website.</p>\n<p>You still have to have Windows to run it.  (In fact, <a href=\"https://textadventures.co.uk/forum/quest/topic/ilec7mfynuqns4zyp4umwq/getting-quest-to-run-outside-of-windows#493bddc6-039b-408a-ac1b-152c4cfb85ce\">I've gotten Quest to do everything EXCEPT play a game under Wine in Linux</a>, but I can't get Quest JS to even open under Wine.)  So, it's sort of worthless if you only have *Nix.</p>\n<p>...but, it <em>does</em>&nbsp;have 80% of the Quest functions translated to JS in the file called <strong>game.js</strong>.</p>\n<p>https://github.com/KVonGit/quest-js/blob/master/Compiler/game.js</p>\n<p>As far as I can tell, the game will not compile when the game contains a function which does not exist in game.js.  (Or something to that effect.)</p>\n<hr>\n<p>In a perfect world, Quest would run under any platform, and you could compile to a website.</p>\n<p>Alex tried to pull this off with Quest 6, but the only part that runs in *Nix is the player, and you need gulp to run it on a local server.</p>\n<p>Plus, it only plays the example game you can publish with Quest 6.  AND if you alter that example game at all, nothing works when you play that game in the Quest 6 game runner (or hoster, or whatever it is).</p>\n<p>Mr. Warren posted about Quest 6's editor running in *Nix and compiling to a website for quite a while, but the editor only runs in Windows.</p>\n<p>There are posts after the last update to Quest 6 which say QuestKit is (was) destined to be the Quest for all platforms.</p>\n<p>Basically, <em>it seems to me</em>&nbsp; that he realized Quest wasn't getting ported without rewriting more than 75% of it, especially anything concerning the GUI editor.</p>\n<p>All the functions (and scripts) need JS equivalents to run in the browser without the server.</p>\n<p>Blah, blah, blah...</p>\n<p>I've tried to use MonoDevelop.  It will load the project, but it some of the files' formats don't work with it.  So, that failed.</p>\n<p>I toyed with the notion of creating a GTK+ interface, but I got nowhere fast with Glade.</p>\n<p>I do have a version of game.js I've been altering so I can run a quasi-Quest game from scratch.</p>\n<p>I've got an HTML file with the appropriate elements (and ids and classes).</p>\n<p>I just write a separate JS file, which works just like Quest's .aslx file, calling functions from game.js.</p>\n<p>It works fairly well, except for the scrolling...  It works right most of the time.</p>\n<p>...but the scrolling doesn't matter.  Neither does the HTML at this point.</p>\n<p>Once I get all the functions converted to JS, we could easily use the HTML from the web editor as the GUI, and just pull the values of the fields to created the game's own JS file.  (Did I make sense that entire time?  Probably not...)</p>\n\n",
      "PostDate": "2018-01-29T14:45:02.9596819Z",
      "LastEditDate": "2018-02-02T22:20:15.5221313Z",
      "link": null
    },
    {
      "PostId": "f5fa5f71-31b7-4a22-953d-1f5a32b7036b",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "In fact, MrAngel...\r\n\r\nJust after you unwillingly went off the grid, I attempted to convert an .aslx file to JSON, then use JS to create objects from that.\r\n\r\nhttps://textadventures.co.uk/forum/quest/topic/iua84phpek_x5pnyc6z5qq/json\r\n\r\nIt was almost successful.\r\n\r\nI think this would be better than Quest JS if I could break it all the way down.\r\n\r\nHere's the closest I got (this is the last pertinent post in that same thread):\r\nhttps://textadventures.co.uk/forum/quest/topic/iua84phpek_x5pnyc6z5qq/json#b92be5a0-32aa-4c4a-a5b5-413984abd9ff\r\n\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>In fact, MrAngel...</p>\n<p>Just after you unwillingly went off the grid, I attempted to convert an .aslx file to JSON, then use JS to create objects from that.</p>\n<p>https://textadventures.co.uk/forum/quest/topic/iua84phpek_x5pnyc6z5qq/json</p>\n<p>It was almost successful.</p>\n<p>I think this would be better than Quest JS if I could break it all the way down.</p>\n<p>Here's the closest I got (this is the last pertinent post in that same thread):<br>\nhttps://textadventures.co.uk/forum/quest/topic/iua84phpek_x5pnyc6z5qq/json#b92be5a0-32aa-4c4a-a5b5-413984abd9ff</p>\n\n",
      "PostDate": "2018-01-29T14:56:26.6031919Z",
      "LastEditDate": "2018-02-02T22:19:46.1853587Z",
      "link": null
    },
    {
      "PostId": "8385c25c-456a-4045-a5a7-9f2f2dfb8d80",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "To me, compiling Quest to JS seems like it will always have issues with games that might rely on its async behaviours. Could work, but implemented in a language I don't like anyway :p\r\n\r\nMy \"other method\" was going to be writing an interpreter for Quest script in Javascript. Parsing the XML file isn't going to be a problem, because jQuery can handle arbitrary XML formats a little better than it deals with HTML.\r\n\r\n(I got distracted wondering if I should do a pure JS version of the editor too. It's easy enough to make it work, but in the process I realised just how weird the XML format is for libraries that want to add editor components, and got distracted into trying to work out additions that could make it more elegant)\r\n\r\n\r\n[Signature/begging PS: I'm releasing a new book, _Pasts & Futures_, at the start of Feb. I'm trying to improve my Author Rank so that it gets a high position on the \"This week's new releases\" page, so am urging anybody who cares to check out [Into Dreams](http://smarturl.it/intodreams) (which is free on Kindle until Thursday) or some of my other books while waiting for the new one to appear]",
      "EditableFormat": "markdown",
      "HTML": "<p>To me, compiling Quest to JS seems like it will always have issues with games that might rely on its async behaviours. Could work, but implemented in a language I don't like anyway :p</p>\n<p>My \"other method\" was going to be writing an interpreter for Quest script in Javascript. Parsing the XML file isn't going to be a problem, because jQuery can handle arbitrary XML formats a little better than it deals with HTML.</p>\n<p>(I got distracted wondering if I should do a pure JS version of the editor too. It's easy enough to make it work, but in the process I realised just how weird the XML format is for libraries that want to add editor components, and got distracted into trying to work out additions that could make it more elegant)</p>\n<p>[Signature/begging PS: I'm releasing a new book, <em>Pasts &amp; Futures</em>, at the start of Feb. I'm trying to improve my Author Rank so that it gets a high position on the \"This week's new releases\" page, so am urging anybody who cares to check out <a href=\"http://smarturl.it/intodreams\">Into Dreams</a> (which is free on Kindle until Thursday) or some of my other books while waiting for the new one to appear]</p>\n\n",
      "PostDate": "2018-01-29T15:13:23.6762459Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "68f28b4b-8ce2-4054-903b-5d1616b19885",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I added a few more things.\r\n\r\n---\r\n>My \"other method\" was going to be writing an interpreter for Quest script in Javascript. Parsing the XML file isn't going to be a problem, because jQuery can handle arbitrary XML formats a little better than it deals with HTML.\r\n>\r\n>(I got distracted wondering if I should do a pure JS version of the editor too.\r\n\r\n\r\nSame here.\r\n\r\nThat's what I'm posting about in that thread I linked to.\r\n\r\n---\r\n\r\nMy Kindle is now charging.\r\n\r\nI'll check out the book(s) shortly.",
      "EditableFormat": "markdown",
      "HTML": "<p>I added a few more things.</p>\n<hr>\n<blockquote>\n<p>My \"other method\" was going to be writing an interpreter for Quest script in Javascript. Parsing the XML file isn't going to be a problem, because jQuery can handle arbitrary XML formats a little better than it deals with HTML.</p>\n<p>(I got distracted wondering if I should do a pure JS version of the editor too.</p>\n</blockquote>\n<p>Same here.</p>\n<p>That's what I'm posting about in that thread I linked to.</p>\n<hr>\n<p>My Kindle is now charging.</p>\n<p>I'll check out the book(s) shortly.</p>\n\n",
      "PostDate": "2018-01-30T09:18:11.6389101Z",
      "LastEditDate": "2018-03-22T02:36:20.4500429Z",
      "link": null
    },
    {
      "PostId": "c19fb65f-713a-45e6-a822-df5601ed3058",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I was confused why you're converting the .aslx file to JSON. I was looking at something more like:\r\n\r\n```\r\n$(function() {\r\n  $.get (\"URL of an .aslx file\", , function (data) {\r\n    var quest_file = $(data);\r\n    var player_object = quest_file.find(\"object[name='player']\");\r\n    var starting_room = player_object.parent();\r\n    alert (\"File loaded! Simple test, the player is in room: \"+(starting_room.attr(\"alias\") || starting_room.attr(\"name\")));\r\n    // code to actually parse the game's scripts goes here :-p\r\n  });\r\n});\r\n```\r\n\r\nThough if I was building something more complex, I'd likely start with:\r\n```\r\n  quest_file.find(\"object[name]:not([id])\").each(function () { $(this).attr('id', this.name); });\r\n```\r\nSo that I can then use `quest_file.find(\"#player\")` to get any object by name.",
      "EditableFormat": "markdown",
      "HTML": "<p>I was confused why you're converting the .aslx file to JSON. I was looking at something more like:</p>\n<pre><code>$(function() {\n  $.get (\"URL of an .aslx file\", , function (data) {\n    var quest_file = $(data);\n    var player_object = quest_file.find(\"object[name='player']\");\n    var starting_room = player_object.parent();\n    alert (\"File loaded! Simple test, the player is in room: \"+(starting_room.attr(\"alias\") || starting_room.attr(\"name\")));\n    // code to actually parse the game's scripts goes here :-p\n  });\n});\n</code></pre>\n<p>Though if I was building something more complex, I'd likely start with:</p>\n<pre><code>  quest_file.find(\"object[name]:not([id])\").each(function () { $(this).attr('id', this.name); });\n</code></pre>\n<p>So that I can then use <code>quest_file.find(\"#player\")</code> to get any object by name.</p>\n\n",
      "PostDate": "2018-01-30T14:28:29.1568931Z",
      "LastEditDate": "2018-01-30T15:52:54.5789608Z",
      "link": null
    }
  ]
}
