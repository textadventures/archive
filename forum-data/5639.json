{
  "Topic": {
    "TopicId": "5639",
    "ForumId": "10",
    "Title": "Turn-Script Question",
    "LastUpdated": "2015-11-24T05:16:23+00:00",
    "ReplyCount": 17
  },
  "Posts": [
    {
      "PostId": "38793",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "Hello, hello! So I reviewed the tutorial on Turn-Scripts...but it wasn't quite what I was thinking so I've become a bit stumped. \n\nI have an item &quot;Lantern&quot; and another item called &quot;Small Oil Cartridges&quot; that are supposed to go with it. ((I'm not so keen on the Use/Give scripts because they are a little confusing)). The idea is that if the player has an oil cartridge and uses the verb on the lantern &quot;use oil&quot; then it'll auto-illuminate the lantern. From there I would like the lantern light to become a turn-based timer, for example, after 15 turns the lantern will go out and the player will have to use another cartridge. Different sizes (4 different sizes current planned) will increase the turns that the oil cartridges last. \n\nIs there a better way to do this? If not, how would I set up a turn script? I notice in the tutorial that it's put on the player, so in this case do I put an attribute on the lantern called &quot;turns&quot; and make it an integer? \n\nHere's the code of what I have so far.\n\n[u:2d83teoi]Lantern[/u:2d83teoi]\n[quote:2d83teoi]if (not Got(small_oil_cartridge)) {\n  msg (&quot;&lt;br/&gt;Without oil, you cannot light this lantern. It is essentially useless right now. &lt;br/&gt;&quot;)\n}\nelse if (Got(small_oil_cartridge)) {\n  msg (&quot;&lt;br/&gt;After inserting an oil cartridge into the slot, you gently close the opening and then gingerly turn the knob a few times until you hear a soft click. Moments later, a bright glow begins emitting from the old contraption. Inside, an orange flame burns brightly, which can now act as a guide through dark places. An orange glow surrounds you. &lt;br/&gt;&quot;)\n  SetObjectLightstrength (old_lantern, &quot;strong&quot;)\n  use_container (&quot;small_oil_cartridge&quot;)\n}[/quote:2d83teoi]\n\nAnd currently the small oil cartridges don't have any scripts yet. I will be adding the other sizes to the lantern script as well which will be similar to the small, except with modified descriptions for brightness.",
      "EditableFormat": "bbcode",
      "HTML": "Hello, hello! So I reviewed the tutorial on Turn-Scripts...but it wasn't quite what I was thinking so I've become a bit stumped. <br/><br/>I have an item &quot;Lantern&quot; and another item called &quot;Small Oil Cartridges&quot; that are supposed to go with it. ((I'm not so keen on the Use/Give scripts because they are a little confusing)). The idea is that if the player has an oil cartridge and uses the verb on the lantern &quot;use oil&quot; then it'll auto-illuminate the lantern. From there I would like the lantern light to become a turn-based timer, for example, after 15 turns the lantern will go out and the player will have to use another cartridge. Different sizes (4 different sizes current planned) will increase the turns that the oil cartridges last. <br/><br/>Is there a better way to do this? If not, how would I set up a turn script? I notice in the tutorial that it's put on the player, so in this case do I put an attribute on the lantern called &quot;turns&quot; and make it an integer? <br/><br/>Here's the code of what I have so far.<br/><br/><span style=\"text-decoration:underline;\">Lantern</span><br/><blockquote><p>if (not Got(small_oil_cartridge)) {<br/>  msg (&quot;&lt;br/&gt;Without oil, you cannot light this lantern. It is essentially useless right now. &lt;br/&gt;&quot;)<br/>}<br/>else if (Got(small_oil_cartridge)) {<br/>  msg (&quot;&lt;br/&gt;After inserting an oil cartridge into the slot, you gently close the opening and then gingerly turn the knob a few times until you hear a soft click. Moments later, a bright glow begins emitting from the old contraption. Inside, an orange flame burns brightly, which can now act as a guide through dark places. An orange glow surrounds you. &lt;br/&gt;&quot;)<br/>  SetObjectLightstrength (old_lantern, &quot;strong&quot;)<br/>  use_container (&quot;small_oil_cartridge&quot;)<br/>}</p></blockquote><br/><br/>And currently the small oil cartridges don't have any scripts yet. I will be adding the other sizes to the lantern script as well which will be similar to the small, except with modified descriptions for brightness.",
      "PostDate": "2015-11-21T18:05:29+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38794",
      "UserId": 0,
      "Username": "TinFoilMkIV",
      "UserAvatar": null,
      "UserGravatar": "d70c7b1a4be0b3fe6f68912d606f4298",
      "EditableText": "In the tutorial the turn script itself is just in the general objects tree, it's not actually inside any rooms at all, which is where it needs to be if you want it to be able to apply at any point in the game, as placing it inside a room will make it only active inside that room.\n\nThe part you were seeing on the player object is just a basic integer attribute. They created the attribute first so they had something to modify with the turn script, while the script simply adds +1 to the player.turn value every time it goes off. So basically you would just put a turn counter for how many turns of light you have left on the lantern and have the script modify that instead.\n\nThat being said turn scripts can be a bit tricky depending on what exactly you want out of them, and it's likely you'll want something a bit more than just the basic functionality. The problem here is that a standard turn scrip that's active goes off every time the player enters an input no matter what it is, even if it's an invalid command, the turn script still goes off. So you might see how that could be a problem with a time limited light source that loses fuel even when taking actions that shouldn't take an actual in game turn, or even a typo.\n\nI'm not really sure the best way to go about it, but you will need a way for the game to determine what actions count as an actual game turn, and then use an attribute to let it know when that turn is actually happening. The first thing that comes to mind for me is to add code to any verb or command that qualifies as a full turn action, and have that set an attribute to signify that a turn has passed. Then in the turn script itself have it start with an 'if' statement that checks to see whether this attribute has been set, if yes, then do your normal turn stuff that needs to be done, then set the turn variable back off, and if not, then do nothing. This way you have control over what inputs count as an actual turn, although you then have to make sure every action that should be a turn actually counts as one.\n\n\nEDIT: found a source to confirm the issue with quest counting any input as a &quot;turn&quot; for turn scripts, so a completely unrestricted turn script is generally undesirable in most cases.\n[quote:1hk2ae2g]Note\nQuest counts each player input as a turn. If the player spending 10 turns typing commands that are not recognised, that is still 10 turns.[/quote:1hk2ae2g]\n<!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/guides/turn_based_events.html\">http://docs.textadventures.co.uk/quest/ ... vents.html</a><!-- m -->",
      "EditableFormat": "bbcode",
      "HTML": "In the tutorial the turn script itself is just in the general objects tree, it's not actually inside any rooms at all, which is where it needs to be if you want it to be able to apply at any point in the game, as placing it inside a room will make it only active inside that room.<br/><br/>The part you were seeing on the player object is just a basic integer attribute. They created the attribute first so they had something to modify with the turn script, while the script simply adds +1 to the player.turn value every time it goes off. So basically you would just put a turn counter for how many turns of light you have left on the lantern and have the script modify that instead.<br/><br/>That being said turn scripts can be a bit tricky depending on what exactly you want out of them, and it's likely you'll want something a bit more than just the basic functionality. The problem here is that a standard turn scrip that's active goes off every time the player enters an input no matter what it is, even if it's an invalid command, the turn script still goes off. So you might see how that could be a problem with a time limited light source that loses fuel even when taking actions that shouldn't take an actual in game turn, or even a typo.<br/><br/>I'm not really sure the best way to go about it, but you will need a way for the game to determine what actions count as an actual game turn, and then use an attribute to let it know when that turn is actually happening. The first thing that comes to mind for me is to add code to any verb or command that qualifies as a full turn action, and have that set an attribute to signify that a turn has passed. Then in the turn script itself have it start with an 'if' statement that checks to see whether this attribute has been set, if yes, then do your normal turn stuff that needs to be done, then set the turn variable back off, and if not, then do nothing. This way you have control over what inputs count as an actual turn, although you then have to make sure every action that should be a turn actually counts as one.<br/><br/><br/>EDIT: found a source to confirm the issue with quest counting any input as a &quot;turn&quot; for turn scripts, so a completely unrestricted turn script is generally undesirable in most cases.<br/><blockquote><p>Note<br/>Quest counts each player input as a turn. If the player spending 10 turns typing commands that are not recognised, that is still 10 turns.</p></blockquote><br/><!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/guides/turn_based_events.html\">http://docs.textadventures.co.uk/quest/ ... vents.html</a><!-- m -->",
      "PostDate": "2015-11-21T18:44:27+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38795",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "there's a few ways to deal with Turnscripts:\n\n1. have an 'if' Script, and thus, so while the Turnscript is activating every action you do, the 'if' Script in the Turnscirpt, is preventing the (rest of the) scripts inside of the Turnscript, from activating (until~unless the 'if' Script's condition is met).\n\n2. enable~disable the Turnscript as needed.\n\n---------\n\nas for &quot;Turns&quot;, there's:\n\nThe quest engine's Internal Turns:\n\nthe internal turns, which are generally any action that you do (clicking and~or typing+entering during game play), which the Turnscript uses for its interval of firing off its scripts (if it's enabled and~or you're in its room: if its a local turnscript).\n\nI'm not aware of how (or if) these can be worked with or manipulated, or even (directly) displayed.\n\nYou can create your own &quot;turns&quot; Attribute, which can be based upon the internal turns or upon your own Scripting (for example: if you &quot;rest&quot; during the game, say 50 turns go by, and if you &quot;sleep&quot; during the game, say 100 turns go by, but if you just look at your character screen, no turns go by). Not the best example, as usually you'd have the turns be in terms of hrs and~or mins, but hopefully you get the concept. *EACH* action~verb~scripting~etc you do, would need scripts determining whether to increase your turns or not, and if so, then by how many).\n\nsome quick pseudocode examples:\n\n'eat' Verb~Command:\n\nsnack or meal?\nif snack, turns increase by 5\nif meal, turns increase by 10\n\n&quot;walk north&quot; Verb-Command~Compass:\n\ngo to townA or townB?\nif townA, turns increase by 50\nif townB, turns increase by 100\n\nyou're in control of the turns fully, but this is a lot of work~coding to do...\n\nif you want to implement this concept with a Turnscript, it's a bit more tricky (as a Turnscript is more like a Command, in that you deal with all the possibilities, as opposed to a Verb, where you only deal with a few specific possibilities for each Verb), but generally the same concept.",
      "EditableFormat": "bbcode",
      "HTML": "there's a few ways to deal with Turnscripts:<br/><br/>1. have an 'if' Script, and thus, so while the Turnscript is activating every action you do, the 'if' Script in the Turnscirpt, is preventing the (rest of the) scripts inside of the Turnscript, from activating (until~unless the 'if' Script's condition is met).<br/><br/>2. enable~disable the Turnscript as needed.<br/><br/>---------<br/><br/>as for &quot;Turns&quot;, there's:<br/><br/>The quest engine's Internal Turns:<br/><br/>the internal turns, which are generally any action that you do (clicking and~or typing+entering during game play), which the Turnscript uses for its interval of firing off its scripts (if it's enabled and~or you're in its room: if its a local turnscript).<br/><br/>I'm not aware of how (or if) these can be worked with or manipulated, or even (directly) displayed.<br/><br/>You can create your own &quot;turns&quot; Attribute, which can be based upon the internal turns or upon your own Scripting (for example: if you &quot;rest&quot; during the game, say 50 turns go by, and if you &quot;sleep&quot; during the game, say 100 turns go by, but if you just look at your character screen, no turns go by). Not the best example, as usually you'd have the turns be in terms of hrs and~or mins, but hopefully you get the concept. *EACH* action~verb~scripting~etc you do, would need scripts determining whether to increase your turns or not, and if so, then by how many).<br/><br/>some quick pseudocode examples:<br/><br/>'eat' Verb~Command:<br/><br/>snack or meal?<br/>if snack, turns increase by 5<br/>if meal, turns increase by 10<br/><br/>&quot;walk north&quot; Verb-Command~Compass:<br/><br/>go to townA or townB?<br/>if townA, turns increase by 50<br/>if townB, turns increase by 100<br/><br/>you're in control of the turns fully, but this is a lot of work~coding to do...<br/><br/>if you want to implement this concept with a Turnscript, it's a bit more tricky (as a Turnscript is more like a Command, in that you deal with all the possibilities, as opposed to a Verb, where you only deal with a few specific possibilities for each Verb), but generally the same concept.",
      "PostDate": "2015-11-21T20:54:18+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38796",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "[quote=&quot;TinFoilMkIV&quot;:2wjcme77]In the tutorial the turn script itself is just in the general objects tree, it's not actually inside any rooms at all, which is where it needs to be if you want it to be able to apply at any point in the game, as placing it inside a room will make it only active inside that room.[/quote:2wjcme77]\nIf it is in the general tree it will run whatever room the player is in, which what neonayon wants.\n[quote:2wjcme77]That being said turn scripts can be a bit tricky depending on what exactly you want out of them, and it's likely you'll want something a bit more than just the basic functionality. The problem here is that a standard turn scrip that's active goes off every time the player enters an input no matter what it is, even if it's an invalid command, the turn script still goes off. So you might see how that could be a problem with a time limited light source that loses fuel even when taking actions that shouldn't take an actual in game turn, or even a typo.\n\nI'm not really sure the best way to go about it, but you will need a way for the game to determine what actions count as an actual game turn, and then use an attribute to let it know when that turn is actually happening. The first thing that comes to mind for me is to add code to any verb or command that qualifies as a full turn action, and have that set an attribute to signify that a turn has passed. Then in the turn script itself have it start with an 'if' statement that checks to see whether this attribute has been set, if yes, then do your normal turn stuff that needs to be done, then set the turn variable back off, and if not, then do nothing. This way you have control over what inputs count as an actual turn, although you then have to make sure every action that should be a turn actually counts as one.[/quote:2wjcme77]\nI have implemented this, but it is not trivial. You need the built-in commands like WEST and TAKE BALL to get recognised as valid commands. Also, what counts as a valid command? If you try to go west but cannot because the door is locked, presumably the character is doing something, and that might count as a turn.\n\nA partial solution is to implement a script called &quot;unresolvedcommandhandler&quot; on the game object, and have it set a flag. You turn script can check if the flag is set, and only increment if it has not, reseting the flag. Pretty easy to do, but does not catch everything.\n\nI wanted to have in-game text displayed differently to meta-text, so I added a Print function that output text in a different colour, and with an indent, and then I had that set a flag. Then I set up new dynamic templates for TAKE, DROP, etc. over-rode various built-in functions to all use Print too. Basically all in-character text used Print, so got flagged as a successful command, anything else did not. It is a lot of effort, and if you need me to talk you through how I did it, then I would not advise trying to use. Especially if you already have a lot of your game written.\n\nBoth of these techniques assume you have only one turn script, by the way.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>TinFoilMkIV wrote:</cite>In the tutorial the turn script itself is just in the general objects tree, it's not actually inside any rooms at all, which is where it needs to be if you want it to be able to apply at any point in the game, as placing it inside a room will make it only active inside that room.</blockquote><br/>If it is in the general tree it will run whatever room the player is in, which what neonayon wants.<br/><blockquote><p>That being said turn scripts can be a bit tricky depending on what exactly you want out of them, and it's likely you'll want something a bit more than just the basic functionality. The problem here is that a standard turn scrip that's active goes off every time the player enters an input no matter what it is, even if it's an invalid command, the turn script still goes off. So you might see how that could be a problem with a time limited light source that loses fuel even when taking actions that shouldn't take an actual in game turn, or even a typo.<br/><br/>I'm not really sure the best way to go about it, but you will need a way for the game to determine what actions count as an actual game turn, and then use an attribute to let it know when that turn is actually happening. The first thing that comes to mind for me is to add code to any verb or command that qualifies as a full turn action, and have that set an attribute to signify that a turn has passed. Then in the turn script itself have it start with an 'if' statement that checks to see whether this attribute has been set, if yes, then do your normal turn stuff that needs to be done, then set the turn variable back off, and if not, then do nothing. This way you have control over what inputs count as an actual turn, although you then have to make sure every action that should be a turn actually counts as one.</p></blockquote><br/>I have implemented this, but it is not trivial. You need the built-in commands like WEST and TAKE BALL to get recognised as valid commands. Also, what counts as a valid command? If you try to go west but cannot because the door is locked, presumably the character is doing something, and that might count as a turn.<br/><br/>A partial solution is to implement a script called &quot;unresolvedcommandhandler&quot; on the game object, and have it set a flag. You turn script can check if the flag is set, and only increment if it has not, reseting the flag. Pretty easy to do, but does not catch everything.<br/><br/>I wanted to have in-game text displayed differently to meta-text, so I added a Print function that output text in a different colour, and with an indent, and then I had that set a flag. Then I set up new dynamic templates for TAKE, DROP, etc. over-rode various built-in functions to all use Print too. Basically all in-character text used Print, so got flagged as a successful command, anything else did not. It is a lot of effort, and if you need me to talk you through how I did it, then I would not advise trying to use. Especially if you already have a lot of your game written.<br/><br/>Both of these techniques assume you have only one turn script, by the way.",
      "PostDate": "2015-11-21T21:37:30+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38797",
      "UserId": 0,
      "Username": "TinFoilMkIV",
      "UserAvatar": null,
      "UserGravatar": "d70c7b1a4be0b3fe6f68912d606f4298",
      "EditableText": "[quote=&quot;The Pixie&quot;:z10sct5y][quote=&quot;TinFoilMkIV&quot;:z10sct5y]In the tutorial the turn script itself is just in the general objects tree, it's not actually inside any rooms at all, which is where it needs to be if you want it to be able to apply at any point in the game, as placing it inside a room will make it only active inside that room.[/quote:z10sct5y]\nIf it is in the general tree it will run whatever room the player is in, which what neonayon wants.\n[/quote:z10sct5y] That is what I meant, tho it's a good thing you clarified because looking back I can see I wrote that really poorly.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>The Pixie wrote:</cite><blockquote><p><b>&quot;TinFoilMkIV&quot;</b></p><p>In the tutorial the turn script itself is just in the general objects tree, it's not actually inside any rooms at all, which is where it needs to be if you want it to be able to apply at any point in the game, as placing it inside a room will make it only active inside that room.</blockquote><br/>If it is in the general tree it will run whatever room the player is in, which what neonayon wants.<br/></p></blockquote> That is what I meant, tho it's a good thing you clarified because looking back I can see I wrote that really poorly.",
      "PostDate": "2015-11-21T22:04:40+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38799",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "Hmm, so that sounds incredibly complicated. I don't mind the turn-scripts including false commands or mistypes, and I figure putting the turn-script in the &quot;game.object&quot; would likely make it global. I've just never used a turn-script before. They are little intimidating. Timers are easy xD Maybe I should just go with one of those.",
      "EditableFormat": "bbcode",
      "HTML": "Hmm, so that sounds incredibly complicated. I don't mind the turn-scripts including false commands or mistypes, and I figure putting the turn-script in the &quot;game.object&quot; would likely make it global. I've just never used a turn-script before. They are little intimidating. Timers are easy xD Maybe I should just go with one of those.",
      "PostDate": "2015-11-22T02:59:52+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38801",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "[quote:lsuxgzwr]Hmm, so that sounds incredibly complicated. I don't mind the turn-scripts including false commands or mistypes, and I figure putting the turn-script in the &quot;game.object&quot; would likely make it global. I've just never used a turn-script before. They are little intimidating. Timers are easy xD Maybe I should just go with one of those.[/quote:lsuxgzwr]\n\nSo I went ahead and tried turn-scripts but came across a very...interesting bug I think. So I have three different turn-scripts.\n\n[u:lsuxgzwr]T-Script Name[/u:lsuxgzwr]: small_oil\n[u:lsuxgzwr]T-Script Name[/u:lsuxgzwr]: medium_oil\n[u:lsuxgzwr]T-Script Name[/u:lsuxgzwr]: large_oil\n\n[u:lsuxgzwr]Here is the coding for the small_oil turn-script[/u:lsuxgzwr]\n[code:lsuxgzwr]SetTurnTimeout (15) {\n  msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)\n  SwitchOff (old_lantern)\n  DisableTurnScript (small_oil)\n}[/code:lsuxgzwr]\n\nNow...strangely enough whenever I went through to the medium and large, and changed the code to this...\n\n[code:lsuxgzwr]SetTurnTimeout (15) {\n  msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)\n  SwitchOff (old_lantern)\n  DisableTurnScript (medium_oil)\n}[/code:lsuxgzwr]\n\nIt kept changing all three turn-scripts to &quot;medium_oil&quot; or &quot;large_oil&quot;  --- which I'm not sure is the bug or not. \n\nSo I just went back and deleted the other two sizes and did this instead...\n\n[u:lsuxgzwr]Turn-Script[/u:lsuxgzwr]:\n[code:lsuxgzwr]SetTurnTimeout (35) {\n  DisableTurnScript (oil)\n  SwitchOff (old_lantern)\n  msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)\n}[/code:lsuxgzwr]\n\n[u:lsuxgzwr]Lantern[/u:lsuxgzwr]:\n[code:lsuxgzwr]if (not Got(oil_cartridge)) {\n  msg (&quot;&lt;br/&gt;Without oil, you cannot light this lantern&#46; It is essentially useless right now&lt;br/&gt;&quot;)\n}\nelse {\n  if (Got(oil_cartridge)) {\n    msg (&quot;&lt;br/&gt;After inserting an oil cartridge into the slot, you gently close the opening and then gingerly turn the knob a few times until you hear a soft click&#46; Moments later, a bright glow begins emitting from the old contraption&#46; Inside, an orange flame burns brightly, which can now act as a guide through dark places&#46; An orange glow surrounds you&#46; &lt;br/&gt;&quot;)\n    EnableTurnScript (oil)\n    SetObjectLightstrength (old_lantern, &quot;strong&quot;)\n    RemoveObject (oil_cartridge)\n  }\n}[/code:lsuxgzwr]\n\nThe only two problems I'm coming across is the &quot;Disable Turn-Script&quot; message keeps repeating endlessly after every following turn, and the lantern isn't lighting up any of the spaces that are set to &quot;dark&quot;.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><p>Hmm, so that sounds incredibly complicated. I don't mind the turn-scripts including false commands or mistypes, and I figure putting the turn-script in the &quot;game.object&quot; would likely make it global. I've just never used a turn-script before. They are little intimidating. Timers are easy xD Maybe I should just go with one of those.</p></blockquote><br/><br/>So I went ahead and tried turn-scripts but came across a very...interesting bug I think. So I have three different turn-scripts.<br/><br/><span style=\"text-decoration:underline;\">T-Script Name</span>: small_oil<br/><span style=\"text-decoration:underline;\">T-Script Name</span>: medium_oil<br/><span style=\"text-decoration:underline;\">T-Script Name</span>: large_oil<br/><br/><span style=\"text-decoration:underline;\">Here is the coding for the small_oil turn-script</span><br/><pre><code>SetTurnTimeout (15) {<br/>  msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)<br/>  SwitchOff (old_lantern)<br/>  DisableTurnScript (small_oil)<br/>}</code></pre><br/><br/>Now...strangely enough whenever I went through to the medium and large, and changed the code to this...<br/><br/><pre><code>SetTurnTimeout (15) {<br/>  msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)<br/>  SwitchOff (old_lantern)<br/>  DisableTurnScript (medium_oil)<br/>}</code></pre><br/><br/>It kept changing all three turn-scripts to &quot;medium_oil&quot; or &quot;large_oil&quot;  --- which I'm not sure is the bug or not. <br/><br/>So I just went back and deleted the other two sizes and did this instead...<br/><br/><span style=\"text-decoration:underline;\">Turn-Script</span>:<br/><pre><code>SetTurnTimeout (35) {<br/>  DisableTurnScript (oil)<br/>  SwitchOff (old_lantern)<br/>  msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)<br/>}</code></pre><br/><br/><span style=\"text-decoration:underline;\">Lantern</span>:<br/><pre><code>if (not Got(oil_cartridge)) {<br/>  msg (&quot;&lt;br/&gt;Without oil, you cannot light this lantern&#46; It is essentially useless right now&lt;br/&gt;&quot;)<br/>}<br/>else {<br/>  if (Got(oil_cartridge)) {<br/>    msg (&quot;&lt;br/&gt;After inserting an oil cartridge into the slot, you gently close the opening and then gingerly turn the knob a few times until you hear a soft click&#46; Moments later, a bright glow begins emitting from the old contraption&#46; Inside, an orange flame burns brightly, which can now act as a guide through dark places&#46; An orange glow surrounds you&#46; &lt;br/&gt;&quot;)<br/>    EnableTurnScript (oil)<br/>    SetObjectLightstrength (old_lantern, &quot;strong&quot;)<br/>    RemoveObject (oil_cartridge)<br/>  }<br/>}</code></pre><br/><br/>The only two problems I'm coming across is the &quot;Disable Turn-Script&quot; message keeps repeating endlessly after every following turn, and the lantern isn't lighting up any of the spaces that are set to &quot;dark&quot;.",
      "PostDate": "2015-11-22T04:28:17+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38803",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "I think you are confusing two different techniques. SetTurnTimeout makes something happen in so many turns. If you are using that, you just to call it once when the cartridge is inserted, which is probably the easiest way for this. The other technique is the turn script.\n\nWhat you have is a turn script that will every turn set an event to happen in 35 turns. So when the lamp goes on, each turn an event is set up for 35 turns after that. When the first delayed event goes off, the turnscript is stopped, but next turn the second one will fire, and try to turn off the turn script again, and then the third, etc, for 35 turns.\n\nWhat you could do is set an int attribute on the cartridges called &quot;lifetime&quot;, then on the USE script for all cartridges have this:\n[code:2gw7mnwy]if (IsSwitchedOn (old_lantern)) {\n  msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now&#46;&#46; &lt;br/&gt;&quot;)\n}\nelse {\n  SetTurnTimeout (this&#46;lifetime) {\n    msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)\n    SwitchOff (old_lantern)\n    SetObjectLightstrength (old_lantern, &quot;&quot;)\n  }\n  SwitchOn (old_lantern)\n  SetObjectLightstrength (old_lantern, &quot;strong&quot;)\n  destroy(this&#46;name)\n}[/code:2gw7mnwy]",
      "EditableFormat": "bbcode",
      "HTML": "I think you are confusing two different techniques. SetTurnTimeout makes something happen in so many turns. If you are using that, you just to call it once when the cartridge is inserted, which is probably the easiest way for this. The other technique is the turn script.<br/><br/>What you have is a turn script that will every turn set an event to happen in 35 turns. So when the lamp goes on, each turn an event is set up for 35 turns after that. When the first delayed event goes off, the turnscript is stopped, but next turn the second one will fire, and try to turn off the turn script again, and then the third, etc, for 35 turns.<br/><br/>What you could do is set an int attribute on the cartridges called &quot;lifetime&quot;, then on the USE script for all cartridges have this:<br/><pre><code>if (IsSwitchedOn (old_lantern)) {<br/>  msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now&#46;&#46; &lt;br/&gt;&quot;)<br/>}<br/>else {<br/>  SetTurnTimeout (this&#46;lifetime) {<br/>    msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)<br/>    SwitchOff (old_lantern)<br/>    SetObjectLightstrength (old_lantern, &quot;&quot;)<br/>  }<br/>  SwitchOn (old_lantern)<br/>  SetObjectLightstrength (old_lantern, &quot;strong&quot;)<br/>  destroy(this&#46;name)<br/>}</code></pre>",
      "PostDate": "2015-11-22T09:32:56+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38804",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "err... my apologies for any confusion, I totally forgot that, that command~method~whatever (SetTurnTimeOut) existed, laughs.\n\nerr... is the 'SetTurnTimeout' a method of the Turnscript? Or, does the 'SetTurnTimeout' create a Turnscript? It's been so long for me, I'm now confused. The quest wiki doc, doesn't show the 'SetTurnTimeout' as a method~Attribute of a Turnscript Element... but I thought as I'm trying to remember, if this was a method~Attribute of a Turnscript, or not. I know that there's a similar Function~method for the Timer... maybe the wiki just is missing it, or it's not a method~Attribute of the Turnscript.\n\nach, regardless, I think everyone can see that I'm now really confused. Again, my apologies for causing anyone else confusion, due to my own confusion.\n\n---------------\n\nEdit: after some research using the quest doc site, those various scripts~functions~methods, at least conceptually work like constructors~mutators~accessors for the TurnScript Element.\n\nI'm guessing that the 'SetTurnTimeout' is indeed a method~Attribute of the Turncript Element, and it's just not documented in the wiki doc site. Or, well, since they're methods, whereas the 'enabled' is a member~quest:Attribute, and 'scripts', is well, scripts (enables the adding of scripts or its just a Script Attribute named 'script', lol).\n\nmaybe I still got this all wrong... wouldn't be surprising... HK is often so confused, it's beyond human comprehension, laughs... sighs... lol....\n\n-------------\n\nI think my 3 programming classes (Java, C++, and Python) have fried my brain! (I'm bloody having to learn graphics for both Java and Python, and learning OOD~OOP along in regards to files: .h ~ header vs .cpp ~ body, and I've never done graphics before, ARGH!)\n\nfor anyone going into CS (Computer Science) ~ Programming:\n\nNEVER EVER take 3 programming classes at the same time! It's just way too much work!\n\n(unless you already know all 3 of them, inside and out, and~or you're a programming genius)",
      "EditableFormat": "bbcode",
      "HTML": "err... my apologies for any confusion, I totally forgot that, that command~method~whatever (SetTurnTimeOut) existed, laughs.<br/><br/>err... is the 'SetTurnTimeout' a method of the Turnscript? Or, does the 'SetTurnTimeout' create a Turnscript? It's been so long for me, I'm now confused. The quest wiki doc, doesn't show the 'SetTurnTimeout' as a method~Attribute of a Turnscript Element... but I thought as I'm trying to remember, if this was a method~Attribute of a Turnscript, or not. I know that there's a similar Function~method for the Timer... maybe the wiki just is missing it, or it's not a method~Attribute of the Turnscript.<br/><br/>ach, regardless, I think everyone can see that I'm now really confused. Again, my apologies for causing anyone else confusion, due to my own confusion.<br/><br/>---------------<br/><br/>Edit: after some research using the quest doc site, those various scripts~functions~methods, at least conceptually work like constructors~mutators~accessors for the TurnScript Element.<br/><br/>I'm guessing that the 'SetTurnTimeout' is indeed a method~Attribute of the Turncript Element, and it's just not documented in the wiki doc site. Or, well, since they're methods, whereas the 'enabled' is a member~quest:Attribute, and 'scripts', is well, scripts (enables the adding of scripts or its just a Script Attribute named 'script', lol).<br/><br/>maybe I still got this all wrong... wouldn't be surprising... HK is often so confused, it's beyond human comprehension, laughs... sighs... lol....<br/><br/>-------------<br/><br/>I think my 3 programming classes (Java, C++, and Python) have fried my brain! (I'm bloody having to learn graphics for both Java and Python, and learning OOD~OOP along in regards to files: .h ~ header vs .cpp ~ body, and I've never done graphics before, ARGH!)<br/><br/>for anyone going into CS (Computer Science) ~ Programming:<br/><br/>NEVER EVER take 3 programming classes at the same time! It's just way too much work!<br/><br/>(unless you already know all 3 of them, inside and out, and~or you're a programming genius)",
      "PostDate": "2015-11-22T11:44:51+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38805",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "[quote=&quot;HegemonKhan&quot;:wwftw26u]err... my apologies for any confusion, I totally forgot that, that command~method~whatever (SetTurnTimeOut) existed, laughs.[/quote:wwftw26u]\nI too had forgetten the SetTurnTimeOut function existed, and only realised it was the best way to do it when I read neonayon's post.\n[quote:wwftw26u]err... is the 'SetTurnTimeout' a method of the Turnscript? Or, does the 'SetTurnTimeout' create a Turnscript? It's been so long for me, I'm now confused. The quest wiki doc, doesn't show the 'SetTurnTimeout' as a method~Attribute of a Turnscript Element... but I thought as I'm trying to remember, if this was a method~Attribute of a Turnscript, or not. I know that there's a similar Function~method for the Timer... maybe the wiki just is missing it, or it's not a method~Attribute of the Turnscript.[/quote:wwftw26u]\nIt is just a function, and is best used independently of turn scripts (you can use both in a game, but not to do the same thing).",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>HegemonKhan wrote:</cite>err... my apologies for any confusion, I totally forgot that, that command~method~whatever (SetTurnTimeOut) existed, laughs.</blockquote><br/>I too had forgetten the SetTurnTimeOut function existed, and only realised it was the best way to do it when I read neonayon's post.<br/><blockquote><p>err... is the 'SetTurnTimeout' a method of the Turnscript? Or, does the 'SetTurnTimeout' create a Turnscript? It's been so long for me, I'm now confused. The quest wiki doc, doesn't show the 'SetTurnTimeout' as a method~Attribute of a Turnscript Element... but I thought as I'm trying to remember, if this was a method~Attribute of a Turnscript, or not. I know that there's a similar Function~method for the Timer... maybe the wiki just is missing it, or it's not a method~Attribute of the Turnscript.</p></blockquote><br/>It is just a function, and is best used independently of turn scripts (you can use both in a game, but not to do the same thing).",
      "PostDate": "2015-11-22T14:14:54+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38806",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "Look at this mess.... Jay really helped me with this one.  I kept having the problem where I could not disable a turn script, because evidently... once it is started it is started and cannot be stopped.  I still don't understand it entirely, but thanks to Jay, I got a good working TS.\n\n[code:357yycjc]if (GetBoolean(Xanadu, &quot;healthy&quot;)) {\n  Xanadu&#46;sickcount = 0\n}\nelse {\n  if (Xanadu&#46;sickcount = 2) {\n    msg (&quot;----&lt;br/&gt;Your mouth, tongue, and throat have this odd, tingling sensation&#46;&quot;)\n  }\n  else if (Xanadu&#46;sickcount = 5) {\n    msg (&quot;----&lt;br/&gt;Aside from the tingly sensation in your mouth and throat, it now feels like little, drunk gymnasts are doing flips and twists in your gut&#46;  In doing so, those little gymnasts are somehow also playing an odd assortment of instruments that make some of the strangest gurgling, burbling, and sloshing sounds you have ever heard&#46;  Perhaps you should find your way to a restroom?&quot;)\n  }\n  else if (Xanadu&#46;sickcount = 8) {\n    msg (&quot;----&lt;br/&gt;&lt;i&gt;'Oh, Dear Eight Pound, Six Ounce, Newborn Baby Jesus, in your golden, fleece diapers&#46;&#46;&#46;'&lt;/i&gt; you mutter as you begin your prayers&#46;  The twirling in your stomach has escalated to an all out riot&#46;  Whatever is in there, is fighting violently to get out&#46;  Your esophageal and anal sphincters are now on all out 'pucker mode'&#46;  Sweat has beaded on your brow&#46;  It is a cold and unwelcome sweat&#46;  You really, really, really need to find a restroom&#46;&quot;)\n  }\n  else if (Xanadu&#46;sickcount = 12) {\n    msg (&quot;---&lt;br/&gt;You can no longer swallow your bathroom pride&#46;&#46;&#46;&lt;br/&gt;&lt;br/&gt;You drop your pants immediately where you stand&#46;  Before they hit the floor, the eruptions begin&#46;  There is so much leaving your body (from both ends), you quickly dehydrate and become disoriented&#46;  You stumble around, slipping in wet puddles&#46;  You remember dancing lights and spinning rooms&#46;  You stumble into a cold room and pass out&#46;&#46;&#46;&lt;br/&gt;---&quot;)\n    SetObjectFlagOn (Xanadu, &quot;healthy&quot;)\n    AddToInventory (rotten food)\n    play sound (&quot;fart&#46;wav&quot;, false, false)\n    MoveObject (Xanadu, Prison Cell)\n  }\n  else {\n    if (game&#46;pov&#46;parent = farthest stall) {\n      play sound (&quot;fart&#46;wav&quot;, false, false)\n      msg (&quot;---&lt;br/&gt;With your knees crossed coupled with your difficulty in standing up straight, you are having a hard time getting your pants down&#46;&lt;br/&gt;&lt;br/&gt;Just in the nick of time, you do get your pants opened up and you drop them to the floor&#46;&#46;&#46;&lt;br/&gt;&lt;br/&gt;Before you can sit down, however, the dam breaks and the flood gates open&#46;  At first, it just sounds like a high pressure fire hose&#46;  Sprinkled in are some odd toots and squeaks as the sulfurous emission continues&#46;  At the tail end (no pun intended) of your fecal display, the cacophony of noises erupts into a crescendo of honks, bloots, ka-phroops, slurps, and fizzles&#46;  Just when you thought the misery was over, the vomiting begins&#46;  The projectile barf flies forth in a fancy array of colors&#46;  The explosiveness of it all is enough to make Mt&#46; Pinatubo blush&#46;  You hurl, spew, chowdergargle, and blow chunks&#46;  You upchuck one last time and wipe your mouth on your sleeve&#46;  At least you are feeling a little better now&#46;&lt;br/&gt;&lt;br/&gt;You wipe your bleary, wet eyes and take in your surroundings&#46;&lt;br/&gt;---&quot;)\n      wait {\n        msg (&quot;---&lt;br/&gt;Wow&#46;  Disgusting&#46;  I can't even describe how unclean this stall is&#46;  There are colors and smells and textures in here that go beyond rational explanation&#46;  Is it possible to hold this much filth in one human stomach?  Wait&#46;&#46;&#46; You don't remember eating anything that was neon green&#46;  How did shit get on the ceiling?  &lt;br/&gt;&lt;br/&gt;Anyway, you sheepishly back out of the stall, disappear from the restroom, and sneak off down the hallway to avoid embarrassment&#46;  Although you feel sorry for whatever poor soul has to clean this up, you hope it gets done pretty quickly&#46;  Ick&#46;&#46;&#46;&lt;br/&gt;---&quot;)\n        DisableTurnScript (sickturnscript)\n        MoveObject (rotten food, Item Warehouse 1)\n        IncreaseScore (10)\n        MoveObject (Xanadu, Long Hallway)\n        UnlockExit (JCLock)\n        SetObjectFlagOn (Xanadu, &quot;healthy&quot;)\n        SetObjectFlagOn (farthest stall, &quot;unclean&quot;)\n        MoveObject (janitors cart, Filthy Restroom)\n      }\n    }\n  }\n  Xanadu&#46;sickcount = Xanadu&#46;sickcount + 1\n}[/code:357yycjc]\n\nGood luck.\n\nXanMag",
      "EditableFormat": "bbcode",
      "HTML": "Look at this mess.... Jay really helped me with this one.  I kept having the problem where I could not disable a turn script, because evidently... once it is started it is started and cannot be stopped.  I still don't understand it entirely, but thanks to Jay, I got a good working TS.<br/><br/><pre><code>if (GetBoolean(Xanadu, &quot;healthy&quot;)) {<br/>  Xanadu&#46;sickcount = 0<br/>}<br/>else {<br/>  if (Xanadu&#46;sickcount = 2) {<br/>    msg (&quot;----&lt;br/&gt;Your mouth, tongue, and throat have this odd, tingling sensation&#46;&quot;)<br/>  }<br/>  else if (Xanadu&#46;sickcount = 5) {<br/>    msg (&quot;----&lt;br/&gt;Aside from the tingly sensation in your mouth and throat, it now feels like little, drunk gymnasts are doing flips and twists in your gut&#46;  In doing so, those little gymnasts are somehow also playing an odd assortment of instruments that make some of the strangest gurgling, burbling, and sloshing sounds you have ever heard&#46;  Perhaps you should find your way to a restroom?&quot;)<br/>  }<br/>  else if (Xanadu&#46;sickcount = 8) {<br/>    msg (&quot;----&lt;br/&gt;&lt;i&gt;'Oh, Dear Eight Pound, Six Ounce, Newborn Baby Jesus, in your golden, fleece diapers&#46;&#46;&#46;'&lt;/i&gt; you mutter as you begin your prayers&#46;  The twirling in your stomach has escalated to an all out riot&#46;  Whatever is in there, is fighting violently to get out&#46;  Your esophageal and anal sphincters are now on all out 'pucker mode'&#46;  Sweat has beaded on your brow&#46;  It is a cold and unwelcome sweat&#46;  You really, really, really need to find a restroom&#46;&quot;)<br/>  }<br/>  else if (Xanadu&#46;sickcount = 12) {<br/>    msg (&quot;---&lt;br/&gt;You can no longer swallow your bathroom pride&#46;&#46;&#46;&lt;br/&gt;&lt;br/&gt;You drop your pants immediately where you stand&#46;  Before they hit the floor, the eruptions begin&#46;  There is so much leaving your body (from both ends), you quickly dehydrate and become disoriented&#46;  You stumble around, slipping in wet puddles&#46;  You remember dancing lights and spinning rooms&#46;  You stumble into a cold room and pass out&#46;&#46;&#46;&lt;br/&gt;---&quot;)<br/>    SetObjectFlagOn (Xanadu, &quot;healthy&quot;)<br/>    AddToInventory (rotten food)<br/>    play sound (&quot;fart&#46;wav&quot;, false, false)<br/>    MoveObject (Xanadu, Prison Cell)<br/>  }<br/>  else {<br/>    if (game&#46;pov&#46;parent = farthest stall) {<br/>      play sound (&quot;fart&#46;wav&quot;, false, false)<br/>      msg (&quot;---&lt;br/&gt;With your knees crossed coupled with your difficulty in standing up straight, you are having a hard time getting your pants down&#46;&lt;br/&gt;&lt;br/&gt;Just in the nick of time, you do get your pants opened up and you drop them to the floor&#46;&#46;&#46;&lt;br/&gt;&lt;br/&gt;Before you can sit down, however, the dam breaks and the flood gates open&#46;  At first, it just sounds like a high pressure fire hose&#46;  Sprinkled in are some odd toots and squeaks as the sulfurous emission continues&#46;  At the tail end (no pun intended) of your fecal display, the cacophony of noises erupts into a crescendo of honks, bloots, ka-phroops, slurps, and fizzles&#46;  Just when you thought the misery was over, the vomiting begins&#46;  The projectile barf flies forth in a fancy array of colors&#46;  The explosiveness of it all is enough to make Mt&#46; Pinatubo blush&#46;  You hurl, spew, chowdergargle, and blow chunks&#46;  You upchuck one last time and wipe your mouth on your sleeve&#46;  At least you are feeling a little better now&#46;&lt;br/&gt;&lt;br/&gt;You wipe your bleary, wet eyes and take in your surroundings&#46;&lt;br/&gt;---&quot;)<br/>      wait {<br/>        msg (&quot;---&lt;br/&gt;Wow&#46;  Disgusting&#46;  I can't even describe how unclean this stall is&#46;  There are colors and smells and textures in here that go beyond rational explanation&#46;  Is it possible to hold this much filth in one human stomach?  Wait&#46;&#46;&#46; You don't remember eating anything that was neon green&#46;  How did shit get on the ceiling?  &lt;br/&gt;&lt;br/&gt;Anyway, you sheepishly back out of the stall, disappear from the restroom, and sneak off down the hallway to avoid embarrassment&#46;  Although you feel sorry for whatever poor soul has to clean this up, you hope it gets done pretty quickly&#46;  Ick&#46;&#46;&#46;&lt;br/&gt;---&quot;)<br/>        DisableTurnScript (sickturnscript)<br/>        MoveObject (rotten food, Item Warehouse 1)<br/>        IncreaseScore (10)<br/>        MoveObject (Xanadu, Long Hallway)<br/>        UnlockExit (JCLock)<br/>        SetObjectFlagOn (Xanadu, &quot;healthy&quot;)<br/>        SetObjectFlagOn (farthest stall, &quot;unclean&quot;)<br/>        MoveObject (janitors cart, Filthy Restroom)<br/>      }<br/>    }<br/>  }<br/>  Xanadu&#46;sickcount = Xanadu&#46;sickcount + 1<br/>}</code></pre><br/><br/>Good luck.<br/><br/>XanMag",
      "PostDate": "2015-11-22T15:21:47+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38808",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "[quote:n2aafzzq]if (IsSwitchedOn (old_lantern)) {\n  msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now.. &lt;br/&gt;&quot;)\n}\nelse {\n  SetTurnTimeout (this.lifetime) {\n    msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up. Moments later, the lantern dies. &lt;br/&gt;&quot;)\n    SwitchOff (old_lantern)\n    SetObjectLightstrength (old_lantern, &quot;&quot;)\n  }\n  SwitchOn (old_lantern)\n  SetObjectLightstrength (old_lantern, &quot;strong&quot;)\n  destroy(this.name)\n}[/quote:n2aafzzq]\n\nThanks everyone! I'll give this a shot!\n\n[u:n2aafzzq]UPDATE[/u:n2aafzzq]: \n\nIt's not working. No messages for the script are appearing and the light doesn't work in the dark area. : /\n\nI also added the &quot;lifetime&quot; attribute to the oil and made it an integer of 35.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><p>if (IsSwitchedOn (old_lantern)) {<br/>  msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now.. &lt;br/&gt;&quot;)<br/>}<br/>else {<br/>  SetTurnTimeout (this.lifetime) {<br/>    msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up. Moments later, the lantern dies. &lt;br/&gt;&quot;)<br/>    SwitchOff (old_lantern)<br/>    SetObjectLightstrength (old_lantern, &quot;&quot;)<br/>  }<br/>  SwitchOn (old_lantern)<br/>  SetObjectLightstrength (old_lantern, &quot;strong&quot;)<br/>  destroy(this.name)<br/>}</p></blockquote><br/><br/>Thanks everyone! I'll give this a shot!<br/><br/><span style=\"text-decoration:underline;\">UPDATE</span>: <br/><br/>It's not working. No messages for the script are appearing and the light doesn't work in the dark area. : /<br/><br/>I also added the &quot;lifetime&quot; attribute to the oil and made it an integer of 35.",
      "PostDate": "2015-11-22T20:05:13+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38809",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "I realise there are two issues with the script. The first is it gives no message when the cartiridge is used. The second is it will work even if the lantern is in another room. Here is an updated version.\n[code:1wh3by8t]if (not old_lantern&#46;parent = player) {\n  msg(&quot;The cartridge is for use on a lantern, and you are not carrying a lantern&#46;&quot;)\n}\nelse if (IsSwitchedOn (old_lantern)) {\n  msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now&#46; &lt;br/&gt;&quot;)\n}\nelse {\n  msg (&quot;&lt;br/&gt;You put the cartridge in the lantern and it starts to glow brightly&#46; &lt;br/&gt;&quot;)\n  SetTurnTimeout (this&#46;lifetime) {\n    msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)\n    SwitchOff (old_lantern)\n    SetObjectLightstrength (old_lantern, &quot;&quot;)\n  }\n  SwitchOn (old_lantern)\n  SetObjectLightstrength (old_lantern, &quot;strong&quot;)\n  destroy (this&#46;name)\n}[/code:1wh3by8t]\nHowever, even the original should have worked if you were carrying the lantern. I have tested it and it does light a room, and it does stop doing so after the required number of turns.\n\nHere is a full demo of it.\n[code:1wh3by8t]&lt;!--Saved by Quest 5&#46;6&#46;5783&#46;24153--&gt;\n&lt;asl version=&quot;550&quot;&gt;\n  &lt;include ref=&quot;English&#46;aslx&quot; /&gt;\n  &lt;include ref=&quot;Core&#46;aslx&quot; /&gt;\n  &lt;game name=&quot;lantern&quot;&gt;\n    &lt;gameid&gt;f6e3d45a-fbf4-40a1-91e7-7aa506071d85&lt;/gameid&gt;\n    &lt;version&gt;1&#46;0&lt;/version&gt;\n    &lt;firstpublished&gt;2015&lt;/firstpublished&gt;\n    &lt;feature_lightdark /&gt;\n  &lt;/game&gt;\n  &lt;object name=&quot;room&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;description&gt;The first room&lt;/description&gt;\n    &lt;object name=&quot;player&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;inherit name=&quot;editor_player&quot; /&gt;\n    &lt;/object&gt;\n    &lt;object name=&quot;old_lantern&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;take /&gt;\n      &lt;alias&gt;lantern&lt;/alias&gt;\n    &lt;/object&gt;\n    &lt;object name=&quot;cart&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;feature_usegive /&gt;\n      &lt;use type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n        if (not old_lantern&#46;parent = player) {\n          msg (&quot;The cartridge is for use on a lantern, and you are not carrying a lantern&#46;&quot;)\n        }\n        else if (IsSwitchedOn (old_lantern)) {\n          msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now&#46; &lt;br/&gt;&quot;)\n        }\n        else {\n          msg (&quot;&lt;br/&gt;You put the cartridge in the lantern and it starts to glow brightly&#46; &lt;br/&gt;&quot;)\n          SetTurnTimeout (this&#46;lifetime) {\n            msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)\n            SwitchOff (old_lantern)\n            SetObjectLightstrength (old_lantern, &quot;&quot;)\n          }\n          SwitchOn (old_lantern)\n          SetObjectLightstrength (old_lantern, &quot;strong&quot;)\n          destroy (this&#46;name)\n        }\n      &#93;&#93;&gt;&lt;/use&gt;\n      &lt;take /&gt;\n      &lt;lifetime type=&quot;int&quot;&gt;5&lt;/lifetime&gt;\n    &lt;/object&gt;\n    &lt;exit alias=&quot;south&quot; to=&quot;room2&quot;&gt;\n      &lt;inherit name=&quot;southdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=&quot;room2&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;dark /&gt;\n    &lt;description&gt;The second room&lt;/description&gt;\n    &lt;darkroomdescription&gt;This room is dark&#46;&lt;/darkroomdescription&gt;\n    &lt;exit alias=&quot;north&quot; to=&quot;room&quot;&gt;\n      &lt;inherit name=&quot;northdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;[/code:1wh3by8t]",
      "EditableFormat": "bbcode",
      "HTML": "I realise there are two issues with the script. The first is it gives no message when the cartiridge is used. The second is it will work even if the lantern is in another room. Here is an updated version.<br/><pre><code>if (not old_lantern&#46;parent = player) {<br/>  msg(&quot;The cartridge is for use on a lantern, and you are not carrying a lantern&#46;&quot;)<br/>}<br/>else if (IsSwitchedOn (old_lantern)) {<br/>  msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now&#46; &lt;br/&gt;&quot;)<br/>}<br/>else {<br/>  msg (&quot;&lt;br/&gt;You put the cartridge in the lantern and it starts to glow brightly&#46; &lt;br/&gt;&quot;)<br/>  SetTurnTimeout (this&#46;lifetime) {<br/>    msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)<br/>    SwitchOff (old_lantern)<br/>    SetObjectLightstrength (old_lantern, &quot;&quot;)<br/>  }<br/>  SwitchOn (old_lantern)<br/>  SetObjectLightstrength (old_lantern, &quot;strong&quot;)<br/>  destroy (this&#46;name)<br/>}</code></pre><br/>However, even the original should have worked if you were carrying the lantern. I have tested it and it does light a room, and it does stop doing so after the required number of turns.<br/><br/>Here is a full demo of it.<br/><pre><code>&lt;!--Saved by Quest 5&#46;6&#46;5783&#46;24153--&gt;<br/>&lt;asl version=&quot;550&quot;&gt;<br/>  &lt;include ref=&quot;English&#46;aslx&quot; /&gt;<br/>  &lt;include ref=&quot;Core&#46;aslx&quot; /&gt;<br/>  &lt;game name=&quot;lantern&quot;&gt;<br/>    &lt;gameid&gt;f6e3d45a-fbf4-40a1-91e7-7aa506071d85&lt;/gameid&gt;<br/>    &lt;version&gt;1&#46;0&lt;/version&gt;<br/>    &lt;firstpublished&gt;2015&lt;/firstpublished&gt;<br/>    &lt;feature_lightdark /&gt;<br/>  &lt;/game&gt;<br/>  &lt;object name=&quot;room&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;description&gt;The first room&lt;/description&gt;<br/>    &lt;object name=&quot;player&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;inherit name=&quot;editor_player&quot; /&gt;<br/>    &lt;/object&gt;<br/>    &lt;object name=&quot;old_lantern&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;take /&gt;<br/>      &lt;alias&gt;lantern&lt;/alias&gt;<br/>    &lt;/object&gt;<br/>    &lt;object name=&quot;cart&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;feature_usegive /&gt;<br/>      &lt;use type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>        if (not old_lantern&#46;parent = player) {<br/>          msg (&quot;The cartridge is for use on a lantern, and you are not carrying a lantern&#46;&quot;)<br/>        }<br/>        else if (IsSwitchedOn (old_lantern)) {<br/>          msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now&#46; &lt;br/&gt;&quot;)<br/>        }<br/>        else {<br/>          msg (&quot;&lt;br/&gt;You put the cartridge in the lantern and it starts to glow brightly&#46; &lt;br/&gt;&quot;)<br/>          SetTurnTimeout (this&#46;lifetime) {<br/>            msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)<br/>            SwitchOff (old_lantern)<br/>            SetObjectLightstrength (old_lantern, &quot;&quot;)<br/>          }<br/>          SwitchOn (old_lantern)<br/>          SetObjectLightstrength (old_lantern, &quot;strong&quot;)<br/>          destroy (this&#46;name)<br/>        }<br/>      &#93;&#93;&gt;&lt;/use&gt;<br/>      &lt;take /&gt;<br/>      &lt;lifetime type=&quot;int&quot;&gt;5&lt;/lifetime&gt;<br/>    &lt;/object&gt;<br/>    &lt;exit alias=&quot;south&quot; to=&quot;room2&quot;&gt;<br/>      &lt;inherit name=&quot;southdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;object name=&quot;room2&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;dark /&gt;<br/>    &lt;description&gt;The second room&lt;/description&gt;<br/>    &lt;darkroomdescription&gt;This room is dark&#46;&lt;/darkroomdescription&gt;<br/>    &lt;exit alias=&quot;north&quot; to=&quot;room&quot;&gt;<br/>      &lt;inherit name=&quot;northdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>&lt;/asl&gt;</code></pre>",
      "PostDate": "2015-11-22T21:31:20+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38812",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "Weird...I'm sure the code works, but when I use it and have the lantern and the oil in the inventory pane, the oil doesn't recognize that the lantern is being carried! Shenanigans. \n\n&gt; use oil Oil Cartridge\n\nThe cartridge is for use on a lantern, and you are not carrying a lantern.\n\nI checked all the spellings too and they are spot on, so I'm not sure why the verb isn't registering the lantern at all.[u:1ridr518]\n\nUPDATE[/u:1ridr518]: \nI'm dumb....I've been copy pasting the lantern into the room for testing, so that's probably why the cartridges weren't picking it up. I'll have to check after my B-day party, but I'm pretty sure that is the cause of it not working @.@",
      "EditableFormat": "bbcode",
      "HTML": "Weird...I'm sure the code works, but when I use it and have the lantern and the oil in the inventory pane, the oil doesn't recognize that the lantern is being carried! Shenanigans. <br/><br/>&gt; use oil Oil Cartridge<br/><br/>The cartridge is for use on a lantern, and you are not carrying a lantern.<br/><br/>I checked all the spellings too and they are spot on, so I'm not sure why the verb isn't registering the lantern at all.<span style=\"text-decoration:underline;\"><br/><br/>UPDATE</span>: <br/>I'm dumb....I've been copy pasting the lantern into the room for testing, so that's probably why the cartridges weren't picking it up. I'll have to check after my B-day party, but I'm pretty sure that is the cause of it not working @.@",
      "PostDate": "2015-11-22T23:52:13+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38815",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "Hmm...one last thing seems to be wonky. The lantern object seems to permanently acquire the &quot;on&quot; status. What I mean is, after you use the cartridge and the turns run out, the lantern is still registering as being lit. I tested it because I haven't a second lighting object &quot;candle&quot; and had them both, then dropped both in the previous room, then brought one in at a time and the lantern even without the cartridge was still brightly shining! \n \n[u:r1ek13xa]UPDATE[/u:r1ek13xa]:\nActually...strange enough, even if BOTH &quot;light objects&quot; are turned off, the dark room remains lit with one or both in the inventory, but if I hold neither in the inventory, then the dark room is dark again. What's up with that?\n\n\nThat code is brilliant though btw.",
      "EditableFormat": "bbcode",
      "HTML": "Hmm...one last thing seems to be wonky. The lantern object seems to permanently acquire the &quot;on&quot; status. What I mean is, after you use the cartridge and the turns run out, the lantern is still registering as being lit. I tested it because I haven't a second lighting object &quot;candle&quot; and had them both, then dropped both in the previous room, then brought one in at a time and the lantern even without the cartridge was still brightly shining! <br/> <br/><span style=\"text-decoration:underline;\">UPDATE</span>:<br/>Actually...strange enough, even if BOTH &quot;light objects&quot; are turned off, the dark room remains lit with one or both in the inventory, but if I hold neither in the inventory, then the dark room is dark again. What's up with that?<br/><br/><br/>That code is brilliant though btw.",
      "PostDate": "2015-11-23T03:45:21+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38828",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "Anyone know what might be causing the lingering light issue?",
      "EditableFormat": "bbcode",
      "HTML": "Anyone know what might be causing the lingering light issue?",
      "PostDate": "2015-11-23T23:38:18+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38836",
      "UserId": 0,
      "Username": "sophia107",
      "UserAvatar": null,
      "UserGravatar": "9e6de19ede0fd61c3c0cb6689685fddb",
      "EditableText": "it's not actually inside any rooms at all [url=http&#58;//www&#46;etuicoquesamsung&#46;com/category-etui-coque-film-chargeur-sony-xperia-z5-compact-704&#46;html:usjsk4uq][color=#393333:usjsk4uq]etuicoquesamsung.com[/color:usjsk4uq][/url:usjsk4uq] [url=http&#58;//www&#46;etuicoquesamsung&#46;com/category-coques-samsung-galaxy-j1-598&#46;html:usjsk4uq][color=#393333:usjsk4uq]www.etuicoquesamsung.com[/color:usjsk4uq][/url:usjsk4uq]",
      "EditableFormat": "bbcode",
      "HTML": "it's not actually inside any rooms at all <a href=\"http&#58;//www&#46;etuicoquesamsung&#46;com/category-etui-coque-film-chargeur-sony-xperia-z5-compact-704&#46;html\" rel=\"nofollow\"><span style=\"color:#393333\">etuicoquesamsung.com</span></a> <a href=\"http&#58;//www&#46;etuicoquesamsung&#46;com/category-coques-samsung-galaxy-j1-598&#46;html\" rel=\"nofollow\"><span style=\"color:#393333\">www.etuicoquesamsung.com</span></a>",
      "PostDate": "2015-11-24T03:27:52+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38837",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "What do you mean? I know the room itself isn't causing the lighting, it's after the two light source are lit that the game registers them as being forever lit, even when both are switched off. So I'm not sure what's causing that.\n\n[u:y3ggvtwm]UPDATE[/u:y3ggvtwm]:\n\nFigured out the problems. There was an error in the code. \n\n[quote:y3ggvtwm][code:y3ggvtwm]if (not old_lantern&#46;parent = player) {\n  msg(&quot;The cartridge is for use on a lantern, and you are not carrying a lantern&#46;&quot;)\n}\nelse if (IsSwitchedOn (old_lantern)) {\n  msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now&#46; &lt;br/&gt;&quot;)\n}\nelse {\n  msg (&quot;&lt;br/&gt;You put the cartridge in the lantern and it starts to glow brightly&#46; &lt;br/&gt;&quot;)\n  SetTurnTimeout (this&#46;lifetime) {\n    msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)\n    SwitchOff (old_lantern)\n    SetObjectLightstrength (old_lantern, &quot;&quot;)\n  }[/code:y3ggvtwm]\n[/quote:y3ggvtwm]\n\nMust have just been an overlook, so I fixed it to this.\n\n[code:y3ggvtwm]if (not old_lantern&#46;parent = player) {\n  msg (&quot;&lt;br/&gt;The cartridge is for use on a lantern, and you are not carrying a lantern&#46;&lt;br/&gt;&quot;)\n}\nelse if (IsSwitchedOn (old_lantern)) {\n  msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now&#46; &lt;br/&gt;&quot;)\n}\nelse {\n  msg (&quot;&lt;br/&gt;After inserting an oil cartridge into the slot, you gently close the opening and then gingerly turn the knob a few times until you hear a soft click&#46; Moments later, a bright glow begins emitting from the old contraption&#46; Inside, an orange flame burns brightly, which can now act as a guide through dark places&#46; An orange glow surrounds you&#46;&lt;br/&gt;&quot;)\n  SetTurnTimeout (this&#46;lifetime) {\n    msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)\n    SwitchOff (old_lantern)\n    SetObjectLightstrength (old_lantern, &quot;weak&quot;)\n  }\n  SwitchOn (old_lantern)\n  SetObjectLightstrength (old_lantern, &quot;strong&quot;)\n  destroy (this&#46;name)\n}[/code:y3ggvtwm]\n\nI added the &quot;SetObjectLightstrength (old_lantern, &quot;weak&quot;). So just a simple oversight. The item wasn't directed to weaken the lightsource after the cartridge was used up. Thank you again, Pixie!",
      "EditableFormat": "bbcode",
      "HTML": "What do you mean? I know the room itself isn't causing the lighting, it's after the two light source are lit that the game registers them as being forever lit, even when both are switched off. So I'm not sure what's causing that.<br/><br/><span style=\"text-decoration:underline;\">UPDATE</span>:<br/><br/>Figured out the problems. There was an error in the code. <br/><br/><blockquote><p><pre><code>if (not old_lantern&#46;parent = player) {<br/>  msg(&quot;The cartridge is for use on a lantern, and you are not carrying a lantern&#46;&quot;)<br/>}<br/>else if (IsSwitchedOn (old_lantern)) {<br/>  msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now&#46; &lt;br/&gt;&quot;)<br/>}<br/>else {<br/>  msg (&quot;&lt;br/&gt;You put the cartridge in the lantern and it starts to glow brightly&#46; &lt;br/&gt;&quot;)<br/>  SetTurnTimeout (this&#46;lifetime) {<br/>    msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)<br/>    SwitchOff (old_lantern)<br/>    SetObjectLightstrength (old_lantern, &quot;&quot;)<br/>  }</code></pre><br/></p></blockquote><br/><br/>Must have just been an overlook, so I fixed it to this.<br/><br/><pre><code>if (not old_lantern&#46;parent = player) {<br/>  msg (&quot;&lt;br/&gt;The cartridge is for use on a lantern, and you are not carrying a lantern&#46;&lt;br/&gt;&quot;)<br/>}<br/>else if (IsSwitchedOn (old_lantern)) {<br/>  msg (&quot;&lt;br/&gt;The lantern is already shining brightly; no need to use a cartridge now&#46; &lt;br/&gt;&quot;)<br/>}<br/>else {<br/>  msg (&quot;&lt;br/&gt;After inserting an oil cartridge into the slot, you gently close the opening and then gingerly turn the knob a few times until you hear a soft click&#46; Moments later, a bright glow begins emitting from the old contraption&#46; Inside, an orange flame burns brightly, which can now act as a guide through dark places&#46; An orange glow surrounds you&#46;&lt;br/&gt;&quot;)<br/>  SetTurnTimeout (this&#46;lifetime) {<br/>    msg (&quot;&lt;br/&gt;The lantern begins to flicker before the oil cartridge is finally used up&#46; Moments later, the lantern dies&#46; &lt;br/&gt;&quot;)<br/>    SwitchOff (old_lantern)<br/>    SetObjectLightstrength (old_lantern, &quot;weak&quot;)<br/>  }<br/>  SwitchOn (old_lantern)<br/>  SetObjectLightstrength (old_lantern, &quot;strong&quot;)<br/>  destroy (this&#46;name)<br/>}</code></pre><br/><br/>I added the &quot;SetObjectLightstrength (old_lantern, &quot;weak&quot;). So just a simple oversight. The item wasn't directed to weaken the lightsource after the cartridge was used up. Thank you again, Pixie!",
      "PostDate": "2015-11-24T05:16:23+00:00",
      "LastEditDate": null
    }
  ]
}
