{
  "Topic": {
    "TopicId": "icg8ejxb9kkat5jtvq2r0q",
    "ForumId": "10",
    "Title": "How do I make status attributes affect certain abilities/skills?",
    "LastUpdated": "2018-01-16T22:59:13.2676714Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "d3011c71-2221-4453-bbec-254059a70ef9",
      "UserId": 326173,
      "Username": "Curt A. P.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/bc1d5d57408cf4d13f9d9f23c1e3dc56?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi again,\r\nI guess it's a easy question, but I can't find the easy way. \r\nSo, here's the main problem. My player has in certain rooms the option to search the area for loot. If the player search the area he can find some items. This works fine, but now I wanted to give the player a luck or search experience attribute and this attribute should increase the number of looted objects.\r\n\r\nI could imagine making a if script for every single level and then I tried to get the hang of the \"**for**\" or \"**foreach**\" functions but I don't understand it. \r\nI thouht something easy like, **as the player search area he'll find for each Luck Lv. +2 more gold**, should be possible. I can't figure it out. \r\n\r\nThanks for the help!\r\nGreetings Curt",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi again,<br>\nI guess it's a easy question, but I can't find the easy way.<br>\nSo, here's the main problem. My player has in certain rooms the option to search the area for loot. If the player search the area he can find some items. This works fine, but now I wanted to give the player a luck or search experience attribute and this attribute should increase the number of looted objects.</p>\n<p>I could imagine making a if script for every single level and then I tried to get the hang of the \"<strong>for</strong>\" or \"<strong>foreach</strong>\" functions but I don't understand it.<br>\nI thouht something easy like, <strong>as the player search area he'll find for each Luck Lv. +2 more gold</strong>, should be possible. I can't figure it out.</p>\n<p>Thanks for the help!<br>\nGreetings Curt</p>\n\n",
      "PostDate": "2018-01-16T22:59:13.2676714Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "309c7c96-d7f1-41ad-8628-b877bd137e1e",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(filler for getting my edited post, updated/posted, grr)\r\n\r\n---------------\r\n\r\nthis is actually quite advanced stuff... as you could make this be like diablo's item/drop system (recursion and diminishing returns) and/or a leveled loot system like in morrowind/oblivion/skyrim ... though you don't have to have such complex systems as well.\r\n\r\n------------------------------\r\n\r\nhere's a guide on Attributes and the 'if' Script usage:\r\n\r\nhttp://textadventures.co.uk/forum/samples/topic/5559/attributes-and-if-script-guide-by-hk\r\n\r\nhere's a guide on using List and Dictionary Attributes:\r\n\r\nhttp://textadventures.co.uk/forum/samples/topic/5137/list-and-dictionary-extensive-guide-by-hk\r\n\r\n------------------------\r\n\r\nhere's a very \"simple\" example design:\r\n\r\nyour 'luck' Integer Attribute provides a percent chance of getting each item (which is iterated through via the 'foreach') within a room's 'search/drop item list'\r\n\r\nand your 'luck' Integer Attribute provides modifier of +2 gold per luck amount (psuedo-code: new_gold = old_gold + luck * 2) when you search\r\n\r\n```\r\n<game name=\"example_game\">\r\n\r\n\r\n  <attr name=\"start\" type=\"script\">\r\n\r\n    do (action_button_object, \"cheat\")\r\n\r\n  </attr>\r\n\r\n</game>\r\n\r\n<object name=\"room\">\r\n\r\n  <inherit name=\"editor_room\" />\r\n\r\n  <attr name=\"search_objectlist_attribute\" type=\"objectlist\">\r\n\r\n    <value>katana</value>\r\n    <value>claymore</value>\r\n\r\n  </attr>\r\n\r\n</object>\r\n\r\n<object name=\"player\">\r\n\r\n  <inherit name=\"editor_object\" />\r\n  <inherit name=\"editor_player\" />\r\n\r\n  <attr name=\"parent\" type=\"object\">room</attr>\r\n\r\n  <attr name=\"luck\" type=\"int\">0</attr>\r\n\r\n  <attr name=\"gold\" type=\"int\">0</attr>\r\n\r\n</object>\r\n\r\n<object name=\"action_button_object\">\r\n\r\n  <attr name=\"parent\" type=\"object\">player</attr>\r\n\r\n  <attr name=\"alias\" type=\"string\">actions</attr>\r\n\r\n  <attr name=\"cheat\" type=\"script\">\r\n\r\n    <![CDATA[\r\n\r\n      msg (\"Luck? (0 to 100)\")\r\n      get input {\r\n        if (IsInt (result)) {\r\n          input_integer_variable = ToInt (result)\r\n          if (input_integer_variable >= 0 and input_integer_variable <= 100) {\r\n            player.luck = input_integer_variable\r\n          }\r\n        }\r\n      }\r\n\r\n    ]]>\r\n\r\n  </attr>\r\n\r\n  <attr name=\"search\" type=\"script\">\r\n\r\n    firsttime {\r\n\r\n      // handles the gold:\r\n\r\n      game.pov.gold = game.pov.gold + game.pov.luck * 2\r\n\r\n      // handles the items:\r\n\r\n      room_object_variable = game.pov.parent\r\n      if (HasAttribute (room_object_variable, \"search_objectlist_attribute\")) {\r\n        foreach (item_object_variable, room_object_variable.search_objectlist_attribute) {\r\n          if (RandomChance (game.pov.luck)) {\r\n            clone_object_variable = CloneObject (item_object_variable)\r\n            clone_object_variable.original_object_attribute = item_object_variable\r\n            clone_object_variable.parent = game.pov\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    otherwise {\r\n      msg (\"You've already searched here, sorry\")\r\n    }\r\n\r\n  </attr>\r\n\r\n</object>\r\n\r\n<object name=\"equipment_object\">\r\n\r\n  <object name=\"weapon_object\">\r\n\r\n    <object name=\"melee_object\">\r\n\r\n      <object name=\"sword_object\">\r\n\r\n        <object name=\"katana\">\r\n        </object>\r\n\r\n        <object name=\"claymore\">\r\n        </object>\r\n\r\n      </object>\r\n\r\n    </object>\r\n\r\n  </object>\r\n\r\n</object>\r\n\r\n<verb>\r\n  <property>cheat</property>\r\n  <pattern>cheat</pattern>\r\n  <defaultexpression>You can't cheat here!</defaultexpression>\r\n</verb>\r\n\r\n<verb>\r\n  <property>search</property>\r\n  <pattern>search</pattern>\r\n  <defaultexpression>You can't search here!</defaultexpression>\r\n</verb>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>(filler for getting my edited post, updated/posted, grr)</p>\n<hr>\n<p>this is actually quite advanced stuff... as you could make this be like diablo's item/drop system (recursion and diminishing returns) and/or a leveled loot system like in morrowind/oblivion/skyrim ... though you don't have to have such complex systems as well.</p>\n<hr>\n<p>here's a guide on Attributes and the 'if' Script usage:</p>\n<p>http://textadventures.co.uk/forum/samples/topic/5559/attributes-and-if-script-guide-by-hk</p>\n<p>here's a guide on using List and Dictionary Attributes:</p>\n<p>http://textadventures.co.uk/forum/samples/topic/5137/list-and-dictionary-extensive-guide-by-hk</p>\n<hr>\n<p>here's a very \"simple\" example design:</p>\n<p>your 'luck' Integer Attribute provides a percent chance of getting each item (which is iterated through via the 'foreach') within a room's 'search/drop item list'</p>\n<p>and your 'luck' Integer Attribute provides modifier of +2 gold per luck amount (psuedo-code: new_gold = old_gold + luck * 2) when you search</p>\n<pre><code>&lt;game name=\"example_game\"&gt;\n\n\n  &lt;attr name=\"start\" type=\"script\"&gt;\n\n    do (action_button_object, \"cheat\")\n\n  &lt;/attr&gt;\n\n&lt;/game&gt;\n\n&lt;object name=\"room\"&gt;\n\n  &lt;inherit name=\"editor_room\" /&gt;\n\n  &lt;attr name=\"search_objectlist_attribute\" type=\"objectlist\"&gt;\n\n    &lt;value&gt;katana&lt;/value&gt;\n    &lt;value&gt;claymore&lt;/value&gt;\n\n  &lt;/attr&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"player\"&gt;\n\n  &lt;inherit name=\"editor_object\" /&gt;\n  &lt;inherit name=\"editor_player\" /&gt;\n\n  &lt;attr name=\"parent\" type=\"object\"&gt;room&lt;/attr&gt;\n\n  &lt;attr name=\"luck\" type=\"int\"&gt;0&lt;/attr&gt;\n\n  &lt;attr name=\"gold\" type=\"int\"&gt;0&lt;/attr&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"action_button_object\"&gt;\n\n  &lt;attr name=\"parent\" type=\"object\"&gt;player&lt;/attr&gt;\n\n  &lt;attr name=\"alias\" type=\"string\"&gt;actions&lt;/attr&gt;\n\n  &lt;attr name=\"cheat\" type=\"script\"&gt;\n\n    &lt;![CDATA[\n\n      msg (\"Luck? (0 to 100)\")\n      get input {\n        if (IsInt (result)) {\n          input_integer_variable = ToInt (result)\n          if (input_integer_variable &gt;= 0 and input_integer_variable &lt;= 100) {\n            player.luck = input_integer_variable\n          }\n        }\n      }\n\n    ]]&gt;\n\n  &lt;/attr&gt;\n\n  &lt;attr name=\"search\" type=\"script\"&gt;\n\n    firsttime {\n\n      // handles the gold:\n\n      game.pov.gold = game.pov.gold + game.pov.luck * 2\n\n      // handles the items:\n\n      room_object_variable = game.pov.parent\n      if (HasAttribute (room_object_variable, \"search_objectlist_attribute\")) {\n        foreach (item_object_variable, room_object_variable.search_objectlist_attribute) {\n          if (RandomChance (game.pov.luck)) {\n            clone_object_variable = CloneObject (item_object_variable)\n            clone_object_variable.original_object_attribute = item_object_variable\n            clone_object_variable.parent = game.pov\n          }\n        }\n      }\n    }\n\n    otherwise {\n      msg (\"You've already searched here, sorry\")\n    }\n\n  &lt;/attr&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"equipment_object\"&gt;\n\n  &lt;object name=\"weapon_object\"&gt;\n\n    &lt;object name=\"melee_object\"&gt;\n\n      &lt;object name=\"sword_object\"&gt;\n\n        &lt;object name=\"katana\"&gt;\n        &lt;/object&gt;\n\n        &lt;object name=\"claymore\"&gt;\n        &lt;/object&gt;\n\n      &lt;/object&gt;\n\n    &lt;/object&gt;\n\n  &lt;/object&gt;\n\n&lt;/object&gt;\n\n&lt;verb&gt;\n  &lt;property&gt;cheat&lt;/property&gt;\n  &lt;pattern&gt;cheat&lt;/pattern&gt;\n  &lt;defaultexpression&gt;You can't cheat here!&lt;/defaultexpression&gt;\n&lt;/verb&gt;\n\n&lt;verb&gt;\n  &lt;property&gt;search&lt;/property&gt;\n  &lt;pattern&gt;search&lt;/pattern&gt;\n  &lt;defaultexpression&gt;You can't search here!&lt;/defaultexpression&gt;\n&lt;/verb&gt;\n</code></pre>\n\n",
      "PostDate": "2018-01-17T10:09:53.8760937Z",
      "LastEditDate": "2018-01-17T10:15:19.3932304Z",
      "link": null
    },
    {
      "PostId": "09d9a09a-75f7-4b76-b665-c46a5ab58fbb",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Gold = Gold * Luck + Gold\r\nGold/3 = 1 * 2 + 1\r\n\r\nOr, at least I think that's what it is.",
      "EditableFormat": "markdown",
      "HTML": "<p>Gold = Gold * Luck + Gold<br>\nGold/3 = 1 * 2 + 1</p>\n<p>Or, at least I think that's what it is.</p>\n\n",
      "PostDate": "2018-01-17T21:04:33.8153082Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "25d77d2d-6827-482a-9c90-5776c39c96cb",
      "UserId": 326173,
      "Username": "Curt A. P.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/bc1d5d57408cf4d13f9d9f23c1e3dc56?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "**hegemonkhan**, it's.... complicated. \r\nI think i understood your design, but it's so much ^^... I dream so much of working with quest, normal?\r\n\r\nI came up with the same idea as **jmnevil54**\r\n\r\n**jmnevil54**, I thought the same.. \r\nI want try somthing easy soundin' like: \r\n\r\nroom.loot_gold = player.search_skill + room.lootable_gold\r\n\r\nAs the player search he will get...\r\n(How to code it correct?)\r\n\r\nIs...\r\n\r\nplayer.gold = player.gold + room.loot_gold\r\nplayer.gold = player.gold + player.search_skill\r\n...enough?",
      "EditableFormat": "markdown",
      "HTML": "<p><strong>hegemonkhan</strong>, it's.... complicated.<br>\nI think i understood your design, but it's so much ^^... I dream so much of working with quest, normal?</p>\n<p>I came up with the same idea as <strong>jmnevil54</strong></p>\n<p><strong>jmnevil54</strong>, I thought the same..<br>\nI want try somthing easy soundin' like:</p>\n<p>room.loot_gold = player.search_skill + room.lootable_gold</p>\n<p>As the player search he will get...<br>\n(How to code it correct?)</p>\n<p>Is...</p>\n<p>player.gold = player.gold + room.loot_gold<br>\nplayer.gold = player.gold + player.search_skill<br>\n...enough?</p>\n\n",
      "PostDate": "2018-01-18T23:16:21.6115607Z",
      "LastEditDate": "2018-01-18T23:17:03.6458284Z",
      "link": null
    },
    {
      "PostId": "3cc2e010-ee3d-4ddd-8bf1-6528fbd6202f",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It's enough if you want it to be enough. It depends on how you scale everything, from the player's skills, to the gold found in an area/on a monster's body.",
      "EditableFormat": "markdown",
      "HTML": "<p>It's enough if you want it to be enough. It depends on how you scale everything, from the player's skills, to the gold found in an area/on a monster's body.</p>\n\n",
      "PostDate": "2018-01-19T02:21:57.8958979Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a7c2e07c-5028-4fa1-a7b6-e4617746db69",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You could put this in a turn script on the ```game``` object, making sure it's enabled:\r\n\r\n```\r\nplayer.parent.loot_gold = player.search_skill + player.parent.lootable_gold\r\n```\r\n\r\n---\r\n**NOTES:** \r\n\r\n1\\. ```player.parent``` is the room the player is currently in.\r\n\r\n2\\.  If your game allows you to play as objects other than the ```player``` object, you should use ```game.pov``` in place of ```player```.  ```game.pov``` covers any object which is being controlled by the actual person playing the game.\r\n\r\nSo ```player.parent``` should be ```game.pov.parent``` in such cases.\r\n\r\n(I will use ```player.parent``` in all the examples here, to keep it as simple is I can.  I just told mentioned the ```game.pov``` thing to avoid setting you up for future errors.)\r\n\r\n---\r\nThis would probably belong in the ```ontake``` script for something which is worth some gold:\r\n```\r\nplayer.gold = player.gold + player.parent.loot_gold\r\n```\r\n\r\n---\r\nThis one confuses me.\r\n\r\nWhen would this happen?\r\n```\r\nplayer.gold = player.gold + player.search_skill\r\n```\r\n\r\nIt seems like (maybe) you meant to set that on a room's ```loot_gold attribute```, perhaps in the room's ```beforeenter``` script:\r\n```\r\nplayer.parent.loot_gold = player.parent.loot_gold + player.search_skill\r\n```\r\n\r\n---\r\n### Resources:\r\n\r\nhttp://docs.textadventures.co.uk/quest/tutorial/custom_attributes.html\r\n\r\nhttp://docs.textadventures.co.uk/quest/using_attributes.html\r\n\r\nhttp://docs.textadventures.co.uk/quest/tutorial/status_attributes.html\r\n\r\nhttp://docs.textadventures.co.uk/quest/important_attributes.html\r\n\r\nhttp://docs.textadventures.co.uk/quest/score_health_money.html\r\n\r\nhttp://docs.textadventures.co.uk/quest/changing_the_player_object.html",
      "EditableFormat": "markdown",
      "HTML": "<p>You could put this in a turn script on the <code>game</code> object, making sure it's enabled:</p>\n<pre><code>player.parent.loot_gold = player.search_skill + player.parent.lootable_gold\n</code></pre>\n<hr>\n<p><strong>NOTES:</strong></p>\n<p>1. <code>player.parent</code> is the room the player is currently in.</p>\n<p>2.  If your game allows you to play as objects other than the <code>player</code> object, you should use <code>game.pov</code> in place of <code>player</code>.  <code>game.pov</code> covers any object which is being controlled by the actual person playing the game.</p>\n<p>So <code>player.parent</code> should be <code>game.pov.parent</code> in such cases.</p>\n<p>(I will use <code>player.parent</code> in all the examples here, to keep it as simple is I can.  I just told mentioned the <code>game.pov</code> thing to avoid setting you up for future errors.)</p>\n<hr>\n<p>This would probably belong in the <code>ontake</code> script for something which is worth some gold:</p>\n<pre><code>player.gold = player.gold + player.parent.loot_gold\n</code></pre>\n<hr>\n<p>This one confuses me.</p>\n<p>When would this happen?</p>\n<pre><code>player.gold = player.gold + player.search_skill\n</code></pre>\n<p>It seems like (maybe) you meant to set that on a room's <code>loot_gold attribute</code>, perhaps in the room's <code>beforeenter</code> script:</p>\n<pre><code>player.parent.loot_gold = player.parent.loot_gold + player.search_skill\n</code></pre>\n<hr>\n<h3>Resources:</h3>\n<p>http://docs.textadventures.co.uk/quest/tutorial/custom_attributes.html</p>\n<p>http://docs.textadventures.co.uk/quest/using_attributes.html</p>\n<p>http://docs.textadventures.co.uk/quest/tutorial/status_attributes.html</p>\n<p>http://docs.textadventures.co.uk/quest/important_attributes.html</p>\n<p>http://docs.textadventures.co.uk/quest/score_health_money.html</p>\n<p>http://docs.textadventures.co.uk/quest/changing_the_player_object.html</p>\n\n",
      "PostDate": "2018-01-19T03:04:47.7423511Z",
      "LastEditDate": "2018-01-19T03:06:08.750001Z",
      "link": null
    },
    {
      "PostId": "b07a11b5-0a87-496c-bb44-08dbed0375da",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Say you set an attribute \"gold\" on any room that can be searched and on the player for how much she is carrying. The SEARCH command would be:\r\n\r\n```\r\nif (HasInt(player.parent, \"gold\")) {\r\n  n = player.parent.gold + player.luck * 2\r\n  msg (\"You find \" + n + \" gold!\")\r\n  player.gold = player.gold + n\r\n  player.parent.gold = null\r\n}\r\nelse {\r\n  msg(\"You find nothing here.\")\r\n}\r\n```\r\n\r\n`player.parent` is the current room, so if the room has a \"gold\" attribute set, the value `n` is set to that plus twice the luck. It adds that to the \"gold\" attribute of the player, gives a message, and then sets the \"gold\" attribute of the room to null so the player cannot keepgetting more and more gold by searching twenty times.",
      "EditableFormat": "markdown",
      "HTML": "<p>Say you set an attribute \"gold\" on any room that can be searched and on the player for how much she is carrying. The SEARCH command would be:</p>\n<pre><code>if (HasInt(player.parent, \"gold\")) {\n  n = player.parent.gold + player.luck * 2\n  msg (\"You find \" + n + \" gold!\")\n  player.gold = player.gold + n\n  player.parent.gold = null\n}\nelse {\n  msg(\"You find nothing here.\")\n}\n</code></pre>\n<p><code>player.parent</code> is the current room, so if the room has a \"gold\" attribute set, the value <code>n</code> is set to that plus twice the luck. It adds that to the \"gold\" attribute of the player, gives a message, and then sets the \"gold\" attribute of the room to null so the player cannot keepgetting more and more gold by searching twenty times.</p>\n\n",
      "PostDate": "2018-01-19T11:46:07.98649Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "161dbc3e-b751-4200-92ae-559b2613a9dc",
      "UserId": 326173,
      "Username": "Curt A. P.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/bc1d5d57408cf4d13f9d9f23c1e3dc56?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yes, I set a gold attribute to the room and it fills slowly up over time if it reaches 0. \r\nI gonna try out these methods from **Pixie** and **K.V.**, thank ya...",
      "EditableFormat": "markdown",
      "HTML": "<p>Yes, I set a gold attribute to the room and it fills slowly up over time if it reaches 0.<br>\nI gonna try out these methods from <strong>Pixie</strong> and <strong>K.V.</strong>, thank ya...</p>\n\n",
      "PostDate": "2018-01-20T06:43:06.0277426Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
