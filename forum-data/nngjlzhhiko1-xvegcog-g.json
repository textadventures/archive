{
  "Topic": {
    "TopicId": "nngjlzhhiko1-xvegcog-g",
    "ForumId": "18",
    "Title": "buy",
    "LastUpdated": "2024-11-20T14:01:01.1258439Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "3e2da1bc-1448-4878-adc9-0fa330a698d0",
      "UserId": 31991,
      "Username": "daeun",
      "AvatarUrl": "https://i.imgur.com/Xvt8zzBb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "introduction\r\n**you only have to write 1 buy code no matter how big your game gets**\r\n\r\n1. create room1 and link it to room\r\n2. create umbrella object at room and give it alias 'umbrella'\r\n3. create action  object and move it into player's object, add a verb 'buy'\r\n4. In 'buy', change assignment to run script, open verb code view, and type in\r\n```\r\nshop_menu = NewStringList()\r\nforeach (buyitem, GetDirectChildren(game.pov.parent)) {\r\n  if (buyitem.name=\"player\") {\r\n  }\r\n  else {\r\n    list add (shop_menu, \"\"+buyitem.alias)\r\n  }\r\n}\r\nShowMenu (\"buy what\", shop_menu, true) {\r\n}\r\n```\r\n5. play test it, you can find out that we disabled player object from being chosen because it wouldn't make sense for player to buy himself\r\n6. At umbrella's attributes, add in 'buy_value' with integer 1\r\n7. At game object's features, click money\r\n8. Rewrite 'buy' code view\r\n```\r\nshop_menu = NewStringList()\r\nforeach (buyitem, GetDirectChildren(game.pov.parent)) {\r\n  if (HasAttribute(buyitem, \"buy_value\")) {\r\n    list add (shop_menu, buyitem.alias+\" $\"+buyitem.buy_value)\r\n  }\r\n}\r\nShowMenu (\"buy what\", shop_menu, true) {\r\n  msg (\"--\" + result + \"--\")\r\n  if (result<>null) {\r\n    foreach (chosenitem, GetDirectChildren(game.pov.parent)) {\r\n      if (chosenitem.alias+\" $\"+chosenitem.buy_value=result) {\r\n        if (player.money >= chosenitem.buy_value) {\r\n          msg (\"you bought \"+chosenitem.alias+\" for $\"+chosenitem.buy_value)\r\n          player.money = player.money-chosenitem.buy_value\r\n          AddToInventory (chosenitem)\r\n        }\r\n        else {\r\n          msg (\"not enough money\")\r\n        }\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    msg (\"You have chosen to press cancel\")\r\n  }\r\n}\r\n```\r\n9. play test the game, oops not enough money\r\n10. at game object's script, in start script code view, type\r\n```\r\nplayer.money=10\r\n```\r\n11. now the game starts with $10 and when you buy an umbrella, it goes into your pocket, reminder if you place the add money code in enter 'room', every time the player enters that room, he gains an additional $10, kinda overpowered, so dun do dat\r\n12. in action object's object tab, delete all the display verbs and inventory verbs to avoid annoying your players with verbs that does nothing\r\n__________________________________________________________________\r\n**for the extra challenge, we will add in sell_value**\r\n1. add attribute 'sell_value' to umbrella, give it integer 1\r\n2. change 'buy_value' of umbrella to integer 5\r\n3. in action object, add sell verb, give it a script\r\n```\r\nshop_menu = NewStringList()\r\nforeach (sellitem, GetDirectChildren(game.pov)) {\r\n  if (HasAttribute(sellitem, \"sell_value\")) {\r\n    list add (shop_menu, sellitem.alias+\" $\"+sellitem.sell_value)\r\n  }\r\n}\r\nShowMenu (\"sell what\", shop_menu, true) {\r\n  msg (\"--\" + result + \"--\")\r\n  if (result<>null) {\r\n    foreach (chosenitem, GetDirectChildren(game.pov)) {\r\n      if (chosenitem.alias+\" $\"+chosenitem.sell_value=result) {\r\n        msg (\"you sold \"+chosenitem.alias+\" for $\"+chosenitem.sell_value)\r\n        player.money = player.money+chosenitem.sell_value\r\n        RemoveObject (chosenitem)\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    msg (\"You have chosen to press cancel\")\r\n  }\r\n}\r\n```\r\n4. play test, you should be able to sell items now\r\n5. if an item is required to complete a quest, you should avoid adding a sell_value to that object, this will automatically disable selling of dat object\r\n\r\n_________________________________________________________________\r\n\r\n**for the logical ones, we will add in shopkeeper**\r\nbecause players shouldn't be able to buy or sell items without a shopkeeper\r\n1. add object 'scholar', give it attribute 'shopkeeper'\r\n2. change buy verb\r\n```\r\nshopkeeperaround = false\r\nforeach (merchant, GetDirectChildren(game.pov.parent)) {\r\n  if (HasAttribute(merchant, \"shopkeeper\")) {\r\n    shopkeeperaround = true\r\n  }\r\n  else {\r\n  }\r\n}\r\nif (shopkeeperaround=true) {\r\n  shop_menu = NewStringList()\r\n  foreach (buyitem, GetDirectChildren(game.pov.parent)) {\r\n    if (HasAttribute(buyitem, \"buy_value\")) {\r\n      list add (shop_menu, buyitem.alias+\" $\"+buyitem.buy_value)\r\n    }\r\n  }\r\n  ShowMenu (\"buy what\", shop_menu, true) {\r\n    msg (\"--\" + result + \"--\")\r\n    if (result<>null) {\r\n      foreach (chosenitem, GetDirectChildren(game.pov.parent)) {\r\n        if (chosenitem.alias+\" $\"+chosenitem.buy_value=result) {\r\n          if (player.money >= chosenitem.buy_value) {\r\n            msg (\"you bought \"+chosenitem.alias+\" for $\"+chosenitem.buy_value)\r\n            player.money = player.money-chosenitem.buy_value\r\n            AddToInventory (chosenitem)\r\n          }\r\n          else {\r\n            msg (\"not enough money\")\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      msg (\"You have chosen to press cancel\")\r\n    }\r\n  }\r\n}\r\nelse {\r\n  msg (\"there is no shopkeeper around\")\r\n}\r\n\r\n```\r\n3. change sell verb\r\n```\r\nshopkeeperaround = false\r\nforeach (merchant, GetDirectChildren(game.pov.parent)) {\r\n  if (HasAttribute(merchant, \"shopkeeper\")) {\r\n    shopkeeperaround = true\r\n  }\r\n  else {\r\n  }\r\n}\r\nif (shopkeeperaround=true) {\r\n  shop_menu = NewStringList()\r\n  foreach (sellitem, GetDirectChildren(game.pov)) {\r\n    if (HasAttribute(sellitem, \"sell_value\")) {\r\n      list add (shop_menu, sellitem.alias+\" $\"+sellitem.sell_value)\r\n    }\r\n  }\r\n  ShowMenu (\"sell what\", shop_menu, true) {\r\n    msg (\"--\" + result + \"--\")\r\n    if (result<>null) {\r\n      foreach (chosenitem, GetDirectChildren(game.pov)) {\r\n        if (chosenitem.alias+\" $\"+chosenitem.sell_value=result) {\r\n          msg (\"you sold \"+chosenitem.alias+\" for $\"+chosenitem.sell_value)\r\n          player.money = player.money+chosenitem.sell_value\r\n          RemoveObject (chosenitem)\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      msg (\"You have chosen to press cancel\")\r\n    }\r\n  }\r\n}\r\nelse {\r\n  msg (\"there is no shopkeeper around\")\r\n}\r\n```\r\n\r\n____________________________________________________________\r\n\r\n**And for completeness, there are occasions where there is nothing to be bought or sold,\r\nbut it still says 'buy what' and 'sell what'**\r\n1. change buy verb ( for your learning convenience, we only added in a listcount )\r\n```\r\nshopkeeperaround = false\r\nforeach (merchant, GetDirectChildren(game.pov.parent)) {\r\n  if (HasAttribute(merchant, \"shopkeeper\")) {\r\n    shopkeeperaround = true\r\n  }\r\n  else {\r\n  }\r\n}\r\nif (shopkeeperaround=true) {\r\n  shop_menu = NewStringList()\r\n  foreach (buyitem, GetDirectChildren(game.pov.parent)) {\r\n    if (HasAttribute(buyitem, \"buy_value\")) {\r\n      list add (shop_menu, buyitem.alias+\" $\"+buyitem.buy_value)\r\n    }\r\n  }\r\n  if (ListCount(shop_menu)=0) {\r\n    msg (\"there is nothing to buy for now\")\r\n  }\r\n  else {\r\n    ShowMenu (\"buy what\", shop_menu, true) {\r\n      msg (\"--\" + result + \"--\")\r\n      if (result<>null) {\r\n        foreach (chosenitem, GetDirectChildren(game.pov.parent)) {\r\n          if (chosenitem.alias+\" $\"+chosenitem.buy_value=result) {\r\n            if (player.money >= chosenitem.buy_value) {\r\n              msg (\"you bought \"+chosenitem.alias+\" for $\"+chosenitem.buy_value)\r\n              player.money = player.money-chosenitem.buy_value\r\n              AddToInventory (chosenitem)\r\n            }\r\n            else {\r\n              msg (\"not enough money\")\r\n            }\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        msg (\"You have chosen to press cancel\")\r\n      }\r\n    }\r\n  }\r\n}\r\nelse {\r\n  msg (\"there is no shopkeeper around\")\r\n}\r\n```\r\n2. change sell verb ( for your learning convenience, we only added in a listcount )\r\n```\r\nshopkeeperaround = false\r\nforeach (merchant, GetDirectChildren(game.pov.parent)) {\r\n  if (HasAttribute(merchant, \"shopkeeper\")) {\r\n    shopkeeperaround = true\r\n  }\r\n  else {\r\n  }\r\n}\r\nif (shopkeeperaround=true) {\r\n  shop_menu = NewStringList()\r\n  foreach (sellitem, GetDirectChildren(game.pov)) {\r\n    if (HasAttribute(sellitem, \"sell_value\")) {\r\n      list add (shop_menu, sellitem.alias+\" $\"+sellitem.sell_value)\r\n    }\r\n  }\r\n  if (ListCount(shop_menu)=0) {\r\n    msg (\"there is nothing to sell for now\")\r\n  }\r\n  else {\r\n    ShowMenu (\"sell what\", shop_menu, true) {\r\n      msg (\"--\" + result + \"--\")\r\n      if (result<>null) {\r\n        foreach (chosenitem, GetDirectChildren(game.pov)) {\r\n          if (chosenitem.alias+\" $\"+chosenitem.sell_value=result) {\r\n            msg (\"you sold \"+chosenitem.alias+\" for $\"+chosenitem.sell_value)\r\n            player.money = player.money+chosenitem.sell_value\r\n            RemoveObject (chosenitem)\r\n          }\r\n        }\r\n      }\r\n      else {\r\n        msg (\"You have chosen to press cancel\")\r\n      }\r\n    }\r\n  }\r\n}\r\nelse {\r\n  msg (\"there is no shopkeeper around\")\r\n}\r\n```\r\n__________________________________________________________________\r\n\r\nIn summary, even though we do not have to write any more codes for any new buying and selling of items, since this code will automatically do it for you\r\n**you must still remember to give attributes to items or shopkeeper**\r\n\r\nlist of attributes required\r\n1. buy_value\r\n2. sell_value\r\n3. shopkeeper\r\n\r\n___________________________________________________________________\r\n\r\nQuick demo/ Sample code\r\n\r\nTo paste the code\r\nStartup your quest gamebook/textadventure, on the right side of the big play button, you can see a code view button\r\nCopy my code to replace the code in the text box, click code view button again.\r\nViola, it is done, press play button to test out the game and modify the code to your preference.\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.8.6836.13983-->\r\n<asl version=\"580\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"test16\">\r\n    <gameid>d1fa92b0-fc94-4d74-822d-558893f309ba</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2024</firstpublished>\r\n    <showmoney />\r\n    <start type=\"script\">\r\n      player.money = 10\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <isroom />\r\n    <enter type=\"script\">\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <object name=\"action\">\r\n        <inherit name=\"editor_object\" />\r\n        <displayverbs type=\"stringlist\" />\r\n        <inventoryverbs type=\"stringlist\" />\r\n        <buy type=\"script\"><![CDATA[\r\n          shopkeeperaround = false\r\n          foreach (merchant, GetDirectChildren(game.pov.parent)) {\r\n            if (HasAttribute(merchant, \"shopkeeper\")) {\r\n              shopkeeperaround = true\r\n            }\r\n            else {\r\n            }\r\n          }\r\n          if (shopkeeperaround=true) {\r\n            shop_menu = NewStringList()\r\n            foreach (buyitem, GetDirectChildren(game.pov.parent)) {\r\n              if (HasAttribute(buyitem, \"buy_value\")) {\r\n                list add (shop_menu, buyitem.alias+\" $\"+buyitem.buy_value)\r\n              }\r\n            }\r\n            if (ListCount(shop_menu)=0) {\r\n              msg (\"there is nothing to buy for now\")\r\n            }\r\n            else {\r\n              ShowMenu (\"buy what\", shop_menu, true) {\r\n                msg (\"--\" + result + \"--\")\r\n                if (result<>null) {\r\n                  foreach (chosenitem, GetDirectChildren(game.pov.parent)) {\r\n                    if (chosenitem.alias+\" $\"+chosenitem.buy_value=result) {\r\n                      if (player.money >= chosenitem.buy_value) {\r\n                        msg (\"you bought \"+chosenitem.alias+\" for $\"+chosenitem.buy_value)\r\n                        player.money = player.money-chosenitem.buy_value\r\n                        AddToInventory (chosenitem)\r\n                      }\r\n                      else {\r\n                        msg (\"not enough money\")\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n                else {\r\n                  msg (\"You have chosen to press cancel\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            msg (\"there is no shopkeeper around\")\r\n          }\r\n        ]]></buy>\r\n        <sell type=\"script\"><![CDATA[\r\n          shopkeeperaround = false\r\n          foreach (merchant, GetDirectChildren(game.pov.parent)) {\r\n            if (HasAttribute(merchant, \"shopkeeper\")) {\r\n              shopkeeperaround = true\r\n            }\r\n            else {\r\n            }\r\n          }\r\n          if (shopkeeperaround=true) {\r\n            shop_menu = NewStringList()\r\n            foreach (sellitem, GetDirectChildren(game.pov)) {\r\n              if (HasAttribute(sellitem, \"sell_value\")) {\r\n                list add (shop_menu, sellitem.alias+\" $\"+sellitem.sell_value)\r\n              }\r\n            }\r\n            if (ListCount(shop_menu)=0) {\r\n              msg (\"there is nothing to sell for now\")\r\n            }\r\n            else {\r\n              ShowMenu (\"sell what\", shop_menu, true) {\r\n                msg (\"--\" + result + \"--\")\r\n                if (result<>null) {\r\n                  foreach (chosenitem, GetDirectChildren(game.pov)) {\r\n                    if (chosenitem.alias+\" $\"+chosenitem.sell_value=result) {\r\n                      msg (\"you sold \"+chosenitem.alias+\" for $\"+chosenitem.sell_value)\r\n                      player.money = player.money+chosenitem.sell_value\r\n                      RemoveObject (chosenitem)\r\n                    }\r\n                  }\r\n                }\r\n                else {\r\n                  msg (\"You have chosen to press cancel\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n          else {\r\n            msg (\"there is no shopkeeper around\")\r\n          }\r\n        ]]></sell>\r\n      </object>\r\n    </object>\r\n    <exit alias=\"south\" to=\"room1\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n    <object name=\"umbrella\">\r\n      <inherit name=\"editor_object\" />\r\n      <alias>umbrella</alias>\r\n      <attr name=\"buy_value\" type=\"int\">5</attr>\r\n      <attr name=\"sell_value\" type=\"int\">1</attr>\r\n    </object>\r\n    <object name=\"scholar\">\r\n      <inherit name=\"editor_object\" />\r\n      <shopkeeper type=\"string\"></shopkeeper>\r\n    </object>\r\n  </object>\r\n  <object name=\"room1\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"north\" to=\"room\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n  </object>\r\n  <verb>\r\n    <property>sell</property>\r\n    <pattern>sell</pattern>\r\n    <defaultexpression>\"You can't sell \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n</asl>\r\n\r\n```\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>introduction<br>\n<strong>you only have to write 1 buy code no matter how big your game gets</strong></p>\n<ol>\n<li>create room1 and link it to room</li>\n<li>create umbrella object at room and give it alias 'umbrella'</li>\n<li>create action  object and move it into player's object, add a verb 'buy'</li>\n<li>In 'buy', change assignment to run script, open verb code view, and type in</li>\n</ol>\n<pre><code>shop_menu = NewStringList()\nforeach (buyitem, GetDirectChildren(game.pov.parent)) {\n  if (buyitem.name=\"player\") {\n  }\n  else {\n    list add (shop_menu, \"\"+buyitem.alias)\n  }\n}\nShowMenu (\"buy what\", shop_menu, true) {\n}\n</code></pre>\n<ol start=\"5\">\n<li>play test it, you can find out that we disabled player object from being chosen because it wouldn't make sense for player to buy himself</li>\n<li>At umbrella's attributes, add in 'buy_value' with integer 1</li>\n<li>At game object's features, click money</li>\n<li>Rewrite 'buy' code view</li>\n</ol>\n<pre><code>shop_menu = NewStringList()\nforeach (buyitem, GetDirectChildren(game.pov.parent)) {\n  if (HasAttribute(buyitem, \"buy_value\")) {\n    list add (shop_menu, buyitem.alias+\" $\"+buyitem.buy_value)\n  }\n}\nShowMenu (\"buy what\", shop_menu, true) {\n  msg (\"--\" + result + \"--\")\n  if (result&lt;&gt;null) {\n    foreach (chosenitem, GetDirectChildren(game.pov.parent)) {\n      if (chosenitem.alias+\" $\"+chosenitem.buy_value=result) {\n        if (player.money &gt;= chosenitem.buy_value) {\n          msg (\"you bought \"+chosenitem.alias+\" for $\"+chosenitem.buy_value)\n          player.money = player.money-chosenitem.buy_value\n          AddToInventory (chosenitem)\n        }\n        else {\n          msg (\"not enough money\")\n        }\n      }\n    }\n  }\n  else {\n    msg (\"You have chosen to press cancel\")\n  }\n}\n</code></pre>\n<ol start=\"9\">\n<li>play test the game, oops not enough money</li>\n<li>at game object's script, in start script code view, type</li>\n</ol>\n<pre><code>player.money=10\n</code></pre>\n<ol start=\"11\">\n<li>now the game starts with $10 and when you buy an umbrella, it goes into your pocket, reminder if you place the add money code in enter 'room', every time the player enters that room, he gains an additional $10, kinda overpowered, so dun do dat</li>\n<li>in action object's object tab, delete all the display verbs and inventory verbs to avoid annoying your players with verbs that does nothing</li>\n</ol>\n<hr>\n<p><strong>for the extra challenge, we will add in sell_value</strong></p>\n<ol>\n<li>add attribute 'sell_value' to umbrella, give it integer 1</li>\n<li>change 'buy_value' of umbrella to integer 5</li>\n<li>in action object, add sell verb, give it a script</li>\n</ol>\n<pre><code>shop_menu = NewStringList()\nforeach (sellitem, GetDirectChildren(game.pov)) {\n  if (HasAttribute(sellitem, \"sell_value\")) {\n    list add (shop_menu, sellitem.alias+\" $\"+sellitem.sell_value)\n  }\n}\nShowMenu (\"sell what\", shop_menu, true) {\n  msg (\"--\" + result + \"--\")\n  if (result&lt;&gt;null) {\n    foreach (chosenitem, GetDirectChildren(game.pov)) {\n      if (chosenitem.alias+\" $\"+chosenitem.sell_value=result) {\n        msg (\"you sold \"+chosenitem.alias+\" for $\"+chosenitem.sell_value)\n        player.money = player.money+chosenitem.sell_value\n        RemoveObject (chosenitem)\n      }\n    }\n  }\n  else {\n    msg (\"You have chosen to press cancel\")\n  }\n}\n</code></pre>\n<ol start=\"4\">\n<li>play test, you should be able to sell items now</li>\n<li>if an item is required to complete a quest, you should avoid adding a sell_value to that object, this will automatically disable selling of dat object</li>\n</ol>\n<hr>\n<p><strong>for the logical ones, we will add in shopkeeper</strong><br>\nbecause players shouldn't be able to buy or sell items without a shopkeeper</p>\n<ol>\n<li>add object 'scholar', give it attribute 'shopkeeper'</li>\n<li>change buy verb</li>\n</ol>\n<pre><code>shopkeeperaround = false\nforeach (merchant, GetDirectChildren(game.pov.parent)) {\n  if (HasAttribute(merchant, \"shopkeeper\")) {\n    shopkeeperaround = true\n  }\n  else {\n  }\n}\nif (shopkeeperaround=true) {\n  shop_menu = NewStringList()\n  foreach (buyitem, GetDirectChildren(game.pov.parent)) {\n    if (HasAttribute(buyitem, \"buy_value\")) {\n      list add (shop_menu, buyitem.alias+\" $\"+buyitem.buy_value)\n    }\n  }\n  ShowMenu (\"buy what\", shop_menu, true) {\n    msg (\"--\" + result + \"--\")\n    if (result&lt;&gt;null) {\n      foreach (chosenitem, GetDirectChildren(game.pov.parent)) {\n        if (chosenitem.alias+\" $\"+chosenitem.buy_value=result) {\n          if (player.money &gt;= chosenitem.buy_value) {\n            msg (\"you bought \"+chosenitem.alias+\" for $\"+chosenitem.buy_value)\n            player.money = player.money-chosenitem.buy_value\n            AddToInventory (chosenitem)\n          }\n          else {\n            msg (\"not enough money\")\n          }\n        }\n      }\n    }\n    else {\n      msg (\"You have chosen to press cancel\")\n    }\n  }\n}\nelse {\n  msg (\"there is no shopkeeper around\")\n}\n\n</code></pre>\n<ol start=\"3\">\n<li>change sell verb</li>\n</ol>\n<pre><code>shopkeeperaround = false\nforeach (merchant, GetDirectChildren(game.pov.parent)) {\n  if (HasAttribute(merchant, \"shopkeeper\")) {\n    shopkeeperaround = true\n  }\n  else {\n  }\n}\nif (shopkeeperaround=true) {\n  shop_menu = NewStringList()\n  foreach (sellitem, GetDirectChildren(game.pov)) {\n    if (HasAttribute(sellitem, \"sell_value\")) {\n      list add (shop_menu, sellitem.alias+\" $\"+sellitem.sell_value)\n    }\n  }\n  ShowMenu (\"sell what\", shop_menu, true) {\n    msg (\"--\" + result + \"--\")\n    if (result&lt;&gt;null) {\n      foreach (chosenitem, GetDirectChildren(game.pov)) {\n        if (chosenitem.alias+\" $\"+chosenitem.sell_value=result) {\n          msg (\"you sold \"+chosenitem.alias+\" for $\"+chosenitem.sell_value)\n          player.money = player.money+chosenitem.sell_value\n          RemoveObject (chosenitem)\n        }\n      }\n    }\n    else {\n      msg (\"You have chosen to press cancel\")\n    }\n  }\n}\nelse {\n  msg (\"there is no shopkeeper around\")\n}\n</code></pre>\n<hr>\n<p><strong>And for completeness, there are occasions where there is nothing to be bought or sold,<br>\nbut it still says 'buy what' and 'sell what'</strong></p>\n<ol>\n<li>change buy verb ( for your learning convenience, we only added in a listcount )</li>\n</ol>\n<pre><code>shopkeeperaround = false\nforeach (merchant, GetDirectChildren(game.pov.parent)) {\n  if (HasAttribute(merchant, \"shopkeeper\")) {\n    shopkeeperaround = true\n  }\n  else {\n  }\n}\nif (shopkeeperaround=true) {\n  shop_menu = NewStringList()\n  foreach (buyitem, GetDirectChildren(game.pov.parent)) {\n    if (HasAttribute(buyitem, \"buy_value\")) {\n      list add (shop_menu, buyitem.alias+\" $\"+buyitem.buy_value)\n    }\n  }\n  if (ListCount(shop_menu)=0) {\n    msg (\"there is nothing to buy for now\")\n  }\n  else {\n    ShowMenu (\"buy what\", shop_menu, true) {\n      msg (\"--\" + result + \"--\")\n      if (result&lt;&gt;null) {\n        foreach (chosenitem, GetDirectChildren(game.pov.parent)) {\n          if (chosenitem.alias+\" $\"+chosenitem.buy_value=result) {\n            if (player.money &gt;= chosenitem.buy_value) {\n              msg (\"you bought \"+chosenitem.alias+\" for $\"+chosenitem.buy_value)\n              player.money = player.money-chosenitem.buy_value\n              AddToInventory (chosenitem)\n            }\n            else {\n              msg (\"not enough money\")\n            }\n          }\n        }\n      }\n      else {\n        msg (\"You have chosen to press cancel\")\n      }\n    }\n  }\n}\nelse {\n  msg (\"there is no shopkeeper around\")\n}\n</code></pre>\n<ol start=\"2\">\n<li>change sell verb ( for your learning convenience, we only added in a listcount )</li>\n</ol>\n<pre><code>shopkeeperaround = false\nforeach (merchant, GetDirectChildren(game.pov.parent)) {\n  if (HasAttribute(merchant, \"shopkeeper\")) {\n    shopkeeperaround = true\n  }\n  else {\n  }\n}\nif (shopkeeperaround=true) {\n  shop_menu = NewStringList()\n  foreach (sellitem, GetDirectChildren(game.pov)) {\n    if (HasAttribute(sellitem, \"sell_value\")) {\n      list add (shop_menu, sellitem.alias+\" $\"+sellitem.sell_value)\n    }\n  }\n  if (ListCount(shop_menu)=0) {\n    msg (\"there is nothing to sell for now\")\n  }\n  else {\n    ShowMenu (\"sell what\", shop_menu, true) {\n      msg (\"--\" + result + \"--\")\n      if (result&lt;&gt;null) {\n        foreach (chosenitem, GetDirectChildren(game.pov)) {\n          if (chosenitem.alias+\" $\"+chosenitem.sell_value=result) {\n            msg (\"you sold \"+chosenitem.alias+\" for $\"+chosenitem.sell_value)\n            player.money = player.money+chosenitem.sell_value\n            RemoveObject (chosenitem)\n          }\n        }\n      }\n      else {\n        msg (\"You have chosen to press cancel\")\n      }\n    }\n  }\n}\nelse {\n  msg (\"there is no shopkeeper around\")\n}\n</code></pre>\n<hr>\n<p>In summary, even though we do not have to write any more codes for any new buying and selling of items, since this code will automatically do it for you<br>\n<strong>you must still remember to give attributes to items or shopkeeper</strong></p>\n<p>list of attributes required</p>\n<ol>\n<li>buy_value</li>\n<li>sell_value</li>\n<li>shopkeeper</li>\n</ol>\n<hr>\n<p>Quick demo/ Sample code</p>\n<p>To paste the code<br>\nStartup your quest gamebook/textadventure, on the right side of the big play button, you can see a code view button<br>\nCopy my code to replace the code in the text box, click code view button again.<br>\nViola, it is done, press play button to test out the game and modify the code to your preference.</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.8.6836.13983--&gt;\n&lt;asl version=\"580\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"test16\"&gt;\n    &lt;gameid&gt;d1fa92b0-fc94-4d74-822d-558893f309ba&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2024&lt;/firstpublished&gt;\n    &lt;showmoney /&gt;\n    &lt;start type=\"script\"&gt;\n      player.money = 10\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;isroom /&gt;\n    &lt;enter type=\"script\"&gt;\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;object name=\"action\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;displayverbs type=\"stringlist\" /&gt;\n        &lt;inventoryverbs type=\"stringlist\" /&gt;\n        &lt;buy type=\"script\"&gt;&lt;![CDATA[\n          shopkeeperaround = false\n          foreach (merchant, GetDirectChildren(game.pov.parent)) {\n            if (HasAttribute(merchant, \"shopkeeper\")) {\n              shopkeeperaround = true\n            }\n            else {\n            }\n          }\n          if (shopkeeperaround=true) {\n            shop_menu = NewStringList()\n            foreach (buyitem, GetDirectChildren(game.pov.parent)) {\n              if (HasAttribute(buyitem, \"buy_value\")) {\n                list add (shop_menu, buyitem.alias+\" $\"+buyitem.buy_value)\n              }\n            }\n            if (ListCount(shop_menu)=0) {\n              msg (\"there is nothing to buy for now\")\n            }\n            else {\n              ShowMenu (\"buy what\", shop_menu, true) {\n                msg (\"--\" + result + \"--\")\n                if (result&lt;&gt;null) {\n                  foreach (chosenitem, GetDirectChildren(game.pov.parent)) {\n                    if (chosenitem.alias+\" $\"+chosenitem.buy_value=result) {\n                      if (player.money &gt;= chosenitem.buy_value) {\n                        msg (\"you bought \"+chosenitem.alias+\" for $\"+chosenitem.buy_value)\n                        player.money = player.money-chosenitem.buy_value\n                        AddToInventory (chosenitem)\n                      }\n                      else {\n                        msg (\"not enough money\")\n                      }\n                    }\n                  }\n                }\n                else {\n                  msg (\"You have chosen to press cancel\")\n                }\n              }\n            }\n          }\n          else {\n            msg (\"there is no shopkeeper around\")\n          }\n        ]]&gt;&lt;/buy&gt;\n        &lt;sell type=\"script\"&gt;&lt;![CDATA[\n          shopkeeperaround = false\n          foreach (merchant, GetDirectChildren(game.pov.parent)) {\n            if (HasAttribute(merchant, \"shopkeeper\")) {\n              shopkeeperaround = true\n            }\n            else {\n            }\n          }\n          if (shopkeeperaround=true) {\n            shop_menu = NewStringList()\n            foreach (sellitem, GetDirectChildren(game.pov)) {\n              if (HasAttribute(sellitem, \"sell_value\")) {\n                list add (shop_menu, sellitem.alias+\" $\"+sellitem.sell_value)\n              }\n            }\n            if (ListCount(shop_menu)=0) {\n              msg (\"there is nothing to sell for now\")\n            }\n            else {\n              ShowMenu (\"sell what\", shop_menu, true) {\n                msg (\"--\" + result + \"--\")\n                if (result&lt;&gt;null) {\n                  foreach (chosenitem, GetDirectChildren(game.pov)) {\n                    if (chosenitem.alias+\" $\"+chosenitem.sell_value=result) {\n                      msg (\"you sold \"+chosenitem.alias+\" for $\"+chosenitem.sell_value)\n                      player.money = player.money+chosenitem.sell_value\n                      RemoveObject (chosenitem)\n                    }\n                  }\n                }\n                else {\n                  msg (\"You have chosen to press cancel\")\n                }\n              }\n            }\n          }\n          else {\n            msg (\"there is no shopkeeper around\")\n          }\n        ]]&gt;&lt;/sell&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"south\" to=\"room1\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"umbrella\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;alias&gt;umbrella&lt;/alias&gt;\n      &lt;attr name=\"buy_value\" type=\"int\"&gt;5&lt;/attr&gt;\n      &lt;attr name=\"sell_value\" type=\"int\"&gt;1&lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"scholar\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;shopkeeper type=\"string\"&gt;&lt;/shopkeeper&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room1\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"north\" to=\"room\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;verb&gt;\n    &lt;property&gt;sell&lt;/property&gt;\n    &lt;pattern&gt;sell&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't sell \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n&lt;/asl&gt;\n\n</code></pre>\n</details>\n\n",
      "PostDate": "2024-11-20T14:01:01.1258439Z",
      "LastEditDate": "2024-11-20T16:35:43.4623914Z",
      "link": null
    }
  ]
}
