{
  "Topic": {
    "TopicId": "5424",
    "ForumId": "10",
    "Title": "How to create patrolling guard?",
    "LastUpdated": "2015-08-19T02:32:48+01:00",
    "ReplyCount": 3
  },
  "Posts": [
    {
      "PostId": "37692",
      "UserId": 0,
      "Username": "Hibiki",
      "UserAvatar": null,
      "UserGravatar": "020d660f6fb027a7cba2e1f86f383e3a",
      "EditableText": "please help me with quest, i need to create a patrolling guard, i made 3 rooms connected to each other, and a guard in the first room, so when the player makes a turn the guard moves to room 2, then room 3, then room 2, then room 1, and then all this cycle must repeat, so the guard will be patrolling and the player can avoid him, but i also want the guard to be visible in nearby room, so when the player is in the room 2 and the guard is in room 1, the message should appear that the guard is nearby, and i also want the game to finish when the player and the guard are in the same room (guard catches the player). please help me.",
      "EditableFormat": "bbcode",
      "HTML": "please help me with quest, i need to create a patrolling guard, i made 3 rooms connected to each other, and a guard in the first room, so when the player makes a turn the guard moves to room 2, then room 3, then room 2, then room 1, and then all this cycle must repeat, so the guard will be patrolling and the player can avoid him, but i also want the guard to be visible in nearby room, so when the player is in the room 2 and the guard is in room 1, the message should appear that the guard is nearby, and i also want the game to finish when the player and the guard are in the same room (guard catches the player). please help me.",
      "PostDate": "2015-08-18T16:25:48+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "37693",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "So... It's just at a three room cycle?\n\nIf so, I'll try to whip something up when I get home in 5 hrs.  My explanation will be GUI heavy.  If you prefer code heavy explanation, someone else will have to help you!  Good luck.",
      "EditableFormat": "bbcode",
      "HTML": "So... It's just at a three room cycle?<br/><br/>If so, I'll try to whip something up when I get home in 5 hrs.  My explanation will be GUI heavy.  If you prefer code heavy explanation, someone else will have to help you!  Good luck.",
      "PostDate": "2015-08-18T17:23:11+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "37694",
      "UserId": 0,
      "Username": "Forgewright",
      "UserAvatar": "6526_1436782372.jpg",
      "UserGravatar": "7cd39eda147e41376a7192dbd0bb386e",
      "EditableText": "If only three rooms, won't the guard always be nearby? The turn script is probably the answer here.",
      "EditableFormat": "bbcode",
      "HTML": "If only three rooms, won't the guard always be nearby? The turn script is probably the answer here.",
      "PostDate": "2015-08-18T18:08:44+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "37697",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "Here is the code for the three rooms.  I have connected the rooms in a simple triangle.  I did not add an exit from this triangle as I'm not sure exactly what you want to do with it.\n\nIt's late and I just started school, so please forgive me if this copy-paste of my code is incomplete or if you find an error!!  You should be able to copy-paste this code into a new game and see what I tried to do.  It should give you a template to use for your own game.  If it doesn't work, let me know and I'll try and give you a fix.\n\n[code:1mgct3nj]  &lt;object name=&quot;patrolling guard room 1&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;enter type=&quot;script&quot;&gt;\n    &lt;/enter&gt;\n    &lt;firstenter type=&quot;script&quot;&gt;\n      msg (&quot;An alarm sounds when you enter the room&#46;  A guard will be here shortly&#46;  Better get a move on!&quot;)\n      SetObjectFlagOn (Magoo, &quot;patrolled&quot;)\n      guarding\n    &lt;/firstenter&gt;\n    &lt;object name=&quot;Magoo&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;inherit name=&quot;editor_player&quot; /&gt;\n      &lt;look&gt;You're Magoo&#46;  A simple being trapped in a test game&#46;&lt;/look&gt;\n      &lt;attr name=&quot;pov_look&quot;&gt;You're Magoo&#46;  A simple being trapped in a test game&#46;&lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;exit alias=&quot;southeast&quot; to=&quot;patrolling guard room 2&quot;&gt;\n      &lt;inherit name=&quot;southeastdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;southwest&quot; to=&quot;patrolling guard room 3&quot;&gt;\n      &lt;inherit name=&quot;southwestdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=&quot;patrolling guard room 2&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;exit alias=&quot;northwest&quot; to=&quot;patrolling guard room 1&quot;&gt;\n      &lt;inherit name=&quot;northwestdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;west&quot; to=&quot;patrolling guard room 3&quot;&gt;\n      &lt;inherit name=&quot;westdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=&quot;patrolling guard room 3&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;exit alias=&quot;east&quot; to=&quot;patrolling guard room 2&quot;&gt;\n      &lt;inherit name=&quot;eastdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;northeast&quot; to=&quot;patrolling guard room 1&quot;&gt;\n      &lt;inherit name=&quot;northeastdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=&quot;guarding TS&quot;&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      if (ListContains(ScopeVisible(), guard)) {\n        msg (&quot;You and the guard have happened to stumble into the same room&#46;  He looks incensed that he has been put to work&#46;  He takes his frustration out on you with his billy club&#46;  He pummels you to death&#46;  Sorry&#46;&quot;)\n        finish\n      }\n      if (GetBoolean(Magoo, &quot;patrolled&quot;)) {\n        if (GetBoolean(guard, &quot;room1&quot;)) {\n          if (game&#46;pov&#46;parent = patrolling guard room 2) {\n            msg (&quot;You look over your shoulder to the northwest and into patrol room 1 and you see the guard patrolling that room&#46;&quot;)\n          }\n          else if (game&#46;pov&#46;parent = patrolling guard room 3) {\n            msg (&quot;You look over your shoulder to the northeast and into patrol room 1 and you see the guard patrolling that room&#46;&quot;)\n          }\n        }\n        else if (GetBoolean(guard, &quot;room2&quot;)) {\n          if (game&#46;pov&#46;parent = patrolling guard room 1) {\n            msg (&quot;You look off to your southeast and see a nasty looking guard patrolling guard room 2&#46;&quot;)\n          }\n          else if (game&#46;pov&#46;parent = patrolling guard room 3) {\n            msg (&quot;You hear some noise to the east and you take a look that way&#46;  You see the guard loitering in room 2&#46;&quot;)\n          }\n        }\n        else if (GetBoolean(guard, &quot;room3&quot;)) {\n          if (game&#46;pov&#46;parent = patrolling guard room 2) {\n            msg (&quot;The guard is certainly making some noise off to the west as he searches patrol room 3 for you&#46;&quot;)\n          }\n          else if (game&#46;pov&#46;parent = patrolling guard room 1) {\n            msg (&quot;As you dawdle in room 1, the guard is frantically searching for you in patrol room 3 to your southwest&#46;&quot;)\n          }\n        }\n      }\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;command name=&quot;look guard cmd&quot;&gt;\n    &lt;pattern&gt;look at guard; x guard&lt;/pattern&gt;\n    &lt;script&gt;\n      if (GetBoolean(guard, &quot;room1&quot;)) {\n        msg (&quot;You look carefully into room 1 where you believe the guard to be&#46;&#46;&#46; He is large and angry&#46;  He is weilding a fearsome looking billy club&#46;&quot;)\n      }\n      else if (GetBoolean(guard, &quot;room2&quot;)) {\n        msg (&quot;You look carefully into room 2 where you believe the guard to be&#46;&#46;&#46; He is large and angry&#46;  He is weilding a nasty and heavy billy club&#46;&quot;)\n      }\n      else if (GetBoolean(guard, &quot;room3&quot;)) {\n        msg (&quot;You look carefully into room 3 where you believe the guard to be&#46;&#46;&#46; He is large and angry&#46;  He is weilding a fearsome looking billy club&#46;&quot;)\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=&quot;guarding&quot;&gt;\n    SetTurnTimeout (1) {\n      MoveObject (guard, patrolling guard room 1)\n      SetObjectFlagOn (guard, &quot;room1&quot;)\n      SetObjectFlagOff (guard, &quot;room3&quot;)\n      SetTurnTimeout (2) {\n        MoveObject (guard, patrolling guard room 2)\n        SetObjectFlagOn (guard, &quot;room2&quot;)\n        SetObjectFlagOff (guard, &quot;room1&quot;)\n        SetTurnTimeout (2) {\n          MoveObject (guard, patrolling guard room 3)\n          SetObjectFlagOn (guard, &quot;room3&quot;)\n          SetObjectFlagOff (guard, &quot;room2&quot;)\n          SetTurnTimeout (2) {\n            MoveObject (guard, patrolling guard room 1)\n            guarding\n          }\n        }\n      }\n    }\n  &lt;/function&gt;[/code:1mgct3nj]\n\nI added a 2 time turn script because I figured you might want to give your player a chance to do something in each room.  One turn per room would give you just enough time to leave.  You can easily change it by switching my 2's to 1's.  Again, please let me know if this is helpful or needs amended.  It will  help me in my attempt at creating a good GUI tutorial for common problems asked on the forum.  THANKS!\n\nEDIT:  Well... Lol\n\nI just re-read your post... I see now that you wanted the rooms linear it appears.  Oops.  Hopefully you can tweak my code to make the rooms in a straight line!!  But... How could you ever get into room three?  I guess if you have a way to hide from the guard, you could do it.  <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->\n\nXanMag (who still has part II of Xanadu waiting to be finished... lol)",
      "EditableFormat": "bbcode",
      "HTML": "Here is the code for the three rooms.  I have connected the rooms in a simple triangle.  I did not add an exit from this triangle as I'm not sure exactly what you want to do with it.<br/><br/>It's late and I just started school, so please forgive me if this copy-paste of my code is incomplete or if you find an error!!  You should be able to copy-paste this code into a new game and see what I tried to do.  It should give you a template to use for your own game.  If it doesn't work, let me know and I'll try and give you a fix.<br/><br/><pre><code>  &lt;object name=&quot;patrolling guard room 1&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;enter type=&quot;script&quot;&gt;<br/>    &lt;/enter&gt;<br/>    &lt;firstenter type=&quot;script&quot;&gt;<br/>      msg (&quot;An alarm sounds when you enter the room&#46;  A guard will be here shortly&#46;  Better get a move on!&quot;)<br/>      SetObjectFlagOn (Magoo, &quot;patrolled&quot;)<br/>      guarding<br/>    &lt;/firstenter&gt;<br/>    &lt;object name=&quot;Magoo&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;inherit name=&quot;editor_player&quot; /&gt;<br/>      &lt;look&gt;You're Magoo&#46;  A simple being trapped in a test game&#46;&lt;/look&gt;<br/>      &lt;attr name=&quot;pov_look&quot;&gt;You're Magoo&#46;  A simple being trapped in a test game&#46;&lt;/attr&gt;<br/>    &lt;/object&gt;<br/>    &lt;exit alias=&quot;southeast&quot; to=&quot;patrolling guard room 2&quot;&gt;<br/>      &lt;inherit name=&quot;southeastdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;southwest&quot; to=&quot;patrolling guard room 3&quot;&gt;<br/>      &lt;inherit name=&quot;southwestdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;object name=&quot;patrolling guard room 2&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;exit alias=&quot;northwest&quot; to=&quot;patrolling guard room 1&quot;&gt;<br/>      &lt;inherit name=&quot;northwestdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;west&quot; to=&quot;patrolling guard room 3&quot;&gt;<br/>      &lt;inherit name=&quot;westdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;object name=&quot;patrolling guard room 3&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;exit alias=&quot;east&quot; to=&quot;patrolling guard room 2&quot;&gt;<br/>      &lt;inherit name=&quot;eastdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;northeast&quot; to=&quot;patrolling guard room 1&quot;&gt;<br/>      &lt;inherit name=&quot;northeastdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;turnscript name=&quot;guarding TS&quot;&gt;<br/>    &lt;enabled /&gt;<br/>    &lt;script&gt;<br/>      if (ListContains(ScopeVisible(), guard)) {<br/>        msg (&quot;You and the guard have happened to stumble into the same room&#46;  He looks incensed that he has been put to work&#46;  He takes his frustration out on you with his billy club&#46;  He pummels you to death&#46;  Sorry&#46;&quot;)<br/>        finish<br/>      }<br/>      if (GetBoolean(Magoo, &quot;patrolled&quot;)) {<br/>        if (GetBoolean(guard, &quot;room1&quot;)) {<br/>          if (game&#46;pov&#46;parent = patrolling guard room 2) {<br/>            msg (&quot;You look over your shoulder to the northwest and into patrol room 1 and you see the guard patrolling that room&#46;&quot;)<br/>          }<br/>          else if (game&#46;pov&#46;parent = patrolling guard room 3) {<br/>            msg (&quot;You look over your shoulder to the northeast and into patrol room 1 and you see the guard patrolling that room&#46;&quot;)<br/>          }<br/>        }<br/>        else if (GetBoolean(guard, &quot;room2&quot;)) {<br/>          if (game&#46;pov&#46;parent = patrolling guard room 1) {<br/>            msg (&quot;You look off to your southeast and see a nasty looking guard patrolling guard room 2&#46;&quot;)<br/>          }<br/>          else if (game&#46;pov&#46;parent = patrolling guard room 3) {<br/>            msg (&quot;You hear some noise to the east and you take a look that way&#46;  You see the guard loitering in room 2&#46;&quot;)<br/>          }<br/>        }<br/>        else if (GetBoolean(guard, &quot;room3&quot;)) {<br/>          if (game&#46;pov&#46;parent = patrolling guard room 2) {<br/>            msg (&quot;The guard is certainly making some noise off to the west as he searches patrol room 3 for you&#46;&quot;)<br/>          }<br/>          else if (game&#46;pov&#46;parent = patrolling guard room 1) {<br/>            msg (&quot;As you dawdle in room 1, the guard is frantically searching for you in patrol room 3 to your southwest&#46;&quot;)<br/>          }<br/>        }<br/>      }<br/>    &lt;/script&gt;<br/>  &lt;/turnscript&gt;<br/>  &lt;command name=&quot;look guard cmd&quot;&gt;<br/>    &lt;pattern&gt;look at guard; x guard&lt;/pattern&gt;<br/>    &lt;script&gt;<br/>      if (GetBoolean(guard, &quot;room1&quot;)) {<br/>        msg (&quot;You look carefully into room 1 where you believe the guard to be&#46;&#46;&#46; He is large and angry&#46;  He is weilding a fearsome looking billy club&#46;&quot;)<br/>      }<br/>      else if (GetBoolean(guard, &quot;room2&quot;)) {<br/>        msg (&quot;You look carefully into room 2 where you believe the guard to be&#46;&#46;&#46; He is large and angry&#46;  He is weilding a nasty and heavy billy club&#46;&quot;)<br/>      }<br/>      else if (GetBoolean(guard, &quot;room3&quot;)) {<br/>        msg (&quot;You look carefully into room 3 where you believe the guard to be&#46;&#46;&#46; He is large and angry&#46;  He is weilding a fearsome looking billy club&#46;&quot;)<br/>      }<br/>    &lt;/script&gt;<br/>  &lt;/command&gt;<br/>  &lt;function name=&quot;guarding&quot;&gt;<br/>    SetTurnTimeout (1) {<br/>      MoveObject (guard, patrolling guard room 1)<br/>      SetObjectFlagOn (guard, &quot;room1&quot;)<br/>      SetObjectFlagOff (guard, &quot;room3&quot;)<br/>      SetTurnTimeout (2) {<br/>        MoveObject (guard, patrolling guard room 2)<br/>        SetObjectFlagOn (guard, &quot;room2&quot;)<br/>        SetObjectFlagOff (guard, &quot;room1&quot;)<br/>        SetTurnTimeout (2) {<br/>          MoveObject (guard, patrolling guard room 3)<br/>          SetObjectFlagOn (guard, &quot;room3&quot;)<br/>          SetObjectFlagOff (guard, &quot;room2&quot;)<br/>          SetTurnTimeout (2) {<br/>            MoveObject (guard, patrolling guard room 1)<br/>            guarding<br/>          }<br/>        }<br/>      }<br/>    }<br/>  &lt;/function&gt;</code></pre><br/><br/>I added a 2 time turn script because I figured you might want to give your player a chance to do something in each room.  One turn per room would give you just enough time to leave.  You can easily change it by switching my 2's to 1's.  Again, please let me know if this is helpful or needs amended.  It will  help me in my attempt at creating a good GUI tutorial for common problems asked on the forum.  THANKS!<br/><br/>EDIT:  Well... Lol<br/><br/>I just re-read your post... I see now that you wanted the rooms linear it appears.  Oops.  Hopefully you can tweak my code to make the rooms in a straight line!!  But... How could you ever get into room three?  I guess if you have a way to hide from the guard, you could do it.  <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --><br/><br/>XanMag (who still has part II of Xanadu waiting to be finished... lol)",
      "PostDate": "2015-08-19T02:32:48+01:00",
      "LastEditDate": null
    }
  ]
}
