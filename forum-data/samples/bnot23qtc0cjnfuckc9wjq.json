{
  "Topic": {
    "TopicId": "bnot23qtc0cjnfuckc9wjq",
    "ForumId": "18",
    "Title": "In-game Google Map",
    "LastUpdated": "2018-02-09T02:12:33.0062012Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "e4ed903b-4d6a-4579-9c9e-56a98868df9c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You'll need to get a free Google API Key from here:\r\nhttps://developers.google.com/maps/documentation/javascript/get-api-key\r\n\r\nThat key must be entered as the value of the attribute: ```game.google_map_key``` for this script to work.\r\n\r\nYou can change the values of the ```lng``` and ```lat``` variables in the JS script ```myMap()``` to change the targeted location.\r\n\r\n<img width=\"100%\" src='https://user-images.githubusercontent.com/30656341/36008081-20201bc0-0d0b-11e8-82a0-4379e614aa79.png'/>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6613.24985-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Google Map\">\r\n    <gameid>40de2a9a-81c6-4229-a64a-17f1befed28c</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <attr name=\"google_map_key\">INSERT_YOUR_GOOGLE_API_KEY_HERE</attr>\r\n    <start type=\"script\">\r\n      JS.eval (\"function myMap() {var lat = 51.508742;var lng = -0.120850;var mapProp= {center:new google.maps.LatLng(lat,lng),zoom:5,};var map=new google.maps.Map(document.getElementById('googleMap'),mapProp);};\")\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <isroom />\r\n    <description type=\"script\"><![CDATA[\r\n      if(HasAttribute(game,\"google_map_key\")){\r\n        msg (\"<div id='g-map-container' <h3>Example Map</h3><div id='googleMap' style='width:100%;height:400px;'></div><script src='https://maps.googleapis.com/maps/api/js?key=\"+game.google_map_key+\"  &callback=myMap'></script>\")\r\n      }\r\n      else{\r\n        msg(\"The map failed to load!\")\r\n      }\r\n    ]]></description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n</asl>\r\n```\r\n\r\n---\r\nhttps://www.w3schools.com/graphics/google_maps_intro.asp\r\n\r\n---\r\nNOTE:\r\n\r\nI'm not sure if the key has an expiration date or not, but I did read that it can only be used so many times per day.  (I advise you to peruse the site where you get the key, just to be sure you are aware of all the details.)",
      "EditableFormat": "markdown",
      "HTML": "<p>You'll need to get a free Google API Key from here:<br>\nhttps://developers.google.com/maps/documentation/javascript/get-api-key</p>\n<p>That key must be entered as the value of the attribute: <code>game.google_map_key</code> for this script to work.</p>\n<p>You can change the values of the <code>lng</code> and <code>lat</code> variables in the JS script <code>myMap()</code> to change the targeted location.</p>\n<img width=\"100%\" src=\"https://user-images.githubusercontent.com/30656341/36008081-20201bc0-0d0b-11e8-82a0-4379e614aa79.png\">\n<pre><code>&lt;!--Saved by Quest 5.7.6613.24985--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Google Map\"&gt;\n    &lt;gameid&gt;40de2a9a-81c6-4229-a64a-17f1befed28c&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;attr name=\"google_map_key\"&gt;INSERT_YOUR_GOOGLE_API_KEY_HERE&lt;/attr&gt;\n    &lt;start type=\"script\"&gt;\n      JS.eval (\"function myMap() {var lat = 51.508742;var lng = -0.120850;var mapProp= {center:new google.maps.LatLng(lat,lng),zoom:5,};var map=new google.maps.Map(document.getElementById('googleMap'),mapProp);};\")\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;isroom /&gt;\n    &lt;description type=\"script\"&gt;&lt;![CDATA[\n      if(HasAttribute(game,\"google_map_key\")){\n        msg (\"&lt;div id='g-map-container' &lt;h3&gt;Example Map&lt;/h3&gt;&lt;div id='googleMap' style='width:100%;height:400px;'&gt;&lt;/div&gt;&lt;script src='https://maps.googleapis.com/maps/api/js?key=\"+game.google_map_key+\"  &amp;callback=myMap'&gt;&lt;/script&gt;\")\n      }\n      else{\n        msg(\"The map failed to load!\")\n      }\n    ]]&gt;&lt;/description&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>https://www.w3schools.com/graphics/google_maps_intro.asp</p>\n<hr>\n<p>NOTE:</p>\n<p>I'm not sure if the key has an expiration date or not, but I did read that it can only be used so many times per day.  (I advise you to peruse the site where you get the key, just to be sure you are aware of all the details.)</p>\n\n",
      "PostDate": "2018-02-09T02:12:33.0062012Z",
      "LastEditDate": "2018-02-09T03:55:38.2593192Z",
      "link": null
    },
    {
      "PostId": "6c8edbb6-0242-4523-9ddf-3c468a2c7845",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "UPDATE:\r\n\r\nNow you can enter the ```latitude``` and ```longitude``` attributes for each room (as strings), and the ```player.changedparent``` script will change your location on the map.\r\n\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Google Map\">\r\n    <gameid>40de2a9a-81c6-4229-a64a-17f1befed28c</gameid>\r\n    <version>0.2</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <attr name=\"js_script\"><![CDATA[<br/><br/><br/><br/><br/>]]></attr>\r\n    <attr name=\"google_map_key\">YOUR_GOOGLE_MAP_KEY_GOES_HERE!!!</attr>\r\n    <start type=\"script\"><![CDATA[\r\n      ClearScreen\r\n      if (HasAttribute(game,\"google_map_key\")) {\r\n        JS.eval (\"$('#googleMap').html();\")\r\n        msg (\"<div id='g-map-container'><div id='googleMap' style='width:100%;height:400px;'></div><script src='https://maps.googleapis.com/maps/api/js?key=\"+game.google_map_key+\"  &callback=myMap'></script>\")\r\n        JS.eval (\"function myMap() {var lat = \"+game.pov.parent.latitude+\";var lng = \"+game.pov.parent.longitude+\";var mapProp= {center:new google.maps.LatLng(lat,lng),zoom:20,};var map=new google.maps.Map(document.getElementById('googleMap'),mapProp);};\")\r\n      }\r\n      else {\r\n        msg (\"The map failed to load!\")\r\n      }\r\n    ]]></start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <latitude>51.508742</latitude>\r\n    <longitude>-0.120850</longitude>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <feature_startscript />\r\n      <attr name=\"_initialise_\" type=\"script\">\r\n        msg (\"\")\r\n      </attr>\r\n      <changedparent type=\"script\"><![CDATA[\r\n        if (game.pov = this) {\r\n          if (IsDefined(\"oldvalue\")) {\r\n            OnEnterRoom (oldvalue)\r\n          }\r\n          else {\r\n            OnEnterRoom (null)\r\n          }\r\n          if (game.gridmap) {\r\n            MergePOVCoordinates\r\n          }\r\n        }\r\n        this.hasbeenmoved = true\r\n        ClearScreen\r\n        if (HasAttribute(game,\"google_map_key\")) {\r\n          JS.eval (\"$('#googleMap').html();\")\r\n          msg (\"<div id='g-map-container'><div id='googleMap' style='width:100%;height:400px;'></div><script src='https://maps.googleapis.com/maps/api/js?key=\"+game.google_map_key+\"  &callback=myMap'></script>\")\r\n          JS.eval (\"function myMap() {var lat = \"+game.pov.parent.latitude+\";var lng = \"+game.pov.parent.longitude+\";var mapProp= {center:new google.maps.LatLng(lat,lng),zoom:20,};var map=new google.maps.Map(document.getElementById('googleMap'),mapProp);};\")\r\n        }\r\n        else {\r\n          msg (\"The map failed to load!\")\r\n        }\r\n        ShowRoomDescription\r\n      ]]></changedparent>\r\n    </object>\r\n    <exit alias=\"north\" to=\"another room\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"another room\">\r\n    <inherit name=\"editor_room\" />\r\n    <latitude>51.508782</latitude>\r\n    <longitude>-0.120850</longitude>\r\n    <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n    <exit alias=\"south\" to=\"room\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n</asl>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>UPDATE:</p>\n<p>Now you can enter the <code>latitude</code> and <code>longitude</code> attributes for each room (as strings), and the <code>player.changedparent</code> script will change your location on the map.</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Google Map\"&gt;\n    &lt;gameid&gt;40de2a9a-81c6-4229-a64a-17f1befed28c&lt;/gameid&gt;\n    &lt;version&gt;0.2&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;attr name=\"js_script\"&gt;&lt;![CDATA[&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;]]&gt;&lt;/attr&gt;\n    &lt;attr name=\"google_map_key\"&gt;YOUR_GOOGLE_MAP_KEY_GOES_HERE!!!&lt;/attr&gt;\n    &lt;start type=\"script\"&gt;&lt;![CDATA[\n      ClearScreen\n      if (HasAttribute(game,\"google_map_key\")) {\n        JS.eval (\"$('#googleMap').html();\")\n        msg (\"&lt;div id='g-map-container'&gt;&lt;div id='googleMap' style='width:100%;height:400px;'&gt;&lt;/div&gt;&lt;script src='https://maps.googleapis.com/maps/api/js?key=\"+game.google_map_key+\"  &amp;callback=myMap'&gt;&lt;/script&gt;\")\n        JS.eval (\"function myMap() {var lat = \"+game.pov.parent.latitude+\";var lng = \"+game.pov.parent.longitude+\";var mapProp= {center:new google.maps.LatLng(lat,lng),zoom:20,};var map=new google.maps.Map(document.getElementById('googleMap'),mapProp);};\")\n      }\n      else {\n        msg (\"The map failed to load!\")\n      }\n    ]]&gt;&lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;latitude&gt;51.508742&lt;/latitude&gt;\n    &lt;longitude&gt;-0.120850&lt;/longitude&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;feature_startscript /&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n        msg (\"\")\n      &lt;/attr&gt;\n      &lt;changedparent type=\"script\"&gt;&lt;![CDATA[\n        if (game.pov = this) {\n          if (IsDefined(\"oldvalue\")) {\n            OnEnterRoom (oldvalue)\n          }\n          else {\n            OnEnterRoom (null)\n          }\n          if (game.gridmap) {\n            MergePOVCoordinates\n          }\n        }\n        this.hasbeenmoved = true\n        ClearScreen\n        if (HasAttribute(game,\"google_map_key\")) {\n          JS.eval (\"$('#googleMap').html();\")\n          msg (\"&lt;div id='g-map-container'&gt;&lt;div id='googleMap' style='width:100%;height:400px;'&gt;&lt;/div&gt;&lt;script src='https://maps.googleapis.com/maps/api/js?key=\"+game.google_map_key+\"  &amp;callback=myMap'&gt;&lt;/script&gt;\")\n          JS.eval (\"function myMap() {var lat = \"+game.pov.parent.latitude+\";var lng = \"+game.pov.parent.longitude+\";var mapProp= {center:new google.maps.LatLng(lat,lng),zoom:20,};var map=new google.maps.Map(document.getElementById('googleMap'),mapProp);};\")\n        }\n        else {\n          msg (\"The map failed to load!\")\n        }\n        ShowRoomDescription\n      ]]&gt;&lt;/changedparent&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"north\" to=\"another room\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"another room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;latitude&gt;51.508782&lt;/latitude&gt;\n    &lt;longitude&gt;-0.120850&lt;/longitude&gt;\n    &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n    &lt;exit alias=\"south\" to=\"room\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2018-02-13T06:16:16.1816796Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
