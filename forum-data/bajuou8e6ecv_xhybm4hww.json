{
  "Topic": {
    "TopicId": "bajuou8e6ecv_xhybm4hww",
    "ForumId": "10",
    "Title": "Rookie bugs in game? (Use / Give)",
    "LastUpdated": "2019-11-09T12:00:38.4360136Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "196e449e-ed45-4ad4-a39b-c04062bb7653",
      "UserId": 443813,
      "Username": "Bram van Munster",
      "AvatarUrl": "https://secure.gravatar.com/avatar/9b6ae5e9f9b5af3f60b32f05dd164915?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hey all,\r\nAfter a good while of thinking up a story script, I finally am working on my very very very first game ever. Because of that I am using the GUI editor both offline and online - for learning purposes and testing - and not the code view just yet. (helps me to visualize how the Quest game \"thinks\"). \r\n\r\nI did run into a few thingies though, not sure if they're bugs or if I am just not seeing the answer. \r\n\r\nAfter I make the player collect a few items and solve the first few puzzles, they enter a secret area. They have to start a fire with collected items there. There is no (visible) exit to this area. What I've found is: the player can only type the command, as the button 'Use' only echos \"You can't use it this way\". By typing the command, it works flawless. In any other area, the Use button does what it is supposed to do.  Does anyone know why the game behaves like this?\r\n\r\nA bit further in the game, the player has to Give an item to another character. I can add a verb for sure, but it never shows up when I test play the game. The Use/Give tab on the character (use other item on this) didn't do it. The Use/Give tab of the item itself doesn't do much either.\r\n\r\nDid I run into some bugs here, or is the answer so simple I overlooked it?\r\n\r\nIf anyone would like to see what I mean instead of guessing rookie mistakes, please look at the \"learning game\": \r\nhttp://play2.textadventures.co.uk/Play.aspx?id=mfoni94gj0knzgkezg6h-a\r\n(I hope you like the direction I'm going in with this game idea!)\r\n\r\nThanks in advance to those that answer!",
      "EditableFormat": "markdown",
      "HTML": "<p>Hey all,<br>\nAfter a good while of thinking up a story script, I finally am working on my very very very first game ever. Because of that I am using the GUI editor both offline and online - for learning purposes and testing - and not the code view just yet. (helps me to visualize how the Quest game \"thinks\").</p>\n<p>I did run into a few thingies though, not sure if they're bugs or if I am just not seeing the answer.</p>\n<p>After I make the player collect a few items and solve the first few puzzles, they enter a secret area. They have to start a fire with collected items there. There is no (visible) exit to this area. What I've found is: the player can only type the command, as the button 'Use' only echos \"You can't use it this way\". By typing the command, it works flawless. In any other area, the Use button does what it is supposed to do.  Does anyone know why the game behaves like this?</p>\n<p>A bit further in the game, the player has to Give an item to another character. I can add a verb for sure, but it never shows up when I test play the game. The Use/Give tab on the character (use other item on this) didn't do it. The Use/Give tab of the item itself doesn't do much either.</p>\n<p>Did I run into some bugs here, or is the answer so simple I overlooked it?</p>\n<p>If anyone would like to see what I mean instead of guessing rookie mistakes, please look at the \"learning game\":<br>\nhttp://play2.textadventures.co.uk/Play.aspx?id=mfoni94gj0knzgkezg6h-a<br>\n(I hope you like the direction I'm going in with this game idea!)</p>\n<p>Thanks in advance to those that answer!</p>\n\n",
      "PostDate": "2019-11-09T12:00:38.4360136Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ba6796fa-a1c1-4e13-b8cd-f702b2c6cc7b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I don't have time to play through the game to test it, but I'm looking at the code now.\r\n\r\nIt looks to me like the command should be \"use ferro rod on (any object)\"? Is that the one that's failing when you use the links?\r\n\r\nAlso, you wrote:\r\n> only echos \"You can't use it this way\".\r\n\r\nDo you mean \"You can't use it that way.\"?\r\n\r\nI can't figure out why that should happen. That's a default message which is supposed to appear if you use it on an object that isn't in the dictionary; and shouldn't happen for the Ferro rod because it has a `selfuseanything` script.",
      "EditableFormat": "markdown",
      "HTML": "<p>I don't have time to play through the game to test it, but I'm looking at the code now.</p>\n<p>It looks to me like the command should be \"use ferro rod on (any object)\"? Is that the one that's failing when you use the links?</p>\n<p>Also, you wrote:</p>\n<blockquote>\n<p>only echos \"You can't use it this way\".</p>\n</blockquote>\n<p>Do you mean \"You can't use it that way.\"?</p>\n<p>I can't figure out why that should happen. That's a default message which is supposed to appear if you use it on an object that isn't in the dictionary; and shouldn't happen for the Ferro rod because it has a <code>selfuseanything</code> script.</p>\n\n",
      "PostDate": "2019-11-09T12:52:53.8429613Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2b7f753d-b4f0-40b7-9a72-afa03cdfe09a",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> A bit further in the game, the player has to Give an item to another character. I can add a verb for sure, but it never shows up when I test play the game.\r\n\r\nDo you mean you added it to the *inventoryverbs* list on the object tab?\r\n\r\nI notice that the object \"hand full of mushrooms\" has everything set up so it can be given to another character, but the *displayverbs* and *inventoryverbs* lists (which just control which buttons are displayed) are set to \"Look at;Take;Eat\" and \"Look at;Use;Drop;Eat\" respectively.\r\n\r\nThis means that the player can type the command \"give mushrooms\" or \"give mushrooms to soldier\" and it will work, but the \"Give\" button won't appear.\r\n\r\nIf you want the button or link to appear, you need to add it to the appropriate list at the bottom of the object's \"Object\" tab.\r\n\r\n(again, just by skim-reading your code, as I don't have time to look through it in any more detail. So I could be wrong here)",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>A bit further in the game, the player has to Give an item to another character. I can add a verb for sure, but it never shows up when I test play the game.</p>\n</blockquote>\n<p>Do you mean you added it to the <em>inventoryverbs</em> list on the object tab?</p>\n<p>I notice that the object \"hand full of mushrooms\" has everything set up so it can be given to another character, but the <em>displayverbs</em> and <em>inventoryverbs</em> lists (which just control which buttons are displayed) are set to \"Look at;Take;Eat\" and \"Look at;Use;Drop;Eat\" respectively.</p>\n<p>This means that the player can type the command \"give mushrooms\" or \"give mushrooms to soldier\" and it will work, but the \"Give\" button won't appear.</p>\n<p>If you want the button or link to appear, you need to add it to the appropriate list at the bottom of the object's \"Object\" tab.</p>\n<p>(again, just by skim-reading your code, as I don't have time to look through it in any more detail. So I could be wrong here)</p>\n\n",
      "PostDate": "2019-11-09T13:15:41.3715091Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f6d55a80-850d-4b26-95dc-7dd484605cfe",
      "UserId": 443813,
      "Username": "Bram van Munster",
      "AvatarUrl": "https://secure.gravatar.com/avatar/9b6ae5e9f9b5af3f60b32f05dd164915?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you for your reply, mrangel, This got me stuck and changing my original storyline for a few times now. \r\nAs \"selfuseanything\" is a term you can't see in the GUI Editor, I have no idea what you are on about, sorry for that... I've been playing with this for just a few days... \r\n\r\nI do recognize your name on this forum, so I sort of know you're a bad-ass coder... I hope you find the time to help me out here... Again, GUI only, not into the coding screen yet... (still learning how to do this...)",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you for your reply, mrangel, This got me stuck and changing my original storyline for a few times now.<br>\nAs \"selfuseanything\" is a term you can't see in the GUI Editor, I have no idea what you are on about, sorry for that... I've been playing with this for just a few days...</p>\n<p>I do recognize your name on this forum, so I sort of know you're a bad-ass coder... I hope you find the time to help me out here... Again, GUI only, not into the coding screen yet... (still learning how to do this...)</p>\n\n",
      "PostDate": "2019-11-09T14:30:56.3363568Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "838ac3a4-7a7f-4ddb-9f3e-fd7e420c65b2",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "`selfuseanything` is the attribute which is set by the script labelled \"Use on any other object\" in the Use/Give tab. An object with that script set should run it instead of displaying the \"You can't use it that way.\" message; so I can't see why you would still be seeing it.",
      "EditableFormat": "markdown",
      "HTML": "<p><code>selfuseanything</code> is the attribute which is set by the script labelled \"Use on any other object\" in the Use/Give tab. An object with that script set should run it instead of displaying the \"You can't use it that way.\" message; so I can't see why you would still be seeing it.</p>\n\n",
      "PostDate": "2019-11-09T17:15:55.2813225Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ca3709ed-7aa3-4b90-9f96-31c4e79ebd32",
      "UserId": 443813,
      "Username": "Bram van Munster",
      "AvatarUrl": "https://secure.gravatar.com/avatar/9b6ae5e9f9b5af3f60b32f05dd164915?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I \"solved it\" by making the player type the command, but still can't figure out how selfuseanything doesn't work properly... \r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I \"solved it\" by making the player type the command, but still can't figure out how selfuseanything doesn't work properly...</p>\n\n",
      "PostDate": "2019-11-10T17:13:59.4986947Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cff6bf33-4f2f-49d3-a09c-207db6ac4dc1",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK, I see your problem.\r\n\r\nThere's a reason I asked if \"use Ferro rod on sticks\" was the command that wasn't working. I tried it now, and that seems to work fine whether I type the command or use the GUI.\r\n\r\nOne that doesn't seem to work is \"use pot on fire\".\r\nThat's because the object's full name is \"pot with water\". When you click the \"Use\" button, Quest enters the command \"Use pot with water\".\r\n\r\nThis matches the pattern for the command \"useon\", whose pattern is `use #object1# with #object2#`.\r\nIt attempts to match the string \"pot\" to object1, and as you only have one object with \"pot\" in its name, it assumes you mean the object \"pot with water\".\r\nThen it attempts to match the string \"water\" to object2, and as you only have one object with \"water\" in its name, it assumes you mean the object \"pot with water\".\r\n\r\nSo clicking the \"use\" button is equivalent to the command: \"use pot with water on pot with water\".\r\n\r\nThe pot with water is set up in the \"Use / Give\" tab to do the same thing if you use it on its own (for example, \"use pot\"), or if you use it on the fire (eg \"use pot on fire\"). It will even work if the player types \"use pot with water on small fire\".\r\n\r\nIt's only a problem for the command \"use pot with water\" because of the object name.\r\nI'd recommend that you name the object \"pot of water\" or something similar. Objects whose alias includes the words \"on\", \"in\", \"with\", or \"to\" can sometimes cause problems because it thinks the player has specified 2 objects, and so doesn't ask for the second one.",
      "EditableFormat": "markdown",
      "HTML": "<p>OK, I see your problem.</p>\n<p>There's a reason I asked if \"use Ferro rod on sticks\" was the command that wasn't working. I tried it now, and that seems to work fine whether I type the command or use the GUI.</p>\n<p>One that doesn't seem to work is \"use pot on fire\".<br>\nThat's because the object's full name is \"pot with water\". When you click the \"Use\" button, Quest enters the command \"Use pot with water\".</p>\n<p>This matches the pattern for the command \"useon\", whose pattern is <code>use #object1# with #object2#</code>.<br>\nIt attempts to match the string \"pot\" to object1, and as you only have one object with \"pot\" in its name, it assumes you mean the object \"pot with water\".<br>\nThen it attempts to match the string \"water\" to object2, and as you only have one object with \"water\" in its name, it assumes you mean the object \"pot with water\".</p>\n<p>So clicking the \"use\" button is equivalent to the command: \"use pot with water on pot with water\".</p>\n<p>The pot with water is set up in the \"Use / Give\" tab to do the same thing if you use it on its own (for example, \"use pot\"), or if you use it on the fire (eg \"use pot on fire\"). It will even work if the player types \"use pot with water on small fire\".</p>\n<p>It's only a problem for the command \"use pot with water\" because of the object name.<br>\nI'd recommend that you name the object \"pot of water\" or something similar. Objects whose alias includes the words \"on\", \"in\", \"with\", or \"to\" can sometimes cause problems because it thinks the player has specified 2 objects, and so doesn't ask for the second one.</p>\n\n",
      "PostDate": "2019-11-10T17:44:07.3098995Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d2ab967a-0ca1-465d-9a5f-87d2c103e0e5",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "ah, another issue with the complexity of parsing and its coding, and of the naming (and/or alias) of Objects and the Command's pattern expression, and the user's input during game play...\r\n\r\ngood job, mrangel in finding/solving this issue as a parsing issue!",
      "EditableFormat": "markdown",
      "HTML": "<p>ah, another issue with the complexity of parsing and its coding, and of the naming (and/or alias) of Objects and the Command's pattern expression, and the user's input during game play...</p>\n<p>good job, mrangel in finding/solving this issue as a parsing issue!</p>\n\n",
      "PostDate": "2019-11-11T23:52:05.6607123Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "29567580-6d6b-4133-8147-059705ccd6e3",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you want it to work when an object has \"with\" or \"on\" in its name, here's a quick workaround. The parser thinks you've typed \"USE *pot with water* WITH *pot with water*\". So in the list of objects you can use this on, create an extra option for \"pot with water\"; and have that option go back to the single \"USE *object*\" command.\r\n\r\nIn code view, it would look like:\r\n```\r\n  do (use, \"script\", QuickParams (\"object\", this))\r\n```\r\n\r\nThat will make the button work as it would for any other object; whether that's a \"Use (on its own)\" script, or displaying a menu of objects to use it on.\r\n\r\n<hr />\r\n\r\nIt's worth noting that some of your scripts don't do sufficient checking. For example, entering the command \"use pot\" will give you boiled water even if you don't have the fire. And using the Ferro rod on anything will create a fire in the secret room as long as the player has the knife. If the player takes the Ferro rod, leaves the secret area, and then uses the Ferro rod on the paracord, the sticks will disappear (even if the player wasn't carrying them) and a fire will appear in the secret area (even if the player isn't there).\r\n\r\nI'd recommend getting into good habits with the structure of the command. I find that it often makes the code easier to follow if you put all the failure cases first, so that the message for each is right next to the corresponding 'if'. So for your 'use Ferro rod on sticks' command, the structure would look like (not actual code):\r\n* if (player isn't in the right room)\r\n    * Tell the player this isn't a good place to build a fire\r\n* else if (player doesn't have the knife)\r\n    * Tell the player it doesn't work\r\n* else\r\n    * We've got past all the 'if' conditions, so everything is fine\r\n    * Display a message that it worked and make the fire appear",
      "EditableFormat": "markdown",
      "HTML": "<p>If you want it to work when an object has \"with\" or \"on\" in its name, here's a quick workaround. The parser thinks you've typed \"USE <em>pot with water</em> WITH <em>pot with water</em>\". So in the list of objects you can use this on, create an extra option for \"pot with water\"; and have that option go back to the single \"USE <em>object</em>\" command.</p>\n<p>In code view, it would look like:</p>\n<pre><code>  do (use, \"script\", QuickParams (\"object\", this))\n</code></pre>\n<p>That will make the button work as it would for any other object; whether that's a \"Use (on its own)\" script, or displaying a menu of objects to use it on.</p>\n<hr>\n<p>It's worth noting that some of your scripts don't do sufficient checking. For example, entering the command \"use pot\" will give you boiled water even if you don't have the fire. And using the Ferro rod on anything will create a fire in the secret room as long as the player has the knife. If the player takes the Ferro rod, leaves the secret area, and then uses the Ferro rod on the paracord, the sticks will disappear (even if the player wasn't carrying them) and a fire will appear in the secret area (even if the player isn't there).</p>\n<p>I'd recommend getting into good habits with the structure of the command. I find that it often makes the code easier to follow if you put all the failure cases first, so that the message for each is right next to the corresponding 'if'. So for your 'use Ferro rod on sticks' command, the structure would look like (not actual code):</p>\n<ul>\n<li>if (player isn't in the right room)\n<ul>\n<li>Tell the player this isn't a good place to build a fire</li>\n</ul>\n</li>\n<li>else if (player doesn't have the knife)\n<ul>\n<li>Tell the player it doesn't work</li>\n</ul>\n</li>\n<li>else\n<ul>\n<li>We've got past all the 'if' conditions, so everything is fine</li>\n<li>Display a message that it worked and make the fire appear</li>\n</ul>\n</li>\n</ul>\n\n",
      "PostDate": "2019-11-12T09:49:59.3520779Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
