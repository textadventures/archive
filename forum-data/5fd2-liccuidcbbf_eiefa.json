{
  "Topic": {
    "TopicId": "5fd2-liccuidcbbf_eiefa",
    "ForumId": "10",
    "Title": "Log - I'm trying to figure out how to save the content to a file",
    "LastUpdated": "2017-10-17T06:55:04.0601154Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "e7e3b4c8-62ef-40a2-86f6-985a949f7940",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello,\r\n\r\nI have a **LOG #TEXT#** command in a game, and I just noticed:  there is no log file saved.\r\n\r\nI can view the log during play, of course, but, after that, it's all gone.\r\n\r\n---\r\nI have:\r\n- altered the ```Log``` function to add the text to ```game.logString``` each time it runs\r\n- created a \\<div> element with the id ```divLog```\r\n- created a JS function which appends text into my new element (this is called by my altered ```Log``` function)\r\n\r\n---\r\nThat's really all that I'm certain is working.\r\n\r\nI've  tried numerous JS scripts, but I can't get anything to create a text file.\r\n\r\nI've also altered the ```doSave``` JS function, and it will save just the newly created element (with or without ```divOutput```, if I change it around), but I only want that ```divLog``` element in a file, not the rest of the game...\r\n\r\n---\r\nPlaying with this also made me realize that we could save a game's transcript with the same method I'm trying to come up with here.\r\n\r\nIn fact, a simple JS function could probably (maybe?) do something slick, like create a separate HTML file when play begins, then append ```divOutput``` to it each time it does the same in the game.\r\n\r\n---\r\nI've got Quest open in VS, too.  I added SaveLog in, and it ALMOST worked, but...   I realized how little I knew about C# and decided the JS route *might* be possible.\r\n\r\n---\r\nAnyone have any suggestions?\r\n\r\n<span style=\"color:white\">invisible text to get edited post through</span>",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello,</p>\n<p>I have a <strong>LOG #TEXT#</strong> command in a game, and I just noticed:  there is no log file saved.</p>\n<p>I can view the log during play, of course, but, after that, it's all gone.</p>\n<hr>\n<p>I have:</p>\n<ul>\n<li>altered the <code>Log</code> function to add the text to <code>game.logString</code> each time it runs</li>\n<li>created a &lt;div&gt; element with the id <code>divLog</code></li>\n<li>created a JS function which appends text into my new element (this is called by my altered <code>Log</code> function)</li>\n</ul>\n<hr>\n<p>That's really all that I'm certain is working.</p>\n<p>I've  tried numerous JS scripts, but I can't get anything to create a text file.</p>\n<p>I've also altered the <code>doSave</code> JS function, and it will save just the newly created element (with or without <code>divOutput</code>, if I change it around), but I only want that <code>divLog</code> element in a file, not the rest of the game...</p>\n<hr>\n<p>Playing with this also made me realize that we could save a game's transcript with the same method I'm trying to come up with here.</p>\n<p>In fact, a simple JS function could probably (maybe?) do something slick, like create a separate HTML file when play begins, then append <code>divOutput</code> to it each time it does the same in the game.</p>\n<hr>\n<p>I've got Quest open in VS, too.  I added SaveLog in, and it ALMOST worked, but...   I realized how little I knew about C# and decided the JS route <em>might</em> be possible.</p>\n<hr>\n<p>Anyone have any suggestions?</p>\n<p><span style=\"color: white\">invisible text to get edited post through</span></p>\n\n",
      "PostDate": "2017-10-17T06:55:04.0601154Z",
      "LastEditDate": "2017-10-17T07:05:53.3489879Z",
      "link": null
    },
    {
      "PostId": "09386815-a464-48c3-98b7-2127d7a6f90f",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I have a LOG #TEXT# command in a game, and I just noticed: there is no log file saved.\r\n\r\nI noticed the Log command does not work myself just a few days ago.\r\n\r\n> Playing with this also made me realize that we could save a game's transcript with the same method I'm trying to come up with here.\r\n\r\nThis is what I was hoping to do.\r\n\r\nThere are security issues with saving a file locally, and JavaScript therefore does not implement it as such as far as I know. There are alternatives though. You could have a button that opens up a new window or dialogue box with the transcript in it, or dump it into a virtual file the player can download (http://html5-demos.appspot.com/static/a.download.html).\r\n\r\nThere is also WebStorage, and as I read about it, this may be a better way to save games online (something to consider for Quest 6).\r\nhttps://www.w3schools.com/HTML/html5_webstorage.asp",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I have a LOG #TEXT# command in a game, and I just noticed: there is no log file saved.</p>\n</blockquote>\n<p>I noticed the Log command does not work myself just a few days ago.</p>\n<blockquote>\n<p>Playing with this also made me realize that we could save a game's transcript with the same method I'm trying to come up with here.</p>\n</blockquote>\n<p>This is what I was hoping to do.</p>\n<p>There are security issues with saving a file locally, and JavaScript therefore does not implement it as such as far as I know. There are alternatives though. You could have a button that opens up a new window or dialogue box with the transcript in it, or dump it into a virtual file the player can download (http://html5-demos.appspot.com/static/a.download.html).</p>\n<p>There is also WebStorage, and as I read about it, this may be a better way to save games online (something to consider for Quest 6).<br>\nhttps://www.w3schools.com/HTML/html5_webstorage.asp</p>\n\n",
      "PostDate": "2017-10-17T07:11:28.8958821Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f4c60590-7187-4b0b-9a91-e8cebda01542",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks, Pix!\r\n\r\nI'll check that out.\r\n\r\n\r\n\r\n---\r\nIt doesn't look to me like it's set up to save any file (but I'm reading up on the language right now so I can attempt to alter that):\r\n\r\n```\r\n    Public Sub Log(text As String) Implements IPlayer.Log\r\n        BeginInvoke(Sub()\r\n                        If m_log Is Nothing Then\r\n                            m_log = New Log\r\n                        End If\r\n                        If m_log.txtLog.TextLength > 0 Then\r\n                            m_log.txtLog.AppendText(Environment.NewLine)\r\n                        End If\r\n                        m_log.txtLog.AppendText(DateTime.Now.ToString() + \" \" + text)\r\n                        m_log.txtLog.Select(m_log.txtLog.Text.Length, 0)\r\n                        m_log.txtLog.ScrollToCaret()\r\n                    End Sub)\r\n\r\n    End Sub\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks, Pix!</p>\n<p>I'll check that out.</p>\n<hr>\n<p>It doesn't look to me like it's set up to save any file (but I'm reading up on the language right now so I can attempt to alter that):</p>\n<pre><code>    Public Sub Log(text As String) Implements IPlayer.Log\n        BeginInvoke(Sub()\n                        If m_log Is Nothing Then\n                            m_log = New Log\n                        End If\n                        If m_log.txtLog.TextLength &gt; 0 Then\n                            m_log.txtLog.AppendText(Environment.NewLine)\n                        End If\n                        m_log.txtLog.AppendText(DateTime.Now.ToString() + \" \" + text)\n                        m_log.txtLog.Select(m_log.txtLog.Text.Length, 0)\n                        m_log.txtLog.ScrollToCaret()\n                    End Sub)\n\n    End Sub\n</code></pre>\n\n",
      "PostDate": "2017-10-17T08:18:49.4627181Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6adcee4e-7655-4315-a66b-cd5bfc58c413",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The log is just me playing around.\r\n\r\n---\r\n\r\n**1. The ability to save/print a transcript of the game:**\r\nThis is a common feature of the Z-machine and Glulx games.\r\n\r\n**2. The ability to enter RESTART:**\r\nThis is another common feature of Z-machine and Glulx games.  (It's especially nice when you die.)\r\n\r\n---\r\nIf we can get these two things going on, the INFOCOM / Inform crowd would only have to adapt to entering USE THE THING, which is not Quest's fault at all.  That's the author's prerogative.\r\n\r\nDigressions aside, I know we can restart the game, but not by the 'old-school' method: entering a command.  \r\n\r\nThis makes me sad when I get to the last bit of the game.  I can't do this:\r\n\r\n<center><h3><b>THE END</b></h3>\r\n\r\nWould you like to **RESTART**, **QUIT**, **UNDO**, or **VIEW BONUS CONTENT**?</center>\r\n\r\n---\r\nAgain, this is especially cool when you die (minus the bonus content).\r\n\r\nI'm pretty sure RESTART won't be difficult to pull off, but the log is kicking my butt!  That code *almost* resembles JS...\r\n\r\n---\r\n```\r\n    Private Sub RestartMenuClick()\r\n        Launch(m_currentFile, m_fromEditor, m_editorSimpleMode)\r\n    End Sub\r\n```\r\n\r\n---\r\nThis one may be woith a gander (KV wiggles his eyebrows up and down in a very Groucho-like manner):\r\n\r\n```\r\n$(\"#cmdRestart\").click(function () { window.location.reload(); });\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>The log is just me playing around.</p>\n<hr>\n<p><strong>1. The ability to save/print a transcript of the game:</strong><br>\nThis is a common feature of the Z-machine and Glulx games.</p>\n<p><strong>2. The ability to enter RESTART:</strong><br>\nThis is another common feature of Z-machine and Glulx games.  (It's especially nice when you die.)</p>\n<hr>\n<p>If we can get these two things going on, the INFOCOM / Inform crowd would only have to adapt to entering USE THE THING, which is not Quest's fault at all.  That's the author's prerogative.</p>\n<p>Digressions aside, I know we can restart the game, but not by the 'old-school' method: entering a command.</p>\n<p>This makes me sad when I get to the last bit of the game.  I can't do this:</p>\n<center><h3><b>THE END</b></h3>\n<p>Would you like to <strong>RESTART</strong>, <strong>QUIT</strong>, <strong>UNDO</strong>, or <strong>VIEW BONUS CONTENT</strong>?</p></center><p></p>\n<hr>\n<p>Again, this is especially cool when you die (minus the bonus content).</p>\n<p>I'm pretty sure RESTART won't be difficult to pull off, but the log is kicking my butt!  That code <em>almost</em> resembles JS...</p>\n<hr>\n<pre><code>    Private Sub RestartMenuClick()\n        Launch(m_currentFile, m_fromEditor, m_editorSimpleMode)\n    End Sub\n</code></pre>\n<hr>\n<p>This one may be woith a gander (KV wiggles his eyebrows up and down in a very Groucho-like manner):</p>\n<pre><code>$(\"#cmdRestart\").click(function () { window.location.reload(); });\n</code></pre>\n\n",
      "PostDate": "2017-10-17T08:32:13.0509504Z",
      "LastEditDate": "2017-10-17T08:40:28.0634837Z",
      "link": null
    },
    {
      "PostId": "8ede1a09-6e6e-4ebd-97dd-aae1c9b79171",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "\"Restart\" as an in-game function doesn't work well, as Quest doesn't keep any record of what the state of objects was to start with. You'd want to start over completely.\r\n\r\nOn the other hand,\r\n```\r\n<command name=\"restart\" pattern=\"restart\">\r\n  JS.eval(\"window.location.reload()\")\r\n</command>\r\n```\r\njust pushes the browser's \"refresh\" button using javascript, which will restart the game on the web version at least. (Not sure if that'll work in the offline player; it might)",
      "EditableFormat": "markdown",
      "HTML": "<p>\"Restart\" as an in-game function doesn't work well, as Quest doesn't keep any record of what the state of objects was to start with. You'd want to start over completely.</p>\n<p>On the other hand,</p>\n<pre><code>&lt;command name=\"restart\" pattern=\"restart\"&gt;\n  JS.eval(\"window.location.reload()\")\n&lt;/command&gt;\n</code></pre>\n<p>just pushes the browser's \"refresh\" button using javascript, which will restart the game on the web version at least. (Not sure if that'll work in the offline player; it might)</p>\n\n",
      "PostDate": "2017-10-17T08:51:45.5707974Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2dd04caf-8973-4414-a902-4493dc18a924",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@ThePix\r\n\r\nI bet Quest-JS uses WebStorage. \r\n...and Squiffy, too.\r\n\r\nThey both start where I left off after I've closed the browser.  Even when I open a revised game.  I have to restart to play the version I just re-compiled.  (Am I making sense?  I've been trying to understand VB.net for a few hours, and...  I may have gone more cuckoo than usual.)\r\n\r\n---\r\nI know how to open a URL without the player having to click anything...\r\n\r\nI wonder if JS can replace the text in that first link  (http://html5-demos.appspot.com/static/a.download.html) with the content of ```#divOutput```.  \r\n\r\nI guess piping is what I'm talking about.  That's probably not possible between pages...",
      "EditableFormat": "markdown",
      "HTML": "<p>@ThePix</p>\n<p>I bet Quest-JS uses WebStorage.<br>\n...and Squiffy, too.</p>\n<p>They both start where I left off after I've closed the browser.  Even when I open a revised game.  I have to restart to play the version I just re-compiled.  (Am I making sense?  I've been trying to understand VB.net for a few hours, and...  I may have gone more cuckoo than usual.)</p>\n<hr>\n<p>I know how to open a URL without the player having to click anything...</p>\n<p>I wonder if JS can replace the text in that first link  (http://html5-demos.appspot.com/static/a.download.html) with the content of <code>#divOutput</code>.</p>\n<p>I guess piping is what I'm talking about.  That's probably not possible between pages...</p>\n\n",
      "PostDate": "2017-10-17T09:02:21.3824365Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f421bc98-b17f-4218-a017-5df3b5debedc",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'll test that out real quick, mrangel.  \r\n\r\nThanks much.\r\n\r\n---\r\nIt refreshes the screen, which is pretty cool to know how to do, but it doesn't reset the attributes.\r\n\r\nAs you pointed out:\r\n\r\n>Quest doesn't keep any record of what the state of objects was to start with. \r\n\r\nSo, this doesn't work.\r\n\r\nI *think* I just saw how to do that while perusing an older post, though...\r\n\r\n...or was that Pixie's Save/Load setup?\r\n\r\n---\r\nI ***also***  didn't know I could assign the command's pattern like that.  That is VERY nice to know!",
      "EditableFormat": "markdown",
      "HTML": "<p>I'll test that out real quick, mrangel.</p>\n<p>Thanks much.</p>\n<hr>\n<p>It refreshes the screen, which is pretty cool to know how to do, but it doesn't reset the attributes.</p>\n<p>As you pointed out:</p>\n<blockquote>\n<p>Quest doesn't keep any record of what the state of objects was to start with.</p>\n</blockquote>\n<p>So, this doesn't work.</p>\n<p>I <em>think</em> I just saw how to do that while perusing an older post, though...</p>\n<p>...or was that Pixie's Save/Load setup?</p>\n<hr>\n<p>I <strong><em>also</em></strong>  didn't know I could assign the command's pattern like that.  That is VERY nice to know!</p>\n\n",
      "PostDate": "2017-10-17T09:07:00.1877669Z",
      "LastEditDate": "2017-10-17T09:10:25.5091499Z",
      "link": null
    },
    {
      "PostId": "82fee560-b1bb-49ae-be7b-b66c244691ff",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@ThePix\r\n\r\nSo, could I probably put this (and the rest of the code from that page) in an attribute, then ```msg (game.scriptText)``` when issuing the SCRIPT command?\r\n\r\n```\r\n<section>\r\n  <div id=\"container\">\r\n    <div id=\"saveOutput\"></div>\r\n    <input type=\"text\" value=\"MyFile.txt\" placeholder=\"filename.txt\">\r\n    <button onclick=\"downloadFile()\">Create file</button> <output></output>\r\n    <aside id=\"download-help\">\r\n      <ul>\r\n        <li>This link was created using a <code>blob:</code> URL\r\n        ( <a href=\"http://www.html5rocks.com/en/tutorials/workers/basics/#toc-inlineworkers-bloburis\" target=\"_blank\">huh?</a> ).\r\n        It contains the <code>download</code> attribute, which means clicking it will\r\n        force the browser to download the resource rather than navigating to it.</li>\r\n        <li>In Chrome, you can also drag this link out of the browser tab and the file\r\n        will be saved. ( <a href=\"http://www.thecssninja.com/javascript/gmail-dragout\" target=\"_blank\">huh?</a> )</li>\r\n      </ul>\r\n    </aside>\r\n  </div>\r\n</section>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>@ThePix</p>\n<p>So, could I probably put this (and the rest of the code from that page) in an attribute, then <code>msg (game.scriptText)</code> when issuing the SCRIPT command?</p>\n<pre><code>&lt;section&gt;\n  &lt;div id=\"container\"&gt;\n    &lt;div id=\"saveOutput\"&gt;&lt;/div&gt;\n    &lt;input type=\"text\" value=\"MyFile.txt\" placeholder=\"filename.txt\"&gt;\n    &lt;button onclick=\"downloadFile()\"&gt;Create file&lt;/button&gt; &lt;output&gt;&lt;/output&gt;\n    &lt;aside id=\"download-help\"&gt;\n      &lt;ul&gt;\n        &lt;li&gt;This link was created using a &lt;code&gt;blob:&lt;/code&gt; URL\n        ( &lt;a href=\"http://www.html5rocks.com/en/tutorials/workers/basics/#toc-inlineworkers-bloburis\" target=\"_blank\"&gt;huh?&lt;/a&gt; ).\n        It contains the &lt;code&gt;download&lt;/code&gt; attribute, which means clicking it will\n        force the browser to download the resource rather than navigating to it.&lt;/li&gt;\n        &lt;li&gt;In Chrome, you can also drag this link out of the browser tab and the file\n        will be saved. ( &lt;a href=\"http://www.thecssninja.com/javascript/gmail-dragout\" target=\"_blank\"&gt;huh?&lt;/a&gt; )&lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/aside&gt;\n  &lt;/div&gt;\n&lt;/section&gt;\n</code></pre>\n\n",
      "PostDate": "2017-10-17T09:17:17.3648087Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e0c22293-4ae9-4e29-a140-ed0059931ccf",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You might have to change the name \"log\" to something else, IDK.\r\n\r\n@The Pixie Would storing that save files on an alternate site just make everything weaker:\r\n1. You still have JavaScript problems.\r\n2. The main site will fail. The second site will fail. There will be twice the glitches.\r\n3. Saving with a third party website relies heavily on the belief that that website can be trusted, which is often false/not the case.\r\n\r\nI don't know what web storage is, but I've seen thing or two with web hosting/relying on other websites.",
      "EditableFormat": "markdown",
      "HTML": "<p>You might have to change the name \"log\" to something else, IDK.</p>\n<p>@The Pixie Would storing that save files on an alternate site just make everything weaker:</p>\n<ol>\n<li>You still have JavaScript problems.</li>\n<li>The main site will fail. The second site will fail. There will be twice the glitches.</li>\n<li>Saving with a third party website relies heavily on the belief that that website can be trusted, which is often false/not the case.</li>\n</ol>\n<p>I don't know what web storage is, but I've seen thing or two with web hosting/relying on other websites.</p>\n\n",
      "PostDate": "2017-10-17T13:43:34.6027668Z",
      "LastEditDate": "2017-10-17T13:44:04.8357848Z",
      "link": null
    },
    {
      "PostId": "7fc7d9af-4429-4c65-a627-e386483d9d48",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@jmnevil54\r\n\r\nI didn't see anyone mention storing stuff on a second site.",
      "EditableFormat": "markdown",
      "HTML": "<p>@jmnevil54</p>\n<p>I didn't see anyone mention storing stuff on a second site.</p>\n\n",
      "PostDate": "2017-10-17T14:25:32.7425917Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4f12c7a5-86b0-4d01-b556-be6820fd89b2",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "With WebStorage, Quest would actually be storing it on your PC. Thinking about it, it does sound like the exact opposite of what it is!",
      "EditableFormat": "markdown",
      "HTML": "<p>With WebStorage, Quest would actually be storing it on your PC. Thinking about it, it does sound like the exact opposite of what it is!</p>\n\n",
      "PostDate": "2017-10-17T15:01:43.151715Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "92df3fbd-558d-4780-aa27-da67f2f60bb8",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How does it save **debug.log**?\r\n\r\nI've been looking for that in the source code for quite a while now.",
      "EditableFormat": "markdown",
      "HTML": "<p>How does it save <strong>debug.log</strong>?</p>\n<p>I've been looking for that in the source code for quite a while now.</p>\n\n",
      "PostDate": "2017-10-17T19:08:16.6079342Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "508a9c9c-4444-4836-8fe6-1981dc52d0ba",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay...\r\n\r\nI've almost got the transcript thing working.  In fact, I do have sort of have it working, but I want the stuff that gets erased before the screen is cleared, too.\r\n\r\n---\r\nI've created a div called ```divCleared``` and inserted it before ```divOutput```, so it doesn't show up.\r\n\r\nI can get it to create ```clearedOutput1```, but I can't get the text from ```divOutput``` into that element before emptying ```divOutput```.\r\n\r\n\r\nAnyone have this easy answer, which is currently eluding me?\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay...</p>\n<p>I've almost got the transcript thing working.  In fact, I do have sort of have it working, but I want the stuff that gets erased before the screen is cleared, too.</p>\n<hr>\n<p>I've created a div called <code>divCleared</code> and inserted it before <code>divOutput</code>, so it doesn't show up.</p>\n<p>I can get it to create <code>clearedOutput1</code>, but I can't get the text from <code>divOutput</code> into that element before emptying <code>divOutput</code>.</p>\n<p>Anyone have this easy answer, which is currently eluding me?</p>\n\n",
      "PostDate": "2017-10-18T05:30:27.388861Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "918d94ad-b8e0-4912-8d55-c91b1ed6681d",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I can't get the text from divOutput into that element before emptying divOutput.\r\n\r\nYou mean something like this?\r\n```\r\nclearScreen = function() {\r\n    $(\"#divOutput\").css(\"min-height\", 0);\r\n    $(\"#divOutput\").children().appendTo(\"#divCleared\");\r\n    $(\"#outputData\").appendTo($(\"#divOutput\"));\r\n    createNewDiv(\"left\");\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $(\"html,body\").scrollTop(0);\r\n    }, 100);\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I can't get the text from divOutput into that element before emptying divOutput.</p>\n</blockquote>\n<p>You mean something like this?</p>\n<pre><code>clearScreen = function() {\n    $(\"#divOutput\").css(\"min-height\", 0);\n    $(\"#divOutput\").children().appendTo(\"#divCleared\");\n    $(\"#outputData\").appendTo($(\"#divOutput\"));\n    createNewDiv(\"left\");\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $(\"html,body\").scrollTop(0);\n    }, 100);\n}\n</code></pre>\n\n",
      "PostDate": "2017-10-18T08:25:48.3068492Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0d3102fb-b1ef-4ac8-9116-d8b10301992d",
      "UserId": 924,
      "Username": "Pertex",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4cc1e52f99452e841ecf4cbee9eadde9?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Do you want to save files on a remote server or on the computer/mobile device of the player?",
      "EditableFormat": "markdown",
      "HTML": "<p>Do you want to save files on a remote server or on the computer/mobile device of the player?</p>\n\n",
      "PostDate": "2017-10-18T20:25:20.1950832Z",
      "LastEditDate": "2017-10-18T20:26:12.8484703Z",
      "link": null
    },
    {
      "PostId": "3ff848bf-cf7d-48bb-8069-fcdb81ad9b26",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel,\r\n\r\nI tried ```$(\"#divOutput\").children().appendTo(\"#divCleared\");```, but there's nothing in the div.\r\n\r\nI tried a couple of similar things, like ```childNodes```, too.  They work in an HTML file, but not Quest.  I must be messing up on the syntax or something.\r\n\r\n---\r\nPertex,\r\n\r\nI want to save the contents of the log to a text file on the hard drive.\r\n\r\nAnd I want to put the content of the ```divOutputAlign1``` - ```divOutputAlign?``` elements in the ```#clearedData``` element I created before emptying the contents during ```clearScreen```, so I can print/save transcripts of the game.\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel,</p>\n<p>I tried <code>$(\"#divOutput\").children().appendTo(\"#divCleared\");</code>, but there's nothing in the div.</p>\n<p>I tried a couple of similar things, like <code>childNodes</code>, too.  They work in an HTML file, but not Quest.  I must be messing up on the syntax or something.</p>\n<hr>\n<p>Pertex,</p>\n<p>I want to save the contents of the log to a text file on the hard drive.</p>\n<p>And I want to put the content of the <code>divOutputAlign1</code> - <code>divOutputAlign?</code> elements in the <code>#clearedData</code> element I created before emptying the contents during <code>clearScreen</code>, so I can print/save transcripts of the game.</p>\n\n",
      "PostDate": "2017-10-19T00:00:08.1988653Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "420fda14-9bc5-4ca3-8bb3-faaf8cf6ebc7",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Quest has its own JQuery...\r\n\r\nI saw the words 'heavily modified' in the notes in there somewhere, too.\r\n\r\nI'm thinking it lacks the functions.  I can't get ```+=``` to replace any text with ```.innerHTML``` or anything.",
      "EditableFormat": "markdown",
      "HTML": "<p>Quest has its own JQuery...</p>\n<p>I saw the words 'heavily modified' in the notes in there somewhere, too.</p>\n<p>I'm thinking it lacks the functions.  I can't get <code>+=</code> to replace any text with <code>.innerHTML</code> or anything.</p>\n\n",
      "PostDate": "2017-10-19T09:55:01.9243637Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bbc42338-23ed-48b6-b125-71d4ec7ce55f",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Does the modified clearScreen I just posted still remove the elements from `divOutput`?\r\nIt seems very strange if it removes them from `divOutput` and doesn't add them anywhere else. Are you sure the clearedData div exists at this point?",
      "EditableFormat": "markdown",
      "HTML": "<p>Does the modified clearScreen I just posted still remove the elements from <code>divOutput</code>?<br>\nIt seems very strange if it removes them from <code>divOutput</code> and doesn't add them anywhere else. Are you sure the clearedData div exists at this point?</p>\n\n",
      "PostDate": "2017-10-19T10:16:47.4280088Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f1c4e91b-9728-4f17-920c-f7d053eca7d6",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Not really sure what the purpose of `divCleared` is.\r\n\r\nAs I understand it, you want to create a log of all the game activity, including bits before a 'clearScreen'. To me, rather than moving data into a new div, it would make more sense to modify clearScreen so that it hides the elements rather than removing them; and then when you want to save the log, you just use the contents of divOutput. That way, you don't need to worry about what happens with a save/load either.\r\n```\r\nclearScreen = function() {\r\n    $(\"#divOutput\").append(\"<hr />\");\r\n    $(\"#divOutput\").children().css(\"display\", \"none\");\r\n    $(\"#divOutput\").css(\"min-height\", 0);\r\n    createNewDiv(\"left\");\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $(\"html,body\").scrollTop(0);\r\n    }, 100);\r\n}\r\n```\r\nProbably I'm misunderstanding your purpose here.",
      "EditableFormat": "markdown",
      "HTML": "<p>Not really sure what the purpose of <code>divCleared</code> is.</p>\n<p>As I understand it, you want to create a log of all the game activity, including bits before a 'clearScreen'. To me, rather than moving data into a new div, it would make more sense to modify clearScreen so that it hides the elements rather than removing them; and then when you want to save the log, you just use the contents of divOutput. That way, you don't need to worry about what happens with a save/load either.</p>\n<pre><code>clearScreen = function() {\n    $(\"#divOutput\").append(\"&lt;hr /&gt;\");\n    $(\"#divOutput\").children().css(\"display\", \"none\");\n    $(\"#divOutput\").css(\"min-height\", 0);\n    createNewDiv(\"left\");\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $(\"html,body\").scrollTop(0);\n    }, 100);\n}\n</code></pre>\n<p>Probably I'm misunderstanding your purpose here.</p>\n\n",
      "PostDate": "2017-10-19T10:52:10.617156Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3d34bf75-58a7-4393-8160-4fdcf1aa822a",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Aha!\r\n\r\nThat's what I was looking for!\r\n\r\nSorry!  I wasn't clear on my purpose.\r\n\r\nThank you, though!",
      "EditableFormat": "markdown",
      "HTML": "<p>Aha!</p>\n<p>That's what I was looking for!</p>\n<p>Sorry!  I wasn't clear on my purpose.</p>\n<p>Thank you, though!</p>\n\n",
      "PostDate": "2017-10-19T11:45:04.2184661Z",
      "LastEditDate": "2017-10-19T11:47:49.8100287Z",
      "link": null
    },
    {
      "PostId": "a4eb9700-f560-4deb-8d99-c0bafa50b5ab",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel,\r\n\r\nNow I can easily create an HTML transcript (pulled directly from the save file ):\r\n\r\n---\r\n\r\n<details><summary>Code</summary>\r\n\r\n```\r\n<html><![CDATA[\r\n<div id=\"outputData\" style=\"display: none;\" data-divcount=\"19\" data-currentdiv=\"#divOutputAlign19\"></div>\r\n            \r\n        <div id=\"divOutputAlign1\" style=\"text-align: left; \" class=\"section1\"></div><div id=\"divOutputAlign2\" style=\"text-align: left; \" class=\"section1 title\"></div><div id=\"divOutputAlign3\" style=\"text-align: center; \" class=\"section1 title\"><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"><span style=\"font-size:260%\">ClearScreen</span></span><br></div><div id=\"divOutputAlign4\" style=\"text-align: left; \" class=\"section1 title\"><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"><div style=\"margin-top:20px\"></div></span><br></div><div id=\"divOutputAlign5\" style=\"text-align: left; \" class=\"section1\"><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\">You are in a room.</span><br></div><div id=\"divOutputAlign6\" style=\"text-align: left; \" class=\"\"></div><div id=\"divOutputAlign7\" style=\"text-align: left; \" class=\"section2\"><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"></span><br><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\">&gt; jump</span><br><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\">You jump, but nothing happens.</span><br></div><div id=\"divOutputAlign8\" style=\"text-align: left; \" class=\"\"></div><div id=\"divOutputAlign9\" style=\"text-align: left; \" class=\"section3\"><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"></span><br><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\">&gt; c</span><br></div><hr style=\"\"><div id=\"divOutputAlign10\" style=\"text-align: left; \" class=\"section3\"></div><div id=\"divOutputAlign11\" style=\"text-align: left; \" class=\"\"></div><div id=\"divOutputAlign12\" style=\"text-align: left; \" class=\"section4\"><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"></span><br><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\">&gt; l</span><br><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\">You are in a room.</span><br></div><div id=\"divOutputAlign13\" style=\"text-align: left; \" class=\"\"></div><div id=\"divOutputAlign14\" style=\"text-align: left; \" class=\"section5\"><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"></span><br><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\">&gt; c</span><br></div><hr style=\"\"><div id=\"divOutputAlign15\" style=\"text-align: left\" class=\"section5\"></div><div id=\"divOutputAlign16\" style=\"text-align: left\" class=\"\"></div><div id=\"divOutputAlign17\" style=\"text-align: left\" class=\"section6\"><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"></span><br><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\">&gt; l</span><br><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\">You are in a room.</span><br></div><div id=\"divOutputAlign18\" style=\"text-align: left\" class=\"\"></div><div id=\"divOutputAlign19\" style=\"text-align: left\" class=\"section7\"><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"></span><br><span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\">&gt; save</span><br></div>]]></html>\r\n```\r\n\r\n</details>\r\n\r\n---\r\nIt shows the ```]]>``` at the end of it, but that's easy to fix.\r\n\r\n---\r\n![image](https://user-images.githubusercontent.com/30656341/31769748-82edafd4-b49a-11e7-92c5-941ffed22932.png)\r\n\r\n---\r\n\r\nThanks so much!",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel,</p>\n<p>Now I can easily create an HTML transcript (pulled directly from the save file ):</p>\n<hr>\n<details><summary>Code</summary>\n<pre><code>&lt;html&gt;&lt;![CDATA[\n&lt;div id=\"outputData\" style=\"display: none;\" data-divcount=\"19\" data-currentdiv=\"#divOutputAlign19\"&gt;&lt;/div&gt;\n            \n        &lt;div id=\"divOutputAlign1\" style=\"text-align: left; \" class=\"section1\"&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign2\" style=\"text-align: left; \" class=\"section1 title\"&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign3\" style=\"text-align: center; \" class=\"section1 title\"&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&lt;span style=\"font-size:260%\"&gt;ClearScreen&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign4\" style=\"text-align: left; \" class=\"section1 title\"&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&lt;div style=\"margin-top:20px\"&gt;&lt;/div&gt;&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign5\" style=\"text-align: left; \" class=\"section1\"&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;You are in a room.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign6\" style=\"text-align: left; \" class=\"\"&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign7\" style=\"text-align: left; \" class=\"section2\"&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&lt;/span&gt;&lt;br&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&amp;gt; jump&lt;/span&gt;&lt;br&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;You jump, but nothing happens.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign8\" style=\"text-align: left; \" class=\"\"&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign9\" style=\"text-align: left; \" class=\"section3\"&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&lt;/span&gt;&lt;br&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&amp;gt; c&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;hr style=\"\"&gt;&lt;div id=\"divOutputAlign10\" style=\"text-align: left; \" class=\"section3\"&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign11\" style=\"text-align: left; \" class=\"\"&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign12\" style=\"text-align: left; \" class=\"section4\"&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&lt;/span&gt;&lt;br&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&amp;gt; l&lt;/span&gt;&lt;br&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;You are in a room.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign13\" style=\"text-align: left; \" class=\"\"&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign14\" style=\"text-align: left; \" class=\"section5\"&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&lt;/span&gt;&lt;br&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&amp;gt; c&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;hr style=\"\"&gt;&lt;div id=\"divOutputAlign15\" style=\"text-align: left\" class=\"section5\"&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign16\" style=\"text-align: left\" class=\"\"&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign17\" style=\"text-align: left\" class=\"section6\"&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&lt;/span&gt;&lt;br&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&amp;gt; l&lt;/span&gt;&lt;br&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;You are in a room.&lt;/span&gt;&lt;br&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign18\" style=\"text-align: left\" class=\"\"&gt;&lt;/div&gt;&lt;div id=\"divOutputAlign19\" style=\"text-align: left\" class=\"section7\"&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&lt;/span&gt;&lt;br&gt;&lt;span style=\"font-family:Georgia, serif;color:Black;font-size:12pt;\"&gt;&amp;gt; save&lt;/span&gt;&lt;br&gt;&lt;/div&gt;]]&gt;&lt;/html&gt;\n</code></pre>\n</details>\n<hr>\n<p>It shows the <code>]]&gt;</code> at the end of it, but that's easy to fix.</p>\n<hr>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/31769748-82edafd4-b49a-11e7-92c5-941ffed22932.png\" alt=\"image\"></p>\n<hr>\n<p>Thanks so much!</p>\n\n",
      "PostDate": "2017-10-19T11:57:35.4702167Z",
      "LastEditDate": "2017-10-19T12:14:24.126592Z",
      "link": null
    },
    {
      "PostId": "1ebe734b-aef6-48ec-b7c8-2d60ada7ede8",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Getting warmer...\r\n\r\n```\r\nfunction doTranscript() {\r\n    var element = document.getElementById('divOutput');\r\n    var text = element.innerHTML;\r\n}\r\n```\r\n\r\n---\r\nNow I've got the outputted text as a string.\r\n\r\nNext:  I need to learn how to save it to a file.\r\n\r\nI couldn't get anything from Pixie's post [*](http://textadventures.co.uk/forum/quest/topic/5fd2-liccuidcbbf_eiefa/log-im-trying-to-figure-out-how-to-save-the-content-to-a-file#09386815-a464-48c3-98b7-2127d7a6f90f) to work.",
      "EditableFormat": "markdown",
      "HTML": "<p>Getting warmer...</p>\n<pre><code>function doTranscript() {\n    var element = document.getElementById('divOutput');\n    var text = element.innerHTML;\n}\n</code></pre>\n<hr>\n<p>Now I've got the outputted text as a string.</p>\n<p>Next:  I need to learn how to save it to a file.</p>\n<p>I couldn't get anything from Pixie's post <a href=\"http://textadventures.co.uk/forum/quest/topic/5fd2-liccuidcbbf_eiefa/log-im-trying-to-figure-out-how-to-save-the-content-to-a-file#09386815-a464-48c3-98b7-2127d7a6f90f\">*</a> to work.</p>\n\n",
      "PostDate": "2017-10-19T12:59:51.6929691Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ce197608-a64e-4415-9bc0-125c7049a5f5",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\nfunction doTranscript() {\r\n  $('<a />', {\r\n    href: \"data:text/html,\"+encodeURIComponent($(\"#divOutput\").html()),\r\n    download: \"logfile.html\",\r\n    id: \"log_download\"\r\n  }).appendTo(\"#divOutput\");\r\n  document.getElementById(\"log_download\").click();\r\n  $(\"#log_download\").remove();\r\n}\r\n```\r\n?\r\n\r\nCreates a link pointing to a data: URI, uses javascript to click the link (you can't use jQuery's 'click' method here), then deletes the link again.\r\n\r\nI think I'd prefer a text version myself…\r\n```\r\nfunction doTranscript() {\r\n  log = \"\";\r\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\r\n  $('<a />', {\r\n    href: \"data:text/plain,\"+encodeURIComponent(log),\r\n    download: \"logfile.txt\",\r\n    id: \"log_download\"\r\n  }).appendTo(\"#divOutput\");\r\n  document.getElementById(\"log_download\").click();\r\n  $(\"#log_download\").remove();\r\n}\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>function doTranscript() {\n  $('&lt;a /&gt;', {\n    href: \"data:text/html,\"+encodeURIComponent($(\"#divOutput\").html()),\n    download: \"logfile.html\",\n    id: \"log_download\"\n  }).appendTo(\"#divOutput\");\n  document.getElementById(\"log_download\").click();\n  $(\"#log_download\").remove();\n}\n</code></pre>\n<p>?</p>\n<p>Creates a link pointing to a data: URI, uses javascript to click the link (you can't use jQuery's 'click' method here), then deletes the link again.</p>\n<p>I think I'd prefer a text version myself…</p>\n<pre><code>function doTranscript() {\n  log = \"\";\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\n  $('&lt;a /&gt;', {\n    href: \"data:text/plain,\"+encodeURIComponent(log),\n    download: \"logfile.txt\",\n    id: \"log_download\"\n  }).appendTo(\"#divOutput\");\n  document.getElementById(\"log_download\").click();\n  $(\"#log_download\").remove();\n}\n</code></pre>\n\n",
      "PostDate": "2017-10-19T14:36:25.6253823Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2bb8fdb4-a5bf-40f8-8659-34609763fb29",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(Noting that the first one of those may end up with hidden elements still hidden in your transcript, but the text version doesn't because it looks at the contents of elements without checking if they're hidden)\r\n\r\nAlso noting (having removed all the line breaks from the javascript so I can force it to run in the web editor) that the download gets stopped by my popup blocker.",
      "EditableFormat": "markdown",
      "HTML": "<p>(Noting that the first one of those may end up with hidden elements still hidden in your transcript, but the text version doesn't because it looks at the contents of elements without checking if they're hidden)</p>\n<p>Also noting (having removed all the line breaks from the javascript so I can force it to run in the web editor) that the download gets stopped by my popup blocker.</p>\n\n",
      "PostDate": "2017-10-19T14:42:53.7284811Z",
      "LastEditDate": "2017-10-19T15:08:34.4812273Z",
      "link": null
    },
    {
      "PostId": "01cb1dae-b4d0-4cf6-af1a-6a3d327282d6",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK ... to get around the popup blocker I now have:\r\n```\r\ndoTranscript = function() {\r\n  log = \"\";\r\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\r\n  $('<a />', {\r\n    href: \"data:text/plain,\"+encodeURIComponent(log),\r\n    download: \"logfile.txt\",\r\n    id: \"log_download\"\r\n  }).text(\"Click here to save log file\").appendTo(\"#divOutput\");\r\n}\r\n```\r\n\r\n... but this gets screwed up by other scripts. Harder than it looks.",
      "EditableFormat": "markdown",
      "HTML": "<p>OK ... to get around the popup blocker I now have:</p>\n<pre><code>doTranscript = function() {\n  log = \"\";\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\n  $('&lt;a /&gt;', {\n    href: \"data:text/plain,\"+encodeURIComponent(log),\n    download: \"logfile.txt\",\n    id: \"log_download\"\n  }).text(\"Click here to save log file\").appendTo(\"#divOutput\");\n}\n</code></pre>\n<p>... but this gets screwed up by other scripts. Harder than it looks.</p>\n\n",
      "PostDate": "2017-10-19T15:10:09.4486541Z",
      "LastEditDate": "2017-10-19T15:37:30.5084084Z",
      "link": null
    },
    {
      "PostId": "421a6e4b-751e-496a-b576-92b9c9d7fe73",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK ... \r\nthere's an onclick event for the whole document that suppresses the default behaviour of a click.\r\nSo I need to do:\r\n```\r\ndoTranscript = function() {\r\n  log = \"\";\r\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\r\n  $('<a />', {\r\n    href: \"data:text/plain,\"+encodeURIComponent(log),\r\n    download: \"logfile.txt\",\r\n    id: \"log_download\"\r\n  }).text(\"Click here to save log file if your popup blocker stopped it!\").appendTo(\"#divOutput\");\r\n  downloadlink = document.getElementById(\"log_download\");\r\n  downloadlink.addEventHandler (\"click\", function (e) {e.stopPropagation();});\r\n  downloadlink.click();\r\n}\r\n```\r\n\r\nTo use that with the web editor, you can wrap it in a `JS.eval(\"\")` but you'll have to remember to:\r\n* Change all `\"` within the code to `'`\r\n* Change `\\n` to `\\\\n`\r\n* Change `<` to `\"+Chr(60)+\"` and `>` to `\"+Chr(62)+\"`\r\n* Remove all the line breaks in the code\r\n\r\nso that Quest doesn't mangle it.",
      "EditableFormat": "markdown",
      "HTML": "<p>OK ...<br>\nthere's an onclick event for the whole document that suppresses the default behaviour of a click.<br>\nSo I need to do:</p>\n<pre><code>doTranscript = function() {\n  log = \"\";\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\n  $('&lt;a /&gt;', {\n    href: \"data:text/plain,\"+encodeURIComponent(log),\n    download: \"logfile.txt\",\n    id: \"log_download\"\n  }).text(\"Click here to save log file if your popup blocker stopped it!\").appendTo(\"#divOutput\");\n  downloadlink = document.getElementById(\"log_download\");\n  downloadlink.addEventHandler (\"click\", function (e) {e.stopPropagation();});\n  downloadlink.click();\n}\n</code></pre>\n<p>To use that with the web editor, you can wrap it in a <code>JS.eval(\"\")</code> but you'll have to remember to:</p>\n<ul>\n<li>Change all <code>\"</code> within the code to <code>'</code></li>\n<li>Change <code>\\n</code> to <code>\\\\n</code></li>\n<li>Change <code>&lt;</code> to <code>\"+Chr(60)+\"</code> and <code>&gt;</code> to <code>\"+Chr(62)+\"</code></li>\n<li>Remove all the line breaks in the code</li>\n</ul>\n<p>so that Quest doesn't mangle it.</p>\n\n",
      "PostDate": "2017-10-19T15:47:34.1161428Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "34a7cda3-3914-4828-afb9-ff91c9a30a7b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Note that you probably also want to use setTurnTimeout() to call `$(\"#log_download\").remove();\" next turn, because this code would behave unreliably if you try to save the transcript again.\r\n\r\nOr, you could stick the download link in the sidebar, and have its onfocus, onclick, or onmouseover script update the href using the current contents of divOutput; so moving the mouse over the download link ensures it's always current.",
      "EditableFormat": "markdown",
      "HTML": "<p>Note that you probably also want to use setTurnTimeout() to call `$(\"#log_download\").remove();\" next turn, because this code would behave unreliably if you try to save the transcript again.</p>\n<p>Or, you could stick the download link in the sidebar, and have its onfocus, onclick, or onmouseover script update the href using the current contents of divOutput; so moving the mouse over the download link ensures it's always current.</p>\n\n",
      "PostDate": "2017-10-19T15:55:27.2021131Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e9748b20-f7bf-4cb9-96ed-af5cc7953aff",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I've tried them all.  No saved file.\r\n\r\nI think the desktop player is stopping it somehow.\r\n\r\nI haven't tried it online, but I'm about to test it out.",
      "EditableFormat": "markdown",
      "HTML": "<p>I've tried them all.  No saved file.</p>\n<p>I think the desktop player is stopping it somehow.</p>\n<p>I haven't tried it online, but I'm about to test it out.</p>\n\n",
      "PostDate": "2017-10-19T23:57:23.5758841Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dc49a907-4ef3-494c-abe2-553dee411caa",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hey K.V., if you are able to get it to work, and on the online editor to, I could use that for my game! Considering how many potential updates I'll have!",
      "EditableFormat": "markdown",
      "HTML": "<p>Hey K.V., if you are able to get it to work, and on the online editor to, I could use that for my game! Considering how many potential updates I'll have!</p>\n\n",
      "PostDate": "2017-10-20T00:51:35.4839193Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fee8279b-f88a-45cd-b6fd-f5834970d14b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I've tried them all. No saved file.\r\n\r\nDoes the link to click on appear?\r\nI could only test it in the online version, and even there I think it could vary between browsers.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I've tried them all. No saved file.</p>\n</blockquote>\n<p>Does the link to click on appear?<br>\nI could only test it in the online version, and even there I think it could vary between browsers.</p>\n\n",
      "PostDate": "2017-10-20T01:42:31.4109042Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b2c18eaa-1853-4448-9a51-c4a155b2377a",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">Does the link to click on appear?\r\n\r\nYep, but it does nothing on click.\r\n\r\nI don't know what it should show as the source in the href, but here's what I've got:\r\n\r\n```<a href=\"data:text/plain,%0A%0A%0Atranscript%0A%0AYou%20are%20in%20a%20room.%0A%0A%3E%20script%0A\" download=\"logfile.txt\" id=\"log_download\">Click here to save log file if your popup blocker stopped it!</a>```",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Does the link to click on appear?</p>\n</blockquote>\n<p>Yep, but it does nothing on click.</p>\n<p>I don't know what it should show as the source in the href, but here's what I've got:</p>\n<p><code>&lt;a href=\"data:text/plain,%0A%0A%0Atranscript%0A%0AYou%20are%20in%20a%20room.%0A%0A%3E%20script%0A\" download=\"logfile.txt\" id=\"log_download\"&gt;Click here to save log file if your popup blocker stopped it!&lt;/a&gt;</code></p>\n\n",
      "PostDate": "2017-10-20T02:06:57.5171486Z",
      "LastEditDate": "2017-10-20T02:08:27.8456217Z",
      "link": null
    },
    {
      "PostId": "be2f86f9-c268-4473-8ca2-f4a52dafc464",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Note: K.V.'s save function, I mean. But I thought this was that.....",
      "EditableFormat": "markdown",
      "HTML": "<p>Note: K.V.'s save function, I mean. But I thought this was that.....</p>\n\n",
      "PostDate": "2017-10-20T03:00:34.3861064Z",
      "LastEditDate": "2017-10-20T03:04:05.5433022Z",
      "link": null
    },
    {
      "PostId": "1771257f-3ba1-48af-8089-7227205a8a62",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "jmne,\r\n\r\nI think we'll call it mrangel's, but I'll definitely post the entire code, once it works online and offline.\r\n\r\nI *think* it works online now, but I haven't tried yet.  I'm still wrestling the desktop version.",
      "EditableFormat": "markdown",
      "HTML": "<p>jmne,</p>\n<p>I think we'll call it mrangel's, but I'll definitely post the entire code, once it works online and offline.</p>\n<p>I <em>think</em> it works online now, but I haven't tried yet.  I'm still wrestling the desktop version.</p>\n\n",
      "PostDate": "2017-10-20T03:27:22.8936787Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9d22c924-b714-42ea-b6e4-45fc3f2e7c6d",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well, I'm in Linux-land with mrangel until I find my Windows 10 DVD...\r\n\r\n(A Linux Mint update decided I didn't need Arch Linux or Windows 10 anymore.  That's what I get for having Ubuntu on my hard drive.  Should have stuck with Arch and Windows.)\r\n\r\n---\r\nAnyway, I've also forgotten my password for the K.V. account, so I'm being a Dick for a while.  (Apologies in advance.)\r\n\r\n---\r\nI just realized:  I've never checked out Pixie's Save/Load system.  Does that really save?  Or do I recall something about copying text into a text editor?",
      "EditableFormat": "markdown",
      "HTML": "<p>Well, I'm in Linux-land with mrangel until I find my Windows 10 DVD...</p>\n<p>(A Linux Mint update decided I didn't need Arch Linux or Windows 10 anymore.  That's what I get for having Ubuntu on my hard drive.  Should have stuck with Arch and Windows.)</p>\n<hr>\n<p>Anyway, I've also forgotten my password for the K.V. account, so I'm being a Dick for a while.  (Apologies in advance.)</p>\n<hr>\n<p>I just realized:  I've never checked out Pixie's Save/Load system.  Does that really save?  Or do I recall something about copying text into a text editor?</p>\n\n",
      "PostDate": "2017-10-20T08:02:33.2691055Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6d3a668b-c5ba-49ab-86f7-7181a35028b1",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That's the results I got online before adding the `stopPropagation` event handler. I'm guessing the offline version uses a different method to block clicking on links.",
      "EditableFormat": "markdown",
      "HTML": "<p>That's the results I got online before adding the <code>stopPropagation</code> event handler. I'm guessing the offline version uses a different method to block clicking on links.</p>\n\n",
      "PostDate": "2017-10-20T08:06:19.6721468Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fddb263a-cb4f-4e7b-ac8e-4f3c19039282",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "HA!  \r\n\r\nI got back into Arch Linux!  \r\n\r\n(Linux Mint will not be getting updated again anytime soon.)\r\n\r\n---\r\nIt didn't work for me online, either, but I'm using the online editor this time, too.\r\n\r\n---\r\n\r\nThe first one[*](http://textadventures.co.uk/forum/quest/topic/5fd2-liccuidcbbf_eiefa/log-im-trying-to-figure-out-how-to-save-the-content-to-a-file#ce197608-a64e-4415-9bc0-125c7049a5f5) shows the link, I click it, it opens a tab with a blank page.\r\n\r\nThe rest don't do anything, but I'm probably changing something I shouldn't for the online editor.  Here's what I've got stuck in there:\r\n\r\n```JS.eval (\"doTranscript = function() {  log = '';  $('#divOutput').children().each(function (i) { log += ({HR: '\\\\n* * *\\\\n', BR: '\\\\n\\\\n'}[this.tagName] || $(this).text())+'\\\\n';});  $('\"+Chr(60)+\"a /\"+Chr(62)+\"', {    href: 'data:text/plain,'+encodeURIComponent(log),    download: 'logfile.txt',    id: 'log_download'  }).text('Click here to save log file if your popup blocker stopped it!').appendTo('#divOutput');  downloadlink = document.getElementById('log_download');  downloadlink.addEventHandler ('click', function (e) {e.stopPropagation();});  downloadlink.click();}\")```\r\n\r\n---\r\nI'm only supposed to put this one code in there, correct?\r\n\r\nThe ```doTranscript = function () {``` instead of ```function doTranscript() {``` is new to me.\r\n\r\nIs it to append an existing function?  Or is it just a different way to write the same thing?",
      "EditableFormat": "markdown",
      "HTML": "<p>HA!</p>\n<p>I got back into Arch Linux!</p>\n<p>(Linux Mint will not be getting updated again anytime soon.)</p>\n<hr>\n<p>It didn't work for me online, either, but I'm using the online editor this time, too.</p>\n<hr>\n<p>The first one<a href=\"http://textadventures.co.uk/forum/quest/topic/5fd2-liccuidcbbf_eiefa/log-im-trying-to-figure-out-how-to-save-the-content-to-a-file#ce197608-a64e-4415-9bc0-125c7049a5f5\">*</a> shows the link, I click it, it opens a tab with a blank page.</p>\n<p>The rest don't do anything, but I'm probably changing something I shouldn't for the online editor.  Here's what I've got stuck in there:</p>\n<p><code>JS.eval (\"doTranscript = function() { log = ''; $('#divOutput').children().each(function (i) { log += ({HR: '\\\\n* * *\\\\n', BR: '\\\\n\\\\n'}[this.tagName] || $(this).text())+'\\\\n';}); $('\"+Chr(60)+\"a /\"+Chr(62)+\"', { href: 'data:text/plain,'+encodeURIComponent(log), download: 'logfile.txt', id: 'log_download' }).text('Click here to save log file if your popup blocker stopped it!').appendTo('#divOutput'); downloadlink = document.getElementById('log_download'); downloadlink.addEventHandler ('click', function (e) {e.stopPropagation();}); downloadlink.click();}\")</code></p>\n<hr>\n<p>I'm only supposed to put this one code in there, correct?</p>\n<p>The <code>doTranscript = function () {</code> instead of <code>function doTranscript() {</code> is new to me.</p>\n<p>Is it to append an existing function?  Or is it just a different way to write the same thing?</p>\n\n",
      "PostDate": "2017-10-20T09:28:25.0273633Z",
      "LastEditDate": "2017-10-20T09:32:35.1023405Z",
      "link": null
    },
    {
      "PostId": "c301f98a-83de-4098-9c86-ab021399216c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The odd method of declaring a function is because\r\n`function doTranscript() {`\r\nwould be equivalent to\r\n`var doTranscript = function() {`\r\nwhich makes it local to the 'eval' block.\r\n\r\nThat looks right to me. I'll test it again.\r\nHmm... copy/paste your script into my game and it gives the blank tab again.\r\n\r\nThis one certainly works for me:\r\n```\r\nscript = \"doTranscript = function() {log = '';$('#divOutput').children().each(function (i) { log += ({HR: '\\\\n* * *\\\\n', BR: '\\\\n\\\\n'}[this.tagName] || $(this).text())+'\\\\n';});$('\" +Chr(60) + \"a /\"+Chr(62)+\"', {download: 'logfile.txt',id: 'log_download'}).attr('href', 'data:text/plain,'+encodeURIComponent(log)).text('Click here!').appendTo('#divOutput');db = document.getElementById('log_download'); db.addEventListener('click', function (e) {e.stopPropagation();}); db.click();};\"\r\nJS.eval (script)\r\nJS.doTranscript()\r\n```\r\nI can't see any difference between them that should make a difference.",
      "EditableFormat": "markdown",
      "HTML": "<p>The odd method of declaring a function is because<br>\n<code>function doTranscript() {</code><br>\nwould be equivalent to<br>\n<code>var doTranscript = function() {</code><br>\nwhich makes it local to the 'eval' block.</p>\n<p>That looks right to me. I'll test it again.<br>\nHmm... copy/paste your script into my game and it gives the blank tab again.</p>\n<p>This one certainly works for me:</p>\n<pre><code>script = \"doTranscript = function() {log = '';$('#divOutput').children().each(function (i) { log += ({HR: '\\\\n* * *\\\\n', BR: '\\\\n\\\\n'}[this.tagName] || $(this).text())+'\\\\n';});$('\" +Chr(60) + \"a /\"+Chr(62)+\"', {download: 'logfile.txt',id: 'log_download'}).attr('href', 'data:text/plain,'+encodeURIComponent(log)).text('Click here!').appendTo('#divOutput');db = document.getElementById('log_download'); db.addEventListener('click', function (e) {e.stopPropagation();}); db.click();};\"\nJS.eval (script)\nJS.doTranscript()\n</code></pre>\n<p>I can't see any difference between them that should make a difference.</p>\n\n",
      "PostDate": "2017-10-20T10:36:46.6878631Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0f056f7d-11b4-441d-9b3c-a1da8c2ad8a2",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I've been playing with it for a while.\r\n\r\nIt works in Firefox on Arch Linux, but not Chromium (with default settings).\r\n\r\nhttp://textadventures.co.uk/games/view/lwpgtxt_902eqjky5geq-q/transcript2\r\n\r\n---\r\n```\r\ndoTranscript = function() {\r\n  log = \"\";\r\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\r\n  addText(\"<a target='_blank' href='data:text/plain, \" + encodeURIComponent(log) + \"' download='logfile.txt' id='log_download'>Click here to save log file if your popup blocker stopped it!</a>\");\r\n  downloadlink = document.getElementById(\"log_download\");\r\n  downloadlink.addEventListener (\"click\", function (e) {e.stopPropagation();});\r\n  downloadlink.click();\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>I've been playing with it for a while.</p>\n<p>It works in Firefox on Arch Linux, but not Chromium (with default settings).</p>\n<p>http://textadventures.co.uk/games/view/lwpgtxt_902eqjky5geq-q/transcript2</p>\n<hr>\n<pre><code>doTranscript = function() {\n  log = \"\";\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\n  addText(\"&lt;a target='_blank' href='data:text/plain, \" + encodeURIComponent(log) + \"' download='logfile.txt' id='log_download'&gt;Click here to save log file if your popup blocker stopped it!&lt;/a&gt;\");\n  downloadlink = document.getElementById(\"log_download\");\n  downloadlink.addEventListener (\"click\", function (e) {e.stopPropagation();});\n  downloadlink.click();\n}\n</code></pre>\n\n",
      "PostDate": "2017-10-20T10:42:20.0863392Z",
      "LastEditDate": "2017-10-20T11:09:54.3748611Z",
      "link": null
    },
    {
      "PostId": "5ea4d2a5-eb53-4487-95ce-fd89eaa9fb1b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ugh ... how've I managed that?\r\n\r\nSomehow I've typed 'EventHandler' instead of 'EventListener', gone back right away and fixed it, and then copied the wrong version into the forum.\r\n\r\nI must have fixed it without thinking as I was removing the line-breaks.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ugh ... how've I managed that?</p>\n<p>Somehow I've typed 'EventHandler' instead of 'EventListener', gone back right away and fixed it, and then copied the wrong version into the forum.</p>\n<p>I must have fixed it without thinking as I was removing the line-breaks.</p>\n\n",
      "PostDate": "2017-10-20T10:42:35.7098951Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8db578c9-215e-4840-a8bd-8422a39bfb97",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I get this when I click it in Firefox:\r\n\r\n<samp>\r\n\r\n\r\n\r\nTranscript2\r\n\r\nYou are in a room.Enter SCRIPT\r\n\r\n\\> SCRIPT\r\n\r\n\r\n</samp>\r\n\r\n\r\n---\r\nThis is the correct output.\r\n\r\n...but I have an image there.  How do I switch that back to HTML?  \r\n\r\n(Could offer a choice in the command script (txt or HTML), once it's working.  I don't see why there couldn't be something that ONLY works in the **online** player for a change!)\r\n\r\n---\r\nI changed it to ```EventListener```, but I get the same results.",
      "EditableFormat": "markdown",
      "HTML": "<p>I get this when I click it in Firefox:</p>\n<samp>\n<p>Transcript2</p>\n<p>You are in a room.Enter SCRIPT</p>\n<p>&gt; SCRIPT</p>\n</samp>\n<hr>\n<p>This is the correct output.</p>\n<p>...but I have an image there.  How do I switch that back to HTML?</p>\n<p>(Could offer a choice in the command script (txt or HTML), once it's working.  I don't see why there couldn't be something that ONLY works in the <strong>online</strong> player for a change!)</p>\n<hr>\n<p>I changed it to <code>EventListener</code>, but I get the same results.</p>\n\n",
      "PostDate": "2017-10-20T11:09:10.9538542Z",
      "LastEditDate": "2017-10-20T11:10:27.1715864Z",
      "link": null
    },
    {
      "PostId": "b5df4418-2474-44e8-8b61-9221ff6c1ac9",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "# UPDATE\r\n\r\nThat change to ```EventListener``` DID fix it in Chromium!!!\r\n\r\nI just didn't see it automatically download.  (I was watching for a popup, like in Firefox.  (I'm silly.))\r\n\r\n---\r\nWhoo-hoo!\r\n\r\nGo, mrangel, go!!!\r\n\r\nSo the last script I posted WORKS ONLINE ONLY!!! \r\n\r\n---\r\n\r\n- I'd like it to save the images, or maybe save it as an HTML with a link to them.  (Give me an inch, I take a mile!)\r\n\r\n- I already know how to incorporate this into my ```save log``` command, so the original question has just been answered, as far as the online player is concerned.\r\n\r\n- Now, I must make it work in the desktop player.\r\n\r\n- After this, if we can get a RESTART command to make the desktop player think I hit **CTRL+R**, Quest will lack no Inform 7 / INFOCOM features.\r\n\r\n- After that, I'll be toying with the notion of porting the desktop editor to ...something that works on *nix.",
      "EditableFormat": "markdown",
      "HTML": "<h1>UPDATE</h1>\n<p>That change to <code>EventListener</code> DID fix it in Chromium!!!</p>\n<p>I just didn't see it automatically download.  (I was watching for a popup, like in Firefox.  (I'm silly.))</p>\n<hr>\n<p>Whoo-hoo!</p>\n<p>Go, mrangel, go!!!</p>\n<p>So the last script I posted WORKS ONLINE ONLY!!!</p>\n<hr>\n<ul>\n<li>\n<p>I'd like it to save the images, or maybe save it as an HTML with a link to them.  (Give me an inch, I take a mile!)</p>\n</li>\n<li>\n<p>I already know how to incorporate this into my <code>save log</code> command, so the original question has just been answered, as far as the online player is concerned.</p>\n</li>\n<li>\n<p>Now, I must make it work in the desktop player.</p>\n</li>\n<li>\n<p>After this, if we can get a RESTART command to make the desktop player think I hit <strong>CTRL+R</strong>, Quest will lack no Inform 7 / INFOCOM features.</p>\n</li>\n<li>\n<p>After that, I'll be toying with the notion of porting the desktop editor to ...something that works on *nix.</p>\n</li>\n</ul>\n\n",
      "PostDate": "2017-10-20T11:13:52.7873864Z",
      "LastEditDate": "2017-10-20T11:29:13.0192895Z",
      "link": null
    },
    {
      "PostId": "d2d0e51c-05d4-4afc-b9b3-cf5b21fad0fc",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Saving HTML should be easy enough; just change the download filename, the content type to text/html, and the first  two lines of the function (which do the html→text conversion).\r\n\r\nImages… I'm not sure if just saving the links will work. Do the images have the same URL each time a game is run? If not, you probably want to convert them to more data: URI's in the same way.",
      "EditableFormat": "markdown",
      "HTML": "<p>Saving HTML should be easy enough; just change the download filename, the content type to text/html, and the first  two lines of the function (which do the html→text conversion).</p>\n<p>Images… I'm not sure if just saving the links will work. Do the images have the same URL each time a game is run? If not, you probably want to convert them to more data: URI's in the same way.</p>\n\n",
      "PostDate": "2017-10-20T14:22:26.4400438Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bff66b7f-6349-47f9-85a7-f3ad3c604f47",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think this is what's stopping it in the desktop player:\r\n\r\n```\r\n    Private Sub GoURL(data As String)\r\n        If data.StartsWith(\"http://\") Or data.StartsWith(\"https://\") Or data.StartsWith(\"mailto:\") Then\r\n            System.Diagnostics.Process.Start(data)\r\n        End If\r\n    End Sub\r\n```\r\n\r\n---\r\nI changed it to this:\r\n\r\n```\r\n    Private Sub GoURL(data As String)\r\n        If data.StartsWith(\"http://\") Or data.StartsWith(\"https://\") Or data.StartsWith(\"mailto:\") Or data.StartsWith(\"data:text\") Then\r\n            System.Diagnostics.Process.Start(data)\r\n        End If\r\n    End Sub\r\n```\r\n\r\n---\r\nQuest tries, but I just get this:\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/31842933-18cdd986-b5b6-11e7-8d4e-a19f1d0f1320.png)\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/31842964-442601b2-b5b6-11e7-80c5-cdfa85d0838a.png)\r\n\r\n---\r\nI can add another **If** that opens the default browser, but I have no clue what the code for that would be in ASP.vb.",
      "EditableFormat": "markdown",
      "HTML": "<p>I think this is what's stopping it in the desktop player:</p>\n<pre><code>    Private Sub GoURL(data As String)\n        If data.StartsWith(\"http://\") Or data.StartsWith(\"https://\") Or data.StartsWith(\"mailto:\") Then\n            System.Diagnostics.Process.Start(data)\n        End If\n    End Sub\n</code></pre>\n<hr>\n<p>I changed it to this:</p>\n<pre><code>    Private Sub GoURL(data As String)\n        If data.StartsWith(\"http://\") Or data.StartsWith(\"https://\") Or data.StartsWith(\"mailto:\") Or data.StartsWith(\"data:text\") Then\n            System.Diagnostics.Process.Start(data)\n        End If\n    End Sub\n</code></pre>\n<hr>\n<p>Quest tries, but I just get this:</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/31842933-18cdd986-b5b6-11e7-8d4e-a19f1d0f1320.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/31842964-442601b2-b5b6-11e7-80c5-cdfa85d0838a.png\" alt=\"image\"></p>\n<hr>\n<p>I can add another <strong>If</strong> that opens the default browser, but I have no clue what the code for that would be in ASP.vb.</p>\n\n",
      "PostDate": "2017-10-20T21:48:38.6399931Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c92b0a8e-cc43-4cb7-a788-1e411884e774",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Making progress (I think).\r\n\r\nI have edited the ```goURL``` function in **PlayerHTML.vb**, but I'm missing something simple somewhere.\r\n\r\nHere's what I've done:\r\n\r\n\r\nOriginal:\r\n```\r\n    Private Sub GoURL(data As String)\r\n        If data.StartsWith(\"http://\") Or data.StartsWith(\"https://\") Or data.StartsWith(\"mailto:\") Then\r\n            System.Diagnostics.Process.Start(data)\r\n        End If\r\n    End Sub\r\n```\r\n\r\n---\r\nI added the ```If``` with **```data:text```**:\r\n```\r\n    Private Sub GoURL(data As String)\r\n        If data.StartsWith(\"http://\") Or data.StartsWith(\"https://\") Or data.StartsWith(\"mailto:\") Then\r\n            System.Diagnostics.Process.Start(data)\r\n        End If\r\n        If data.StartsWith(\"data:text\") Then\r\n            Process.Start(\"chrome.exe\", data)\r\n        End If\r\n    End Sub\r\n```\r\n\r\n---\r\nThis is what the href should be:  ```data:text/plain, %0A%0A%0Atranscript%0A%0AYou%20are%20in%20a%20room.%0A%0A>%20script%0A```\r\n\r\n...but it's only putting this through to Chrome: ```data:text/plain,```\r\n\r\nI wonder if the comma is the culprit...  Nah, I don't think the comma would show up if that was the case.  (I was thinking it was ending the parameter or something.)\r\n\r\n---\r\nMore on this as it comes in...\r\n\r\n---\r\nNOTE: I used Chrome because Internet Explorer will not open the file, even with the correct link.  If I can get this to work with Chrome and Firefox when I call each directly, I **think** I can add a function to find the player's default browser first.\r\n\r\nALSO NOTE:  I'm 'learning' all of this as I go, so please excuse my ignorance (which, in this case, is NOT bliss).\r\n\r\n\r\n---\r\nONE MORE NOTE:\r\n\r\nI like it displaying the text in the browser better than it downloading the file automatically.  This way, the player could print to paper or PDF (or whatever) OR save it to a file.\r\n\r\nFirefox asks you what you'd like to do, but Chrome just downloads the .txt file.  This may upset (and/or confuse) some players.\r\n\r\n---\r\nSince I'm all over the place (sorry), this is what I'm after:\r\n\r\n- Save the information you can view in the Log during play to a .txt file which can be viewed, in its entirety, after closing the game\r\n\r\n- The ability to enter SCRIPT or TRANSCRIPT during play to print or save everything Quest has printed to the screen during play.\r\n    - When using FROTZ or Glulxe, this is default for every game.  If you quit the game, your file is saved.\r\n        - It even works in Parchment (the online version).\r\n\r\nI asked for a way to save the Log (as well as the transcript) directly to the hard drive, but one of the first codes mrangel posted actually opened the browser, displaying the text exactly as it should be...  \r\n\r\nThis is nice.  I believe it to be better than what I originally wanted.\r\n\r\nThe player could print that or save it or whatever they like.",
      "EditableFormat": "markdown",
      "HTML": "<p>Making progress (I think).</p>\n<p>I have edited the <code>goURL</code> function in <strong>PlayerHTML.vb</strong>, but I'm missing something simple somewhere.</p>\n<p>Here's what I've done:</p>\n<p>Original:</p>\n<pre><code>    Private Sub GoURL(data As String)\n        If data.StartsWith(\"http://\") Or data.StartsWith(\"https://\") Or data.StartsWith(\"mailto:\") Then\n            System.Diagnostics.Process.Start(data)\n        End If\n    End Sub\n</code></pre>\n<hr>\n<p>I added the <code>If</code> with <strong><code>data:text</code></strong>:</p>\n<pre><code>    Private Sub GoURL(data As String)\n        If data.StartsWith(\"http://\") Or data.StartsWith(\"https://\") Or data.StartsWith(\"mailto:\") Then\n            System.Diagnostics.Process.Start(data)\n        End If\n        If data.StartsWith(\"data:text\") Then\n            Process.Start(\"chrome.exe\", data)\n        End If\n    End Sub\n</code></pre>\n<hr>\n<p>This is what the href should be:  <code>data:text/plain, %0A%0A%0Atranscript%0A%0AYou%20are%20in%20a%20room.%0A%0A&gt;%20script%0A</code></p>\n<p>...but it's only putting this through to Chrome: <code>data:text/plain,</code></p>\n<p>I wonder if the comma is the culprit...  Nah, I don't think the comma would show up if that was the case.  (I was thinking it was ending the parameter or something.)</p>\n<hr>\n<p>More on this as it comes in...</p>\n<hr>\n<p>NOTE: I used Chrome because Internet Explorer will not open the file, even with the correct link.  If I can get this to work with Chrome and Firefox when I call each directly, I <strong>think</strong> I can add a function to find the player's default browser first.</p>\n<p>ALSO NOTE:  I'm 'learning' all of this as I go, so please excuse my ignorance (which, in this case, is NOT bliss).</p>\n<hr>\n<p>ONE MORE NOTE:</p>\n<p>I like it displaying the text in the browser better than it downloading the file automatically.  This way, the player could print to paper or PDF (or whatever) OR save it to a file.</p>\n<p>Firefox asks you what you'd like to do, but Chrome just downloads the .txt file.  This may upset (and/or confuse) some players.</p>\n<hr>\n<p>Since I'm all over the place (sorry), this is what I'm after:</p>\n<ul>\n<li>\n<p>Save the information you can view in the Log during play to a .txt file which can be viewed, in its entirety, after closing the game</p>\n</li>\n<li>\n<p>The ability to enter SCRIPT or TRANSCRIPT during play to print or save everything Quest has printed to the screen during play.</p>\n<ul>\n<li>When using FROTZ or Glulxe, this is default for every game.  If you quit the game, your file is saved.\n<ul>\n<li>It even works in Parchment (the online version).</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>I asked for a way to save the Log (as well as the transcript) directly to the hard drive, but one of the first codes mrangel posted actually opened the browser, displaying the text exactly as it should be...</p>\n<p>This is nice.  I believe it to be better than what I originally wanted.</p>\n<p>The player could print that or save it or whatever they like.</p>\n\n",
      "PostDate": "2017-10-21T06:56:26.2105532Z",
      "LastEditDate": "2017-10-21T07:17:51.2785282Z",
      "link": null
    },
    {
      "PostId": "8f2977b4-53c8-49d7-ac4d-a93929d785b2",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Do you have a space after the comma? There shouldn't be, but you seem to have one in an earlier post. Could explain that behaviour.\r\nAlso, I'm not sure if this method will fail for large transcripts.",
      "EditableFormat": "markdown",
      "HTML": "<p>Do you have a space after the comma? There shouldn't be, but you seem to have one in an earlier post. Could explain that behaviour.<br>\nAlso, I'm not sure if this method will fail for large transcripts.</p>\n\n",
      "PostDate": "2017-10-21T07:13:01.9921316Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1a352718-2b2c-4965-81e5-d044ad77f058",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I'm missing something simple somewhere.\r\n\r\n---\r\n>>Do you have a space after the comma? \r\n\r\n\r\nYes.\r\n\r\nHot dog!  It works! It works!\r\n\r\n---\r\nEDIT:\r\n\r\nIf Windows knew what to do with the ```data:text```, it would be smooth sailing.\r\n\r\nHrmm... \r\n\r\nMaybe I need to use ```Try```.\r\n\r\nThis is what I've added to the Visual Studio code:\r\n\r\n```\r\n        If data.StartsWith(\"data:text\") Then\r\n            Process.Start(\"chrome.exe\", data)\r\n        End If\r\n```\r\n\r\n---\r\nI'm going to learn to use ```Try``` and ```Catch```.\r\n\r\nThanks, mrangel!!!",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I'm missing something simple somewhere.</p>\n</blockquote>\n<hr>\n<blockquote>\n<blockquote>\n<p>Do you have a space after the comma?</p>\n</blockquote>\n</blockquote>\n<p>Yes.</p>\n<p>Hot dog!  It works! It works!</p>\n<hr>\n<p>EDIT:</p>\n<p>If Windows knew what to do with the <code>data:text</code>, it would be smooth sailing.</p>\n<p>Hrmm...</p>\n<p>Maybe I need to use <code>Try</code>.</p>\n<p>This is what I've added to the Visual Studio code:</p>\n<pre><code>        If data.StartsWith(\"data:text\") Then\n            Process.Start(\"chrome.exe\", data)\n        End If\n</code></pre>\n<hr>\n<p>I'm going to learn to use <code>Try</code> and <code>Catch</code>.</p>\n<p>Thanks, mrangel!!!</p>\n\n",
      "PostDate": "2017-10-21T07:21:05.5926833Z",
      "LastEditDate": "2017-10-21T07:50:08.3783216Z",
      "link": null
    },
    {
      "PostId": "cf14d5eb-9150-4100-ad44-6809c6eb46f9",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you want to view the file rather than saving it, it shouldn't be that hard to open a new tab and copy data across to it. Whether you'll then be able to save it from there would be browser dependant (IE used to be a pain, saving the original HTML document without any dynamically generated content. Don't know if this is better now).\r\n\r\nIf you're allowing the user's browser of choice, be aware that different versions of IE have different arbitrary limits for the maximum size of a data: URI.\r\n\r\nI remember thinking that it might be better to base64 encode the URI, but I can't remember why I thought it might help. If you find a circumstance where it's useful, the URI would then be `\"data:text/plain;base64,\"+btoa(log)`.",
      "EditableFormat": "markdown",
      "HTML": "<p>If you want to view the file rather than saving it, it shouldn't be that hard to open a new tab and copy data across to it. Whether you'll then be able to save it from there would be browser dependant (IE used to be a pain, saving the original HTML document without any dynamically generated content. Don't know if this is better now).</p>\n<p>If you're allowing the user's browser of choice, be aware that different versions of IE have different arbitrary limits for the maximum size of a data: URI.</p>\n<p>I remember thinking that it might be better to base64 encode the URI, but I can't remember why I thought it might help. If you find a circumstance where it's useful, the URI would then be <code>\"data:text/plain;base64,\"+btoa(log)</code>.</p>\n\n",
      "PostDate": "2017-10-21T08:33:00.3701112Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "507a464e-9ea4-4df9-ab04-2aca4eea6328",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Enhanced compatibility version.\r\n\r\n(Does desktop Quest implement its own browser? The existence of the GoURL sub seems redundant if it was just embedding a normal browser in its own window, which is what I would have expected it to do for rendering HTML/CSS/JS content. But if it's using IE, which I understand was quite easy in VS, some version of this might help)\r\n```\r\ndoTranscript = function() {\r\n  log = \"\";\r\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\r\n  if (window.navigator.msSaveOrOpenBlob) {\r\n    // Because if you want it to work in Internet Explorer, you have to do it differently\r\n    window.navigator.msSaveOrOpenBlob (new Blob([log], {type: \"text/plain\"}), \"logfile.txt\");\r\n  } else {\r\n    $('<a />', {\r\n      download: \"logfile.txt\",\r\n      id: \"log_download\"\r\n    }).text(\"Click here to save log!\").appendTo(\"#divOutput\");\r\n    downloadlink = document.getElementById(\"log_download\");\r\n    if (window.Blob && URL.createObjectURL) {\r\n      downloadlink.href = URL.createObjectURL(new Blob([log], {type: \"text/plain\"}));\r\n    } else {\r\n      downloadlink.href = \"data:text/plain,\"+encodeURIComponent(log);\r\n    }\r\n    downloadlink.addEventListener (\"click\", function (e) {e.stopPropagation();});\r\n    downloadlink.click();\r\n  }\r\n}\r\n```\r\n(use `msSaveBlob` instead of `msSaveOrOpenBlob` if you don't want to give the player the option of opening  it. To do the same in chrome, remove the \"download\" property of the href)",
      "EditableFormat": "markdown",
      "HTML": "<p>Enhanced compatibility version.</p>\n<p>(Does desktop Quest implement its own browser? The existence of the GoURL sub seems redundant if it was just embedding a normal browser in its own window, which is what I would have expected it to do for rendering HTML/CSS/JS content. But if it's using IE, which I understand was quite easy in VS, some version of this might help)</p>\n<pre><code>doTranscript = function() {\n  log = \"\";\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\n  if (window.navigator.msSaveOrOpenBlob) {\n    // Because if you want it to work in Internet Explorer, you have to do it differently\n    window.navigator.msSaveOrOpenBlob (new Blob([log], {type: \"text/plain\"}), \"logfile.txt\");\n  } else {\n    $('&lt;a /&gt;', {\n      download: \"logfile.txt\",\n      id: \"log_download\"\n    }).text(\"Click here to save log!\").appendTo(\"#divOutput\");\n    downloadlink = document.getElementById(\"log_download\");\n    if (window.Blob &amp;&amp; URL.createObjectURL) {\n      downloadlink.href = URL.createObjectURL(new Blob([log], {type: \"text/plain\"}));\n    } else {\n      downloadlink.href = \"data:text/plain,\"+encodeURIComponent(log);\n    }\n    downloadlink.addEventListener (\"click\", function (e) {e.stopPropagation();});\n    downloadlink.click();\n  }\n}\n</code></pre>\n<p>(use <code>msSaveBlob</code> instead of <code>msSaveOrOpenBlob</code> if you don't want to give the player the option of opening  it. To do the same in chrome, remove the \"download\" property of the href)</p>\n\n",
      "PostDate": "2017-10-21T08:48:59.2576759Z",
      "LastEditDate": "2017-10-21T09:09:30.5148056Z",
      "link": null
    },
    {
      "PostId": "f0881f7f-f841-46de-b2c2-077dc6f7a094",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "IE just tells me \"The webpage cannot be displayed\" when I paste the ```data:text...``` bit that I copy from Firefox into it.\r\n\r\n---\r\nNOTE:  I didn't intentionally start trying to open the text to view it with an option to print or save.  I just wanted it to save it.\r\n\r\nQuest isn't behaving at all like a browser in this case, though.  Even when I do get it to pass your code through, it's just opening the browser I specify with the game's text displayed in it.  \r\n\r\nCome to find out, this is what I'd like it to do (or the same thing in Notepad -- I can get Quest to open Notepad, but I can't get it to paste the text into it).\r\n\r\n\r\n---\r\nWait!\r\n\r\nI need to find how Quest saves a JS file!  (It just saves whatever you type in the field, as you type it in, as far as I can tell.  And it saves it into the game's directory.)\r\n\r\nI bet that's easier to mess with than this, and it would work.\r\n\r\nI've already found the function that checks for the online player, so we could have it do your browser download thing if online, otherwise save it like it does a JS file (or open the default browser with the text displayed in the body).",
      "EditableFormat": "markdown",
      "HTML": "<p>IE just tells me \"The webpage cannot be displayed\" when I paste the <code>data:text...</code> bit that I copy from Firefox into it.</p>\n<hr>\n<p>NOTE:  I didn't intentionally start trying to open the text to view it with an option to print or save.  I just wanted it to save it.</p>\n<p>Quest isn't behaving at all like a browser in this case, though.  Even when I do get it to pass your code through, it's just opening the browser I specify with the game's text displayed in it.</p>\n<p>Come to find out, this is what I'd like it to do (or the same thing in Notepad -- I can get Quest to open Notepad, but I can't get it to paste the text into it).</p>\n<hr>\n<p>Wait!</p>\n<p>I need to find how Quest saves a JS file!  (It just saves whatever you type in the field, as you type it in, as far as I can tell.  And it saves it into the game's directory.)</p>\n<p>I bet that's easier to mess with than this, and it would work.</p>\n<p>I've already found the function that checks for the online player, so we could have it do your browser download thing if online, otherwise save it like it does a JS file (or open the default browser with the text displayed in the body).</p>\n\n",
      "PostDate": "2017-10-21T08:58:00.1587574Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5bb0fe8f-5af8-4b74-9ac1-59564bfb3217",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">Does desktop Quest implement its own browser? The existence of the GoURL sub seems redundant if it was just embedding a normal browser in its own window, which is what I would have expected it to do for rendering HTML/CSS/JS content. But if it's using IE, which I understand was quite easy in VS, some version of this might help)\r\n\r\nmrangel,\r\n\r\nWe're good at typing each other posts and missing each other's recent posts!\r\n\r\n---\r\nThe desktop version has Chromium built into it.\r\n\r\nI've made it load that ```data:text...``` string, just as Firefox does.  It displays it like it's a new page, but you can't save, you can't print, and you can't back up.  That's why I went the ```goURL``` route.  It just opens whatever I put as the parameter in the browser as soon as the script runs.\r\n\r\n\r\n---\r\nI was just reading up on blobs, too.\r\n\r\nI'm trying your code right now.\r\n\r\n---\r\nPS\r\n\r\nIf you're not just enjoying doing all this work on this, I don't wish to impose.  (I'm appreciating every bit of it, and I think I'm learning, but I feel like I may be ... you know... imposing at this point.)\r\n\r\nI'm a forum problem-solving junkie, you see, and I sometimes assume everyone else here is, as well.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Does desktop Quest implement its own browser? The existence of the GoURL sub seems redundant if it was just embedding a normal browser in its own window, which is what I would have expected it to do for rendering HTML/CSS/JS content. But if it's using IE, which I understand was quite easy in VS, some version of this might help)</p>\n</blockquote>\n<p>mrangel,</p>\n<p>We're good at typing each other posts and missing each other's recent posts!</p>\n<hr>\n<p>The desktop version has Chromium built into it.</p>\n<p>I've made it load that <code>data:text...</code> string, just as Firefox does.  It displays it like it's a new page, but you can't save, you can't print, and you can't back up.  That's why I went the <code>goURL</code> route.  It just opens whatever I put as the parameter in the browser as soon as the script runs.</p>\n<hr>\n<p>I was just reading up on blobs, too.</p>\n<p>I'm trying your code right now.</p>\n<hr>\n<p>PS</p>\n<p>If you're not just enjoying doing all this work on this, I don't wish to impose.  (I'm appreciating every bit of it, and I think I'm learning, but I feel like I may be ... you know... imposing at this point.)</p>\n<p>I'm a forum problem-solving junkie, you see, and I sometimes assume everyone else here is, as well.</p>\n\n",
      "PostDate": "2017-10-21T09:03:18.283782Z",
      "LastEditDate": "2017-10-21T09:18:15.7326162Z",
      "link": null
    },
    {
      "PostId": "3f288dac-c4f9-4374-978b-0669a1261834",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The problem (I believe) is that Windows doesn't know what app to open ```data:text/plain...text``` with.\r\n\r\nIf the href was 'filename.txt', Windows would open that up with Notepad.  If it was 'filename.htm', it would go to the default browser, which is Chrome in this case.\r\n\r\nThe ```goUrl``` function opens any actual webpage in Chrome with no problem.  (It also works for the ```mailto:``` links.)\r\n\r\n---\r\nThis may or may not be related:\r\n\r\nQuest's browser will not run things in iframes that Chrome and Firefox will, and vice-versa.\r\n\r\nI.e., I can put the Quest forum in an iframe.  It works in Quest, but not in a real browser.\r\n\r\n---\r\nAudio and video links and embeds work differently in the Quest browser, too.",
      "EditableFormat": "markdown",
      "HTML": "<p>The problem (I believe) is that Windows doesn't know what app to open <code>data:text/plain...text</code> with.</p>\n<p>If the href was 'filename.txt', Windows would open that up with Notepad.  If it was 'filename.htm', it would go to the default browser, which is Chrome in this case.</p>\n<p>The <code>goUrl</code> function opens any actual webpage in Chrome with no problem.  (It also works for the <code>mailto:</code> links.)</p>\n<hr>\n<p>This may or may not be related:</p>\n<p>Quest's browser will not run things in iframes that Chrome and Firefox will, and vice-versa.</p>\n<p>I.e., I can put the Quest forum in an iframe.  It works in Quest, but not in a real browser.</p>\n<hr>\n<p>Audio and video links and embeds work differently in the Quest browser, too.</p>\n\n",
      "PostDate": "2017-10-21T09:11:30.9476541Z",
      "LastEditDate": "2017-10-21T09:16:34.6468221Z",
      "link": null
    },
    {
      "PostId": "4977942c-3132-4cb0-8fec-698f370212a0",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "'try', 'throw', and 'catch' deal with handling errors and displaying error messages:\r\n\r\nwhen you put scripting into 'try', if it fails for whatever reason, there's various built-in error messages that you can have displayed in/via the 'catch', or you can create your own scripting for error messages\r\n\r\nfor pseudocode example (it's been awhile since I've done 'try' and 'catch' with the main programming languages ... and am too lazy to re-look them up, lol)\r\n\r\n```\r\ntry {\r\n  msg (\"Age?\")\r\n  get input {\r\n    player.age = result\r\n  }\r\n}\r\ncatch (CatchInvalidInput (e)) {\r\n  e = \"ERROR: you need to input an integer: a non-decimal number\"\r\n  msg (e)\r\n}\r\n```\r\n\r\nthe 'throw' lets you create your own custom scripting for the errors, and also acts as like a jump/branch, so you don't need duplicate 'catches' everywhere, you have 'throws' within your game code, that go to the various/proper 'catch' blocks for them.\r\n\r\nhere's some links of various languages' examples:\r\n\r\nhttps://www.w3schools.com/js/js_errors.asp (JS: JavaScript)\r\n\r\nhttps://docs.oracle.com/javase/tutorial/essential/exceptions/index.html (Java full-bore programming language, this is NOT the same as JS:JavaScript)\r\n\r\nhttp://www.cplusplus.com/doc/tutorial/exceptions/ (C++ full-bore programming language)\r\n\r\nhttps://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/exception-handling-statements (C#)",
      "EditableFormat": "markdown",
      "HTML": "<p>'try', 'throw', and 'catch' deal with handling errors and displaying error messages:</p>\n<p>when you put scripting into 'try', if it fails for whatever reason, there's various built-in error messages that you can have displayed in/via the 'catch', or you can create your own scripting for error messages</p>\n<p>for pseudocode example (it's been awhile since I've done 'try' and 'catch' with the main programming languages ... and am too lazy to re-look them up, lol)</p>\n<pre><code>try {\n  msg (\"Age?\")\n  get input {\n    player.age = result\n  }\n}\ncatch (CatchInvalidInput (e)) {\n  e = \"ERROR: you need to input an integer: a non-decimal number\"\n  msg (e)\n}\n</code></pre>\n<p>the 'throw' lets you create your own custom scripting for the errors, and also acts as like a jump/branch, so you don't need duplicate 'catches' everywhere, you have 'throws' within your game code, that go to the various/proper 'catch' blocks for them.</p>\n<p>here's some links of various languages' examples:</p>\n<p>https://www.w3schools.com/js/js_errors.asp (JS: JavaScript)</p>\n<p>https://docs.oracle.com/javase/tutorial/essential/exceptions/index.html (Java full-bore programming language, this is NOT the same as JS:JavaScript)</p>\n<p>http://www.cplusplus.com/doc/tutorial/exceptions/ (C++ full-bore programming language)</p>\n<p>https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/exception-handling-statements (C#)</p>\n\n",
      "PostDate": "2017-10-21T09:12:24.2951312Z",
      "LastEditDate": "2017-10-21T09:13:21.583451Z",
      "link": null
    },
    {
      "PostId": "2c4f0c03-1939-4a53-9733-275fc432b68f",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(edited the previous post; for wider support in different browsers)\r\n\r\nIf it has embedded Chromium, I have no idea why the previous script doesn't work.",
      "EditableFormat": "markdown",
      "HTML": "<p>(edited the previous post; for wider support in different browsers)</p>\n<p>If it has embedded Chromium, I have no idea why the previous script doesn't work.</p>\n\n",
      "PostDate": "2017-10-21T09:13:22.6616185Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ea9dd669-8ba3-45f6-a710-0a889916ed8e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> The problem (I believe) is that Windows doesn't know what app to open `data:text/plain`...text with.\r\n\r\nWhen it first came out, a lot of malware started using `data:` URI's rather than actual files, because as soon as it's a file on a disk somewhere, a virus checker could scan it. MS's response was just to block them everywhere except inside the browser.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>The problem (I believe) is that Windows doesn't know what app to open <code>data:text/plain</code>...text with.</p>\n</blockquote>\n<p>When it first came out, a lot of malware started using <code>data:</code> URI's rather than actual files, because as soon as it's a file on a disk somewhere, a virus checker could scan it. MS's response was just to block them everywhere except inside the browser.</p>\n\n",
      "PostDate": "2017-10-21T09:17:46.4382687Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6eb820d9-4bfc-4f58-8d66-601b3e51f271",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "ya... lots of malware/adware uses the 'data:script' in url's for the apple computers, to open up their webpages/downloads... I still don't understand this type of stuff that well though, sighs.",
      "EditableFormat": "markdown",
      "HTML": "<p>ya... lots of malware/adware uses the 'data:script' in url's for the apple computers, to open up their webpages/downloads... I still don't understand this type of stuff that well though, sighs.</p>\n\n",
      "PostDate": "2017-10-21T09:20:21.245675Z",
      "LastEditDate": "2017-10-21T09:20:57.3218582Z",
      "link": null
    },
    {
      "PostId": "c7a71420-b316-4514-92bd-171b9327025e",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah... I figured it was a security measure of some sort.\r\n\r\n---\r\nI am assuming it has embedded Chromium.  I see \"Chromium\" in the code now and then.\r\n\r\n---\r\nI fed the parameter to this when it displayed the TRANSCRIPT text inside Quest's browser:\r\n\r\n```ctlWebView.Load(\"res://local/ui\")```\r\n\r\nI used ```ctlWebView.Load(href)```.  It cleared the game content and displayed the transcript content.  Quest's browser has no tabs or Back button though, so I had to restart.\r\n\r\n---\r\nI see you edited the code.  I'll try with that revision.\r\n\r\nThanks much!",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah... I figured it was a security measure of some sort.</p>\n<hr>\n<p>I am assuming it has embedded Chromium.  I see \"Chromium\" in the code now and then.</p>\n<hr>\n<p>I fed the parameter to this when it displayed the TRANSCRIPT text inside Quest's browser:</p>\n<p><code>ctlWebView.Load(\"res://local/ui\")</code></p>\n<p>I used <code>ctlWebView.Load(href)</code>.  It cleared the game content and displayed the transcript content.  Quest's browser has no tabs or Back button though, so I had to restart.</p>\n<hr>\n<p>I see you edited the code.  I'll try with that revision.</p>\n<p>Thanks much!</p>\n\n",
      "PostDate": "2017-10-21T09:24:43.4775319Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c657a765-1b70-472d-bf37-72738819ec47",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "HK,\r\n\r\nTry only seems to check if its script sent out the command, not whether it succeeded.  (This, I assume, is because nothing is being returned from the other function.)\r\n\r\nArgh!\r\n\r\nI should have taken computers instead of HVAC/R!!!",
      "EditableFormat": "markdown",
      "HTML": "<p>HK,</p>\n<p>Try only seems to check if its script sent out the command, not whether it succeeded.  (This, I assume, is because nothing is being returned from the other function.)</p>\n<p>Argh!</p>\n<p>I should have taken computers instead of HVAC/R!!!</p>\n\n",
      "PostDate": "2017-10-21T09:28:01.8295876Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0ca36e0a-402c-4a8d-8c1c-4054dce3ebe1",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel, \r\n\r\nThis is my href with the new code:\r\n\r\n```\r\nblob:res%3A///35526a11-8950-4f19-9f41-64f1a2da569c\r\n```\r\n\r\nWindows doesn't find a default app to run that, either.\r\n\r\nCan you end a blob with ```.txt```?  That might solve it...",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel,</p>\n<p>This is my href with the new code:</p>\n<pre><code>blob:res%3A///35526a11-8950-4f19-9f41-64f1a2da569c\n</code></pre>\n<p>Windows doesn't find a default app to run that, either.</p>\n<p>Can you end a blob with <code>.txt</code>?  That might solve it...</p>\n\n",
      "PostDate": "2017-10-21T09:30:45.9386917Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b4a696d5-7645-4c68-84ce-2f613db67457",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you can edit Quest itself, I think this should be relatively easy to do. I'll step out, though; really don't like VS (it's worse than javascript, which I never really got the hang of).",
      "EditableFormat": "markdown",
      "HTML": "<p>If you can edit Quest itself, I think this should be relatively easy to do. I'll step out, though; really don't like VS (it's worse than javascript, which I never really got the hang of).</p>\n\n",
      "PostDate": "2017-10-21T09:32:52.5230804Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e18ee453-ed9b-4312-a0d0-57baba8f1b47",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You can't pass a blob: URI to another app. It refers to a location in the browser's memory; you have to rely on the browser to save or open it.\r\nDoes it open the blob at all?\r\n\r\nIf it opens within the existing window, then try changing the content type to `application/octet-stream`",
      "EditableFormat": "markdown",
      "HTML": "<p>You can't pass a blob: URI to another app. It refers to a location in the browser's memory; you have to rely on the browser to save or open it.<br>\nDoes it open the blob at all?</p>\n<p>If it opens within the existing window, then try changing the content type to <code>application/octet-stream</code></p>\n\n",
      "PostDate": "2017-10-21T09:35:25.3895556Z",
      "LastEditDate": "2017-10-21T09:37:27.8599715Z",
      "link": null
    },
    {
      "PostId": "d4d1f13d-b82e-4e47-b99f-5686acf6d300",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">really don't like VS (it's worse than javascript\r\n\r\nI've been thinking it looks like a dumb version of JS...\r\n\r\n>If you can edit Quest itself, I think this should be relatively easy to do.\r\n\r\nI've got it open in Visual Studio right now.  I thought it should be easy, too...\r\n\r\nVB.NET has public Subs and private Subs (whatever that really means), and...\r\n\r\nI'm just in over my head, and I'm pulling you under with me, mrangel.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>really don't like VS (it's worse than javascript</p>\n</blockquote>\n<p>I've been thinking it looks like a dumb version of JS...</p>\n<blockquote>\n<p>If you can edit Quest itself, I think this should be relatively easy to do.</p>\n</blockquote>\n<p>I've got it open in Visual Studio right now.  I thought it should be easy, too...</p>\n<p>VB.NET has public Subs and private Subs (whatever that really means), and...</p>\n<p>I'm just in over my head, and I'm pulling you under with me, mrangel.</p>\n\n",
      "PostDate": "2017-10-21T09:54:53.823163Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "39533f9d-ebea-4d2d-a4cc-57672c6dd608",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I just found logfile.txt in my Downloads folder!\r\n\r\nI was watching the game's directory (for some reason).\r\n\r\nEDIT:  I was being sillly.  This was where I downloaded it while playing online.",
      "EditableFormat": "markdown",
      "HTML": "<p>I just found logfile.txt in my Downloads folder!</p>\n<p>I was watching the game's directory (for some reason).</p>\n<p>EDIT:  I was being sillly.  This was where I downloaded it while playing online.</p>\n\n",
      "PostDate": "2017-10-21T18:36:31.2444367Z",
      "LastEditDate": "2017-10-21T20:26:24.0006156Z",
      "link": null
    },
    {
      "PostId": "ab666337-3688-4f89-b888-df64a8b77cdf",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "### I got it working in the desktop version.\r\n\r\n**PlayerHTML.vb**\r\n```\r\n    Private Sub GoURL(data As String)\r\n        If data.StartsWith(\"http://\") Or data.StartsWith(\"https://\") Or data.StartsWith(\"mailto:\") Then\r\n            System.Diagnostics.Process.Start(data)\r\n        End If\r\n        'The following section was added by KV to open the game transcript in-browser to print or save.\r\n        If data.StartsWith(\"data:text\") Then\r\n            If File.Exists(\"C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\") = True Then\r\n                Process.Start(\"chrome.exe\", data)\r\n            ElseIf File.Exists(\"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\") = True Then\r\n                Process.Start(\"chrome.exe\", data)\r\n            ElseIf File.Exists(\"C:\\Program Files\\Mozilla Firefox\\firefox.exe\") = True Then\r\n                Process.Start(\"firefox.exe\", data)\r\n            End If\r\n        End If\r\n    End Sub\r\n```\r\n\r\n---\r\nThe JS functions added to the game:\r\n```\r\nclearScreen = function() {\r\n    $(\"#divOutput\").append(\"<hr />\");\r\n    $(\"#divOutput\").children().css(\"display\", \"none\");\r\n    $(\"#divOutput\").css(\"min-height\", 0);\r\n    createNewDiv(\"left\");\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $(\"html,body\").scrollTop(0);\r\n    }, 100);\r\n}\r\n\r\ndoTranscript = function() {\r\n  log = \"\";\r\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\r\n  addText(\"<a target='_blank' href='data:text/plain,\" + encodeURIComponent(log) + \"' download='transcript.txt' id='log_download'>Click here to save log file if your popup blocker stopped it!</a>\");\r\n  var href = \"data:text/plain,\" + encodeURIComponent(log) + \"\";\r\n  downloadlink = document.getElementById(\"log_download\");\r\n  downloadlink.addEventListener (\"click\", function (e) {e.stopPropagation();});\r\n  downloadlink.click();\r\n  ASLEvent(\"goScriptUrl\", href);\r\n}\r\n\r\n```\r\n\r\n---\r\n**goScriptUrl**\r\n```\r\n  <function name=\"goScriptUrl\" parameters=\"href\">\r\n    JS.goUrl (href)\r\n  </function>\r\n```\r\n\r\n\r\n---\r\nI can't find the default location of Microsoft Edge, or I would throw it in there for the Edge users.\r\n\r\nInternet Explorer won't open anything, so I've discounted it completely.\r\n\r\nI will add and Else that displays an Error message, too.\r\n\r\n---\r\nmrangel,\r\n\r\nYou rock!\r\n\r\nI wasn't trying to put you off of this last night (or this morning).  \r\n\r\nI always appreciate your involvement.  I just didn't want you to pull all of your hair out on my account, you know what I mean?\r\n\r\n---\r\nIs this a security risk?\r\n\r\nIf so, I won't be disheartened.\r\n\r\n---\r\nNow I'm **really** going to learn how to automatically save the log to text file.\r\n\r\n<span style=\"color:white\">Invisible text inserted to edit post</span>",
      "EditableFormat": "markdown",
      "HTML": "<h3>I got it working in the desktop version.</h3>\n<p><strong>PlayerHTML.vb</strong></p>\n<pre><code>    Private Sub GoURL(data As String)\n        If data.StartsWith(\"http://\") Or data.StartsWith(\"https://\") Or data.StartsWith(\"mailto:\") Then\n            System.Diagnostics.Process.Start(data)\n        End If\n        'The following section was added by KV to open the game transcript in-browser to print or save.\n        If data.StartsWith(\"data:text\") Then\n            If File.Exists(\"C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe\") = True Then\n                Process.Start(\"chrome.exe\", data)\n            ElseIf File.Exists(\"C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe\") = True Then\n                Process.Start(\"chrome.exe\", data)\n            ElseIf File.Exists(\"C:\\Program Files\\Mozilla Firefox\\firefox.exe\") = True Then\n                Process.Start(\"firefox.exe\", data)\n            End If\n        End If\n    End Sub\n</code></pre>\n<hr>\n<p>The JS functions added to the game:</p>\n<pre><code>clearScreen = function() {\n    $(\"#divOutput\").append(\"&lt;hr /&gt;\");\n    $(\"#divOutput\").children().css(\"display\", \"none\");\n    $(\"#divOutput\").css(\"min-height\", 0);\n    createNewDiv(\"left\");\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $(\"html,body\").scrollTop(0);\n    }, 100);\n}\n\ndoTranscript = function() {\n  log = \"\";\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\n  addText(\"&lt;a target='_blank' href='data:text/plain,\" + encodeURIComponent(log) + \"' download='transcript.txt' id='log_download'&gt;Click here to save log file if your popup blocker stopped it!&lt;/a&gt;\");\n  var href = \"data:text/plain,\" + encodeURIComponent(log) + \"\";\n  downloadlink = document.getElementById(\"log_download\");\n  downloadlink.addEventListener (\"click\", function (e) {e.stopPropagation();});\n  downloadlink.click();\n  ASLEvent(\"goScriptUrl\", href);\n}\n\n</code></pre>\n<hr>\n<p><strong>goScriptUrl</strong></p>\n<pre><code>  &lt;function name=\"goScriptUrl\" parameters=\"href\"&gt;\n    JS.goUrl (href)\n  &lt;/function&gt;\n</code></pre>\n<hr>\n<p>I can't find the default location of Microsoft Edge, or I would throw it in there for the Edge users.</p>\n<p>Internet Explorer won't open anything, so I've discounted it completely.</p>\n<p>I will add and Else that displays an Error message, too.</p>\n<hr>\n<p>mrangel,</p>\n<p>You rock!</p>\n<p>I wasn't trying to put you off of this last night (or this morning).</p>\n<p>I always appreciate your involvement.  I just didn't want you to pull all of your hair out on my account, you know what I mean?</p>\n<hr>\n<p>Is this a security risk?</p>\n<p>If so, I won't be disheartened.</p>\n<hr>\n<p>Now I'm <strong>really</strong> going to learn how to automatically save the log to text file.</p>\n<p><span style=\"color: white\">Invisible text inserted to edit post</span></p>\n\n",
      "PostDate": "2017-10-21T20:26:54.6120118Z",
      "LastEditDate": "2017-10-21T20:33:46.1619857Z",
      "link": null
    },
    {
      "PostId": "9c6425ec-00a4-41fb-82f7-db792bbd00d8",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This line of code is blowing my mind:\r\n\r\n```\r\n$(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\r\n```\r\n\r\n---\r\n#### Attempt:\r\n\r\n\r\n```$(\"#divOutput\").children().each(function (i) ```\r\n\r\nFor each child of the element named **divOutput**, do :\r\n\r\n\r\n---\r\n```{ log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";}```\r\n\r\n\r\nNOTE: We set the variable ```log``` as an empty string in the line above this one.\r\n\r\nSo ```log +=``` is the same thing as saying ```log = log +``` in Quest.\r\n\r\n---\r\nSo this is what we're adding to the string named **log**:\r\n\r\n```\r\n({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";})\r\n```\r\n\r\n---\r\n```HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName]```\r\n\r\nThis is the one that really gets me.\r\n\r\n---\r\n```{HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}```\r\n\r\nI'm thinking this does something with line breaks.  (I know.  I'm so very astute, right?)\r\n\r\nIt seems to be replacing \\<hr/> and \\<br/> with newlines.\r\n\r\n---\r\n```[this.tagName]```\r\n\r\nUh...  Is this finding what type of element **divOutput** is?\r\n\r\n\r\nDoes  ```HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName]``` find those tagNames (element types) in the string and replace them?\r\n\r\n---\r\n``` || ``` \r\n\r\nIs this piping those functions or an Or operand???\r\n\r\n---\r\n```$(this).text())+\"\\n\"```\r\n\r\nAdd the text from this child to the string variable named ```log``` with a line break following it.",
      "EditableFormat": "markdown",
      "HTML": "<p>This line of code is blowing my mind:</p>\n<pre><code>$(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\n</code></pre>\n<hr>\n<h4>Attempt:</h4>\n<p><code>$(\"#divOutput\").children().each(function (i)</code></p>\n<p>For each child of the element named <strong>divOutput</strong>, do :</p>\n<hr>\n<p><code>{ log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";}</code></p>\n<p>NOTE: We set the variable <code>log</code> as an empty string in the line above this one.</p>\n<p>So <code>log +=</code> is the same thing as saying <code>log = log +</code> in Quest.</p>\n<hr>\n<p>So this is what we're adding to the string named <strong>log</strong>:</p>\n<pre><code>({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";})\n</code></pre>\n<hr>\n<p><code>HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName]</code></p>\n<p>This is the one that really gets me.</p>\n<hr>\n<p><code>{HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}</code></p>\n<p>I'm thinking this does something with line breaks.  (I know.  I'm so very astute, right?)</p>\n<p>It seems to be replacing &lt;hr/&gt; and &lt;br/&gt; with newlines.</p>\n<hr>\n<p><code>[this.tagName]</code></p>\n<p>Uh...  Is this finding what type of element <strong>divOutput</strong> is?</p>\n<p>Does  <code>HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName]</code> find those tagNames (element types) in the string and replace them?</p>\n<hr>\n<p><code>||</code></p>\n<p>Is this piping those functions or an Or operand???</p>\n<hr>\n<p><code>$(this).text())+\"\\n\"</code></p>\n<p>Add the text from this child to the string variable named <code>log</code> with a line break following it.</p>\n\n",
      "PostDate": "2017-10-21T22:16:26.5277533Z",
      "LastEditDate": "2017-10-21T22:22:03.9693194Z",
      "link": null
    },
    {
      "PostId": "6eb52dc5-0e93-4db8-b617-3b79b977c83b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "In JS, the {} is a literal object. But we're actually using it like a dictionary in Quest; `{HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}` is a dictionary with the keys \"HR\" and \"BR\", and string values.\r\n\r\n`dictionary[somekey]` extracts the value for a specific key; so `{HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName]` is \"\\n* * *\\n\" if the current tag is an `<hr>`, a double newline if the tag is a `<br>`, and `undef` otherwise.\r\n\r\nWithin an `each()` function, `this` is the current element in the iteration, and `this.tagName` gets an uppercase version of the HTML tag name. So \"BR\", \"HR\", \"P\", \"DIV\" etc.\r\n\r\nSo for an `<hr>` or `<br>` element, it puts a couple of newlines or a line of asterisks in the text version.\r\n\r\n`||` is logical or. But JS and Perl support nice short-circuiting; `||` returns its first true argument if there is one. So you can use `a || b || c || d` to get the first defined variable from the list. So `{HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text()` gives you a couple of newlines or a line of stars; or the contents of `$(this).text()` if the thing to the left of the `||` is undefined.\r\n\r\n`$(this)` is like `this`, but allows jQuery methods rather than just the plain JS/DOM ones. So I can use `.text()` to get a plain text version of the contents of each `<p>` element.\r\n\r\nThat's the first thing that sprung to mind for converting a chunk of HTML into text.",
      "EditableFormat": "markdown",
      "HTML": "<p>In JS, the {} is a literal object. But we're actually using it like a dictionary in Quest; <code>{HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}</code> is a dictionary with the keys \"HR\" and \"BR\", and string values.</p>\n<p><code>dictionary[somekey]</code> extracts the value for a specific key; so <code>{HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName]</code> is \"\\n* * *\\n\" if the current tag is an <code>&lt;hr&gt;</code>, a double newline if the tag is a <code>&lt;br&gt;</code>, and <code>undef</code> otherwise.</p>\n<p>Within an <code>each()</code> function, <code>this</code> is the current element in the iteration, and <code>this.tagName</code> gets an uppercase version of the HTML tag name. So \"BR\", \"HR\", \"P\", \"DIV\" etc.</p>\n<p>So for an <code>&lt;hr&gt;</code> or <code>&lt;br&gt;</code> element, it puts a couple of newlines or a line of asterisks in the text version.</p>\n<p><code>||</code> is logical or. But JS and Perl support nice short-circuiting; <code>||</code> returns its first true argument if there is one. So you can use <code>a || b || c || d</code> to get the first defined variable from the list. So <code>{HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text()</code> gives you a couple of newlines or a line of stars; or the contents of <code>$(this).text()</code> if the thing to the left of the <code>||</code> is undefined.</p>\n<p><code>$(this)</code> is like <code>this</code>, but allows jQuery methods rather than just the plain JS/DOM ones. So I can use <code>.text()</code> to get a plain text version of the contents of each <code>&lt;p&gt;</code> element.</p>\n<p>That's the first thing that sprung to mind for converting a chunk of HTML into text.</p>\n\n",
      "PostDate": "2017-10-21T23:47:08.9028565Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fc315fce-42cb-46d4-936b-6fe54e54fdaa",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel,\r\n\r\nThank you very much for that!  I was close, but those asterisks were making me think of wild-cards.  Ha-ha!\r\n\r\n---\r\nIt doesn't pick up on the single line breaks, but I'm studying up on how you're doing this at the moment.  Between that and the explanation you just dropped, I bet that goes well quickly.\r\n\r\nThen, I only need to grab the images, too.  That probably entails adding IMG along with HR and BR, but using btoa() to convert the image to Base64 somehow first.\r\n\r\nNOTE:  I've actually been using ```data:text/html;base64``` in my script in an attempt to display the outputted text, in its original/intended font and format, with the image links intact.\r\n\r\nThe text file is a great way to do it, and it's exactly how Z-machine and Glulx games saves the transcript.  It's also easier to deal with than an HTML.\r\n\r\n...but Quest is so awesome...  \r\n\r\nI know I can get it to one-up Inform 7.\r\n\r\n\r\n---\r\nDigressions aside, I've switched back to ```text/plain``` for now.\r\n\r\n---\r\n\r\nThis is the script I'm using:\r\n\r\n```\r\ndoTranscript = function() {\r\n  log = \"\";\r\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\r\n  addText(\"<a target='_blank' href='data:text/plain;base64,\"+btoa(log) + \"' download='transcript.html' id='log_download'>Click here to view transcript file if your popup blocker stopped it!</a>\");\r\n  var href = \"data:text/plain;base64,\"+btoa(log) + \"\";\r\n  downloadlink = document.getElementById(\"log_download\");\r\n  downloadlink.addEventListener (\"click\", function (e) {e.stopPropagation();});\r\n  downloadlink.click();\r\n  ASLEvent(\"goScriptUrl\", href);\r\n}\r\n```\r\n\r\n---\r\nI went with Base64 because I think Mozilla is saying the other way has a lower maximum character limit.\r\n\r\n---\r\nThis is the output (which is identical, besides the font, no matter which method I use):\r\n\r\n<samp>\r\n\r\ntranscript\r\n\r\nA roomYou can go north.\r\n\r\n\\> go north\r\n\r\nA room2You can go south.\r\n\r\n\\> go southA roomYou can go north.\r\n\r\n\\> script\r\n\r\n</samp>\r\n\r\n---\r\nI even turned on the new line after each description in Quest's settings, but I get that same output.\r\n\r\n\r\nHere's an actual screenshot:\r\n\r\n[![image](https://user-images.githubusercontent.com/30656341/31857098-419b19ac-b69a-11e7-8c68-812766a62fea.png)](https://user-images.githubusercontent.com/30656341/31857098-419b19ac-b69a-11e7-8c68-812766a62fea.png)\r\n\r\n---\r\n### PS\r\n\r\nWant to see what Quest looks like when running under Gtk?\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/31857187-4b3027d4-b69d-11e7-8ec2-d017e2b75597.png)",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel,</p>\n<p>Thank you very much for that!  I was close, but those asterisks were making me think of wild-cards.  Ha-ha!</p>\n<hr>\n<p>It doesn't pick up on the single line breaks, but I'm studying up on how you're doing this at the moment.  Between that and the explanation you just dropped, I bet that goes well quickly.</p>\n<p>Then, I only need to grab the images, too.  That probably entails adding IMG along with HR and BR, but using btoa() to convert the image to Base64 somehow first.</p>\n<p>NOTE:  I've actually been using <code>data:text/html;base64</code> in my script in an attempt to display the outputted text, in its original/intended font and format, with the image links intact.</p>\n<p>The text file is a great way to do it, and it's exactly how Z-machine and Glulx games saves the transcript.  It's also easier to deal with than an HTML.</p>\n<p>...but Quest is so awesome...</p>\n<p>I know I can get it to one-up Inform 7.</p>\n<hr>\n<p>Digressions aside, I've switched back to <code>text/plain</code> for now.</p>\n<hr>\n<p>This is the script I'm using:</p>\n<pre><code>doTranscript = function() {\n  log = \"\";\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\n  addText(\"&lt;a target='_blank' href='data:text/plain;base64,\"+btoa(log) + \"' download='transcript.html' id='log_download'&gt;Click here to view transcript file if your popup blocker stopped it!&lt;/a&gt;\");\n  var href = \"data:text/plain;base64,\"+btoa(log) + \"\";\n  downloadlink = document.getElementById(\"log_download\");\n  downloadlink.addEventListener (\"click\", function (e) {e.stopPropagation();});\n  downloadlink.click();\n  ASLEvent(\"goScriptUrl\", href);\n}\n</code></pre>\n<hr>\n<p>I went with Base64 because I think Mozilla is saying the other way has a lower maximum character limit.</p>\n<hr>\n<p>This is the output (which is identical, besides the font, no matter which method I use):</p>\n<samp>\n<p>transcript</p>\n<p>A roomYou can go north.</p>\n<p>&gt; go north</p>\n<p>A room2You can go south.</p>\n<p>&gt; go southA roomYou can go north.</p>\n<p>&gt; script</p>\n</samp>\n<hr>\n<p>I even turned on the new line after each description in Quest's settings, but I get that same output.</p>\n<p>Here's an actual screenshot:</p>\n<p><a href=\"https://user-images.githubusercontent.com/30656341/31857098-419b19ac-b69a-11e7-8c68-812766a62fea.png\"><img src=\"https://user-images.githubusercontent.com/30656341/31857098-419b19ac-b69a-11e7-8c68-812766a62fea.png\" alt=\"image\"></a></p>\n<hr>\n<h3>PS</h3>\n<p>Want to see what Quest looks like when running under Gtk?</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/31857187-4b3027d4-b69d-11e7-8ec2-d017e2b75597.png\" alt=\"image\"></p>\n\n",
      "PostDate": "2017-10-22T02:18:14.1540195Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "16d4193e-5b7c-42ae-9665-4b3ec88ad1cc",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Check it out:\r\n\r\nhttp://textadventures.co.uk/games/view/nft9fbscdkw43hddd0yvra/transcript\r\n\r\n---\r\nYou can't do it in the desktop editor.  It only works online.\r\n\r\n(Pay no mind to the exit 'list' in the location bar.  I forgot to align that bit on the right.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Check it out:</p>\n<p>http://textadventures.co.uk/games/view/nft9fbscdkw43hddd0yvra/transcript</p>\n<hr>\n<p>You can't do it in the desktop editor.  It only works online.</p>\n<p>(Pay no mind to the exit 'list' in the location bar.  I forgot to align that bit on the right.)</p>\n\n",
      "PostDate": "2017-10-22T06:08:34.7956972Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1ede130c-d43d-4382-9d90-806a5e2a30b8",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK, it looks like it works neatly with my game, but that's because I already messed about with the HTML a bit.\r\n\r\nAt this point it's seeing the `<div>`s and taking the text content out of them, not examining the different elements within them. Not sure the best way to deal with that. Maybe change `$(\"#divOutput\")` to `$(\"#divOutput > div\")` in that line, or `children()` to `find(\"span,hr,br\")` to explicitly search for those elements.",
      "EditableFormat": "markdown",
      "HTML": "<p>OK, it looks like it works neatly with my game, but that's because I already messed about with the HTML a bit.</p>\n<p>At this point it's seeing the <code>&lt;div&gt;</code>s and taking the text content out of them, not examining the different elements within them. Not sure the best way to deal with that. Maybe change <code>$(\"#divOutput\")</code> to <code>$(\"#divOutput &gt; div\")</code> in that line, or <code>children()</code> to <code>find(\"span,hr,br\")</code> to explicitly search for those elements.</p>\n\n",
      "PostDate": "2017-10-22T08:23:48.538333Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1a6081a2-ecaa-4050-8c50-9e30ad0b7977",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Cool.\r\n\r\nI'll try that.  Thanks!\r\n\r\n---\r\nCheck out the game I linked to above, if you get bored.  (Tell me if yours looks better.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Cool.</p>\n<p>I'll try that.  Thanks!</p>\n<hr>\n<p>Check out the game I linked to above, if you get bored.  (Tell me if yours looks better.)</p>\n\n",
      "PostDate": "2017-10-22T08:33:06.0231359Z",
      "LastEditDate": "2017-10-22T08:35:45.5119893Z",
      "link": null
    },
    {
      "PostId": "dec4ad7d-c18b-4c0e-9fdf-91fb554cb1d9",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Or if you want HTML, you could use `log = $(\"#divOutput\").html();` :p",
      "EditableFormat": "markdown",
      "HTML": "<p>Or if you want HTML, you could use <code>log = $(\"#divOutput\").html();</code> :p</p>\n\n",
      "PostDate": "2017-10-22T08:39:19.3798158Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3840a71e-86ae-45d4-94c2-1063c480de2a",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sweet!\r\n\r\nI just need to change the CSS to display:block (or just delete that bit).  I bet I can figure that out!",
      "EditableFormat": "markdown",
      "HTML": "<p>Sweet!</p>\n<p>I just need to change the CSS to display:block (or just delete that bit).  I bet I can figure that out!</p>\n\n",
      "PostDate": "2017-10-22T09:00:21.4469124Z",
      "LastEditDate": "2017-10-22T09:18:42.9185179Z",
      "link": null
    },
    {
      "PostId": "cc23b00a-1bad-4592-b575-6c9ce2c5db2c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is what I've got going on at the moment:\r\n\r\n```\r\nclearScreen = function() {\r\n    $(\"#divOutput\").append(\"<hr />\");\r\n    $(\"#divOutput\").children().css(\"display\", \"none\");\r\n    $(\"#divOutput\").css(\"min-height\", 0);\r\n    createNewDiv(\"left\");\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $(\"html,body\").scrollTop(0);\r\n    }, 100);\r\n}\r\n\r\ndoTranscript = function() {\r\n  var log = $(\"#divOutput\").html();\r\n  var href = \"data:text/html;base64,\"+btoa(log) + \"\";\r\n  if (webPlayer){\r\n    addText(\"<a target='_blank' href='data:text/html;base64,\"+btoa(log) + \"' download='transcript.html' id='log_download'>Click here to view transcript file if your popup blocker stopped it!</a>\");\r\n    downloadlink = document.getElementById(\"log_download\");\r\n    downloadlink.addEventListener (\"click\", function (e) {e.stopPropagation();});\r\n    downloadlink.click();\r\n    ASLEvent(\"goScriptUrl\", href);\r\n  } else {\r\n    addText(\"You are playing offline.  Copy and paste this url in your browser: <br/>\"+href);\r\n  }\r\n}\r\n```\r\n\r\n---\r\nAll I need to do is undo that second line in the ```clearScreen``` function before I pass``` log``` to...\r\n\r\nHey... I may have just figured it out...",
      "EditableFormat": "markdown",
      "HTML": "<p>This is what I've got going on at the moment:</p>\n<pre><code>clearScreen = function() {\n    $(\"#divOutput\").append(\"&lt;hr /&gt;\");\n    $(\"#divOutput\").children().css(\"display\", \"none\");\n    $(\"#divOutput\").css(\"min-height\", 0);\n    createNewDiv(\"left\");\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $(\"html,body\").scrollTop(0);\n    }, 100);\n}\n\ndoTranscript = function() {\n  var log = $(\"#divOutput\").html();\n  var href = \"data:text/html;base64,\"+btoa(log) + \"\";\n  if (webPlayer){\n    addText(\"&lt;a target='_blank' href='data:text/html;base64,\"+btoa(log) + \"' download='transcript.html' id='log_download'&gt;Click here to view transcript file if your popup blocker stopped it!&lt;/a&gt;\");\n    downloadlink = document.getElementById(\"log_download\");\n    downloadlink.addEventListener (\"click\", function (e) {e.stopPropagation();});\n    downloadlink.click();\n    ASLEvent(\"goScriptUrl\", href);\n  } else {\n    addText(\"You are playing offline.  Copy and paste this url in your browser: &lt;br/&gt;\"+href);\n  }\n}\n</code></pre>\n<hr>\n<p>All I need to do is undo that second line in the <code>clearScreen</code> function before I pass<code>log</code> to...</p>\n<p>Hey... I may have just figured it out...</p>\n\n",
      "PostDate": "2017-10-22T09:33:52.855727Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a843426f-be96-4672-9fed-488c3f3a85f5",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\n$(\"#divOutput\").children().css(\"display\", \"\").html();\r\n  var log = $(\"#divOutput\").html()\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/31860651-ec7763c4-b6e2-11e7-9ce2-008907d441d0.png)\r\n\r\n---\r\nHehehe...\r\n\r\nUh...  I can bring 'em back...\r\n\r\n...but I must now find a way to replace ```display:none``` with ```displayReplaced``` then run the script, then change them back again.  I think that would happen so fast, the player wouldn't see it.\r\n\r\nNOTE:  I put the \\<hr/> there every time the screen is cleared because it seemed like a nice thing to have there while perusing a transcript...\r\n\r\nI'm thinking the answer is in this post: http://textadventures.co.uk/forum/quest/topic/5fd2-liccuidcbbf_eiefa/log-im-trying-to-figure-out-how-to-save-the-content-to-a-file#6eb52dc5-0e93-4db8-b617-3b79b977c83b\r\n\r\n(I'm studying now.)\r\n\r\n---\r\nI changed the first line of the ```clearScreen``` function, giving the \\<hr/> and id.\r\n\r\n```\r\nclearScreen = function() {\r\n    $(\"#divOutput\").append(\"<hr id=\\\"clearedAbove\\\" />\");\r\n```\r\n\r\n---\r\nI have a gut feeling that may come in handy.  (Either that or it's breakfast time.)",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>$(\"#divOutput\").children().css(\"display\", \"\").html();\n  var log = $(\"#divOutput\").html()\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/31860651-ec7763c4-b6e2-11e7-9ce2-008907d441d0.png\" alt=\"image\"></p>\n<hr>\n<p>Hehehe...</p>\n<p>Uh...  I can bring 'em back...</p>\n<p>...but I must now find a way to replace <code>display:none</code> with <code>displayReplaced</code> then run the script, then change them back again.  I think that would happen so fast, the player wouldn't see it.</p>\n<p>NOTE:  I put the &lt;hr/&gt; there every time the screen is cleared because it seemed like a nice thing to have there while perusing a transcript...</p>\n<p>I'm thinking the answer is in this post: http://textadventures.co.uk/forum/quest/topic/5fd2-liccuidcbbf_eiefa/log-im-trying-to-figure-out-how-to-save-the-content-to-a-file#6eb52dc5-0e93-4db8-b617-3b79b977c83b</p>\n<p>(I'm studying now.)</p>\n<hr>\n<p>I changed the first line of the <code>clearScreen</code> function, giving the &lt;hr/&gt; and id.</p>\n<pre><code>clearScreen = function() {\n    $(\"#divOutput\").append(\"&lt;hr id=\\\"clearedAbove\\\" /&gt;\");\n</code></pre>\n<hr>\n<p>I have a gut feeling that may come in handy.  (Either that or it's breakfast time.)</p>\n\n",
      "PostDate": "2017-10-22T09:44:00.5591514Z",
      "LastEditDate": "2017-10-22T10:34:06.5763926Z",
      "link": null
    },
    {
      "PostId": "91a448a1-fa02-4b43-8b70-a0f25833b327",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "off the top of my head...\r\n\r\n```\r\n$('<div id=\"logCopy\" />').html($(\"#divOutput\").html()).appendTo(\"#outputData\");\r\n$(\"#logCopy > div\").css(\"display\", \"block\");\r\nlog = $(\"#logCopy\").html();\r\n$(\"#logCopy\").remove();\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>off the top of my head...</p>\n<pre><code>$('&lt;div id=\"logCopy\" /&gt;').html($(\"#divOutput\").html()).appendTo(\"#outputData\");\n$(\"#logCopy &gt; div\").css(\"display\", \"block\");\nlog = $(\"#logCopy\").html();\n$(\"#logCopy\").remove();\n</code></pre>\n\n",
      "PostDate": "2017-10-22T14:19:57.9682201Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5089f98d-439c-4e19-92b7-ecb7bad694aa",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh, and regarding:\r\n\r\n> `$(\"#divOutput\").append(\"<hr id=\\\"clearedAbove\\\" />\");`\r\n\r\nYou shouldn't have multiple elements with the same ID. jQuery behaves fairly well with it, but how the browser handles it isn't exactly reliable.\r\nIn this case, you'd be better using `<hr class=\"clearedAbove\" />`; which you can find all instances of with $(\".clearedAbove\").\r\n\r\nIf you were going down that path, you could actually change `$(\"#divOutput\").children().css(\"display\", \"none\");` in clearScreen to `$(\"#divOutput\").children().addClass(\"clearedScreen\");` and then put `.clearedScreen { display: none; }` in the document CSS to hide all elements with that class. Then don't include that line in the CSS from the saved transcript; so they all appear again.\r\n\r\n(I assume you can add CSS to the document? I haven't tried it)",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh, and regarding:</p>\n<blockquote>\n<p><code>$(\"#divOutput\").append(\"&lt;hr id=\\\"clearedAbove\\\" /&gt;\");</code></p>\n</blockquote>\n<p>You shouldn't have multiple elements with the same ID. jQuery behaves fairly well with it, but how the browser handles it isn't exactly reliable.<br>\nIn this case, you'd be better using <code>&lt;hr class=\"clearedAbove\" /&gt;</code>; which you can find all instances of with $(\".clearedAbove\").</p>\n<p>If you were going down that path, you could actually change <code>$(\"#divOutput\").children().css(\"display\", \"none\");</code> in clearScreen to <code>$(\"#divOutput\").children().addClass(\"clearedScreen\");</code> and then put <code>.clearedScreen { display: none; }</code> in the document CSS to hide all elements with that class. Then don't include that line in the CSS from the saved transcript; so they all appear again.</p>\n<p>(I assume you can add CSS to the document? I haven't tried it)</p>\n\n",
      "PostDate": "2017-10-22T22:01:59.225193Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c7501885-2640-44d8-a324-70533ee3ef9c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I just got back to my PC.\r\n\r\n>You shouldn't have multiple elements with the same ID   ....  you'd be better using ```<hr class=\"clearedAbove\" />```\r\n\r\nThat makes sense.\r\n\r\n>change ```$(\"#divOutput\").children().css(\"display\", \"none\");``` in ```clearScreen``` to ```$(\"#divOutput\").children().addClass(\"clearedScreen\");``` and then put ```.clearedScreen { display: none; }``` in the document CSS to hide all elements with that class.   Then don't include that line in the CSS from the saved transcript; so they all appear again.\r\n\r\nmrangel, you're one clever son-of-a-gun!\r\n\r\n>I assume you can add CSS to the document?\r\n\r\nYes, sir.  The fastest and easiest way I've found is ```JS.addText(\"<style>.clearedScreen { display: none; }</style>\")```.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I just got back to my PC.</p>\n<blockquote>\n<p>You shouldn't have multiple elements with the same ID   ....  you'd be better using <code>&lt;hr class=\"clearedAbove\" /&gt;</code></p>\n</blockquote>\n<p>That makes sense.</p>\n<blockquote>\n<p>change <code>$(\"#divOutput\").children().css(\"display\", \"none\");</code> in <code>clearScreen</code> to <code>$(\"#divOutput\").children().addClass(\"clearedScreen\");</code> and then put <code>.clearedScreen { display: none; }</code> in the document CSS to hide all elements with that class.   Then don't include that line in the CSS from the saved transcript; so they all appear again.</p>\n</blockquote>\n<p>mrangel, you're one clever son-of-a-gun!</p>\n<blockquote>\n<p>I assume you can add CSS to the document?</p>\n</blockquote>\n<p>Yes, sir.  The fastest and easiest way I've found is <code>JS.addText(\"&lt;style&gt;.clearedScreen { display: none; }&lt;/style&gt;\")</code>.</p>\n\n",
      "PostDate": "2017-10-22T22:10:24.0151421Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4920dc9d-91d3-4aca-b487-a0f1ce929c60",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel,\r\n\r\nYou should definitely:\r\n\r\n- Load a game with this feature added in the web player.\r\n- Save the game.\r\n- Quit .\r\n- Load the save.\r\n- Note that ```#divOutput``` is empty (but ```divOutputAlign``` is _not_ messed up).\r\n\r\nSo, you fixed the issue with ```ShowMenu```, along with numerous other things (and we all thank you very, very, very much!), but the web player seems to empty out ```#divOutput``` when loading a save no matter what.  **(EDIT: Found a fix for this now.)**\r\n\r\nThis may not be such a bad thing, overall.  Pertex recently pointed out that the hidden elements may negatively effect the browser during the automatic scrolling, and I had wondered the same thing.\r\n\r\n---\r\nNOTE:  I'm still using this in my personal versions of the games I play, so this wasn't all for naught.\r\n\r\n---\r\n...and, I'm back to trying to figure out how to tweak the source code.\r\n\r\nI'm certain I can eventually get the log to create a .txt file and append each entry to it.\r\n\r\nThe same can be done with a transcript command, I'm sure.",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel,</p>\n<p>You should definitely:</p>\n<ul>\n<li>Load a game with this feature added in the web player.</li>\n<li>Save the game.</li>\n<li>Quit .</li>\n<li>Load the save.</li>\n<li>Note that <code>#divOutput</code> is empty (but <code>divOutputAlign</code> is <em>not</em> messed up).</li>\n</ul>\n<p>So, you fixed the issue with <code>ShowMenu</code>, along with numerous other things (and we all thank you very, very, very much!), but the web player seems to empty out <code>#divOutput</code> when loading a save no matter what.  <strong>(EDIT: Found a fix for this now.)</strong></p>\n<p>This may not be such a bad thing, overall.  Pertex recently pointed out that the hidden elements may negatively effect the browser during the automatic scrolling, and I had wondered the same thing.</p>\n<hr>\n<p>NOTE:  I'm still using this in my personal versions of the games I play, so this wasn't all for naught.</p>\n<hr>\n<p>...and, I'm back to trying to figure out how to tweak the source code.</p>\n<p>I'm certain I can eventually get the log to create a .txt file and append each entry to it.</p>\n<p>The same can be done with a transcript command, I'm sure.</p>\n\n",
      "PostDate": "2017-10-23T10:57:36.6550324Z",
      "LastEditDate": "2017-10-24T10:11:00.1952708Z",
      "link": null
    },
    {
      "PostId": "c78f22e4-220a-4d70-a45c-424755d7a331",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> the web player seems to empty out #divOutput when loading a save no matter what\r\n\r\nI still haven't seen this behaviour. Is it just being weird for me?",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>the web player seems to empty out #divOutput when loading a save no matter what</p>\n</blockquote>\n<p>I still haven't seen this behaviour. Is it just being weird for me?</p>\n\n",
      "PostDate": "2017-10-23T13:46:28.0020579Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2926df23-e425-477a-91f6-8fba9ae8ffc2",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Really?\r\n\r\nWhen you load a saved game, it doesn't look like this:\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/31892689-4b66a9a2-b7cf-11e7-9dcc-7be1288b7520.png)\r\n\r\n---\r\n\r\nThe screen never clears during play or anything, either.\r\n\r\n---\r\nEvery game I save and load online does this to me.  In Chrome and Firefox.  Even old games.\r\n\r\n---\r\n\r\nHere's my example game, which I created online, just to make sure it isn't something with my desktop editor:\r\n\r\nhttp://textadventures.co.uk/games/view/-7zus1ucqegvotxqgtgzqa/loaded-save-tester\r\n\r\n```xml\r\n<!--Saved by Quest 5.7.6404.16853-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Loaded Save Tester\">\r\n    <gameid>68e8daeb-f2c6-4560-a6c2-b886785f742e</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <menufont>Georgia, serif</menufont>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description><![CDATA[When I load a saved game, I can't see this!<br/>]]></description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n</asl>\r\n```\r\n\r\n---\r\nMore on the subject:\r\nhttp://textadventures.co.uk/forum/quest/topic/qdwn7teux0im1uaryij1jw/while-a-game-is-being-tested#560319ca-55da-4ca0-9e50-23cefab41409",
      "EditableFormat": "markdown",
      "HTML": "<p>Really?</p>\n<p>When you load a saved game, it doesn't look like this:</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/31892689-4b66a9a2-b7cf-11e7-9dcc-7be1288b7520.png\" alt=\"image\"></p>\n<hr>\n<p>The screen never clears during play or anything, either.</p>\n<hr>\n<p>Every game I save and load online does this to me.  In Chrome and Firefox.  Even old games.</p>\n<hr>\n<p>Here's my example game, which I created online, just to make sure it isn't something with my desktop editor:</p>\n<p>http://textadventures.co.uk/games/view/-7zus1ucqegvotxqgtgzqa/loaded-save-tester</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.16853--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Loaded Save Tester\"&gt;\n    &lt;gameid&gt;68e8daeb-f2c6-4560-a6c2-b886785f742e&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;menufont&gt;Georgia, serif&lt;/menufont&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;&lt;![CDATA[When I load a saved game, I can't see this!&lt;br/&gt;]]&gt;&lt;/description&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>More on the subject:<br>\nhttp://textadventures.co.uk/forum/quest/topic/qdwn7teux0im1uaryij1jw/while-a-game-is-being-tested#560319ca-55da-4ca0-9e50-23cefab41409</p>\n\n",
      "PostDate": "2017-10-23T13:52:16.4867331Z",
      "LastEditDate": "2017-10-23T14:02:14.1178541Z",
      "link": null
    },
    {
      "PostId": "b3fa6808-6a88-4f51-8382-ad05683fe5f7",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK ... that game gives me a blank screen.\r\n\r\nOn my \"disposable game\" I see the screen contents that were there before saving (including the \"game saved\" messages). When playing other people's games (most notable on the one that brought me here in the first place) divOutput seems to restore its contents too.",
      "EditableFormat": "markdown",
      "HTML": "<p>OK ... that game gives me a blank screen.</p>\n<p>On my \"disposable game\" I see the screen contents that were there before saving (including the \"game saved\" messages). When playing other people's games (most notable on the one that brought me here in the first place) divOutput seems to restore its contents too.</p>\n\n",
      "PostDate": "2017-10-23T14:30:50.9087395Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f91f54ac-f3e9-480a-b98b-83db552b4b4e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, nope. It's just the way I'm using it.\r\n\r\nTyping \"SAVE\" doesn't save the contents of divOutput; clicking the \"save\" button in the corner of the screen does.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, nope. It's just the way I'm using it.</p>\n<p>Typing \"SAVE\" doesn't save the contents of divOutput; clicking the \"save\" button in the corner of the screen does.</p>\n\n",
      "PostDate": "2017-10-23T14:33:52.9676037Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "49b65996-764c-4325-9779-10e4150362bc",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">Typing \"SAVE\" doesn't save the contents of divOutput; clicking the \"save\" button in the corner of the screen does.\r\n\r\nSo I see...",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Typing \"SAVE\" doesn't save the contents of divOutput; clicking the \"save\" button in the corner of the screen does.</p>\n</blockquote>\n<p>So I see...</p>\n\n",
      "PostDate": "2017-10-23T14:48:38.2466312Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5f294c6b-3467-46fa-8760-ec2640371cfc",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "#### **playercore.js**\r\n\r\n```\r\n    $(\"#cmdSave\").click(function () {\r\n        saveGame();\r\n        afterSave();\r\n    });\r\n```\r\n\r\n---\r\nSo I need to add this to my SAVE command:\r\n```\r\nif (game.online) {\r\n  JS.saveGame()\r\n  JS.afterSave()\r\n}",
      "EditableFormat": "markdown",
      "HTML": "<h4><strong>playercore.js</strong></h4>\n<pre><code>    $(\"#cmdSave\").click(function () {\n        saveGame();\n        afterSave();\n    });\n</code></pre>\n<hr>\n<p>So I need to add this to my SAVE command:</p>\n<pre><code>if (game.online) {\n  JS.saveGame()\n  JS.afterSave()\n}\n</code></pre>\n\n",
      "PostDate": "2017-10-23T14:53:01.0702732Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ef8112f7-d5dc-43fa-8b8f-8ec1f3747bd1",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Try it now, mrangel.  I updated it.  Now you can enter SAVE when online, and it calls the same thing as when you click.\r\n\r\nhttp://textadventures.co.uk/games/view/-7zus1ucqegvotxqgtgzqa/loaded-save-tester\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.16853-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Loaded Save Tester\">\r\n    <gameid>68e8daeb-f2c6-4560-a6c2-b886785f742e</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <menufont>Georgia, serif</menufont>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description><![CDATA[When I load a saved game, I can't see this!<br/>]]></description>\r\n    <enter type=\"script\">\r\n      webCheck\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <command name=\"kv_webcheckCmd\">\r\n    <pattern>online;webcheck</pattern>\r\n    <script>\r\n      webCheck\r\n    </script>\r\n  </command>\r\n  <command name=\"kv_saveCmd\">\r\n    <pattern>save</pattern>\r\n    <script><![CDATA[\r\n      JS.eval (\"addText (Date()+\\\"&nbsp;\\\") \")\r\n      if (not game.online) {\r\n        request (RequestSave, \"\")\r\n      }\r\n      else {\r\n        JS.saveGame ()\r\n        JS.afterSave ()\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <function name=\"webCheck\"><![CDATA[\r\n    JS.eval (\"addText(\\\"<br/>webCheck initialized<br/>\\\");var bool = false; if(webPlayer) {bool = true;ASLEvent('setOnline', bool);}else { bool = false; ASLEvent('setOnline', bool);}addText(\\\"<br/>webCheck complete<br/>\\\");\")\r\n  ]]></function>\r\n  <function name=\"setOnline\" parameters=\"bool\">\r\n    switch (bool) {\r\n      case (\"true\") {\r\n        msg (\"You are playing online!\")\r\n        game.online = true\r\n      }\r\n      case (\"false\") {\r\n        msg (\"You are playing in the desktop version.\")\r\n        game.online = false\r\n      }\r\n      default {\r\n        error (\"Error checking for online player.\")\r\n      }\r\n    }\r\n  </function>\r\n</asl>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Try it now, mrangel.  I updated it.  Now you can enter SAVE when online, and it calls the same thing as when you click.</p>\n<p>http://textadventures.co.uk/games/view/-7zus1ucqegvotxqgtgzqa/loaded-save-tester</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.16853--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Loaded Save Tester\"&gt;\n    &lt;gameid&gt;68e8daeb-f2c6-4560-a6c2-b886785f742e&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;menufont&gt;Georgia, serif&lt;/menufont&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;&lt;![CDATA[When I load a saved game, I can't see this!&lt;br/&gt;]]&gt;&lt;/description&gt;\n    &lt;enter type=\"script\"&gt;\n      webCheck\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command name=\"kv_webcheckCmd\"&gt;\n    &lt;pattern&gt;online;webcheck&lt;/pattern&gt;\n    &lt;script&gt;\n      webCheck\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"kv_saveCmd\"&gt;\n    &lt;pattern&gt;save&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      JS.eval (\"addText (Date()+\\\"&amp;nbsp;\\\") \")\n      if (not game.online) {\n        request (RequestSave, \"\")\n      }\n      else {\n        JS.saveGame ()\n        JS.afterSave ()\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=\"webCheck\"&gt;&lt;![CDATA[\n    JS.eval (\"addText(\\\"&lt;br/&gt;webCheck initialized&lt;br/&gt;\\\");var bool = false; if(webPlayer) {bool = true;ASLEvent('setOnline', bool);}else { bool = false; ASLEvent('setOnline', bool);}addText(\\\"&lt;br/&gt;webCheck complete&lt;br/&gt;\\\");\")\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"setOnline\" parameters=\"bool\"&gt;\n    switch (bool) {\n      case (\"true\") {\n        msg (\"You are playing online!\")\n        game.online = true\n      }\n      case (\"false\") {\n        msg (\"You are playing in the desktop version.\")\n        game.online = false\n      }\n      default {\n        error (\"Error checking for online player.\")\n      }\n    }\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2017-10-23T15:22:07.9014534Z",
      "LastEditDate": "2017-10-23T16:32:18.6856168Z",
      "link": null
    },
    {
      "PostId": "b18f8216-b873-43ea-a8f3-0f98bd89be79",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Seems to work as intended :)\r\n\r\nI'm wondering why RequestSave doesn't do that.",
      "EditableFormat": "markdown",
      "HTML": "<p>Seems to work as intended :)</p>\n<p>I'm wondering why RequestSave doesn't do that.</p>\n\n",
      "PostDate": "2017-10-23T15:34:20.5760852Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "23a03816-2a60-4255-b1e2-8011716e36c5",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I had ```JS.doSave()``` in there for the desktop version at first, but I edited that.  Now it's ```request (RequestSave, \"\")``` again.\r\n\r\nPixie is phasing out ```request``` everywhere possible, and the ```doSave``` JS function is in the latest source code, but not the current release.  So, I thought it only courteous to everyone else but us to change it to something that works universally.\r\n\r\n```saveGame``` and ```afterSave``` are doing some HTML posting stuff to the server (which I haven't learned about yet).",
      "EditableFormat": "markdown",
      "HTML": "<p>I had <code>JS.doSave()</code> in there for the desktop version at first, but I edited that.  Now it's <code>request (RequestSave, \"\")</code> again.</p>\n<p>Pixie is phasing out <code>request</code> everywhere possible, and the <code>doSave</code> JS function is in the latest source code, but not the current release.  So, I thought it only courteous to everyone else but us to change it to something that works universally.</p>\n<p><code>saveGame</code> and <code>afterSave</code> are doing some HTML posting stuff to the server (which I haven't learned about yet).</p>\n\n",
      "PostDate": "2017-10-23T15:43:50.027878Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b8d52868-7e3e-48e2-8f09-4c01e25c7af1",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hrmm...\r\n\r\nCould I nix the functions, and just do:\r\n\r\n```\r\nJS.saveGame ()\r\nJS.afterSave ()\r\n\r\nrequest (RequestSave, \"\")\r\n```\r\n\r\n...no, it should be:\r\n\r\n```\r\n//Offline first:\r\nrequest (RequestSave, \"\")\r\n\r\n//Online cleanup\r\nJS.saveGame ()\r\nJS.afterSave ()\r\n```\r\n\r\n---\r\nWhat could happen if I try to post the online save from the desktop editor?\r\n\r\nI'm scared to test it!\r\n\r\nUPDATE:  It didn't *seem* to do anything abnormal when I saved in the desktop with this command alone.\r\n\r\n<samp>\r\n\r\n<center><h1>Loaded Save Tester</h1></center>\r\n\r\nYou are in a room.\r\nWhen I load a saved game, I can't see this!\r\n\r\n\r\nwebCheck initialized\r\n\r\nwebCheck complete\r\nYou are playing in the desktop version.\r\n\r\n\\> save\r\n\r\nSaved: C:\\Users\\kMFNv\\Documents\\tester.quest-save\r\n\r\n</samp>\r\n\r\n\r\n---\r\n\r\nIt worked online, too, but it printed my save command twice:\r\n\r\n<samp>\r\n\r\n<center><h1>Loaded Save Tester</h1></center>\r\n\r\nYou are in a room.\r\nWhen I load a saved game, I can't see this!\r\n\r\n\r\nwebCheck initialized\r\n\r\nwebCheck complete\r\nYou are playing online!\r\n\r\n\\> save\r\n\r\n\\> save\r\n\r\n</samp>",
      "EditableFormat": "markdown",
      "HTML": "<p>Hrmm...</p>\n<p>Could I nix the functions, and just do:</p>\n<pre><code>JS.saveGame ()\nJS.afterSave ()\n\nrequest (RequestSave, \"\")\n</code></pre>\n<p>...no, it should be:</p>\n<pre><code>//Offline first:\nrequest (RequestSave, \"\")\n\n//Online cleanup\nJS.saveGame ()\nJS.afterSave ()\n</code></pre>\n<hr>\n<p>What could happen if I try to post the online save from the desktop editor?</p>\n<p>I'm scared to test it!</p>\n<p>UPDATE:  It didn't <em>seem</em> to do anything abnormal when I saved in the desktop with this command alone.</p>\n<samp>\n<center><h1>Loaded Save Tester</h1></center>\n<p>You are in a room.<br>\nWhen I load a saved game, I can't see this!</p>\n<p>webCheck initialized</p>\n<p>webCheck complete<br>\nYou are playing in the desktop version.</p>\n<p>&gt; save</p>\n<p>Saved: C:\\Users\\kMFNv\\Documents\\tester.quest-save</p>\n</samp>\n<hr>\n<p>It worked online, too, but it printed my save command twice:</p>\n<samp>\n<center><h1>Loaded Save Tester</h1></center>\n<p>You are in a room.<br>\nWhen I load a saved game, I can't see this!</p>\n<p>webCheck initialized</p>\n<p>webCheck complete<br>\nYou are playing online!</p>\n<p>&gt; save</p>\n<p>&gt; save</p>\n</samp>\n\n",
      "PostDate": "2017-10-23T15:45:58.3420633Z",
      "LastEditDate": "2017-10-23T15:58:06.5558508Z",
      "link": null
    },
    {
      "PostId": "6ee90d71-036d-4f5c-b831-6b1c4931ec95",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">When playing other people's games (most notable on the one that brought me here in the first place)\r\n\r\nWhich game might that be?",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>When playing other people's games (most notable on the one that brought me here in the first place)</p>\n</blockquote>\n<p>Which game might that be?</p>\n\n",
      "PostDate": "2017-10-23T16:03:25.6391961Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "da9a38e4-e85d-40b4-bc34-3f07bd67fc72",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It's a fetish game; I happened to load an old save that had a picture in the log, and quickly looked to make sure nobody else can see my screen. Then realised that demonstrates that saving online does work.",
      "EditableFormat": "markdown",
      "HTML": "<p>It's a fetish game; I happened to load an old save that had a picture in the log, and quickly looked to make sure nobody else can see my screen. Then realised that demonstrates that saving online does work.</p>\n\n",
      "PostDate": "2017-10-23T16:34:21.1060349Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "098d9e4a-2d50-4e9e-8d15-f5b130523717",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ha!\r\n\r\nThat's funny stuff!\r\n\r\n---\r\nYou wouldn't happen to know a way to set ```game.something``` to something using ```JS.eval()``` without using an ASLEvent and setting up a function for it, would you?",
      "EditableFormat": "markdown",
      "HTML": "<p>Ha!</p>\n<p>That's funny stuff!</p>\n<hr>\n<p>You wouldn't happen to know a way to set <code>game.something</code> to something using <code>JS.eval()</code> without using an ASLEvent and setting up a function for it, would you?</p>\n\n",
      "PostDate": "2017-10-23T16:46:54.1156133Z",
      "LastEditDate": "2017-10-23T16:47:15.4140477Z",
      "link": null
    },
    {
      "PostId": "2de2cc88-2336-4c56-9a12-a3f7595d6227",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I suspect you'd have to make a function for it.",
      "EditableFormat": "markdown",
      "HTML": "<p>I suspect you'd have to make a function for it.</p>\n\n",
      "PostDate": "2017-10-23T17:00:54.7177555Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5a456f9f-4970-4ca9-8a38-ba2877885ab6",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">the hidden elements may negatively effect the browser during the automatic scrolling\r\n\r\nHave you noticed this, mrangel?\r\n\r\nI haven't tested it on a big game yet.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>the hidden elements may negatively effect the browser during the automatic scrolling</p>\n</blockquote>\n<p>Have you noticed this, mrangel?</p>\n<p>I haven't tested it on a big game yet.</p>\n\n",
      "PostDate": "2017-10-24T10:11:52.9631946Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "846a2033-2a6e-4b92-ba51-1a9b6cbcd287",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I've not seen any issues; but the automatic scrolling code seems to be pretty weird anyway. (As far as I can tell from skim-reading the code, the scrolling might mess up if you hide an element that's in the middle of the output, but should be fine with hiding stuff at the top or bottom)\r\n\r\n(If I'm playing a game and a command produces more than a screenful of output, I want to read what it said. I don't want it to scroll up to the top of the output and then back down to the command bar. I want to read last turn before I decide what to do next. Sometimes I might want to enter a command before reading, like if I'm reentering a room with a lot of stuff in it and I already know where I'm going. But when I'm playing a game, I find automatically scrolling to the bottom really, really annoying.)",
      "EditableFormat": "markdown",
      "HTML": "<p>I've not seen any issues; but the automatic scrolling code seems to be pretty weird anyway. (As far as I can tell from skim-reading the code, the scrolling might mess up if you hide an element that's in the middle of the output, but should be fine with hiding stuff at the top or bottom)</p>\n<p>(If I'm playing a game and a command produces more than a screenful of output, I want to read what it said. I don't want it to scroll up to the top of the output and then back down to the command bar. I want to read last turn before I decide what to do next. Sometimes I might want to enter a command before reading, like if I'm reentering a room with a lot of stuff in it and I already know where I'm going. But when I'm playing a game, I find automatically scrolling to the bottom really, really annoying.)</p>\n\n",
      "PostDate": "2017-10-24T10:51:36.2624106Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b410230b-a11d-4583-8758-44184195b62c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I fancy the MORE prompt, myself.\r\n\r\n---\r\nI said I'd never had by screen bounce up and down on my Android in some other thread.  That was true then.  Not so much now...\r\n\r\nThat's pretty crazy!  My screen bounced about 20 times, just like you said yours does sometimes.  (I believed you.  I just thought maybe my device was impervious to that.  Nope!)",
      "EditableFormat": "markdown",
      "HTML": "<p>I fancy the MORE prompt, myself.</p>\n<hr>\n<p>I said I'd never had by screen bounce up and down on my Android in some other thread.  That was true then.  Not so much now...</p>\n<p>That's pretty crazy!  My screen bounced about 20 times, just like you said yours does sometimes.  (I believed you.  I just thought maybe my device was impervious to that.  Nope!)</p>\n\n",
      "PostDate": "2017-10-24T11:00:06.47948Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5b69925d-c248-4f75-b72c-4c8092438226",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Can't we just add this to kill it?\r\n\r\n```\r\nscrollToEnd = function {\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Can't we just add this to kill it?</p>\n<pre><code>scrollToEnd = function {\n}\n</code></pre>\n\n",
      "PostDate": "2017-10-24T11:02:05.1126053Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b5326657-035f-4f62-ab9b-f53effa4b9a4",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Back to the transcript:\r\n\r\nI've got this going on at the moment, and it works offline.  \r\n\r\nNOTE:  This prints the transcript.   You can print, save to PDF, or whatever your machine's print options are.\r\n\r\n\r\n---\r\n## The game:\r\n\r\n<details><summary><b>CLICK HERE TO VIEW THE GAME'S CODE</summary>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Printing a Transcript\">\r\n    <gameid>8f137d1a-50d8-43bf-b630-299ab3dcd0b2</gameid>\r\n    <version>0.1</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <showscore type=\"boolean\">false</showscore>\r\n    <feature_advancedscripts />\r\n    <commandpane />\r\n    <inituserinterface type=\"script\">\r\n      JS.setCommands (\"Print_Transcript;Clear_Screen\", \"black\")\r\n    </inituserinterface>\r\n    <subtitle>version{game.version}</subtitle>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\">\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <command name=\"JScmd\">\r\n    <pattern>JS.#text#</pattern>\r\n    <script>\r\n      JS.eval (text)\r\n    </script>\r\n  </command>\r\n  <command name=\"print\">\r\n    <pattern>print</pattern>\r\n    <script>\r\n      JS.print ()\r\n    </script>\r\n  </command>\r\n  <command name=\"transcript\">\r\n    <pattern>script;transcript;print transcript;print_transcript</pattern>\r\n    <script>\r\n      JS.printTranscript ()\r\n    </script>\r\n  </command>\r\n  <command name=\"clearthescreencmd\">\r\n    <pattern>clr;clear;clear_screen</pattern>\r\n    <script>\r\n      JS.clearScreen ()\r\n    </script>\r\n  </command>\r\n  <javascript src=\"javascript.js\" />\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n\r\n---\r\n### The JS:\r\n\r\n```\r\nprintTranscript = function() {\r\n  var iframe = document.createElement(\"iframe\"); // create the element\r\n  document.body.appendChild(iframe);  // insert the element to the DOM \r\n  addText(\"<style>.clearedScreen { display: block; }</style>\"); //display the cleared text\r\n  iframe.contentWindow.document.write($(\"#divOutput\").html()); // write the HTML to be printed\r\n  iframe.contentWindow.print();  // print it\r\n  addText(\"<style>.clearedScreen { display: none; }</style>\");//hide the cleared text again\r\n  document.body.removeChild(iframe); // remove the iframe from the DOM\r\n}\r\n\r\n\r\nclearScreen = function() {\r\n    $(\"#divOutput\").append(\"<hr class=\\\"clearedAbove\\\" />\");\r\n    addText(\"<style>.clearedScreen { display: none; }</style>\");\r\n    $(\"#divOutput\").children().addClass(\"clearedScreen\");\r\n    $(\"#divOutput\").css(\"min-height\", 0);\r\n    createNewDiv(\"left\");\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $(\"html,body\").scrollTop(0);\r\n    }, 100);\r\n}\r\n```\r\n\r\n---\r\nhttp://textadventures.co.uk/games/view/dbtxp7q5euw7ygj6vodavw/printing-a-transcript\r\n\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Back to the transcript:</p>\n<p>I've got this going on at the moment, and it works offline.</p>\n<p>NOTE:  This prints the transcript.   You can print, save to PDF, or whatever your machine's print options are.</p>\n<hr>\n<h2>The game:</h2>\n<details><summary><b>CLICK HERE TO VIEW THE GAME'S CODE</b></summary><b>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Printing a Transcript\"&gt;\n    &lt;gameid&gt;8f137d1a-50d8-43bf-b630-299ab3dcd0b2&lt;/gameid&gt;\n    &lt;version&gt;0.1&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;showscore type=\"boolean\"&gt;false&lt;/showscore&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;commandpane /&gt;\n    &lt;inituserinterface type=\"script\"&gt;\n      JS.setCommands (\"Print_Transcript;Clear_Screen\", \"black\")\n    &lt;/inituserinterface&gt;\n    &lt;subtitle&gt;version{game.version}&lt;/subtitle&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command name=\"JScmd\"&gt;\n    &lt;pattern&gt;JS.#text#&lt;/pattern&gt;\n    &lt;script&gt;\n      JS.eval (text)\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"print\"&gt;\n    &lt;pattern&gt;print&lt;/pattern&gt;\n    &lt;script&gt;\n      JS.print ()\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"transcript\"&gt;\n    &lt;pattern&gt;script;transcript;print transcript;print_transcript&lt;/pattern&gt;\n    &lt;script&gt;\n      JS.printTranscript ()\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"clearthescreencmd\"&gt;\n    &lt;pattern&gt;clr;clear;clear_screen&lt;/pattern&gt;\n    &lt;script&gt;\n      JS.clearScreen ()\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;javascript src=\"javascript.js\" /&gt;\n&lt;/asl&gt;\n</code></pre>\n</b></details><b>\n<hr>\n<h3>The JS:</h3>\n<pre><code>printTranscript = function() {\n  var iframe = document.createElement(\"iframe\"); // create the element\n  document.body.appendChild(iframe);  // insert the element to the DOM \n  addText(\"&lt;style&gt;.clearedScreen { display: block; }&lt;/style&gt;\"); //display the cleared text\n  iframe.contentWindow.document.write($(\"#divOutput\").html()); // write the HTML to be printed\n  iframe.contentWindow.print();  // print it\n  addText(\"&lt;style&gt;.clearedScreen { display: none; }&lt;/style&gt;\");//hide the cleared text again\n  document.body.removeChild(iframe); // remove the iframe from the DOM\n}\n\n\nclearScreen = function() {\n    $(\"#divOutput\").append(\"&lt;hr class=\\\"clearedAbove\\\" /&gt;\");\n    addText(\"&lt;style&gt;.clearedScreen { display: none; }&lt;/style&gt;\");\n    $(\"#divOutput\").children().addClass(\"clearedScreen\");\n    $(\"#divOutput\").css(\"min-height\", 0);\n    createNewDiv(\"left\");\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $(\"html,body\").scrollTop(0);\n    }, 100);\n}\n</code></pre>\n<hr>\n<p>http://textadventures.co.uk/games/view/dbtxp7q5euw7ygj6vodavw/printing-a-transcript</p>\n\n</b>",
      "PostDate": "2017-11-19T06:10:26.5995587Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4263ce70-a639-485e-bf3a-1af1352fecbe",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That looked funny online, so I changed the JS to this:\r\n\r\n```\r\nprintTranscript = function() {\r\n  $('<div id=\"logCopy\" />').html($(\"#divOutput\").html()).appendTo(\"#outputData\");\r\n  $(\"#logCopy > div\").css(\"display\", \"block\");\r\n  var iframe = document.createElement(\"iframe\"); // create the element\r\n  document.body.appendChild(iframe);  // insert the element to the DOM \r\n  //addText(\"<style>.clearedScreen { display: block; }</style>\"); //display the cleared text\r\n  iframe.contentWindow.document.write($(\"#logCopy\").html()); // write the HTML to be printed\r\n  iframe.contentWindow.print();  // print it\r\n  //addText(\"<style>.clearedScreen { display: none; }</style>\");//hide cleared text again\r\n  document.body.removeChild(iframe); // remove the iframe from the DOM\r\n  $(\"#logCopy\").remove();\r\n}\r\n\r\n\r\nclearScreen = function() {\r\n    addText(\"<hr/>\");\r\n    $(\"#divOutput\").append(\"<hr class=\\\"clearedAbove\\\" />\");\r\n    addText(\"<style>.clearedScreen { display: none; }</style>\");\r\n    $(\"#divOutput\").children().addClass(\"clearedScreen\");\r\n    $(\"#divOutput\").css(\"min-height\", 0);\r\n    createNewDiv(\"left\");\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $(\"html,body\").scrollTop(0);\r\n    }, 100);\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>That looked funny online, so I changed the JS to this:</p>\n<pre><code>printTranscript = function() {\n  $('&lt;div id=\"logCopy\" /&gt;').html($(\"#divOutput\").html()).appendTo(\"#outputData\");\n  $(\"#logCopy &gt; div\").css(\"display\", \"block\");\n  var iframe = document.createElement(\"iframe\"); // create the element\n  document.body.appendChild(iframe);  // insert the element to the DOM \n  //addText(\"&lt;style&gt;.clearedScreen { display: block; }&lt;/style&gt;\"); //display the cleared text\n  iframe.contentWindow.document.write($(\"#logCopy\").html()); // write the HTML to be printed\n  iframe.contentWindow.print();  // print it\n  //addText(\"&lt;style&gt;.clearedScreen { display: none; }&lt;/style&gt;\");//hide cleared text again\n  document.body.removeChild(iframe); // remove the iframe from the DOM\n  $(\"#logCopy\").remove();\n}\n\n\nclearScreen = function() {\n    addText(\"&lt;hr/&gt;\");\n    $(\"#divOutput\").append(\"&lt;hr class=\\\"clearedAbove\\\" /&gt;\");\n    addText(\"&lt;style&gt;.clearedScreen { display: none; }&lt;/style&gt;\");\n    $(\"#divOutput\").children().addClass(\"clearedScreen\");\n    $(\"#divOutput\").css(\"min-height\", 0);\n    createNewDiv(\"left\");\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $(\"html,body\").scrollTop(0);\n    }, 100);\n}\n</code></pre>\n\n",
      "PostDate": "2017-11-19T06:46:34.5219858Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6c0efb76-fd9b-4d7b-b468-ff4f8c4550a3",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have turned this thread into a tangled braid.\r\n\r\nI shall break it up into new threads (if worthwhile).\r\n\r\n---\r\n### Printing/Saving a transcript\r\n\r\n\r\nHere is the new thread for printing a transcript:\r\nhttp://textadventures.co.uk/forum/samples/topic/arefgacf4eotexvb1yjtka/printing-a-transcript\r\n\r\n---\r\n### Saving the log as a file as it is written\r\n\r\nVisual Studio just laughs at me every time I try modifying anything.  (The war isn't over though!)\r\n\r\nI will start a new, clean thread if I make any progress.\r\n\r\n---\r\n### Creating a RESTART command\r\n\r\nStarting a new thread concerning the desktop player soon.  Note that [mrangel's method](http://textadventures.co.uk/forum/quest/topic/5fd2-liccuidcbbf_eiefa/log-im-trying-to-figure-out-how-to-save-the-content-to-a-file#8ede1a09-6e6e-4ebd-97dd-aae1c9b79171) works when playing online.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I have turned this thread into a tangled braid.</p>\n<p>I shall break it up into new threads (if worthwhile).</p>\n<hr>\n<h3>Printing/Saving a transcript</h3>\n<p>Here is the new thread for printing a transcript:<br>\nhttp://textadventures.co.uk/forum/samples/topic/arefgacf4eotexvb1yjtka/printing-a-transcript</p>\n<hr>\n<h3>Saving the log as a file as it is written</h3>\n<p>Visual Studio just laughs at me every time I try modifying anything.  (The war isn't over though!)</p>\n<p>I will start a new, clean thread if I make any progress.</p>\n<hr>\n<h3>Creating a RESTART command</h3>\n<p>Starting a new thread concerning the desktop player soon.  Note that <a href=\"http://textadventures.co.uk/forum/quest/topic/5fd2-liccuidcbbf_eiefa/log-im-trying-to-figure-out-how-to-save-the-content-to-a-file#8ede1a09-6e6e-4ebd-97dd-aae1c9b79171\">mrangel's method</a> works when playing online.</p>\n\n",
      "PostDate": "2017-11-19T07:27:02.2814265Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "12f195d0-8ac7-487e-a7fb-b153144b467e",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "K.V. How many people do you have on your account? You post all the time! I have been having problems with insomnia lately, (just googled it, one of the side effects of melatonin is insomnia if you take too much), but this is ridiculous!",
      "EditableFormat": "markdown",
      "HTML": "<p>K.V. How many people do you have on your account? You post all the time! I have been having problems with insomnia lately, (just googled it, one of the side effects of melatonin is insomnia if you take too much), but this is ridiculous!</p>\n\n",
      "PostDate": "2017-11-19T09:28:14.7245627Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c78f17de-1af9-4e23-ad8f-f712953bb8ba",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> `addText(\"<style>.clearedScreen { display: none; }</style>\");`\r\n\r\nI think there maybe you would want\r\n\r\n> `addText(\"<style>#divOutput .clearedScreen { display: none; }</style>\");`\r\n\r\nIf .clearedScreen is only hidden when it's inside #divOutput, you don't need to change the styles to make it visible before printing.\r\nAlso, that line doesn't need to be inside a function, as you only need to print the `<style>` block once; probably on initialisation.\r\n\r\nSo that would be something like…\r\n```\r\nprintTranscript = function() {\r\n  var iframe = document.createElement(\"iframe\"); // create the element\r\n  document.body.appendChild(iframe);  // insert the element to the DOM\r\n  iframe.contentWindow.document.write($(\"#divOutput\").html()); // write the HTML to be printed\r\n  iframe.contentWindow.print();  // print it\r\n  document.body.removeChild(iframe); // remove the iframe from the DOM\r\n};\r\n\r\naddText(\"<style>#divOutput > .clearedScreen { display: none; }</style>\");\r\n\r\nclearScreen = function() {\r\n    addText(\"<hr/>\");\r\n    $(\"#divOutput\").append(\"<hr class=\\\"clearedAbove\\\" />\");\r\n    $(\"#divOutput\").children().addClass(\"clearedScreen\");\r\n    $(\"#divOutput\").css(\"min-height\", 0);\r\n    createNewDiv(\"left\");\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $(\"html,body\").scrollTop(0);\r\n    }, 100);\r\n};\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p><code>addText(\"&lt;style&gt;.clearedScreen { display: none; }&lt;/style&gt;\");</code></p>\n</blockquote>\n<p>I think there maybe you would want</p>\n<blockquote>\n<p><code>addText(\"&lt;style&gt;#divOutput .clearedScreen { display: none; }&lt;/style&gt;\");</code></p>\n</blockquote>\n<p>If .clearedScreen is only hidden when it's inside #divOutput, you don't need to change the styles to make it visible before printing.<br>\nAlso, that line doesn't need to be inside a function, as you only need to print the <code>&lt;style&gt;</code> block once; probably on initialisation.</p>\n<p>So that would be something like…</p>\n<pre><code>printTranscript = function() {\n  var iframe = document.createElement(\"iframe\"); // create the element\n  document.body.appendChild(iframe);  // insert the element to the DOM\n  iframe.contentWindow.document.write($(\"#divOutput\").html()); // write the HTML to be printed\n  iframe.contentWindow.print();  // print it\n  document.body.removeChild(iframe); // remove the iframe from the DOM\n};\n\naddText(\"&lt;style&gt;#divOutput &gt; .clearedScreen { display: none; }&lt;/style&gt;\");\n\nclearScreen = function() {\n    addText(\"&lt;hr/&gt;\");\n    $(\"#divOutput\").append(\"&lt;hr class=\\\"clearedAbove\\\" /&gt;\");\n    $(\"#divOutput\").children().addClass(\"clearedScreen\");\n    $(\"#divOutput\").css(\"min-height\", 0);\n    createNewDiv(\"left\");\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $(\"html,body\").scrollTop(0);\n    }, 100);\n};\n</code></pre>\n\n",
      "PostDate": "2017-11-19T09:29:12.9357941Z",
      "LastEditDate": "2017-11-19T12:24:31.0133205Z",
      "link": null
    },
    {
      "PostId": "6457afbe-4cf8-4a5c-91fd-898cdbfe220f",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel,\r\n\r\nThat modified ```printTranscript``` function is very nice! Thanks!\r\n\r\n...but the screen doesn't clear when I remove the line from the function.\r\n\r\n```addText(\"<style>#divOutput > .clearedScreen { display: none; }</style>\");```\r\n\r\nIs it hurting anything being inside the function?\r\n\r\nOr should I make it only run the first time ```clearScreen``` is called?  (This is how I have it now.)\r\n\r\n---\r\nHere's what works for me:\r\n\r\n```\r\nprintTranscript = function() {\r\n  var iframe = document.createElement(\"iframe\"); // create the element\r\n  document.body.appendChild(iframe);  // insert the element to the DOM\r\n  iframe.contentWindow.document.write($(\"#divOutput\").html()); // write the HTML to be printed\r\n  iframe.contentWindow.print();  // print it\r\n  document.body.removeChild(iframe); // remove the iframe from the DOM\r\n}\r\n\r\n\r\nvar clearedOnce = false;\r\n\r\nclearScreen = function() {\r\n    addText(\"<hr/>SCREEN CLEARED\");\r\n    $(\"#divOutput\").append(\"<hr class=\\\"clearedAbove\\\" />\");\r\n    if (!clearedOnce){\r\n      addText(\"<style>#divOutput > .clearedScreen { display: none; }</style>\");\r\n    }\r\n    clearedOnce = true;\r\n    $(\"#divOutput\").children().addClass(\"clearedScreen\");\r\n    $(\"#divOutput\").css(\"min-height\", 0);\r\n    createNewDiv(\"left\");\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $(\"html,body\").scrollTop(0);\r\n    }, 100);\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n---\r\njmne,\r\n\r\nI have a sleeping problem, but it's that I can't sleep longer than 3 hours at a time.  (My back is stupid.)\r\n\r\n...and I can usually sleep twice or thrice every 24 hours.  So it isn't too bad.\r\n\r\nI've kept myself awake for 48 hours before, too -- just see how long I could sleep.   Answer: 3 hours.\r\n\r\nI thought melatonin was a sleep aid?  (Or does too much just have a reverse effect?)\r\n\r\nThe doctor told me to try it one time.  It just made me have Strange Dreams during my 3 hour rests.  So, I decided to stop taking it.",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel,</p>\n<p>That modified <code>printTranscript</code> function is very nice! Thanks!</p>\n<p>...but the screen doesn't clear when I remove the line from the function.</p>\n<p><code>addText(\"&lt;style&gt;#divOutput &gt; .clearedScreen { display: none; }&lt;/style&gt;\");</code></p>\n<p>Is it hurting anything being inside the function?</p>\n<p>Or should I make it only run the first time <code>clearScreen</code> is called?  (This is how I have it now.)</p>\n<hr>\n<p>Here's what works for me:</p>\n<pre><code>printTranscript = function() {\n  var iframe = document.createElement(\"iframe\"); // create the element\n  document.body.appendChild(iframe);  // insert the element to the DOM\n  iframe.contentWindow.document.write($(\"#divOutput\").html()); // write the HTML to be printed\n  iframe.contentWindow.print();  // print it\n  document.body.removeChild(iframe); // remove the iframe from the DOM\n}\n\n\nvar clearedOnce = false;\n\nclearScreen = function() {\n    addText(\"&lt;hr/&gt;SCREEN CLEARED\");\n    $(\"#divOutput\").append(\"&lt;hr class=\\\"clearedAbove\\\" /&gt;\");\n    if (!clearedOnce){\n      addText(\"&lt;style&gt;#divOutput &gt; .clearedScreen { display: none; }&lt;/style&gt;\");\n    }\n    clearedOnce = true;\n    $(\"#divOutput\").children().addClass(\"clearedScreen\");\n    $(\"#divOutput\").css(\"min-height\", 0);\n    createNewDiv(\"left\");\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $(\"html,body\").scrollTop(0);\n    }, 100);\n}\n\n</code></pre>\n<hr>\n<p>jmne,</p>\n<p>I have a sleeping problem, but it's that I can't sleep longer than 3 hours at a time.  (My back is stupid.)</p>\n<p>...and I can usually sleep twice or thrice every 24 hours.  So it isn't too bad.</p>\n<p>I've kept myself awake for 48 hours before, too -- just see how long I could sleep.   Answer: 3 hours.</p>\n<p>I thought melatonin was a sleep aid?  (Or does too much just have a reverse effect?)</p>\n<p>The doctor told me to try it one time.  It just made me have Strange Dreams during my 3 hour rests.  So, I decided to stop taking it.</p>\n\n",
      "PostDate": "2017-11-19T10:45:27.1539728Z",
      "LastEditDate": "2017-11-19T11:21:48.7027962Z",
      "link": null
    },
    {
      "PostId": "bac02703-e7d6-4998-be96-43db2bfa7ff0",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm not sure when user JS is executed in relation to the standard stuff. Maybe it's being called before addText is defined or something.\r\n\r\nRunning it only one is probably more efficient. I remember reading that at least one browser had memory issues with duplicate CSS rules; but no idea if that's still the case.\r\n\r\nOn second thoughts, putting `<style>` in the document body is quite clunky in any case. It would probably be more elegant to do something like instead of using addText…\r\n`$(\"head\").append(\"<style>#divOutput .clearedScreen { display: none; }</style>\");`\r\nor even\r\n`$(\"style\").last().append(\"#divOutput .clearedScreen { display: none; }\");`\r\n\r\nOr if you want to get as much code in one line as possible:\r\n`$(\"#clearStyle\").length || ($('<style>', {id: \"clearStyle\"}).text(\"#divOutput .clearedScreen { display: none; }\").appendTo(\"head\"));`\r\n(which creates a new `<style>` element if it doesn't already exist)",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm not sure when user JS is executed in relation to the standard stuff. Maybe it's being called before addText is defined or something.</p>\n<p>Running it only one is probably more efficient. I remember reading that at least one browser had memory issues with duplicate CSS rules; but no idea if that's still the case.</p>\n<p>On second thoughts, putting <code>&lt;style&gt;</code> in the document body is quite clunky in any case. It would probably be more elegant to do something like instead of using addText…<br>\n<code>$(\"head\").append(\"&lt;style&gt;#divOutput .clearedScreen { display: none; }&lt;/style&gt;\");</code><br>\nor even<br>\n<code>$(\"style\").last().append(\"#divOutput .clearedScreen { display: none; }\");</code></p>\n<p>Or if you want to get as much code in one line as possible:<br>\n<code>$(\"#clearStyle\").length || ($('&lt;style&gt;', {id: \"clearStyle\"}).text(\"#divOutput .clearedScreen { display: none; }\").appendTo(\"head\"));</code><br>\n(which creates a new <code>&lt;style&gt;</code> element if it doesn't already exist)</p>\n\n",
      "PostDate": "2017-11-19T12:49:43.9342046Z",
      "LastEditDate": "2017-11-19T12:50:42.5678038Z",
      "link": null
    },
    {
      "PostId": "d64f4309-713a-4c20-9059-a5496f6baf86",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel,\r\n\r\nLook at you go!\r\n\r\n...and yes, please, and thank you for the one-liner!  (One-liners are the best.)\r\n\r\n---\r\nDo you prefer the first method you came up with (downloading as text) over this?\r\n\r\nIt wouldn't be hard to add a prompt, asking whether the player would like to download a .txt file or to print from the HTML with the images and formatting intact.\r\n\r\n---\r\n>I'm not sure when user JS is executed in relation to the standard stuff. Maybe it's being called before addText is defined or something.\r\n\r\nIt seems to run before it even prints the game's title to the screen, but the class doesn't exist until ```clearScreen``` runs the first time.  (I think this is right.)\r\n\r\n---\r\n>Running it only one is probably more efficient. I remember reading that at least one browser had memory issues with duplicate CSS rules; but no idea if that's still the case.\r\n\r\nThis seems to be true, because there's no mysterious error showing up in the developer console now that I've added that ```if...```.",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel,</p>\n<p>Look at you go!</p>\n<p>...and yes, please, and thank you for the one-liner!  (One-liners are the best.)</p>\n<hr>\n<p>Do you prefer the first method you came up with (downloading as text) over this?</p>\n<p>It wouldn't be hard to add a prompt, asking whether the player would like to download a .txt file or to print from the HTML with the images and formatting intact.</p>\n<hr>\n<blockquote>\n<p>I'm not sure when user JS is executed in relation to the standard stuff. Maybe it's being called before addText is defined or something.</p>\n</blockquote>\n<p>It seems to run before it even prints the game's title to the screen, but the class doesn't exist until <code>clearScreen</code> runs the first time.  (I think this is right.)</p>\n<hr>\n<blockquote>\n<p>Running it only one is probably more efficient. I remember reading that at least one browser had memory issues with duplicate CSS rules; but no idea if that's still the case.</p>\n</blockquote>\n<p>This seems to be true, because there's no mysterious error showing up in the developer console now that I've added that <code>if...</code>.</p>\n\n",
      "PostDate": "2017-11-19T13:25:23.9084755Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "aee6674e-921a-4ea3-ac35-8b5b72c8e5ee",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If it's just that the code isn't being executed, it might be worth using ready.\r\n\r\n`$(function () {   some code here   });` will cause the function to be executed once, immediately after the document has finished loading. You might not be able to use `addText` here (depending whether playercore.js is loaded with the page or later), but `<head>` will certainly exist, so my last one-line version would work.\r\n\r\nSo maybe you could do:\r\n`$(function () { $(\"style\").last().append(\"#divOutput .clearedScreen { display: none; }\"); });`\r\nto wait until the document has loaded (including it's built-in style elements), and then add a line to the last `<style>` that exists.",
      "EditableFormat": "markdown",
      "HTML": "<p>If it's just that the code isn't being executed, it might be worth using ready.</p>\n<p><code>$(function () { some code here });</code> will cause the function to be executed once, immediately after the document has finished loading. You might not be able to use <code>addText</code> here (depending whether playercore.js is loaded with the page or later), but <code>&lt;head&gt;</code> will certainly exist, so my last one-line version would work.</p>\n<p>So maybe you could do:<br>\n<code>$(function () { $(\"style\").last().append(\"#divOutput .clearedScreen { display: none; }\"); });</code><br>\nto wait until the document has loaded (including it's built-in style elements), and then add a line to the last <code>&lt;style&gt;</code> that exists.</p>\n\n",
      "PostDate": "2017-11-19T13:34:24.5096055Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "99f7822f-f7f4-4de2-8874-c13a0c6b7da8",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I added an ```alert(\"Setting up clearedScreen class...\");``` before that line, outside of any function, and the alert fired.  I think it's that the class doesn't exist yet, but, if I edit in your revisions (appending everything to the main style element), I think it will be smooth sailing.",
      "EditableFormat": "markdown",
      "HTML": "<p>I added an <code>alert(\"Setting up clearedScreen class...\");</code> before that line, outside of any function, and the alert fired.  I think it's that the class doesn't exist yet, but, if I edit in your revisions (appending everything to the main style element), I think it will be smooth sailing.</p>\n\n",
      "PostDate": "2017-11-19T14:05:59.2963102Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e619eac6-7f32-4dfb-bf44-e8906ee60105",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "\r\n```\r\njmne,\r\n\r\nI have a sleeping problem, but it's that I can't sleep longer than 3 hours at a time. (My back is stupid.)\r\n\r\n...and I can usually sleep twice or thrice every 24 hours. So it isn't too bad.\r\n\r\nI've kept myself awake for 48 hours before, too -- just see how long I could sleep. Answer: 3 hours.\r\n\r\nI thought melatonin was a sleep aid? (Or does too much just have a reverse effect?)\r\n\r\nThe doctor told me to try it one time. It just made me have Strange Dreams during my 3 hour rests. So, I decided to stop taking it.\r\nblah\r\n\r\n```\r\nMelatonin is a natural chemical. Your body produces it.\r\n\r\nIt only causes insomnia if you take too much. Normal people are told to take 2-3 mg. I was told to take 10 mg (the largest amount the pill came in), drug therapist. I used to, before, took 15 mg when I needed it. That night however, I took 25 mg. I got 4 hours of sleep after falling asleep when it wore off, at 4:00 a.m. But I had to get up at 8:30, for my grandma. She means well, but she fights over everything, and I can't say no to her. <strike>(Stupid grandma)</strike>\r\nThis talks about insomnia https://vanwinkles.com/the-dark-side-downsides-side-effects-of-melatonin\r\n```\r\n\"When used occasionally and at the correct time, melatonin is a fine means of encouraging sleep. But, ironically, with prolonged use, it can actually amplify insomnia. Having too much melatonin in the system, the theory goes, overwhelms the receptors, changing how a patient reacts to the hormone — whether it’s endogenous or exogenous.\r\n\r\nAccording to Dr. Wurtman, melatonin supplements may work at first, but soon “you’ll stop responding because you desensitize the brain. And as a consequence, not only won’t you respond to the stuff you take…you won’t respond to the stuff you make, so it can actually promote insomnia after a period of time.”\r\n\r\nMauricio Farez, an Argentinian sleep researcher, has similar reservations. “I have some issues, in terms of the pharmacology, and…it’s really hard to have stable levels of the drug in our blood.”\"\r\n```\r\n\r\nI might just ask for another sleeping medicine.\r\n\r\nHaving strange dreams is normal. I can understand not getting sleep to get away from them, but I absolutely need sleep or I get headaches.\r\n\r\nWhat kind of insomnia do you have?",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>jmne,\n\nI have a sleeping problem, but it's that I can't sleep longer than 3 hours at a time. (My back is stupid.)\n\n...and I can usually sleep twice or thrice every 24 hours. So it isn't too bad.\n\nI've kept myself awake for 48 hours before, too -- just see how long I could sleep. Answer: 3 hours.\n\nI thought melatonin was a sleep aid? (Or does too much just have a reverse effect?)\n\nThe doctor told me to try it one time. It just made me have Strange Dreams during my 3 hour rests. So, I decided to stop taking it.\nblah\n\n</code></pre>\n<p>Melatonin is a natural chemical. Your body produces it.</p>\n<p>It only causes insomnia if you take too much. Normal people are told to take 2-3 mg. I was told to take 10 mg (the largest amount the pill came in), drug therapist. I used to, before, took 15 mg when I needed it. That night however, I took 25 mg. I got 4 hours of sleep after falling asleep when it wore off, at 4:00 a.m. But I had to get up at 8:30, for my grandma. She means well, but she fights over everything, and I can't say no to her. <strike>(Stupid grandma)</strike><br>\nThis talks about insomnia https://vanwinkles.com/the-dark-side-downsides-side-effects-of-melatonin</p>\n<pre><code>\"When used occasionally and at the correct time, melatonin is a fine means of encouraging sleep. But, ironically, with prolonged use, it can actually amplify insomnia. Having too much melatonin in the system, the theory goes, overwhelms the receptors, changing how a patient reacts to the hormone — whether it’s endogenous or exogenous.\n\nAccording to Dr. Wurtman, melatonin supplements may work at first, but soon “you’ll stop responding because you desensitize the brain. And as a consequence, not only won’t you respond to the stuff you take…you won’t respond to the stuff you make, so it can actually promote insomnia after a period of time.”\n\nMauricio Farez, an Argentinian sleep researcher, has similar reservations. “I have some issues, in terms of the pharmacology, and…it’s really hard to have stable levels of the drug in our blood.”\"\n</code></pre>\n<p>I might just ask for another sleeping medicine.</p>\n<p>Having strange dreams is normal. I can understand not getting sleep to get away from them, but I absolutely need sleep or I get headaches.</p>\n<p>What kind of insomnia do you have?</p>\n\n",
      "PostDate": "2017-11-20T21:03:24.9059529Z",
      "LastEditDate": "2017-11-20T21:04:41.7548046Z",
      "link": null
    },
    {
      "PostId": "89444a11-48aa-4666-9647-e7ec7e3c1200",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I just can't sleep because of back pain.\r\n\r\nI took the melatonin (5 mg) for two or three nights.  My dreams were WEIRD.  I've been able to take control of my dreams since I was little, so no nightmares, but I was still dreaming up some outlandish stuff.\r\n\r\n---\r\nAnother problem I have is thinking about things I haven't finished yet.\r\n\r\n...and things I've yet to understand.\r\n\r\n...and sometimes the solution to a problem hits me as soon as I'm about to doze off...\r\n\r\n...you know, normal stuff, besides the back pain.\r\n\r\n---\r\nI'm about to find out the effect Scotch whisky has.\r\n\r\nMore on this as it comes in...\r\n\r\n---\r\nPS\r\n\r\nThe morePrompt and #txtCommand are still kicking my butt, but the problem is not insurmountable.  This, I definitely believe.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I just can't sleep because of back pain.</p>\n<p>I took the melatonin (5 mg) for two or three nights.  My dreams were WEIRD.  I've been able to take control of my dreams since I was little, so no nightmares, but I was still dreaming up some outlandish stuff.</p>\n<hr>\n<p>Another problem I have is thinking about things I haven't finished yet.</p>\n<p>...and things I've yet to understand.</p>\n<p>...and sometimes the solution to a problem hits me as soon as I'm about to doze off...</p>\n<p>...you know, normal stuff, besides the back pain.</p>\n<hr>\n<p>I'm about to find out the effect Scotch whisky has.</p>\n<p>More on this as it comes in...</p>\n<hr>\n<p>PS</p>\n<p>The morePrompt and #txtCommand are still kicking my butt, but the problem is not insurmountable.  This, I definitely believe.</p>\n\n",
      "PostDate": "2017-11-20T21:21:44.4763171Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7eb67b26-33e3-4eac-beb7-3e696d3e5681",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "What kind of back problems? Are you seeing a doctor about it, or just the sleeping issues? I would just buy a temper pedic, the adjustable softness kind (you are an adult... with a job...).",
      "EditableFormat": "markdown",
      "HTML": "<p>What kind of back problems? Are you seeing a doctor about it, or just the sleeping issues? I would just buy a temper pedic, the adjustable softness kind (you are an adult... with a job...).</p>\n\n",
      "PostDate": "2017-11-20T21:28:23.1854796Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c1df5e06-a74d-4c64-a174-ba19738b296b",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "K.V.!",
      "EditableFormat": "markdown",
      "HTML": "<p>K.V.!</p>\n\n",
      "PostDate": "2017-11-21T21:43:18.553102Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9c74efce-5c78-498a-b7a9-4b9b6927acda",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Huh?\r\n\r\nWhat?\r\n\r\nI'm awake...\r\n\r\nHello, jmne!\r\n\r\nSorry...  I'm currently at war with a JavaScript function...\r\n\r\nI carried air-conditioners and heaters around for 15 years and 'wore down' three discs in my lower back.\r\n\r\nBad posture was also a big factor.\r\n\r\nDoctor said he can't help me, lest I want pills to mask the pain, which I don't.\r\n\r\nI do the exercise thing and all that jazz.  \r\n\r\nI got an inversion table.  I can sleep upside down for quite a while, come to find out.  You're not supposed to stay upside down that long though.\r\n\r\nChiropractors get back there, and, every time, they go, \"man...  Your back is messed up!\"\r\n\r\nThey're scared to crack my back.\r\n\r\nI need a backiotomy.\r\n\r\nI'm trying to find a way to work online from home right now.\r\n\r\n---\r\nBesides all that, I'm froody.\r\n\r\nI'm used to my back, anyway.  It's been like that for around a decade.\r\n\r\nAlso, I sleep in spurts, and it's not like I'm starting a fight club or anything.  So that's cool, too.\r\n\r\n(I had houseguests keeping me awake for a few months, but that's no longer a thing.)\r\n\r\n---\r\n\r\nHow are you, jmne?",
      "EditableFormat": "markdown",
      "HTML": "<p>Huh?</p>\n<p>What?</p>\n<p>I'm awake...</p>\n<p>Hello, jmne!</p>\n<p>Sorry...  I'm currently at war with a JavaScript function...</p>\n<p>I carried air-conditioners and heaters around for 15 years and 'wore down' three discs in my lower back.</p>\n<p>Bad posture was also a big factor.</p>\n<p>Doctor said he can't help me, lest I want pills to mask the pain, which I don't.</p>\n<p>I do the exercise thing and all that jazz.</p>\n<p>I got an inversion table.  I can sleep upside down for quite a while, come to find out.  You're not supposed to stay upside down that long though.</p>\n<p>Chiropractors get back there, and, every time, they go, \"man...  Your back is messed up!\"</p>\n<p>They're scared to crack my back.</p>\n<p>I need a backiotomy.</p>\n<p>I'm trying to find a way to work online from home right now.</p>\n<hr>\n<p>Besides all that, I'm froody.</p>\n<p>I'm used to my back, anyway.  It's been like that for around a decade.</p>\n<p>Also, I sleep in spurts, and it's not like I'm starting a fight club or anything.  So that's cool, too.</p>\n<p>(I had houseguests keeping me awake for a few months, but that's no longer a thing.)</p>\n<hr>\n<p>How are you, jmne?</p>\n\n",
      "PostDate": "2017-11-21T23:07:04.7033468Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "02598d16-26f3-475c-9837-820f6950544c",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Good I guess. Sleeping better. Getting ready for Thanksgiving!",
      "EditableFormat": "markdown",
      "HTML": "<p>Good I guess. Sleeping better. Getting ready for Thanksgiving!</p>\n\n",
      "PostDate": "2017-11-22T02:48:09.2459402Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "faa8386e-e934-4956-ae97-10cfe600edc6",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "jmne,\r\n\r\nThat's good.\r\n\r\nDon't eat too much on Thursday!\r\n\r\n---\r\n### The Log:\r\n\r\n\r\nI still haven't figured out how to make Quest save the log to a .txt file, but I've got this going on just for kicks:\r\n\r\n**Add to start script:**\r\n\r\n```\r\nJS.eval(\"var logArr = [];logFunc = function(stuff){alert('Logged:\\\\n'+stuff);logArr.push(Date()+' '+stuff);};viewLog = function(){ addText('<b><h3>Log:</h3></b><hr/>');for (i = 0;i<logArr.length;i++){addText(logArr[i]+'<hr/>');}};\")\r\n```\r\n\r\n**Modified Log function:**\r\n```\r\n  <function name=\"Log\" parameters=\"text\">\r\n    JS.logFunc (text)\r\n    request (Log, text)\r\n  </function>\r\n```\r\n\r\n**Command**\r\n```\r\n  <command name=\"view_log_cmd\">\r\n    <pattern>view log;log</pattern>\r\n    <script>\r\n      JS.viewLog ()\r\n    </script>\r\n  </command>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>jmne,</p>\n<p>That's good.</p>\n<p>Don't eat too much on Thursday!</p>\n<hr>\n<h3>The Log:</h3>\n<p>I still haven't figured out how to make Quest save the log to a .txt file, but I've got this going on just for kicks:</p>\n<p><strong>Add to start script:</strong></p>\n<pre><code>JS.eval(\"var logArr = [];logFunc = function(stuff){alert('Logged:\\\\n'+stuff);logArr.push(Date()+' '+stuff);};viewLog = function(){ addText('&lt;b&gt;&lt;h3&gt;Log:&lt;/h3&gt;&lt;/b&gt;&lt;hr/&gt;');for (i = 0;i&lt;logArr.length;i++){addText(logArr[i]+'&lt;hr/&gt;');}};\")\n</code></pre>\n<p><strong>Modified Log function:</strong></p>\n<pre><code>  &lt;function name=\"Log\" parameters=\"text\"&gt;\n    JS.logFunc (text)\n    request (Log, text)\n  &lt;/function&gt;\n</code></pre>\n<p><strong>Command</strong></p>\n<pre><code>  &lt;command name=\"view_log_cmd\"&gt;\n    &lt;pattern&gt;view log;log&lt;/pattern&gt;\n    &lt;script&gt;\n      JS.viewLog ()\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2017-11-22T03:16:35.9159716Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ae94573e-44ac-42ae-95e1-55ea940a1449",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "ain't that the truth... so much food on thanksgiving/etc-holidays... attempted forced gluttony... don't people realize that no one wants to eat that much food and that you always make/have too much food for everyone (don't ever worry about not having enough food, lol)... sighs... resist the iron-cage of society/social-interactions and don't eat too much! lol\r\n\r\nmessing up the back is the worse, as any movement involves the back, and so with messed up back, you feel pain from any/every movement you do, and it's not really fixable either...\r\n\r\n----------\r\n\r\n(this is just a general statement of the human population)\r\n\r\nunfortunately, lots of people don't know proper techniques and thus hurt their backs. Due to having done personal (proud of the weight I got to for my size, as I'm not that big, sighs) power lifting and knowing physics, I'm an expert on proper technique (99% of people do NOT know how to squat properly: if you've been shown how to squat, you've been shown incorrectly / if you see someone doing a squat or being taught how to do a squat, you're seeing the wrong way/teaching of doing a squat!), but most people are clueless and hurt their backs. With the proper technique, you'll never hurt your back, regardless of the weight (obviously we're talking about weight, aka practical weight, that can be lifted by the person, lol) of the object you're trying to lift. Your 'back' is mainly held up by your spine (along with your muscles to a degree), which is a very thin bone (technically multiple rings of bone on top of each other), which means that it can be easily snapped (like a twig can be), and thus you never want to lift with it, obviously. You lift by using your butt/legs, which are the strongest part of your body. Without getting into the details of the proper technique, there's a simple trick to lift correctly (which will cause you to do all of the many details of the proper technique), which is: simply look up at the ceiling/sky during the entire lifting: never look straight forward and especially never look down. This will cause you to do the proper technique without knowing all of the details of it. It'll keep your back straight and force you to use your butt/legs to lift the object, thus not using your back, and thus not injuring it, as remember, despite how muscular/strong your back seems to be or looks, it's really just that thin spine, which snaps easily like a twig. NEVER EVER EVER bend over/down to lift something up! Remember, LOOK UP during the entire lifting (before you lift the object and during your lifting of the object).\r\n\r\nfor non-injured people (this may hurt injured people --- I'm not a doctor/physiologist), a really good way to stretch the back (move it into a proper posture), is to do this:\r\n\r\nroll your hips forward (holding them there/forward) and slump your upper body and (bend) knees, and hold it like that for a bit\r\n\r\nto \"roll your hips forward\", you move/rotate your lower butt forward, while not moving your waist/belt-line forward, and hold it there for awhile as you slump. Think of it as the opposite of sticking your butt out (especially for girls --- this is really bad for your spine), you want to stick out your front side, lol. (see below)\r\n\r\nto 'slump your upper body', you lean forward slightly and loosely / \"droop/slump\", head looking down (chin against your chest) and shoulders/arms moved forward a bit in front of your body, hanging loosely. As you slump, you remain holding your hips rolled forward. VERY IMPORTANT: bend your knees slightly and relax/be-loose with them (you want to be kinda able to bounce a bit / bend knees and be loose, don't be rigid/locked with straight legs and non-bent knees, you want to be able to bounce a bit up and down on your legs/bent-knees), to produce the full 'slumping' posture/effect.\r\n\r\nnormal posture of the spine is an 'S', which is bad, you want it to be straight: '|', and the above causes the 'S' of your spine to be straight. Doing this technique should feel really good for a non-injured person, as it's the proper straight-spine posture, unlike a person's normal/natural and bad posture of an 'S' spine.",
      "EditableFormat": "markdown",
      "HTML": "<p>ain't that the truth... so much food on thanksgiving/etc-holidays... attempted forced gluttony... don't people realize that no one wants to eat that much food and that you always make/have too much food for everyone (don't ever worry about not having enough food, lol)... sighs... resist the iron-cage of society/social-interactions and don't eat too much! lol</p>\n<p>messing up the back is the worse, as any movement involves the back, and so with messed up back, you feel pain from any/every movement you do, and it's not really fixable either...</p>\n<hr>\n<p>(this is just a general statement of the human population)</p>\n<p>unfortunately, lots of people don't know proper techniques and thus hurt their backs. Due to having done personal (proud of the weight I got to for my size, as I'm not that big, sighs) power lifting and knowing physics, I'm an expert on proper technique (99% of people do NOT know how to squat properly: if you've been shown how to squat, you've been shown incorrectly / if you see someone doing a squat or being taught how to do a squat, you're seeing the wrong way/teaching of doing a squat!), but most people are clueless and hurt their backs. With the proper technique, you'll never hurt your back, regardless of the weight (obviously we're talking about weight, aka practical weight, that can be lifted by the person, lol) of the object you're trying to lift. Your 'back' is mainly held up by your spine (along with your muscles to a degree), which is a very thin bone (technically multiple rings of bone on top of each other), which means that it can be easily snapped (like a twig can be), and thus you never want to lift with it, obviously. You lift by using your butt/legs, which are the strongest part of your body. Without getting into the details of the proper technique, there's a simple trick to lift correctly (which will cause you to do all of the many details of the proper technique), which is: simply look up at the ceiling/sky during the entire lifting: never look straight forward and especially never look down. This will cause you to do the proper technique without knowing all of the details of it. It'll keep your back straight and force you to use your butt/legs to lift the object, thus not using your back, and thus not injuring it, as remember, despite how muscular/strong your back seems to be or looks, it's really just that thin spine, which snaps easily like a twig. NEVER EVER EVER bend over/down to lift something up! Remember, LOOK UP during the entire lifting (before you lift the object and during your lifting of the object).</p>\n<p>for non-injured people (this may hurt injured people --- I'm not a doctor/physiologist), a really good way to stretch the back (move it into a proper posture), is to do this:</p>\n<p>roll your hips forward (holding them there/forward) and slump your upper body and (bend) knees, and hold it like that for a bit</p>\n<p>to \"roll your hips forward\", you move/rotate your lower butt forward, while not moving your waist/belt-line forward, and hold it there for awhile as you slump. Think of it as the opposite of sticking your butt out (especially for girls --- this is really bad for your spine), you want to stick out your front side, lol. (see below)</p>\n<p>to 'slump your upper body', you lean forward slightly and loosely / \"droop/slump\", head looking down (chin against your chest) and shoulders/arms moved forward a bit in front of your body, hanging loosely. As you slump, you remain holding your hips rolled forward. VERY IMPORTANT: bend your knees slightly and relax/be-loose with them (you want to be kinda able to bounce a bit / bend knees and be loose, don't be rigid/locked with straight legs and non-bent knees, you want to be able to bounce a bit up and down on your legs/bent-knees), to produce the full 'slumping' posture/effect.</p>\n<p>normal posture of the spine is an 'S', which is bad, you want it to be straight: '|', and the above causes the 'S' of your spine to be straight. Doing this technique should feel really good for a non-injured person, as it's the proper straight-spine posture, unlike a person's normal/natural and bad posture of an 'S' spine.</p>\n\n",
      "PostDate": "2017-11-22T14:13:29.8567734Z",
      "LastEditDate": "2017-11-22T14:24:23.711377Z",
      "link": null
    },
    {
      "PostId": "42bf5d26-f89d-461f-9817-a9a703b3b226",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yeah.\r\n\r\nAll that stuff HK said about your back sounds about right...\r\n\r\n...but my message to you is this:\r\n\r\n#### No job is more important than your back!\r\n\r\nIf you mess your back up for the company store, the company store don't want you no more.\r\n\r\nThey don't want you to hurt your back anyway.\r\n\r\n...but they do expect you to get the job done...\r\n\r\nSo, ask for help.  If you don't get help, ask two more times.\r\n\r\nIf it comes down to you having to choose between quitting your job or messing your back up and losing your job, just quit.  The job will be gone either way.  You can get a new job. \r\n\r\n---\r\nEDITED OUT RANT\r\n\r\n---\r\nI was dumb.  Now my back sucks, and I don't sleep like most folks do.\r\n\r\nBesides that, I'm quite content.\r\n\r\nStill, don't be like me, kids!  Stay in school!\r\n\r\n---\r\nAnyway...\r\n\r\nVisual Studio is kicking my butt.\r\n\r\nI still can't get it to save the content of the log to a text file.",
      "EditableFormat": "markdown",
      "HTML": "<p>Yeah.</p>\n<p>All that stuff HK said about your back sounds about right...</p>\n<p>...but my message to you is this:</p>\n<h4>No job is more important than your back!</h4>\n<p>If you mess your back up for the company store, the company store don't want you no more.</p>\n<p>They don't want you to hurt your back anyway.</p>\n<p>...but they do expect you to get the job done...</p>\n<p>So, ask for help.  If you don't get help, ask two more times.</p>\n<p>If it comes down to you having to choose between quitting your job or messing your back up and losing your job, just quit.  The job will be gone either way.  You can get a new job.</p>\n<hr>\n<p>EDITED OUT RANT</p>\n<hr>\n<p>I was dumb.  Now my back sucks, and I don't sleep like most folks do.</p>\n<p>Besides that, I'm quite content.</p>\n<p>Still, don't be like me, kids!  Stay in school!</p>\n<hr>\n<p>Anyway...</p>\n<p>Visual Studio is kicking my butt.</p>\n<p>I still can't get it to save the content of the log to a text file.</p>\n\n",
      "PostDate": "2017-11-22T14:39:25.3544205Z",
      "LastEditDate": "2017-11-22T16:14:57.9521608Z",
      "link": null
    },
    {
      "PostId": "24dc6ecd-1ea7-488b-be14-4ec7a6495341",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "See next post",
      "EditableFormat": "markdown",
      "HTML": "<p>See next post</p>\n\n",
      "PostDate": "2017-11-30T03:53:08.5405682Z",
      "LastEditDate": "2017-11-30T16:02:48.5689407Z",
      "link": null
    },
    {
      "PostId": "b5eab08a-0599-4b0b-8d19-b2cc09791c49",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "See next post",
      "EditableFormat": "markdown",
      "HTML": "<p>See next post</p>\n\n",
      "PostDate": "2017-11-30T14:50:18.8038724Z",
      "LastEditDate": "2017-11-30T16:03:03.1379095Z",
      "link": null
    },
    {
      "PostId": "023bcc98-99aa-4b22-a84c-d65d7d29f5fb",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "See next post",
      "EditableFormat": "markdown",
      "HTML": "<p>See next post</p>\n\n",
      "PostDate": "2017-11-30T15:15:05.7898024Z",
      "LastEditDate": "2017-11-30T16:03:15.3633256Z",
      "link": null
    },
    {
      "PostId": "648a490f-0747-4664-93ba-b055d0827327",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "### Success!\r\n\r\nI got it to save the log's contents to a .txt file in my Documents directory each time a log entry is created!\r\n\r\n**Player.vb**\r\nStarts at line 1064\r\n\r\n```vb\r\n    Public Sub Log(text As String) Implements IPlayer.Log\r\n        BeginInvoke(Sub()\r\n                        If m_log Is Nothing Then\r\n                            m_log = New Log\r\n                        End If\r\n                        If m_log.txtLog.TextLength > 0 Then\r\n                            m_log.txtLog.AppendText(Environment.NewLine)\r\n                        End If\r\n                        m_log.txtLog.AppendText(DateTime.Now.ToString() + \" \" + text)\r\n                        m_log.txtLog.Select(m_log.txtLog.Text.Length, 0)\r\n                        m_log.txtLog.ScrollToCaret()\r\n                        Dim filePath As String\r\n                        Dim logNamePre As String\r\n                        logNamePre = \"quest_log_\" + Date.Now.ToString(\"yyyy-MM-dd_HH.mm.ss\") + \".txt\"\r\n                        filePath = System.IO.Path.Combine(\r\n                        My.Computer.FileSystem.SpecialDirectories.MyDocuments, logNamePre)\r\n                        My.Computer.FileSystem.WriteAllText(filePath, m_log.txtLog.Text, True)\r\n                    End Sub)\r\n\r\n    End Sub\r\n```\r\n\r\n---\r\nThe way it stands, it creates a new .txt file in Documents, with all the text you could view when clicking 'Log'.\r\n\r\nIt creates a new file each time.\r\n\r\nI have a LOG #text# command in my test game.\r\n\r\nHere's my first file, which was created immediately upon entering the command:``` log Testing 949am```\r\n\r\nfilename:  quest_log2017-11-30_0949_42.txt\r\n\r\ncontents:\r\n<samp>\r\n11/30/2017 9:49:42 AM Testing 949am\r\n\r\n</samp>\r\n\r\n---\r\nThen, 25 seconds later, I entered: ```log testing 950am```\r\n\r\nThat created this file in my Documents directory:\r\n\r\nfilename:  quest_log2017-11-30_0950_07.txt\r\n\r\ncontents:\r\n<samp>\r\n11/30/2017 9:49:42 AM Testing 949am\r\n11/30/2017 9:50:07 AM testing 950am\r\n</samp>\r\n\r\n---\r\n...and it passed all 87 tests.\r\n\r\nWhoo-hoo!\r\n\r\n---\r\n\r\nNow, if I could figure out how to create a directory named **Quest Logs** in the user's Documents directory, I think that would suffice.\r\n\r\nWhat say you, Pix?",
      "EditableFormat": "markdown",
      "HTML": "<h3>Success!</h3>\n<p>I got it to save the log's contents to a .txt file in my Documents directory each time a log entry is created!</p>\n<p><strong>Player.vb</strong><br>\nStarts at line 1064</p>\n<pre><code>    Public Sub Log(text As String) Implements IPlayer.Log\n        BeginInvoke(Sub()\n                        If m_log Is Nothing Then\n                            m_log = New Log\n                        End If\n                        If m_log.txtLog.TextLength &gt; 0 Then\n                            m_log.txtLog.AppendText(Environment.NewLine)\n                        End If\n                        m_log.txtLog.AppendText(DateTime.Now.ToString() + \" \" + text)\n                        m_log.txtLog.Select(m_log.txtLog.Text.Length, 0)\n                        m_log.txtLog.ScrollToCaret()\n                        Dim filePath As String\n                        Dim logNamePre As String\n                        logNamePre = \"quest_log_\" + Date.Now.ToString(\"yyyy-MM-dd_HH.mm.ss\") + \".txt\"\n                        filePath = System.IO.Path.Combine(\n                        My.Computer.FileSystem.SpecialDirectories.MyDocuments, logNamePre)\n                        My.Computer.FileSystem.WriteAllText(filePath, m_log.txtLog.Text, True)\n                    End Sub)\n\n    End Sub\n</code></pre>\n<hr>\n<p>The way it stands, it creates a new .txt file in Documents, with all the text you could view when clicking 'Log'.</p>\n<p>It creates a new file each time.</p>\n<p>I have a LOG #text# command in my test game.</p>\n<p>Here's my first file, which was created immediately upon entering the command:<code>log Testing 949am</code></p>\n<p>filename:  quest_log2017-11-30_0949_42.txt</p>\n<p>contents:<br>\n<samp><br>\n11/30/2017 9:49:42 AM Testing 949am</samp></p>\n\n<hr>\n<p>Then, 25 seconds later, I entered: <code>log testing 950am</code></p>\n<p>That created this file in my Documents directory:</p>\n<p>filename:  quest_log2017-11-30_0950_07.txt</p>\n<p>contents:<br>\n<samp><br>\n11/30/2017 9:49:42 AM Testing 949am<br>\n11/30/2017 9:50:07 AM testing 950am<br>\n</samp></p>\n<hr>\n<p>...and it passed all 87 tests.</p>\n<p>Whoo-hoo!</p>\n<hr>\n<p>Now, if I could figure out how to create a directory named <strong>Quest Logs</strong> in the user's Documents directory, I think that would suffice.</p>\n<p>What say you, Pix?</p>\n\n",
      "PostDate": "2017-11-30T16:02:13.9103057Z",
      "LastEditDate": "2017-11-30T16:13:10.8131713Z",
      "link": null
    },
    {
      "PostId": "ec4df68f-c586-4326-913c-fe306770ff82",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Now it creates a directory  named **Quest_logs** in **Documents** (if it doesn't already exist).\r\n\r\nIt creates a new .txt file each time the ```Log``` function is called, which contains the entire contents of the in-game log.\r\n\r\nAt first, I thought it would be better if it appended the existing file, but what if... anything messed up.  It's the log file.  I want it, and I may want the old log files.\r\n\r\nThe files are very small. \r\n\r\nThen, I thought I wanted them saved to the game folder, but that wouldn't work when I was playing an actual .quest game, especially if I wasn't the person who created the game.\r\n\r\n---\r\n\r\n#### **QUESTION:  Do we want our logs saved on the player's hard drive?**\r\n\r\nSome of us might sometimes, but it would need to be ANNOUNCED LOUDLY:  \r\n\r\n\"IN THIS VERSION OF QUEST, YOUR LOG WILL NOW BE SAVED TO THE PLAYER'S COMPUTER!  DON'T WRITE CRAZY STUFF, UNLESS YOU WANT THE WORLD TO SEE IT!\"\r\n\r\n---\r\n\r\nIt passes all 87 tests in the VS solution, too.\r\n\r\n\r\n---\r\n![image](https://user-images.githubusercontent.com/30656341/33451673-581c9048-d5d5-11e7-85d4-2d27c10bf4b7.png)\r\n\r\n---\r\n![image](https://user-images.githubusercontent.com/30656341/33451696-6ef3fd10-d5d5-11e7-9489-4bc33f577661.png)\r\n\r\n---\r\n**Player.vb**\r\n(starting at line 1064)\r\n\r\n```vb\r\n    Public Sub Log(text As String) Implements IPlayer.Log\r\n        BeginInvoke(Sub()\r\n                        If m_log Is Nothing Then\r\n                            m_log = New Log\r\n                        End If\r\n                        If m_log.txtLog.TextLength > 0 Then\r\n                            m_log.txtLog.AppendText(Environment.NewLine)\r\n                        End If\r\n                        m_log.txtLog.AppendText(DateTime.Now.ToString() + \" \" + text)\r\n                        m_log.txtLog.Select(m_log.txtLog.Text.Length, 0)\r\n                        m_log.txtLog.ScrollToCaret()\r\n                        Dim filePath As String\r\n                        Dim logNamePre As String\r\n                        Dim logDir As String\r\n                        logDir = My.Computer.FileSystem.SpecialDirectories.MyDocuments + \"\\Quest_logs\"\r\n                        My.Computer.FileSystem.CreateDirectory(logDir)\r\n                        logNamePre = \"quest_log_\" + Date.Now.ToString(\"yyyy-MM-dd_HH.mm.ss\") + \".txt\"\r\n                        filePath = System.IO.Path.Combine(\r\n                        logDir, logNamePre)\r\n                        My.Computer.FileSystem.WriteAllText(filePath, m_log.txtLog.Text, True)\r\n                    End Sub)\r\n\r\n    End Sub\r\n```\r\n\r\n---\r\nOkay, guys,\r\n\r\nWhat am I not testing?  \r\n\r\nWhat could this hurt?  (Seriously.  Not sarcastically.)\r\n\r\nIt wouldn't effect the web player at all, right?  \r\n\r\nThe web player does its own thing with ```Log``` and walkthroughs (which is ignoring them), right?",
      "EditableFormat": "markdown",
      "HTML": "<p>Now it creates a directory  named <strong>Quest_logs</strong> in <strong>Documents</strong> (if it doesn't already exist).</p>\n<p>It creates a new .txt file each time the <code>Log</code> function is called, which contains the entire contents of the in-game log.</p>\n<p>At first, I thought it would be better if it appended the existing file, but what if... anything messed up.  It's the log file.  I want it, and I may want the old log files.</p>\n<p>The files are very small.</p>\n<p>Then, I thought I wanted them saved to the game folder, but that wouldn't work when I was playing an actual .quest game, especially if I wasn't the person who created the game.</p>\n<hr>\n<h4><strong>QUESTION:  Do we want our logs saved on the player's hard drive?</strong></h4>\n<p>Some of us might sometimes, but it would need to be ANNOUNCED LOUDLY:</p>\n<p>\"IN THIS VERSION OF QUEST, YOUR LOG WILL NOW BE SAVED TO THE PLAYER'S COMPUTER!  DON'T WRITE CRAZY STUFF, UNLESS YOU WANT THE WORLD TO SEE IT!\"</p>\n<hr>\n<p>It passes all 87 tests in the VS solution, too.</p>\n<hr>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/33451673-581c9048-d5d5-11e7-85d4-2d27c10bf4b7.png\" alt=\"image\"></p>\n<hr>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/33451696-6ef3fd10-d5d5-11e7-9489-4bc33f577661.png\" alt=\"image\"></p>\n<hr>\n<p><strong>Player.vb</strong><br>\n(starting at line 1064)</p>\n<pre><code>    Public Sub Log(text As String) Implements IPlayer.Log\n        BeginInvoke(Sub()\n                        If m_log Is Nothing Then\n                            m_log = New Log\n                        End If\n                        If m_log.txtLog.TextLength &gt; 0 Then\n                            m_log.txtLog.AppendText(Environment.NewLine)\n                        End If\n                        m_log.txtLog.AppendText(DateTime.Now.ToString() + \" \" + text)\n                        m_log.txtLog.Select(m_log.txtLog.Text.Length, 0)\n                        m_log.txtLog.ScrollToCaret()\n                        Dim filePath As String\n                        Dim logNamePre As String\n                        Dim logDir As String\n                        logDir = My.Computer.FileSystem.SpecialDirectories.MyDocuments + \"\\Quest_logs\"\n                        My.Computer.FileSystem.CreateDirectory(logDir)\n                        logNamePre = \"quest_log_\" + Date.Now.ToString(\"yyyy-MM-dd_HH.mm.ss\") + \".txt\"\n                        filePath = System.IO.Path.Combine(\n                        logDir, logNamePre)\n                        My.Computer.FileSystem.WriteAllText(filePath, m_log.txtLog.Text, True)\n                    End Sub)\n\n    End Sub\n</code></pre>\n<hr>\n<p>Okay, guys,</p>\n<p>What am I not testing?</p>\n<p>What could this hurt?  (Seriously.  Not sarcastically.)</p>\n<p>It wouldn't effect the web player at all, right?</p>\n<p>The web player does its own thing with <code>Log</code> and walkthroughs (which is ignoring them), right?</p>\n\n",
      "PostDate": "2017-11-30T19:53:30.6896405Z",
      "LastEditDate": "2017-11-30T20:04:27.2905832Z",
      "link": null
    },
    {
      "PostId": "c3860ed7-c4cb-4fe7-9f43-1949d6b78fc1",
      "UserId": 260569,
      "Username": "DarkLizerd",
      "AvatarUrl": "https://i.imgur.com/vjdH3t6b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Now... we need a file read function...\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Now... we need a file read function...</p>\n\n",
      "PostDate": "2017-11-30T20:18:17.6689321Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "685a90ad-5467-4072-9e7f-bbd112fcf482",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "We have that already.  (It's in Pixie's Quest.)\r\n\r\nIt's ```GetFileData()```, I think.\r\n\r\n---\r\nThe thing (or one of the things) is, the compiled game is running from inside of a zipped file (I think).  So (I think) it acts differently when you're testing in the editor than when you're playing an actual, built game.\r\n\r\nLike...\r\n\r\nWell I don't know.  I'll go play with a few functions and be right back.",
      "EditableFormat": "markdown",
      "HTML": "<p>We have that already.  (It's in Pixie's Quest.)</p>\n<p>It's <code>GetFileData()</code>, I think.</p>\n<hr>\n<p>The thing (or one of the things) is, the compiled game is running from inside of a zipped file (I think).  So (I think) it acts differently when you're testing in the editor than when you're playing an actual, built game.</p>\n<p>Like...</p>\n<p>Well I don't know.  I'll go play with a few functions and be right back.</p>\n\n",
      "PostDate": "2017-11-30T20:28:23.5576524Z",
      "LastEditDate": "2017-11-30T20:30:28.3128185Z",
      "link": null
    },
    {
      "PostId": "5267e788-e024-42b0-bb8c-d207f9b363ec",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "DL\r\n\r\nLookie here:\r\n\r\nhttp://textadventures.co.uk/forum/quest/topic/dsm3qslrtkooijastlxgga/reading-from-a-file",
      "EditableFormat": "markdown",
      "HTML": "<p>DL</p>\n<p>Lookie here:</p>\n<p>http://textadventures.co.uk/forum/quest/topic/dsm3qslrtkooijastlxgga/reading-from-a-file</p>\n\n",
      "PostDate": "2017-11-30T21:29:06.351085Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3ece31ff-429f-4b91-9d54-9f9718441096",
      "UserId": 260569,
      "Username": "DarkLizerd",
      "AvatarUrl": "https://i.imgur.com/vjdH3t6b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Saw that, thanks...\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Saw that, thanks...</p>\n\n",
      "PostDate": "2017-12-01T03:31:35.1939323Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "de4d5b5d-3fd4-400a-ab32-7af2b5b1a672",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\nfunction printTranscript() {\r\n    var iframe = document.createElement('iframe');\r\n    document.body.appendChild(iframe);\r\n    iframe.contentWindow.document.write($('#divOutput').html());\r\n    iframe.contentWindow.print();\r\n    document.body.removeChild(iframe);\r\n};\r\n```\r\n\r\n---\r\n\r\nI wonder how to stop that last line from running until the file has been printed (or saved).\r\n\r\nI always just save to a PDF.\r\n\r\nWhen I click \"Print\" in my Windows dialog box, it then goes to a screen where I enter the filename.  At that same moment, the last line of this script removes the iframe, and there is no text to save to a file.",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>function printTranscript() {\n    var iframe = document.createElement('iframe');\n    document.body.appendChild(iframe);\n    iframe.contentWindow.document.write($('#divOutput').html());\n    iframe.contentWindow.print();\n    document.body.removeChild(iframe);\n};\n</code></pre>\n<hr>\n<p>I wonder how to stop that last line from running until the file has been printed (or saved).</p>\n<p>I always just save to a PDF.</p>\n<p>When I click \"Print\" in my Windows dialog box, it then goes to a screen where I enter the filename.  At that same moment, the last line of this script removes the iframe, and there is no text to save to a file.</p>\n\n",
      "PostDate": "2018-01-24T04:10:03.5104518Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "808c887d-3566-4e32-bc96-897c2d4dba4e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\nfunction printTranscript() {\r\n    var iframe = document.createElement('iframe');\r\n    document.body.appendChild(iframe);\r\n    iframe.contentWindow.document.write($('#divOutput').html());\r\n    var afterprint = function(e){\r\n        $(window).off('mousemove', afterprint);\r\n        document.body.removeChild(iframe);\r\n    };\r\n    iframe.contentWindow.print();\r\n    setTimeout(function(){\r\n        $(window).on('mousemove', afterprint);\r\n    }, 1);\r\n};\r\n```\r\nDepending on your browser, either `setTimeout` or `onmousemove` (or both) will block until the print dialog is closed.\r\nI'd just use `setTimeout(function(){document.body.removeChild(iframe);},1);`, but apparently there's some browsers where that doesn't work.",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>function printTranscript() {\n    var iframe = document.createElement('iframe');\n    document.body.appendChild(iframe);\n    iframe.contentWindow.document.write($('#divOutput').html());\n    var afterprint = function(e){\n        $(window).off('mousemove', afterprint);\n        document.body.removeChild(iframe);\n    };\n    iframe.contentWindow.print();\n    setTimeout(function(){\n        $(window).on('mousemove', afterprint);\n    }, 1);\n};\n</code></pre>\n<p>Depending on your browser, either <code>setTimeout</code> or <code>onmousemove</code> (or both) will block until the print dialog is closed.<br>\nI'd just use <code>setTimeout(function(){document.body.removeChild(iframe);},1);</code>, but apparently there's some browsers where that doesn't work.</p>\n\n",
      "PostDate": "2018-01-24T10:40:53.2198315Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "12b8481d-9a21-40b3-80c8-3630d364bf66",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks, MrAngel.\r\n\r\nThat works as it should, by my theory was incorrect.\r\n\r\nSomething displayed in my game will not print to PDF.  (Probably an image that's too wide?)\r\n\r\nAnyway, this is what I've got going on now:\r\n\r\n```\r\n/*\r\n\r\nTranscriptLib JS Functions\r\n\r\nby KV 2018\r\n\r\nTo be included with TranscriptLib.aslx.\r\n...or, you can make your own Quest functions and commands.\r\n\r\n---\r\n\r\nVersion 1.0\r\n\r\n---\r\n\r\n*/\r\n\r\n\r\n// ------------------------------------------------------------------\r\n\r\n// Modified addText() function:\r\n\r\nfunction addText(text) {\r\n\t\r\n\t  if (getCurrentDiv() == null) {\r\n\t\tcreateNewDiv(\"left\");\r\n\t  }\r\n\t  getCurrentDiv().append(text);\r\n\t  $(\"#divOutput\").css(\"min-height\", $(\"#divOutput\").height());\r\n\t  \r\n\t  // KV added this line:\r\n\t  addToTranscript(text);\r\n};\r\n\r\n// ------------------------------------------------------------------\r\n\r\n/*\r\n\r\nTranscript functions\r\n\r\n*/\r\n\r\nvar doingTranscript = true;\r\n\r\n\r\nfunction addToTranscript(text){\r\n\tif(doingTranscript){\r\n\t  transcriptContents += text\r\n\t}\r\n}\r\n\r\nfunction enableTranscript(){\r\n\tdoingTranscript = true;\r\n};\r\n\r\nfunction disableTranscript(){\r\n\tdoingTranscript = false;\r\n};\r\n\r\nvar transcriptContents = \"\";\r\n\r\nfunction setupTranscriptDiv(){\r\n  $(\"#transcriptDiv\").insertBefore($(\"#dialog\"));\r\n};\r\n\r\nfunction showTranscript(){\r\n\t$(\".do-not-print\").show();\r\n\t$(\"#transcriptContentsDiv\").html(transcriptContents);\r\n\t$(\"#transcriptDiv\").show();\r\n\t$(\"#gameBorder\").hide();\r\n};\r\n\r\nfunction hideTranscript(){\r\n\t$(\"#transcriptDiv\").hide();\r\n\t$(\"#gameBorder\").show();\r\n};\r\n\r\nfunction printTranscriptDiv(){\r\n  setTimeout(function(){\r\n\tprint();\r\n\t$('.do-not-print').show();\r\n  },500);\r\n  $('.do-not-print').hide();\r\n};\r\n\r\n// ------------------------------------------------------------------\r\n\r\n```\r\n\r\n---\r\nI also have the log saving to a .txt file on the hard drive.\r\n\r\n(It took me this long to learn that much about vb.net!)\r\n\r\n\r\n---\r\n\r\nI do very much appreciate all of your help.  \r\n\r\n...and, as soon as I get some income rolling in, you'll notice when you check out Amazon.\r\n\r\n(Support our troops!)",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks, MrAngel.</p>\n<p>That works as it should, by my theory was incorrect.</p>\n<p>Something displayed in my game will not print to PDF.  (Probably an image that's too wide?)</p>\n<p>Anyway, this is what I've got going on now:</p>\n<pre><code>/*\n\nTranscriptLib JS Functions\n\nby KV 2018\n\nTo be included with TranscriptLib.aslx.\n...or, you can make your own Quest functions and commands.\n\n---\n\nVersion 1.0\n\n---\n\n*/\n\n\n// ------------------------------------------------------------------\n\n// Modified addText() function:\n\nfunction addText(text) {\n\t\n\t  if (getCurrentDiv() == null) {\n\t\tcreateNewDiv(\"left\");\n\t  }\n\t  getCurrentDiv().append(text);\n\t  $(\"#divOutput\").css(\"min-height\", $(\"#divOutput\").height());\n\t  \n\t  // KV added this line:\n\t  addToTranscript(text);\n};\n\n// ------------------------------------------------------------------\n\n/*\n\nTranscript functions\n\n*/\n\nvar doingTranscript = true;\n\n\nfunction addToTranscript(text){\n\tif(doingTranscript){\n\t  transcriptContents += text\n\t}\n}\n\nfunction enableTranscript(){\n\tdoingTranscript = true;\n};\n\nfunction disableTranscript(){\n\tdoingTranscript = false;\n};\n\nvar transcriptContents = \"\";\n\nfunction setupTranscriptDiv(){\n  $(\"#transcriptDiv\").insertBefore($(\"#dialog\"));\n};\n\nfunction showTranscript(){\n\t$(\".do-not-print\").show();\n\t$(\"#transcriptContentsDiv\").html(transcriptContents);\n\t$(\"#transcriptDiv\").show();\n\t$(\"#gameBorder\").hide();\n};\n\nfunction hideTranscript(){\n\t$(\"#transcriptDiv\").hide();\n\t$(\"#gameBorder\").show();\n};\n\nfunction printTranscriptDiv(){\n  setTimeout(function(){\n\tprint();\n\t$('.do-not-print').show();\n  },500);\n  $('.do-not-print').hide();\n};\n\n// ------------------------------------------------------------------\n\n</code></pre>\n<hr>\n<p>I also have the log saving to a .txt file on the hard drive.</p>\n<p>(It took me this long to learn that much about vb.net!)</p>\n<hr>\n<p>I do very much appreciate all of your help.</p>\n<p>...and, as soon as I get some income rolling in, you'll notice when you check out Amazon.</p>\n<p>(Support our troops!)</p>\n\n",
      "PostDate": "2018-01-24T11:37:13.4576943Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a891f72d-fc85-46d7-9404-a65f6ffa60cf",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\n<!-- TranscriptLib by KV -->\r\n\r\n<!--\r\n\r\nIMPORTANT NOTE:\r\n\r\nYou will need TranscriptLibJS.js.txt included in your game for this to work!\r\n\r\nAdd this line just before the very last line of your game (which is </asl>):\r\n\r\n<javascript src=\"TranscriptLibJS.js.txt\" />\r\n\r\n-->\r\n\r\n\r\n\r\n<library>\r\n\r\n  <object name=\"transcript_scripts_object\">\r\n    <enabled type=\"boolean\">true</enabled>\r\n  </object>\r\n  \r\n  \r\n <command name=\"show_transcript_cmd\">\r\n    <pattern>display transcript;show transcript;view transcript;print transcript;show script;view script;print script;display script;</pattern>\r\n    <script>\r\n      ShowTranscript\r\n    </script>\r\n  </command>\r\n  \r\n  \r\n  <command name=\"transcript_cmd\">\r\n    <pattern>script;transcript</pattern>\r\n    <script>\r\n      if(transcript_scripts_object.enabled){\r\n\t    transcript_scripts_object.enabled = false\r\n\t\tJS.disableTranscript()\r\n\t  }\r\n\t  else{\r\n\t    transcript_scripts_object.enabled = true\r\n\t\tJS.enableTranscript()\r\n\t  }\r\n\t  msg(\"The transcript is now {either transcript_scripts_object.enabled:ENABLED|DISABLED}.  (Enter SHOW TRANSCRIPT to view/print it.)\")\r\n    </script>\r\n  </command>\r\n  \r\n  <function name=\"ShowTranscript\"><![CDATA[\r\n    firsttime {\r\n      msg (\"<div id='transcriptDiv' style='display:none;'><a class='do-not-print' href='' onclick='hideTranscript()'>RETURN TO THE GAME</a>  <a class='do-not-print' href='' onclick='printTranscriptDiv();'>PRINT</a> <div id='transcriptContentsDiv' '></div></div>\")\r\n      JS.setupTranscriptDiv ()\r\n    }\r\n    JS.showTranscript ()\r\n  ]]></function>\r\n  \r\n</library>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>&lt;!-- TranscriptLib by KV --&gt;\n\n&lt;!--\n\nIMPORTANT NOTE:\n\nYou will need TranscriptLibJS.js.txt included in your game for this to work!\n\nAdd this line just before the very last line of your game (which is &lt;/asl&gt;):\n\n&lt;javascript src=\"TranscriptLibJS.js.txt\" /&gt;\n\n--&gt;\n\n\n\n&lt;library&gt;\n\n  &lt;object name=\"transcript_scripts_object\"&gt;\n    &lt;enabled type=\"boolean\"&gt;true&lt;/enabled&gt;\n  &lt;/object&gt;\n  \n  \n &lt;command name=\"show_transcript_cmd\"&gt;\n    &lt;pattern&gt;display transcript;show transcript;view transcript;print transcript;show script;view script;print script;display script;&lt;/pattern&gt;\n    &lt;script&gt;\n      ShowTranscript\n    &lt;/script&gt;\n  &lt;/command&gt;\n  \n  \n  &lt;command name=\"transcript_cmd\"&gt;\n    &lt;pattern&gt;script;transcript&lt;/pattern&gt;\n    &lt;script&gt;\n      if(transcript_scripts_object.enabled){\n\t    transcript_scripts_object.enabled = false\n\t\tJS.disableTranscript()\n\t  }\n\t  else{\n\t    transcript_scripts_object.enabled = true\n\t\tJS.enableTranscript()\n\t  }\n\t  msg(\"The transcript is now {either transcript_scripts_object.enabled:ENABLED|DISABLED}.  (Enter SHOW TRANSCRIPT to view/print it.)\")\n    &lt;/script&gt;\n  &lt;/command&gt;\n  \n  &lt;function name=\"ShowTranscript\"&gt;&lt;![CDATA[\n    firsttime {\n      msg (\"&lt;div id='transcriptDiv' style='display:none;'&gt;&lt;a class='do-not-print' href='' onclick='hideTranscript()'&gt;RETURN TO THE GAME&lt;/a&gt;  &lt;a class='do-not-print' href='' onclick='printTranscriptDiv();'&gt;PRINT&lt;/a&gt; &lt;div id='transcriptContentsDiv' '&gt;&lt;/div&gt;&lt;/div&gt;\")\n      JS.setupTranscriptDiv ()\n    }\n    JS.showTranscript ()\n  ]]&gt;&lt;/function&gt;\n  \n&lt;/library&gt;\n</code></pre>\n\n",
      "PostDate": "2018-01-24T11:40:48.0536304Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "949616d4-5230-49de-9c14-186121a5a5f1",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "# I've gotten the log to save to a file in the desktop version, but now...\r\n\r\n---\r\n## I've got a script to view the log with the web player. \r\n\r\n#### (<s>It doesn't have SAVE functionality yet, but I should be able to use the same method I ended up with for printing the transcript.  So, there should be an update coming soon.)</s>  \r\n\r\n#### It has save functionality when using the web player now.  (I've modified the desktop player so it automatically saves a log file when entries are added.)\r\n\r\n---\r\n\r\n### The JS (LogLibJS.js)  [UPDATED]:\r\n\r\n```\r\n\r\nvar logVar = \"\";\r\nfunction addLogEntry(text){\r\n  logVar += getTimeAndDateForLog() + ' ' + text+\"NEW_LINE\";\r\n};\r\n\r\nfunction showLog(){\r\n  var logDivString = \"\";\r\n  logDivString += \"<div \";\r\n  logDivString += \"id='log-dialog' \";\r\n  logDivString += \"style='display:none;;'>\";\r\n  logDivString += \"<textarea id='logdata' rows='13'\";\r\n  logDivString += \"  cols='49'></textarea></div>\";\r\n  addText(logDivString);\r\n  if(webPlayer){\r\n  var logDialog = $(\"#log-dialog\").dialog({\r\n    autoOpen: false,\r\n    width: 600,\r\n    height: 500,\r\n    title: \"Log\",\r\n    buttons: {\r\n      Ok: function() {\r\n        $(this).dialog(\"close\");\r\n      },\r\n      Print: function(){\r\n        $(this).dialog(\"close\");\r\n        showLogDiv();\r\n        printLogDiv();\r\n      },\r\n      Save: function(){\r\n        $(this).dialog(\"close\");\r\n        saveLog();\r\n      },\r\n    },\r\n    show: { effect: \"fadeIn\", duration: 500 },\r\n    // The modal setting keeps the player from interacting with anything besides the dialog window.\r\n    //  (The log will not update while open without adding a turn script.  I prefer this.)\r\n    modal: true,\r\n  });\r\n  }else{\r\n    var logDialog = $(\"#log-dialog\").dialog({\r\n    autoOpen: false,\r\n    width: 600,\r\n    height: 500,\r\n    title: \"Log\",\r\n    buttons: {\r\n      Ok: function() {\r\n        $(this).dialog(\"close\");\r\n      },\r\n      Print: function(){\r\n        $(this).dialog(\"close\");\r\n        showLogDiv();\r\n        printLogDiv();\r\n      },\r\n    },\r\n    show: { effect: \"fadeIn\", duration: 500 },\r\n    // The modal setting keeps the player from interacting with anything besides the dialog window.\r\n    //  (The log will not update while open without adding a turn script.  I prefer this.)\r\n    modal: true,\r\n  });\r\n  }\r\n  $('textarea#logdata').val(logVar.replace(/NEW_LINE/g,\"\\n\"));\r\n  logDialog.dialog(\"open\");\r\n};\r\n\r\nvar logDivIsSetUp = false;\r\n\r\nvar logDivToAdd = \"\";\r\nlogDivToAdd += \"<div \";\r\nlogDivToAdd += \"id='log-div' \";\r\nlogDivToAdd += \"style='display:none;'>\";\r\nlogDivToAdd += \"<a class='do-not-print-with-log' \";\r\nlogDivToAdd += \"href='' onclick='hideLogDiv()'>RETURN TO THE GAME</a>  \";\r\nlogDivToAdd += \"<a class='do-not-print-with-log' href='' \";\r\nlogDivToAdd += \"onclick='printLogDiv();'>PRINT</a> \";\r\nlogDivToAdd += \"<div id='log-contents-div' '></div></div>\";\r\n\r\nfunction setupLogDiv(){\r\n  addText(logDivToAdd);\r\n  $(\"#log-div\").insertBefore($(\"#dialog\"));\r\n  logDivIsSetUp = true;\r\n};\r\n\r\nfunction showLogDiv(){\r\n    if(!logDivIsSetUp){\r\n     setupLogDiv(); \r\n    }\r\n\t$(\".do-not-print-with-log\").show();\r\n\t$(\"#log-contents-div\").html(logVar.replace(/NEW_LINE/g,\"<br/>\"));\r\n\t$(\"#log-div\").show();\r\n\t$(\"#gameBorder\").hide();\r\n};\r\n\r\nfunction hideLogDiv(){\r\n\t$(\"#log-div\").hide();\r\n\t$(\"#gameBorder\").show();\r\n};\r\n\r\nfunction printLogDiv(){\r\n  if(typeof(document.title) !== \"undefined\"){\r\n    var docTitleBak = document.title;\r\n  }else{\r\n    var docTitleBak = \"title\";\r\n  }\r\n  document.title = \"log.txt\" ;\r\n  $('.do-not-print-with-log').hide();\r\n  print();\r\n  $('.do-not-print-with-log').show();\r\n  document.title = docTitleBak;\r\n};\r\n\r\n\r\nfunction saveLog(){\r\n  if(webPlayer){\r\n    var href = \"data:text/plain,\"+logVar.replace(/NEW_LINE/g,\"\\n\");\r\n    addTextAndScroll(\"<a download='log.txt' href='\"+href+\"' id='log-save-link'>Click here to save the log if your pop-up blocker stopped the download.</a>\");\r\n    document.getElementById(\"log-save-link\").addEventListener (\"click\", function (e) {e.stopPropagation();});\r\n    document.getElementById(\"log-save-link\").click();\r\n  }else{\r\n    alert(\"This function is only available while playing online.\");\r\n  }\r\n };\r\n\r\nfunction getTimeAndDateForLog(){\r\n\tvar today = new Date();\r\n\tvar dd = today.getDate();\r\n\tvar mm = today.getMonth()+1;\r\n\tvar yyyy = today.getFullYear();\r\n\tvar hrs = today.getHours();\r\n\tvar mins = today.getMinutes();\r\n\tvar secs = today.getSeconds();\r\n\ttoday = mm + '/' + dd + '/' + yyyy;\r\n\tif(hrs>12) {\r\n\t  ampm = 'AM';\r\n\t  hrs = '0' + '' + hrs - 12\r\n\t}else{\r\n\t  ampm = 'PM';\r\n\t} \r\n\tif (mins<10) {\r\n\t  mins = '0'+mins;\r\n\t} \r\n\tif(secs<10) {\r\n\t  secs = '0' + secs;\r\n\t}\r\n\ttime = hrs + ':' + mins + ':' + secs + ' ' + ampm;\r\n\treturn today + ' ' + time;\r\n};\r\n\r\n```\r\n\r\n---\r\n\r\n## The Quest command and modified Log() function:\r\n\r\n```\r\n\r\n  <command name=\"log_cmd\">\r\n    <pattern>log;view log;display log;view the log;display the log</pattern>\r\n    <script>\r\n      game.notarealturn = true\r\n      JS.showLog ()\r\n    </script>\r\n  </command>\r\n\r\n  <function name=\"Log\" parameters=\"text\">\r\n    request (Log, text)\r\n    JS.eval (\"if(typeof(addLogEntry)==='function'){ addLogEntry('\"+text+\"'); };\")\r\n  </function>\r\n\r\n```\r\n\r\n\r\n\r\n---\r\n\r\n### The example game:\r\n\r\n```\r\n\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Logging\">\r\n    <gameid>c575b244-66e5-4aec-ae6f-5144ad3906d7</gameid>\r\n    <version>0.0.15</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <commandpane />\r\n    <author>KV</author>\r\n    <start type=\"script\"><![CDATA[\r\n      JS.setCommands (\"Look;Wait;<br/>;<br/>;View the Log\")\r\n      Log (\"Running the start script.\")\r\n    ]]></start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\">\r\n      Log (\"Entered \"+GetDisplayName(this)+\".\")\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <command name=\"log_cmd\">\r\n    <pattern>log;view log;display log;view the log;display the log</pattern>\r\n    <script>\r\n      game.notarealturn = true\r\n      JS.showLog ()\r\n    </script>\r\n  </command>\r\n  <turnscript name=\"example_logging_turnscript_NOT_REQUIRED\">\r\n    <enabled />\r\n    <script>\r\n      Log (\"Firing turn scripts!\")\r\n    </script>\r\n  </turnscript>\r\n  <function name=\"Log\" parameters=\"text\">\r\n    request (Log, text)\r\n    JS.eval (\"if(typeof(addLogEntry)==='function'){ addLogEntry('\"+text+\"'); };\")\r\n  </function>\r\n  <javascript src=\"LogLibJS.js\" />\r\n</asl>\r\n\r\n```\r\n\r\n\r\n---\r\n\r\n### Example game's main page:\r\n\r\nhttp://textadventures.co.uk/games/view/7z6_vcpa7ewfr04tda0_zw/logging\r\n\r\n---\r\n### Direct link to game:\r\n\r\nhttp://play2.textadventures.co.uk/Play.aspx?id=7z6_vcpa7ewfr04tda0_zw\r\n\r\n<span style='color:white'>I CAN POST THIS HERE!</span>",
      "EditableFormat": "markdown",
      "HTML": "<h1>I've gotten the log to save to a file in the desktop version, but now...</h1>\n<hr>\n<h2>I've got a script to view the log with the web player.</h2>\n<h4>(<s>It doesn't have SAVE functionality yet, but I should be able to use the same method I ended up with for printing the transcript.  So, there should be an update coming soon.)</s></h4>\n<h4>It has save functionality when using the web player now.  (I've modified the desktop player so it automatically saves a log file when entries are added.)</h4>\n<hr>\n<h3>The JS (LogLibJS.js)  [UPDATED]:</h3>\n<pre><code>\nvar logVar = \"\";\nfunction addLogEntry(text){\n  logVar += getTimeAndDateForLog() + ' ' + text+\"NEW_LINE\";\n};\n\nfunction showLog(){\n  var logDivString = \"\";\n  logDivString += \"&lt;div \";\n  logDivString += \"id='log-dialog' \";\n  logDivString += \"style='display:none;;'&gt;\";\n  logDivString += \"&lt;textarea id='logdata' rows='13'\";\n  logDivString += \"  cols='49'&gt;&lt;/textarea&gt;&lt;/div&gt;\";\n  addText(logDivString);\n  if(webPlayer){\n  var logDialog = $(\"#log-dialog\").dialog({\n    autoOpen: false,\n    width: 600,\n    height: 500,\n    title: \"Log\",\n    buttons: {\n      Ok: function() {\n        $(this).dialog(\"close\");\n      },\n      Print: function(){\n        $(this).dialog(\"close\");\n        showLogDiv();\n        printLogDiv();\n      },\n      Save: function(){\n        $(this).dialog(\"close\");\n        saveLog();\n      },\n    },\n    show: { effect: \"fadeIn\", duration: 500 },\n    // The modal setting keeps the player from interacting with anything besides the dialog window.\n    //  (The log will not update while open without adding a turn script.  I prefer this.)\n    modal: true,\n  });\n  }else{\n    var logDialog = $(\"#log-dialog\").dialog({\n    autoOpen: false,\n    width: 600,\n    height: 500,\n    title: \"Log\",\n    buttons: {\n      Ok: function() {\n        $(this).dialog(\"close\");\n      },\n      Print: function(){\n        $(this).dialog(\"close\");\n        showLogDiv();\n        printLogDiv();\n      },\n    },\n    show: { effect: \"fadeIn\", duration: 500 },\n    // The modal setting keeps the player from interacting with anything besides the dialog window.\n    //  (The log will not update while open without adding a turn script.  I prefer this.)\n    modal: true,\n  });\n  }\n  $('textarea#logdata').val(logVar.replace(/NEW_LINE/g,\"\\n\"));\n  logDialog.dialog(\"open\");\n};\n\nvar logDivIsSetUp = false;\n\nvar logDivToAdd = \"\";\nlogDivToAdd += \"&lt;div \";\nlogDivToAdd += \"id='log-div' \";\nlogDivToAdd += \"style='display:none;'&gt;\";\nlogDivToAdd += \"&lt;a class='do-not-print-with-log' \";\nlogDivToAdd += \"href='' onclick='hideLogDiv()'&gt;RETURN TO THE GAME&lt;/a&gt;  \";\nlogDivToAdd += \"&lt;a class='do-not-print-with-log' href='' \";\nlogDivToAdd += \"onclick='printLogDiv();'&gt;PRINT&lt;/a&gt; \";\nlogDivToAdd += \"&lt;div id='log-contents-div' '&gt;&lt;/div&gt;&lt;/div&gt;\";\n\nfunction setupLogDiv(){\n  addText(logDivToAdd);\n  $(\"#log-div\").insertBefore($(\"#dialog\"));\n  logDivIsSetUp = true;\n};\n\nfunction showLogDiv(){\n    if(!logDivIsSetUp){\n     setupLogDiv(); \n    }\n\t$(\".do-not-print-with-log\").show();\n\t$(\"#log-contents-div\").html(logVar.replace(/NEW_LINE/g,\"&lt;br/&gt;\"));\n\t$(\"#log-div\").show();\n\t$(\"#gameBorder\").hide();\n};\n\nfunction hideLogDiv(){\n\t$(\"#log-div\").hide();\n\t$(\"#gameBorder\").show();\n};\n\nfunction printLogDiv(){\n  if(typeof(document.title) !== \"undefined\"){\n    var docTitleBak = document.title;\n  }else{\n    var docTitleBak = \"title\";\n  }\n  document.title = \"log.txt\" ;\n  $('.do-not-print-with-log').hide();\n  print();\n  $('.do-not-print-with-log').show();\n  document.title = docTitleBak;\n};\n\n\nfunction saveLog(){\n  if(webPlayer){\n    var href = \"data:text/plain,\"+logVar.replace(/NEW_LINE/g,\"\\n\");\n    addTextAndScroll(\"&lt;a download='log.txt' href='\"+href+\"' id='log-save-link'&gt;Click here to save the log if your pop-up blocker stopped the download.&lt;/a&gt;\");\n    document.getElementById(\"log-save-link\").addEventListener (\"click\", function (e) {e.stopPropagation();});\n    document.getElementById(\"log-save-link\").click();\n  }else{\n    alert(\"This function is only available while playing online.\");\n  }\n };\n\nfunction getTimeAndDateForLog(){\n\tvar today = new Date();\n\tvar dd = today.getDate();\n\tvar mm = today.getMonth()+1;\n\tvar yyyy = today.getFullYear();\n\tvar hrs = today.getHours();\n\tvar mins = today.getMinutes();\n\tvar secs = today.getSeconds();\n\ttoday = mm + '/' + dd + '/' + yyyy;\n\tif(hrs&gt;12) {\n\t  ampm = 'AM';\n\t  hrs = '0' + '' + hrs - 12\n\t}else{\n\t  ampm = 'PM';\n\t} \n\tif (mins&lt;10) {\n\t  mins = '0'+mins;\n\t} \n\tif(secs&lt;10) {\n\t  secs = '0' + secs;\n\t}\n\ttime = hrs + ':' + mins + ':' + secs + ' ' + ampm;\n\treturn today + ' ' + time;\n};\n\n</code></pre>\n<hr>\n<h2>The Quest command and modified Log() function:</h2>\n<pre><code>\n  &lt;command name=\"log_cmd\"&gt;\n    &lt;pattern&gt;log;view log;display log;view the log;display the log&lt;/pattern&gt;\n    &lt;script&gt;\n      game.notarealturn = true\n      JS.showLog ()\n    &lt;/script&gt;\n  &lt;/command&gt;\n\n  &lt;function name=\"Log\" parameters=\"text\"&gt;\n    request (Log, text)\n    JS.eval (\"if(typeof(addLogEntry)==='function'){ addLogEntry('\"+text+\"'); };\")\n  &lt;/function&gt;\n\n</code></pre>\n<hr>\n<h3>The example game:</h3>\n<pre><code>\n&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Logging\"&gt;\n    &lt;gameid&gt;c575b244-66e5-4aec-ae6f-5144ad3906d7&lt;/gameid&gt;\n    &lt;version&gt;0.0.15&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;commandpane /&gt;\n    &lt;author&gt;KV&lt;/author&gt;\n    &lt;start type=\"script\"&gt;&lt;![CDATA[\n      JS.setCommands (\"Look;Wait;&lt;br/&gt;;&lt;br/&gt;;View the Log\")\n      Log (\"Running the start script.\")\n    ]]&gt;&lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;\n      Log (\"Entered \"+GetDisplayName(this)+\".\")\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command name=\"log_cmd\"&gt;\n    &lt;pattern&gt;log;view log;display log;view the log;display the log&lt;/pattern&gt;\n    &lt;script&gt;\n      game.notarealturn = true\n      JS.showLog ()\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;turnscript name=\"example_logging_turnscript_NOT_REQUIRED\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      Log (\"Firing turn scripts!\")\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;function name=\"Log\" parameters=\"text\"&gt;\n    request (Log, text)\n    JS.eval (\"if(typeof(addLogEntry)==='function'){ addLogEntry('\"+text+\"'); };\")\n  &lt;/function&gt;\n  &lt;javascript src=\"LogLibJS.js\" /&gt;\n&lt;/asl&gt;\n\n</code></pre>\n<hr>\n<h3>Example game's main page:</h3>\n<p>http://textadventures.co.uk/games/view/7z6_vcpa7ewfr04tda0_zw/logging</p>\n<hr>\n<h3>Direct link to game:</h3>\n<p>http://play2.textadventures.co.uk/Play.aspx?id=7z6_vcpa7ewfr04tda0_zw</p>\n<p><span style=\"color: white\">I CAN POST THIS HERE!</span></p>\n\n",
      "PostDate": "2018-01-25T02:06:43.691921Z",
      "LastEditDate": "2018-01-25T04:50:30.9534134Z",
      "link": null
    },
    {
      "PostId": "117a2618-e58c-462c-9254-55d906d213d2",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here's the vb.net Log function as I've modified it in the source code.\r\n\r\nYou can enter:\r\n\r\n```\r\nLog(\"TxtFile:filename>>>Text to save to filename.txt goes here!\")\r\n```\r\n\r\n...or...\r\n\r\n```\r\nLog(\"Transcript>>>Text to save to transcript.\") \r\n// I use this in the OutputText() and OutputTextNoBreak() scripts like so:\r\n// Log(\"Transcript>>>\"+ProcessText(text))\r\n// This prints all text to a Transcript file.\r\n```\r\n\r\n...or just:\r\n\r\n```\r\nLog(\"Some text goes here.\")\r\n```\r\n\r\n\r\nFrom player.vb:\r\n\r\n```\r\n    Public Sub Log(text As String) Implements IPlayer.Log\r\n        BeginInvoke(Sub()\r\n                        If m_log Is Nothing Then\r\n                            m_log = New Log\r\n                        End If\r\n                        If m_log.txtLog.TextLength > 0 Then\r\n                            m_log.txtLog.AppendText(Environment.NewLine)\r\n                        End If\r\n                        'Modified by KV\r\n                        'This is for the SaveLoad library:\r\n                        If text.StartsWith(\"SaveLoadFile:\") Then\r\n                            Dim filePath As String\r\n                            Dim logNamePre As String\r\n                            Dim logDir As String\r\n                            logDir = My.Computer.FileSystem.SpecialDirectories.MyDocuments + \"\\Quest Games\\\" + m_gameName\r\n                            'logDir = Directory.GetCurrentDirectory()\r\n                            My.Computer.FileSystem.CreateDirectory(logDir)\r\n                            logNamePre = m_gameName + \"-quest_save_\" + Date.Now.ToString(\"yyyy-MM-dd_HH.mm.ss\") + \".txt\"\r\n                            filePath = System.IO.Path.Combine(\r\n                            logDir, logNamePre)\r\n                            m_log.txtLog.AppendText(Environment.NewLine + \"Save file saved as \" + filePath)\r\n                            My.Computer.FileSystem.WriteAllText(filePath, text, True)\r\n                            'This is to save a .txt file to the hard drive.\r\n                        ElseIf text.StartsWith(\"TxtFile:\") Then\r\n                            Dim filePath As String\r\n                            Dim textArr() As String\r\n                            Dim filename As String\r\n                            Dim saveDir As String\r\n                            Dim saveNamePre As String\r\n                            textArr = Split(text, \">>>\")\r\n                            filename = textArr(0)\r\n                            text = textArr(1)\r\n                            filename = filename.Replace(\"TxtFile:\", \"\")\r\n                            saveDir = My.Computer.FileSystem.SpecialDirectories.MyDocuments + \"\\Quest - \" + m_gameName + \" - Bonus Files\"\r\n                            My.Computer.FileSystem.CreateDirectory(saveDir)\r\n                            saveNamePre = filename + \".txt\"\r\n                            filePath = System.IO.Path.Combine(\r\n                            saveDir, saveNamePre)\r\n                            m_log.txtLog.AppendText(Environment.NewLine + \"File saved as \" + filePath)\r\n                            My.Computer.FileSystem.WriteAllText(filePath, text, False)\r\n                        ElseIf text.StartsWith(\"Transcript>>>\") Then\r\n                            'This is modified to save a transcript\r\n                            Dim filePath As String\r\n                            Dim textArr() As String\r\n                            Dim filename As String\r\n                            Dim saveDir As String\r\n                            Dim saveNamePre As String\r\n                            textArr = Split(text, \">>>\")\r\n                            filename = m_gameName + \"_transcript\"\r\n                            text = textArr(1)\r\n                            'text = StripTags(text)\r\n                            saveDir = My.Computer.FileSystem.SpecialDirectories.MyDocuments + \"\\Quest Transcripts\\\" + m_gameName + \" - Transcripts\"\r\n                            My.Computer.FileSystem.CreateDirectory(saveDir)\r\n                            saveNamePre = filename + \".html\"\r\n                            filePath = System.IO.Path.Combine(\r\n                            saveDir, saveNamePre)\r\n                            'm_log.txtLog.AppendText(Environment.NewLine + \"File saved as \" + filePath)\r\n                            My.Computer.FileSystem.WriteAllText(filePath, text, True)\r\n                        Else\r\n                            'This is modified to save a log file\r\n                            m_log.txtLog.AppendText(DateTime.Now.ToString() + \" \" + text)\r\n                            m_log.txtLog.Select(m_log.txtLog.Text.Length, 0)\r\n                            m_log.txtLog.ScrollToCaret()\r\n                            Dim filePath As String\r\n                            Dim logNamePre As String\r\n                            Dim logDir As String\r\n                            logDir = My.Computer.FileSystem.SpecialDirectories.MyDocuments + \"\\Quest Logs\\\" + m_gameName\r\n                            My.Computer.FileSystem.CreateDirectory(logDir)\r\n                            logNamePre = m_gameName + \"-log.txt\"\r\n                            filePath = System.IO.Path.Combine(\r\n                            logDir, logNamePre)\r\n                            m_log.txtLog.AppendText(Environment.NewLine + \"Saved log to: \" + filePath)\r\n                            Dim logEntry As String\r\n                            logEntry = DateTime.Now.ToString() + \" \" + text + Environment.NewLine\r\n                            My.Computer.FileSystem.WriteAllText(filePath, logEntry, True)\r\n                        End If\r\n                    End Sub)\r\n\r\n    End Sub\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Here's the vb.net Log function as I've modified it in the source code.</p>\n<p>You can enter:</p>\n<pre><code>Log(\"TxtFile:filename&gt;&gt;&gt;Text to save to filename.txt goes here!\")\n</code></pre>\n<p>...or...</p>\n<pre><code>Log(\"Transcript&gt;&gt;&gt;Text to save to transcript.\") \n// I use this in the OutputText() and OutputTextNoBreak() scripts like so:\n// Log(\"Transcript&gt;&gt;&gt;\"+ProcessText(text))\n// This prints all text to a Transcript file.\n</code></pre>\n<p>...or just:</p>\n<pre><code>Log(\"Some text goes here.\")\n</code></pre>\n<p>From player.vb:</p>\n<pre><code>    Public Sub Log(text As String) Implements IPlayer.Log\n        BeginInvoke(Sub()\n                        If m_log Is Nothing Then\n                            m_log = New Log\n                        End If\n                        If m_log.txtLog.TextLength &gt; 0 Then\n                            m_log.txtLog.AppendText(Environment.NewLine)\n                        End If\n                        'Modified by KV\n                        'This is for the SaveLoad library:\n                        If text.StartsWith(\"SaveLoadFile:\") Then\n                            Dim filePath As String\n                            Dim logNamePre As String\n                            Dim logDir As String\n                            logDir = My.Computer.FileSystem.SpecialDirectories.MyDocuments + \"\\Quest Games\\\" + m_gameName\n                            'logDir = Directory.GetCurrentDirectory()\n                            My.Computer.FileSystem.CreateDirectory(logDir)\n                            logNamePre = m_gameName + \"-quest_save_\" + Date.Now.ToString(\"yyyy-MM-dd_HH.mm.ss\") + \".txt\"\n                            filePath = System.IO.Path.Combine(\n                            logDir, logNamePre)\n                            m_log.txtLog.AppendText(Environment.NewLine + \"Save file saved as \" + filePath)\n                            My.Computer.FileSystem.WriteAllText(filePath, text, True)\n                            'This is to save a .txt file to the hard drive.\n                        ElseIf text.StartsWith(\"TxtFile:\") Then\n                            Dim filePath As String\n                            Dim textArr() As String\n                            Dim filename As String\n                            Dim saveDir As String\n                            Dim saveNamePre As String\n                            textArr = Split(text, \"&gt;&gt;&gt;\")\n                            filename = textArr(0)\n                            text = textArr(1)\n                            filename = filename.Replace(\"TxtFile:\", \"\")\n                            saveDir = My.Computer.FileSystem.SpecialDirectories.MyDocuments + \"\\Quest - \" + m_gameName + \" - Bonus Files\"\n                            My.Computer.FileSystem.CreateDirectory(saveDir)\n                            saveNamePre = filename + \".txt\"\n                            filePath = System.IO.Path.Combine(\n                            saveDir, saveNamePre)\n                            m_log.txtLog.AppendText(Environment.NewLine + \"File saved as \" + filePath)\n                            My.Computer.FileSystem.WriteAllText(filePath, text, False)\n                        ElseIf text.StartsWith(\"Transcript&gt;&gt;&gt;\") Then\n                            'This is modified to save a transcript\n                            Dim filePath As String\n                            Dim textArr() As String\n                            Dim filename As String\n                            Dim saveDir As String\n                            Dim saveNamePre As String\n                            textArr = Split(text, \"&gt;&gt;&gt;\")\n                            filename = m_gameName + \"_transcript\"\n                            text = textArr(1)\n                            'text = StripTags(text)\n                            saveDir = My.Computer.FileSystem.SpecialDirectories.MyDocuments + \"\\Quest Transcripts\\\" + m_gameName + \" - Transcripts\"\n                            My.Computer.FileSystem.CreateDirectory(saveDir)\n                            saveNamePre = filename + \".html\"\n                            filePath = System.IO.Path.Combine(\n                            saveDir, saveNamePre)\n                            'm_log.txtLog.AppendText(Environment.NewLine + \"File saved as \" + filePath)\n                            My.Computer.FileSystem.WriteAllText(filePath, text, True)\n                        Else\n                            'This is modified to save a log file\n                            m_log.txtLog.AppendText(DateTime.Now.ToString() + \" \" + text)\n                            m_log.txtLog.Select(m_log.txtLog.Text.Length, 0)\n                            m_log.txtLog.ScrollToCaret()\n                            Dim filePath As String\n                            Dim logNamePre As String\n                            Dim logDir As String\n                            logDir = My.Computer.FileSystem.SpecialDirectories.MyDocuments + \"\\Quest Logs\\\" + m_gameName\n                            My.Computer.FileSystem.CreateDirectory(logDir)\n                            logNamePre = m_gameName + \"-log.txt\"\n                            filePath = System.IO.Path.Combine(\n                            logDir, logNamePre)\n                            m_log.txtLog.AppendText(Environment.NewLine + \"Saved log to: \" + filePath)\n                            Dim logEntry As String\n                            logEntry = DateTime.Now.ToString() + \" \" + text + Environment.NewLine\n                            My.Computer.FileSystem.WriteAllText(filePath, logEntry, True)\n                        End If\n                    End Sub)\n\n    End Sub\n</code></pre>\n\n",
      "PostDate": "2018-01-25T05:08:09.7257887Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ac47b913-c271-4a9a-9c18-6f54fa3614c8",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well... \r\n\r\nAfter testing extensively, everything works except for the transcript.\r\n\r\nIf I save it as HTML, the display settings are usually all messed up (if the game's display settings ever change during play).\r\n\r\nIf I try to convert it to plain text (without using mrangel's method - passing through a data url, which the desktop player doesn't do correctly), the transcript has some style or some script code every once in a while.\r\n\r\nI think I've tried at least 20 different ways of approaching this, and it has defeated me.\r\n\r\nI thought ```$('#id-here').text()``` would do the trick once I got the ```ASLEvent()``` clone to pass the information to Quest without ending a turn prematurely, but that still outputs some unwanted code, just like the scripts to strip everything.\r\n\r\n---\r\nSo, this code is good for saving a text file or a SaveLoad save-file, but not for transcripts.  (Insert sad face here.)\r\n\r\nThe JS transcript stuff works great online, but it's only so/so in the desktop player.  It opens your browser, then you have to save or print it after that.  When online, it immediately prints or saves to a .txt file, whichever you click.  ...but it still doesn't append to a file on your hard drive (or a printed document), like text adventures have been capable of since the eighties.  (I'm banging my head on the desk right now.  Don't telly anyone, though; okay?)\r\n\r\nHrmm...\r\n\r\nPerhaps the transcript just isn't in the cards...\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Well...</p>\n<p>After testing extensively, everything works except for the transcript.</p>\n<p>If I save it as HTML, the display settings are usually all messed up (if the game's display settings ever change during play).</p>\n<p>If I try to convert it to plain text (without using mrangel's method - passing through a data url, which the desktop player doesn't do correctly), the transcript has some style or some script code every once in a while.</p>\n<p>I think I've tried at least 20 different ways of approaching this, and it has defeated me.</p>\n<p>I thought <code>$('#id-here').text()</code> would do the trick once I got the <code>ASLEvent()</code> clone to pass the information to Quest without ending a turn prematurely, but that still outputs some unwanted code, just like the scripts to strip everything.</p>\n<hr>\n<p>So, this code is good for saving a text file or a SaveLoad save-file, but not for transcripts.  (Insert sad face here.)</p>\n<p>The JS transcript stuff works great online, but it's only so/so in the desktop player.  It opens your browser, then you have to save or print it after that.  When online, it immediately prints or saves to a .txt file, whichever you click.  ...but it still doesn't append to a file on your hard drive (or a printed document), like text adventures have been capable of since the eighties.  (I'm banging my head on the desk right now.  Don't telly anyone, though; okay?)</p>\n<p>Hrmm...</p>\n<p>Perhaps the transcript just isn't in the cards...</p>\n\n",
      "PostDate": "2018-02-04T07:10:17.3593235Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "75dc39e6-71f3-4db3-8f87-23116b0f3687",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I was rambling there...\r\n\r\nConclusion:  the best way to handle a transcript is the method mrangel initially posted, back when I first brought this up.  I do have code that lets the desktop version pass a data: url to the user's default browser, though.  So, all is not lost.",
      "EditableFormat": "markdown",
      "HTML": "<p>I was rambling there...</p>\n<p>Conclusion:  the best way to handle a transcript is the method mrangel initially posted, back when I first brought this up.  I do have code that lets the desktop version pass a data: url to the user's default browser, though.  So, all is not lost.</p>\n\n",
      "PostDate": "2018-02-04T07:13:09.3034226Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "45d5d614-3849-4e7d-9009-da2badb3c67e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Just noticed that my text transcript outputs CSS and scripts literally; probably not what you want.\r\nIf you're using something like that, I think you would want to change `{HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}` to `{HR: \"\\n* * *\\n\", BR: \"\\n\\n\", SCRIPT: \" \", STYLE: \" \"}`.",
      "EditableFormat": "markdown",
      "HTML": "<p>Just noticed that my text transcript outputs CSS and scripts literally; probably not what you want.<br>\nIf you're using something like that, I think you would want to change <code>{HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}</code> to <code>{HR: \"\\n* * *\\n\", BR: \"\\n\\n\", SCRIPT: \" \", STYLE: \" \"}</code>.</p>\n\n",
      "PostDate": "2018-02-04T23:35:40.2690938Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b1d9e67d-a983-4403-9bd6-13bc61c7d786",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "First off, I'm dealing with the transcript now, not the log.  \r\n\r\nThe log is fine.  If someone adds a log entry which contains ```<style></style>```, then they will see it in the log.  Period.  (I'm fine with that.  How about everyone else?)\r\n\r\nAnyway, back to the transcript...\r\n\r\n---\r\n#### The text inside of the style element still prints, no matter I try.\r\n\r\n\r\nIn this game, this line is added to the ```ClearScreen()``` script, and the screen clears quite frequently:\r\n\r\n```\r\nOutputTextNoBr (game.css)\r\n```\r\n\r\n---\r\nHere is game.css:\r\n\r\n```\r\n<css><![CDATA[<style type=\"text/css\">div#txtCommandDiv {border:none; font-size:12pt; font-family:Georgia, serif; } input#txtCommand { outline:none; border:none; font-size:16px; margin:0; padding:0; }</style>\r\n   \r\n       <style type=\"text/css\">\r\n                 \r\n        div#txtCommandDiv {\r\n            border: none;\r\n            background: no-repeat;\r\n          }\r\n          input#txtCommand {\r\n            outline:none;\r\n            border: none;\r\n            margin:0;\r\n            padding:0;\r\n            max-width: 1000px;\r\n          }\r\n          #status { display: none !important; visibility: hidden !important; }       \r\n          </style>\r\n                                                                                                                                                                                                                                                                                                                                                                                                        ]]></css>\r\n```\r\n\r\n---\r\nHere is the modified ```addText()``` script:\r\n```\r\nfunction addText(text) {\r\n    if (getCurrentDiv() == null) {\r\n        createNewDiv(\"left\");\r\n    }\r\n    getCurrentDiv().append(text);\r\n    $(\"#divOutput\").css(\"min-height\", $(\"#divOutput\").height());\r\n    // Added to pass the text to the transcript\r\n    var tsd = $(\"<div></div>\");\r\n    tsd.insertBefore($(\"#dialog\"));\r\n    text = text.replace(/\\\\n/g,\"<br/>\");\r\n    tsd.html(text);\r\n    var thisEntry = \"\";\r\n    tsd.children().each(function (i) { thisEntry += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\", SCRIPT: \" \", STYLE: \" \"}[this.tagName] || $(this).text());});\r\n    transcriptVar += thisEntry;\r\n    tsd.remove();\r\n}\r\n```\r\n\r\n---\r\nThe output:\r\n\r\n```\r\n\r\ndiv#txtCommandDiv {border:none; font-size:12pt; font-family:Georgia, serif; } input#txtCommand { outline:none; border:none; font-size:16px; margin:0; padding:0; } div#txtCommandDiv { border: none; background: no-repeat; } input#txtCommand { outline:none; border: none; margin:0; padding:0; max-width: 1000px; } #status { display: none !important; visibility: hidden !important; } div#txtCommandDiv {border:none; font-size:12pt; font-family:Georgia, serif; } input#txtCommand { outline:none; border:none; font-size:16px; margin:0; padding:0; } div#txtCommandDiv { border: none; background: no-repeat; } input#txtCommand { outline:none; border: none; margin:0; padding:0; max-width: 1000px; } #status { display: none !important; visibility: hidden !important; } It all started innocently enough... div#txtCommandDiv {border:none; font-size:12pt; font-family:Georgia, serif; } input#txtCommand { outline:none; border:none; font-size:16px; margin:0; padding:0; } div#txtCommandDiv { border: none; background: no-repeat; } input#txtCommand { outline:none; border: none; margin:0; padding:0; max-width: 1000px; } #status { display: none !important; visibility: hidden !important; } ...you went with Straussberger, a friend and American military hero, to search an abandoned terrorist compound for clues.\r\n\r\n\r\n```\r\n\r\n\r\n---\r\n\r\nSo, I think game.css is added to the game as a literal string.  (Hopefully that terminology is correct.)\r\n\r\nThis would mean it's adding ```\\n``` to the HTML rather than ```<br/>```, correct?\r\n\r\nAnd, being that ```\\n``` is not a known element tag...\r\n\r\n\r\nHey...  Maybe I can remove the ```\\n``` with RegEx before...\r\n\r\nBe right back!\r\n\r\n---\r\nNope.  Didn't work.  I already tried that and forgot.",
      "EditableFormat": "markdown",
      "HTML": "<p>First off, I'm dealing with the transcript now, not the log.</p>\n<p>The log is fine.  If someone adds a log entry which contains <code>&lt;style&gt;&lt;/style&gt;</code>, then they will see it in the log.  Period.  (I'm fine with that.  How about everyone else?)</p>\n<p>Anyway, back to the transcript...</p>\n<hr>\n<h4>The text inside of the style element still prints, no matter I try.</h4>\n<p>In this game, this line is added to the <code>ClearScreen()</code> script, and the screen clears quite frequently:</p>\n<pre><code>OutputTextNoBr (game.css)\n</code></pre>\n<hr>\n<p>Here is game.css:</p>\n<pre><code>&lt;css&gt;&lt;![CDATA[&lt;style type=\"text/css\"&gt;div#txtCommandDiv {border:none; font-size:12pt; font-family:Georgia, serif; } input#txtCommand { outline:none; border:none; font-size:16px; margin:0; padding:0; }&lt;/style&gt;\n   \n       &lt;style type=\"text/css\"&gt;\n                 \n        div#txtCommandDiv {\n            border: none;\n            background: no-repeat;\n          }\n          input#txtCommand {\n            outline:none;\n            border: none;\n            margin:0;\n            padding:0;\n            max-width: 1000px;\n          }\n          #status { display: none !important; visibility: hidden !important; }       \n          &lt;/style&gt;\n                                                                                                                                                                                                                                                                                                                                                                                                        ]]&gt;&lt;/css&gt;\n</code></pre>\n<hr>\n<p>Here is the modified <code>addText()</code> script:</p>\n<pre><code>function addText(text) {\n    if (getCurrentDiv() == null) {\n        createNewDiv(\"left\");\n    }\n    getCurrentDiv().append(text);\n    $(\"#divOutput\").css(\"min-height\", $(\"#divOutput\").height());\n    // Added to pass the text to the transcript\n    var tsd = $(\"&lt;div&gt;&lt;/div&gt;\");\n    tsd.insertBefore($(\"#dialog\"));\n    text = text.replace(/\\\\n/g,\"&lt;br/&gt;\");\n    tsd.html(text);\n    var thisEntry = \"\";\n    tsd.children().each(function (i) { thisEntry += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\", SCRIPT: \" \", STYLE: \" \"}[this.tagName] || $(this).text());});\n    transcriptVar += thisEntry;\n    tsd.remove();\n}\n</code></pre>\n<hr>\n<p>The output:</p>\n<pre><code>\ndiv#txtCommandDiv {border:none; font-size:12pt; font-family:Georgia, serif; } input#txtCommand { outline:none; border:none; font-size:16px; margin:0; padding:0; } div#txtCommandDiv { border: none; background: no-repeat; } input#txtCommand { outline:none; border: none; margin:0; padding:0; max-width: 1000px; } #status { display: none !important; visibility: hidden !important; } div#txtCommandDiv {border:none; font-size:12pt; font-family:Georgia, serif; } input#txtCommand { outline:none; border:none; font-size:16px; margin:0; padding:0; } div#txtCommandDiv { border: none; background: no-repeat; } input#txtCommand { outline:none; border: none; margin:0; padding:0; max-width: 1000px; } #status { display: none !important; visibility: hidden !important; } It all started innocently enough... div#txtCommandDiv {border:none; font-size:12pt; font-family:Georgia, serif; } input#txtCommand { outline:none; border:none; font-size:16px; margin:0; padding:0; } div#txtCommandDiv { border: none; background: no-repeat; } input#txtCommand { outline:none; border: none; margin:0; padding:0; max-width: 1000px; } #status { display: none !important; visibility: hidden !important; } ...you went with Straussberger, a friend and American military hero, to search an abandoned terrorist compound for clues.\n\n\n</code></pre>\n<hr>\n<p>So, I think game.css is added to the game as a literal string.  (Hopefully that terminology is correct.)</p>\n<p>This would mean it's adding <code>\\n</code> to the HTML rather than <code>&lt;br/&gt;</code>, correct?</p>\n<p>And, being that <code>\\n</code> is not a known element tag...</p>\n<p>Hey...  Maybe I can remove the <code>\\n</code> with RegEx before...</p>\n<p>Be right back!</p>\n<hr>\n<p>Nope.  Didn't work.  I already tried that and forgot.</p>\n\n",
      "PostDate": "2018-02-05T14:24:05.4752769Z",
      "LastEditDate": "2018-02-05T14:59:04.6478211Z",
      "link": null
    },
    {
      "PostId": "55ade7ae-6f82-4770-8e04-48b96b164b58",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You mean my previous fix doesn't work?\r\nWeird.\r\n\r\nIf you put `STYLE: \"Something something test\\n\\n\"` instead of `STYLE: \" \"`, does it include the 'Something something' text before or after the CSS?\r\n\r\n(Note: This replaces all `<style>...</style>` or `<style />` elements with the specified string; IF the string is truthy in JS. That's why  I used a single space rather than an empty string)\r\n\r\nWait... that only checks top level elements. So you want to put `CSS: \" \"` in the list too, to remove the `<css>` element that contains the `<style>`s.\r\n\r\n> This would mean it's adding \"\\n\" to the HTML rather than\r\n\r\nNo. It just means that it doesn't append a `<br />` to the end of the string before adding it.",
      "EditableFormat": "markdown",
      "HTML": "<p>You mean my previous fix doesn't work?<br>\nWeird.</p>\n<p>If you put <code>STYLE: \"Something something test\\n\\n\"</code> instead of <code>STYLE: \" \"</code>, does it include the 'Something something' text before or after the CSS?</p>\n<p>(Note: This replaces all <code>&lt;style&gt;...&lt;/style&gt;</code> or <code>&lt;style /&gt;</code> elements with the specified string; IF the string is truthy in JS. That's why  I used a single space rather than an empty string)</p>\n<p>Wait... that only checks top level elements. So you want to put <code>CSS: \" \"</code> in the list too, to remove the <code>&lt;css&gt;</code> element that contains the <code>&lt;style&gt;</code>s.</p>\n<blockquote>\n<p>This would mean it's adding \"\\n\" to the HTML rather than</p>\n</blockquote>\n<p>No. It just means that it doesn't append a <code>&lt;br /&gt;</code> to the end of the string before adding it.</p>\n\n",
      "PostDate": "2018-02-05T15:02:29.1241743Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "09bcd60f-570a-48cb-ae4b-9ac7ee927660",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK...\r\n```\r\n  log = \"\";\r\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\r\n```\r\ncould be…\r\n```\r\n  log = \"\";\r\n  var extractText = function(element) { if(element.nodeType === 3) { log += element.nodeValue } else if(element.nodeType === 1) {log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\", STYLE: \" \", SCRIPT: \" \"}[element.tagName] || $(element).contents().each(function(){extractText(this)}));}};\r\n  extractText(document.getElementById(\"divOutput\"));\r\n```\r\nStill off the top of my head, but does a depth-first walk over the contents of divOutput. Text is output to the 'log' string; style and script elements are replaced by a single space; `<br>` becomes a pair of newlines, `<hr>` a couple of asterisks; and all others are recursed into.",
      "EditableFormat": "markdown",
      "HTML": "<p>OK...</p>\n<pre><code>  log = \"\";\n  $(\"#divOutput\").children().each(function (i) { log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\"}[this.tagName] || $(this).text())+\"\\n\";});\n</code></pre>\n<p>could be…</p>\n<pre><code>  log = \"\";\n  var extractText = function(element) { if(element.nodeType === 3) { log += element.nodeValue } else if(element.nodeType === 1) {log += ({HR: \"\\n* * *\\n\", BR: \"\\n\\n\", STYLE: \" \", SCRIPT: \" \"}[element.tagName] || $(element).contents().each(function(){extractText(this)}));}};\n  extractText(document.getElementById(\"divOutput\"));\n</code></pre>\n<p>Still off the top of my head, but does a depth-first walk over the contents of divOutput. Text is output to the 'log' string; style and script elements are replaced by a single space; <code>&lt;br&gt;</code> becomes a pair of newlines, <code>&lt;hr&gt;</code> a couple of asterisks; and all others are recursed into.</p>\n\n",
      "PostDate": "2018-02-05T15:31:19.9597861Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bff7c50a-048c-4c98-a369-a43d84f854f0",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'll try that, thanks.\r\n\r\nI think it has something to do with the way Quest is reading the content of game.css.\r\n\r\nIt reads an attribute differently than the text of a ```msg(\"\")```.\r\n\r\n\r\nExample:\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"msg(att) - tester\">\r\n    <gameid>e3bfe371-fc1d-43ba-8cea-8a63a7653e46</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\">\r\n      msg (player.kv_att)\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <attr name=\"kv_att\">\r\n      \"Hello, there,\" says the old-timing man.  \"You got any bourbon on  ya'?\"\r\n      \r\n      \"No, sir,\" you reply.  \"Sure don't.\"\r\n      \r\n      And that's when you notice it.\r\n      \r\n      The double-quotes are not escaped in the source code!!!\r\n      \r\n      Also, there are no line breaks!\r\n      </attr>\r\n    </object>\r\n  </object>\r\n</asl>\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/35819499-8be14cb2-0a68-11e8-8936-88f2328165c6.png)\r\n\r\n\r\n---\r\n\r\nNOTE:  You can change ```<attr name=\"kv_att\">``` to ```<attr name=\"kv_att\" type=\"string\">```, and it makes no difference.  In fact, Quest will change it to ```<attr name=\"kv_att\">``` after you save a change made in the GUI anyway.\r\n\r\n\r\n---\r\nNow, let's try adding ```\\n``` to create line breaks.  (I would think this would either create newlines, or cancel out the ```n```.)\r\n\r\n```\r\n      <attr name=\"kv_att\">\r\n      \"Hello, there,\" says the old-timing man.  \"You got any bourbon on  ya'?\"\r\n      \\n\r\n      \"No, sir,\" you reply.  \"Sure don't.\"\r\n      \\n\r\n      And that's when you notice it.\r\n      \\n\r\n      The double-quotes are not escaped in the source code!!!\r\n      \\n\r\n      Also, there are no line breaks!\r\n            </attr>\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/35819752-3e331bc0-0a69-11e8-804e-89d5b6d71201.png)\r\n\r\n---\r\nHrmm...\r\n\r\nIt prints the same thing when you nest it in CDATA, too.  (I won't waste page space by showing you.  Just trust me.)\r\n\r\n---\r\nOkay!\r\n\r\nSo, let's change it up a little, making it CDATA and adding HTML line breaks.\r\n\r\n```\r\n      <attr name=\"kv_att\"><![CDATA[\r\n      \"Hello, there,\" says the old-timing man.  \"You got any bourbon on  ya'?\"\r\n      <br/>\r\n      \"No, sir,\" you reply.  \"Sure don't.\"\r\n      <br/>\r\n      And that's when you notice it.\r\n      <br/>\r\n      The double-quotes are not escaped in the source code!!!\r\n      <br/>\r\n      Well... At least there are line breaks now!\r\n            ]]></attr>\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/35819913-bc938392-0a69-11e8-9f12-17b3e204cb48.png)\r\n\r\n---\r\nIt seems like I should be learning something from this.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'll try that, thanks.</p>\n<p>I think it has something to do with the way Quest is reading the content of game.css.</p>\n<p>It reads an attribute differently than the text of a <code>msg(\"\")</code>.</p>\n<p>Example:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"msg(att) - tester\"&gt;\n    &lt;gameid&gt;e3bfe371-fc1d-43ba-8cea-8a63a7653e46&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;\n      msg (player.kv_att)\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;attr name=\"kv_att\"&gt;\n      \"Hello, there,\" says the old-timing man.  \"You got any bourbon on  ya'?\"\n      \n      \"No, sir,\" you reply.  \"Sure don't.\"\n      \n      And that's when you notice it.\n      \n      The double-quotes are not escaped in the source code!!!\n      \n      Also, there are no line breaks!\n      &lt;/attr&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/35819499-8be14cb2-0a68-11e8-8936-88f2328165c6.png\" alt=\"image\"></p>\n<hr>\n<p>NOTE:  You can change <code>&lt;attr name=\"kv_att\"&gt;</code> to <code>&lt;attr name=\"kv_att\" type=\"string\"&gt;</code>, and it makes no difference.  In fact, Quest will change it to <code>&lt;attr name=\"kv_att\"&gt;</code> after you save a change made in the GUI anyway.</p>\n<hr>\n<p>Now, let's try adding <code>\\n</code> to create line breaks.  (I would think this would either create newlines, or cancel out the <code>n</code>.)</p>\n<pre><code>      &lt;attr name=\"kv_att\"&gt;\n      \"Hello, there,\" says the old-timing man.  \"You got any bourbon on  ya'?\"\n      \\n\n      \"No, sir,\" you reply.  \"Sure don't.\"\n      \\n\n      And that's when you notice it.\n      \\n\n      The double-quotes are not escaped in the source code!!!\n      \\n\n      Also, there are no line breaks!\n            &lt;/attr&gt;\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/35819752-3e331bc0-0a69-11e8-804e-89d5b6d71201.png\" alt=\"image\"></p>\n<hr>\n<p>Hrmm...</p>\n<p>It prints the same thing when you nest it in CDATA, too.  (I won't waste page space by showing you.  Just trust me.)</p>\n<hr>\n<p>Okay!</p>\n<p>So, let's change it up a little, making it CDATA and adding HTML line breaks.</p>\n<pre><code>      &lt;attr name=\"kv_att\"&gt;&lt;![CDATA[\n      \"Hello, there,\" says the old-timing man.  \"You got any bourbon on  ya'?\"\n      &lt;br/&gt;\n      \"No, sir,\" you reply.  \"Sure don't.\"\n      &lt;br/&gt;\n      And that's when you notice it.\n      &lt;br/&gt;\n      The double-quotes are not escaped in the source code!!!\n      &lt;br/&gt;\n      Well... At least there are line breaks now!\n            ]]&gt;&lt;/attr&gt;\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/35819913-bc938392-0a69-11e8-9f12-17b3e204cb48.png\" alt=\"image\"></p>\n<hr>\n<p>It seems like I should be learning something from this.</p>\n\n",
      "PostDate": "2018-02-05T17:45:10.0708684Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "95a6df99-b9dc-4db6-84c9-9f406ca41f0f",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Also:\r\n\r\nWhen I do this, an alert appears with the game's name displayed:\r\n```\r\nJS.eval(\"var toMsg = '\"+game.gamename+\"';alert(toMsg);\")\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/35820665-f36421b8-0a6b-11e8-9ae4-bc05fa7d9cb4.png)\r\n\r\n---\r\nWhen I do this, it causes a JS error:\r\n\r\n```\r\nJS.eval(\"var toMsg = '\"+player.kv_att+\"';alert(toMsg);\")\r\n```\r\n\r\n\r\n<font color=\"red\">Uncaught SyntaxError: Unexpected identifier<font>",
      "EditableFormat": "markdown",
      "HTML": "<p>Also:</p>\n<p>When I do this, an alert appears with the game's name displayed:</p>\n<pre><code>JS.eval(\"var toMsg = '\"+game.gamename+\"';alert(toMsg);\")\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/35820665-f36421b8-0a6b-11e8-9ae4-bc05fa7d9cb4.png\" alt=\"image\"></p>\n<hr>\n<p>When I do this, it causes a JS error:</p>\n<pre><code>JS.eval(\"var toMsg = '\"+player.kv_att+\"';alert(toMsg);\")\n</code></pre>\n<p><font color=\"red\">Uncaught SyntaxError: Unexpected identifier<font></font></font></p><font color=\"red\"><font>\n\n</font></font>",
      "PostDate": "2018-02-05T17:59:20.3227638Z",
      "LastEditDate": "2018-02-05T17:59:51.0283369Z",
      "link": null
    },
    {
      "PostId": "07c3becc-3c48-4d42-94f6-11dd434e73bc",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This depends on this modified ```clearScreen()``` function:\r\n\r\n```\r\nvar clearedOnce = false;\r\nclearScreen = function () {\r\n    $('#divOutput').append('<hr class=\\\"clearedAbove\\\" />');\r\n    if (!clearedOnce) {\r\n        addText('<style>#divOutput > .clearedScreen { display: none; }</style>');\r\n    }\r\n    clearedOnce = true;\r\n    $('#divOutput').children().addClass('clearedScreen');\r\n    $('#divOutput').css('min-height', 0);\r\n    createNewDiv('left');\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $('html,body').scrollTop(0);\r\n    }, 100);\r\n}\r\n```\r\n\r\n---\r\nAlso, Quest don't know nothin' 'bout ```startsWith```, so I added this:\r\n\r\n```\r\nif(!String.prototype.startsWith){\r\n    String.prototype.startsWith = function (str) {\r\n        return !this.indexOf(str);\r\n    }\r\n}\r\n```\r\n\r\n\r\n---\r\nThe log stuff:\r\n\r\n```\r\nvar logVar = \"\";\r\nfunction addLogEntry(text) {\r\n    if (!text.startsWith(\"SaveLoadFile\") && !text.startsWith(\"TxtFile\") && !text.startsWith(\"Transcript\")) {\r\n        logVar += getTimeAndDateForLog() + ' ' + text + \"NEW_LINE\";\r\n    }\r\n};\r\n\r\nfunction showLog() {\r\n    var logDivString = \"\";\r\n    logDivString += \"<div \";\r\n    logDivString += \"id='log-dialog' \";\r\n    logDivString += \"style='display:none;;'>\";\r\n    logDivString += \"<textarea id='logdata' rows='13'\";\r\n    logDivString += \"  cols='49'></textarea></div>\";\r\n    addText(logDivString);\r\n    var logDialog = $(\"#log-dialog\").dialog({\r\n        autoOpen: false,\r\n        width: 600,\r\n        height: 500,\r\n        title: \"Log\",\r\n        buttons: {\r\n            Ok: function () {\r\n                $(this).dialog(\"close\");\r\n\t\t\t\t$(this).remove();\r\n            },\r\n            Print: function () {\r\n                $(this).dialog(\"close\");\r\n                printLogDiv();\r\n\t\t\t\t$(this).remove();\r\n                },\r\n            },\r\n            show: { effect: \"fadeIn\", duration: 500 },\r\n            // The modal setting keeps the player from interacting with anything besides the dialog window.\r\n            //  (The log will not update while open without adding a turn script.  I prefer this.)\r\n            modal: true,\r\n        });\r\n    $('#logdata').val(logVar.replace(/NEW_LINE/g, \"\\n\"));\r\n    logDialog.dialog(\"open\");\r\n};\r\n\r\nfunction printLogDiv() {\r\n\tvar iframe = document.createElement('iframe');\r\n    document.body.appendChild(iframe);\r\n    iframe.contentWindow.document.write(logVar.replace(/</g,\"&lt;\").replace(/NEW_LINE/g, \"<br/>\"));\r\n\tiframe.contentWindow.print();\r\n    document.body.removeChild(iframe);\r\n};\r\n\r\nfunction getTimeAndDateForLog() {\r\n    var today = new Date();\r\n    var dd = today.getDate();\r\n    var mm = today.getMonth() + 1;\r\n    var yyyy = today.getFullYear();\r\n    var hrs = today.getHours();\r\n    var mins = today.getMinutes();\r\n    var secs = today.getSeconds();\r\n    today = mm + '/' + dd + '/' + yyyy;\r\n    if (hrs > 12) {\r\n        ampm = 'AM';\r\n        hrs = '0' + '' + hrs - 12\r\n    } else {\r\n        ampm = 'PM';\r\n    }\r\n    if (mins < 10) {\r\n        mins = '0' + mins;\r\n    }\r\n    if (secs < 10) {\r\n        secs = '0' + secs;\r\n    }\r\n    time = hrs + ':' + mins + ':' + secs + ' ' + ampm;\r\n    return today + ' ' + time;\r\n};\r\n\r\n```\r\n\r\n---\r\nThe Quest command:\r\n\r\n```\r\n  <command name=\"log_cmd\">\r\n    <pattern>log;view log;display log;view the log;display the log</pattern>\r\n    <script>\r\n      game.notarealturn = true\r\n      JS.showLog ()\r\n    </script>\r\n  </command>\r\n```\r\n\r\n---\r\nThe modified Log function (in Quest, not JS):\r\n```\r\n  <function name=\"Log\" parameters=\"text\">\r\n    request (Log, text)\r\n    JS.eval (\"if(typeof(addLogEntry)===\\\"function\\\"){ addLogEntry(\\\"\"+text+\"\\\"); }\")\r\n  </function>\r\n```\r\n\r\n\r\n---\r\nNOTE:\r\n\r\nI'm just piecing different bits of code together until things behave like I want them to.\r\n\r\nIf this works, thank mrangel and Pixie. They provided the good bits of code.\r\n\r\nIf it doesn't work, blame me.\r\n\r\n---\r\nPS\r\n\r\nFor the transcript, see here:\r\nhttp://textadventures.co.uk/forum/samples/topic/v_jcp44jyk2befkakgb1pq/printing-a-transcript-part-2",
      "EditableFormat": "markdown",
      "HTML": "<p>This depends on this modified <code>clearScreen()</code> function:</p>\n<pre><code>var clearedOnce = false;\nclearScreen = function () {\n    $('#divOutput').append('&lt;hr class=\\\"clearedAbove\\\" /&gt;');\n    if (!clearedOnce) {\n        addText('&lt;style&gt;#divOutput &gt; .clearedScreen { display: none; }&lt;/style&gt;');\n    }\n    clearedOnce = true;\n    $('#divOutput').children().addClass('clearedScreen');\n    $('#divOutput').css('min-height', 0);\n    createNewDiv('left');\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $('html,body').scrollTop(0);\n    }, 100);\n}\n</code></pre>\n<hr>\n<p>Also, Quest don't know nothin' 'bout <code>startsWith</code>, so I added this:</p>\n<pre><code>if(!String.prototype.startsWith){\n    String.prototype.startsWith = function (str) {\n        return !this.indexOf(str);\n    }\n}\n</code></pre>\n<hr>\n<p>The log stuff:</p>\n<pre><code>var logVar = \"\";\nfunction addLogEntry(text) {\n    if (!text.startsWith(\"SaveLoadFile\") &amp;&amp; !text.startsWith(\"TxtFile\") &amp;&amp; !text.startsWith(\"Transcript\")) {\n        logVar += getTimeAndDateForLog() + ' ' + text + \"NEW_LINE\";\n    }\n};\n\nfunction showLog() {\n    var logDivString = \"\";\n    logDivString += \"&lt;div \";\n    logDivString += \"id='log-dialog' \";\n    logDivString += \"style='display:none;;'&gt;\";\n    logDivString += \"&lt;textarea id='logdata' rows='13'\";\n    logDivString += \"  cols='49'&gt;&lt;/textarea&gt;&lt;/div&gt;\";\n    addText(logDivString);\n    var logDialog = $(\"#log-dialog\").dialog({\n        autoOpen: false,\n        width: 600,\n        height: 500,\n        title: \"Log\",\n        buttons: {\n            Ok: function () {\n                $(this).dialog(\"close\");\n\t\t\t\t$(this).remove();\n            },\n            Print: function () {\n                $(this).dialog(\"close\");\n                printLogDiv();\n\t\t\t\t$(this).remove();\n                },\n            },\n            show: { effect: \"fadeIn\", duration: 500 },\n            // The modal setting keeps the player from interacting with anything besides the dialog window.\n            //  (The log will not update while open without adding a turn script.  I prefer this.)\n            modal: true,\n        });\n    $('#logdata').val(logVar.replace(/NEW_LINE/g, \"\\n\"));\n    logDialog.dialog(\"open\");\n};\n\nfunction printLogDiv() {\n\tvar iframe = document.createElement('iframe');\n    document.body.appendChild(iframe);\n    iframe.contentWindow.document.write(logVar.replace(/&lt;/g,\"&amp;lt;\").replace(/NEW_LINE/g, \"&lt;br/&gt;\"));\n\tiframe.contentWindow.print();\n    document.body.removeChild(iframe);\n};\n\nfunction getTimeAndDateForLog() {\n    var today = new Date();\n    var dd = today.getDate();\n    var mm = today.getMonth() + 1;\n    var yyyy = today.getFullYear();\n    var hrs = today.getHours();\n    var mins = today.getMinutes();\n    var secs = today.getSeconds();\n    today = mm + '/' + dd + '/' + yyyy;\n    if (hrs &gt; 12) {\n        ampm = 'AM';\n        hrs = '0' + '' + hrs - 12\n    } else {\n        ampm = 'PM';\n    }\n    if (mins &lt; 10) {\n        mins = '0' + mins;\n    }\n    if (secs &lt; 10) {\n        secs = '0' + secs;\n    }\n    time = hrs + ':' + mins + ':' + secs + ' ' + ampm;\n    return today + ' ' + time;\n};\n\n</code></pre>\n<hr>\n<p>The Quest command:</p>\n<pre><code>  &lt;command name=\"log_cmd\"&gt;\n    &lt;pattern&gt;log;view log;display log;view the log;display the log&lt;/pattern&gt;\n    &lt;script&gt;\n      game.notarealturn = true\n      JS.showLog ()\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n<hr>\n<p>The modified Log function (in Quest, not JS):</p>\n<pre><code>  &lt;function name=\"Log\" parameters=\"text\"&gt;\n    request (Log, text)\n    JS.eval (\"if(typeof(addLogEntry)===\\\"function\\\"){ addLogEntry(\\\"\"+text+\"\\\"); }\")\n  &lt;/function&gt;\n</code></pre>\n<hr>\n<p>NOTE:</p>\n<p>I'm just piecing different bits of code together until things behave like I want them to.</p>\n<p>If this works, thank mrangel and Pixie. They provided the good bits of code.</p>\n<p>If it doesn't work, blame me.</p>\n<hr>\n<p>PS</p>\n<p>For the transcript, see here:<br>\nhttp://textadventures.co.uk/forum/samples/topic/v_jcp44jyk2befkakgb1pq/printing-a-transcript-part-2</p>\n\n",
      "PostDate": "2018-02-05T23:40:22.3531663Z",
      "LastEditDate": "2018-02-06T00:42:07.3980936Z",
      "link": null
    },
    {
      "PostId": "586f2456-7e88-4ec4-9484-1b8acf3ea5c1",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You don't need to escape quotes in an attribute.\r\n\r\nWithin a script, a string literal ends with a quote. So you have to escape a quote within the string., so it can tell the difference.\r\n\r\nIn an attribute, the string ends with `</attr>`, so you need to escape a `<` (by wrapping the script in CDATA).\r\n\r\nWithin an attribute i CDATA, you would need to escape the string `]]>` if it occurs… I can't remember how to do that, because it's used so rarely.\r\n\r\nThere are line breaks in your attribute. It's just that the browser ignores them when displaying text, unless it's inside a `<pre>` block. Try outputting that string attr in a `<pre>` block, or alerting it, and you'll see.\r\n\r\nThe alert in your last post generates an error. That's because it sticks three strings together to make a long string, and tries to treat that string as javascript code.\r\nThe code you're trying to execute is:\r\n```\r\nvar toMsg = '\r\n      \"Hello, there,\" says the old-timing man.  \"You got any bourbon on  ya'?\"\r\n      \r\n      \"No, sir,\" you reply.  \"Sure don't.\"\r\n      \r\n      And that's when you notice it.\r\n      \r\n      The double-quotes are not escaped in the source code!!!\r\n      \r\n      Also, there are no line breaks!\r\n      ';alert(toMsg);\r\n```\r\nThat's certainly not valid. I can't remember if JS allows literal newlines inside a string, but I don't think so.\r\n\r\nIf it does, then that would still break because the apostrophe in `ya'` is taken as the end of a single-quoted string. The next character is a question mark; so it looks like a `x ? y : z` operator, with the first argument being a single quoted string, the second a double quoted string, and then it sees `No, sir` (outside quotes) where it was expecting to see either an operator or a colon. Javascript thinks `No` is a variable or function name (an _identifier_) when it was expecting an operator (`+` or `:`).",
      "EditableFormat": "markdown",
      "HTML": "<p>You don't need to escape quotes in an attribute.</p>\n<p>Within a script, a string literal ends with a quote. So you have to escape a quote within the string., so it can tell the difference.</p>\n<p>In an attribute, the string ends with <code>&lt;/attr&gt;</code>, so you need to escape a <code>&lt;</code> (by wrapping the script in CDATA).</p>\n<p>Within an attribute i CDATA, you would need to escape the string <code>]]&gt;</code> if it occurs… I can't remember how to do that, because it's used so rarely.</p>\n<p>There are line breaks in your attribute. It's just that the browser ignores them when displaying text, unless it's inside a <code>&lt;pre&gt;</code> block. Try outputting that string attr in a <code>&lt;pre&gt;</code> block, or alerting it, and you'll see.</p>\n<p>The alert in your last post generates an error. That's because it sticks three strings together to make a long string, and tries to treat that string as javascript code.<br>\nThe code you're trying to execute is:</p>\n<pre><code>var toMsg = '\n      \"Hello, there,\" says the old-timing man.  \"You got any bourbon on  ya'?\"\n      \n      \"No, sir,\" you reply.  \"Sure don't.\"\n      \n      And that's when you notice it.\n      \n      The double-quotes are not escaped in the source code!!!\n      \n      Also, there are no line breaks!\n      ';alert(toMsg);\n</code></pre>\n<p>That's certainly not valid. I can't remember if JS allows literal newlines inside a string, but I don't think so.</p>\n<p>If it does, then that would still break because the apostrophe in <code>ya'</code> is taken as the end of a single-quoted string. The next character is a question mark; so it looks like a <code>x ? y : z</code> operator, with the first argument being a single quoted string, the second a double quoted string, and then it sees <code>No, sir</code> (outside quotes) where it was expecting to see either an operator or a colon. Javascript thinks <code>No</code> is a variable or function name (an <em>identifier</em>) when it was expecting an operator (<code>+</code> or <code>:</code>).</p>\n\n",
      "PostDate": "2018-02-05T23:43:14.8446018Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "403db32c-0b82-41b1-8b31-7f4c8e2280cd",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yeah, MrAngel...\r\n\r\nWhat you just said.\r\n\r\n..and there's no telling what someone may have in their code, so I decided trying to convert a game to plain text for transcripts wasn't the best option.\r\n\r\nThe code I just posted keeps it as HTML, it just makes it sort of look like plain text (I hope).",
      "EditableFormat": "markdown",
      "HTML": "<p>Yeah, MrAngel...</p>\n<p>What you just said.</p>\n<p>..and there's no telling what someone may have in their code, so I decided trying to convert a game to plain text for transcripts wasn't the best option.</p>\n<p>The code I just posted keeps it as HTML, it just makes it sort of look like plain text (I hope).</p>\n\n",
      "PostDate": "2018-02-05T23:51:13.6294693Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
