{
  "Topic": {
    "TopicId": "fuozzllf8e2mn2kpvr0ymq",
    "ForumId": "3",
    "Title": "I'm looking to add this Compass to Quest",
    "LastUpdated": "2018-02-11T17:20:29.4717032Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "4daaaaed-b8a2-4938-83ed-5ecc6a9d2ed6",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Just putting this here if anyone wants to figure out how to add it to a Quest game.\r\nI've tried for the last couple of weeks but am to ignorant.\r\nIt is a compass with a working arrow. Preferably in the left panes\r\n<p>Here's the <a href=\"https://github.com/rheh/HTML5-canvas-projects/tree/master/compass\" title=\"Title\">\r\nCompass Link</a> .</p>\r\n\r\n<img src=\"https://github.com/rheh/HTML5-canvas-projects/blob/master/compass/compass.png?raw=true\"/>\r\n\r\n \r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Just putting this here if anyone wants to figure out how to add it to a Quest game.<br>\nI've tried for the last couple of weeks but am to ignorant.<br>\nIt is a compass with a working arrow. Preferably in the left panes</p>\n<p>Here's the <a href=\"https://github.com/rheh/HTML5-canvas-projects/tree/master/compass\" title=\"Title\">\nCompass Link</a> .</p>\n<img src=\"https://github.com/rheh/HTML5-canvas-projects/blob/master/compass/compass.png?raw=true\">\n\n",
      "PostDate": "2018-02-11T17:20:29.4717032Z",
      "LastEditDate": "2018-02-11T17:24:25.2934326Z",
      "link": null
    },
    {
      "PostId": "8f110048-1e4f-4c52-baa3-ce1fd565cb00",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay.\r\n\r\n(The needle just spins and spins.  Is that what you want?  That's what the original script has going on (I think).)\r\n\r\n<details>\r\n\r\n**compass.js**\r\n```\r\n/*\r\n* Modified version of https://github.com/rheh/HTML5-canvas-projects/tree/master/compass\r\n*/\r\nvar img = null,\r\n\tneedle = null,\r\n\tctx = null,\r\n\tdegrees = 0;\r\nfunction clearCompassCanvas() {\r\n\t // clear canvas\r\n\tctx.clearRect(0, 0, 200, 200);\r\n}\r\nfunction drawCompass() {\r\n\tclearCompassCanvas();\r\n\tctx.drawImage(img, 0, 0);\r\n\tctx.save();\r\n\tctx.translate(100, 100);\r\n\tctx.rotate(degrees * (Math.PI / 180));\r\n\tctx.drawImage(needle, -100, -100);\r\n\tctx.restore();\r\n\tdegrees += 5;\r\n}\r\nfunction imgLoaded() {\r\n\tsetInterval(drawCompass, 100);\r\n}\r\nfunction initCompass() {\r\n  var canvas = document.getElementById('compass');\r\n  if (canvas.getContext('2d')) {\r\n    ctx = canvas.getContext('2d');\r\n    needle = new Image();\r\n    needle.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/needle.png';\r\n    img = new Image();\r\n    img.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/compass.png';\r\n    img.onload = imgLoaded;\t\r\n  } else {\r\n    alert('Canvas not supported!');\r\n  }\r\n}\r\n```\r\n\r\n---\r\n\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Compass Image with Needle\">\r\n    <gameid>98aa909f-76b9-4b1d-8b66-df7604f75715</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <description><![CDATA[Compass and images from:<br/>https://github.com/rheh/HTML5-canvas-projects/tree/master/compass]]></description>\r\n    <start type=\"script\">\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description type=\"script\"><![CDATA[\r\n      JS.eval (\"$('#compass').remove();\")\r\n      msg (\"<canvas id='compass' width='200' height='200'></canvas>\")\r\n      JS.eval (\"initCompass();\")\r\n    ]]></description>\r\n    <enter type=\"script\">\r\n      JS.eval (\"initCompass();\")\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <javascript src=\"compass.js\" />\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay.</p>\n<p>(The needle just spins and spins.  Is that what you want?  That's what the original script has going on (I think).)</p>\n<details>\n<p><strong>compass.js</strong></p>\n<pre><code>/*\n* Modified version of https://github.com/rheh/HTML5-canvas-projects/tree/master/compass\n*/\nvar img = null,\n\tneedle = null,\n\tctx = null,\n\tdegrees = 0;\nfunction clearCompassCanvas() {\n\t // clear canvas\n\tctx.clearRect(0, 0, 200, 200);\n}\nfunction drawCompass() {\n\tclearCompassCanvas();\n\tctx.drawImage(img, 0, 0);\n\tctx.save();\n\tctx.translate(100, 100);\n\tctx.rotate(degrees * (Math.PI / 180));\n\tctx.drawImage(needle, -100, -100);\n\tctx.restore();\n\tdegrees += 5;\n}\nfunction imgLoaded() {\n\tsetInterval(drawCompass, 100);\n}\nfunction initCompass() {\n  var canvas = document.getElementById('compass');\n  if (canvas.getContext('2d')) {\n    ctx = canvas.getContext('2d');\n    needle = new Image();\n    needle.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/needle.png';\n    img = new Image();\n    img.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/compass.png';\n    img.onload = imgLoaded;\t\n  } else {\n    alert('Canvas not supported!');\n  }\n}\n</code></pre>\n<hr>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Compass Image with Needle\"&gt;\n    &lt;gameid&gt;98aa909f-76b9-4b1d-8b66-df7604f75715&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;description&gt;&lt;![CDATA[Compass and images from:&lt;br/&gt;https://github.com/rheh/HTML5-canvas-projects/tree/master/compass]]&gt;&lt;/description&gt;\n    &lt;start type=\"script\"&gt;\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description type=\"script\"&gt;&lt;![CDATA[\n      JS.eval (\"$('#compass').remove();\")\n      msg (\"&lt;canvas id='compass' width='200' height='200'&gt;&lt;/canvas&gt;\")\n      JS.eval (\"initCompass();\")\n    ]]&gt;&lt;/description&gt;\n    &lt;enter type=\"script\"&gt;\n      JS.eval (\"initCompass();\")\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;javascript src=\"compass.js\" /&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-02-11T18:05:38.7546521Z",
      "LastEditDate": "2018-02-11T21:18:58.2344158Z",
      "link": null
    },
    {
      "PostId": "704b8371-a5a0-49ac-a0ff-da1983180338",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Nay. I'd have to get the needle to follow the script. Maybe just wiggle a little in a certain direction. Looking to make an instrument  on a pirate ship. \r\n\r\nNeed to get the compass into an Additional Pane.\r\n\r\nI could put direction into the status pane and quit trying to get so fancy, after all it is a <i>Text</i> adventure.",
      "EditableFormat": "markdown",
      "HTML": "<p>Nay. I'd have to get the needle to follow the script. Maybe just wiggle a little in a certain direction. Looking to make an instrument  on a pirate ship.</p>\n<p>Need to get the compass into an Additional Pane.</p>\n<p>I could put direction into the status pane and quit trying to get so fancy, after all it is a <i>Text</i> adventure.</p>\n\n",
      "PostDate": "2018-02-11T19:06:07.1680214Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b3288fae-9e44-4928-82d6-fd727a926e4c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The non-spinning (unless you tell it to) edition (rough draft):\r\n\r\n<details>\r\n\r\n**compass.js**\r\n```\r\n/*\r\n* Modified version of https://github.com/rheh/HTML5-canvas-projects/tree/master/compass\r\n*/\r\n\r\n// Global variable\r\nvar img = null,\r\n\tneedle = null,\r\n\tctx = null,\r\n\tdegrees = 360;\r\n\r\nfunction clearCompassCanvas() {\r\n\t // clear canvas\r\n\tctx.clearRect(0, 0, 200, 200);\r\n}\r\n\r\nfunction drawCompass() {\r\n\r\n\tclearCompassCanvas();\r\n\r\n\t// Draw the compass onto the canvas\r\n\tctx.drawImage(img, 0, 0);\r\n\r\n\t// Save the current drawing state\r\n\tctx.save();\r\n\r\n\t// Now move across and down half the \r\n\tctx.translate(100, 100);\r\n\r\n\t// Rotate around this point\r\n\tctx.rotate(degrees * (Math.PI / 180));\r\n\r\n\t// Draw the image back and up\r\n\tctx.drawImage(needle, -100, -100);\r\n\r\n\t// Restore the previous drawing state\r\n\tctx.restore();\r\n}\r\n\r\nfunction drawSpinningCompass() {\r\n\tclearCompassCanvas();\r\n\tctx.drawImage(img, 0, 0);\r\n\tctx.save();\r\n\tctx.translate(100, 100);\r\n\tctx.rotate(degrees * (Math.PI / 180));\r\n\tctx.drawImage(needle, -100, -100);\r\n\tctx.restore();\r\n\tdegrees += 5;\r\n}\r\n\r\nfunction initCompassSpin() {\r\n\tspinInt = setInterval(drawSpinningCompass, 100);\r\n}\r\n\r\nfunction stopCompassSpin(){\r\n  clearInterval(spinInt);\r\n}\r\n\r\nvar dirObj = {\r\n  'n':360,\r\n  'ne':45,\r\n  'e':90,\r\n  'se':135,\r\n  's':180,\r\n  'sw':225,\r\n  'w':270,\r\n  'nw':315\r\n}\r\n\r\nfunction setCompass(direction){\r\n  //Default is north\r\n  for(var dir in dirObj){\r\n    if(dir === direction){\r\n       degrees = dirObj[direction];\r\n       alert(dirObj[direction]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction setCompassAndDraw(direction){\r\n  setCompass(direction);\r\n  drawCompass();\r\n}\r\n\r\nfunction initCompass() {\r\n  var canvas = document.getElementById('compass');\r\n  if (canvas.getContext('2d')) {\r\n    ctx = canvas.getContext('2d');\r\n    needle = new Image();\r\n    needle.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/needle.png';\r\n    img = new Image();\r\n    img.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/compass.png';\r\n    //img.onload = imgLoaded;\t\r\n    drawCompass();\r\n  } else {\r\n    alert('Canvas not supported!');\r\n  }\r\n}\r\n```\r\n\r\n---\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Compass Image with Needle\">\r\n    <gameid>98aa909f-76b9-4b1d-8b66-df7604f75715</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <description><![CDATA[Compass and images from:<br/>https://github.com/rheh/HTML5-canvas-projects/tree/master/compass]]></description>\r\n    <start type=\"script\">\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description type=\"script\"><![CDATA[\r\n      JS.eval (\"$('#compass').remove();\")\r\n      msg (\"<canvas id='compass' width='200' height='200'></canvas>\")\r\n      JS.eval (\"initCompass();\")\r\n    ]]></description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <javascript src=\"compass.js\" />\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>The non-spinning (unless you tell it to) edition (rough draft):</p>\n<details>\n<p><strong>compass.js</strong></p>\n<pre><code>/*\n* Modified version of https://github.com/rheh/HTML5-canvas-projects/tree/master/compass\n*/\n\n// Global variable\nvar img = null,\n\tneedle = null,\n\tctx = null,\n\tdegrees = 360;\n\nfunction clearCompassCanvas() {\n\t // clear canvas\n\tctx.clearRect(0, 0, 200, 200);\n}\n\nfunction drawCompass() {\n\n\tclearCompassCanvas();\n\n\t// Draw the compass onto the canvas\n\tctx.drawImage(img, 0, 0);\n\n\t// Save the current drawing state\n\tctx.save();\n\n\t// Now move across and down half the \n\tctx.translate(100, 100);\n\n\t// Rotate around this point\n\tctx.rotate(degrees * (Math.PI / 180));\n\n\t// Draw the image back and up\n\tctx.drawImage(needle, -100, -100);\n\n\t// Restore the previous drawing state\n\tctx.restore();\n}\n\nfunction drawSpinningCompass() {\n\tclearCompassCanvas();\n\tctx.drawImage(img, 0, 0);\n\tctx.save();\n\tctx.translate(100, 100);\n\tctx.rotate(degrees * (Math.PI / 180));\n\tctx.drawImage(needle, -100, -100);\n\tctx.restore();\n\tdegrees += 5;\n}\n\nfunction initCompassSpin() {\n\tspinInt = setInterval(drawSpinningCompass, 100);\n}\n\nfunction stopCompassSpin(){\n  clearInterval(spinInt);\n}\n\nvar dirObj = {\n  'n':360,\n  'ne':45,\n  'e':90,\n  'se':135,\n  's':180,\n  'sw':225,\n  'w':270,\n  'nw':315\n}\n\nfunction setCompass(direction){\n  //Default is north\n  for(var dir in dirObj){\n    if(dir === direction){\n       degrees = dirObj[direction];\n       alert(dirObj[direction]);\n    }\n  }\n}\n\nfunction setCompassAndDraw(direction){\n  setCompass(direction);\n  drawCompass();\n}\n\nfunction initCompass() {\n  var canvas = document.getElementById('compass');\n  if (canvas.getContext('2d')) {\n    ctx = canvas.getContext('2d');\n    needle = new Image();\n    needle.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/needle.png';\n    img = new Image();\n    img.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/compass.png';\n    //img.onload = imgLoaded;\t\n    drawCompass();\n  } else {\n    alert('Canvas not supported!');\n  }\n}\n</code></pre>\n<hr>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Compass Image with Needle\"&gt;\n    &lt;gameid&gt;98aa909f-76b9-4b1d-8b66-df7604f75715&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;description&gt;&lt;![CDATA[Compass and images from:&lt;br/&gt;https://github.com/rheh/HTML5-canvas-projects/tree/master/compass]]&gt;&lt;/description&gt;\n    &lt;start type=\"script\"&gt;\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description type=\"script\"&gt;&lt;![CDATA[\n      JS.eval (\"$('#compass').remove();\")\n      msg (\"&lt;canvas id='compass' width='200' height='200'&gt;&lt;/canvas&gt;\")\n      JS.eval (\"initCompass();\")\n    ]]&gt;&lt;/description&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;javascript src=\"compass.js\" /&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-02-11T19:09:39.9039114Z",
      "LastEditDate": "2018-02-11T19:37:36.5333071Z",
      "link": null
    },
    {
      "PostId": "ea6cb667-7430-4f1a-b059-4bdfa8fe55b5",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "As soon as I eat, I'll revise it so the image loads in the background when the game starts.\r\n\r\n(Sometimes it doesn't load in the initial room description.)\r\n\r\n---\r\n...and I didn't see your post.\r\n\r\nAn additional pane?\r\n\r\nA little wiggle?\r\n\r\nInconceivable!\r\n\r\n(Actually, it sounds pretty easy to pull off.  (Sorry.  I just got done watching **The Princess Bride**.))",
      "EditableFormat": "markdown",
      "HTML": "<p>As soon as I eat, I'll revise it so the image loads in the background when the game starts.</p>\n<p>(Sometimes it doesn't load in the initial room description.)</p>\n<hr>\n<p>...and I didn't see your post.</p>\n<p>An additional pane?</p>\n<p>A little wiggle?</p>\n<p>Inconceivable!</p>\n<p>(Actually, it sounds pretty easy to pull off.  (Sorry.  I just got done watching <strong>The Princess Bride</strong>.))</p>\n\n",
      "PostDate": "2018-02-11T19:19:41.6692395Z",
      "LastEditDate": "2018-02-11T19:39:21.6616571Z",
      "link": null
    },
    {
      "PostId": "4c042c23-42f3-4d20-aba7-ab0e80dd0196",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay, check this out.\r\n\r\n<details>\r\n\r\ncompass.js\r\n```\r\n/*\r\n* Modified version of https://github.com/rheh/HTML5-canvas-projects/tree/master/compass\r\n* Version 1.4\r\n*/\r\n\r\nvar img = null,\r\n\tneedle = null,\r\n\tctx = null,\r\n\tdegrees = 360;\r\n\t\r\nfunction clearCompassCanvas() {\r\n  if(typeof(ctx) !== \"null\"){\r\n\tctx.clearRect(0, 0, 200, 200);\r\n  }else{\r\n    initCompass();\r\n  }\r\n}\r\n\r\nfunction drawCompass() {\r\n  if(typeof(ctx) !== \"null\"){\r\n\tclearCompassCanvas();\r\n\tctx.drawImage(img, 0, 0);\r\n\tctx.save();\r\n\tctx.translate(100, 100);\r\n\tctx.rotate(degrees * (Math.PI / 180));\r\n\tctx.drawImage(needle, -100, -100);\r\n\tctx.restore();\r\n  }else{\r\n    initCompass();\r\n  }\r\n}\r\n\r\nfunction drawSpinningCompass() {\r\n\tclearCompassCanvas();\r\n\tctx.drawImage(img, 0, 0);\r\n\tctx.save();\r\n\tctx.translate(100, 100);\r\n\tctx.rotate(degrees * (Math.PI / 180));\r\n\tctx.drawImage(needle, -100, -100);\r\n\tctx.restore();\r\n\tdegrees += 5;\r\n}\r\n\r\nfunction initCompassSpin() {\r\n\tspinInt = setInterval(drawSpinningCompass, 100);\r\n}\r\n\r\nfunction stopCompassSpin(){\r\n  clearInterval(spinInt);\r\n}\r\n\r\nvar dirObj = {\r\n  'n':360,\r\n  'ne':45,\r\n  'e':90,\r\n  'se':135,\r\n  's':180,\r\n  'sw':225,\r\n  'w':270,\r\n  'nw':315\r\n}\r\n\r\nfunction setCompass(direction){\r\n  for(var dir in dirObj){\r\n    if(dir === direction){\r\n       degrees = dirObj[direction];\r\n    }\r\n  }\r\n}\r\n\r\nfunction setCompassByDegrees(deg){\r\n  degrees = deg;\r\n}\r\n\r\nfunction setCompassAndDraw(direction){\r\n  setCompass(direction);\r\n  drawCompass();\r\n}\r\n\r\nfunction setCompassByDegreesAndDraw(deg){\r\n  setCompassByDegrees(deg);\r\n  drawCompass();\r\n}\r\n\r\nfunction initCompass() {\r\n  var canvas = document.getElementById('compass');\r\n  if (canvas.getContext('2d')) {\r\n    ctx = canvas.getContext('2d');\r\n    $(\"#needle-img\").remove();\r\n    needle = new Image();\r\n    needle.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/needle.png';\r\n    $(\"#comp-img\").remove();\r\n    img = new Image();\r\n    img.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/compass.png';\r\n    //img.onload = function(){alert('loaded compass');};\r\n    img.onerror = function(){console.log('reloading compass');initCompass();};\r\n    drawCompass();\r\n  } else {\r\n    alert('Canvas not supported!');\r\n  }\r\n}\r\n```\r\n\r\n---\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Compass Image with Needle\">\r\n    <gameid>98aa909f-76b9-4b1d-8b66-df7604f75715</gameid>\r\n    <version>1.3</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <description><![CDATA[Compass and images from:<br/>https://github.com/rheh/HTML5-canvas-projects/tree/master/compass]]></description>\r\n    <feature_advancedscripts />\r\n    <start type=\"script\">\r\n    </start>\r\n    <inituserinterface type=\"script\"><![CDATA[\r\n      msg (\"<div style='display:none'><img id='needle-img' src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/needle.png'/><br/><img id='comp-img' src='https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/compass.png'/></div>\")\r\n      msg (\"<div id=\\\"compassImagePane\\\" style=\\\"display:none\\\" ><canvas id=\\\"compass\\\" class=\\\" ui-accordion-content ui-widget-content ui-corner-bottom  ui-corner-top\\\" width=\\\"200\\\" height=\\\"200\\\"></canvas></div>\")\r\n      JS.eval (\"$('#compassImagePane').insertAfter($('#compassAccordion')).show();setTimeout(function(){initCompass();drawCompass();},100);\")\r\n    ]]></inituserinterface>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description type=\"script\">\r\n    </description>\r\n    <beforeenter type=\"script\">\r\n    </beforeenter>\r\n    <enter type=\"script\">\r\n      JS.setCompassAndDraw (\"s\")\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <exit alias=\"south\" to=\"second room\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"second room\">\r\n    <inherit name=\"editor_room\" />\r\n    <beforeenter type=\"script\">\r\n      JS.setCompassAndDraw (\"n\")\r\n    </beforeenter>\r\n    <exit alias=\"north\" to=\"room\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n  </object>\r\n  <javascript src=\"compass.js\" />\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n---\r\nTo hide the image pane:\r\n```JS.uiHide(\"#compassImagePane\")```\r\n\r\nTo show it:\r\n```JS.uiShow(\"#compassImagePane\")```\r\n\r\nTo point the needle to a certain degree:\r\n```JS.setCompassByDegreesAndShow(degree)```\r\n(This can be 1-360, 360 being North.)\r\n\r\nTo point the needle to a certain direction:\r\n```JS.setCompassAndShow(direction)```\r\n\r\nUse abbreviations: \"n\",\"ne\",\"e\",\"se\",\"s\",\"sw\",\"w\",\"nw\"\r\n\r\n---\r\n![image](https://user-images.githubusercontent.com/30656341/36078217-64b9e29a-0f39-11e8-9a9e-29523e54e332.png)",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay, check this out.</p>\n<details>\n<p>compass.js</p>\n<pre><code>/*\n* Modified version of https://github.com/rheh/HTML5-canvas-projects/tree/master/compass\n* Version 1.4\n*/\n\nvar img = null,\n\tneedle = null,\n\tctx = null,\n\tdegrees = 360;\n\t\nfunction clearCompassCanvas() {\n  if(typeof(ctx) !== \"null\"){\n\tctx.clearRect(0, 0, 200, 200);\n  }else{\n    initCompass();\n  }\n}\n\nfunction drawCompass() {\n  if(typeof(ctx) !== \"null\"){\n\tclearCompassCanvas();\n\tctx.drawImage(img, 0, 0);\n\tctx.save();\n\tctx.translate(100, 100);\n\tctx.rotate(degrees * (Math.PI / 180));\n\tctx.drawImage(needle, -100, -100);\n\tctx.restore();\n  }else{\n    initCompass();\n  }\n}\n\nfunction drawSpinningCompass() {\n\tclearCompassCanvas();\n\tctx.drawImage(img, 0, 0);\n\tctx.save();\n\tctx.translate(100, 100);\n\tctx.rotate(degrees * (Math.PI / 180));\n\tctx.drawImage(needle, -100, -100);\n\tctx.restore();\n\tdegrees += 5;\n}\n\nfunction initCompassSpin() {\n\tspinInt = setInterval(drawSpinningCompass, 100);\n}\n\nfunction stopCompassSpin(){\n  clearInterval(spinInt);\n}\n\nvar dirObj = {\n  'n':360,\n  'ne':45,\n  'e':90,\n  'se':135,\n  's':180,\n  'sw':225,\n  'w':270,\n  'nw':315\n}\n\nfunction setCompass(direction){\n  for(var dir in dirObj){\n    if(dir === direction){\n       degrees = dirObj[direction];\n    }\n  }\n}\n\nfunction setCompassByDegrees(deg){\n  degrees = deg;\n}\n\nfunction setCompassAndDraw(direction){\n  setCompass(direction);\n  drawCompass();\n}\n\nfunction setCompassByDegreesAndDraw(deg){\n  setCompassByDegrees(deg);\n  drawCompass();\n}\n\nfunction initCompass() {\n  var canvas = document.getElementById('compass');\n  if (canvas.getContext('2d')) {\n    ctx = canvas.getContext('2d');\n    $(\"#needle-img\").remove();\n    needle = new Image();\n    needle.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/needle.png';\n    $(\"#comp-img\").remove();\n    img = new Image();\n    img.src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/compass.png';\n    //img.onload = function(){alert('loaded compass');};\n    img.onerror = function(){console.log('reloading compass');initCompass();};\n    drawCompass();\n  } else {\n    alert('Canvas not supported!');\n  }\n}\n</code></pre>\n<hr>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Compass Image with Needle\"&gt;\n    &lt;gameid&gt;98aa909f-76b9-4b1d-8b66-df7604f75715&lt;/gameid&gt;\n    &lt;version&gt;1.3&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;description&gt;&lt;![CDATA[Compass and images from:&lt;br/&gt;https://github.com/rheh/HTML5-canvas-projects/tree/master/compass]]&gt;&lt;/description&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;start type=\"script\"&gt;\n    &lt;/start&gt;\n    &lt;inituserinterface type=\"script\"&gt;&lt;![CDATA[\n      msg (\"&lt;div style='display:none'&gt;&lt;img id='needle-img' src = 'https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/needle.png'/&gt;&lt;br/&gt;&lt;img id='comp-img' src='https://raw.githubusercontent.com/rheh/HTML5-canvas-projects/master/compass/compass.png'/&gt;&lt;/div&gt;\")\n      msg (\"&lt;div id=\\\"compassImagePane\\\" style=\\\"display:none\\\" &gt;&lt;canvas id=\\\"compass\\\" class=\\\" ui-accordion-content ui-widget-content ui-corner-bottom  ui-corner-top\\\" width=\\\"200\\\" height=\\\"200\\\"&gt;&lt;/canvas&gt;&lt;/div&gt;\")\n      JS.eval (\"$('#compassImagePane').insertAfter($('#compassAccordion')).show();setTimeout(function(){initCompass();drawCompass();},100);\")\n    ]]&gt;&lt;/inituserinterface&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description type=\"script\"&gt;\n    &lt;/description&gt;\n    &lt;beforeenter type=\"script\"&gt;\n    &lt;/beforeenter&gt;\n    &lt;enter type=\"script\"&gt;\n      JS.setCompassAndDraw (\"s\")\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"south\" to=\"second room\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"second room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;beforeenter type=\"script\"&gt;\n      JS.setCompassAndDraw (\"n\")\n    &lt;/beforeenter&gt;\n    &lt;exit alias=\"north\" to=\"room\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;javascript src=\"compass.js\" /&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n<hr>\n<p>To hide the image pane:<br>\n<code>JS.uiHide(\"#compassImagePane\")</code></p>\n<p>To show it:<br>\n<code>JS.uiShow(\"#compassImagePane\")</code></p>\n<p>To point the needle to a certain degree:<br>\n<code>JS.setCompassByDegreesAndShow(degree)</code><br>\n(This can be 1-360, 360 being North.)</p>\n<p>To point the needle to a certain direction:<br>\n<code>JS.setCompassAndShow(direction)</code></p>\n<p>Use abbreviations: \"n\",\"ne\",\"e\",\"se\",\"s\",\"sw\",\"w\",\"nw\"</p>\n<hr>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/36078217-64b9e29a-0f39-11e8-9a9e-29523e54e332.png\" alt=\"image\"></p>\n\n",
      "PostDate": "2018-02-11T20:38:50.8519566Z",
      "LastEditDate": "2018-02-11T21:34:56.7210404Z",
      "link": null
    },
    {
      "PostId": "89ba6cd5-b9cb-4e00-aa04-b79192ab8fe2",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I don't think that word means what you think it means....\r\n\r\nNow I just need an altimeter and I can make the Spirit of St. Louis fly again!\r\nNo. Wait I was building a Pirate ship...\r\n\r\nI was ready to call it quits after trying to do this. Searching and searching for the right code. I was close several times but as it has been said so many times before here, not having some quotes or a semi colon screws the pooch.\r\n\r\nNice KV, Thanks",
      "EditableFormat": "markdown",
      "HTML": "<p>I don't think that word means what you think it means....</p>\n<p>Now I just need an altimeter and I can make the Spirit of St. Louis fly again!<br>\nNo. Wait I was building a Pirate ship...</p>\n<p>I was ready to call it quits after trying to do this. Searching and searching for the right code. I was close several times but as it has been said so many times before here, not having some quotes or a semi colon screws the pooch.</p>\n<p>Nice KV, Thanks</p>\n\n",
      "PostDate": "2018-02-12T01:47:34.0225081Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
