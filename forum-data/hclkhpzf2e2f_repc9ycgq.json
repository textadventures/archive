{
  "Topic": {
    "TopicId": "hclkhpzf2e2f_repc9ycgq",
    "ForumId": "10",
    "Title": "Dynamic Hyperlinks (success!)",
    "LastUpdated": "2018-05-16T08:45:53.2924867Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "22d23fad-4c1f-42ab-a602-abbd6f66ea79",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have made progress beyond my wildest dreams towards giving players dynamic control of Quest features. Bringing the map in and out was very easy. Bringing the games panes in and out raised a few issues but these can be worked around. The final element is the ability to switch hyperlinks on and off dynamically. Can it be done? If so, then it is possible for a player to have a vanilla, fully classic game, with just text and the player guessing what verbs are needed...perhaps bringing in links if stuck, or the map if lost, or the panes to reduce typing.",
      "EditableFormat": "markdown",
      "HTML": "<p>I have made progress beyond my wildest dreams towards giving players dynamic control of Quest features. Bringing the map in and out was very easy. Bringing the games panes in and out raised a few issues but these can be worked around. The final element is the ability to switch hyperlinks on and off dynamically. Can it be done? If so, then it is possible for a player to have a vanilla, fully classic game, with just text and the player guessing what verbs are needed...perhaps bringing in links if stuck, or the map if lost, or the panes to reduce typing.</p>\n\n",
      "PostDate": "2018-05-16T08:45:53.2924867Z",
      "LastEditDate": "2018-05-16T14:35:29.6204282Z",
      "link": null
    },
    {
      "PostId": "60222915-9c91-4ddd-ad25-f2dd12844031",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Switching hyperlinks on and off is easy enough, it's a property of the game object. `enablehyperlinks`, I think (off the top of my head).\r\nBut… if you switch it on or off during the game, it will only affect text output after that point. It should be fairly simple to remove existing hyperlinks, as there's JS functions to do that (such as removing links to objects in a room when you leave the room), so it shouldn't be too hard to use the same function to disable all hyperlinks.\r\n\r\nThe disabling of links that have gone out of scope is done by the function `UpdateObjectLinks` in `CoreScopes.aslx`. In the case where hyperlinks have been disabled, this function will do nothing. I think it would make more sense to have an else clause, where it sends an empty data bundle. This would make all links currently on the screen disappear.\r\n\r\nI'm thinking you probably want to change the functions `GetDisplayName` and/or `GetDisplayNameLink` as well. So that when links are disabled, instead of sending object names in plain text, it still generates the `{object:name}` links. Then change the function in the text processor (which will be a lot easier in 5.8) so that if hyperlinks are disabled, it still sends out the `<a>` element, but add the class \"disabled\" to it.\r\nThis means that as soon as you enable hyperlinks, when UpdateObjectLinks is run at the end of the turn, the links should appear for objects that are still in scope.\r\n\r\n(Note: I should be working now, and am currently in a holiday cottage in Derbyshire with very unstable internet access. So this is all off the top of my head, not properly tested)",
      "EditableFormat": "markdown",
      "HTML": "<p>Switching hyperlinks on and off is easy enough, it's a property of the game object. <code>enablehyperlinks</code>, I think (off the top of my head).<br>\nBut… if you switch it on or off during the game, it will only affect text output after that point. It should be fairly simple to remove existing hyperlinks, as there's JS functions to do that (such as removing links to objects in a room when you leave the room), so it shouldn't be too hard to use the same function to disable all hyperlinks.</p>\n<p>The disabling of links that have gone out of scope is done by the function <code>UpdateObjectLinks</code> in <code>CoreScopes.aslx</code>. In the case where hyperlinks have been disabled, this function will do nothing. I think it would make more sense to have an else clause, where it sends an empty data bundle. This would make all links currently on the screen disappear.</p>\n<p>I'm thinking you probably want to change the functions <code>GetDisplayName</code> and/or <code>GetDisplayNameLink</code> as well. So that when links are disabled, instead of sending object names in plain text, it still generates the <code>{object:name}</code> links. Then change the function in the text processor (which will be a lot easier in 5.8) so that if hyperlinks are disabled, it still sends out the <code>&lt;a&gt;</code> element, but add the class \"disabled\" to it.<br>\nThis means that as soon as you enable hyperlinks, when UpdateObjectLinks is run at the end of the turn, the links should appear for objects that are still in scope.</p>\n<p>(Note: I should be working now, and am currently in a holiday cottage in Derbyshire with very unstable internet access. So this is all off the top of my head, not properly tested)</p>\n\n",
      "PostDate": "2018-05-16T10:51:18.2127327Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b77baac9-b2ed-432a-b59a-b882c16b1fdf",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@mrangel, that's wonderful! I don't claim to follow all that technical detail but \"easy enough\" is just what I'd hoped to hear!!  There is no rush on this, so happy to talk more when you return from your holiday...enjoy Derbyshire...",
      "EditableFormat": "markdown",
      "HTML": "<p>@mrangel, that's wonderful! I don't claim to follow all that technical detail but \"easy enough\" is just what I'd hoped to hear!!  There is no rush on this, so happy to talk more when you return from your holiday...enjoy Derbyshire...</p>\n\n",
      "PostDate": "2018-05-16T11:24:17.3923228Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dff3dc27-0b4e-4dcf-809a-d70e22e39954",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Try adding this command and turn script:\r\n\r\nThis is OLD CODE.  (Click [here](http://textadventures.co.uk/forum/quest/topic/hclkhpzf2e2f_repc9ycgq/dynamic-hyperlinks-fingers-crossed#b223541b-b2b5-469f-8d7a-5cb23ddbb7d7) for the new code.)\r\n\r\n<details>\r\n\r\n```\r\n  <command name=\"toggle_links_cmd\">\r\n    <pattern>links;hyperlinks;toggle links;toggle hyperlinks</pattern>\r\n    <script>\r\n      // I am not using game.enablehyperlinks because the links are not \\\r\n      // created while that is set to false.\r\n      if (not GetBoolean(game, \"suppresshyperlinks\")) {\r\n        game.suppresshyperlinks = true\r\n        EnableTurnScript (nolinks)\r\n        msg (\"Hyperlinks disabled.\")\r\n      }\r\n      else {\r\n        game.suppresshyperlinks = false\r\n        DisableTurnScript (nolinks)\r\n        msg (\"Hyperlinks enabled.\")\r\n      }\r\n    </script>\r\n  </command>\r\n```\r\n```\r\n  <turnscript name=\"nolinks\">\r\n    <script>\r\n      if (GetBoolean(game, \"suppresshyperlinks\")) {\r\n        JS.eval (\"setTimeout(function(){$('a').each(function(){$(this).addClass('disabled');});},1);/*May need to increase the time for online play, but it would probably ruin the effect!*/\")\r\n      }\r\n    </script>\r\n  </turnscript>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>Try adding this command and turn script:</p>\n<p>This is OLD CODE.  (Click <a href=\"http://textadventures.co.uk/forum/quest/topic/hclkhpzf2e2f_repc9ycgq/dynamic-hyperlinks-fingers-crossed#b223541b-b2b5-469f-8d7a-5cb23ddbb7d7\">here</a> for the new code.)</p>\n<details>\n<pre><code>  &lt;command name=\"toggle_links_cmd\"&gt;\n    &lt;pattern&gt;links;hyperlinks;toggle links;toggle hyperlinks&lt;/pattern&gt;\n    &lt;script&gt;\n      // I am not using game.enablehyperlinks because the links are not \\\n      // created while that is set to false.\n      if (not GetBoolean(game, \"suppresshyperlinks\")) {\n        game.suppresshyperlinks = true\n        EnableTurnScript (nolinks)\n        msg (\"Hyperlinks disabled.\")\n      }\n      else {\n        game.suppresshyperlinks = false\n        DisableTurnScript (nolinks)\n        msg (\"Hyperlinks enabled.\")\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n<pre><code>  &lt;turnscript name=\"nolinks\"&gt;\n    &lt;script&gt;\n      if (GetBoolean(game, \"suppresshyperlinks\")) {\n        JS.eval (\"setTimeout(function(){$('a').each(function(){$(this).addClass('disabled');});},1);/*May need to increase the time for online play, but it would probably ruin the effect!*/\")\n      }\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-05-16T11:25:22.7244435Z",
      "LastEditDate": "2018-05-16T13:58:42.0034753Z",
      "link": null
    },
    {
      "PostId": "1dc45bd6-b9ba-48ac-acc9-5e1ac62d2873",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Excellent KV, that seems perfect! Does your comment in the turnscript imply there is a high processing cost when the links are hidden? ",
      "EditableFormat": "markdown",
      "HTML": "<p>Excellent KV, that seems perfect! Does your comment in the turnscript imply there is a high processing cost when the links are hidden?</p>\n\n",
      "PostDate": "2018-05-16T12:25:40.7776095Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f6c15783-4fc4-4005-86bf-2b2c2f3cc408",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "No, I just expected it to need different settings online.  I was thinking it may need more than a millisecond, but it actually needs less.\r\n\r\nThe links flash for a split second online when toggled off.\r\n\r\nEverything mrangel said is true. I was just trying to find a way to pull this off without having to change all those scripts. I have one more idea to test out. Be right back!",
      "EditableFormat": "markdown",
      "HTML": "<p>No, I just expected it to need different settings online.  I was thinking it may need more than a millisecond, but it actually needs less.</p>\n<p>The links flash for a split second online when toggled off.</p>\n<p>Everything mrangel said is true. I was just trying to find a way to pull this off without having to change all those scripts. I have one more idea to test out. Be right back!</p>\n\n",
      "PostDate": "2018-05-16T12:34:09.237109Z",
      "LastEditDate": "2018-05-16T13:59:06.2511515Z",
      "link": null
    },
    {
      "PostId": "ff7f5d17-965c-4158-a9d8-fc5995b5ee4b",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "...in terms of effect, it would be okay simply to show links in the current location after switching them on, which could be achieved by triggering 'look' to repeat the room description with links shown? ",
      "EditableFormat": "markdown",
      "HTML": "<p>...in terms of effect, it would be okay simply to show links in the current location after switching them on, which could be achieved by triggering 'look' to repeat the room description with links shown?</p>\n\n",
      "PostDate": "2018-05-16T12:50:38.9234041Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b223541b-b2b5-469f-8d7a-5cb23ddbb7d7",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you use the last code I posted, you can see the links flash for a split second after entering a command when the links are toggled off.  (It doesn't do that in the desktop player.)\r\n\r\n---\r\nTry this instead (no more need for a turn script, and it works the same online as it does in the desktop player):\r\n\r\n**Version 2 - Fixed to work in saved games!**\r\n```\r\n  <command name=\"toggle_links_cmd\">\r\n    <pattern>links;hyperlinks;toggle links;toggle hyperlinks</pattern>\r\n    <script><![CDATA[\r\n      JS.eval (\"if (typeof(linksEnabled) == 'undefined'){var linksEnabled = true; function updateCommandLinks(data) {     $(\\\".commandlink\\\").each(function (index, e) {         var $e = $(e);         if (!$(e).data(\\\"deactivated\\\")) {             var elementid = $e.data(\\\"elementid\\\");             var available = $.inArray(elementid, data) > -1 || elementid.length == 0;             if (available) {                 if (linksEnabled) {$e.removeClass(\\\"disabled\\\");}             } else {                 $e.addClass(\\\"disabled\\\");             }         }     });$(\\\".cmdlink\\\").each(function(){\tif (!linksEnabled) {\t\t$(this).addClass(\\\"disabled\\\");\t}});};}\")\r\n      if (not GetBoolean(game, \"suppresshyperlinks\")) {\r\n        game.suppresshyperlinks = true\r\n        JS.eval (\"linksEnabled = false;\")\r\n        JS.eval (\"$('.cmdlink,.commandlink').each(function(){$(this).addClass('disabled');});\")\r\n        msg (\"Hyperlinks disabled.\")\r\n      }\r\n      else {\r\n        game.suppresshyperlinks = false\r\n        JS.eval (\"linksEnabled = true;\")\r\n        msg (\"Hyperlinks enabled.\")\r\n      }\r\n    ]]></script>\r\n  </command>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>If you use the last code I posted, you can see the links flash for a split second after entering a command when the links are toggled off.  (It doesn't do that in the desktop player.)</p>\n<hr>\n<p>Try this instead (no more need for a turn script, and it works the same online as it does in the desktop player):</p>\n<p><strong>Version 2 - Fixed to work in saved games!</strong></p>\n<pre><code>  &lt;command name=\"toggle_links_cmd\"&gt;\n    &lt;pattern&gt;links;hyperlinks;toggle links;toggle hyperlinks&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      JS.eval (\"if (typeof(linksEnabled) == 'undefined'){var linksEnabled = true; function updateCommandLinks(data) {     $(\\\".commandlink\\\").each(function (index, e) {         var $e = $(e);         if (!$(e).data(\\\"deactivated\\\")) {             var elementid = $e.data(\\\"elementid\\\");             var available = $.inArray(elementid, data) &gt; -1 || elementid.length == 0;             if (available) {                 if (linksEnabled) {$e.removeClass(\\\"disabled\\\");}             } else {                 $e.addClass(\\\"disabled\\\");             }         }     });$(\\\".cmdlink\\\").each(function(){\tif (!linksEnabled) {\t\t$(this).addClass(\\\"disabled\\\");\t}});};}\")\n      if (not GetBoolean(game, \"suppresshyperlinks\")) {\n        game.suppresshyperlinks = true\n        JS.eval (\"linksEnabled = false;\")\n        JS.eval (\"$('.cmdlink,.commandlink').each(function(){$(this).addClass('disabled');});\")\n        msg (\"Hyperlinks disabled.\")\n      }\n      else {\n        game.suppresshyperlinks = false\n        JS.eval (\"linksEnabled = true;\")\n        msg (\"Hyperlinks enabled.\")\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2018-05-16T13:01:38.477768Z",
      "LastEditDate": "2018-05-16T13:04:32.9011541Z",
      "link": null
    },
    {
      "PostId": "3c6a272e-8624-490b-a23f-3c61dc6ebd6c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">  it would be okay simply to show links in the current location after switching them on, which could be achieved by triggering 'look' to repeat the room description with links shown\r\n\r\nI was thinking this might be a good way to handle it, but that last code I posted renders this unnecessary.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>it would be okay simply to show links in the current location after switching them on, which could be achieved by triggering 'look' to repeat the room description with links shown</p>\n</blockquote>\n<p>I was thinking this might be a good way to handle it, but that last code I posted renders this unnecessary.</p>\n\n",
      "PostDate": "2018-05-16T13:05:33.8151309Z",
      "LastEditDate": "2018-05-16T13:06:07.3867447Z",
      "link": null
    },
    {
      "PostId": "128f7475-c6fa-4901-a22c-f208a4aaf476",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here's a test game with that last bit of code I posted:\r\n\r\nhttp://textadventures.co.uk/games/view/bfgvvuakbuscgifh-q90tq/toggling-hyperlinks",
      "EditableFormat": "markdown",
      "HTML": "<p>Here's a test game with that last bit of code I posted:</p>\n<p>http://textadventures.co.uk/games/view/bfgvvuakbuscgifh-q90tq/toggling-hyperlinks</p>\n\n",
      "PostDate": "2018-05-16T13:11:53.8142822Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d3df39ec-04e5-4f75-bfa9-3189e3faf529",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "BONUS CODE:\r\n\r\n```\r\n  <command name=\"font_inc\">\r\n    <pattern>increase font size;increase font;inc font size;inc font</pattern>\r\n    <script>\r\n      JS.eval (\"var currentSize = $('body').css(\\\"font-size\\\");$('#divOutput *').each(function(){$(this).css(\\\"font-size\\\", parseInt($(this).css(\\\"font-size\\\").replace(/px/,'')) + 1+\\\"px\\\");})\")\r\n      IncreaseObjectCounter (game, \"defaultfontsize\")\r\n      msg (\"Font-size increased.\")\r\n    </script>\r\n  </command>\r\n```\r\n```\r\n    <command name=\"font_dec\">\r\n    <pattern>decrease font size;decrease font;dec font size;dec font</pattern>\r\n    <script>\r\n      JS.eval (\"var currentSize = $('body').css(\\\"font-size\\\");$('#divOutput *').each(function(){$(this).css(\\\"font-size\\\", parseInt($(this).css(\\\"font-size\\\").replace(/px/,'')) - 1+ \\\"px\\\");})\")\r\n      DecreaseObjectCounter (game, \"defaultfontsize\")\r\n      msg (\"Font-size decreased.\")\r\n    </script>\r\n  </command>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>BONUS CODE:</p>\n<pre><code>  &lt;command name=\"font_inc\"&gt;\n    &lt;pattern&gt;increase font size;increase font;inc font size;inc font&lt;/pattern&gt;\n    &lt;script&gt;\n      JS.eval (\"var currentSize = $('body').css(\\\"font-size\\\");$('#divOutput *').each(function(){$(this).css(\\\"font-size\\\", parseInt($(this).css(\\\"font-size\\\").replace(/px/,'')) + 1+\\\"px\\\");})\")\n      IncreaseObjectCounter (game, \"defaultfontsize\")\n      msg (\"Font-size increased.\")\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n<pre><code>    &lt;command name=\"font_dec\"&gt;\n    &lt;pattern&gt;decrease font size;decrease font;dec font size;dec font&lt;/pattern&gt;\n    &lt;script&gt;\n      JS.eval (\"var currentSize = $('body').css(\\\"font-size\\\");$('#divOutput *').each(function(){$(this).css(\\\"font-size\\\", parseInt($(this).css(\\\"font-size\\\").replace(/px/,'')) - 1+ \\\"px\\\");})\")\n      DecreaseObjectCounter (game, \"defaultfontsize\")\n      msg (\"Font-size decreased.\")\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2018-05-16T13:56:43.3818544Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b18e8c0b-66cf-4e87-83b1-947c93353a17",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yes, that looks even better. Happier without a turn script.",
      "EditableFormat": "markdown",
      "HTML": "<p>Yes, that looks even better. Happier without a turn script.</p>\n\n",
      "PostDate": "2018-05-16T14:01:05.7245897Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b87cf869-cdf7-40ce-96d0-6eddffbe6617",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">Yes, that looks even better. Happier without a turn script.\r\n>>:thumbsup:\r\n\r\n---\r\nEDIT\r\n\r\n:thumbsup: must be a GitHub markdown thing...\r\n\r\nHow about ```&#128077;```?\r\n\r\n&#128077;\r\n\r\nOh, yeah...  There we are!\r\n\r\n---\r\n>Yes, that looks even better. Happier without a turn script.\r\n>>&#128077; KV likes this",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Yes, that looks even better. Happier without a turn script.</p>\n<blockquote>\n<p>:thumbsup:</p>\n</blockquote>\n</blockquote>\n<hr>\n<p>EDIT</p>\n<p>:thumbsup: must be a GitHub markdown thing...</p>\n<p>How about <code>&amp;#128077;</code>?</p>\n<p>👍</p>\n<p>Oh, yeah...  There we are!</p>\n<hr>\n<blockquote>\n<p>Yes, that looks even better. Happier without a turn script.</p>\n<blockquote>\n<p>👍 KV likes this</p>\n</blockquote>\n</blockquote>\n\n",
      "PostDate": "2018-05-16T14:19:44.5082176Z",
      "LastEditDate": "2018-05-16T14:25:47.8058652Z",
      "link": null
    },
    {
      "PostId": "0717b505-1d34-42b1-bb71-6808505076ad",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks once again. I'll update my games to include all these options...and make use of &#128077; every time the opportunity arises!\r\n\r\n&#128077; &#128077; &#128077;",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks once again. I'll update my games to include all these options...and make use of 👍 every time the opportunity arises!</p>\n<p>👍 👍 👍</p>\n\n",
      "PostDate": "2018-05-16T14:32:45.1216961Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a93d1a93-ac6a-47d3-aaf0-0584531f039e",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">\"Hey! 👍👍\"\r\n\\- A. Fonzarelli",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>\"Hey! 👍👍\"<br>\n- A. Fonzarelli</p>\n</blockquote>\n\n",
      "PostDate": "2018-05-16T15:13:37.3831979Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6cb09a5d-d4d5-4bdb-99f1-20c1ea3223b3",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "...one more point! By default, links are on initially. I can set them off with a silent internal toggle but is there an easier way? ...an initialise function that takes on/off as a parameter?",
      "EditableFormat": "markdown",
      "HTML": "<p>...one more point! By default, links are on initially. I can set them off with a silent internal toggle but is there an easier way? ...an initialise function that takes on/off as a parameter?</p>\n\n",
      "PostDate": "2018-05-16T15:59:08.4044446Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7b3f217c-ff9a-4df1-83bf-385327b001af",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">By default, links are on initially. I can set them off with a silent internal toggle but is there an easier way? ...an initialise function that takes on/off as a parameter?\r\n\r\nUmm...\r\n\r\nStarting from scratch:\r\n\r\n### Step 1\r\n\r\nAdd this function:\r\n\r\n```\r\n  <function name=\"SetHyperlinkStatus\" parameters=\"setting\">\r\n    if (setting = \"on\") {\r\n      bool = \"true\"\r\n    }\r\n    else if (setting = \"off\") {\r\n      bool = \"false\"\r\n    }\r\n    else {\r\n      // Incorrect input.  Just turn the links on.\r\n      bool = \"true\"\r\n    }\r\n    JS.eval (\"var linksEnabled = \"+bool+\";\")\r\n    if (bool = \"false\") {\r\n      game.suppresshyperlinks = true\r\n      JS.eval (\"$('.cmdlink,.commandlink').each(function(){$(this).addClass('disabled');});\")\r\n    }\r\n    else {\r\n      game.suppresshyperlinks = false\r\n    }\r\n  </function>\r\n```\r\n\r\n---\r\n### Step 2\r\n\r\nAdd this to **game.inituserinterface**:\r\n\r\n```\r\n// You can set this to \"on\" or \"off\", make sure it is a STRING!\r\nSetHyperlinkStatus (\"off\")\r\n// The next bit could be pasted into an included JS file, but works just as well in JS.eval()\r\nJS.eval (\"if (typeof(linksEnabled)=='undefined'){var linksEnabled = true;} function updateCommandLinks(data) {     $('.commandlink').each(function (index, e) {         var $e = $(e);         if (!$(e).data('deactivated')) {             var elementid = $e.data('elementid');             var available = $.inArray(elementid, data) > -1 || elementid.length == 0;             if (available) {                 if (linksEnabled) {$e.removeClass('disabled');}             } else {                 $e.addClass('disabled');             }         }     });$('.cmdlink').each(function(){\tif (!linksEnabled) {\t\t$(this).addClass('disabled');\t}});};\")\r\n```\r\n\r\n---\r\n### Step 3\r\n\r\nAdd this command:\r\n\r\n```\r\n  <command name=\"toggle_links_cmd\">\r\n    <pattern>links;hyperlinks;toggle links;toggle hyperlinks</pattern>\r\n    <script>\r\n      game.notarealturn = true\r\n      game.suppressturnscripts = true\r\n      if (not GetBoolean(game, \"suppresshyperlinks\")) {\r\n        SetHyperlinkStatus (\"off\")\r\n        msg (\"Hyperlinks disabled.\")\r\n      }\r\n      else {\r\n        SetHyperlinkStatus (\"on\")\r\n        msg (\"Hyperlinks enabled.\")\r\n      }\r\n    </script>\r\n  </command>\r\n```\r\n\r\n---\r\nExample game:\r\n\r\nhttp://textadventures.co.uk/games/view/kdkpb_dnxkeqps-ib0mqcq/toggling-links-version-2\r\n\r\nThe code:\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.8.6708.15638-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Toggling Links (Version 2)\">\r\n    <gameid>bbd81b4c-8136-4df3-989f-0e2802d32f88</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <feature_advancedscripts />\r\n    <inituserinterface type=\"script\"><![CDATA[\r\n      SetHyperlinkStatus (\"off\")\r\n      JS.eval (\"if (typeof(linksEnabled)=='undefined'){var linksEnabled = true;} function updateCommandLinks(data) {     $('.commandlink').each(function (index, e) {         var $e = $(e);         if (!$(e).data('deactivated')) {             var elementid = $e.data('elementid');             var available = $.inArray(elementid, data) > -1 || elementid.length == 0;             if (available) {                 if (linksEnabled) {$e.removeClass('disabled');}             } else {                 $e.addClass('disabled');             }         }     });$('.cmdlink').each(function(){\tif (!linksEnabled) {\t\t$(this).addClass('disabled');\t}});};\")\r\n    ]]></inituserinterface>\r\n  </game>\r\n  <command name=\"toggle_links_cmd\">\r\n    <pattern>links;hyperlinks;toggle links;toggle hyperlinks</pattern>\r\n    <script>\r\n      if (not GetBoolean(game, \"suppresshyperlinks\")) {\r\n        SetHyperlinkStatus (\"off\")\r\n        msg (\"Hyperlinks disabled.\")\r\n      }\r\n      else {\r\n        SetHyperlinkStatus (\"on\")\r\n        msg (\"Hyperlinks enabled.\")\r\n      }\r\n    </script>\r\n  </command>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <isroom />\r\n    <description><![CDATA[If you require assistance, enter {command:HELP}.<br/>]]></description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <exit alias=\"north\" to=\"second room\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n    <object name=\"stick\">\r\n      <inherit name=\"editor_object\" />\r\n    </object>\r\n  </object>\r\n  <object name=\"second room\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"south\" to=\"room\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n  <function name=\"SetHyperlinkStatus\" parameters=\"setting\">\r\n    if (setting = \"on\") {\r\n      bool = \"true\"\r\n    }\r\n    else if (setting = \"off\") {\r\n      bool = \"false\"\r\n    }\r\n    else {\r\n      // Incorrect input.  Just turn the links on.\r\n      bool = \"true\"\r\n    }\r\n    JS.eval (\"var linksEnabled = \"+bool+\";\")\r\n    if (bool = \"false\") {\r\n      game.suppresshyperlinks = true\r\n      JS.eval (\"$('.cmdlink,.commandlink').each(function(){$(this).addClass('disabled');});\")\r\n    }\r\n    else {\r\n      game.suppresshyperlinks = false\r\n    }\r\n  </function>\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>By default, links are on initially. I can set them off with a silent internal toggle but is there an easier way? ...an initialise function that takes on/off as a parameter?</p>\n</blockquote>\n<p>Umm...</p>\n<p>Starting from scratch:</p>\n<h3>Step 1</h3>\n<p>Add this function:</p>\n<pre><code>  &lt;function name=\"SetHyperlinkStatus\" parameters=\"setting\"&gt;\n    if (setting = \"on\") {\n      bool = \"true\"\n    }\n    else if (setting = \"off\") {\n      bool = \"false\"\n    }\n    else {\n      // Incorrect input.  Just turn the links on.\n      bool = \"true\"\n    }\n    JS.eval (\"var linksEnabled = \"+bool+\";\")\n    if (bool = \"false\") {\n      game.suppresshyperlinks = true\n      JS.eval (\"$('.cmdlink,.commandlink').each(function(){$(this).addClass('disabled');});\")\n    }\n    else {\n      game.suppresshyperlinks = false\n    }\n  &lt;/function&gt;\n</code></pre>\n<hr>\n<h3>Step 2</h3>\n<p>Add this to <strong>game.inituserinterface</strong>:</p>\n<pre><code>// You can set this to \"on\" or \"off\", make sure it is a STRING!\nSetHyperlinkStatus (\"off\")\n// The next bit could be pasted into an included JS file, but works just as well in JS.eval()\nJS.eval (\"if (typeof(linksEnabled)=='undefined'){var linksEnabled = true;} function updateCommandLinks(data) {     $('.commandlink').each(function (index, e) {         var $e = $(e);         if (!$(e).data('deactivated')) {             var elementid = $e.data('elementid');             var available = $.inArray(elementid, data) &gt; -1 || elementid.length == 0;             if (available) {                 if (linksEnabled) {$e.removeClass('disabled');}             } else {                 $e.addClass('disabled');             }         }     });$('.cmdlink').each(function(){\tif (!linksEnabled) {\t\t$(this).addClass('disabled');\t}});};\")\n</code></pre>\n<hr>\n<h3>Step 3</h3>\n<p>Add this command:</p>\n<pre><code>  &lt;command name=\"toggle_links_cmd\"&gt;\n    &lt;pattern&gt;links;hyperlinks;toggle links;toggle hyperlinks&lt;/pattern&gt;\n    &lt;script&gt;\n      game.notarealturn = true\n      game.suppressturnscripts = true\n      if (not GetBoolean(game, \"suppresshyperlinks\")) {\n        SetHyperlinkStatus (\"off\")\n        msg (\"Hyperlinks disabled.\")\n      }\n      else {\n        SetHyperlinkStatus (\"on\")\n        msg (\"Hyperlinks enabled.\")\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n<hr>\n<p>Example game:</p>\n<p>http://textadventures.co.uk/games/view/kdkpb_dnxkeqps-ib0mqcq/toggling-links-version-2</p>\n<p>The code:</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.8.6708.15638--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Toggling Links (Version 2)\"&gt;\n    &lt;gameid&gt;bbd81b4c-8136-4df3-989f-0e2802d32f88&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;inituserinterface type=\"script\"&gt;&lt;![CDATA[\n      SetHyperlinkStatus (\"off\")\n      JS.eval (\"if (typeof(linksEnabled)=='undefined'){var linksEnabled = true;} function updateCommandLinks(data) {     $('.commandlink').each(function (index, e) {         var $e = $(e);         if (!$(e).data('deactivated')) {             var elementid = $e.data('elementid');             var available = $.inArray(elementid, data) &gt; -1 || elementid.length == 0;             if (available) {                 if (linksEnabled) {$e.removeClass('disabled');}             } else {                 $e.addClass('disabled');             }         }     });$('.cmdlink').each(function(){\tif (!linksEnabled) {\t\t$(this).addClass('disabled');\t}});};\")\n    ]]&gt;&lt;/inituserinterface&gt;\n  &lt;/game&gt;\n  &lt;command name=\"toggle_links_cmd\"&gt;\n    &lt;pattern&gt;links;hyperlinks;toggle links;toggle hyperlinks&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not GetBoolean(game, \"suppresshyperlinks\")) {\n        SetHyperlinkStatus (\"off\")\n        msg (\"Hyperlinks disabled.\")\n      }\n      else {\n        SetHyperlinkStatus (\"on\")\n        msg (\"Hyperlinks enabled.\")\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;isroom /&gt;\n    &lt;description&gt;&lt;![CDATA[If you require assistance, enter {command:HELP}.&lt;br/&gt;]]&gt;&lt;/description&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"north\" to=\"second room\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"stick\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"second room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"south\" to=\"room\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;function name=\"SetHyperlinkStatus\" parameters=\"setting\"&gt;\n    if (setting = \"on\") {\n      bool = \"true\"\n    }\n    else if (setting = \"off\") {\n      bool = \"false\"\n    }\n    else {\n      // Incorrect input.  Just turn the links on.\n      bool = \"true\"\n    }\n    JS.eval (\"var linksEnabled = \"+bool+\";\")\n    if (bool = \"false\") {\n      game.suppresshyperlinks = true\n      JS.eval (\"$('.cmdlink,.commandlink').each(function(){$(this).addClass('disabled');});\")\n    }\n    else {\n      game.suppresshyperlinks = false\n    }\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-05-16T16:29:57.2538955Z",
      "LastEditDate": "2018-05-16T16:46:40.0957065Z",
      "link": null
    },
    {
      "PostId": "b554a783-1a65-4db1-a391-bf78b89c86b1",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks again, KV, we are there!\r\n&#128077;&#128077;&#128077;&#128077;&#128077;",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks again, KV, we are there!<br>\n👍👍👍👍👍</p>\n\n",
      "PostDate": "2018-05-16T17:03:41.8342467Z",
      "LastEditDate": "2018-05-16T17:04:36.8786053Z",
      "link": null
    },
    {
      "PostId": "f9c49d0a-db14-448d-9d67-d04cc3d5455f",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank **you**, DavyB!\r\n\r\nYou, sir, were the inspiration!\r\n\r\n---\r\nWhat else you got (besides dragging the map; I'm still researching that)?",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank <strong>you</strong>, DavyB!</p>\n<p>You, sir, were the inspiration!</p>\n<hr>\n<p>What else you got (besides dragging the map; I'm still researching that)?</p>\n\n",
      "PostDate": "2018-05-16T17:06:19.4905439Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1bcfe6ae-6818-4c3b-aed4-baf0fcd9f3d3",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "With your responses today, I need to update the games I've been working on and test them. Who knows what will come out of that. \r\n\r\nI thought I had a couple more problems with game panes but experiments showed that these were just consequences of the way the games were set up rather than being a general issue. I WILL be back!",
      "EditableFormat": "markdown",
      "HTML": "<p>With your responses today, I need to update the games I've been working on and test them. Who knows what will come out of that.</p>\n<p>I thought I had a couple more problems with game panes but experiments showed that these were just consequences of the way the games were set up rather than being a general issue. I WILL be back!</p>\n\n",
      "PostDate": "2018-05-16T17:53:41.3196373Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e48f3fcc-c503-4a07-beae-e9f181ed6044",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You want something to chew on K.V?\r\n\r\n\r\n<a href=\"https://textadventures.co.uk/forum/quest/topic/xgqarmqn8u_bqsxrke1ahq/dynamic-realtime-map-placement-not-using-the-questmap\">Chew on this! :)</a>\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>You want something to chew on K.V?</p>\n<p><a href=\"https://textadventures.co.uk/forum/quest/topic/xgqarmqn8u_bqsxrke1ahq/dynamic-realtime-map-placement-not-using-the-questmap\">Chew on this! :)</a></p>\n\n",
      "PostDate": "2018-05-16T18:31:20.1361787Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "90727c86-c2e1-4d48-b2c1-5d012e9c63fe",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(Yeah, I know it's already solved, but wanted to see if my method was viable. I think it should be, if you don't mind overriding a function. And I *still* have no idea from looking at the XML how Quest distinguishes between a regex and a simple pattern)\r\n\r\n```\r\n<command name=\"toggle_links_cmd\" pattern=\"^(toggle |turn |switch |(?<text>enable|disable|show|hide))?(hyper)?links? ?(?<text>on|off|)$\">\r\n  <script>\r\n    game.notarealturn = true\r\n    game.suppressturnscripts = true\r\n    switch (LCase(text)) {\r\n      case (\"on\",\"enable\",\"show\") {\r\n        game.suppresshyperlinks = false\r\n        msg (\"Hyperlinks enabled.\")\r\n      }\r\n      case (\"off\",\"disable\",\"hide\") {\r\n        game.suppresshyperlinks = true\r\n        msg (\"Hyperlinks suppressed.\")\r\n      }\r\n      default {\r\n        game.suppresshyperlinks = not GetBoolean(game, \"suppresshyperlinks\")\r\n        msg (\"Hyperlinks toggled {either game.suppresshyperlinks:off|on}.\")\r\n      }\r\n    }\r\n  </script>\r\n</command>\r\n\r\n<function name=\"UpdateObjectLinks\">\r\n  if (GetBoolean(game, \"suppresshyperlinks\")) {\r\n    JS.updateObjectLinks(NewStringDictionary())\r\n    JS.updateExitLinks(NewStringList())\r\n    JS.updateCommandLinks(NewStringList())\r\n  }\r\n  else if (game.enablehyperlinks) {\r\n    data = NewStringDictionary()\r\n    foreach (object, ScopeVisible()) {\r\n      dictionary add (data, object.name, Join(GetDisplayVerbs(object), \"/\"))\r\n    }\r\n    JS.updateObjectLinks(data)\r\n    exits = NewStringList()\r\n    foreach (exit, ScopeExits()) {\r\n      list add (exits, exit.name)\r\n    }\r\n    JS.updateExitLinks(exits)\r\n    commands = NewStringList()\r\n    foreach (cmd, ScopeCommands()) {\r\n      list add (commands, cmd.name)\r\n    }\r\n    JS.updateCommandLinks(commands)\r\n  }\r\n</function>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>(Yeah, I know it's already solved, but wanted to see if my method was viable. I think it should be, if you don't mind overriding a function. And I <em>still</em> have no idea from looking at the XML how Quest distinguishes between a regex and a simple pattern)</p>\n<pre><code>&lt;command name=\"toggle_links_cmd\" pattern=\"^(toggle |turn |switch |(?&lt;text&gt;enable|disable|show|hide))?(hyper)?links? ?(?&lt;text&gt;on|off|)$\"&gt;\n  &lt;script&gt;\n    game.notarealturn = true\n    game.suppressturnscripts = true\n    switch (LCase(text)) {\n      case (\"on\",\"enable\",\"show\") {\n        game.suppresshyperlinks = false\n        msg (\"Hyperlinks enabled.\")\n      }\n      case (\"off\",\"disable\",\"hide\") {\n        game.suppresshyperlinks = true\n        msg (\"Hyperlinks suppressed.\")\n      }\n      default {\n        game.suppresshyperlinks = not GetBoolean(game, \"suppresshyperlinks\")\n        msg (\"Hyperlinks toggled {either game.suppresshyperlinks:off|on}.\")\n      }\n    }\n  &lt;/script&gt;\n&lt;/command&gt;\n\n&lt;function name=\"UpdateObjectLinks\"&gt;\n  if (GetBoolean(game, \"suppresshyperlinks\")) {\n    JS.updateObjectLinks(NewStringDictionary())\n    JS.updateExitLinks(NewStringList())\n    JS.updateCommandLinks(NewStringList())\n  }\n  else if (game.enablehyperlinks) {\n    data = NewStringDictionary()\n    foreach (object, ScopeVisible()) {\n      dictionary add (data, object.name, Join(GetDisplayVerbs(object), \"/\"))\n    }\n    JS.updateObjectLinks(data)\n    exits = NewStringList()\n    foreach (exit, ScopeExits()) {\n      list add (exits, exit.name)\n    }\n    JS.updateExitLinks(exits)\n    commands = NewStringList()\n    foreach (cmd, ScopeCommands()) {\n      list add (commands, cmd.name)\n    }\n    JS.updateCommandLinks(commands)\n  }\n&lt;/function&gt;\n</code></pre>\n\n",
      "PostDate": "2018-05-16T20:33:00.9868978Z",
      "LastEditDate": "2018-05-16T21:37:51.0419488Z",
      "link": null
    },
    {
      "PostId": "9e9dd6ff-0b0f-4a8b-83ca-994b983526dc",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks everyone, this looks closed. Its use can be seen in the latest version of Giantkiller Too, just uploaded.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks everyone, this looks closed. Its use can be seen in the latest version of Giantkiller Too, just uploaded.</p>\n\n",
      "PostDate": "2018-05-19T17:02:09.627545Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b6c52fc4-1cad-4f7b-8927-8a35f838471c",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@mrangel\r\n\r\nThat code works splendidly.  I only needed to change the way the pattern is declared:\r\n\r\n```\r\n  <command name=\"toggle_links_cmd\">\r\n    <pattern type=\"string\"><![CDATA[^(toggle |turn |switch |(?<text>enable|disable|show|hide))?(hyper)?links? ?(?<text>on|off|)$]]></pattern>\r\n    <script>\r\n      game.notarealturn = true\r\n      game.suppressturnscripts = true\r\n      switch (LCase(text)) {\r\n        case (\"on\",\"enable\",\"show\") {\r\n          game.suppresshyperlinks = false\r\n          msg (\"Hyperlinks enabled.\")\r\n        }\r\n        case (\"off\",\"disable\",\"hide\") {\r\n          game.suppresshyperlinks = true\r\n          msg (\"Hyperlinks suppressed.\")\r\n        }\r\n        default {\r\n          game.suppresshyperlinks = not GetBoolean(game, \"suppresshyperlinks\")\r\n          msg (\"Hyperlinks toggled {either game.suppresshyperlinks:off|on}.\")\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>@mrangel</p>\n<p>That code works splendidly.  I only needed to change the way the pattern is declared:</p>\n<pre><code>  &lt;command name=\"toggle_links_cmd\"&gt;\n    &lt;pattern type=\"string\"&gt;&lt;![CDATA[^(toggle |turn |switch |(?&lt;text&gt;enable|disable|show|hide))?(hyper)?links? ?(?&lt;text&gt;on|off|)$]]&gt;&lt;/pattern&gt;\n    &lt;script&gt;\n      game.notarealturn = true\n      game.suppressturnscripts = true\n      switch (LCase(text)) {\n        case (\"on\",\"enable\",\"show\") {\n          game.suppresshyperlinks = false\n          msg (\"Hyperlinks enabled.\")\n        }\n        case (\"off\",\"disable\",\"hide\") {\n          game.suppresshyperlinks = true\n          msg (\"Hyperlinks suppressed.\")\n        }\n        default {\n          game.suppresshyperlinks = not GetBoolean(game, \"suppresshyperlinks\")\n          msg (\"Hyperlinks toggled {either game.suppresshyperlinks:off|on}.\")\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2018-05-19T19:27:26.0201762Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "22771850-8fd7-4189-81f4-d7de948639fe",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "My regex is a little wonky. I think `^(?<text>toggle|turn|switch|enable|disable|show|hide|) ?(hyper)?links? ?(?<text>on|off)?$` might be better. As far as I can tell from the docs, when you specify multiple named subpatterns with the same name, it will take the last one that matches. So `(?<text>show|hide|toggle|)` will set `text` to \"show\", \"hide\", \"toggle\", or an empty string. Whereas `(?<text>on|off)?` will set it to \"on\" or \"off\", or leave the value from the first version. So in \"show hyperlinks off\", `text` is off; but in \"hide links\" `text` is \"hide\".\r\n\r\nIt's still a little ugly, because \"hide hyperlinks on\" will turn the links on (the first word being ignored if you specify \"on\" or \"off\"). But getting it to behave sensibly however you phrase the command would have doubled the length of the code.",
      "EditableFormat": "markdown",
      "HTML": "<p>My regex is a little wonky. I think <code>^(?&lt;text&gt;toggle|turn|switch|enable|disable|show|hide|) ?(hyper)?links? ?(?&lt;text&gt;on|off)?$</code> might be better. As far as I can tell from the docs, when you specify multiple named subpatterns with the same name, it will take the last one that matches. So <code>(?&lt;text&gt;show|hide|toggle|)</code> will set <code>text</code> to \"show\", \"hide\", \"toggle\", or an empty string. Whereas <code>(?&lt;text&gt;on|off)?</code> will set it to \"on\" or \"off\", or leave the value from the first version. So in \"show hyperlinks off\", <code>text</code> is off; but in \"hide links\" <code>text</code> is \"hide\".</p>\n<p>It's still a little ugly, because \"hide hyperlinks on\" will turn the links on (the first word being ignored if you specify \"on\" or \"off\"). But getting it to behave sensibly however you phrase the command would have doubled the length of the code.</p>\n\n",
      "PostDate": "2018-05-19T19:40:27.3089953Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
