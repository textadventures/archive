{
  "Topic": {
    "TopicId": "3997",
    "ForumId": "18",
    "Title": "Unreachable objects",
    "LastUpdated": "2013-11-07T08:59:21+00:00",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "26814",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "After reading [url=http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=10&amp;t=3993:35ed4m28]this thread[/url:35ed4m28], I realised that a transparent container is quite good way to have items out of reach, but visible.\n\nETA: [i:35ed4m28]If you are working on-line, this technique will not work, as you have to override an existing function and a dynamic template.[/i:35ed4m28]\n\nHere then is a complete Quest game (two rooms, four items) that shows that implemented for when the player has to stand on something to reach an item.\n[code:35ed4m28]&lt;!--Saved by Quest 5&#46;4&#46;4873&#46;16527--&gt;\n&lt;asl version=&quot;540&quot;&gt;\n  &lt;include ref=&quot;English&#46;aslx&quot; /&gt;\n  &lt;include ref=&quot;Core&#46;aslx&quot; /&gt;\n  &lt;dynamictemplate name=&quot;ObjectNotOpen&quot;&gt;DoObjectNotOpen (object)&lt;/dynamictemplate&gt;\n  &lt;game name=&quot;shelf&quot;&gt;\n    &lt;gameid&gt;6975d6af-3d28-4f58-aef6-ef3ada36a002&lt;/gameid&gt;\n    &lt;version&gt;1&#46;0&lt;/version&gt;\n    &lt;firstpublished&gt;2013&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=&quot;room&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;alias&gt;First Room&lt;/alias&gt;\n    &lt;usedefaultprefix type=&quot;boolean&quot;&gt;false&lt;/usedefaultprefix&gt;\n    &lt;object name=&quot;player&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;inherit name=&quot;editor_player&quot; /&gt;\n    &lt;/object&gt;\n    &lt;object name=&quot;chair&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;inherit name=&quot;standonable&quot; /&gt;\n    &lt;/object&gt;\n    &lt;object name=&quot;shelf&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;inherit name=&quot;container_closed&quot; /&gt;\n      &lt;transparent /&gt;\n      &lt;listchildren /&gt;\n      &lt;open type=&quot;boolean&quot;&gt;false&lt;/open&gt;\n      &lt;close type=&quot;boolean&quot;&gt;false&lt;/close&gt;\n      &lt;contentsprefix&gt;holding&lt;/contentsprefix&gt;\n      &lt;cannotreachmsg&gt;The shelf is too high to reach&#46;&lt;/cannotreachmsg&gt;\n      &lt;object name=&quot;teapot&quot;&gt;\n        &lt;inherit name=&quot;editor_object&quot; /&gt;\n        &lt;take /&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=&quot;cup&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;take /&gt;\n    &lt;/object&gt;\n    &lt;exit alias=&quot;west&quot; to=&quot;room2&quot;&gt;\n      &lt;inherit name=&quot;westdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;up&quot; to=&quot;room2&quot;&gt;\n      &lt;inherit name=&quot;updirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;command name=&quot;standon&quot;&gt;\n    &lt;pattern&gt;stand on #object#;stand #object#;get on #object#;up on #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (object&#46;canstandon) {\n        if (not object&#46;isstoodon) {\n          if (not game&#46;pov&#46;isstoodon = null) {\n            msg (&quot;First you get down from &quot; + GetDisplayName (game&#46;pov&#46;isstoodon) + &quot;&#46;&quot;)\n            game&#46;pov&#46;isstoodon&#46;isstoodon = false\n          }\n          if (not object&#46;parent = game&#46;pov&#46;parent) {\n            msg (&quot;You put down &quot; + GetDisplayName (object) + &quot; on the ground&#46;&quot;)\n            object&#46;parent = game&#46;pov&#46;parent\n          }\n          msg (&quot;You stand on &quot; + GetDisplayName (object) + &quot;&#46;&quot;)\n          OpenUnreachables (game&#46;pov&#46;parent)\n          object&#46;oldroomname = game&#46;pov&#46;parent&#46;alias\n          object&#46;isstoodon = true\n          game&#46;pov&#46;isstoodon = object\n          game&#46;pov&#46;parent&#46;alias = game&#46;pov&#46;parent&#46;alias + &quot; (stood on &quot; + GetDisplayName (object) + &quot;)&quot;\n          request (UpdateLocation, CapFirst(GetDisplayName(game&#46;pov&#46;parent)))\n        }\n        else {\n          msg (&quot;You are already on it!&quot;)\n        }\n      }\n      else {\n        msg (&quot;You cannot stand on &quot; + GetDisplayName (object) + &quot;!&quot;)\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=&quot;getoff&quot;&gt;\n    &lt;pattern&gt;get off #object#;off #object#;down from #object#;get down from #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (object&#46;canstandon) {\n        if (object&#46;isstoodon) {\n          msg (&quot;You get off &quot; + GetDisplayName (object) + &quot;&#46;&quot;)\n          CloseUnreachables (game&#46;pov&#46;parent)\n          game&#46;pov&#46;isstoodon = null\n          game&#46;pov&#46;parent&#46;alias = object&#46;oldroomname\n          request (UpdateLocation, CapFirst(GetDisplayName(game&#46;pov&#46;parent)))\n          object&#46;isstoodon = false\n        }\n        else {\n          msg (&quot;You are not on it!&quot;)\n        }\n      }\n      else {\n        msg (&quot;You are not on it - and nor should you be!&quot;)\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=&quot;room2&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;alias&gt;Second Room&lt;/alias&gt;\n    &lt;usedefaultprefix type=&quot;boolean&quot;&gt;false&lt;/usedefaultprefix&gt;\n    &lt;exit alias=&quot;east&quot; to=&quot;room&quot;&gt;\n      &lt;inherit name=&quot;eastdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;down&quot; to=&quot;room&quot;&gt;\n      &lt;inherit name=&quot;downdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;object name=&quot;stool&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;inherit name=&quot;standonable&quot; /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;type name=&quot;standonable&quot;&gt;\n    &lt;canstandon /&gt;\n    &lt;take /&gt;\n    &lt;isstoodon type=&quot;boolean&quot;&gt;false&lt;/isstoodon&gt;\n    &lt;displayverbs type=&quot;stringlist&quot;&gt;\n      &lt;value&gt;Look at&lt;/value&gt;\n      &lt;value&gt;Take&lt;/value&gt;\n      &lt;value&gt;Stand on&lt;/value&gt;\n      &lt;value&gt;Get off&lt;/value&gt;\n    &lt;/displayverbs&gt;\n  &lt;/type&gt;\n  &lt;function name=&quot;OnEnterRoom&quot; parameters=&quot;oldRoom&quot;&gt;&lt;!&#91;CDATA&#91;\n    game&#46;displayroomdescriptiononstart = false\n    if (IsDefined(&quot;oldRoom&quot;)) {\n      if (oldRoom &lt;&gt; null) {\n        // *** This line added ***\n        LeavingSoGetOff (oldRoom)\n        if (HasScript(oldRoom, &quot;onexit&quot;)) {\n          do (oldRoom, &quot;onexit&quot;)\n        }\n      }\n    }\n    on ready {\n      if ((not GetBoolean(game&#46;pov&#46;parent, &quot;visited&quot;)) and HasScript(game&#46;pov&#46;parent, &quot;beforefirstenter&quot;)) {\n        do (game&#46;pov&#46;parent, &quot;beforefirstenter&quot;)\n      }\n      on ready {\n        if (HasScript(game&#46;pov&#46;parent, &quot;beforeenter&quot;)) {\n          do (game&#46;pov&#46;parent, &quot;beforeenter&quot;)\n        }\n        on ready {\n          if (game&#46;gridmap) {\n            Grid_CalculateMapCoordinates (game&#46;pov&#46;parent)\n            Grid_DrawPlayerInRoom (game&#46;pov&#46;parent)\n          }\n          if (IsDefined(&quot;oldRoom&quot;)) {\n            if (oldRoom &lt;&gt; null) {\n              msg (&quot;&quot;)\n            }\n          }\n          request (UpdateLocation, CapFirst(GetDisplayName(game&#46;pov&#46;parent)))\n          roomFrameExists = false\n          if (HasString(game&#46;pov&#46;parent, &quot;picture&quot;)) {\n            if (LengthOf(game&#46;pov&#46;parent&#46;picture) &gt; 0) {\n              roomFrameExists = true\n              SetFramePicture (game&#46;pov&#46;parent&#46;picture)\n            }\n          }\n          if (game&#46;clearframe and not roomFrameExists) {\n            ClearFramePicture\n          }\n          if (game&#46;showdescriptiononenter) {\n            ShowRoomDescription\n          }\n          if ((not GetBoolean(game&#46;pov&#46;parent, &quot;visited&quot;)) and HasScript(game&#46;pov&#46;parent, &quot;firstenter&quot;)) {\n            do (game&#46;pov&#46;parent, &quot;firstenter&quot;)\n          }\n          on ready {\n            if (HasScript(game&#46;pov&#46;parent, &quot;enter&quot;)) {\n              do (game&#46;pov&#46;parent, &quot;enter&quot;)\n            }\n          }\n          set (game&#46;pov&#46;parent, &quot;visited&quot;, true)\n        }\n      }\n    }\n  &#93;&#93;&gt;&lt;/function&gt;\n  &lt;function name=&quot;LeavingSoGetOff&quot; parameters=&quot;oldroom&quot;&gt;\n    foreach (o, ScopeVisibleForRoom (oldroom)) {\n      if (GetBoolean (o, &quot;canstandon&quot;) and GetBoolean (o, &quot;isstoodon&quot;)) {\n        msg (&quot;You get off the &quot; + GetDisplayName (o) + &quot;&#46;&quot;)\n        CloseUnreachables (oldroom)\n        oldroom&#46;alias = o&#46;oldroomname\n        game&#46;pov&#46;isstoodon = null\n      }\n    }\n  &lt;/function&gt;\n  &lt;function name=&quot;OpenUnreachables&quot; parameters=&quot;rm&quot;&gt;\n    foreach (o, ScopeVisibleForRoom (rm)) {\n      if (HasString (o, &quot;cannotreachmsg&quot;)) {\n        o&#46;isopen = true\n      }\n    }\n  &lt;/function&gt;\n  &lt;function name=&quot;CloseUnreachables&quot; parameters=&quot;rm&quot;&gt;\n    foreach (o, ScopeVisibleForRoom (rm)) {\n      if (HasString (o, &quot;cannotreachmsg&quot;)) {\n        o&#46;isopen = false\n      }\n    }\n  &lt;/function&gt;\n  &lt;function name=&quot;DoObjectNotOpen&quot; parameters=&quot;object&quot; type=&quot;string&quot;&gt;\n    if (HasString (object, &quot;cannotreachmsg&quot;)) {\n      return (object&#46;cannotreachmsg)\n    }\n    else {\n      return (CapFirst(GetDisplayAlias(object)) + &quot; &quot; + Conjugate(object, &quot;be&quot;) + &quot; not open&#46;&quot;)\n    }\n  &lt;/function&gt;\n&lt;/asl&gt;[/code:35ed4m28]\n\nThe system requires:\n1. The object to stand on (chair or stool in the example) must be on type &quot;standonable&quot;.\n2. The container (the shelf) is set to type &quot;closed container&quot;, with transparent ticked; it needs a string attribute &quot;cannotreachmsg&quot;.\n3. The room has an alias.\n\nThe cunning part of the system is to redefine a dynamic template so we can have a custom message when trying to reach an object and the container is closed, so the player is informed the item is out of reach, not that the shelf is closed. This is done via the DoObjectNotOpen function.\n\nIt also overrides the stand OnRoomEnter function. There is one line added, and this is flagged. There is a fair chance OnRoomEnter will be updated in later releases of Quest (this is the 5.4 version), and you will have to copy in the new version and insert that extra line yourself.",
      "EditableFormat": "bbcode",
      "HTML": "After reading <a href=\"http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=10&amp;t=3993\" rel=\"nofollow\">this thread</a>, I realised that a transparent container is quite good way to have items out of reach, but visible.<br/><br/>ETA: <span style=\"font-style:italic;\">If you are working on-line, this technique will not work, as you have to override an existing function and a dynamic template.</span><br/><br/>Here then is a complete Quest game (two rooms, four items) that shows that implemented for when the player has to stand on something to reach an item.<br/><pre><code>&lt;!--Saved by Quest 5&#46;4&#46;4873&#46;16527--&gt;<br/>&lt;asl version=&quot;540&quot;&gt;<br/>  &lt;include ref=&quot;English&#46;aslx&quot; /&gt;<br/>  &lt;include ref=&quot;Core&#46;aslx&quot; /&gt;<br/>  &lt;dynamictemplate name=&quot;ObjectNotOpen&quot;&gt;DoObjectNotOpen (object)&lt;/dynamictemplate&gt;<br/>  &lt;game name=&quot;shelf&quot;&gt;<br/>    &lt;gameid&gt;6975d6af-3d28-4f58-aef6-ef3ada36a002&lt;/gameid&gt;<br/>    &lt;version&gt;1&#46;0&lt;/version&gt;<br/>    &lt;firstpublished&gt;2013&lt;/firstpublished&gt;<br/>  &lt;/game&gt;<br/>  &lt;object name=&quot;room&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;alias&gt;First Room&lt;/alias&gt;<br/>    &lt;usedefaultprefix type=&quot;boolean&quot;&gt;false&lt;/usedefaultprefix&gt;<br/>    &lt;object name=&quot;player&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;inherit name=&quot;editor_player&quot; /&gt;<br/>    &lt;/object&gt;<br/>    &lt;object name=&quot;chair&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;inherit name=&quot;standonable&quot; /&gt;<br/>    &lt;/object&gt;<br/>    &lt;object name=&quot;shelf&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;inherit name=&quot;container_closed&quot; /&gt;<br/>      &lt;transparent /&gt;<br/>      &lt;listchildren /&gt;<br/>      &lt;open type=&quot;boolean&quot;&gt;false&lt;/open&gt;<br/>      &lt;close type=&quot;boolean&quot;&gt;false&lt;/close&gt;<br/>      &lt;contentsprefix&gt;holding&lt;/contentsprefix&gt;<br/>      &lt;cannotreachmsg&gt;The shelf is too high to reach&#46;&lt;/cannotreachmsg&gt;<br/>      &lt;object name=&quot;teapot&quot;&gt;<br/>        &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>        &lt;take /&gt;<br/>      &lt;/object&gt;<br/>    &lt;/object&gt;<br/>    &lt;object name=&quot;cup&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;take /&gt;<br/>    &lt;/object&gt;<br/>    &lt;exit alias=&quot;west&quot; to=&quot;room2&quot;&gt;<br/>      &lt;inherit name=&quot;westdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;up&quot; to=&quot;room2&quot;&gt;<br/>      &lt;inherit name=&quot;updirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;command name=&quot;standon&quot;&gt;<br/>    &lt;pattern&gt;stand on #object#;stand #object#;get on #object#;up on #object#&lt;/pattern&gt;<br/>    &lt;script&gt;<br/>      if (object&#46;canstandon) {<br/>        if (not object&#46;isstoodon) {<br/>          if (not game&#46;pov&#46;isstoodon = null) {<br/>            msg (&quot;First you get down from &quot; + GetDisplayName (game&#46;pov&#46;isstoodon) + &quot;&#46;&quot;)<br/>            game&#46;pov&#46;isstoodon&#46;isstoodon = false<br/>          }<br/>          if (not object&#46;parent = game&#46;pov&#46;parent) {<br/>            msg (&quot;You put down &quot; + GetDisplayName (object) + &quot; on the ground&#46;&quot;)<br/>            object&#46;parent = game&#46;pov&#46;parent<br/>          }<br/>          msg (&quot;You stand on &quot; + GetDisplayName (object) + &quot;&#46;&quot;)<br/>          OpenUnreachables (game&#46;pov&#46;parent)<br/>          object&#46;oldroomname = game&#46;pov&#46;parent&#46;alias<br/>          object&#46;isstoodon = true<br/>          game&#46;pov&#46;isstoodon = object<br/>          game&#46;pov&#46;parent&#46;alias = game&#46;pov&#46;parent&#46;alias + &quot; (stood on &quot; + GetDisplayName (object) + &quot;)&quot;<br/>          request (UpdateLocation, CapFirst(GetDisplayName(game&#46;pov&#46;parent)))<br/>        }<br/>        else {<br/>          msg (&quot;You are already on it!&quot;)<br/>        }<br/>      }<br/>      else {<br/>        msg (&quot;You cannot stand on &quot; + GetDisplayName (object) + &quot;!&quot;)<br/>      }<br/>    &lt;/script&gt;<br/>  &lt;/command&gt;<br/>  &lt;command name=&quot;getoff&quot;&gt;<br/>    &lt;pattern&gt;get off #object#;off #object#;down from #object#;get down from #object#&lt;/pattern&gt;<br/>    &lt;script&gt;<br/>      if (object&#46;canstandon) {<br/>        if (object&#46;isstoodon) {<br/>          msg (&quot;You get off &quot; + GetDisplayName (object) + &quot;&#46;&quot;)<br/>          CloseUnreachables (game&#46;pov&#46;parent)<br/>          game&#46;pov&#46;isstoodon = null<br/>          game&#46;pov&#46;parent&#46;alias = object&#46;oldroomname<br/>          request (UpdateLocation, CapFirst(GetDisplayName(game&#46;pov&#46;parent)))<br/>          object&#46;isstoodon = false<br/>        }<br/>        else {<br/>          msg (&quot;You are not on it!&quot;)<br/>        }<br/>      }<br/>      else {<br/>        msg (&quot;You are not on it - and nor should you be!&quot;)<br/>      }<br/>    &lt;/script&gt;<br/>  &lt;/command&gt;<br/>  &lt;object name=&quot;room2&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;alias&gt;Second Room&lt;/alias&gt;<br/>    &lt;usedefaultprefix type=&quot;boolean&quot;&gt;false&lt;/usedefaultprefix&gt;<br/>    &lt;exit alias=&quot;east&quot; to=&quot;room&quot;&gt;<br/>      &lt;inherit name=&quot;eastdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;down&quot; to=&quot;room&quot;&gt;<br/>      &lt;inherit name=&quot;downdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;object name=&quot;stool&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;inherit name=&quot;standonable&quot; /&gt;<br/>    &lt;/object&gt;<br/>  &lt;/object&gt;<br/>  &lt;type name=&quot;standonable&quot;&gt;<br/>    &lt;canstandon /&gt;<br/>    &lt;take /&gt;<br/>    &lt;isstoodon type=&quot;boolean&quot;&gt;false&lt;/isstoodon&gt;<br/>    &lt;displayverbs type=&quot;stringlist&quot;&gt;<br/>      &lt;value&gt;Look at&lt;/value&gt;<br/>      &lt;value&gt;Take&lt;/value&gt;<br/>      &lt;value&gt;Stand on&lt;/value&gt;<br/>      &lt;value&gt;Get off&lt;/value&gt;<br/>    &lt;/displayverbs&gt;<br/>  &lt;/type&gt;<br/>  &lt;function name=&quot;OnEnterRoom&quot; parameters=&quot;oldRoom&quot;&gt;&lt;!&#91;CDATA&#91;<br/>    game&#46;displayroomdescriptiononstart = false<br/>    if (IsDefined(&quot;oldRoom&quot;)) {<br/>      if (oldRoom &lt;&gt; null) {<br/>        // *** This line added ***<br/>        LeavingSoGetOff (oldRoom)<br/>        if (HasScript(oldRoom, &quot;onexit&quot;)) {<br/>          do (oldRoom, &quot;onexit&quot;)<br/>        }<br/>      }<br/>    }<br/>    on ready {<br/>      if ((not GetBoolean(game&#46;pov&#46;parent, &quot;visited&quot;)) and HasScript(game&#46;pov&#46;parent, &quot;beforefirstenter&quot;)) {<br/>        do (game&#46;pov&#46;parent, &quot;beforefirstenter&quot;)<br/>      }<br/>      on ready {<br/>        if (HasScript(game&#46;pov&#46;parent, &quot;beforeenter&quot;)) {<br/>          do (game&#46;pov&#46;parent, &quot;beforeenter&quot;)<br/>        }<br/>        on ready {<br/>          if (game&#46;gridmap) {<br/>            Grid_CalculateMapCoordinates (game&#46;pov&#46;parent)<br/>            Grid_DrawPlayerInRoom (game&#46;pov&#46;parent)<br/>          }<br/>          if (IsDefined(&quot;oldRoom&quot;)) {<br/>            if (oldRoom &lt;&gt; null) {<br/>              msg (&quot;&quot;)<br/>            }<br/>          }<br/>          request (UpdateLocation, CapFirst(GetDisplayName(game&#46;pov&#46;parent)))<br/>          roomFrameExists = false<br/>          if (HasString(game&#46;pov&#46;parent, &quot;picture&quot;)) {<br/>            if (LengthOf(game&#46;pov&#46;parent&#46;picture) &gt; 0) {<br/>              roomFrameExists = true<br/>              SetFramePicture (game&#46;pov&#46;parent&#46;picture)<br/>            }<br/>          }<br/>          if (game&#46;clearframe and not roomFrameExists) {<br/>            ClearFramePicture<br/>          }<br/>          if (game&#46;showdescriptiononenter) {<br/>            ShowRoomDescription<br/>          }<br/>          if ((not GetBoolean(game&#46;pov&#46;parent, &quot;visited&quot;)) and HasScript(game&#46;pov&#46;parent, &quot;firstenter&quot;)) {<br/>            do (game&#46;pov&#46;parent, &quot;firstenter&quot;)<br/>          }<br/>          on ready {<br/>            if (HasScript(game&#46;pov&#46;parent, &quot;enter&quot;)) {<br/>              do (game&#46;pov&#46;parent, &quot;enter&quot;)<br/>            }<br/>          }<br/>          set (game&#46;pov&#46;parent, &quot;visited&quot;, true)<br/>        }<br/>      }<br/>    }<br/>  &#93;&#93;&gt;&lt;/function&gt;<br/>  &lt;function name=&quot;LeavingSoGetOff&quot; parameters=&quot;oldroom&quot;&gt;<br/>    foreach (o, ScopeVisibleForRoom (oldroom)) {<br/>      if (GetBoolean (o, &quot;canstandon&quot;) and GetBoolean (o, &quot;isstoodon&quot;)) {<br/>        msg (&quot;You get off the &quot; + GetDisplayName (o) + &quot;&#46;&quot;)<br/>        CloseUnreachables (oldroom)<br/>        oldroom&#46;alias = o&#46;oldroomname<br/>        game&#46;pov&#46;isstoodon = null<br/>      }<br/>    }<br/>  &lt;/function&gt;<br/>  &lt;function name=&quot;OpenUnreachables&quot; parameters=&quot;rm&quot;&gt;<br/>    foreach (o, ScopeVisibleForRoom (rm)) {<br/>      if (HasString (o, &quot;cannotreachmsg&quot;)) {<br/>        o&#46;isopen = true<br/>      }<br/>    }<br/>  &lt;/function&gt;<br/>  &lt;function name=&quot;CloseUnreachables&quot; parameters=&quot;rm&quot;&gt;<br/>    foreach (o, ScopeVisibleForRoom (rm)) {<br/>      if (HasString (o, &quot;cannotreachmsg&quot;)) {<br/>        o&#46;isopen = false<br/>      }<br/>    }<br/>  &lt;/function&gt;<br/>  &lt;function name=&quot;DoObjectNotOpen&quot; parameters=&quot;object&quot; type=&quot;string&quot;&gt;<br/>    if (HasString (object, &quot;cannotreachmsg&quot;)) {<br/>      return (object&#46;cannotreachmsg)<br/>    }<br/>    else {<br/>      return (CapFirst(GetDisplayAlias(object)) + &quot; &quot; + Conjugate(object, &quot;be&quot;) + &quot; not open&#46;&quot;)<br/>    }<br/>  &lt;/function&gt;<br/>&lt;/asl&gt;</code></pre><br/><br/>The system requires:<br/>1. The object to stand on (chair or stool in the example) must be on type &quot;standonable&quot;.<br/>2. The container (the shelf) is set to type &quot;closed container&quot;, with transparent ticked; it needs a string attribute &quot;cannotreachmsg&quot;.<br/>3. The room has an alias.<br/><br/>The cunning part of the system is to redefine a dynamic template so we can have a custom message when trying to reach an object and the container is closed, so the player is informed the item is out of reach, not that the shelf is closed. This is done via the DoObjectNotOpen function.<br/><br/>It also overrides the stand OnRoomEnter function. There is one line added, and this is flagged. There is a fair chance OnRoomEnter will be updated in later releases of Quest (this is the 5.4 version), and you will have to copy in the new version and insert that extra line yourself.",
      "PostDate": "2013-11-07T08:59:21+00:00",
      "LastEditDate": null
    }
  ]
}
