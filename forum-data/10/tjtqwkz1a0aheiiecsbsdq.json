{
  "Topic": {
    "TopicId": "tjtqwkz1a0aheiiecsbsdq",
    "ForumId": "10",
    "Title": "Back to the Shop ( resolved )",
    "LastUpdated": "2018-07-28T04:41:50.4278288Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "c31feaeb-e1a3-4db9-a17e-559ee3a18b09",
      "UserId": 232787,
      "Username": "RobBronson",
      "AvatarUrl": "https://graph.facebook.com/10206073401859041/picture?width=80&height=80",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay...So I recently had a few troubles getting Pixies Shop to work in my new game. But with the help of the brilliant minds here, I was able to get it working like a charm.\r\nThinking I had it down as to getting it working...I decided I could use such a shop in my older...more time invested game.\r\nI have been working on my older game offline for over two and a half years now. I recently upgraded to the newest version of Quest. When I started working on this game, Money wasn't even an option for someone like me that only uses the GUI.\r\n\r\nHere's the problem...The Shop set up just fine, BUT, when you try to buy an item...it gives this Error:\r\nError running script: Unrecognised list type\r\n\r\nIs there something that changed from the older version, to the newer version that is not recognizing my list types? I set the objects up as simple objects. None of them are wearables or anything else. (I realized that was a problem in the newer game.)\r\n\r\nThis game is far to large to upload the code...so I hoping someone might know what the possible problem is.\r\nAny thoughts or advice would be greatly appreciated. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay...So I recently had a few troubles getting Pixies Shop to work in my new game. But with the help of the brilliant minds here, I was able to get it working like a charm.<br>\nThinking I had it down as to getting it working...I decided I could use such a shop in my older...more time invested game.<br>\nI have been working on my older game offline for over two and a half years now. I recently upgraded to the newest version of Quest. When I started working on this game, Money wasn't even an option for someone like me that only uses the GUI.</p>\n<p>Here's the problem...The Shop set up just fine, BUT, when you try to buy an item...it gives this Error:<br>\nError running script: Unrecognised list type</p>\n<p>Is there something that changed from the older version, to the newer version that is not recognizing my list types? I set the objects up as simple objects. None of them are wearables or anything else. (I realized that was a problem in the newer game.)</p>\n<p>This game is far to large to upload the code...so I hoping someone might know what the possible problem is.<br>\nAny thoughts or advice would be greatly appreciated.</p>\n\n",
      "PostDate": "2018-07-28T04:41:50.4278288Z",
      "LastEditDate": "2018-07-29T04:46:00.6529062Z",
      "link": null
    },
    {
      "PostId": "f7721733-6244-4c5c-9806-9e3c960cce6e",
      "UserId": 369653,
      "Username": "Blindtextdev",
      "AvatarUrl": "https://secure.gravatar.com/avatar/c624d7b41e98373bec23831a1834b649?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I had this error earlier today. I had three list add()-functions adding values to a list. When I tried the ShowMenu function with the list which got created that way, I got the error you mentioned.\r\n\r\nFixed it by declaring the variable first. Like: variablename = NewStringList() - then added the items.\r\n\r\nIn your case, you'd probably want NewObjectList(). Not sure, though.",
      "EditableFormat": "markdown",
      "HTML": "<p>I had this error earlier today. I had three list add()-functions adding values to a list. When I tried the ShowMenu function with the list which got created that way, I got the error you mentioned.</p>\n<p>Fixed it by declaring the variable first. Like: variablename = NewStringList() - then added the items.</p>\n<p>In your case, you'd probably want NewObjectList(). Not sure, though.</p>\n\n",
      "PostDate": "2018-07-28T18:45:31.2616504Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b2c9c082-4ba2-4d75-9853-2a3c1899cfe5",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "you can use the 'Split' Script/Function for quickly creating String Lists:\r\n\r\ncreate (\"example_object\") // creates an 'example_object' Object\r\n\r\nexample_object.example_stringlist_attribute = Split (\"red;blue;yellow\", \";\")\r\n\r\nor you can use the \"normal\" way (creating a new/blank/empty stringlist and then adding its items to it):\r\n\r\ncreate (\"example_object\") // creates an 'example_object' Object\r\n\r\nexample_object.example_stringlist_attribute = NewStringList ()\r\nlist add (example_object.example_stringlist_attribute, \"red\")\r\nlist add (example_object.example_stringlist_attribute, \"blue\")\r\nlist add (example_object.example_stringlist_attribute, \"yellow\")\r\n\r\n---------\r\n\r\nhowever, for Object Lists, you CAN ONLY (MUST) use the \"normal\" way, you can NOT use the 'Split' for creating Object Lists:\r\n\r\ncreate (\"example_object\") // creates an 'example_object' Object\r\n\r\ncreate (\"red\") // this creates a 'red' Object\r\ncreate (\"blue\") // this creates a 'blue' Object\r\ncreate (\"yellow\") // this creates a 'yellow' Object\r\n\r\nexample_object.example_objectlist_attribute = NewObjectList ()\r\nlist add (example_object.example_objectlist_attribute, red)\r\nlist add (example_object.example_objectlist_attribute, blue)\r\nlist add (example_object.example_objectlist_attribute, yellow)\r\n\r\n---------\r\n\r\npay attention to whether you use the double quotes for its Value or not, depending on whether its a String List or an Object List\r\n\r\n---------\r\n\r\n@ RobBronson:\r\n\r\nif it's not a Data Type syntax issue (or the stringlist or the Object_Type / Type / Inherited_Attribute is missing/not-created, then someone knowledgeable of Pixie's library will have to help you, as I've not studied (don't know) most of Pixie's (many) libraries, not yet... eventually I will... eventually... lol",
      "EditableFormat": "markdown",
      "HTML": "<p>you can use the 'Split' Script/Function for quickly creating String Lists:</p>\n<p>create (\"example_object\") // creates an 'example_object' Object</p>\n<p>example_object.example_stringlist_attribute = Split (\"red;blue;yellow\", \";\")</p>\n<p>or you can use the \"normal\" way (creating a new/blank/empty stringlist and then adding its items to it):</p>\n<p>create (\"example_object\") // creates an 'example_object' Object</p>\n<p>example_object.example_stringlist_attribute = NewStringList ()<br>\nlist add (example_object.example_stringlist_attribute, \"red\")<br>\nlist add (example_object.example_stringlist_attribute, \"blue\")<br>\nlist add (example_object.example_stringlist_attribute, \"yellow\")</p>\n<hr>\n<p>however, for Object Lists, you CAN ONLY (MUST) use the \"normal\" way, you can NOT use the 'Split' for creating Object Lists:</p>\n<p>create (\"example_object\") // creates an 'example_object' Object</p>\n<p>create (\"red\") // this creates a 'red' Object<br>\ncreate (\"blue\") // this creates a 'blue' Object<br>\ncreate (\"yellow\") // this creates a 'yellow' Object</p>\n<p>example_object.example_objectlist_attribute = NewObjectList ()<br>\nlist add (example_object.example_objectlist_attribute, red)<br>\nlist add (example_object.example_objectlist_attribute, blue)<br>\nlist add (example_object.example_objectlist_attribute, yellow)</p>\n<hr>\n<p>pay attention to whether you use the double quotes for its Value or not, depending on whether its a String List or an Object List</p>\n<hr>\n<p>@ RobBronson:</p>\n<p>if it's not a Data Type syntax issue (or the stringlist or the Object_Type / Type / Inherited_Attribute is missing/not-created, then someone knowledgeable of Pixie's library will have to help you, as I've not studied (don't know) most of Pixie's (many) libraries, not yet... eventually I will... eventually... lol</p>\n\n",
      "PostDate": "2018-07-28T20:16:22.5532615Z",
      "LastEditDate": "2018-07-28T20:17:29.6309041Z",
      "link": null
    },
    {
      "PostId": "0de20be0-550a-47c0-8a91-28744f141777",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If the error comes up when you try to buy an object, it's likely because it's trying to modify the object's verbs list when it doesn't exist. When you buy an object, it removes \"buy\" from that object's display verbs list … but it doesn't check that \"Buy\" was on the verbs list in the first place.\r\n\r\nI'd suggest changing:\r\n```\r\n      list remove (obj.generatedverbslist, \"Buy\")\r\n      list remove (obj.displayverbs, \"Buy\")\r\n      list remove (obj.inventoryverbs, \"Buy\")\r\n```\r\n(in `BuyObject` function)\r\nto:\r\n```\r\n      foreach (verblist, Split(\"displayverbs;inventoryverbs;generatedverbslist\")) {\r\n        if (HasAttribute (obj, verblist)) {\r\n          verbs = GetAttribute (obj, verblist)\r\n          if (ListContains (verbs, \"Buy\")) {\r\n            list remove (verbs, \"Buy\")\r\n          }\r\n        }\r\n      }\r\n```\r\nThat way it will work correctly even if you have \"automatically generate verbs\" turned off.",
      "EditableFormat": "markdown",
      "HTML": "<p>If the error comes up when you try to buy an object, it's likely because it's trying to modify the object's verbs list when it doesn't exist. When you buy an object, it removes \"buy\" from that object's display verbs list … but it doesn't check that \"Buy\" was on the verbs list in the first place.</p>\n<p>I'd suggest changing:</p>\n<pre><code>      list remove (obj.generatedverbslist, \"Buy\")\n      list remove (obj.displayverbs, \"Buy\")\n      list remove (obj.inventoryverbs, \"Buy\")\n</code></pre>\n<p>(in <code>BuyObject</code> function)<br>\nto:</p>\n<pre><code>      foreach (verblist, Split(\"displayverbs;inventoryverbs;generatedverbslist\")) {\n        if (HasAttribute (obj, verblist)) {\n          verbs = GetAttribute (obj, verblist)\n          if (ListContains (verbs, \"Buy\")) {\n            list remove (verbs, \"Buy\")\n          }\n        }\n      }\n</code></pre>\n<p>That way it will work correctly even if you have \"automatically generate verbs\" turned off.</p>\n\n",
      "PostDate": "2018-07-28T21:17:30.7937802Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "abcd6444-898c-4acd-a546-6ce1552c1bba",
      "UserId": 232787,
      "Username": "RobBronson",
      "AvatarUrl": "https://graph.facebook.com/10206073401859041/picture?width=80&height=80",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So from what I have read here...the easiest fix would be to try and enable the \"automatically generate verbs\" function.\r\nTurning that on worked...as far as the fact that it says I bought it...yet 6 new errors follow with it.\r\n\r\nYou buy it for $2.\r\nError running script: Error evaluating expression 'GetAllChildObjects(game.pov)': Collection was modified; enumeration operation may not execute.\r\nError running script: Error evaluating expression 'ListCombine(ScopeReachableNotHeldForRoom(room), ScopeReachableInventory())': Value cannot be null.Parameter name: collection\r\nError running script: Unrecognised list type\r\nError running script: Error evaluating expression 'ListCombine(ScopeReachableNotHeldForRoom(room), ScopeVisibleNotReachableForRoom(room))': Value cannot be null.Parameter name: collection\r\nError running script: Cannot foreach over '' as it is not a list\r\nError running script: Error evaluating expression 'ListExclude(ScopeVisibleNotHeldNotScenery(), game.pov)': Object reference not set to an instance of an object.\r\n\r\nI will keep working on trying some of the things suggested.",
      "EditableFormat": "markdown",
      "HTML": "<p>So from what I have read here...the easiest fix would be to try and enable the \"automatically generate verbs\" function.<br>\nTurning that on worked...as far as the fact that it says I bought it...yet 6 new errors follow with it.</p>\n<p>You buy it for $2.<br>\nError running script: Error evaluating expression 'GetAllChildObjects(game.pov)': Collection was modified; enumeration operation may not execute.<br>\nError running script: Error evaluating expression 'ListCombine(ScopeReachableNotHeldForRoom(room), ScopeReachableInventory())': Value cannot be null.Parameter name: collection<br>\nError running script: Unrecognised list type<br>\nError running script: Error evaluating expression 'ListCombine(ScopeReachableNotHeldForRoom(room), ScopeVisibleNotReachableForRoom(room))': Value cannot be null.Parameter name: collection<br>\nError running script: Cannot foreach over '' as it is not a list<br>\nError running script: Error evaluating expression 'ListExclude(ScopeVisibleNotHeldNotScenery(), game.pov)': Object reference not set to an instance of an object.</p>\n<p>I will keep working on trying some of the things suggested.</p>\n\n",
      "PostDate": "2018-07-29T04:15:30.0903053Z",
      "LastEditDate": "2018-07-29T04:17:20.9450046Z",
      "link": null
    },
    {
      "PostId": "41903095-5909-47f2-b5bc-8ff0023276cd",
      "UserId": 232787,
      "Username": "RobBronson",
      "AvatarUrl": "https://graph.facebook.com/10206073401859041/picture?width=80&height=80",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So the BuyObject function is already set as...\r\n```\r\nif (obj.price > game.pov.money) {\r\n  msg (\"You can't afford that!\")\r\n}\r\nelse {\r\n  if (GetBoolean(obj, \"cloneme\")) {\r\n    obj = CloneObject(obj)\r\n  }\r\n  obj.take = true\r\n  obj.parent = game.pov\r\n  obj.buy = null\r\n  obj.listalias = obj.alias\r\n  list remove (obj.generatedverbslist, \"Buy\")\r\n  list remove (obj.displayverbs, \"Buy\")\r\n  list remove (obj.inventoryverbs, \"Buy\")\r\n  game.pov.money = game.pov.money - BuyingPrice(obj)\r\n  msg (\"You buy \" + obj.article + \" for \" + DisplayMoney(BuyingPrice(obj)) + \".\")\r\n}\r\n```\r\n\r\nSo you are saying I should replace that 3 line list remove section...with this code?\r\n```\r\n  foreach (verblist, Split(\"displayverbs;inventoryverbs;generatedverbslist\")) {\r\n        if (HasAttribute (obj, verblist)) {\r\n          verbs = GetAttribute (obj, verblist)\r\n          if (ListContains (verbs, \"Buy\")) {\r\n            list remove (verbs, \"Buy\")\r\n          }\r\n        }\r\n      }\r\n```\r\nDo you think that will stop all the new errors as well?\r\nI'll try it if you think it will.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>So the BuyObject function is already set as...</p>\n<pre><code>if (obj.price &gt; game.pov.money) {\n  msg (\"You can't afford that!\")\n}\nelse {\n  if (GetBoolean(obj, \"cloneme\")) {\n    obj = CloneObject(obj)\n  }\n  obj.take = true\n  obj.parent = game.pov\n  obj.buy = null\n  obj.listalias = obj.alias\n  list remove (obj.generatedverbslist, \"Buy\")\n  list remove (obj.displayverbs, \"Buy\")\n  list remove (obj.inventoryverbs, \"Buy\")\n  game.pov.money = game.pov.money - BuyingPrice(obj)\n  msg (\"You buy \" + obj.article + \" for \" + DisplayMoney(BuyingPrice(obj)) + \".\")\n}\n</code></pre>\n<p>So you are saying I should replace that 3 line list remove section...with this code?</p>\n<pre><code>  foreach (verblist, Split(\"displayverbs;inventoryverbs;generatedverbslist\")) {\n        if (HasAttribute (obj, verblist)) {\n          verbs = GetAttribute (obj, verblist)\n          if (ListContains (verbs, \"Buy\")) {\n            list remove (verbs, \"Buy\")\n          }\n        }\n      }\n</code></pre>\n<p>Do you think that will stop all the new errors as well?<br>\nI'll try it if you think it will.</p>\n\n",
      "PostDate": "2018-07-29T04:23:56.2642883Z",
      "LastEditDate": "2018-07-29T04:28:06.0789708Z",
      "link": null
    },
    {
      "PostId": "222784cb-b5c6-41a8-83d9-270456a7ff87",
      "UserId": 232787,
      "Username": "RobBronson",
      "AvatarUrl": "https://graph.facebook.com/10206073401859041/picture?width=80&height=80",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Holy Crap MrAngel...That actually worked perfectly! \r\nWas able to buy the items with no errors. \r\nThank you so much. :)\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Holy Crap MrAngel...That actually worked perfectly!<br>\nWas able to buy the items with no errors.<br>\nThank you so much. :)</p>\n\n",
      "PostDate": "2018-07-29T04:39:48.2802716Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "79444374-ed86-41c5-abca-c3b6878f2b89",
      "UserId": 232787,
      "Username": "RobBronson",
      "AvatarUrl": "https://graph.facebook.com/10206073401859041/picture?width=80&height=80",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I appreciate the help in fixing this problem...I have to wonder if there is a fix so that you might sell edibles and wearables?\r\nIf I add those items they never seem to work. Is there some special code for those types of objects?\r\n\r\nIf not...it is no big deal. I am just truly happy to have a shop working now :)\r\nTHANKS AGAIN !\r\n\r\n**Nevermind...this new code apparently fixes that too! I love it :)**\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I appreciate the help in fixing this problem...I have to wonder if there is a fix so that you might sell edibles and wearables?<br>\nIf I add those items they never seem to work. Is there some special code for those types of objects?</p>\n<p>If not...it is no big deal. I am just truly happy to have a shop working now :)<br>\nTHANKS AGAIN !</p>\n<p><strong>Nevermind...this new code apparently fixes that too! I love it :)</strong></p>\n\n",
      "PostDate": "2018-07-29T04:51:11.0590551Z",
      "LastEditDate": "2018-07-29T06:03:45.50142Z",
      "link": null
    }
  ]
}
