{
  "Topic": {
    "TopicId": "fxy6czuyhkwrzcyvqp0sja",
    "ForumId": "10",
    "Title": "Issue with a Crafting System",
    "LastUpdated": "2017-10-02T22:49:10.5244181Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "a9528fdb-50e2-4ec6-95d3-2fa7924d5f06",
      "UserId": 260969,
      "Username": "Enpherdaen",
      "AvatarUrl": "http://i.imgur.com/OSFSM1ab.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "In the game I am currently making, I am going to have a crafting system as it is a survival game. I plan on making it so the player types in \"craft (item)\" and if the player possesses the required items, it duplicates an unseen object and adds it into their inventory. As an object is made, the objects used to make it must be deleted. Problem is, there are likely going to be many of those objects in the game so I don't know how to tell quest which of the clones to delete. Ex: Stones + Sticks = Fire Pit, so the stones and sticks in the player's inventory must be deleted, but not the sticks and stones that are randomly generated in the room and other rooms.",
      "EditableFormat": "markdown",
      "HTML": "<p>In the game I am currently making, I am going to have a crafting system as it is a survival game. I plan on making it so the player types in \"craft (item)\" and if the player possesses the required items, it duplicates an unseen object and adds it into their inventory. As an object is made, the objects used to make it must be deleted. Problem is, there are likely going to be many of those objects in the game so I don't know how to tell quest which of the clones to delete. Ex: Stones + Sticks = Fire Pit, so the stones and sticks in the player's inventory must be deleted, but not the sticks and stones that are randomly generated in the room and other rooms.</p>\n\n",
      "PostDate": "2017-10-02T22:49:10.5244181Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b8872a41-3ae8-4c18-bf83-239f1613e8fd",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here, look at this. It's a stacking library.\r\nhttps://textadventures.co.uk/forum/samples/topic/3515/stackable-library\r\n\r\nIt's complicated, but you get the point.",
      "EditableFormat": "markdown",
      "HTML": "<p>Here, look at this. It's a stacking library.<br>\nhttps://textadventures.co.uk/forum/samples/topic/3515/stackable-library</p>\n<p>It's complicated, but you get the point.</p>\n\n",
      "PostDate": "2017-10-02T23:12:03.5577737Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "052468a3-fce8-43eb-aa0e-1480f7ce0b29",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here is another stacking library:\r\nhttps://github.com/ThePix/quest/wiki/StackLib",
      "EditableFormat": "markdown",
      "HTML": "<p>Here is another stacking library:<br>\nhttps://github.com/ThePix/quest/wiki/StackLib</p>\n\n",
      "PostDate": "2017-10-03T07:00:52.2053623Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8049af5b-2f45-4894-87e4-3ff90219bd20",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The easiest way is probably to have an attribute which is a reference to the unseen object it's a clone of. In the initialisation script for each of the unseen items, you'd have `this.prototype = this`. Then when you need to find how many fish the player is holding, you can do:\r\n`carried_fish = FilterByAttribute(GetAllChildObjects(player), \"prototype\", unseen_fish_object)`\r\nand use ListCount() to get the number, or delete items 0, 1, 2, etc for however many your recipe needs. I'm not sure what you'd be crafting from a fish, but it's just an example.\r\n\r\nIn this case, you'd probably want to define a couple of functions\r\n```\r\n<function name=\"GetNumberCarried\" parameters=\"object\">\r\n  carried = FilterByAttribute(ScopeReachableInventory(), \"prototype\", object)\r\n  return ListCount(carried)\r\n</function>\r\n\r\n<function name=\"ConsumeIngredient\" parameters=\"object, number\">\r\n  carried = FilterByAttribute(ScopeReachableInventory(), \"prototype\", object)\r\n  if (ListCount(carried) < number) {\r\n    error (\"You don't have \"+number+\" of \"+GetDisplayAlias(object))\r\n  }\r\n  for (i, 1, number) {\r\n    to_destroy = ListItem(carried, 0)\r\n    list remove (carried, to_destroy)\r\n    destroy (to_destroy.name)\r\n  }\r\n</function>\r\n```\r\nSo for your campfire example, you could have something like…\r\n```\r\ncase (campfire) {\r\n  sticks = GetNumberCarried(stick)\r\n  stones = GetNumberCarried(stone)\r\n  if (sticks > 4) {\r\n    sticks = \"enough\"\r\n  }\r\n  else {\r\n    sticks = sticks + \"/4\"\r\n  }\r\n  if (stones > 4) {\r\n    stones = \"enough\"\r\n  }\r\n  else {\r\n    stones = stones + \"/2\"\r\n  }\r\n  if (sticks+stones = \"enoughenough\") {\r\n    ConsumeIngredient (stick, 4)\r\n    ConsumeIngredient (stone, 2)\r\n    CloneObjectAndMoveHere (campfire)\r\n  }\r\n  else {\r\n    msg (\"You don't have enough sticks and stones. You have \"+sticks+\" sticks and \"+stones+\" stones.\")\r\n  }\r\n}\r\n```\r\n\r\n**Or**, if you're likely to be carrying more than one of the same item, you could follow the advice above and use a stacking library; which means one inventory slot can hold multiples of the same item, and also (I assume) provides an easy way to find out if you're carrying a certain object.\r\n\r\nThe way I'm building my stacking library (I didn't like any of the existing ones), the objects all start in the player's inventory, but invisible. That way you can easily use the initial object name in the code to refer to the one(s) the player is carrying. (the object has a 'drop' script that clones it if there isn't already one in the destination room then adjusts the \"count\" attributes of both; a 'take' script that adjusts the inventory limit; and a 'changedcount' script that sets it to invisible if the number is zero, and changes the alias to be singular or plural otherwise)",
      "EditableFormat": "markdown",
      "HTML": "<p>The easiest way is probably to have an attribute which is a reference to the unseen object it's a clone of. In the initialisation script for each of the unseen items, you'd have <code>this.prototype = this</code>. Then when you need to find how many fish the player is holding, you can do:<br>\n<code>carried_fish = FilterByAttribute(GetAllChildObjects(player), \"prototype\", unseen_fish_object)</code><br>\nand use ListCount() to get the number, or delete items 0, 1, 2, etc for however many your recipe needs. I'm not sure what you'd be crafting from a fish, but it's just an example.</p>\n<p>In this case, you'd probably want to define a couple of functions</p>\n<pre><code>&lt;function name=\"GetNumberCarried\" parameters=\"object\"&gt;\n  carried = FilterByAttribute(ScopeReachableInventory(), \"prototype\", object)\n  return ListCount(carried)\n&lt;/function&gt;\n\n&lt;function name=\"ConsumeIngredient\" parameters=\"object, number\"&gt;\n  carried = FilterByAttribute(ScopeReachableInventory(), \"prototype\", object)\n  if (ListCount(carried) &lt; number) {\n    error (\"You don't have \"+number+\" of \"+GetDisplayAlias(object))\n  }\n  for (i, 1, number) {\n    to_destroy = ListItem(carried, 0)\n    list remove (carried, to_destroy)\n    destroy (to_destroy.name)\n  }\n&lt;/function&gt;\n</code></pre>\n<p>So for your campfire example, you could have something like…</p>\n<pre><code>case (campfire) {\n  sticks = GetNumberCarried(stick)\n  stones = GetNumberCarried(stone)\n  if (sticks &gt; 4) {\n    sticks = \"enough\"\n  }\n  else {\n    sticks = sticks + \"/4\"\n  }\n  if (stones &gt; 4) {\n    stones = \"enough\"\n  }\n  else {\n    stones = stones + \"/2\"\n  }\n  if (sticks+stones = \"enoughenough\") {\n    ConsumeIngredient (stick, 4)\n    ConsumeIngredient (stone, 2)\n    CloneObjectAndMoveHere (campfire)\n  }\n  else {\n    msg (\"You don't have enough sticks and stones. You have \"+sticks+\" sticks and \"+stones+\" stones.\")\n  }\n}\n</code></pre>\n<p><strong>Or</strong>, if you're likely to be carrying more than one of the same item, you could follow the advice above and use a stacking library; which means one inventory slot can hold multiples of the same item, and also (I assume) provides an easy way to find out if you're carrying a certain object.</p>\n<p>The way I'm building my stacking library (I didn't like any of the existing ones), the objects all start in the player's inventory, but invisible. That way you can easily use the initial object name in the code to refer to the one(s) the player is carrying. (the object has a 'drop' script that clones it if there isn't already one in the destination room then adjusts the \"count\" attributes of both; a 'take' script that adjusts the inventory limit; and a 'changedcount' script that sets it to invisible if the number is zero, and changes the alias to be singular or plural otherwise)</p>\n\n",
      "PostDate": "2017-10-03T08:56:47.9046412Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "553f9643-d574-4df1-8ab8-2fe887406db0",
      "UserId": 260969,
      "Username": "Enpherdaen",
      "AvatarUrl": "http://i.imgur.com/OSFSM1ab.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Umm... That seems pretty advanced for me but so did time and I got that done in 2 days.",
      "EditableFormat": "markdown",
      "HTML": "<p>Umm... That seems pretty advanced for me but so did time and I got that done in 2 days.</p>\n\n",
      "PostDate": "2017-10-03T12:38:08.015861Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1f2162fd-4c29-462d-ba42-7659ac54c59a",
      "UserId": 26011,
      "Username": "onimike",
      "AvatarUrl": "http://i.imgur.com/yL1GRWab.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello I started a survival series never finished but the easiest way to deal with clones and stacking I show in this video.\r\nhttps://www.youtube.com/watch?v=HD1Gj88KeQE&t=39s",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello I started a survival series never finished but the easiest way to deal with clones and stacking I show in this video.<br>\nhttps://www.youtube.com/watch?v=HD1Gj88KeQE&amp;t=39s</p>\n\n",
      "PostDate": "2017-10-03T15:13:54.4100276Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1d490898-f3ed-4954-8762-1011de56a837",
      "UserId": 260969,
      "Username": "Enpherdaen",
      "AvatarUrl": "http://i.imgur.com/OSFSM1ab.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks Onimike.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks Onimike.</p>\n\n",
      "PostDate": "2017-10-03T15:26:45.7072545Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "104ce2ab-a666-4b45-a826-a554878cac70",
      "UserId": 325922,
      "Username": "Quest Forum Questers",
      "AvatarUrl": "https://secure.gravatar.com/avatar/b2bcc96793832ed661ec1b1eaac4602a?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Wow, onimike!\r\n\r\nYou should make a thread directing everyone to your videos!\r\n\r\nWell played, sir!",
      "EditableFormat": "markdown",
      "HTML": "<p>Wow, onimike!</p>\n<p>You should make a thread directing everyone to your videos!</p>\n<p>Well played, sir!</p>\n\n",
      "PostDate": "2017-10-03T15:42:30.6839565Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "468ea9a0-7f43-43d7-92da-5b9cc0960662",
      "UserId": 26011,
      "Username": "onimike",
      "AvatarUrl": "http://i.imgur.com/yL1GRWab.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "No problem Enpherdaen also in that series the first part I make a randomized room spawner https://www.youtube.com/watch?v=BUGNbe2--Yk to help with your other post. And Quest Forum Questers I posted it in forums quite some time ago it never got pinned so I didn't worry, thats why I come back and just direct people because I know most use the GUI editor like myself. I might pick the my videos back up seeing as alot of views have gone up so it seems alot more people are into quest now and I have my second screen back.",
      "EditableFormat": "markdown",
      "HTML": "<p>No problem Enpherdaen also in that series the first part I make a randomized room spawner https://www.youtube.com/watch?v=BUGNbe2--Yk to help with your other post. And Quest Forum Questers I posted it in forums quite some time ago it never got pinned so I didn't worry, thats why I come back and just direct people because I know most use the GUI editor like myself. I might pick the my videos back up seeing as alot of views have gone up so it seems alot more people are into quest now and I have my second screen back.</p>\n\n",
      "PostDate": "2017-10-03T22:33:50.7778592Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7245f0b1-2d33-49c6-bb13-1cde94142fa2",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I also often reference/mention that 'onimike' has vids, though in past didn't have the link on hand, and now usually too lazy (or I forget that I have the link or where I have the link stored, lol) to get the link at hand and post it... lol",
      "EditableFormat": "markdown",
      "HTML": "<p>I also often reference/mention that 'onimike' has vids, though in past didn't have the link on hand, and now usually too lazy (or I forget that I have the link or where I have the link stored, lol) to get the link at hand and post it... lol</p>\n\n",
      "PostDate": "2017-10-04T02:49:13.9457634Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "71ae3a2f-0e2a-4f43-af91-25bf596c3d43",
      "UserId": 260969,
      "Username": "Enpherdaen",
      "AvatarUrl": "http://i.imgur.com/OSFSM1ab.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Onimike is there a part 2?",
      "EditableFormat": "markdown",
      "HTML": "<p>Onimike is there a part 2?</p>\n\n",
      "PostDate": "2017-10-04T03:13:47.6836515Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f144df60-7c5f-44d6-aa03-b4d6342561ac",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "https://www.youtube.com/channel/UCGSCL0CED0oIG8J1mKyDoMw/videos",
      "EditableFormat": "markdown",
      "HTML": "<p>https://www.youtube.com/channel/UCGSCL0CED0oIG8J1mKyDoMw/videos</p>\n\n",
      "PostDate": "2017-10-04T03:23:36.0350842Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c2e79f1c-eeb5-4a18-8b4c-37c05025fccd",
      "UserId": 26011,
      "Username": "onimike",
      "AvatarUrl": "http://i.imgur.com/yL1GRWab.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Enpherdaen it is 6 parts in total i show how to make item spawner, then stack objects and using object types, then chop down tree, then the final 3 parts i show how to do day night cycle and campfire. Here is full playlist https://www.youtube.com/playlist?list=PLVDq5KtDCqnYLM7jcdkdGBFGidzgqIYWW sorry their not in order will fix later but they are numbered.",
      "EditableFormat": "markdown",
      "HTML": "<p>Enpherdaen it is 6 parts in total i show how to make item spawner, then stack objects and using object types, then chop down tree, then the final 3 parts i show how to do day night cycle and campfire. Here is full playlist https://www.youtube.com/playlist?list=PLVDq5KtDCqnYLM7jcdkdGBFGidzgqIYWW sorry their not in order will fix later but they are numbered.</p>\n\n",
      "PostDate": "2017-10-04T12:44:43.0646284Z",
      "LastEditDate": "2017-10-04T12:55:52.0741842Z",
      "link": null
    }
  ]
}
