{
  "Topic": {
    "TopicId": "aas-sygmeki3rtjro4zduq",
    "ForumId": "10",
    "Title": "Quest Bug: Mouse Click on Menu Choice, then Sound Plays, but No Update (TA offline editor)",
    "LastUpdated": "2017-09-29T09:14:02.855182Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "47a3c11c-8891-44a4-a825-524ddf9728cc",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The title is self-explanatory.  If you are presented with an inline menu (haven't tried popup menu) and then mouse-click on one of the choices, and then a sound effect is played, it works but nothing gets displayed or updated -- side panes, main text panel, command prompt, etc.  But after the NEXT turn, everything gets properly updated (so there is a 1-turn delay).  This glitch doesn't happen if you make a menu choice via keyboard, or if no sound is played afterwards.\r\n\r\nI think this is a Quest bug.  Anyone understand it or know of a workaround?  Thanks.",
      "EditableFormat": "markdown",
      "HTML": "<p>The title is self-explanatory.  If you are presented with an inline menu (haven't tried popup menu) and then mouse-click on one of the choices, and then a sound effect is played, it works but nothing gets displayed or updated -- side panes, main text panel, command prompt, etc.  But after the NEXT turn, everything gets properly updated (so there is a 1-turn delay).  This glitch doesn't happen if you make a menu choice via keyboard, or if no sound is played afterwards.</p>\n<p>I think this is a Quest bug.  Anyone understand it or know of a workaround?  Thanks.</p>\n\n",
      "PostDate": "2017-09-29T09:14:02.855182Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0ca43832-d1ef-48da-9cf6-0c834e557ec1",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It works for me.\r\n\r\nI just made an example game.\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"showmenu\">\r\n    <gameid>2a4ccea3-9e1d-4b90-9dfc-36d343d3a137</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <turns type=\"int\">0</turns>\r\n    <statusattributes type=\"stringdictionary\">\r\n      <item>\r\n        <key>turns</key>\r\n        <value></value>\r\n      </item>\r\n    </statusattributes>\r\n    <start type=\"script\">\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description><![CDATA[<center>{command:ShowMenu}</center>]]></description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"thing\">\r\n      <inherit name=\"editor_object\" />\r\n    </object>\r\n  </object>\r\n  <turnscript name=\"turns\">\r\n    <enabled />\r\n    <script>\r\n      game.turns = game.turns + 1\r\n    </script>\r\n  </turnscript>\r\n  <command>\r\n    <script>\r\n      menuShow\r\n    </script>\r\n    <pattern>menu;show menu;showmenu</pattern>\r\n  </command>\r\n  <function name=\"menuShow\">\r\n    ShowMenu (\"It's time for you to decide whether or not you move the thing.\", Split(\"move the thing;don't move the thing\", \";\"), false) {\r\n      switch (result) {\r\n        case (\"move the thing\") {\r\n          play sound (\"moved.mp3\", false, false)\r\n          if (thing.parent = game.pov) {\r\n            thing.parent = game.pov.parent\r\n          }\r\n          else {\r\n            thing.parent = game.pov\r\n          }\r\n        }\r\n        case (\"don't move the thing\") {\r\n          msg (\"Good choice.\")\r\n        }\r\n      }\r\n    }\r\n  </function>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n---\r\nhttp://textadventures.co.uk/games/view/kwigefjxfewauesn5gv3nq/showmenu",
      "EditableFormat": "markdown",
      "HTML": "<p>It works for me.</p>\n<p>I just made an example game.</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"showmenu\"&gt;\n    &lt;gameid&gt;2a4ccea3-9e1d-4b90-9dfc-36d343d3a137&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;turns type=\"int\"&gt;0&lt;/turns&gt;\n    &lt;statusattributes type=\"stringdictionary\"&gt;\n      &lt;item&gt;\n        &lt;key&gt;turns&lt;/key&gt;\n        &lt;value&gt;&lt;/value&gt;\n      &lt;/item&gt;\n    &lt;/statusattributes&gt;\n    &lt;start type=\"script\"&gt;\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;&lt;![CDATA[&lt;center&gt;{command:ShowMenu}&lt;/center&gt;]]&gt;&lt;/description&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"thing\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=\"turns\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      game.turns = game.turns + 1\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;command&gt;\n    &lt;script&gt;\n      menuShow\n    &lt;/script&gt;\n    &lt;pattern&gt;menu;show menu;showmenu&lt;/pattern&gt;\n  &lt;/command&gt;\n  &lt;function name=\"menuShow\"&gt;\n    ShowMenu (\"It's time for you to decide whether or not you move the thing.\", Split(\"move the thing;don't move the thing\", \";\"), false) {\n      switch (result) {\n        case (\"move the thing\") {\n          play sound (\"moved.mp3\", false, false)\n          if (thing.parent = game.pov) {\n            thing.parent = game.pov.parent\n          }\n          else {\n            thing.parent = game.pov\n          }\n        }\n        case (\"don't move the thing\") {\n          msg (\"Good choice.\")\n        }\n      }\n    }\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n<hr>\n<p>http://textadventures.co.uk/games/view/kwigefjxfewauesn5gv3nq/showmenu</p>\n\n",
      "PostDate": "2017-09-29T15:49:41.8040263Z",
      "LastEditDate": "2017-10-01T11:12:58.3338324Z",
      "link": null
    },
    {
      "PostId": "45c04c9e-0c65-4d8e-9d55-5d4c99817f00",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "### This just in:\r\n\r\nIf you set \"Wait for sound to finish playing...\" to ```yes```, then it happens.\r\n\r\n...or doesn't happen...\r\n\r\n...until you take the next turn.  Then the attributes/stats/panes are updated.\r\n\r\n---\r\nIf you call to wait for the sound to finish playing, isn't that a 'wait' within a 'wait'?\r\n\r\nNOTE: You can't stop the game until you've taken the next turn either.",
      "EditableFormat": "markdown",
      "HTML": "<h3>This just in:</h3>\n<p>If you set \"Wait for sound to finish playing...\" to <code>yes</code>, then it happens.</p>\n<p>...or doesn't happen...</p>\n<p>...until you take the next turn.  Then the attributes/stats/panes are updated.</p>\n<hr>\n<p>If you call to wait for the sound to finish playing, isn't that a 'wait' within a 'wait'?</p>\n<p>NOTE: You can't stop the game until you've taken the next turn either.</p>\n\n",
      "PostDate": "2017-09-29T15:55:32.3913669Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e42a6bf1-5344-4f9c-8c6d-1a9e49022b26",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yeah... It freezes the game.  You can't even STOP.\r\n\r\n---\r\n\r\nIt doesn't print any of the text in this next example until the next turn either:\r\n\r\n```\r\nShowMenu (\"It's time for you to decide whether or not you move the thing.\", Split(\"move the thing;don't move the thing\", \";\"), false) {\r\n  switch (result) {\r\n    case (\"move the thing\") {\r\n      play sound (\"moved.mp3\", true, false)\r\n      msg (\"You move it.\")\r\n      on ready {\r\n        msg (\"Thanks (msg)\")\r\n        JS.addText (\"THANKS (JS)\")\r\n      }\r\n      if (thing.parent = game.pov) {\r\n        thing.parent = game.pov.parent\r\n      }\r\n      else {\r\n        thing.parent = game.pov\r\n      }\r\n    }\r\n    case (\"don't move the thing\") {\r\n      msg (\"Good choice.\")\r\n    }\r\n  }\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Yeah... It freezes the game.  You can't even STOP.</p>\n<hr>\n<p>It doesn't print any of the text in this next example until the next turn either:</p>\n<pre><code>ShowMenu (\"It's time for you to decide whether or not you move the thing.\", Split(\"move the thing;don't move the thing\", \";\"), false) {\n  switch (result) {\n    case (\"move the thing\") {\n      play sound (\"moved.mp3\", true, false)\n      msg (\"You move it.\")\n      on ready {\n        msg (\"Thanks (msg)\")\n        JS.addText (\"THANKS (JS)\")\n      }\n      if (thing.parent = game.pov) {\n        thing.parent = game.pov.parent\n      }\n      else {\n        thing.parent = game.pov\n      }\n    }\n    case (\"don't move the thing\") {\n      msg (\"Good choice.\")\n    }\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2017-09-29T15:57:48.0910505Z",
      "LastEditDate": "2017-09-29T16:02:55.9211755Z",
      "link": null
    },
    {
      "PostId": "2d09d737-e31d-4b98-8e27-def4cc3fd723",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If I create a command that does the same thing (plays the sound with the Wait) outside of ShowMenu, it works correctly.\r\n\r\n\r\n<details><summary>Game code</summary>\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"showmenu\">\r\n    <gameid>2a4ccea3-9e1d-4b90-9dfc-36d343d3a137</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <turns type=\"int\">0</turns>\r\n    <statusattributes type=\"stringdictionary\">\r\n      <item>\r\n        <key>turns</key>\r\n        <value></value>\r\n      </item>\r\n    </statusattributes>\r\n    <start type=\"script\">\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description><![CDATA[<center>{command:ShowMenu}<br/><br/>{command:sound:Sound&MoveNoMenu}</center>]]></description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"thing\">\r\n      <inherit name=\"editor_object\" />\r\n    </object>\r\n  </object>\r\n  <turnscript name=\"turns\">\r\n    <enabled />\r\n    <script>\r\n      game.turns = game.turns + 1\r\n    </script>\r\n  </turnscript>\r\n  <command>\r\n    <script>\r\n      menuShow\r\n    </script>\r\n    <pattern>menu;show menu;showmenu</pattern>\r\n  </command>\r\n  <command>\r\n    <pattern>sound</pattern>\r\n    <script>\r\n      play sound (\"moved.mp3\", true, false)\r\n      msg (\"You move it.\")\r\n      on ready {\r\n        msg (\"Thanks (msg)\")\r\n        JS.addText (\"THANKS (JS)\")\r\n      }\r\n      if (thing.parent = game.pov) {\r\n        thing.parent = game.pov.parent\r\n      }\r\n      else {\r\n        thing.parent = game.pov\r\n      }\r\n    </script>\r\n  </command>\r\n  <function name=\"menuShow\">\r\n    ShowMenu (\"It's time for you to decide whether or not you move the thing.\", Split(\"move the thing;don't move the thing\", \";\"), false) {\r\n      switch (result) {\r\n        case (\"move the thing\") {\r\n          play sound (\"moved.mp3\", true, false)\r\n          msg (\"You move it.\")\r\n          on ready {\r\n            msg (\"Thanks (msg)\")\r\n            JS.addText (\"THANKS (JS)\")\r\n          }\r\n          if (thing.parent = game.pov) {\r\n            thing.parent = game.pov.parent\r\n          }\r\n          else {\r\n            thing.parent = game.pov\r\n          }\r\n        }\r\n        case (\"don't move the thing\") {\r\n          msg (\"Good choice.\")\r\n        }\r\n      }\r\n    }\r\n  </function>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n---\r\nNOTE: It freezes the online player when you select the option that plays the sound, as soon as you click it.",
      "EditableFormat": "markdown",
      "HTML": "<p>If I create a command that does the same thing (plays the sound with the Wait) outside of ShowMenu, it works correctly.</p>\n<details><summary>Game code</summary>\n```\n\n\n```\n</details>\n<hr>\n<p>NOTE: It freezes the online player when you select the option that plays the sound, as soon as you click it.</p>\n\n",
      "PostDate": "2017-09-29T16:07:18.3816248Z",
      "LastEditDate": "2017-09-29T16:20:52.0092845Z",
      "link": null
    },
    {
      "PostId": "bdea09b4-f389-4936-9420-1d125daf3dd1",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks for the confirmation KV!\r\n\r\nSo I guess \"wait within a wait\" never works.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks for the confirmation KV!</p>\n<p>So I guess \"wait within a wait\" never works.</p>\n\n",
      "PostDate": "2017-09-29T17:51:36.589156Z",
      "LastEditDate": "2017-09-29T21:29:34.3767414Z",
      "link": null
    },
    {
      "PostId": "f95c878c-f2a5-402d-bb87-6a5a1485a2af",
      "UserId": 324837,
      "Username": "The Quest Forum Monster",
      "AvatarUrl": "https://secure.gravatar.com/avatar/c9c61c36f3a55aaf13135baf873e40e6?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "<s>Monster sorry, but see no bug...\r\n\r\nMonster see block in block!\r\n\r\nhttp://docs.textadventures.co.uk/quest/blocks_and_scripts.html</s>\r\n\r\nMonster see bug now!  (Monster distracted...)",
      "EditableFormat": "markdown",
      "HTML": "<p><s>Monster sorry, but see no bug...</s></p><s>\n<p>Monster see block in block!</p>\n</s><p><s>http://docs.textadventures.co.uk/quest/blocks_and_scripts.html</s></p>\n<p>Monster see bug now!  (Monster distracted...)</p>\n\n",
      "PostDate": "2017-09-30T00:09:24.7886469Z",
      "LastEditDate": "2017-10-02T06:46:14.349011Z",
      "link": null
    },
    {
      "PostId": "822223a7-5f7f-43a7-a7d9-59fe488f0e6d",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Great.  Now that my game is so big, it's impractical to find every spot with a potential for conflict (menu/play sound/timer clash) and put \"on ready\" in there somewhere.  Ho hum.",
      "EditableFormat": "markdown",
      "HTML": "<p>Great.  Now that my game is so big, it's impractical to find every spot with a potential for conflict (menu/play sound/timer clash) and put \"on ready\" in there somewhere.  Ho hum.</p>\n\n",
      "PostDate": "2017-09-30T08:24:40.0651385Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "921f906c-4b99-486b-b01c-ec2f06e71988",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Actually, this is a bug because this works when you type in a menu choice, but not when you mouse-click it.",
      "EditableFormat": "markdown",
      "HTML": "<p>Actually, this is a bug because this works when you type in a menu choice, but not when you mouse-click it.</p>\n\n",
      "PostDate": "2017-09-30T08:46:53.8884Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6d2092f6-36f5-416d-8ea1-93f7db35fabc",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "on ready won't fix it.  ...or it didn't in my case.  I was just testing with it. Nothing after the sound happened until the next turn using ShowMenu when the sound waited to finish playing.\r\n\r\nThe msg doesn't even print until the next turn:\r\n\r\n```\r\nplay sound (\"moved.mp3\", true, false)\r\nmsg (\"You move it.\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>on ready won't fix it.  ...or it didn't in my case.  I was just testing with it. Nothing after the sound happened until the next turn using ShowMenu when the sound waited to finish playing.</p>\n<p>The msg doesn't even print until the next turn:</p>\n<pre><code>play sound (\"moved.mp3\", true, false)\nmsg (\"You move it.\")\n</code></pre>\n\n",
      "PostDate": "2017-09-30T16:45:51.5235596Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d32ad741-123c-4875-910e-be62b55af74d",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You can use ```show menu``` rather than ```ShowMenu```.\r\n\r\nIt's a popup/alert, but it works.\r\n\r\n<details><summary>View the game code</summary>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"showmenu\">\r\n    <gameid>2a4ccea3-9e1d-4b90-9dfc-36d343d3a137</gameid>\r\n    <version>1.1</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <turns type=\"int\">0</turns>\r\n    <statusattributes type=\"stringdictionary\">\r\n      <item>\r\n        <key>turns</key>\r\n        <value></value>\r\n      </item>\r\n    </statusattributes>\r\n    <start type=\"script\">\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description><![CDATA[<center>{command:FakeShowMenu}</center>]]></description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"thing\">\r\n      <inherit name=\"editor_object\" />\r\n    </object>\r\n  </object>\r\n  <command>\r\n    <pattern>menu;show menu;showmenu;FakeShowMenu</pattern>\r\n    <script>\r\n      menuShow\r\n      game.notarealturn = true\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>move the thing</pattern>\r\n    <script>\r\n      msg (\"Playing mp3 audio...\")\r\n      play sound (\"moved.mp3\", true, false)\r\n      msg (\"You move it.\")\r\n      on ready {\r\n        msg (\"Thanks (msg)\")\r\n        JS.addText (\"THANKS (JS)\")\r\n      }\r\n      if (thing.parent = game.pov) {\r\n        thing.parent = game.pov.parent\r\n      }\r\n      else {\r\n        thing.parent = game.pov\r\n      }\r\n      request (Show, \"Command\")\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>don't move the thing</pattern>\r\n    <script>\r\n      msg (\"Good call!\")\r\n    </script>\r\n  </command>\r\n  <turnscript>\r\n    <enabled />\r\n    <script>\r\n      game.turns = game.turns + 1\r\n    </script>\r\n  </turnscript>\r\n  <function name=\"menuShow\">\r\n    show menu (\"It's time for you to decide whether or not you move the thing.\", Split(\"move the thing;don't move the thing\", \";\"), true) {\r\n      HandleSingleCommand (\"move the thing\")\r\n    }\r\n  </function>\r\n</asl>\r\n```\r\n\r\n---\r\nI had to add the ```request (Show, \"Command\")``` because the text input field disappeared after making the selection for some reason when playing online.\r\n\r\n</details>\r\n\r\n---\r\n\r\nCheck it out:\r\n\r\nhttp://textadventures.co.uk/games/view/kwigefjxfewauesn5gv3nq/showmenu",
      "EditableFormat": "markdown",
      "HTML": "<p>You can use <code>show menu</code> rather than <code>ShowMenu</code>.</p>\n<p>It's a popup/alert, but it works.</p>\n<details><summary>View the game code</summary>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"showmenu\"&gt;\n    &lt;gameid&gt;2a4ccea3-9e1d-4b90-9dfc-36d343d3a137&lt;/gameid&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;turns type=\"int\"&gt;0&lt;/turns&gt;\n    &lt;statusattributes type=\"stringdictionary\"&gt;\n      &lt;item&gt;\n        &lt;key&gt;turns&lt;/key&gt;\n        &lt;value&gt;&lt;/value&gt;\n      &lt;/item&gt;\n    &lt;/statusattributes&gt;\n    &lt;start type=\"script\"&gt;\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;&lt;![CDATA[&lt;center&gt;{command:FakeShowMenu}&lt;/center&gt;]]&gt;&lt;/description&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"thing\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;menu;show menu;showmenu;FakeShowMenu&lt;/pattern&gt;\n    &lt;script&gt;\n      menuShow\n      game.notarealturn = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;move the thing&lt;/pattern&gt;\n    &lt;script&gt;\n      msg (\"Playing mp3 audio...\")\n      play sound (\"moved.mp3\", true, false)\n      msg (\"You move it.\")\n      on ready {\n        msg (\"Thanks (msg)\")\n        JS.addText (\"THANKS (JS)\")\n      }\n      if (thing.parent = game.pov) {\n        thing.parent = game.pov.parent\n      }\n      else {\n        thing.parent = game.pov\n      }\n      request (Show, \"Command\")\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;don't move the thing&lt;/pattern&gt;\n    &lt;script&gt;\n      msg (\"Good call!\")\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;turnscript&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      game.turns = game.turns + 1\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;function name=\"menuShow\"&gt;\n    show menu (\"It's time for you to decide whether or not you move the thing.\", Split(\"move the thing;don't move the thing\", \";\"), true) {\n      HandleSingleCommand (\"move the thing\")\n    }\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>I had to add the <code>request (Show, \"Command\")</code> because the text input field disappeared after making the selection for some reason when playing online.</p>\n</details>\n<hr>\n<p>Check it out:</p>\n<p>http://textadventures.co.uk/games/view/kwigefjxfewauesn5gv3nq/showmenu</p>\n\n",
      "PostDate": "2017-10-01T11:11:41.9305943Z",
      "LastEditDate": "2017-10-01T11:12:16.6233808Z",
      "link": null
    },
    {
      "PostId": "5bb0153f-0c92-4bd6-90c6-2ff42cab2742",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks KV",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks KV</p>\n\n",
      "PostDate": "2017-10-02T05:37:13.6859936Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b8f26948-50cc-4038-9da5-049ba72acea8",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "No problem.  Any chance I get to make Quest bend to someone's will, I'm at the ready.  (\"Error running script\" my foot!  We're roundin' up the posse!)\r\n\r\n---\r\nThe alert seemed weird to me at first, but, if it's for the player to select whether or not audio is on during play, I think it's quite fitting.",
      "EditableFormat": "markdown",
      "HTML": "<p>No problem.  Any chance I get to make Quest bend to someone's will, I'm at the ready.  (\"Error running script\" my foot!  We're roundin' up the posse!)</p>\n<hr>\n<p>The alert seemed weird to me at first, but, if it's for the player to select whether or not audio is on during play, I think it's quite fitting.</p>\n\n",
      "PostDate": "2017-10-02T06:16:34.1716668Z",
      "LastEditDate": "2017-10-02T06:17:58.9043528Z",
      "link": null
    },
    {
      "PostId": "639d81d0-3055-4173-a358-7b53358ac054",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">Actually, this is a bug because this works when you type in a menu choice, but not when you mouse-click it.\r\n\r\nYep.\r\n\r\n...and you can't even stop the game until you make another move.\r\n\r\n...just like an infinite loop.\r\n\r\n---\r\nThis debunks my 'wait within a wait' theory.\r\n\r\nIt only does it on the mouse click when set up the regular ```ShowMenu``` way.  I got carried away and forgot what the experiment truly was.  I was after results instead of ...help me out here... methodology?",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Actually, this is a bug because this works when you type in a menu choice, but not when you mouse-click it.</p>\n</blockquote>\n<p>Yep.</p>\n<p>...and you can't even stop the game until you make another move.</p>\n<p>...just like an infinite loop.</p>\n<hr>\n<p>This debunks my 'wait within a wait' theory.</p>\n<p>It only does it on the mouse click when set up the regular <code>ShowMenu</code> way.  I got carried away and forgot what the experiment truly was.  I was after results instead of ...help me out here... methodology?</p>\n\n",
      "PostDate": "2017-10-02T06:28:47.1232862Z",
      "LastEditDate": "2017-10-02T06:33:41.4830914Z",
      "link": null
    },
    {
      "PostId": "e97a7a5c-9133-48f1-9c0f-2de09b9a7073",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Maybe it's a combination of the 'wait within wait' issue and the mouse-clicking.  Somehow, the mouse-clicking adds another wrinkle, or another 'wait'.",
      "EditableFormat": "markdown",
      "HTML": "<p>Maybe it's a combination of the 'wait within wait' issue and the mouse-clicking.  Somehow, the mouse-clicking adds another wrinkle, or another 'wait'.</p>\n\n",
      "PostDate": "2017-10-02T06:45:32.218999Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9131b534-f0fc-47f2-8dbb-f17727e97cdf",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I don't know...\r\n\r\nThis is all I could dig up....\r\n\r\n<details>\r\n\r\n### **ShowMenu**\r\n\r\n***Parameters:***\r\n\r\n```caption```  \r\n```options```\r\n ```allowCancel```\r\n ```callback```\r\n\r\n```\r\noutputsection = StartNewOutputSection()\r\nmsg (caption)\r\ncount = 0\r\ngame.menuoptionskeys = NewStringList()\r\nforeach (option, options) {\r\n  count = count + 1\r\n  if (TypeOf(options) = \"stringdictionary\") {\r\n    optionText = StringDictionaryItem(options, option)\r\n    optiontag = option\r\n    style = GetCurrentLinkTextFormat()\r\n    list add (game.menuoptionskeys, option)\r\n  }\r\n  else if (TypeOf(option) = \"string\") {\r\n    optionText = option\r\n    optiontag = option\r\n    style = GetCurrentLinkTextFormat()\r\n    list add (game.menuoptionskeys, option)\r\n  }\r\n  else if (TypeOf(option) = \"object\") {\r\n    optionText = GetDisplayAlias(option)\r\n    optiontag = option.name\r\n    colour = \"\"\r\n    if (HasString(option, \"linkcolour\") and GetUIOption(\"UseGameColours\") = \"true\") {\r\n      colour = option.linkcolour\r\n    }\r\n    else {\r\n      colour = GetLinkTextColour()\r\n    }\r\n    style = GetCurrentTextFormat(colour)\r\n    list add (game.menuoptionskeys, option.name)\r\n  }\r\n  else {\r\n    error (\"ShowMenu cannot handle a \" + TypeOf(option))\r\n  }\r\n  msg (count + \": <a class=\\\"cmdlink\\\" style=\\\"\" + style + \"\\\" onclick=\\\"ASLEvent('ShowMenuResponse','\" + EscapeQuotes(optiontag) + \"')\\\">\" + optionText + \"</a>\")\r\n}\r\nEndOutputSection (outputsection)\r\ngame.menuoptions = options\r\ngame.menuallowcancel = allowCancel\r\ngame.menucallback = callback\r\ngame.menuoutputsection = outputsection\r\n```\r\n\r\n---\r\n```msg (count + \": <a class=\\\"cmdlink\\\" style=\\\"\" + style + \"\\\" onclick=\\\"ASLEvent('ShowMenuResponse','\" + EscapeQuotes(optiontag) + \"')\\\">\" + optionText + \"</a>\")```\r\n\r\n---\r\n**``` onclick=\\\"ASLEvent('ShowMenuResponse','\" + EscapeQuotes(optiontag) + \"')\\\"```**\r\n\r\n---\r\n\r\n### **ShowMenuResponse (when you click)**\r\n\r\n***Parameter:*** ```option```\r\n\r\n```\r\nif (game.menucallback = null) {\r\n  error (\"Unexpected menu response\")\r\n}\r\nelse {\r\n  parameters = NewStringDictionary()\r\n  dictionary add (parameters, \"result\", UnescapeQuotes(option))\r\n  script = game.menucallback\r\n  ClearMenu\r\n  invoke (script, parameters)\r\n}\r\n```\r\n\r\n\r\n---\r\n### **HandleMenuTextResponse (when you enter a command)**\r\n***Return type:*** **Boolean**\r\n***Parameter:*** ```input```\r\n\r\n```\r\nhandled = false\r\nif (IsInt(input)) {\r\n  number = ToInt(input)\r\n  if (number > 0 and number <= ListCount(game.menuoptionskeys)) {\r\n    handled = true\r\n    ShowMenuResponse (StringListItem(game.menuoptionskeys, number - 1))\r\n  }\r\n}\r\nreturn (handled)\r\n```\r\n\r\n---\r\n<div style=\"padding:10px;margin:10px;background:black;color:green\">\r\n\r\n<samp>\r\n\r\ngrep -r HandleMenuTextResponse *\r\n\r\nCore/CoreFunctions.aslx:  \\<function name=\"HandleMenuTextResponse\" parameters=\"input\" type=\"boolean\">\r\nCore/CoreParser.aslx:      if (HandleMenuTextResponse(command)) {\r\n\r\n</samp>\r\n\r\n</div>\r\n\r\n---\r\n### **HandleCommand**\r\n\r\n```\r\n  <function name=\"HandleCommand\" parameters=\"command, metadata\">\r\n    <![CDATA[\r\n    handled = false\r\n    if (game.menucallback <> null) {\r\n      if (HandleMenuTextResponse(command)) {\r\n        handled = true\r\n      }\r\n      else {\r\n        if (game.menuallowcancel) {\r\n          ClearMenu\r\n        }\r\n        else {\r\n          handled = true\r\n        }\r\n      }\r\n    }\r\n    if (not handled) {\r\n      StartTurnOutputSection\r\n      if (StartsWith (command, \"*\")) {\r\n        msg (\"\")\r\n        msg (SafeXML (command))\r\n      }\r\n      else {    \r\n        shownlink = false\r\n        if (game.echocommand) {\r\n          if (metadata <> null and game.enablehyperlinks and game.echohyperlinks) {\r\n            foreach (key, metadata) {\r\n              if (EndsWith(command, key)) {\r\n                objectname = StringDictionaryItem(metadata, key)\r\n                object = GetObject(objectname)\r\n                if (object <> null) {\r\n                  msg (\"\")\r\n                  msg (\"&gt; \" + Left(command, LengthOf(command) - LengthOf(key)) + \"{object:\" + object.name + \"}\" )\r\n                  shownlink = true\r\n                }\r\n              }\r\n            }\r\n          }\r\n          if (not shownlink) {\r\n            msg (\"\")\r\n            OutputTextRaw (\"&gt; \" + SafeXML(command))\r\n          }\r\n        }\r\n        if (game.command_newline) {\r\n          msg (\"\")\r\n        }\r\n        game.pov.commandmetadata = metadata\r\n        if (game.multiplecommands){\t\t\r\n          commands = Split(command, \".\")\r\n          if (ListCount(commands) = 1) {\r\n            game.pov.commandqueue = null\r\n            HandleSingleCommand (Trim(command))\r\n          }\r\n          else {\r\n            game.pov.commandqueue = commands\r\n            HandleNextCommandQueueItem\r\n          }\r\n\t\t}\r\n        else {\r\n          game.pov.commandqueue = null\r\n          HandleSingleCommand (Trim(command))\t\r\n        }\t\t\r\n      }\r\n    }\r\n    ]]>\r\n  </function>\r\n\r\n```\r\n\r\n---\r\n```\r\nif (HandleMenuTextResponse(command)) {\r\n  handled = true\r\n}\r\n```\r\n\r\n</details>\r\n\r\n---\r\nMaybe **ShowMenuResponse**  needs to return the Boolean, and **HandleCommand** needs to check **ShowMenuResponse** along with **HandleMenuTextResponse**?\r\n\r\nI have no idea how that would work though.",
      "EditableFormat": "markdown",
      "HTML": "<p>I don't know...</p>\n<p>This is all I could dig up....</p>\n<details>\n<h3><strong>ShowMenu</strong></h3>\n<p><strong><em>Parameters:</em></strong></p>\n<p><code>caption</code><br>\n<code>options</code><br>\n<code>allowCancel</code><br>\n<code>callback</code></p>\n<pre><code>outputsection = StartNewOutputSection()\nmsg (caption)\ncount = 0\ngame.menuoptionskeys = NewStringList()\nforeach (option, options) {\n  count = count + 1\n  if (TypeOf(options) = \"stringdictionary\") {\n    optionText = StringDictionaryItem(options, option)\n    optiontag = option\n    style = GetCurrentLinkTextFormat()\n    list add (game.menuoptionskeys, option)\n  }\n  else if (TypeOf(option) = \"string\") {\n    optionText = option\n    optiontag = option\n    style = GetCurrentLinkTextFormat()\n    list add (game.menuoptionskeys, option)\n  }\n  else if (TypeOf(option) = \"object\") {\n    optionText = GetDisplayAlias(option)\n    optiontag = option.name\n    colour = \"\"\n    if (HasString(option, \"linkcolour\") and GetUIOption(\"UseGameColours\") = \"true\") {\n      colour = option.linkcolour\n    }\n    else {\n      colour = GetLinkTextColour()\n    }\n    style = GetCurrentTextFormat(colour)\n    list add (game.menuoptionskeys, option.name)\n  }\n  else {\n    error (\"ShowMenu cannot handle a \" + TypeOf(option))\n  }\n  msg (count + \": &lt;a class=\\\"cmdlink\\\" style=\\\"\" + style + \"\\\" onclick=\\\"ASLEvent('ShowMenuResponse','\" + EscapeQuotes(optiontag) + \"')\\\"&gt;\" + optionText + \"&lt;/a&gt;\")\n}\nEndOutputSection (outputsection)\ngame.menuoptions = options\ngame.menuallowcancel = allowCancel\ngame.menucallback = callback\ngame.menuoutputsection = outputsection\n</code></pre>\n<hr>\n<p><code>msg (count + \": &lt;a class=\\\"cmdlink\\\" style=\\\"\" + style + \"\\\" onclick=\\\"ASLEvent('ShowMenuResponse','\" + EscapeQuotes(optiontag) + \"')\\\"&gt;\" + optionText + \"&lt;/a&gt;\")</code></p>\n<hr>\n<p><strong><code>onclick=\\\"ASLEvent('ShowMenuResponse','\" + EscapeQuotes(optiontag) + \"')\\\"</code></strong></p>\n<hr>\n<h3><strong>ShowMenuResponse (when you click)</strong></h3>\n<p><strong><em>Parameter:</em></strong> <code>option</code></p>\n<pre><code>if (game.menucallback = null) {\n  error (\"Unexpected menu response\")\n}\nelse {\n  parameters = NewStringDictionary()\n  dictionary add (parameters, \"result\", UnescapeQuotes(option))\n  script = game.menucallback\n  ClearMenu\n  invoke (script, parameters)\n}\n</code></pre>\n<hr>\n<h3><strong>HandleMenuTextResponse (when you enter a command)</strong></h3>\n<p><strong><em>Return type:</em></strong> <strong>Boolean</strong><br>\n<strong><em>Parameter:</em></strong> <code>input</code></p>\n<pre><code>handled = false\nif (IsInt(input)) {\n  number = ToInt(input)\n  if (number &gt; 0 and number &lt;= ListCount(game.menuoptionskeys)) {\n    handled = true\n    ShowMenuResponse (StringListItem(game.menuoptionskeys, number - 1))\n  }\n}\nreturn (handled)\n</code></pre>\n<hr>\n<div style=\"padding: 10px; margin: 10px; background: black; color: green\">\n<samp>\n<p>grep -r HandleMenuTextResponse *</p>\n<p>Core/CoreFunctions.aslx:  &lt;function name=\"HandleMenuTextResponse\" parameters=\"input\" type=\"boolean\"&gt;<br>\nCore/CoreParser.aslx:      if (HandleMenuTextResponse(command)) {</p>\n</samp>\n</div>\n<hr>\n<h3><strong>HandleCommand</strong></h3>\n<pre><code>  &lt;function name=\"HandleCommand\" parameters=\"command, metadata\"&gt;\n    &lt;![CDATA[\n    handled = false\n    if (game.menucallback &lt;&gt; null) {\n      if (HandleMenuTextResponse(command)) {\n        handled = true\n      }\n      else {\n        if (game.menuallowcancel) {\n          ClearMenu\n        }\n        else {\n          handled = true\n        }\n      }\n    }\n    if (not handled) {\n      StartTurnOutputSection\n      if (StartsWith (command, \"*\")) {\n        msg (\"\")\n        msg (SafeXML (command))\n      }\n      else {    \n        shownlink = false\n        if (game.echocommand) {\n          if (metadata &lt;&gt; null and game.enablehyperlinks and game.echohyperlinks) {\n            foreach (key, metadata) {\n              if (EndsWith(command, key)) {\n                objectname = StringDictionaryItem(metadata, key)\n                object = GetObject(objectname)\n                if (object &lt;&gt; null) {\n                  msg (\"\")\n                  msg (\"&amp;gt; \" + Left(command, LengthOf(command) - LengthOf(key)) + \"{object:\" + object.name + \"}\" )\n                  shownlink = true\n                }\n              }\n            }\n          }\n          if (not shownlink) {\n            msg (\"\")\n            OutputTextRaw (\"&amp;gt; \" + SafeXML(command))\n          }\n        }\n        if (game.command_newline) {\n          msg (\"\")\n        }\n        game.pov.commandmetadata = metadata\n        if (game.multiplecommands){\t\t\n          commands = Split(command, \".\")\n          if (ListCount(commands) = 1) {\n            game.pov.commandqueue = null\n            HandleSingleCommand (Trim(command))\n          }\n          else {\n            game.pov.commandqueue = commands\n            HandleNextCommandQueueItem\n          }\n\t\t}\n        else {\n          game.pov.commandqueue = null\n          HandleSingleCommand (Trim(command))\t\n        }\t\t\n      }\n    }\n    ]]&gt;\n  &lt;/function&gt;\n\n</code></pre>\n<hr>\n<pre><code>if (HandleMenuTextResponse(command)) {\n  handled = true\n}\n</code></pre>\n</details>\n<hr>\n<p>Maybe <strong>ShowMenuResponse</strong>  needs to return the Boolean, and <strong>HandleCommand</strong> needs to check <strong>ShowMenuResponse</strong> along with <strong>HandleMenuTextResponse</strong>?</p>\n<p>I have no idea how that would work though.</p>\n\n",
      "PostDate": "2017-10-02T07:32:21.4541277Z",
      "LastEditDate": "2017-10-02T07:46:59.0062129Z",
      "link": null
    },
    {
      "PostId": "5980a36c-2676-414b-8d57-6675edd1b12e",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Calling the Pixie -- do you know a workaround for this?",
      "EditableFormat": "markdown",
      "HTML": "<p>Calling the Pixie -- do you know a workaround for this?</p>\n\n",
      "PostDate": "2017-10-02T22:46:36.7950232Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d1e23afe-00c1-4d6d-9434-a1783e0f6175",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Short answer: No.\r\n\r\nIf you run this script (say in game.start):\r\n```\r\nJS.alert (\"Hello\")\r\nplay sound (\"moved.mp3\", true, false)\r\n```\r\nYou get an alert, and the sound plays, as you expect. Put it in a ShowMenu, and the message displays _after_ the sound finishes, despite being earlier in the code.\r\n\r\nThere is a bug report about a conflict when using timers and playing a sound:\r\nhttps://github.com/textadventures/quest/issues/891\r\n\r\nMy feeling is that the issue is with `play sound`and it might be worth looking at doing that in JavaScript. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Short answer: No.</p>\n<p>If you run this script (say in game.start):</p>\n<pre><code>JS.alert (\"Hello\")\nplay sound (\"moved.mp3\", true, false)\n</code></pre>\n<p>You get an alert, and the sound plays, as you expect. Put it in a ShowMenu, and the message displays <em>after</em> the sound finishes, despite being earlier in the code.</p>\n<p>There is a bug report about a conflict when using timers and playing a sound:<br>\nhttps://github.com/textadventures/quest/issues/891</p>\n<p>My feeling is that the issue is with <code>play sound</code>and it might be worth looking at doing that in JavaScript.</p>\n\n",
      "PostDate": "2017-10-03T19:48:02.6210146Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dab7c80b-a0d0-4af7-b16b-e4983386b8e1",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "On clicking a link in a list of options, JavaScript will call ASLEvent, with the Quest function name \"ShowMenuResponse\", and the text of the option.\r\n\r\nOn the other hand, if you type a number, then `HandleCommand` will process it, noting that game.menucallback is not null, and so will pass the number to `HandleMenuTextResponse`. If the text is a number in range, then this will call `ShowMenuResponse` (otherwise, HandleCommand carries on with it; this is if `HandleMenuTextResponse` returns false).\r\n\r\nEither way, `ShowMenuResponse`will set up the `result` variable, clear the options from the menu, and call the ShowMenu script.\r\n\r\nYou can add `JS.alert (\"I am here\")` to see where Quest is, and if you add that to the start of `ShowMenuResponse`, the alert pops up AFTER the sound plays, even though Quest does the `play sound` later... If you click the link. If you type the number, it works as expected.\r\n\r\nIt looks like it is an issue with ASLEvent, and you can set up your own event like this:\r\n\r\n```\r\nmsg (\"Click <a onclick=\\\"ASLEvent('HandleClick', 'Test')\\\">here</a>.\")\r\n```\r\n\r\nSo if you click on \"here\", the HandleClick function is called. Set that up with a single parameter, and this code:\r\n\r\n```\r\nJS.alert (\"In HandleClick\")\r\nplay sound (\"moved.mp3\", true, false)\r\n```\r\n\r\nYou get the same effect (so stop blaming ShowMenu!). The sound plays first, and the stop button is disabled.\r\n\r\nIf you set the wait to false, it seems to be okay, so perhaps an option would be to add a timer afterwards:\r\n\r\n```\r\nJS.alert (\"In HandleClick\")\r\nplay sound (\"moved.mp3\", false, false)\r\nSetTimeout (4) {\r\n  msg (\"Done\")\r\n}\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>On clicking a link in a list of options, JavaScript will call ASLEvent, with the Quest function name \"ShowMenuResponse\", and the text of the option.</p>\n<p>On the other hand, if you type a number, then <code>HandleCommand</code> will process it, noting that game.menucallback is not null, and so will pass the number to <code>HandleMenuTextResponse</code>. If the text is a number in range, then this will call <code>ShowMenuResponse</code> (otherwise, HandleCommand carries on with it; this is if <code>HandleMenuTextResponse</code> returns false).</p>\n<p>Either way, <code>ShowMenuResponse</code>will set up the <code>result</code> variable, clear the options from the menu, and call the ShowMenu script.</p>\n<p>You can add <code>JS.alert (\"I am here\")</code> to see where Quest is, and if you add that to the start of <code>ShowMenuResponse</code>, the alert pops up AFTER the sound plays, even though Quest does the <code>play sound</code> later... If you click the link. If you type the number, it works as expected.</p>\n<p>It looks like it is an issue with ASLEvent, and you can set up your own event like this:</p>\n<pre><code>msg (\"Click &lt;a onclick=\\\"ASLEvent('HandleClick', 'Test')\\\"&gt;here&lt;/a&gt;.\")\n</code></pre>\n<p>So if you click on \"here\", the HandleClick function is called. Set that up with a single parameter, and this code:</p>\n<pre><code>JS.alert (\"In HandleClick\")\nplay sound (\"moved.mp3\", true, false)\n</code></pre>\n<p>You get the same effect (so stop blaming ShowMenu!). The sound plays first, and the stop button is disabled.</p>\n<p>If you set the wait to false, it seems to be okay, so perhaps an option would be to add a timer afterwards:</p>\n<pre><code>JS.alert (\"In HandleClick\")\nplay sound (\"moved.mp3\", false, false)\nSetTimeout (4) {\n  msg (\"Done\")\n}\n</code></pre>\n\n",
      "PostDate": "2017-10-04T07:26:36.081857Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bfe56717-fce6-4dfb-9a0c-8f1663f53262",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Whoops, accidental post here...\r\n\r\n---\r\nSo...\r\n\r\nHow is everyone today?",
      "EditableFormat": "markdown",
      "HTML": "<p>Whoops, accidental post here...</p>\n<hr>\n<p>So...</p>\n<p>How is everyone today?</p>\n\n",
      "PostDate": "2017-10-04T07:40:40.1960941Z",
      "LastEditDate": "2017-10-04T09:44:26.4294447Z",
      "link": null
    },
    {
      "PostId": "602e3f68-efe5-4813-933f-977141551ca3",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "confused...",
      "EditableFormat": "markdown",
      "HTML": "<p>confused...</p>\n\n",
      "PostDate": "2017-10-04T08:12:18.3548298Z",
      "LastEditDate": "2017-10-04T11:16:44.0183654Z",
      "link": null
    },
    {
      "PostId": "60183bfd-70fb-4c68-a52c-d3df859525c0",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I tried Pixie's advice but couldn't get it to work:\r\n```\r\nplay sound (\"moved.mp3\", false, false)\r\nSetTimeout (4) {\r\n  msg (\"Done\")\r\n}\r\n```\r\nThe sound won't play.  Making it 'play sound (\"moved.mp3\", true, false)' only recreates the original problem.  I tried placing the 'SetTimeout' to before 'play sound' (with both 'false, false' and 'true, false') without success.  I changed the # of seconds for the timeout to equal the length of the played sound, and longer than the played sound, also to no avail.\r\n\r\nI was going to add this to GitHub's list of bugs if there is no objection.",
      "EditableFormat": "markdown",
      "HTML": "<p>I tried Pixie's advice but couldn't get it to work:</p>\n<pre><code>play sound (\"moved.mp3\", false, false)\nSetTimeout (4) {\n  msg (\"Done\")\n}\n</code></pre>\n<p>The sound won't play.  Making it 'play sound (\"moved.mp3\", true, false)' only recreates the original problem.  I tried placing the 'SetTimeout' to before 'play sound' (with both 'false, false' and 'true, false') without success.  I changed the # of seconds for the timeout to equal the length of the played sound, and longer than the played sound, also to no avail.</p>\n<p>I was going to add this to GitHub's list of bugs if there is no objection.</p>\n\n",
      "PostDate": "2017-10-07T06:43:12.9038927Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "266d2be9-baa7-42d1-ba4a-4082127c3df5",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I wonder if we could make ```HandleCommand``` check for a Boolean set by ```ASLEvent``` just like it does for ```HandleMenuTextResponse```.\r\n\r\nWe'd need to alter something else so ```ASLEvent``` actually **set** the Boolean, of course...\r\n\r\n\r\n---\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I wonder if we could make <code>HandleCommand</code> check for a Boolean set by <code>ASLEvent</code> just like it does for <code>HandleMenuTextResponse</code>.</p>\n<p>We'd need to alter something else so <code>ASLEvent</code> actually <strong>set</strong> the Boolean, of course...</p>\n<hr>\n\n",
      "PostDate": "2017-10-07T07:23:59.1685989Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "12b1cb16-58e9-4fac-9c17-aac7dde2d709",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\nmsg (\"Playing mp3 audio...\")\r\nmsg (\"You move it.\")\r\nSetTimeout (1) {\r\n  play sound (\"moved.mp3\", true, false)\r\n  msg (\"Done\")\r\n  if (thing.parent = game.pov) {\r\n    thing.parent = game.pov.parent\r\n  }\r\n  else {\r\n    thing.parent = game.pov\r\n  }\r\n}\r\n```\r\n\r\n\r\n---\r\nThis script doesn't stop you from entering a command while the sound plays.\r\n\r\nThis doesn't help at all, but it may teach us something that does help...\r\n\r\n---\r\n...and this one doesn't print \"Done\" or progress the turn count, but you CAN stop the game:\r\n\r\n```\r\nmsg (\"Playing mp3 audio...\")\r\nmsg (\"You move it.\")\r\nSetTimeout (1) {\r\n  play sound (\"moved.mp3\", true, false)\r\n  SetTimeout (1) {\r\n    msg (\"Done\")\r\n    if (thing.parent = game.pov) {\r\n      thing.parent = game.pov.parent\r\n    }\r\n    else {\r\n      thing.parent = game.pov\r\n    }\r\n  }\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>msg (\"Playing mp3 audio...\")\nmsg (\"You move it.\")\nSetTimeout (1) {\n  play sound (\"moved.mp3\", true, false)\n  msg (\"Done\")\n  if (thing.parent = game.pov) {\n    thing.parent = game.pov.parent\n  }\n  else {\n    thing.parent = game.pov\n  }\n}\n</code></pre>\n<hr>\n<p>This script doesn't stop you from entering a command while the sound plays.</p>\n<p>This doesn't help at all, but it may teach us something that does help...</p>\n<hr>\n<p>...and this one doesn't print \"Done\" or progress the turn count, but you CAN stop the game:</p>\n<pre><code>msg (\"Playing mp3 audio...\")\nmsg (\"You move it.\")\nSetTimeout (1) {\n  play sound (\"moved.mp3\", true, false)\n  SetTimeout (1) {\n    msg (\"Done\")\n    if (thing.parent = game.pov) {\n      thing.parent = game.pov.parent\n    }\n    else {\n      thing.parent = game.pov\n    }\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2017-10-07T07:37:21.3846966Z",
      "LastEditDate": "2017-10-07T07:40:57.036414Z",
      "link": null
    },
    {
      "PostId": "acc6b25c-92e8-4274-ac28-ebd427a4070b",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Dcoder, I did try it before posting and it worked for me (on the desktop version; uploading to the web might be a different matter...).",
      "EditableFormat": "markdown",
      "HTML": "<p>Dcoder, I did try it before posting and it worked for me (on the desktop version; uploading to the web might be a different matter...).</p>\n\n",
      "PostDate": "2017-10-07T08:24:07.5927322Z",
      "LastEditDate": "2017-10-07T09:24:19.066168Z",
      "link": null
    },
    {
      "PostId": "31bc1b27-176d-4082-b3cb-5d7be43150e5",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well... This doesn't really help here at all (I don't think), but...\r\n\r\nI made ```HandleMenuTextResponse``` understand it when you enter text that matches the selection:\r\n\r\n```\r\nhandled = false\r\nif (IsInt(input)) {\r\n  number = ToInt(input)\r\n  if (number > 0 and number <= ListCount(game.menuoptionskeys)) {\r\n    handled = true\r\n    ShowMenuResponse (StringListItem(game.menuoptionskeys, number - 1))\r\n  }\r\n}\r\nforeach (o, game.menuoptions) {\r\n  if (o = input) {\r\n    handled = true\r\n    ShowMenuResponse (input)\r\n  }\r\n}\r\nreturn (handled)\r\n```\r\n\r\n---\r\nThat doesn't help Dcoder here (yet?), but I thought I could use HandleMenuTextResponse in the ASLEvent called by selecting the menu item.  That didn't work.\r\n\r\n---\r\nI found ASLEvent and UIEvent, but I can't find how ```play sound``` actually works.\r\n\r\n...and the two I ***did***  find only confuse me further.\r\n\r\n```\r\nfunction ASLEvent(event, parameter) {\r\n    UIEvent(\"ASLEvent\", event + \";\" + parameter);\r\n}\r\n```\r\n\r\n```\r\nfunction UIEvent(cmd, parameter) {\r\n    questCefInterop.uiEvent(cmd, parameter);\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Well... This doesn't really help here at all (I don't think), but...</p>\n<p>I made <code>HandleMenuTextResponse</code> understand it when you enter text that matches the selection:</p>\n<pre><code>handled = false\nif (IsInt(input)) {\n  number = ToInt(input)\n  if (number &gt; 0 and number &lt;= ListCount(game.menuoptionskeys)) {\n    handled = true\n    ShowMenuResponse (StringListItem(game.menuoptionskeys, number - 1))\n  }\n}\nforeach (o, game.menuoptions) {\n  if (o = input) {\n    handled = true\n    ShowMenuResponse (input)\n  }\n}\nreturn (handled)\n</code></pre>\n<hr>\n<p>That doesn't help Dcoder here (yet?), but I thought I could use HandleMenuTextResponse in the ASLEvent called by selecting the menu item.  That didn't work.</p>\n<hr>\n<p>I found ASLEvent and UIEvent, but I can't find how <code>play sound</code> actually works.</p>\n<p>...and the two I <strong><em>did</em></strong>  find only confuse me further.</p>\n<pre><code>function ASLEvent(event, parameter) {\n    UIEvent(\"ASLEvent\", event + \";\" + parameter);\n}\n</code></pre>\n<pre><code>function UIEvent(cmd, parameter) {\n    questCefInterop.uiEvent(cmd, parameter);\n}\n</code></pre>\n\n",
      "PostDate": "2017-10-07T08:53:30.4940179Z",
      "LastEditDate": "2017-10-07T09:08:40.9028645Z",
      "link": null
    },
    {
      "PostId": "8318dd36-f45b-4ba0-98b6-70afc75cb552",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Pixie's suggestion behaves almost the same as it does without the SetTimeout when I try it.  The sound plays either way.  If 'Wait for sound...' is set to no, everything works properly on click BUT commands can still be entered, and \"Done\" prints after four seconds. \r\n\r\n<samp>\r\n\r\n\\> menu\r\nPlaying mp3 audio...\r\nDone\r\n\r\n\\> menu\r\nPlaying mp3 audio...\r\n\r\n\\> l\r\nYou are in a room.\r\nYou can see a thingy.\r\n[menu](#)\r\n\r\nDone\r\n\r\n</samp>\r\n\r\n---\r\n Everything still freezes when I change 'Wait...' to yes.\r\n\r\nThe sound plays no matter what on my end, though.\r\n\r\n---\r\nThere is already an issue on GitHub:\r\n\r\nhttps://github.com/textadventures/quest/issues/891",
      "EditableFormat": "markdown",
      "HTML": "<p>Pixie's suggestion behaves almost the same as it does without the SetTimeout when I try it.  The sound plays either way.  If 'Wait for sound...' is set to no, everything works properly on click BUT commands can still be entered, and \"Done\" prints after four seconds.</p>\n<samp>\n<p>&gt; menu<br>\nPlaying mp3 audio...<br>\nDone</p>\n<p>&gt; menu<br>\nPlaying mp3 audio...</p>\n<p>&gt; l<br>\nYou are in a room.<br>\nYou can see a thingy.<br>\n<a href=\"#\">menu</a></p>\n<p>Done</p>\n</samp>\n<hr>\n<p>Everything still freezes when I change 'Wait...' to yes.</p>\n<p>The sound plays no matter what on my end, though.</p>\n<hr>\n<p>There is already an issue on GitHub:</p>\n<p>https://github.com/textadventures/quest/issues/891</p>\n\n",
      "PostDate": "2017-10-07T09:05:00.5711848Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "61c17f27-c185-4184-942b-95c93dc1298b",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This proves that it's either ```ASLEvent``` or ```play sound``` causing the problem:\r\n\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"not showmenu\">\r\n    <gameid>2a4ccea3-9e1d-4b90-9dfc-36d343d3a137</gameid>\r\n    <version>1.1</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <turns type=\"int\">0</turns>\r\n    <statusattributes type=\"stringdictionary\">\r\n      <item>\r\n        <key>turns</key>\r\n        <value></value>\r\n      </item>\r\n    </statusattributes>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description type=\"script\"><![CDATA[\r\n      msg (\"<br><a color=\\\"blue\\\" style=\\\"cursor:pointer\\\" onclick=\\\"ASLEvent('HandleSingleCommand', 'move the thing')\\\">{u:{colour:blue:Click here to move the thing}}</a>\")\r\n    ]]></description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"thing\">\r\n      <inherit name=\"editor_object\" />\r\n    </object>\r\n  </object>\r\n  <command>\r\n    <pattern>move the thing</pattern>\r\n    <script>\r\n      msg (\"Playing mp3 audio...\")\r\n      play sound (\"moved.mp3\", true, false)\r\n      msg (\"Done\")\r\n      if (thing.parent = game.pov) {\r\n        thing.parent = game.pov.parent\r\n      }\r\n      else {\r\n        thing.parent = game.pov\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>don't move the thing</pattern>\r\n    <script>\r\n      msg (\"Good call!\")\r\n    </script>\r\n  </command>\r\n  <turnscript>\r\n    <enabled />\r\n    <script>\r\n      game.turns = game.turns + 1\r\n    </script>\r\n  </turnscript>\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>This proves that it's either <code>ASLEvent</code> or <code>play sound</code> causing the problem:</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"not showmenu\"&gt;\n    &lt;gameid&gt;2a4ccea3-9e1d-4b90-9dfc-36d343d3a137&lt;/gameid&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;turns type=\"int\"&gt;0&lt;/turns&gt;\n    &lt;statusattributes type=\"stringdictionary\"&gt;\n      &lt;item&gt;\n        &lt;key&gt;turns&lt;/key&gt;\n        &lt;value&gt;&lt;/value&gt;\n      &lt;/item&gt;\n    &lt;/statusattributes&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description type=\"script\"&gt;&lt;![CDATA[\n      msg (\"&lt;br&gt;&lt;a color=\\\"blue\\\" style=\\\"cursor:pointer\\\" onclick=\\\"ASLEvent('HandleSingleCommand', 'move the thing')\\\"&gt;{u:{colour:blue:Click here to move the thing}}&lt;/a&gt;\")\n    ]]&gt;&lt;/description&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"thing\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;move the thing&lt;/pattern&gt;\n    &lt;script&gt;\n      msg (\"Playing mp3 audio...\")\n      play sound (\"moved.mp3\", true, false)\n      msg (\"Done\")\n      if (thing.parent = game.pov) {\n        thing.parent = game.pov.parent\n      }\n      else {\n        thing.parent = game.pov\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;don't move the thing&lt;/pattern&gt;\n    &lt;script&gt;\n      msg (\"Good call!\")\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;turnscript&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      game.turns = game.turns + 1\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2017-10-07T10:15:38.9976886Z",
      "LastEditDate": "2017-10-08T09:05:22.1114168Z",
      "link": null
    },
    {
      "PostId": "1736aecc-77a1-4303-a3ea-8762d03abaab",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have Quest open in Visual Studio.\r\n\r\nHere are the two scripts I find when I search for 'sound'.\r\n\r\nThey are ```.vb``` files.  Anyone speak Visual Basic?  (I have no idea if this is even where the problem is, but I'll try any suggestions in a build.  I'm crazy.)\r\n\r\n\r\n<details>\r\n\r\n```\r\n   public void PlaySound(string filename, bool sync, bool looped)\r\n        {\r\n            m_playerUI.PlaySound(filename, sync, looped);\r\n            if (sync)\r\n            {\r\n                ChangeThreadState(ThreadState.Waiting);\r\n\r\n                lock (m_waitForResponseLock)\r\n                {\r\n                    Monitor.Wait(m_waitForResponseLock);\r\n                }\r\n            }\r\n        }\r\n```\r\n\r\n```\r\n    public class PlaySoundScript : ScriptBase\r\n    {\r\n        private ScriptContext m_scriptContext;\r\n        private WorldModel m_worldModel;\r\n        private IFunction<string> m_filename;\r\n        private IFunction<bool> m_synchronous;\r\n        private IFunction<bool> m_loop;\r\n\r\n        public PlaySoundScript(ScriptContext scriptContext, IFunction<string> function, IFunction<bool> synchronous, IFunction<bool> loop)\r\n        {\r\n            m_scriptContext = scriptContext;\r\n            m_worldModel = scriptContext.WorldModel;\r\n            m_filename = function;\r\n            m_synchronous = synchronous;\r\n            m_loop = loop;\r\n        }\r\n\r\n        protected override ScriptBase CloneScript()\r\n        {\r\n            return new PlaySoundScript(m_scriptContext, m_filename.Clone(), m_synchronous.Clone(), m_loop.Clone());\r\n        }\r\n\r\n        public override void Execute(Context c)\r\n        {\r\n            string filename = m_filename.Execute(c);\r\n            m_worldModel.PlaySound(filename, m_synchronous.Execute(c), m_loop.Execute(c));\r\n        }\r\n\r\n        public override string Save()\r\n        {\r\n            return SaveScript(\"play sound\", m_filename.Save(), m_synchronous.Save(), m_loop.Save());\r\n        }\r\n\r\n        public override object GetParameter(int index)\r\n        {\r\n            switch (index)\r\n            {\r\n                case 0:\r\n                    return m_filename.Save();\r\n                case 1:\r\n                    return m_synchronous.Save();\r\n                case 2:\r\n                    return m_loop.Save();\r\n                default:\r\n                    throw new ArgumentOutOfRangeException();\r\n            }\r\n        }\r\n\r\n        public override void SetParameterInternal(int index, object value)\r\n        {\r\n            switch (index)\r\n            {\r\n                case 0:\r\n                    m_filename = new Expression<string>((string)value, m_scriptContext);\r\n                    break;\r\n                case 1:\r\n                    m_synchronous = new Expression<bool>((string)value, m_scriptContext);\r\n                    break;\r\n                case 2:\r\n                    m_loop = new Expression<bool>((string)value, m_scriptContext);\r\n                    break;\r\n                default:\r\n                    throw new ArgumentOutOfRangeException();\r\n            }\r\n        }\r\n\r\n        public override string Keyword\r\n        {\r\n            get\r\n            {\r\n                return \"play sound\";\r\n            }\r\n        }\r\n    }\r\n\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>I have Quest open in Visual Studio.</p>\n<p>Here are the two scripts I find when I search for 'sound'.</p>\n<p>They are <code>.vb</code> files.  Anyone speak Visual Basic?  (I have no idea if this is even where the problem is, but I'll try any suggestions in a build.  I'm crazy.)</p>\n<details>\n<pre><code>   public void PlaySound(string filename, bool sync, bool looped)\n        {\n            m_playerUI.PlaySound(filename, sync, looped);\n            if (sync)\n            {\n                ChangeThreadState(ThreadState.Waiting);\n\n                lock (m_waitForResponseLock)\n                {\n                    Monitor.Wait(m_waitForResponseLock);\n                }\n            }\n        }\n</code></pre>\n<pre><code>    public class PlaySoundScript : ScriptBase\n    {\n        private ScriptContext m_scriptContext;\n        private WorldModel m_worldModel;\n        private IFunction&lt;string&gt; m_filename;\n        private IFunction&lt;bool&gt; m_synchronous;\n        private IFunction&lt;bool&gt; m_loop;\n\n        public PlaySoundScript(ScriptContext scriptContext, IFunction&lt;string&gt; function, IFunction&lt;bool&gt; synchronous, IFunction&lt;bool&gt; loop)\n        {\n            m_scriptContext = scriptContext;\n            m_worldModel = scriptContext.WorldModel;\n            m_filename = function;\n            m_synchronous = synchronous;\n            m_loop = loop;\n        }\n\n        protected override ScriptBase CloneScript()\n        {\n            return new PlaySoundScript(m_scriptContext, m_filename.Clone(), m_synchronous.Clone(), m_loop.Clone());\n        }\n\n        public override void Execute(Context c)\n        {\n            string filename = m_filename.Execute(c);\n            m_worldModel.PlaySound(filename, m_synchronous.Execute(c), m_loop.Execute(c));\n        }\n\n        public override string Save()\n        {\n            return SaveScript(\"play sound\", m_filename.Save(), m_synchronous.Save(), m_loop.Save());\n        }\n\n        public override object GetParameter(int index)\n        {\n            switch (index)\n            {\n                case 0:\n                    return m_filename.Save();\n                case 1:\n                    return m_synchronous.Save();\n                case 2:\n                    return m_loop.Save();\n                default:\n                    throw new ArgumentOutOfRangeException();\n            }\n        }\n\n        public override void SetParameterInternal(int index, object value)\n        {\n            switch (index)\n            {\n                case 0:\n                    m_filename = new Expression&lt;string&gt;((string)value, m_scriptContext);\n                    break;\n                case 1:\n                    m_synchronous = new Expression&lt;bool&gt;((string)value, m_scriptContext);\n                    break;\n                case 2:\n                    m_loop = new Expression&lt;bool&gt;((string)value, m_scriptContext);\n                    break;\n                default:\n                    throw new ArgumentOutOfRangeException();\n            }\n        }\n\n        public override string Keyword\n        {\n            get\n            {\n                return \"play sound\";\n            }\n        }\n    }\n\n</code></pre>\n</details>\n\n",
      "PostDate": "2017-10-08T09:10:17.4967664Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7eb903b5-5bfe-457e-9971-35f621cbc589",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks guys.  I'm going to wait and see what happens in the next update before I tackle this...",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks guys.  I'm going to wait and see what happens in the next update before I tackle this...</p>\n\n",
      "PostDate": "2017-10-08T15:30:52.188634Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
