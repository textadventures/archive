{
  "Topic": {
    "TopicId": "np5yk9ebc0erulcwvcccva",
    "ForumId": "10",
    "Title": "Adding a key to a script dictionary in a text adventure",
    "LastUpdated": "2017-07-10T17:52:09.3322028Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "439da9b8-1271-4719-94ff-e95c84ba5626",
      "UserId": 315210,
      "Username": "W.H. Dunnlatch",
      "AvatarUrl": "http://i.imgur.com/XZr8onEb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello,\r\n\r\nI'm fairly certain I'm overlooking something simple, but I've been through the documentation and the forum with no results (or I overlooked something there, too), so:\r\n\r\nHow do I add a key to a script dictionary upon entering a certain room?\r\n\r\nI don't want the NPC to respond to a certain topic until the player has played through the scene concerning the topic.\r\n(Or am I better off just writing an IF...THEN.. script for the topic, with the reply \"There is no reply.\" if the room hasn't been visited? I could do that, but I'd rather learn how to add the key.)\r\n\r\nI made a sample game that should provide any information anyone may need to help me out. (If you play the game, the room description of the second room will explain what I'd like to do, as well.)\r\n\r\nThanks in advance!\r\n\r\nHere's the sample:\r\n\r\n\r\n```\r\n<!--Saved by Quest 5.7.6386.17178-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Ask Ralph About Things\">\r\n    <gameid>e15effd8-9449-4ec7-a1f3-a07e2f9e9c84</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <author>W.H. Dunnlatch</author>\r\n    <subtitle>A study in adding keys (with msg scripts) to ASK...ABOUT... lists</subtitle>\r\n    <feature_asktell />\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description>Go into the next room.</description>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"Ralph\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"namedmale\" />\r\n      <look><![CDATA[Ralph the penguin is a character I borrow from a friend of mine who writes his 'real' stories.<br/>(Enter {command:CLOSELY EXAMINE RP} for more!)]]></look>\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Speak to</value>\r\n        <value>Closely examine</value>\r\n      </displayverbs>\r\n      <topics type=\"stringlist\">\r\n        <value>topic1</value>\r\n        <value>topic2</value>\r\n      </topics>\r\n      <speak type=\"script\">\r\n        game.askaboutobject = Ralph\r\n        ShowMenu (\"What you like to ask Ralph about?\", Ralph.topics, true) {\r\n          if (not result = null) {\r\n            DoAskTell (game.askaboutobject, result, \"ask\", \"askdefault\", \"DefaultAsk\")\r\n          }\r\n        }\r\n      </speak>\r\n      <closelyexamine type=\"script\"><![CDATA[\r\n        msg (\"<div id=\\\"bio\\\"><br/><center><h3 style='font-family:Georgia !important;text-shadow:-1px -1 px 1px black !important;'>Ralph the penguin</h3></center>Ralph is not really from around here, but he is very closely related to the Emperor penguin.<br/><br/>Tidbits concerning Ralph:<br/><ul><br/>  <li style=\\\"font-family:Georgia !important\\\">Ralph is actually a character I borrow from an author friend of mine.</li><br/>  <li style=\\\"font-family:Georgia !important\\\">Ralph has a thing for dodos.</li><br/>  <li style=\\\"font-family:Georgia !important\\\">If you give Ralph the laser sword, he will attack antagonists on command.</li></div>\")\r\n        wait {\r\n          SetFontSize (14)\r\n          ShowRoomDescription\r\n        }\r\n      ]]></closelyexamine>\r\n      <ask type=\"scriptdictionary\">\r\n        <item key=\"topic1\">\r\n          msg (\"This is the reply to topic1.\")\r\n        </item>\r\n        <item key=\"topic2\">\r\n          msg (\"This is the reply to topic2.\")\r\n        </item>\r\n      </ask>\r\n    </object>\r\n    <exit alias=\"in\" to=\"certain room\">\r\n      <inherit name=\"indirection\" />\r\n    </exit>\r\n  </object>\r\n  <verb>\r\n    <property>closelyexamine</property>\r\n    <pattern>closely examine</pattern>\r\n    <defaultexpression>\"You can't closely examine \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <object name=\"certain room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description><![CDATA[<br/><h1>What happens and what I'd like to happen upon entering this room (behind the scenes):</h1><ul><li>The string \"Harbinger\" is added to Ralph.topics, so it will display as a selection when you TALK/SPEAK TO RALPH.<br/>(I have this working perfectly already in the main game. This game is just a sample to post on the forum.)</li><br/><li>THIS IS THE ONE I NEED HELP WITH: I want it to add a key to ASK RALPH ABOUT: <code>The Harbinger,  Print \"\\\"He says we're DOOMED!\\\" replies Ralph, doing his best to mimick the harbinger.\"</code></li>]]></description>\r\n    <beforeenter type=\"script\"><![CDATA[\r\n      msg (\"<b>NOTE: I want to add a script that adds a key to Ralph's ASK...ABOUT... list when the player enters this room the first time.</b>\")\r\n      list add (Ralph.topics, \"topic3 (added upon entering a certain room but needs to be added to Ralph.ask)\")\r\n    ]]></beforeenter>\r\n    <exit alias=\"out\" to=\"room\">\r\n      <inherit name=\"outdirection\" />\r\n    </exit>\r\n    <object name=\"The Harbinger\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"namedmale\" />\r\n    </object>\r\n  </object>\r\n  <turnscript name=\"rp_follows\">\r\n    <enabled />\r\n    <script>\r\n      MoveObjectHere (Ralph)\r\n    </script>\r\n  </turnscript>\r\n</asl>\r\n\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello,</p>\n<p>I'm fairly certain I'm overlooking something simple, but I've been through the documentation and the forum with no results (or I overlooked something there, too), so:</p>\n<p>How do I add a key to a script dictionary upon entering a certain room?</p>\n<p>I don't want the NPC to respond to a certain topic until the player has played through the scene concerning the topic.<br>\n(Or am I better off just writing an IF...THEN.. script for the topic, with the reply \"There is no reply.\" if the room hasn't been visited? I could do that, but I'd rather learn how to add the key.)</p>\n<p>I made a sample game that should provide any information anyone may need to help me out. (If you play the game, the room description of the second room will explain what I'd like to do, as well.)</p>\n<p>Thanks in advance!</p>\n<p>Here's the sample:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6386.17178--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Ask Ralph About Things\"&gt;\n    &lt;gameid&gt;e15effd8-9449-4ec7-a1f3-a07e2f9e9c84&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;author&gt;W.H. Dunnlatch&lt;/author&gt;\n    &lt;subtitle&gt;A study in adding keys (with msg scripts) to ASK...ABOUT... lists&lt;/subtitle&gt;\n    &lt;feature_asktell /&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;Go into the next room.&lt;/description&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"Ralph\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"namedmale\" /&gt;\n      &lt;look&gt;&lt;![CDATA[Ralph the penguin is a character I borrow from a friend of mine who writes his 'real' stories.&lt;br/&gt;(Enter {command:CLOSELY EXAMINE RP} for more!)]]&gt;&lt;/look&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;Speak to&lt;/value&gt;\n        &lt;value&gt;Closely examine&lt;/value&gt;\n      &lt;/displayverbs&gt;\n      &lt;topics type=\"stringlist\"&gt;\n        &lt;value&gt;topic1&lt;/value&gt;\n        &lt;value&gt;topic2&lt;/value&gt;\n      &lt;/topics&gt;\n      &lt;speak type=\"script\"&gt;\n        game.askaboutobject = Ralph\n        ShowMenu (\"What you like to ask Ralph about?\", Ralph.topics, true) {\n          if (not result = null) {\n            DoAskTell (game.askaboutobject, result, \"ask\", \"askdefault\", \"DefaultAsk\")\n          }\n        }\n      &lt;/speak&gt;\n      &lt;closelyexamine type=\"script\"&gt;&lt;![CDATA[\n        msg (\"&lt;div id=\\\"bio\\\"&gt;&lt;br/&gt;&lt;center&gt;&lt;h3 style='font-family:Georgia !important;text-shadow:-1px -1 px 1px black !important;'&gt;Ralph the penguin&lt;/h3&gt;&lt;/center&gt;Ralph is not really from around here, but he is very closely related to the Emperor penguin.&lt;br/&gt;&lt;br/&gt;Tidbits concerning Ralph:&lt;br/&gt;&lt;ul&gt;&lt;br/&gt;  &lt;li style=\\\"font-family:Georgia !important\\\"&gt;Ralph is actually a character I borrow from an author friend of mine.&lt;/li&gt;&lt;br/&gt;  &lt;li style=\\\"font-family:Georgia !important\\\"&gt;Ralph has a thing for dodos.&lt;/li&gt;&lt;br/&gt;  &lt;li style=\\\"font-family:Georgia !important\\\"&gt;If you give Ralph the laser sword, he will attack antagonists on command.&lt;/li&gt;&lt;/div&gt;\")\n        wait {\n          SetFontSize (14)\n          ShowRoomDescription\n        }\n      ]]&gt;&lt;/closelyexamine&gt;\n      &lt;ask type=\"scriptdictionary\"&gt;\n        &lt;item key=\"topic1\"&gt;\n          msg (\"This is the reply to topic1.\")\n        &lt;/item&gt;\n        &lt;item key=\"topic2\"&gt;\n          msg (\"This is the reply to topic2.\")\n        &lt;/item&gt;\n      &lt;/ask&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"in\" to=\"certain room\"&gt;\n      &lt;inherit name=\"indirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;verb&gt;\n    &lt;property&gt;closelyexamine&lt;/property&gt;\n    &lt;pattern&gt;closely examine&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't closely examine \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;object name=\"certain room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;&lt;![CDATA[&lt;br/&gt;&lt;h1&gt;What happens and what I'd like to happen upon entering this room (behind the scenes):&lt;/h1&gt;&lt;ul&gt;&lt;li&gt;The string \"Harbinger\" is added to Ralph.topics, so it will display as a selection when you TALK/SPEAK TO RALPH.&lt;br/&gt;(I have this working perfectly already in the main game. This game is just a sample to post on the forum.)&lt;/li&gt;&lt;br/&gt;&lt;li&gt;THIS IS THE ONE I NEED HELP WITH: I want it to add a key to ASK RALPH ABOUT: &lt;code&gt;The Harbinger,  Print \"\\\"He says we're DOOMED!\\\" replies Ralph, doing his best to mimick the harbinger.\"&lt;/code&gt;&lt;/li&gt;]]&gt;&lt;/description&gt;\n    &lt;beforeenter type=\"script\"&gt;&lt;![CDATA[\n      msg (\"&lt;b&gt;NOTE: I want to add a script that adds a key to Ralph's ASK...ABOUT... list when the player enters this room the first time.&lt;/b&gt;\")\n      list add (Ralph.topics, \"topic3 (added upon entering a certain room but needs to be added to Ralph.ask)\")\n    ]]&gt;&lt;/beforeenter&gt;\n    &lt;exit alias=\"out\" to=\"room\"&gt;\n      &lt;inherit name=\"outdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"The Harbinger\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"namedmale\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;turnscript name=\"rp_follows\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      MoveObjectHere (Ralph)\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n&lt;/asl&gt;\n\n</code></pre>\n\n",
      "PostDate": "2017-07-10T17:52:09.3322028Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1414b53e-83f3-478c-9629-0450f4a1da11",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Try this:\r\n```\r\nscript => {\r\n  msg(\"Harbinger is just this guy, you know?\")\r\n}\r\ndictionary add(Ralph.ask, \"harbinger\", script)\r\n```\r\nI can never remember if the arrow thing goes `=>` or `<=`, or flip it if that does not work.",
      "EditableFormat": "markdown",
      "HTML": "<p>Try this:</p>\n<pre><code>script =&gt; {\n  msg(\"Harbinger is just this guy, you know?\")\n}\ndictionary add(Ralph.ask, \"harbinger\", script)\n</code></pre>\n<p>I can never remember if the arrow thing goes <code>=&gt;</code> or <code>&lt;=</code>, or flip it if that does not work.</p>\n\n",
      "PostDate": "2017-07-10T21:29:05.8458019Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "71381556-2ba0-42e8-a855-9688b36c7d02",
      "UserId": 315210,
      "Username": "W.H. Dunnlatch",
      "AvatarUrl": "http://i.imgur.com/XZr8onEb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@The Pixie,\r\n\r\nYou rock!\r\n\r\n(Nice Hitchhiker's reference, by the way! When I tested the code out, I thought, \"I don't remember putting that response in THIS game!\" (Although, I did put it in the last game when you asked Ralph about his author.))\r\n\r\nThanks!",
      "EditableFormat": "markdown",
      "HTML": "<p>@The Pixie,</p>\n<p>You rock!</p>\n<p>(Nice Hitchhiker's reference, by the way! When I tested the code out, I thought, \"I don't remember putting that response in THIS game!\" (Although, I did put it in the last game when you asked Ralph about his author.))</p>\n<p>Thanks!</p>\n\n",
      "PostDate": "2017-07-10T22:56:12.8050038Z",
      "LastEditDate": "2017-07-10T22:57:54.1473864Z",
      "link": null
    }
  ]
}
