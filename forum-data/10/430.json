{
  "Topic": {
    "TopicId": "430",
    "ForumId": "10",
    "Title": "overriding global command",
    "LastUpdated": "2004-07-09T12:43:07+01:00",
    "ReplyCount": 2
  },
  "Posts": [
    {
      "PostId": "2861",
      "UserId": 0,
      "Username": "Farvardin",
      "UserAvatar": null,
      "UserGravatar": "b6ea46e28b64e5f7c68f80468607f022",
      "EditableText": "Hello,\n\nI'm trying to do something in my game :\n\nI want to have a global \"give\" answer message, that can catch the action to give something to someone in particular. \nIt worked, but later I realized I needed to built a local \"give\" action for someone.  But the global \"give\" command prevents me to do this :\n\n\n[code:2g9h8d4i]\t\n\nGlobal command &#58;\n\ncommand &lt;give #@thing# to #@destinataire#&gt; &#123;\n\t\tif &#40; #destinataire# = Livolas &#41; then &#123;\n\t\t\tmsg &lt;Livolas thanks you for the #@thing#&#46;&gt;\n\t\t\tlose &lt;#@thing#&gt;\n\t\t\thide &lt;#@thing#&gt;\n\t\t&#125;\n\t\telse msg &lt;This person doesn't want this item now&#46;&gt;\n\t&#125;\n\n\nlocal command, into an object &#40;a cat&#41;&#58;\n\n\n\t\tgive &lt;sweet&gt; &#123;\n\t\tsay &lt;Rhooooo&gt;\n\t\tmsg &lt;The cat takes your sweet&gt;\n\t\tlose &lt;sweet&gt;\n\t\thide &lt;sweet&gt;\n\t\t&#125;\n[/code:2g9h8d4i]\n\nI wanted something that could tell the local \"give\" command to override the global one. Is it possible ? I found a way to make my command work locally, but I had to adapt it to the global command, and I prefered to do it in the local command. Why ? This way if I want to give something else to an other character, I don't need to modify the global command. And I can also consider including all my glocal commands to a library I could re-use later for another game...\n\n\n[code:2g9h8d4i]\n\tcommand &lt;give #@thing# to #@destinataire#&gt; &#123;\n\t\tif &#40; #destinataire# = Livolas &#41; then &#123;\n\t\t\tmsg &lt;Livolas thanks you for the #@thing#&#46;&gt;\n\t\t\tlose &lt;#@thing#&gt;\n\t\t\thide &lt;#@thing#&gt;\n\t\t&#125;\n\t\telse &#123;\n\t\tif &#40; #destinataire# = cat &#41; and &#40; #@thing# = sweet &#41; then doaction &lt;cat; give_sweet&gt;\n\t\telse msg &lt;This person doesn't want this item now&#46;&gt;\n\t\t&#125;\n\n\t&#125;\n\n\nand in the local object\n\n\t\taction &lt;give_sweet&gt; do &#123;\n\t\tsay &lt;Rhooooo&gt;\n\t\tmsg &lt;The cat takes your sweet&#46;&gt;\n\t\tlose &lt;sweet&gt;\n\t\thide &lt;sweet&gt;\n\t\t&#125;\n[/code:2g9h8d4i]",
      "EditableFormat": "bbcode",
      "HTML": "Hello,<br/><br/>I'm trying to do something in my game :<br/><br/>I want to have a global \"give\" answer message, that can catch the action to give something to someone in particular. <br/>It worked, but later I realized I needed to built a local \"give\" action for someone.  But the global \"give\" command prevents me to do this :<br/><br/><br/><pre><code>\t<br/><br/>Global command &#58;<br/><br/>command &lt;give #@thing# to #@destinataire#&gt; &#123;<br/>\t\tif &#40; #destinataire# = Livolas &#41; then &#123;<br/>\t\t\tmsg &lt;Livolas thanks you for the #@thing#&#46;&gt;<br/>\t\t\tlose &lt;#@thing#&gt;<br/>\t\t\thide &lt;#@thing#&gt;<br/>\t\t&#125;<br/>\t\telse msg &lt;This person doesn't want this item now&#46;&gt;<br/>\t&#125;<br/><br/><br/>local command, into an object &#40;a cat&#41;&#58;<br/><br/><br/>\t\tgive &lt;sweet&gt; &#123;<br/>\t\tsay &lt;Rhooooo&gt;<br/>\t\tmsg &lt;The cat takes your sweet&gt;<br/>\t\tlose &lt;sweet&gt;<br/>\t\thide &lt;sweet&gt;<br/>\t\t&#125;<br/></code></pre><br/><br/>I wanted something that could tell the local \"give\" command to override the global one. Is it possible ? I found a way to make my command work locally, but I had to adapt it to the global command, and I prefered to do it in the local command. Why ? This way if I want to give something else to an other character, I don't need to modify the global command. And I can also consider including all my glocal commands to a library I could re-use later for another game...<br/><br/><br/><pre><code><br/>\tcommand &lt;give #@thing# to #@destinataire#&gt; &#123;<br/>\t\tif &#40; #destinataire# = Livolas &#41; then &#123;<br/>\t\t\tmsg &lt;Livolas thanks you for the #@thing#&#46;&gt;<br/>\t\t\tlose &lt;#@thing#&gt;<br/>\t\t\thide &lt;#@thing#&gt;<br/>\t\t&#125;<br/>\t\telse &#123;<br/>\t\tif &#40; #destinataire# = cat &#41; and &#40; #@thing# = sweet &#41; then doaction &lt;cat; give_sweet&gt;<br/>\t\telse msg &lt;This person doesn't want this item now&#46;&gt;<br/>\t\t&#125;<br/><br/>\t&#125;<br/><br/><br/>and in the local object<br/><br/>\t\taction &lt;give_sweet&gt; do &#123;<br/>\t\tsay &lt;Rhooooo&gt;<br/>\t\tmsg &lt;The cat takes your sweet&#46;&gt;<br/>\t\tlose &lt;sweet&gt;<br/>\t\thide &lt;sweet&gt;<br/>\t\t&#125;<br/></code></pre>",
      "PostDate": "2004-07-08T21:41:17+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "2863",
      "UserId": 0,
      "Username": "Anonymous",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi Favardin\n\nI think you are looking for 'the hard way' to do this!  You really only need to code a command for the special case ('Livolas' in your example), and let Quest's built in commands take care of the rest.\n\nHowever if you override a 'give' you DO need to check your player actually has the item he's trying to give away or you'll find he can give away stuff he hasn't even [b:geot71pb]seen[/b:geot71pb] yet. let alone isn't holding! Oops!\n\nI've coded up an example see below:\n\nNotice I've coded the global catch all to only catch 'give' if it relates to Livolas - this is I think what you wanted to do <!-- s:-) --><img src=\"{SMILIES_PATH}/icon_e_smile.gif\" alt=\":-)\" title=\"Smile\" /><!-- s:-) --> I also put the 'actions' inside a check that the player actually HAS the thng he's trying to give to Livolas, if he doesn't it just calls a regular Quest give (which says you haven't got that).\n\nDone this way a local give in the 'boss' object isn't caught by the global command - I think this gives the effect you are after ..\n\n[code:geot71pb]\n' Quest 3&#46;5 ASL Template\n\n\ndefine game &lt;Game Name&gt;\n\n\tasl-version &lt;350&gt;\n\t\n\tgametype singleplayer\n\t\n\tgame version &lt;1&#46;0&gt;\n\tgame author &lt;Your Name&gt;\n\tgame copyright &lt;Â© 2004 &#46;&#46;&#46;&gt;\n\tgame info &lt;Enter any additional information about this game here&#46;&gt;\n\t\n\tstart &lt;Start Room&gt;\n\n\tcommand &lt;give #@thing# to Livolas&gt; &#123;\n\t\tif &#40;$locationof&#40;#thing#&#41;$ = inventory&#41; then &#123;\n\t\t\tmsg &lt;Cheers dude, just what I always wanted!&gt;\n\t\t\tlose &lt;#thing#&gt;\n\t\t\thide &lt;#thing#&gt;\n\t\t&#125;\n\t\telse exec &lt;#quest&#46;originalcommand#;normal&gt;\n    &#125;\n\t\nend define\n\ndefine room &lt;Start Room&gt;\n\n\tlook &lt;Description Goes Here&gt;\n\t\n\tdefine object &lt;widget&gt;\n\t\tlook &lt;a widget&gt;\n\t\ttake\n\tend define\n\n\tdefine object &lt;Livolas&gt;\n\t\tlook &lt;it's Livolas&gt;\n\t\tdisplaytype &lt;geezer&gt;\n\tend define\n\n\tdefine object &lt;boss&gt;\n\t\tlook &lt;the Boss&gt;\n\t\tdisplaytype &lt;geezer&gt;\n\t\tgive &lt;widget&gt; &#123;\n\t\t\tmsg &lt;Why the hell would I want that - clear off!&gt;\t\n\t\t&#125;\n\tend define\n\t\nend define\n\n\ndefine text &lt;intro&gt;\nEnter intro text here\nend define\n\ndefine text &lt;win&gt;\nEnter win text here\nend define\n\ndefine text &lt;lose&gt;\nEnter lose text here\nend define\n[/code:geot71pb]\n\nCut n paste this example and then run it - Take the widget (you can't give things you are not holding) and try giving it to either \"geezer\". You should find that it works as you require.\n\nHope this helps\n\nAl (MaDbRiT)",
      "EditableFormat": "bbcode",
      "HTML": "Hi Favardin<br/><br/>I think you are looking for 'the hard way' to do this!  You really only need to code a command for the special case ('Livolas' in your example), and let Quest's built in commands take care of the rest.<br/><br/>However if you override a 'give' you DO need to check your player actually has the item he's trying to give away or you'll find he can give away stuff he hasn't even <span style=\"font-weight:bold;\">seen</span> yet. let alone isn't holding! Oops!<br/><br/>I've coded up an example see below:<br/><br/>Notice I've coded the global catch all to only catch 'give' if it relates to Livolas - this is I think what you wanted to do <!-- s:-) --><img src=\"{SMILIES_PATH}/icon_e_smile.gif\" alt=\":-)\" title=\"Smile\" /><!-- s:-) --> I also put the 'actions' inside a check that the player actually HAS the thng he's trying to give to Livolas, if he doesn't it just calls a regular Quest give (which says you haven't got that).<br/><br/>Done this way a local give in the 'boss' object isn't caught by the global command - I think this gives the effect you are after ..<br/><br/><pre><code><br/>' Quest 3&#46;5 ASL Template<br/><br/><br/>define game &lt;Game Name&gt;<br/><br/>\tasl-version &lt;350&gt;<br/>\t<br/>\tgametype singleplayer<br/>\t<br/>\tgame version &lt;1&#46;0&gt;<br/>\tgame author &lt;Your Name&gt;<br/>\tgame copyright &lt;Â© 2004 &#46;&#46;&#46;&gt;<br/>\tgame info &lt;Enter any additional information about this game here&#46;&gt;<br/>\t<br/>\tstart &lt;Start Room&gt;<br/><br/>\tcommand &lt;give #@thing# to Livolas&gt; &#123;<br/>\t\tif &#40;$locationof&#40;#thing#&#41;$ = inventory&#41; then &#123;<br/>\t\t\tmsg &lt;Cheers dude, just what I always wanted!&gt;<br/>\t\t\tlose &lt;#thing#&gt;<br/>\t\t\thide &lt;#thing#&gt;<br/>\t\t&#125;<br/>\t\telse exec &lt;#quest&#46;originalcommand#;normal&gt;<br/>    &#125;<br/>\t<br/>end define<br/><br/>define room &lt;Start Room&gt;<br/><br/>\tlook &lt;Description Goes Here&gt;<br/>\t<br/>\tdefine object &lt;widget&gt;<br/>\t\tlook &lt;a widget&gt;<br/>\t\ttake<br/>\tend define<br/><br/>\tdefine object &lt;Livolas&gt;<br/>\t\tlook &lt;it's Livolas&gt;<br/>\t\tdisplaytype &lt;geezer&gt;<br/>\tend define<br/><br/>\tdefine object &lt;boss&gt;<br/>\t\tlook &lt;the Boss&gt;<br/>\t\tdisplaytype &lt;geezer&gt;<br/>\t\tgive &lt;widget&gt; &#123;<br/>\t\t\tmsg &lt;Why the hell would I want that - clear off!&gt;\t<br/>\t\t&#125;<br/>\tend define<br/>\t<br/>end define<br/><br/><br/>define text &lt;intro&gt;<br/>Enter intro text here<br/>end define<br/><br/>define text &lt;win&gt;<br/>Enter win text here<br/>end define<br/><br/>define text &lt;lose&gt;<br/>Enter lose text here<br/>end define<br/></code></pre><br/><br/>Cut n paste this example and then run it - Take the widget (you can't give things you are not holding) and try giving it to either \"geezer\". You should find that it works as you require.<br/><br/>Hope this helps<br/><br/>Al (MaDbRiT)",
      "PostDate": "2004-07-09T07:05:37+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "2867",
      "UserId": 0,
      "Username": "Anonymous",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you very much, it's what I wanted !\n\nI needed to know \"    else exec &lt;#quest.originalcommand#;normal&gt;\"\n\nIt's my fault, I should have read it in the manual, I looked in the index for \"command\" but couldn't find anything relevant. I really should read the manual completely, and it's a while I coded with asl...\n\nthank you again. It's nice you didn't answered with \"RTFM\" <!-- s:) --><img src=\"{SMILIES_PATH}/icon_e_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "Thank you very much, it's what I wanted !<br/><br/>I needed to know \"    else exec &lt;#quest.originalcommand#;normal&gt;\"<br/><br/>It's my fault, I should have read it in the manual, I looked in the index for \"command\" but couldn't find anything relevant. I really should read the manual completely, and it's a while I coded with asl...<br/><br/>thank you again. It's nice you didn't answered with \"RTFM\" <!-- s:) --><img src=\"{SMILIES_PATH}/icon_e_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2004-07-09T12:43:07+01:00",
      "LastEditDate": null
    }
  ]
}
