{
  "Topic": {
    "TopicId": "euihy3g6rkuhpmqm8nxfra",
    "ForumId": "10",
    "Title": "Create new verbs for npc",
    "LastUpdated": "2021-06-13T19:42:53.687802Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "ec07ef80-7c8d-438f-9a33-af68f934c561",
      "UserId": 301405,
      "Username": "CheshireTiger",
      "AvatarUrl": "https://i.imgur.com/dGwXAqub.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Like if you ask for permisikn to hug during part of its 'speak to' script, it makes a new verb for the npc object.",
      "EditableFormat": "markdown",
      "HTML": "<p>Like if you ask for permisikn to hug during part of its 'speak to' script, it makes a new verb for the npc object.</p>\n\n",
      "PostDate": "2021-06-13T19:42:53.687802Z",
      "LastEditDate": "2021-06-13T19:43:42.0630236Z",
      "link": null
    },
    {
      "PostId": "80ba74cb-f404-4af9-8941-f6ed5505957b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The usual way to do that would be to make the verb to start with, but have it check some flag to see if you have permission, and respond accordingly.\r\n\r\nIf you really want the character not to have the verb initially, you can create it like any other script attribute:\r\n```\r\njohn.hug => {\r\n  msg (\"You hug him. He seems happy.\")\r\n}\r\n```\r\nThis will only work if there is already a verb named \"hug\". In the web editor, a verb is created the first time you give it to any object, and can't be deleted. So you could create the verb and then remove it again, so that you can create it during the game.\r\n\r\nIf you want to make the verb appear in the menu when you click on John, that's a separate thing. You can add it like this:\r\n```\r\nlist add (john.generatedverbslist, \"Hug\")\r\n```\r\nThat just adds it to the menu, and is completely separate from whether he has the verb or not.\r\n\r\nIf you give the character a verb but you want to hide it from the menu, you could put something like this in your start script:\r\n```\r\nGetDisplayVerbs(john)\r\nlist remove (john.generatedverbslist, \"Hug\")\r\n```\r\nand then add it back to the list when you want it to be visible.",
      "EditableFormat": "markdown",
      "HTML": "<p>The usual way to do that would be to make the verb to start with, but have it check some flag to see if you have permission, and respond accordingly.</p>\n<p>If you really want the character not to have the verb initially, you can create it like any other script attribute:</p>\n<pre><code>john.hug =&gt; {\n  msg (\"You hug him. He seems happy.\")\n}\n</code></pre>\n<p>This will only work if there is already a verb named \"hug\". In the web editor, a verb is created the first time you give it to any object, and can't be deleted. So you could create the verb and then remove it again, so that you can create it during the game.</p>\n<p>If you want to make the verb appear in the menu when you click on John, that's a separate thing. You can add it like this:</p>\n<pre><code>list add (john.generatedverbslist, \"Hug\")\n</code></pre>\n<p>That just adds it to the menu, and is completely separate from whether he has the verb or not.</p>\n<p>If you give the character a verb but you want to hide it from the menu, you could put something like this in your start script:</p>\n<pre><code>GetDisplayVerbs(john)\nlist remove (john.generatedverbslist, \"Hug\")\n</code></pre>\n<p>and then add it back to the list when you want it to be visible.</p>\n\n",
      "PostDate": "2021-06-13T19:57:05.8810085Z",
      "LastEditDate": "2021-06-14T09:26:31.0108957Z",
      "link": null
    },
    {
      "PostId": "b00d35b9-13d6-45cd-962d-86bc953f3f8b",
      "UserId": 301405,
      "Username": "CheshireTiger",
      "AvatarUrl": "https://i.imgur.com/dGwXAqub.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So im going to try putting hug as a verb on npc and putting that 'list remove' as an instalation script with an if to 'list add'....\r\n\r\nEdit: that dosent hide the verb from in-game menu...",
      "EditableFormat": "markdown",
      "HTML": "<p>So im going to try putting hug as a verb on npc and putting that 'list remove' as an instalation script with an if to 'list add'....</p>\n<p>Edit: that dosent hide the verb from in-game menu...</p>\n\n",
      "PostDate": "2021-06-14T01:39:22.8812231Z",
      "LastEditDate": "2021-06-14T01:56:00.8293773Z",
      "link": null
    },
    {
      "PostId": "a6445379-e915-405c-b6da-a45b11fb05d3",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Each object in game has a displayverbs list and an inventoryverbs list.\r\n\r\nYou can change a npc's displayverbs list and inventory verbs list.\r\n```\r\nnpc.displayverbs = Split(\"Look at;Speak To\", \";\")\r\nnpc.displayverbs = Split(\"Look at;Speak To;Hug\", \";\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Each object in game has a displayverbs list and an inventoryverbs list.</p>\n<p>You can change a npc's displayverbs list and inventory verbs list.</p>\n<pre><code>npc.displayverbs = Split(\"Look at;Speak To\", \";\")\nnpc.displayverbs = Split(\"Look at;Speak To;Hug\", \";\")\n</code></pre>\n\n",
      "PostDate": "2021-06-14T02:48:08.9864875Z",
      "LastEditDate": "2021-06-14T02:53:30.4571587Z",
      "link": null
    },
    {
      "PostId": "57e4ec3f-2fbd-4615-ad85-ce0b052acb4b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "There are 3 separate lists of verbs.\r\n\r\n* `displayverbs` and `inventoryverbs` can be changed in the editor\r\n     * `inventoryverbs` is for objects in the inventory, and `displayverbs` for objects that aren't\r\n* `generatedverbslist` contains all the verbs on the object's \"Verbs\" tab.\r\n\r\nWhich of these lists is used in the menu will depend on your settings:\r\n* If you choose \"Disable automatically generated display verb list for this object\" for the object, or disable \"Automatically generate object display verbs list\" for the game, it will only use `displayverbs` and `inventoryverbs`.\r\n* If you select \"Only display verbs from this object's Verbs tab\" for the object it will only use `generatedverbslist`.\r\n* Otherwise it will combine both lists.\r\n\r\nSo you need to look at which options you have chosen, and see which lists \"hug\" is on. You can use it to remove it from the list initially, and add it again once the verb is enabled.\r\n\r\nBut sometimes using `list add` and `list remove` on these lists won't work.\r\n* `generatedverbslist` is only created when it is needed. If you want to change the menu before the player sees the object, you will need to run the `GetDisplayVerbs` command first (as I showed in my example above)\r\n* Because of the way inheritance works in Quest, if `displayverbs` and `inventoryverbs` haven't been modified in the editor, you will need to do the line `object.displayverbs = object.displayverbs` before you can add or remove items.\r\n\r\nIf that doesn't help, could you share your game (on this website, or on pastebin) so we can take a look at the code? It's easier to work out what the problem is if I can see your code.",
      "EditableFormat": "markdown",
      "HTML": "<p>There are 3 separate lists of verbs.</p>\n<ul>\n<li><code>displayverbs</code> and <code>inventoryverbs</code> can be changed in the editor\n<ul>\n<li><code>inventoryverbs</code> is for objects in the inventory, and <code>displayverbs</code> for objects that aren't</li>\n</ul>\n</li>\n<li><code>generatedverbslist</code> contains all the verbs on the object's \"Verbs\" tab.</li>\n</ul>\n<p>Which of these lists is used in the menu will depend on your settings:</p>\n<ul>\n<li>If you choose \"Disable automatically generated display verb list for this object\" for the object, or disable \"Automatically generate object display verbs list\" for the game, it will only use <code>displayverbs</code> and <code>inventoryverbs</code>.</li>\n<li>If you select \"Only display verbs from this object's Verbs tab\" for the object it will only use <code>generatedverbslist</code>.</li>\n<li>Otherwise it will combine both lists.</li>\n</ul>\n<p>So you need to look at which options you have chosen, and see which lists \"hug\" is on. You can use it to remove it from the list initially, and add it again once the verb is enabled.</p>\n<p>But sometimes using <code>list add</code> and <code>list remove</code> on these lists won't work.</p>\n<ul>\n<li><code>generatedverbslist</code> is only created when it is needed. If you want to change the menu before the player sees the object, you will need to run the <code>GetDisplayVerbs</code> command first (as I showed in my example above)</li>\n<li>Because of the way inheritance works in Quest, if <code>displayverbs</code> and <code>inventoryverbs</code> haven't been modified in the editor, you will need to do the line <code>object.displayverbs = object.displayverbs</code> before you can add or remove items.</li>\n</ul>\n<p>If that doesn't help, could you share your game (on this website, or on pastebin) so we can take a look at the code? It's easier to work out what the problem is if I can see your code.</p>\n\n",
      "PostDate": "2021-06-14T09:26:03.5968562Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bfea0d78-ba29-4b24-8c38-b67353eaf96d",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Just realised there was a typo in my first post above. It should be `Hug`, not `hug`, in the verbs list. The remove command will only work if you type the verb exactly the same.\r\n\r\nThe hazards of typing on my phone. Sorry about that.\r\nI would have expected that to give an error when the game starts, saying that `hug` isn't in the list…  that would have made it easier to spot the problem.",
      "EditableFormat": "markdown",
      "HTML": "<p>Just realised there was a typo in my first post above. It should be <code>Hug</code>, not <code>hug</code>, in the verbs list. The remove command will only work if you type the verb exactly the same.</p>\n<p>The hazards of typing on my phone. Sorry about that.<br>\nI would have expected that to give an error when the game starts, saying that <code>hug</code> isn't in the list…  that would have made it easier to spot the problem.</p>\n\n",
      "PostDate": "2021-06-14T09:28:33.1239929Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9df8d642-c683-48e1-8705-3d2cc1dbba02",
      "UserId": 301405,
      "Username": "CheshireTiger",
      "AvatarUrl": "https://i.imgur.com/dGwXAqub.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I got 'only display from verbs tab' on\r\n\r\nSo i need to do\r\n\r\n    GetDisplayVerbs(john)\r\n    list remove (john.generatedverbslist, \"Hug\")\r\nWhere though? At start of game? Or on the npc?\r\n\r\nThen\r\n\r\n    list add (john.generatedverblist, \"Hug\")\r\nAt the point where it want it available?\r\n\r\nEdit: putting quotes around Hug in  lisd add seems to cause internal error...",
      "EditableFormat": "markdown",
      "HTML": "<p>I got 'only display from verbs tab' on</p>\n<p>So i need to do</p>\n<pre><code>GetDisplayVerbs(john)\nlist remove (john.generatedverbslist, \"Hug\")\n</code></pre>\n<p>Where though? At start of game? Or on the npc?</p>\n<p>Then</p>\n<pre><code>list add (john.generatedverblist, \"Hug\")\n</code></pre>\n<p>At the point where it want it available?</p>\n<p>Edit: putting quotes around Hug in  lisd add seems to cause internal error...</p>\n\n",
      "PostDate": "2021-06-14T15:49:56.9611765Z",
      "LastEditDate": "2021-06-14T16:01:39.2362592Z",
      "link": null
    },
    {
      "PostId": "67b0a70e-0e03-4e71-9168-387ae0d312b7",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Where though? At start of game? Or on the npc?\r\n\r\nAny time before the player gets a chance to see the menu. The start of the game is usually a good choice.\r\n\r\n> Edit: putting quotes around Hug in lisd add seems to cause internal error...\r\n\r\nAnd that should work. Can you show us the game so we can see what the problem is?\r\nDoes it just say internal error; no more detailed message?",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Where though? At start of game? Or on the npc?</p>\n</blockquote>\n<p>Any time before the player gets a chance to see the menu. The start of the game is usually a good choice.</p>\n<blockquote>\n<p>Edit: putting quotes around Hug in lisd add seems to cause internal error...</p>\n</blockquote>\n<p>And that should work. Can you show us the game so we can see what the problem is?<br>\nDoes it just say internal error; no more detailed message?</p>\n\n",
      "PostDate": "2021-06-14T19:10:09.0359351Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c582ccb6-ef94-4f35-8ebb-ff668b3c5712",
      "UserId": 301405,
      "Username": "CheshireTiger",
      "AvatarUrl": "https://i.imgur.com/dGwXAqub.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I am hesitant to link to game as it has NSFW elements...\r\n\r\nSo i'll just copy/paste relevant parts of codeview \r\n\r\nAs npc object's only installation script:\r\n\r\n    GetDisplayVerbs (Mayuri)\r\n    list remove (Mayuri.generatedverblist, \"comply\")\r\n\r\nAt a point during talk to spript (glossing over a few other scripts that work without error and have no intended effect on npc verb list)\r\n\r\n    list add (Mayuri.generatedverblist, comply)\r\n\r\n\r\nThis results in an error in game :\r\n\"Unrecognized list type\"\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I am hesitant to link to game as it has NSFW elements...</p>\n<p>So i'll just copy/paste relevant parts of codeview</p>\n<p>As npc object's only installation script:</p>\n<pre><code>GetDisplayVerbs (Mayuri)\nlist remove (Mayuri.generatedverblist, \"comply\")\n</code></pre>\n<p>At a point during talk to spript (glossing over a few other scripts that work without error and have no intended effect on npc verb list)</p>\n<pre><code>list add (Mayuri.generatedverblist, comply)\n</code></pre>\n<p>This results in an error in game :<br>\n\"Unrecognized list type\"</p>\n\n",
      "PostDate": "2021-06-15T17:04:08.3202985Z",
      "LastEditDate": "2021-06-15T17:13:44.1416343Z",
      "link": null
    },
    {
      "PostId": "39292384-3bbe-4938-bf2c-9becb8bfd155",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The name is <code>generatedverb<u><b>s</b></u>list</code>. It seems illogical to me, but that's what Quest names it.\r\n\r\nDoes that work any better?\r\n\r\nThe verbs that are automatically added by running `GetDisplayVerbs` will usually have the first letter capitalised. So I think you need the initialisation script to be:\r\n```\r\nGetDisplayVerbs (Mayuri)\r\nlist remove (Mayuri.generatedverbslist, \"Comply\")\r\n```\r\nand the later script:\r\n```\r\nlist add (Mayuri.generatedverbslist, \"Comply\")\r\n```\r\n\r\nIn the second case, you could put `comply` rather than `Comply`, and it will appear that way on the menu.\r\nIn the first case, putting `comply` will not remove anything because that's not what's on the list.\r\n\r\nYou do need to remember the quotes.",
      "EditableFormat": "markdown",
      "HTML": "<p>The name is <code>generatedverb<u><b>s</b></u>list</code>. It seems illogical to me, but that's what Quest names it.</p>\n<p>Does that work any better?</p>\n<p>The verbs that are automatically added by running <code>GetDisplayVerbs</code> will usually have the first letter capitalised. So I think you need the initialisation script to be:</p>\n<pre><code>GetDisplayVerbs (Mayuri)\nlist remove (Mayuri.generatedverbslist, \"Comply\")\n</code></pre>\n<p>and the later script:</p>\n<pre><code>list add (Mayuri.generatedverbslist, \"Comply\")\n</code></pre>\n<p>In the second case, you could put <code>comply</code> rather than <code>Comply</code>, and it will appear that way on the menu.<br>\nIn the first case, putting <code>comply</code> will not remove anything because that's not what's on the list.</p>\n<p>You do need to remember the quotes.</p>\n\n",
      "PostDate": "2021-06-15T17:22:13.3133545Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7c27a902-e096-4488-b64d-fc39d46fe9ac",
      "UserId": 301405,
      "Username": "CheshireTiger",
      "AvatarUrl": "https://i.imgur.com/dGwXAqub.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Just tried that, internal error after changing the later script with quotes \r\n\r\nIll try that npc.displayverbs thing since i dont want the player to carry npc like piggyback ride.",
      "EditableFormat": "markdown",
      "HTML": "<p>Just tried that, internal error after changing the later script with quotes</p>\n<p>Ill try that npc.displayverbs thing since i dont want the player to carry npc like piggyback ride.</p>\n\n",
      "PostDate": "2021-06-15T17:50:40.2854786Z",
      "LastEditDate": "2021-06-15T18:29:06.0795972Z",
      "link": null
    },
    {
      "PostId": "7d360d5c-0c8e-4d97-9cbf-38a86955335c",
      "UserId": 301405,
      "Username": "CheshireTiger",
      "AvatarUrl": "https://i.imgur.com/dGwXAqub.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "    Mayuri.displayverbs = Split(\"Look at;Speak To;Comply\", \";\")\r\n\r\nIsnt working either?",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>Mayuri.displayverbs = Split(\"Look at;Speak To;Comply\", \";\")\n</code></pre>\n<p>Isnt working either?</p>\n\n",
      "PostDate": "2021-06-15T21:11:03.1961819Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
