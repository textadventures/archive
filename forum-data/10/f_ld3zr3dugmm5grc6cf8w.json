{
  "Topic": {
    "TopicId": "f_ld3zr3dugmm5grc6cf8w",
    "ForumId": "10",
    "Title": "My game is in serious trouble.",
    "LastUpdated": "2017-09-21T20:55:09.8151069Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "45950751-d13b-4f5c-864a-5b1a30314d1f",
      "UserId": 307193,
      "Username": "lordpalandus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/637feacf8e8a52834eaa284e96f879bf?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I do not know what I did wrong, but my script keeps posting \"Failed to load script\" for my buy command... a command I spent about 3 weeks designing and developing. \r\n\r\nI was adding some new spells to it, via the UI and not code view; everything seemed to be going fine. I managed to add new spells to my 1st to 6th tier, without a problem. When I went to implement my 7th tier, things were going good. When I was halfway done with my 7th tier, I saved it and everything was good. When I finished off my 7th tier, I got this error. I went into code view didn't see anything wrong, but have been getting the occasional weird error with quest and exiting the program and launching it again would usually fix the issue. It didn't with this. \r\n\r\nI tried copying the code (by looking at in in code view) to text file, and then deleting the entire buy command, and recreated the command and copied the code over. Didn't fix it.\r\n\r\nI tried deleting the three spells I added before the command borked. Didn't fix it.\r\n\r\nI tried deleting the entire 7th tier; didn't fix it.\r\n\r\nI've been able to produce updates for my game every 3-5 days and my players are quite happy. However, if I have to rebuild my entire buy command from scratch... its either going to delay me 2-4 weeks to build a new one, or I dunno. This kind of error really kills my drive to keep working on the game. I've checked over the code myself and cannot find an issue with it. I'll post the code below, for anyone who wishes to see if they can figure out the issue. The majority of the code complies fine, but there must be something I did wrong in my spell purchasing code. It may be that I simply reached an operational limit in the Quest engine for the number of nested ifs, switches, and get inputs.\r\n\r\nHere is the code: (it lacks the 7th tier)\r\n\r\n```      if ((player.DepthLevel = 0) or (GetBoolean(player, \"Shrine\"))) {\r\n        if (GetBoolean(player, \"RoomEmpty\")) {\r\n          switch (text) {\r\n            case (\"consumables\") {\r\n              msg (\"Would you like to purchase (<b>healing</b>) potions, (<b>mana</b>) potions, enchanting (<b>orbs</b>), or \r\n\r\nenhancement (<b>kits</b>).\")\r\n              get input {\r\n                switch (result) {\r\n                  case (\"healing\") {\r\n                    msg (\"How many healing potions would you like to purchase; please enter a number. <b>Price per is 50.</b>\")\r\n                    get input {\r\n                      Satchel.TempValue = toint(result)\r\n                      if ((player.SoulShards) > (Satchel.TempValue * 50 - 1)) {\r\n                        Satchel.HealingPotions = Satchel.HealingPotions + Satchel.TempValue\r\n                        player.SoulShards = player.SoulShards - (Satchel.TempValue * 50)\r\n                        msg (\"</br>You buy \" + Satchel.TempValue + \" healing potion[s].\")\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (Satchel.TempValue * 50) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"mana\") {\r\n                    msg (\"How many mana potions would you like to purchase; please enter a number. <b>Price per is 50.</b>\")\r\n                    get input {\r\n                      Satchel.TempValue = toint(result)\r\n                      if ((player.SoulShards) > (Satchel.TempValue * 50 - 1)) {\r\n                        Satchel.ManaPotions = Satchel.ManaPotions + Satchel.TempValue\r\n                        player.SoulShards = player.SoulShards - (Satchel.TempValue * 50)\r\n                        msg (\"</br>You buy \" + Satchel.TempValue + \" mana potion[s].\")\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (Satchel.TempValue * 50) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"orbs\") {\r\n                    msg (\"How many enchanting orbs would you like to purchase; please enter a number. <b>Price per is 500.</b>\")\r\n                    get input {\r\n                      Satchel.TempValue = toint(result)\r\n                      if ((player.SoulShards) > (Satchel.TempValue * 500 - 1)) {\r\n                        Satchel.EnchantingOrbs = Satchel.EnchantingOrbs + Satchel.TempValue\r\n                        player.SoulShards = player.SoulShards - (Satchel.TempValue * 500)\r\n                        msg (\"</br>You buy \" + Satchel.TempValue + \" enchanting orb[s].\")\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (Satchel.TempValue * 500) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"kits\") {\r\n                    msg (\"How many enhancement kits would you like to purchase; please enter a number. <b>Price per is \r\n\r\n250.</b>\")\r\n                    get input {\r\n                      Satchel.TempValue = toint(result)\r\n                      if ((player.SoulShards) > (Satchel.TempValue * 250 - 1)) {\r\n                        Satchel.EnhancementKits = Satchel.EnhancementKits + Satchel.TempValue\r\n                        player.SoulShards = player.SoulShards - (Satchel.TempValue * 250)\r\n                        msg (\"</br>You buy \" + Satchel.TempValue + \" enhancement kit[s].\")\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (Satchel.TempValue * 250) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            case (\"training\") {\r\n              msg (\"Your current XP values are:<br/>\")\r\n              msg (\"Strength = \" + player.StrengthTraining + \"; Agility = \" + player.AgilityTraining + \"; Vitality = \" + \r\n\r\nplayer.VitalityTraining + \".\")\r\n              msg (\"Intellect = \" + player.IntellectTraining + \", Willpower = \" + player.WillpowerTraining + \", Perception = \" + \r\n\r\nplayer.PerceptionTraining + \", and Luck = \" + player.LuckTraining + \".\")\r\n              msg (\"<br/>A <u>bout</u> of training provides 100 XP for 100 soul shards.<br/>How many <u>bouts</u> of training do \r\n\r\nyou want to have; please enter a number?<br/>\")\r\n              get input {\r\n                Satchel.TempValue = toint(result)\r\n                if (Satchel.TempValue > 0) {\r\n                  if (player.SoulShards > ((Satchel.TempValue * 100) - 1)) {\r\n                    msg (\"Which attribute will you apply this training to?<br/>(<b>strength</b>), (<b>agility</b>), \r\n\r\n(<b>vitality</b>), (<b>intellect</b>), (<b>willpower</b>), (<b>perception</b>), or (<b>luck</b>)\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"strength\") {\r\n                          msg (\"<br/>You acquire \" + Satchel.TempValue + \" bouts of strength training.\")\r\n                          player.StrengthTraining = player.StrengthTraining + (Satchel.TempValue * 100)\r\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\r\n                        }\r\n                        case (\"agility\") {\r\n                          msg (\"<br/>You acquire \" + Satchel.TempValue + \" bouts of agility training.\")\r\n                          player.AgilityTraining = player.AgilityTraining + (Satchel.TempValue * 100)\r\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\r\n                        }\r\n                        case (\"vitality\") {\r\n                          msg (\"<br/>You acquire \" + Satchel.TempValue + \" bouts of vitality training.\")\r\n                          player.VitalityTraining = player.VitalityTraining + (Satchel.TempValue * 100)\r\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\r\n                        }\r\n                        case (\"intellect\") {\r\n                          msg (\"<br/>You acquire \" + Satchel.TempValue + \" bouts of intellect training.\")\r\n                          player.IntellectTraining = player.IntellectTraining + (Satchel.TempValue * 100)\r\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\r\n                        }\r\n                        case (\"willpower\") {\r\n                          msg (\"<br/>You acquire \" + Satchel.TempValue + \" bouts of willpower training.\")\r\n                          player.WillpowerTraining = player.WillpowerTraining + (Satchel.TempValue * 100)\r\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\r\n                        }\r\n                        case (\"perception\") {\r\n                          msg (\"<br/>You acquire \" + Satchel.TempValue + \" bouts of perception training.\")\r\n                          player.PerceptionTraining = player.PerceptionTraining + (Satchel.TempValue * 100)\r\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\r\n                        }\r\n                        case (\"luck\") {\r\n                          msg (\"<br/>You acquire \" + Satchel.TempValue + \" bouts of luck training.\")\r\n                          player.LuckTraining = player.LuckTraining + (Satchel.TempValue * 100)\r\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"\\\"You don't have enough soul shards. You only have \\\" + player.SoulShards + \\\" soul shards. You need \r\n\r\n\\\" + (Satchel.TempValue * 100) + \\\" soul shards!\\\"\")\r\n                  }\r\n                }\r\n                else {\r\n                  msg (\"You decide to not do any training.\")\r\n                }\r\n              }\r\n              msg (\"\")\r\n              // First check if player has sufficient SS.\r\n              // Then ask which attribute to apply training to, if you have the SS.\r\n              // Satchel.TempValue used so that I don't need to have another temporary value.\r\n            }\r\n            case (\"weapons\") {\r\n              msg (\"Which weapon would you like to purchase; the price is in the [ ]? <br/><br/>(<b>dagger</b>) [1 SS]<br/>\r\n\r\n(<b>shortsword</b>) [100 SS]<br/>(<b>longsword</b>) [200 SS]<br/>(<b>staff</b>) [200 SS]<br/>(<b>greatsword</b>) [400 SS]\")\r\n              get input {\r\n                switch (result) {\r\n                  case (\"dagger\") {\r\n                    if (ListContains(ScopeVisible(), WeaponDagger)) {\r\n                      msg (\"You already own a dagger.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 0) {\r\n                        msg (\"<br/>You purchase a dagger.\")\r\n                        player.SoulShards = player.SoulShards - 1\r\n                        AddToInventory (WeaponDagger)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (1) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"shortsword\") {\r\n                    if (ListContains(ScopeVisible(), WeaponShortsword)) {\r\n                      msg (\"You already own a shortsword.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 99) {\r\n                        msg (\"<br/>You purchase a shortsword.\")\r\n                        player.SoulShards = player.SoulShards - 100\r\n                        AddToInventory (WeaponShortsword)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (100) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"longsword\") {\r\n                    if (ListContains(ScopeVisible(), WeaponLongsword)) {\r\n                      msg (\"You already own a longsword.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 199) {\r\n                        msg (\"<br/>You purchase a longsword.\")\r\n                        player.SoulShards = player.SoulShards - 200\r\n                        AddToInventory (WeaponLongsword)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (200) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"greatsword\") {\r\n                    if (ListContains(ScopeVisible(), WeaponGreatsword)) {\r\n                      msg (\"You already own a greatsword.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 399) {\r\n                        msg (\"<br/>You purchase a greatsword.\")\r\n                        player.SoulShards = player.SoulShards - 400\r\n                        AddToInventory (WeaponGreatsword)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (400) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"staff\") {\r\n                    if (ListContains(ScopeVisible(), WeaponStaff)) {\r\n                      msg (\"You already own a staff.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 199) {\r\n                        msg (\"<br/>You purchase a staff.\")\r\n                        player.SoulShards = player.SoulShards - 200\r\n                        AddToInventory (WeaponStaff)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (200) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  default {\r\n                    msg (\"You decide to not purchase any weapons today.\")\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            case (\"armors\") {\r\n              msg (\"Which armor would you like to purchase; the price is in the [ ]? <br/>(<b>robes</b>) [1 SS]<br/>\r\n\r\n(<b>leather</b>) [100 SS]<br/>(<b>chainmail</b>) [200 SS]<br/>(<b>platemail</b>) [400 SS]<br/>(<b>leather spikes</b>) [1000 \r\n\r\nSS]<br/>(<b>chainmail spikes</b>) [1000 SS]<br/>(<b>platemail spikes</b>) [1000 SS]\")\r\n              get input {\r\n                switch (result) {\r\n                  case (\"robes\") {\r\n                    if (ListContains(ScopeVisible(), ArmorRobes)) {\r\n                      msg (\"You already own robes.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 0) {\r\n                        msg (\"<br/>You purchase robes.\")\r\n                        player.SoulShards = player.SoulShards - 1\r\n                        AddToInventory (ArmorRobes)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (1) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"leather\") {\r\n                    if (ListContains(ScopeVisible(), ArmorLeather)) {\r\n                      msg (\"You already own leather armor.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 99) {\r\n                        msg (\"<br/>You purchase leather armor.\")\r\n                        player.SoulShards = player.SoulShards - 100\r\n                        AddToInventory (ArmorLeather)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (100) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"chainmail\") {\r\n                    if (ListContains(ScopeVisible(), ArmorChainmail)) {\r\n                      msg (\"You already own chainmail armor.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 199) {\r\n                        msg (\"<br/>You purchase chainmail armor.\")\r\n                        player.SoulShards = player.SoulShards - 200\r\n                        AddToInventory (ArmorChainmail)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (200) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"platemail\") {\r\n                    if (ListContains(ScopeVisible(), ArmorPlatemail)) {\r\n                      msg (\"You already own platemail armor.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 399) {\r\n                        msg (\"<br/>You purchase platemail armor.\")\r\n                        player.SoulShards = player.SoulShards - 400\r\n                        AddToInventory (ArmorPlatemail)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (400) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"leather spikes\") {\r\n                    if (ListContains(ScopeVisible(), ArmorLeather)) {\r\n                      if (ArmorLeather.SpikesApplied = true) {\r\n                        msg (\"Your leather armor already has armor spikes!\")\r\n                      }\r\n                      else {\r\n                        if (player.SoulShards > 999) {\r\n                          msg (\"<br/>You purchase armor spikes for your leather armor.\")\r\n                          player.SoulShards = player.SoulShards - 1000\r\n                          ArmorLeather.SpikesApplied = true\r\n                        }\r\n                        else {\r\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \r\n\r\n\" + (1000) + \" soul shards!\")\r\n                        }\r\n                      }\r\n                    }\r\n                    else {\r\n                      msg (\"You aren't carrying leather armor.\")\r\n                    }\r\n                  }\r\n                  case (\"chainmail spikes\") {\r\n                    if (ListContains(ScopeVisible(), ArmorChainmail)) {\r\n                      if (ArmorChainmail.SpikesApplied = true) {\r\n                        msg (\"Your chainmail armor already has armor spikes!\")\r\n                      }\r\n                      else {\r\n                        if (player.SoulShards > 999) {\r\n                          msg (\"<br/>You purchase armor spikes for your chainmail armor.\")\r\n                          player.SoulShards = player.SoulShards - 1000\r\n                          ArmorChainmail.SpikesApplied = true\r\n                        }\r\n                        else {\r\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \r\n\r\n\" + (1000) + \" soul shards!\")\r\n                        }\r\n                      }\r\n                    }\r\n                    else {\r\n                      msg (\"You aren't carrying chainmail armor.\")\r\n                    }\r\n                  }\r\n                  case (\"platemail spikes\") {\r\n                    if (ListContains(ScopeVisible(), ArmorPlatemail)) {\r\n                      if (ArmorPlatemail.SpikesApplied = true) {\r\n                        msg (\"Your platemail armor already has armor spikes!\")\r\n                      }\r\n                      else {\r\n                        if (player.SoulShards > 999) {\r\n                          msg (\"<br/>You purchase armor spikes for your platemail armor.\")\r\n                          player.SoulShards = player.SoulShards - 1000\r\n                          ArmorPlatemail.SpikesApplied = true\r\n                        }\r\n                        else {\r\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \r\n\r\n\" + (1000) + \" soul shards!\")\r\n                        }\r\n                      }\r\n                    }\r\n                    else {\r\n                      msg (\"You aren't carrying platemail armor.\")\r\n                    }\r\n                  }\r\n                  default {\r\n                    msg (\"You decide to not purchase any armors today.\")\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            case (\"spells\") {\r\n              msg (\"Which level of spells would you like to purchase from? (<b>1st</b>), (<b>2nd</b>), (<b>3rd</b>), \r\n\r\n(<b>4th</b>), (<b>5th</b>), (<b>6th</b>), (<b>7th</b>)\")\r\n              get input {\r\n                switch (result) {\r\n                  case (\"1st\") {\r\n                    msg (\"First level spells cost <b>100</b> soul shards each. The first level spells available to purchase \r\n\r\nare:<br/>\")\r\n                    if (Spellbook.KnowMinorHealing = false) {\r\n                      msg (\"Available: (<b>minor healing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMinorAid = false) {\r\n                      msg (\"Available: (<b>minor aid</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowAnalysis = false) {\r\n                      msg (\"Available: (<b>analysis</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMinorRejuvenation = false) {\r\n                      msg (\"Available: (<b>minor rejuvenation</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowArcaneZap = false) {\r\n                      msg (\"Available: (<b>arcane zap</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowFirebolt = false) {\r\n                      msg (\"Available: (<b>firebolt</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"arcane zap\") {\r\n                          if (Spellbook.KnowArcaneZap = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Arcane Zap.\")\r\n                              Spellbook.KnowArcaneZap = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor healing\") {\r\n                          if (Spellbook.KnowMinorHealing = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Minor Healing.\")\r\n                              Spellbook.KnowMinorHealing = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"firebolt\") {\r\n                          if (Spellbook.KnowFirebolt = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Firebolt.\")\r\n                              Spellbook.KnowFirebolt = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor aid\") {\r\n                          if (Spellbook.KnowMinorAid = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Minor Aid.\")\r\n                              Spellbook.KnowMinorAid = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"analysis\") {\r\n                          if (Spellbook.KnowAnalysis = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Analysis.\")\r\n                              Spellbook.KnowAnalysis = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor rejuvenation\") {\r\n                          if (Spellbook.KnowMinorRejuvenation = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Minor Rejuvenation.\")\r\n                              Spellbook.KnowMinorRejuvenation = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"2nd\") {\r\n                    msg (\"Second level spells cost <b>300</b> soul shards each. The second level spells available to purchase \r\n\r\nare:<br/>\")\r\n                    if (Spellbook.KnowMinorBlessing = false) {\r\n                      msg (\"Available: (<b>minor blessing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMinorRegeneration = false) {\r\n                      msg (\"Available: (<b>minor regeneration</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMinorHaste = false) {\r\n                      msg (\"Available: (<b>minor haste</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowRelocate = false) {\r\n                      msg (\"Available: (<b>relocate</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPiercingZap = false) {\r\n                      msg (\"Available: (<b>piercing zap</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowIcyLance = false) {\r\n                      msg (\"Available: (<b>icy lance</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowAcidSpray = false) {\r\n                      msg (\"Available: (<b>acid spray</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"icy lance\") {\r\n                          if (Spellbook.KnowIcyLance = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Icy Lance.\")\r\n                              Spellbook.KnowIcyLance = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor blessing\") {\r\n                          if (Spellbook.KnowMinorBlessing = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Minor Blessing.\")\r\n                              Spellbook.KnowMinorBlessing = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"acid spray\") {\r\n                          if (Spellbook.KnowAcidSpray = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Acid Spray.\")\r\n                              Spellbook.KnowAcidSpray = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"piercing zap\") {\r\n                          if (Spellbook.KnowPiercingZap = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Piercing Zap.\")\r\n                              Spellbook.KnowPiercingZap = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor regeneration\") {\r\n                          if (Spellbook.KnowMinorRegeneration = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Minor Regeneration.\")\r\n                              Spellbook.KnowMinorRegeneration = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"relocate\") {\r\n                          if (Spellbook.KnowRelocate = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Relocate.\")\r\n                              Spellbook.KnowRelocate = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor haste\") {\r\n                          if (Spellbook.KnowMinorHaste = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Minor Haste.\")\r\n                              Spellbook.KnowMinorHaste = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"3rd\") {\r\n                    msg (\"Third level spells cost <b>500</b> soul shards each. The third level spells available to purchase \r\n\r\nare:<br/>\")\r\n                    if (Spellbook.KnowHealing = false) {\r\n                      msg (\"Available: (<b>healing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowSpellPotencyI = false) {\r\n                      msg (\"Available: (<b>spell potency i</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowAid = false) {\r\n                      msg (\"Available: (<b>aid</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowTerrify = false) {\r\n                      msg (\"Available: (<b>terrify</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPiercingLance = false) {\r\n                      msg (\"Available: (<b>piercing lance</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMagicZot = false) {\r\n                      msg (\"Available: (<b>magic zot</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowShockBolt = false) {\r\n                      msg (\"Available: (<b>shock bolt</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"magic zot\") {\r\n                          if (Spellbook.KnowMagicZot = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Magic Zot.\")\r\n                              Spellbook.KnowMagicZot = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"healing\") {\r\n                          if (Spellbook.KnowHealing = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Healing.\")\r\n                              Spellbook.KnowHealing = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"shock bolt\") {\r\n                          if (Spellbook.KnowShockBolt = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Shock Bolt.\")\r\n                              Spellbook.KnowShockBolt = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"piercing lance\") {\r\n                          if (Spellbook.KnowPiercingLance = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Piercing Lance.\")\r\n                              Spellbook.KnowPiercingLance = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"aid\") {\r\n                          if (Spellbook.KnowAid = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Aid.\")\r\n                              Spellbook.KnowAid = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"terrify\") {\r\n                          if (Spellbook.KnowTerrify = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Terrify.\")\r\n                              Spellbook.KnowTerrify = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"spell potency i\") {\r\n                          if (Spellbook.KnowSpellPotencyI = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Spell Potency I.\")\r\n                              Spellbook.KnowSpellPotencyI = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"4th\") {\r\n                    msg (\"Fourth level spells cost <b>700</b> soul shards each. The fourth level spells available to purchase \r\n\r\nare:<br/>\")\r\n                    if (Spellbook.KnowBlessing = false) {\r\n                      msg (\"Available: (<b>blessing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowRegeneration = false) {\r\n                      msg (\"Available: (<b>regeneration</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowHaste = false) {\r\n                      msg (\"Available: (<b>haste</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowRejuvenation = false) {\r\n                      msg (\"Available: (<b>rejuvenation</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowInvisibility = false) {\r\n                      msg (\"Available: (<b>invisibilty</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPiercingZot = false) {\r\n                      msg (\"Available: (<b>piercing zot</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowFireball = false) {\r\n                      msg (\"Available: (<b>fireball</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowAgony = false) {\r\n                      msg (\"Available: (<b>agony</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"piercing zot\") {\r\n                          if (Spellbook.KnowPiercingZot = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Piercing Zot.\")\r\n                              Spellbook.KnowPiercingZot = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"blessing\") {\r\n                          if (Spellbook.KnowBlessing = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Blessing.\")\r\n                              Spellbook.KnowBlessing = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"agony\") {\r\n                          if (Spellbook.KnowAgony = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Agony.\")\r\n                              Spellbook.KnowAgony = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"fireball\") {\r\n                          if (Spellbook.KnowFireball = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Fireballl.\")\r\n                              Spellbook.KnowFireball = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"regeneration\") {\r\n                          if (Spellbook.KnowRegeneration = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Regeneration.\")\r\n                              Spellbook.KnowRegeneration = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"invisibility\") {\r\n                          if (Spellbook.KnowInvisibility = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Invisibility.\")\r\n                              Spellbook.KnowInvisibility = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"haste\") {\r\n                          if (Spellbook.KnowHaste = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Haste.\")\r\n                              Spellbook.KnowHaste = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"rejuvenation\") {\r\n                          if (Spellbook.KnowRejuvenation = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Rejuvenation.\")\r\n                              Spellbook.KnowRejuvenation = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"5th\") {\r\n                    msg (\"Fifth level spells cost <b>900</b> soul shards each. The fifth level spells available to purchase \r\n\r\nare:<br/>\")\r\n                    if (Spellbook.KnowMajorHealing = false) {\r\n                      msg (\"Available: (<b>major healing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMajorAid = false) {\r\n                      msg (\"Available: (<b>major aid</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPowerWeaponI = false) {\r\n                      msg (\"Available: (<b>power weapon i</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowForceShieldI = false) {\r\n                      msg (\"Available: (<b>force shield i</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPiercingFireball = false) {\r\n                      msg (\"Available: (<b>piercing fireball</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowConeOfCold = false) {\r\n                      msg (\"Available: (<b>cone of cold</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowExplosion = false) {\r\n                      msg (\"Available: (<b>explosion</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"piercing fireball\") {\r\n                          if (Spellbook.KnowPiercingFireball = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Piercing Fireball.\")\r\n                              Spellbook.KnowPiercingFireball = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"major healing\") {\r\n                          if (Spellbook.KnowMajorHealing = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Major Healing.\")\r\n                              Spellbook.KnowMajorHealing = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"major aid\") {\r\n                          if (Spellbook.KnowMajorAid = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Major Aid.\")\r\n                              Spellbook.KnowMajorAid = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"explosion\") {\r\n                          if (Spellbook.KnowExplosion = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Explosion.\")\r\n                              Spellbook.KnowExplosion = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"cone of cold\") {\r\n                          if (Spellbook.KnowConeOfCold = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Cone of Cold.\")\r\n                              Spellbook.KnowConeOfCold = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"power weapon i\") {\r\n                          if (Spellbook.KnowPowerWeaponI = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Power Weapon I.\")\r\n                              Spellbook.KnowPowerWeaponI = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"force shield i\") {\r\n                          if (Spellbook.KnowForceShieldI = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Force Shield I.\")\r\n                              Spellbook.KnowForceShieldI = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"6th\") {\r\n                    msg (\"Sixth level spells cost <b>1100</b> soul shards each. The sixth level spells available to purchase \r\n\r\nare:<br/>\")\r\n                    if (Spellbook.KnowMajorBlessing = false) {\r\n                      msg (\"Available: (<b>major blessing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMajorRegeneration = false) {\r\n                      msg (\"Available: (<b>major regeneration</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMajorHaste = false) {\r\n                      msg (\"Available: (<b>major haste</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowSpellPotencyII = false) {\r\n                      msg (\"Available: (<b>spell potency ii</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPiercingCold = false) {\r\n                      msg (\"Available: (<b>piercing cold</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowInferno = false) {\r\n                      msg (\"Available: (<b>inferno</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowBlizzard = false) {\r\n                      msg (\"Available: (<b>blizzard</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"piercing cold\") {\r\n                          if (Spellbook.KnowPiercingCold = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Piercing Cold.\")\r\n                              Spellbook.KnowPiercingCold = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"major blessing\") {\r\n                          if (Spellbook.KnowMajorBlessing = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Major Blessing.\")\r\n                              Spellbook.KnowMajorBlessing = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"major regeneration\") {\r\n                          if (Spellbook.KnowMajorRegeneration = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Major Regeneration.\")\r\n                              Spellbook.KnowMajorRegeneration = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"blizzard\") {\r\n                          if (Spellbook.KnowBlizzard = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Blizzard.\")\r\n                              Spellbook.KnowBlizzard = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"inferno\") {\r\n                          if (Spellbook.KnowInferno = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Inferno.\")\r\n                              Spellbook.KnowInferno = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"major haste\") {\r\n                          if (Spellbook.KnowMajorHaste = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Major Haste.\")\r\n                              Spellbook.KnowMajorHaste = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"spell potency ii\") {\r\n                          if (Spellbook.KnowSpellPotencyII = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Spell Potency II.\")\r\n                              Spellbook.KnowSpellPotencyII = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n            case (\"shields\") {\r\n              msg (\"Which shield would you like to purchase; the price is in the [ ]? <br/>(<b>buckler</b>) [1 SS]<br/>\r\n\r\n(<b>round</b>) [100 SS]<br/>(<b>kite</b>) [200 SS]<br/>(<b>tower</b>) [400 SS]<br/>(<b>round spikes</b>) [1000 SS]<br/>(<b>kite \r\n\r\nspikes</b>) [1000 SS]<br/>(<b>tower spikes</b>) [1000 SS]\")\r\n              get input {\r\n                switch (result) {\r\n                  case (\"buckler\") {\r\n                    if (ListContains(ScopeVisible(), ShieldBuckler)) {\r\n                      msg (\"You already own a buckler.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 0) {\r\n                        msg (\"<br/>You purchase a buckler.\")\r\n                        player.SoulShards = player.SoulShards - 1\r\n                        AddToInventory (ShieldBuckler)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (1) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"round\") {\r\n                    if (ListContains(ScopeVisible(), ShieldRound)) {\r\n                      msg (\"You already own a round shield.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 99) {\r\n                        msg (\"<br/>You purchase a round shield.\")\r\n                        player.SoulShards = player.SoulShards - 100\r\n                        AddToInventory (ShieldRound)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (100) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"kite\") {\r\n                    if (ListContains(ScopeVisible(), ShieldKite)) {\r\n                      msg (\"You already own a kite shield.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 199) {\r\n                        msg (\"<br/>You purchase a kite shield.\")\r\n                        player.SoulShards = player.SoulShards - 200\r\n                        AddToInventory (ShieldKite)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (200) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"tower\") {\r\n                    if (ListContains(ScopeVisible(), ShieldTower)) {\r\n                      msg (\"You already own a tower shield.\")\r\n                    }\r\n                    else {\r\n                      if (player.SoulShards > 399) {\r\n                        msg (\"<br/>You purchase a tower shield.\")\r\n                        player.SoulShards = player.SoulShards - 400\r\n                        AddToInventory (ShieldTower)\r\n                      }\r\n                      else {\r\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \r\n\r\n+ (400) + \" soul shards!\")\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"round spikes\") {\r\n                    if (ListContains(ScopeVisible(), ShieldRound)) {\r\n                      if (ShieldRound.SpikesApplied = true) {\r\n                        msg (\"Your round shield already has shield spikes.\")\r\n                      }\r\n                      else {\r\n                        if (player.SoulShards > 999) {\r\n                          msg (\"<br/>You purchase shield spikes for your round shield.\")\r\n                          player.SoulShards = player.SoulShards - 1000\r\n                          ShieldRound.SpikesApplied = true\r\n                        }\r\n                        else {\r\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \r\n\r\n\" + (1000) + \" soul shards!\")\r\n                        }\r\n                      }\r\n                    }\r\n                    else {\r\n                      msg (\"You aren't carrying a Round Shield.\")\r\n                    }\r\n                  }\r\n                  case (\"kite spikes\") {\r\n                    if (ListContains(ScopeVisible(), ShieldKite)) {\r\n                      if (ShieldKite.SpikesApplied = true) {\r\n                        msg (\"Your round shield already has shield spikes.\")\r\n                      }\r\n                      else {\r\n                        if (player.SoulShards > 999) {\r\n                          msg (\"<br/>You purchase shield spikes for your kite shield.\")\r\n                          player.SoulShards = player.SoulShards - 1000\r\n                          ShieldKite.SpikesApplied = true\r\n                        }\r\n                        else {\r\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \r\n\r\n\" + (1000) + \" soul shards!\")\r\n                        }\r\n                      }\r\n                    }\r\n                    else {\r\n                      msg (\"You aren't carrying a Kite Shield.\")\r\n                    }\r\n                  }\r\n                  case (\"tower spikes\") {\r\n                    if (ListContains(ScopeVisible(), ShieldTower)) {\r\n                      if (ShieldTower.SpikesApplied = true) {\r\n                        msg (\"Your tower shield already has armor spikes!\")\r\n                      }\r\n                      else {\r\n                        if (player.SoulShards > 999) {\r\n                          msg (\"<br/>You purchase shield spikes for your tower shield.\")\r\n                          player.SoulShards = player.SoulShards - 1000\r\n                          ShieldTower.SpikesApplied = true\r\n                        }\r\n                        else {\r\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \r\n\r\n\" + (1000) + \" soul shards!\")\r\n                        }\r\n                      }\r\n                    }\r\n                    else {\r\n                      msg (\"You aren't carrying a Tower Shield.\")\r\n                    }\r\n                  }\r\n                  default {\r\n                    msg (\"You decide to not purchase any shields today.\")\r\n                  }\r\n                }\r\n              }\r\n            }\r\n            case (\"healing potion\") {\r\n              msg (\"How many healing potions would you like to purchase; please enter a number. <b>Price per is 50.</b>\")\r\n              get input {\r\n                Satchel.TempValue = toint(result)\r\n                if ((player.SoulShards) > (Satchel.TempValue * 50 - 1)) {\r\n                  Satchel.HealingPotions = Satchel.HealingPotions + Satchel.TempValue\r\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 50)\r\n                  msg (\"</br>You buy \" + Satchel.TempValue + \" healing potion[s].\")\r\n                }\r\n                else {\r\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \r\n\r\n(Satchel.TempValue * 50) + \" soul shards!\")\r\n                }\r\n              }\r\n            }\r\n            case (\"mana potion\") {\r\n              msg (\"How many mana potions would you like to purchase; please enter a number. <b>Price per is 50.</b>\")\r\n              get input {\r\n                Satchel.TempValue = toint(result)\r\n                if ((player.SoulShards) > (Satchel.TempValue * 50 - 1)) {\r\n                  Satchel.ManaPotions = Satchel.ManaPotions + Satchel.TempValue\r\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 50)\r\n                  msg (\"</br>You buy \" + Satchel.TempValue + \" mana potion[s].\")\r\n                }\r\n                else {\r\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \r\n\r\n(Satchel.TempValue * 50) + \" soul shards!\")\r\n                }\r\n              }\r\n            }\r\n            case (\"enchanting orb\") {\r\n              msg (\"How many enchanting orbs would you like to purchase; please enter a number. <b>Price per is 500.</b>\")\r\n              get input {\r\n                Satchel.TempValue = toint(result)\r\n                if ((player.SoulShards) > (Satchel.TempValue * 500 - 1)) {\r\n                  Satchel.EnchantingOrbs = Satchel.EnchantingOrbs + Satchel.TempValue\r\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 500)\r\n                  msg (\"</br>You buy \" + Satchel.TempValue + \" enchanting orb[s].\")\r\n                }\r\n                else {\r\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \r\n\r\n(Satchel.TempValue * 500) + \" soul shards!\")\r\n                }\r\n              }\r\n            }\r\n            case (\"enhancement kit\") {\r\n              msg (\"How many enhancement kits would you like to purchase; please enter a number. <b>Price per is 250.</b>\")\r\n              get input {\r\n                Satchel.TempValue = toint(result)\r\n                if ((player.SoulShards) > (Satchel.TempValue * 250 - 1)) {\r\n                  Satchel.EnhancementKits = Satchel.EnhancementKits + Satchel.TempValue\r\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 250)\r\n                  msg (\"</br>You buy \" + Satchel.TempValue + \" enhancement kit[s].\")\r\n                }\r\n                else {\r\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \r\n\r\n(Satchel.TempValue * 250) + \" soul shards!\")\r\n                }\r\n              }\r\n            }\r\n            case (\"elixir of battle\") {\r\n              msg (\"How many elixirs of battle would you like to purchase; please enter a number. <b>Price per is 1000.</b>\")\r\n              get input {\r\n                Satchel.TempValue = toint(result)\r\n                if ((player.SoulShards) > (Satchel.TempValue * 1000 - 1)) {\r\n                  Satchel.ElixirBattle = Satchel.ElixirBattle+ Satchel.TempValue\r\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 1000)\r\n                  msg (\"</br>You buy \" + Satchel.TempValue + \" elixir[s] of battle.\")\r\n                }\r\n                else {\r\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \r\n\r\n(Satchel.TempValue * 1000) + \" soul shards!\")\r\n                }\r\n              }\r\n            }\r\n            case (\"elixir of ambrosia\") {\r\n              msg (\"How many elixirs of ambrosia would you like to purchase; please enter a number. <b>Price per is 1000.</b>\")\r\n              get input {\r\n                Satchel.TempValue = toint(result)\r\n                if ((player.SoulShards) > (Satchel.TempValue * 1000 - 1)) {\r\n                  Satchel.ElixirAmbrosia = Satchel.ElixirAmbrosia+ Satchel.TempValue\r\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 1000)\r\n                  msg (\"</br>You buy \" + Satchel.TempValue + \" elixir[s] of ambrosia.\")\r\n                }\r\n                else {\r\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \r\n\r\n(Satchel.TempValue * 1000) + \" soul shards!\")\r\n                }\r\n              }\r\n            }\r\n            default {\r\n              msg (\"You decide to not buy anything today.\")\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          msg (\"You cannot do that while under attack.\")\r\n        }\r\n      }\r\n      else {\r\n        msg (\"The Celestial is not present here. Thus you cannot make purchases.\")\r\n      }\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>I do not know what I did wrong, but my script keeps posting \"Failed to load script\" for my buy command... a command I spent about 3 weeks designing and developing.</p>\n<p>I was adding some new spells to it, via the UI and not code view; everything seemed to be going fine. I managed to add new spells to my 1st to 6th tier, without a problem. When I went to implement my 7th tier, things were going good. When I was halfway done with my 7th tier, I saved it and everything was good. When I finished off my 7th tier, I got this error. I went into code view didn't see anything wrong, but have been getting the occasional weird error with quest and exiting the program and launching it again would usually fix the issue. It didn't with this.</p>\n<p>I tried copying the code (by looking at in in code view) to text file, and then deleting the entire buy command, and recreated the command and copied the code over. Didn't fix it.</p>\n<p>I tried deleting the three spells I added before the command borked. Didn't fix it.</p>\n<p>I tried deleting the entire 7th tier; didn't fix it.</p>\n<p>I've been able to produce updates for my game every 3-5 days and my players are quite happy. However, if I have to rebuild my entire buy command from scratch... its either going to delay me 2-4 weeks to build a new one, or I dunno. This kind of error really kills my drive to keep working on the game. I've checked over the code myself and cannot find an issue with it. I'll post the code below, for anyone who wishes to see if they can figure out the issue. The majority of the code complies fine, but there must be something I did wrong in my spell purchasing code. It may be that I simply reached an operational limit in the Quest engine for the number of nested ifs, switches, and get inputs.</p>\n<p>Here is the code: (it lacks the 7th tier)</p>\n<pre><code>        if (GetBoolean(player, \"RoomEmpty\")) {\n          switch (text) {\n            case (\"consumables\") {\n              msg (\"Would you like to purchase (&lt;b&gt;healing&lt;/b&gt;) potions, (&lt;b&gt;mana&lt;/b&gt;) potions, enchanting (&lt;b&gt;orbs&lt;/b&gt;), or \n\nenhancement (&lt;b&gt;kits&lt;/b&gt;).\")\n              get input {\n                switch (result) {\n                  case (\"healing\") {\n                    msg (\"How many healing potions would you like to purchase; please enter a number. &lt;b&gt;Price per is 50.&lt;/b&gt;\")\n                    get input {\n                      Satchel.TempValue = toint(result)\n                      if ((player.SoulShards) &gt; (Satchel.TempValue * 50 - 1)) {\n                        Satchel.HealingPotions = Satchel.HealingPotions + Satchel.TempValue\n                        player.SoulShards = player.SoulShards - (Satchel.TempValue * 50)\n                        msg (\"&lt;/br&gt;You buy \" + Satchel.TempValue + \" healing potion[s].\")\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (Satchel.TempValue * 50) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"mana\") {\n                    msg (\"How many mana potions would you like to purchase; please enter a number. &lt;b&gt;Price per is 50.&lt;/b&gt;\")\n                    get input {\n                      Satchel.TempValue = toint(result)\n                      if ((player.SoulShards) &gt; (Satchel.TempValue * 50 - 1)) {\n                        Satchel.ManaPotions = Satchel.ManaPotions + Satchel.TempValue\n                        player.SoulShards = player.SoulShards - (Satchel.TempValue * 50)\n                        msg (\"&lt;/br&gt;You buy \" + Satchel.TempValue + \" mana potion[s].\")\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (Satchel.TempValue * 50) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"orbs\") {\n                    msg (\"How many enchanting orbs would you like to purchase; please enter a number. &lt;b&gt;Price per is 500.&lt;/b&gt;\")\n                    get input {\n                      Satchel.TempValue = toint(result)\n                      if ((player.SoulShards) &gt; (Satchel.TempValue * 500 - 1)) {\n                        Satchel.EnchantingOrbs = Satchel.EnchantingOrbs + Satchel.TempValue\n                        player.SoulShards = player.SoulShards - (Satchel.TempValue * 500)\n                        msg (\"&lt;/br&gt;You buy \" + Satchel.TempValue + \" enchanting orb[s].\")\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (Satchel.TempValue * 500) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"kits\") {\n                    msg (\"How many enhancement kits would you like to purchase; please enter a number. &lt;b&gt;Price per is \n\n250.&lt;/b&gt;\")\n                    get input {\n                      Satchel.TempValue = toint(result)\n                      if ((player.SoulShards) &gt; (Satchel.TempValue * 250 - 1)) {\n                        Satchel.EnhancementKits = Satchel.EnhancementKits + Satchel.TempValue\n                        player.SoulShards = player.SoulShards - (Satchel.TempValue * 250)\n                        msg (\"&lt;/br&gt;You buy \" + Satchel.TempValue + \" enhancement kit[s].\")\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (Satchel.TempValue * 250) + \" soul shards!\")\n                      }\n                    }\n                  }\n                }\n              }\n            }\n            case (\"training\") {\n              msg (\"Your current XP values are:&lt;br/&gt;\")\n              msg (\"Strength = \" + player.StrengthTraining + \"; Agility = \" + player.AgilityTraining + \"; Vitality = \" + \n\nplayer.VitalityTraining + \".\")\n              msg (\"Intellect = \" + player.IntellectTraining + \", Willpower = \" + player.WillpowerTraining + \", Perception = \" + \n\nplayer.PerceptionTraining + \", and Luck = \" + player.LuckTraining + \".\")\n              msg (\"&lt;br/&gt;A &lt;u&gt;bout&lt;/u&gt; of training provides 100 XP for 100 soul shards.&lt;br/&gt;How many &lt;u&gt;bouts&lt;/u&gt; of training do \n\nyou want to have; please enter a number?&lt;br/&gt;\")\n              get input {\n                Satchel.TempValue = toint(result)\n                if (Satchel.TempValue &gt; 0) {\n                  if (player.SoulShards &gt; ((Satchel.TempValue * 100) - 1)) {\n                    msg (\"Which attribute will you apply this training to?&lt;br/&gt;(&lt;b&gt;strength&lt;/b&gt;), (&lt;b&gt;agility&lt;/b&gt;), \n\n(&lt;b&gt;vitality&lt;/b&gt;), (&lt;b&gt;intellect&lt;/b&gt;), (&lt;b&gt;willpower&lt;/b&gt;), (&lt;b&gt;perception&lt;/b&gt;), or (&lt;b&gt;luck&lt;/b&gt;)\")\n                    get input {\n                      switch (result) {\n                        case (\"strength\") {\n                          msg (\"&lt;br/&gt;You acquire \" + Satchel.TempValue + \" bouts of strength training.\")\n                          player.StrengthTraining = player.StrengthTraining + (Satchel.TempValue * 100)\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\n                        }\n                        case (\"agility\") {\n                          msg (\"&lt;br/&gt;You acquire \" + Satchel.TempValue + \" bouts of agility training.\")\n                          player.AgilityTraining = player.AgilityTraining + (Satchel.TempValue * 100)\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\n                        }\n                        case (\"vitality\") {\n                          msg (\"&lt;br/&gt;You acquire \" + Satchel.TempValue + \" bouts of vitality training.\")\n                          player.VitalityTraining = player.VitalityTraining + (Satchel.TempValue * 100)\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\n                        }\n                        case (\"intellect\") {\n                          msg (\"&lt;br/&gt;You acquire \" + Satchel.TempValue + \" bouts of intellect training.\")\n                          player.IntellectTraining = player.IntellectTraining + (Satchel.TempValue * 100)\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\n                        }\n                        case (\"willpower\") {\n                          msg (\"&lt;br/&gt;You acquire \" + Satchel.TempValue + \" bouts of willpower training.\")\n                          player.WillpowerTraining = player.WillpowerTraining + (Satchel.TempValue * 100)\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\n                        }\n                        case (\"perception\") {\n                          msg (\"&lt;br/&gt;You acquire \" + Satchel.TempValue + \" bouts of perception training.\")\n                          player.PerceptionTraining = player.PerceptionTraining + (Satchel.TempValue * 100)\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\n                        }\n                        case (\"luck\") {\n                          msg (\"&lt;br/&gt;You acquire \" + Satchel.TempValue + \" bouts of luck training.\")\n                          player.LuckTraining = player.LuckTraining + (Satchel.TempValue * 100)\n                          player.SoulShards = player.SoulShards - (Satchel.TempValue * 100)\n                        }\n                      }\n                    }\n                  }\n                  else {\n                    msg (\"\\\"You don't have enough soul shards. You only have \\\" + player.SoulShards + \\\" soul shards. You need \n\n\\\" + (Satchel.TempValue * 100) + \\\" soul shards!\\\"\")\n                  }\n                }\n                else {\n                  msg (\"You decide to not do any training.\")\n                }\n              }\n              msg (\"\")\n              // First check if player has sufficient SS.\n              // Then ask which attribute to apply training to, if you have the SS.\n              // Satchel.TempValue used so that I don't need to have another temporary value.\n            }\n            case (\"weapons\") {\n              msg (\"Which weapon would you like to purchase; the price is in the [ ]? &lt;br/&gt;&lt;br/&gt;(&lt;b&gt;dagger&lt;/b&gt;) [1 SS]&lt;br/&gt;\n\n(&lt;b&gt;shortsword&lt;/b&gt;) [100 SS]&lt;br/&gt;(&lt;b&gt;longsword&lt;/b&gt;) [200 SS]&lt;br/&gt;(&lt;b&gt;staff&lt;/b&gt;) [200 SS]&lt;br/&gt;(&lt;b&gt;greatsword&lt;/b&gt;) [400 SS]\")\n              get input {\n                switch (result) {\n                  case (\"dagger\") {\n                    if (ListContains(ScopeVisible(), WeaponDagger)) {\n                      msg (\"You already own a dagger.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 0) {\n                        msg (\"&lt;br/&gt;You purchase a dagger.\")\n                        player.SoulShards = player.SoulShards - 1\n                        AddToInventory (WeaponDagger)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (1) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"shortsword\") {\n                    if (ListContains(ScopeVisible(), WeaponShortsword)) {\n                      msg (\"You already own a shortsword.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 99) {\n                        msg (\"&lt;br/&gt;You purchase a shortsword.\")\n                        player.SoulShards = player.SoulShards - 100\n                        AddToInventory (WeaponShortsword)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (100) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"longsword\") {\n                    if (ListContains(ScopeVisible(), WeaponLongsword)) {\n                      msg (\"You already own a longsword.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 199) {\n                        msg (\"&lt;br/&gt;You purchase a longsword.\")\n                        player.SoulShards = player.SoulShards - 200\n                        AddToInventory (WeaponLongsword)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (200) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"greatsword\") {\n                    if (ListContains(ScopeVisible(), WeaponGreatsword)) {\n                      msg (\"You already own a greatsword.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 399) {\n                        msg (\"&lt;br/&gt;You purchase a greatsword.\")\n                        player.SoulShards = player.SoulShards - 400\n                        AddToInventory (WeaponGreatsword)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (400) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"staff\") {\n                    if (ListContains(ScopeVisible(), WeaponStaff)) {\n                      msg (\"You already own a staff.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 199) {\n                        msg (\"&lt;br/&gt;You purchase a staff.\")\n                        player.SoulShards = player.SoulShards - 200\n                        AddToInventory (WeaponStaff)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (200) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  default {\n                    msg (\"You decide to not purchase any weapons today.\")\n                  }\n                }\n              }\n            }\n            case (\"armors\") {\n              msg (\"Which armor would you like to purchase; the price is in the [ ]? &lt;br/&gt;(&lt;b&gt;robes&lt;/b&gt;) [1 SS]&lt;br/&gt;\n\n(&lt;b&gt;leather&lt;/b&gt;) [100 SS]&lt;br/&gt;(&lt;b&gt;chainmail&lt;/b&gt;) [200 SS]&lt;br/&gt;(&lt;b&gt;platemail&lt;/b&gt;) [400 SS]&lt;br/&gt;(&lt;b&gt;leather spikes&lt;/b&gt;) [1000 \n\nSS]&lt;br/&gt;(&lt;b&gt;chainmail spikes&lt;/b&gt;) [1000 SS]&lt;br/&gt;(&lt;b&gt;platemail spikes&lt;/b&gt;) [1000 SS]\")\n              get input {\n                switch (result) {\n                  case (\"robes\") {\n                    if (ListContains(ScopeVisible(), ArmorRobes)) {\n                      msg (\"You already own robes.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 0) {\n                        msg (\"&lt;br/&gt;You purchase robes.\")\n                        player.SoulShards = player.SoulShards - 1\n                        AddToInventory (ArmorRobes)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (1) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"leather\") {\n                    if (ListContains(ScopeVisible(), ArmorLeather)) {\n                      msg (\"You already own leather armor.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 99) {\n                        msg (\"&lt;br/&gt;You purchase leather armor.\")\n                        player.SoulShards = player.SoulShards - 100\n                        AddToInventory (ArmorLeather)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (100) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"chainmail\") {\n                    if (ListContains(ScopeVisible(), ArmorChainmail)) {\n                      msg (\"You already own chainmail armor.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 199) {\n                        msg (\"&lt;br/&gt;You purchase chainmail armor.\")\n                        player.SoulShards = player.SoulShards - 200\n                        AddToInventory (ArmorChainmail)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (200) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"platemail\") {\n                    if (ListContains(ScopeVisible(), ArmorPlatemail)) {\n                      msg (\"You already own platemail armor.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 399) {\n                        msg (\"&lt;br/&gt;You purchase platemail armor.\")\n                        player.SoulShards = player.SoulShards - 400\n                        AddToInventory (ArmorPlatemail)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (400) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"leather spikes\") {\n                    if (ListContains(ScopeVisible(), ArmorLeather)) {\n                      if (ArmorLeather.SpikesApplied = true) {\n                        msg (\"Your leather armor already has armor spikes!\")\n                      }\n                      else {\n                        if (player.SoulShards &gt; 999) {\n                          msg (\"&lt;br/&gt;You purchase armor spikes for your leather armor.\")\n                          player.SoulShards = player.SoulShards - 1000\n                          ArmorLeather.SpikesApplied = true\n                        }\n                        else {\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \n\n\" + (1000) + \" soul shards!\")\n                        }\n                      }\n                    }\n                    else {\n                      msg (\"You aren't carrying leather armor.\")\n                    }\n                  }\n                  case (\"chainmail spikes\") {\n                    if (ListContains(ScopeVisible(), ArmorChainmail)) {\n                      if (ArmorChainmail.SpikesApplied = true) {\n                        msg (\"Your chainmail armor already has armor spikes!\")\n                      }\n                      else {\n                        if (player.SoulShards &gt; 999) {\n                          msg (\"&lt;br/&gt;You purchase armor spikes for your chainmail armor.\")\n                          player.SoulShards = player.SoulShards - 1000\n                          ArmorChainmail.SpikesApplied = true\n                        }\n                        else {\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \n\n\" + (1000) + \" soul shards!\")\n                        }\n                      }\n                    }\n                    else {\n                      msg (\"You aren't carrying chainmail armor.\")\n                    }\n                  }\n                  case (\"platemail spikes\") {\n                    if (ListContains(ScopeVisible(), ArmorPlatemail)) {\n                      if (ArmorPlatemail.SpikesApplied = true) {\n                        msg (\"Your platemail armor already has armor spikes!\")\n                      }\n                      else {\n                        if (player.SoulShards &gt; 999) {\n                          msg (\"&lt;br/&gt;You purchase armor spikes for your platemail armor.\")\n                          player.SoulShards = player.SoulShards - 1000\n                          ArmorPlatemail.SpikesApplied = true\n                        }\n                        else {\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \n\n\" + (1000) + \" soul shards!\")\n                        }\n                      }\n                    }\n                    else {\n                      msg (\"You aren't carrying platemail armor.\")\n                    }\n                  }\n                  default {\n                    msg (\"You decide to not purchase any armors today.\")\n                  }\n                }\n              }\n            }\n            case (\"spells\") {\n              msg (\"Which level of spells would you like to purchase from? (&lt;b&gt;1st&lt;/b&gt;), (&lt;b&gt;2nd&lt;/b&gt;), (&lt;b&gt;3rd&lt;/b&gt;), \n\n(&lt;b&gt;4th&lt;/b&gt;), (&lt;b&gt;5th&lt;/b&gt;), (&lt;b&gt;6th&lt;/b&gt;), (&lt;b&gt;7th&lt;/b&gt;)\")\n              get input {\n                switch (result) {\n                  case (\"1st\") {\n                    msg (\"First level spells cost &lt;b&gt;100&lt;/b&gt; soul shards each. The first level spells available to purchase \n\nare:&lt;br/&gt;\")\n                    if (Spellbook.KnowMinorHealing = false) {\n                      msg (\"Available: (&lt;b&gt;minor healing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMinorAid = false) {\n                      msg (\"Available: (&lt;b&gt;minor aid&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowAnalysis = false) {\n                      msg (\"Available: (&lt;b&gt;analysis&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMinorRejuvenation = false) {\n                      msg (\"Available: (&lt;b&gt;minor rejuvenation&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowArcaneZap = false) {\n                      msg (\"Available: (&lt;b&gt;arcane zap&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowFirebolt = false) {\n                      msg (\"Available: (&lt;b&gt;firebolt&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"arcane zap\") {\n                          if (Spellbook.KnowArcaneZap = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Arcane Zap.\")\n                              Spellbook.KnowArcaneZap = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor healing\") {\n                          if (Spellbook.KnowMinorHealing = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Healing.\")\n                              Spellbook.KnowMinorHealing = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"firebolt\") {\n                          if (Spellbook.KnowFirebolt = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Firebolt.\")\n                              Spellbook.KnowFirebolt = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor aid\") {\n                          if (Spellbook.KnowMinorAid = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Aid.\")\n                              Spellbook.KnowMinorAid = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"analysis\") {\n                          if (Spellbook.KnowAnalysis = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Analysis.\")\n                              Spellbook.KnowAnalysis = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor rejuvenation\") {\n                          if (Spellbook.KnowMinorRejuvenation = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Rejuvenation.\")\n                              Spellbook.KnowMinorRejuvenation = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n                  case (\"2nd\") {\n                    msg (\"Second level spells cost &lt;b&gt;300&lt;/b&gt; soul shards each. The second level spells available to purchase \n\nare:&lt;br/&gt;\")\n                    if (Spellbook.KnowMinorBlessing = false) {\n                      msg (\"Available: (&lt;b&gt;minor blessing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMinorRegeneration = false) {\n                      msg (\"Available: (&lt;b&gt;minor regeneration&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMinorHaste = false) {\n                      msg (\"Available: (&lt;b&gt;minor haste&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowRelocate = false) {\n                      msg (\"Available: (&lt;b&gt;relocate&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPiercingZap = false) {\n                      msg (\"Available: (&lt;b&gt;piercing zap&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowIcyLance = false) {\n                      msg (\"Available: (&lt;b&gt;icy lance&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowAcidSpray = false) {\n                      msg (\"Available: (&lt;b&gt;acid spray&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"icy lance\") {\n                          if (Spellbook.KnowIcyLance = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Icy Lance.\")\n                              Spellbook.KnowIcyLance = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor blessing\") {\n                          if (Spellbook.KnowMinorBlessing = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Blessing.\")\n                              Spellbook.KnowMinorBlessing = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"acid spray\") {\n                          if (Spellbook.KnowAcidSpray = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Acid Spray.\")\n                              Spellbook.KnowAcidSpray = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"piercing zap\") {\n                          if (Spellbook.KnowPiercingZap = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Piercing Zap.\")\n                              Spellbook.KnowPiercingZap = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor regeneration\") {\n                          if (Spellbook.KnowMinorRegeneration = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Regeneration.\")\n                              Spellbook.KnowMinorRegeneration = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"relocate\") {\n                          if (Spellbook.KnowRelocate = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Relocate.\")\n                              Spellbook.KnowRelocate = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor haste\") {\n                          if (Spellbook.KnowMinorHaste = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Haste.\")\n                              Spellbook.KnowMinorHaste = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n                  case (\"3rd\") {\n                    msg (\"Third level spells cost &lt;b&gt;500&lt;/b&gt; soul shards each. The third level spells available to purchase \n\nare:&lt;br/&gt;\")\n                    if (Spellbook.KnowHealing = false) {\n                      msg (\"Available: (&lt;b&gt;healing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowSpellPotencyI = false) {\n                      msg (\"Available: (&lt;b&gt;spell potency i&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowAid = false) {\n                      msg (\"Available: (&lt;b&gt;aid&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowTerrify = false) {\n                      msg (\"Available: (&lt;b&gt;terrify&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPiercingLance = false) {\n                      msg (\"Available: (&lt;b&gt;piercing lance&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMagicZot = false) {\n                      msg (\"Available: (&lt;b&gt;magic zot&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowShockBolt = false) {\n                      msg (\"Available: (&lt;b&gt;shock bolt&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"magic zot\") {\n                          if (Spellbook.KnowMagicZot = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Magic Zot.\")\n                              Spellbook.KnowMagicZot = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"healing\") {\n                          if (Spellbook.KnowHealing = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Healing.\")\n                              Spellbook.KnowHealing = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"shock bolt\") {\n                          if (Spellbook.KnowShockBolt = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Shock Bolt.\")\n                              Spellbook.KnowShockBolt = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"piercing lance\") {\n                          if (Spellbook.KnowPiercingLance = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Piercing Lance.\")\n                              Spellbook.KnowPiercingLance = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"aid\") {\n                          if (Spellbook.KnowAid = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Aid.\")\n                              Spellbook.KnowAid = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"terrify\") {\n                          if (Spellbook.KnowTerrify = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Terrify.\")\n                              Spellbook.KnowTerrify = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"spell potency i\") {\n                          if (Spellbook.KnowSpellPotencyI = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Spell Potency I.\")\n                              Spellbook.KnowSpellPotencyI = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n                  case (\"4th\") {\n                    msg (\"Fourth level spells cost &lt;b&gt;700&lt;/b&gt; soul shards each. The fourth level spells available to purchase \n\nare:&lt;br/&gt;\")\n                    if (Spellbook.KnowBlessing = false) {\n                      msg (\"Available: (&lt;b&gt;blessing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowRegeneration = false) {\n                      msg (\"Available: (&lt;b&gt;regeneration&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowHaste = false) {\n                      msg (\"Available: (&lt;b&gt;haste&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowRejuvenation = false) {\n                      msg (\"Available: (&lt;b&gt;rejuvenation&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowInvisibility = false) {\n                      msg (\"Available: (&lt;b&gt;invisibilty&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPiercingZot = false) {\n                      msg (\"Available: (&lt;b&gt;piercing zot&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowFireball = false) {\n                      msg (\"Available: (&lt;b&gt;fireball&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowAgony = false) {\n                      msg (\"Available: (&lt;b&gt;agony&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"piercing zot\") {\n                          if (Spellbook.KnowPiercingZot = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Piercing Zot.\")\n                              Spellbook.KnowPiercingZot = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"blessing\") {\n                          if (Spellbook.KnowBlessing = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Blessing.\")\n                              Spellbook.KnowBlessing = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"agony\") {\n                          if (Spellbook.KnowAgony = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Agony.\")\n                              Spellbook.KnowAgony = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"fireball\") {\n                          if (Spellbook.KnowFireball = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Fireballl.\")\n                              Spellbook.KnowFireball = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"regeneration\") {\n                          if (Spellbook.KnowRegeneration = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Regeneration.\")\n                              Spellbook.KnowRegeneration = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"invisibility\") {\n                          if (Spellbook.KnowInvisibility = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Invisibility.\")\n                              Spellbook.KnowInvisibility = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"haste\") {\n                          if (Spellbook.KnowHaste = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Haste.\")\n                              Spellbook.KnowHaste = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"rejuvenation\") {\n                          if (Spellbook.KnowRejuvenation = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Rejuvenation.\")\n                              Spellbook.KnowRejuvenation = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n                  case (\"5th\") {\n                    msg (\"Fifth level spells cost &lt;b&gt;900&lt;/b&gt; soul shards each. The fifth level spells available to purchase \n\nare:&lt;br/&gt;\")\n                    if (Spellbook.KnowMajorHealing = false) {\n                      msg (\"Available: (&lt;b&gt;major healing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMajorAid = false) {\n                      msg (\"Available: (&lt;b&gt;major aid&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPowerWeaponI = false) {\n                      msg (\"Available: (&lt;b&gt;power weapon i&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowForceShieldI = false) {\n                      msg (\"Available: (&lt;b&gt;force shield i&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPiercingFireball = false) {\n                      msg (\"Available: (&lt;b&gt;piercing fireball&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowConeOfCold = false) {\n                      msg (\"Available: (&lt;b&gt;cone of cold&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowExplosion = false) {\n                      msg (\"Available: (&lt;b&gt;explosion&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"piercing fireball\") {\n                          if (Spellbook.KnowPiercingFireball = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Piercing Fireball.\")\n                              Spellbook.KnowPiercingFireball = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"major healing\") {\n                          if (Spellbook.KnowMajorHealing = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Major Healing.\")\n                              Spellbook.KnowMajorHealing = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"major aid\") {\n                          if (Spellbook.KnowMajorAid = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Major Aid.\")\n                              Spellbook.KnowMajorAid = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"explosion\") {\n                          if (Spellbook.KnowExplosion = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Explosion.\")\n                              Spellbook.KnowExplosion = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"cone of cold\") {\n                          if (Spellbook.KnowConeOfCold = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Cone of Cold.\")\n                              Spellbook.KnowConeOfCold = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"power weapon i\") {\n                          if (Spellbook.KnowPowerWeaponI = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Power Weapon I.\")\n                              Spellbook.KnowPowerWeaponI = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"force shield i\") {\n                          if (Spellbook.KnowForceShieldI = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Force Shield I.\")\n                              Spellbook.KnowForceShieldI = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n                  case (\"6th\") {\n                    msg (\"Sixth level spells cost &lt;b&gt;1100&lt;/b&gt; soul shards each. The sixth level spells available to purchase \n\nare:&lt;br/&gt;\")\n                    if (Spellbook.KnowMajorBlessing = false) {\n                      msg (\"Available: (&lt;b&gt;major blessing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMajorRegeneration = false) {\n                      msg (\"Available: (&lt;b&gt;major regeneration&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMajorHaste = false) {\n                      msg (\"Available: (&lt;b&gt;major haste&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowSpellPotencyII = false) {\n                      msg (\"Available: (&lt;b&gt;spell potency ii&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPiercingCold = false) {\n                      msg (\"Available: (&lt;b&gt;piercing cold&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowInferno = false) {\n                      msg (\"Available: (&lt;b&gt;inferno&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowBlizzard = false) {\n                      msg (\"Available: (&lt;b&gt;blizzard&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"piercing cold\") {\n                          if (Spellbook.KnowPiercingCold = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Piercing Cold.\")\n                              Spellbook.KnowPiercingCold = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"major blessing\") {\n                          if (Spellbook.KnowMajorBlessing = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Major Blessing.\")\n                              Spellbook.KnowMajorBlessing = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"major regeneration\") {\n                          if (Spellbook.KnowMajorRegeneration = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Major Regeneration.\")\n                              Spellbook.KnowMajorRegeneration = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"blizzard\") {\n                          if (Spellbook.KnowBlizzard = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Blizzard.\")\n                              Spellbook.KnowBlizzard = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"inferno\") {\n                          if (Spellbook.KnowInferno = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Inferno.\")\n                              Spellbook.KnowInferno = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"major haste\") {\n                          if (Spellbook.KnowMajorHaste = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Major Haste.\")\n                              Spellbook.KnowMajorHaste = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"spell potency ii\") {\n                          if (Spellbook.KnowSpellPotencyII = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Spell Potency II.\")\n                              Spellbook.KnowSpellPotencyII = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n            case (\"shields\") {\n              msg (\"Which shield would you like to purchase; the price is in the [ ]? &lt;br/&gt;(&lt;b&gt;buckler&lt;/b&gt;) [1 SS]&lt;br/&gt;\n\n(&lt;b&gt;round&lt;/b&gt;) [100 SS]&lt;br/&gt;(&lt;b&gt;kite&lt;/b&gt;) [200 SS]&lt;br/&gt;(&lt;b&gt;tower&lt;/b&gt;) [400 SS]&lt;br/&gt;(&lt;b&gt;round spikes&lt;/b&gt;) [1000 SS]&lt;br/&gt;(&lt;b&gt;kite \n\nspikes&lt;/b&gt;) [1000 SS]&lt;br/&gt;(&lt;b&gt;tower spikes&lt;/b&gt;) [1000 SS]\")\n              get input {\n                switch (result) {\n                  case (\"buckler\") {\n                    if (ListContains(ScopeVisible(), ShieldBuckler)) {\n                      msg (\"You already own a buckler.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 0) {\n                        msg (\"&lt;br/&gt;You purchase a buckler.\")\n                        player.SoulShards = player.SoulShards - 1\n                        AddToInventory (ShieldBuckler)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (1) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"round\") {\n                    if (ListContains(ScopeVisible(), ShieldRound)) {\n                      msg (\"You already own a round shield.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 99) {\n                        msg (\"&lt;br/&gt;You purchase a round shield.\")\n                        player.SoulShards = player.SoulShards - 100\n                        AddToInventory (ShieldRound)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (100) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"kite\") {\n                    if (ListContains(ScopeVisible(), ShieldKite)) {\n                      msg (\"You already own a kite shield.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 199) {\n                        msg (\"&lt;br/&gt;You purchase a kite shield.\")\n                        player.SoulShards = player.SoulShards - 200\n                        AddToInventory (ShieldKite)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (200) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"tower\") {\n                    if (ListContains(ScopeVisible(), ShieldTower)) {\n                      msg (\"You already own a tower shield.\")\n                    }\n                    else {\n                      if (player.SoulShards &gt; 399) {\n                        msg (\"&lt;br/&gt;You purchase a tower shield.\")\n                        player.SoulShards = player.SoulShards - 400\n                        AddToInventory (ShieldTower)\n                      }\n                      else {\n                        msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" \n\n+ (400) + \" soul shards!\")\n                      }\n                    }\n                  }\n                  case (\"round spikes\") {\n                    if (ListContains(ScopeVisible(), ShieldRound)) {\n                      if (ShieldRound.SpikesApplied = true) {\n                        msg (\"Your round shield already has shield spikes.\")\n                      }\n                      else {\n                        if (player.SoulShards &gt; 999) {\n                          msg (\"&lt;br/&gt;You purchase shield spikes for your round shield.\")\n                          player.SoulShards = player.SoulShards - 1000\n                          ShieldRound.SpikesApplied = true\n                        }\n                        else {\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \n\n\" + (1000) + \" soul shards!\")\n                        }\n                      }\n                    }\n                    else {\n                      msg (\"You aren't carrying a Round Shield.\")\n                    }\n                  }\n                  case (\"kite spikes\") {\n                    if (ListContains(ScopeVisible(), ShieldKite)) {\n                      if (ShieldKite.SpikesApplied = true) {\n                        msg (\"Your round shield already has shield spikes.\")\n                      }\n                      else {\n                        if (player.SoulShards &gt; 999) {\n                          msg (\"&lt;br/&gt;You purchase shield spikes for your kite shield.\")\n                          player.SoulShards = player.SoulShards - 1000\n                          ShieldKite.SpikesApplied = true\n                        }\n                        else {\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \n\n\" + (1000) + \" soul shards!\")\n                        }\n                      }\n                    }\n                    else {\n                      msg (\"You aren't carrying a Kite Shield.\")\n                    }\n                  }\n                  case (\"tower spikes\") {\n                    if (ListContains(ScopeVisible(), ShieldTower)) {\n                      if (ShieldTower.SpikesApplied = true) {\n                        msg (\"Your tower shield already has armor spikes!\")\n                      }\n                      else {\n                        if (player.SoulShards &gt; 999) {\n                          msg (\"&lt;br/&gt;You purchase shield spikes for your tower shield.\")\n                          player.SoulShards = player.SoulShards - 1000\n                          ShieldTower.SpikesApplied = true\n                        }\n                        else {\n                          msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \n\n\" + (1000) + \" soul shards!\")\n                        }\n                      }\n                    }\n                    else {\n                      msg (\"You aren't carrying a Tower Shield.\")\n                    }\n                  }\n                  default {\n                    msg (\"You decide to not purchase any shields today.\")\n                  }\n                }\n              }\n            }\n            case (\"healing potion\") {\n              msg (\"How many healing potions would you like to purchase; please enter a number. &lt;b&gt;Price per is 50.&lt;/b&gt;\")\n              get input {\n                Satchel.TempValue = toint(result)\n                if ((player.SoulShards) &gt; (Satchel.TempValue * 50 - 1)) {\n                  Satchel.HealingPotions = Satchel.HealingPotions + Satchel.TempValue\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 50)\n                  msg (\"&lt;/br&gt;You buy \" + Satchel.TempValue + \" healing potion[s].\")\n                }\n                else {\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \n\n(Satchel.TempValue * 50) + \" soul shards!\")\n                }\n              }\n            }\n            case (\"mana potion\") {\n              msg (\"How many mana potions would you like to purchase; please enter a number. &lt;b&gt;Price per is 50.&lt;/b&gt;\")\n              get input {\n                Satchel.TempValue = toint(result)\n                if ((player.SoulShards) &gt; (Satchel.TempValue * 50 - 1)) {\n                  Satchel.ManaPotions = Satchel.ManaPotions + Satchel.TempValue\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 50)\n                  msg (\"&lt;/br&gt;You buy \" + Satchel.TempValue + \" mana potion[s].\")\n                }\n                else {\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \n\n(Satchel.TempValue * 50) + \" soul shards!\")\n                }\n              }\n            }\n            case (\"enchanting orb\") {\n              msg (\"How many enchanting orbs would you like to purchase; please enter a number. &lt;b&gt;Price per is 500.&lt;/b&gt;\")\n              get input {\n                Satchel.TempValue = toint(result)\n                if ((player.SoulShards) &gt; (Satchel.TempValue * 500 - 1)) {\n                  Satchel.EnchantingOrbs = Satchel.EnchantingOrbs + Satchel.TempValue\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 500)\n                  msg (\"&lt;/br&gt;You buy \" + Satchel.TempValue + \" enchanting orb[s].\")\n                }\n                else {\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \n\n(Satchel.TempValue * 500) + \" soul shards!\")\n                }\n              }\n            }\n            case (\"enhancement kit\") {\n              msg (\"How many enhancement kits would you like to purchase; please enter a number. &lt;b&gt;Price per is 250.&lt;/b&gt;\")\n              get input {\n                Satchel.TempValue = toint(result)\n                if ((player.SoulShards) &gt; (Satchel.TempValue * 250 - 1)) {\n                  Satchel.EnhancementKits = Satchel.EnhancementKits + Satchel.TempValue\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 250)\n                  msg (\"&lt;/br&gt;You buy \" + Satchel.TempValue + \" enhancement kit[s].\")\n                }\n                else {\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \n\n(Satchel.TempValue * 250) + \" soul shards!\")\n                }\n              }\n            }\n            case (\"elixir of battle\") {\n              msg (\"How many elixirs of battle would you like to purchase; please enter a number. &lt;b&gt;Price per is 1000.&lt;/b&gt;\")\n              get input {\n                Satchel.TempValue = toint(result)\n                if ((player.SoulShards) &gt; (Satchel.TempValue * 1000 - 1)) {\n                  Satchel.ElixirBattle = Satchel.ElixirBattle+ Satchel.TempValue\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 1000)\n                  msg (\"&lt;/br&gt;You buy \" + Satchel.TempValue + \" elixir[s] of battle.\")\n                }\n                else {\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \n\n(Satchel.TempValue * 1000) + \" soul shards!\")\n                }\n              }\n            }\n            case (\"elixir of ambrosia\") {\n              msg (\"How many elixirs of ambrosia would you like to purchase; please enter a number. &lt;b&gt;Price per is 1000.&lt;/b&gt;\")\n              get input {\n                Satchel.TempValue = toint(result)\n                if ((player.SoulShards) &gt; (Satchel.TempValue * 1000 - 1)) {\n                  Satchel.ElixirAmbrosia = Satchel.ElixirAmbrosia+ Satchel.TempValue\n                  player.SoulShards = player.SoulShards - (Satchel.TempValue * 1000)\n                  msg (\"&lt;/br&gt;You buy \" + Satchel.TempValue + \" elixir[s] of ambrosia.\")\n                }\n                else {\n                  msg (\"You don't have enough soul shards. You only have \" + player.SoulShards + \" soul shards. You need \" + \n\n(Satchel.TempValue * 1000) + \" soul shards!\")\n                }\n              }\n            }\n            default {\n              msg (\"You decide to not buy anything today.\")\n            }\n          }\n        }\n        else {\n          msg (\"You cannot do that while under attack.\")\n        }\n      }\n      else {\n        msg (\"The Celestial is not present here. Thus you cannot make purchases.\")\n      }\n</code></pre>\n\n",
      "PostDate": "2017-09-21T20:55:09.8151069Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "730bf9b9-a251-400a-89ce-bc8d7aa6e276",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "one thing you can do, until someone here finds the issue for you:\r\n\r\nremove chunks of code (make sure you create a backup copy of your game file before you start doing this, and you also might want to store your chunks of removed code as a separate file/backup-file, too, just to be safe, on top of also having a backup of your entire game file) until you find the offending part of code, and also, you might want to look at your entire game code, as you may not be correct to where the error actually is located. Assumptions are very bad, I know as I do it all the time myself, and am wrong all the time, hence why assumptions are bad, as they're usually always wrong.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>one thing you can do, until someone here finds the issue for you:</p>\n<p>remove chunks of code (make sure you create a backup copy of your game file before you start doing this, and you also might want to store your chunks of removed code as a separate file/backup-file, too, just to be safe, on top of also having a backup of your entire game file) until you find the offending part of code, and also, you might want to look at your entire game code, as you may not be correct to where the error actually is located. Assumptions are very bad, I know as I do it all the time myself, and am wrong all the time, hence why assumptions are bad, as they're usually always wrong.</p>\n\n",
      "PostDate": "2017-09-21T23:17:47.0239028Z",
      "LastEditDate": "2017-09-21T23:19:12.6826666Z",
      "link": null
    },
    {
      "PostId": "582ae71a-c543-49c2-9764-9e9f67447b1d",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "1. Holy crap, that's a huge, Bazooka, Bagoonga, code! Is that your whole game!?\r\n2. Half the time, the game shows that message because you typed something in wrong. Or the program itself failed.\r\nIt may be such an in significant thing, that you will have to upload the entire code... Which you did....",
      "EditableFormat": "markdown",
      "HTML": "<ol>\n<li>Holy crap, that's a huge, Bazooka, Bagoonga, code! Is that your whole game!?</li>\n<li>Half the time, the game shows that message because you typed something in wrong. Or the program itself failed.<br>\nIt may be such an in significant thing, that you will have to upload the entire code... Which you did....</li>\n</ol>\n\n",
      "PostDate": "2017-09-21T23:29:04.9766549Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9067cab6-bdd0-4e2e-b757-715e3dfcdbae",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well, I found a problem. Not sure if it's THE problem!\r\n\r\nNormal code looks like this:\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"TestRoomStatus\">\r\n    <gameid>0bae2a50-2560-4e7c-8016-02867de11bb8</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <feature_advancedscripts />\r\n    <customstatuspane />\r\n    <roomenter type=\"script\"><![CDATA[\r\n      oRoomObj = player.parent\r\n      if (oRoomObj.name <> \"Start\") {\r\n        if (HasAttribute (oRoomObj, \"SpecialRoom\")) {\r\n          s = \"<table width=\\\"100%\\\"><tr>\"\r\n          s = s + \"   <td style=\\\"text-align:center;\\\" width=\\\"100%\\\"><span id=\\\"roomalias-span\\\">---</span></td>\"\r\n          s = s + \" </tr>\"\r\n          s = s + \"</table>\"\r\n          JS.setCustomStatus (s)\r\n          if (HasScript(oRoomObj, \"changedalias\")) {\r\n            do (oRoomObj, \"changedalias\")\r\n          }\r\n        }\r\n      }\r\n      if (HasScript(player, \"changedalias\")) {\r\n        do (player, \"changedalias\")\r\n      }\r\n    ]]></roomenter>\r\n    <start type=\"script\"><![CDATA[\r\n      foreach (room, AllObjects()) {\r\n        if (room.name <> \"Start\") {\r\n          if (HasAttribute (room, \"SpecialRoom\")) {\r\n            room.changedalias => {\r\n              // When a room's alias is changed, we change the status pane only if the player is in that room\r\n              // Whether the if() line is necessary will depend on your gameplay, but it does no harm to include it\r\n              if (Contains (this, player)) {\r\n                JS.eval (\"$('#roomalias-span').html('\" + this.alias + \"');\")\r\n              }\r\n            }\r\n          }\r\n        }\r\n        room.alias = \"A Room\"\r\n      }\r\n    ]]></start>\r\n  </game>\r\n  <object name=\"Building1\">\r\n    <inherit name=\"editor_object\" />\r\n    <object name=\"Room1\">\r\n      <inherit name=\"TheRoom\" />\r\n      <enter type=\"script\">\r\n        Room1.alias = \"Room 1\"\r\n      </enter>\r\n      <exit alias=\"east\" to=\"Room2\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n      <object name=\"player\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"editor_player\" />\r\n        <alias>Player 1</alias>\r\n      </object>\r\n      <exit alias=\"northeast\" to=\"Room3\">\r\n        <inherit name=\"northeastdirection\" />\r\n      </exit>\r\n    </object>\r\n  </object>\r\n  <object name=\"Building2\">\r\n    <inherit name=\"editor_object\" />\r\n    <object name=\"Room2\">\r\n      <inherit name=\"TheRoom\" />\r\n      <enter type=\"script\">\r\n        Room2.alias = \"Room 2\"\r\n      </enter>\r\n      <exit alias=\"north\" to=\"Room3\">\r\n        <inherit name=\"northdirection\" />\r\n      </exit>\r\n      <exit alias=\"west\" to=\"Room1\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n    </object>\r\n  </object>\r\n  <object name=\"Building3\">\r\n    <inherit name=\"editor_object\" />\r\n    <object name=\"Room3\">\r\n      <inherit name=\"TheRoom\" />\r\n      <enter type=\"script\">\r\n        Room3.alias = \"Room\\' 3\"\r\n      </enter>\r\n      <exit alias=\"south\" to=\"Room2\">\r\n        <inherit name=\"southdirection\" />\r\n      </exit>\r\n      <exit alias=\"southwest\" to=\"Room1\">\r\n        <inherit name=\"southwestdirection\" />\r\n      </exit>\r\n    </object>\r\n  </object>\r\n  \r\n  <type name=\"TheRoom\">\r\n    <inherit name=\"editor_room\" />\r\n\t<SpecialRoom type=\"boolean\">true</SpecialRoom>\r\n  </type>  \r\n  \r\n</asl>\r\n```\r\nYour code has too many spaces. Indents. Whatever you call it.",
      "EditableFormat": "markdown",
      "HTML": "<p>Well, I found a problem. Not sure if it's THE problem!</p>\n<p>Normal code looks like this:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"TestRoomStatus\"&gt;\n    &lt;gameid&gt;0bae2a50-2560-4e7c-8016-02867de11bb8&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;customstatuspane /&gt;\n    &lt;roomenter type=\"script\"&gt;&lt;![CDATA[\n      oRoomObj = player.parent\n      if (oRoomObj.name &lt;&gt; \"Start\") {\n        if (HasAttribute (oRoomObj, \"SpecialRoom\")) {\n          s = \"&lt;table width=\\\"100%\\\"&gt;&lt;tr&gt;\"\n          s = s + \"   &lt;td style=\\\"text-align:center;\\\" width=\\\"100%\\\"&gt;&lt;span id=\\\"roomalias-span\\\"&gt;---&lt;/span&gt;&lt;/td&gt;\"\n          s = s + \" &lt;/tr&gt;\"\n          s = s + \"&lt;/table&gt;\"\n          JS.setCustomStatus (s)\n          if (HasScript(oRoomObj, \"changedalias\")) {\n            do (oRoomObj, \"changedalias\")\n          }\n        }\n      }\n      if (HasScript(player, \"changedalias\")) {\n        do (player, \"changedalias\")\n      }\n    ]]&gt;&lt;/roomenter&gt;\n    &lt;start type=\"script\"&gt;&lt;![CDATA[\n      foreach (room, AllObjects()) {\n        if (room.name &lt;&gt; \"Start\") {\n          if (HasAttribute (room, \"SpecialRoom\")) {\n            room.changedalias =&gt; {\n              // When a room's alias is changed, we change the status pane only if the player is in that room\n              // Whether the if() line is necessary will depend on your gameplay, but it does no harm to include it\n              if (Contains (this, player)) {\n                JS.eval (\"$('#roomalias-span').html('\" + this.alias + \"');\")\n              }\n            }\n          }\n        }\n        room.alias = \"A Room\"\n      }\n    ]]&gt;&lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"Building1\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;object name=\"Room1\"&gt;\n      &lt;inherit name=\"TheRoom\" /&gt;\n      &lt;enter type=\"script\"&gt;\n        Room1.alias = \"Room 1\"\n      &lt;/enter&gt;\n      &lt;exit alias=\"east\" to=\"Room2\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"player\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"editor_player\" /&gt;\n        &lt;alias&gt;Player 1&lt;/alias&gt;\n      &lt;/object&gt;\n      &lt;exit alias=\"northeast\" to=\"Room3\"&gt;\n        &lt;inherit name=\"northeastdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"Building2\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;object name=\"Room2\"&gt;\n      &lt;inherit name=\"TheRoom\" /&gt;\n      &lt;enter type=\"script\"&gt;\n        Room2.alias = \"Room 2\"\n      &lt;/enter&gt;\n      &lt;exit alias=\"north\" to=\"Room3\"&gt;\n        &lt;inherit name=\"northdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"west\" to=\"Room1\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"Building3\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;object name=\"Room3\"&gt;\n      &lt;inherit name=\"TheRoom\" /&gt;\n      &lt;enter type=\"script\"&gt;\n        Room3.alias = \"Room\\' 3\"\n      &lt;/enter&gt;\n      &lt;exit alias=\"south\" to=\"Room2\"&gt;\n        &lt;inherit name=\"southdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"southwest\" to=\"Room1\"&gt;\n        &lt;inherit name=\"southwestdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  \n  &lt;type name=\"TheRoom\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n\t&lt;SpecialRoom type=\"boolean\"&gt;true&lt;/SpecialRoom&gt;\n  &lt;/type&gt;  \n  \n&lt;/asl&gt;\n</code></pre>\n<p>Your code has too many spaces. Indents. Whatever you call it.</p>\n\n",
      "PostDate": "2017-09-21T23:36:32.5469368Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "855f4475-befd-4dab-9c24-881aff5729d0",
      "UserId": 307193,
      "Username": "lordpalandus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/637feacf8e8a52834eaa284e96f879bf?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well, the code is within huge nested conditionals.\r\n\r\nHere is the general flow of it:\r\n\r\ntype \"buy\" (executes the command)\r\n\r\n1st switch = Choose what you want to buy; say spells.\r\n2nd switch = Choose what tier of spells; say 3rd tier.\r\n3rd switch = Choose which spell you want to buy; say Terrify.\r\nthen\r\nmore conditionals to determine if you have the money, and to ensure that you don't already have the spell to prevent buying something you don't need. If those are acceptable, then you buy the spell and lose the money.\r\n\r\nThat's the general flow of the command. You can buy consumables, spells, weapons, shields, armor, and training.\r\n\r\nI'm sure there is better ways of doing this stuff, but up to now its worked flawlessly. \r\n\r\n=======\r\n\r\nWhen I copied the code, from code view, it had all those spaces already present. So I dunno what to say on the too many indents/spaces. Generally spaces/indents before a < or { or [ has no effect on the compilation process for most other languages, dunno why it would be an issue here. I can understand if you added a space before or after a variable name (ie Spellbook. ArcaneZap), as that would imply a syntax error. \r\n\r\n========\r\n\r\nIts a small portion of my game, actually. If you think this is complex, you should see my spellcasting code or my PlayerUpdates turnscript. \r\n\r\n========\r\n\r\nI agree that assuming one place has the problem code in it is not always the correct place, which is why I tried several different troubleshooting steps, as the program was quite fine to run the script before I added the 7th tier of spells. Somewhere between making and completing it something went wrong. So, I removed the 7th tier, and it still didn't work, so the problem isn't in the 7th tier.",
      "EditableFormat": "markdown",
      "HTML": "<p>Well, the code is within huge nested conditionals.</p>\n<p>Here is the general flow of it:</p>\n<p>type \"buy\" (executes the command)</p>\n<p>1st switch = Choose what you want to buy; say spells.<br>\n2nd switch = Choose what tier of spells; say 3rd tier.<br>\n3rd switch = Choose which spell you want to buy; say Terrify.<br>\nthen<br>\nmore conditionals to determine if you have the money, and to ensure that you don't already have the spell to prevent buying something you don't need. If those are acceptable, then you buy the spell and lose the money.</p>\n<p>That's the general flow of the command. You can buy consumables, spells, weapons, shields, armor, and training.</p>\n<p>I'm sure there is better ways of doing this stuff, but up to now its worked flawlessly.</p>\n<p>=======</p>\n<p>When I copied the code, from code view, it had all those spaces already present. So I dunno what to say on the too many indents/spaces. Generally spaces/indents before a &lt; or { or [ has no effect on the compilation process for most other languages, dunno why it would be an issue here. I can understand if you added a space before or after a variable name (ie Spellbook. ArcaneZap), as that would imply a syntax error.</p>\n<p>========</p>\n<p>Its a small portion of my game, actually. If you think this is complex, you should see my spellcasting code or my PlayerUpdates turnscript.</p>\n<p>========</p>\n<p>I agree that assuming one place has the problem code in it is not always the correct place, which is why I tried several different troubleshooting steps, as the program was quite fine to run the script before I added the 7th tier of spells. Somewhere between making and completing it something went wrong. So, I removed the 7th tier, and it still didn't work, so the problem isn't in the 7th tier.</p>\n\n",
      "PostDate": "2017-09-21T23:51:14.266235Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a1ae56ec-ca65-4847-8bda-05474ca66b12",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@ jmnevil54:\r\n\r\nquest (and many languages too) is (are) programmed to handle indenting, white/blank lines (new lines: \"carriage returns\": terminology still used with computers from the printing press days: the first \"keyboards\" and \"keyboard\" handling, lol), and spaces/white-spaces. Which is wonderful as it makes code easier for humans to understand: read, write, edit, and/or trouble-shoot.\r\n\r\nhis code is only a segment/chunk of code, it's not the entire game code, as he's missing a lot of required code stuff for a full game code (the 'asl' GAME OBJECT and the 'game' Game Settings Object, and etc).\r\n\r\nif you look at the leftmost column (0:null to 31:unit separator), you can see some of these things that came from the first keyboards: printing presses:\r\n\r\nhttp://www.asciitable.com",
      "EditableFormat": "markdown",
      "HTML": "<p>@ jmnevil54:</p>\n<p>quest (and many languages too) is (are) programmed to handle indenting, white/blank lines (new lines: \"carriage returns\": terminology still used with computers from the printing press days: the first \"keyboards\" and \"keyboard\" handling, lol), and spaces/white-spaces. Which is wonderful as it makes code easier for humans to understand: read, write, edit, and/or trouble-shoot.</p>\n<p>his code is only a segment/chunk of code, it's not the entire game code, as he's missing a lot of required code stuff for a full game code (the 'asl' GAME OBJECT and the 'game' Game Settings Object, and etc).</p>\n<p>if you look at the leftmost column (0:null to 31:unit separator), you can see some of these things that came from the first keyboards: printing presses:</p>\n<p>http://www.asciitable.com</p>\n\n",
      "PostDate": "2017-09-21T23:56:39.5709467Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4b613a85-d669-4af2-bfa4-c3b8f62fce39",
      "UserId": 307193,
      "Username": "lordpalandus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/637feacf8e8a52834eaa284e96f879bf?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well. I just removed the entire system of purchasing spells from the code, placed the spell code elsewhere (in a different file) and copied the code without the spell buying code back into my game. \r\n\r\nThe game now loads the script. \r\n\r\nSo...\r\n\r\nHere is the spell purchasing code; as I've narrowed down that the issue is somewhere in this code section, it might help you guys figure out what I did wrong. Code:\r\n\r\n```            case (\"spells\") {\r\n              msg (\"Which level of spells would you like to purchase from? (<b>1st</b>), (<b>2nd</b>), (<b>3rd</b>), (<b>4th</b>), (<b>5th</b>), (<b>6th</b>), (<b>7th</b>)\")\r\n              get input {\r\n                switch (result) {\r\n                  case (\"1st\") {\r\n                    msg (\"First level spells cost <b>100</b> soul shards each. The first level spells available to purchase are:<br/>\")\r\n                    if (Spellbook.KnowMinorHealing = false) {\r\n                      msg (\"Available: (<b>minor healing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMinorAid = false) {\r\n                      msg (\"Available: (<b>minor aid</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowAnalysis = false) {\r\n                      msg (\"Available: (<b>analysis</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMinorRejuvenation = false) {\r\n                      msg (\"Available: (<b>minor rejuvenation</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowArcaneZap = false) {\r\n                      msg (\"Available: (<b>arcane zap</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowFirebolt = false) {\r\n                      msg (\"Available: (<b>firebolt</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"arcane zap\") {\r\n                          if (Spellbook.KnowArcaneZap = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Arcane Zap.\")\r\n                              Spellbook.KnowArcaneZap = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor healing\") {\r\n                          if (Spellbook.KnowMinorHealing = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Minor Healing.\")\r\n                              Spellbook.KnowMinorHealing = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"firebolt\") {\r\n                          if (Spellbook.KnowFirebolt = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Firebolt.\")\r\n                              Spellbook.KnowFirebolt = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor aid\") {\r\n                          if (Spellbook.KnowMinorAid = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Minor Aid.\")\r\n                              Spellbook.KnowMinorAid = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"analysis\") {\r\n                          if (Spellbook.KnowAnalysis = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Analysis.\")\r\n                              Spellbook.KnowAnalysis = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor rejuvenation\") {\r\n                          if (Spellbook.KnowMinorRejuvenation = false) {\r\n                            if (player.SoulShards > 99) {\r\n                              msg (\"<br/>You learn the spell Minor Rejuvenation.\")\r\n                              Spellbook.KnowMinorRejuvenation = true\r\n                              player.SoulShards = player.SoulShards - 100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"2nd\") {\r\n                    msg (\"Second level spells cost <b>300</b> soul shards each. The second level spells available to purchase are:<br/>\")\r\n                    if (Spellbook.KnowMinorBlessing = false) {\r\n                      msg (\"Available: (<b>minor blessing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMinorRegeneration = false) {\r\n                      msg (\"Available: (<b>minor regeneration</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMinorHaste = false) {\r\n                      msg (\"Available: (<b>minor haste</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowRelocate = false) {\r\n                      msg (\"Available: (<b>relocate</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPiercingZap = false) {\r\n                      msg (\"Available: (<b>piercing zap</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowIcyLance = false) {\r\n                      msg (\"Available: (<b>icy lance</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowAcidSpray = false) {\r\n                      msg (\"Available: (<b>acid spray</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"icy lance\") {\r\n                          if (Spellbook.KnowIcyLance = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Icy Lance.\")\r\n                              Spellbook.KnowIcyLance = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor blessing\") {\r\n                          if (Spellbook.KnowMinorBlessing = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Minor Blessing.\")\r\n                              Spellbook.KnowMinorBlessing = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"acid spray\") {\r\n                          if (Spellbook.KnowAcidSpray = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Acid Spray.\")\r\n                              Spellbook.KnowAcidSpray = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"piercing zap\") {\r\n                          if (Spellbook.KnowPiercingZap = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Piercing Zap.\")\r\n                              Spellbook.KnowPiercingZap = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor regeneration\") {\r\n                          if (Spellbook.KnowMinorRegeneration = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Minor Regeneration.\")\r\n                              Spellbook.KnowMinorRegeneration = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"relocate\") {\r\n                          if (Spellbook.KnowRelocate = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Relocate.\")\r\n                              Spellbook.KnowRelocate = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"minor haste\") {\r\n                          if (Spellbook.KnowMinorHaste = false) {\r\n                            if (player.SoulShards > 299) {\r\n                              msg (\"<br/>You learn the spell Minor Haste.\")\r\n                              Spellbook.KnowMinorHaste = true\r\n                              player.SoulShards = player.SoulShards - 300\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"3rd\") {\r\n                    msg (\"Third level spells cost <b>500</b> soul shards each. The third level spells available to purchase are:<br/>\")\r\n                    if (Spellbook.KnowHealing = false) {\r\n                      msg (\"Available: (<b>healing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowSpellPotencyI = false) {\r\n                      msg (\"Available: (<b>spell potency i</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowAid = false) {\r\n                      msg (\"Available: (<b>aid</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowTerrify = false) {\r\n                      msg (\"Available: (<b>terrify</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPiercingLance = false) {\r\n                      msg (\"Available: (<b>piercing lance</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMagicZot = false) {\r\n                      msg (\"Available: (<b>magic zot</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowShockBolt = false) {\r\n                      msg (\"Available: (<b>shock bolt</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"magic zot\") {\r\n                          if (Spellbook.KnowMagicZot = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Magic Zot.\")\r\n                              Spellbook.KnowMagicZot = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"healing\") {\r\n                          if (Spellbook.KnowHealing = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Healing.\")\r\n                              Spellbook.KnowHealing = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"shock bolt\") {\r\n                          if (Spellbook.KnowShockBolt = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Shock Bolt.\")\r\n                              Spellbook.KnowShockBolt = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"piercing lance\") {\r\n                          if (Spellbook.KnowPiercingLance = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Piercing Lance.\")\r\n                              Spellbook.KnowPiercingLance = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"aid\") {\r\n                          if (Spellbook.KnowAid = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Aid.\")\r\n                              Spellbook.KnowAid = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"terrify\") {\r\n                          if (Spellbook.KnowTerrify = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Terrify.\")\r\n                              Spellbook.KnowTerrify = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"spell potency i\") {\r\n                          if (Spellbook.KnowSpellPotencyI = false) {\r\n                            if (player.SoulShards > 499) {\r\n                              msg (\"<br/>You learn the spell Spell Potency I.\")\r\n                              Spellbook.KnowSpellPotencyI = true\r\n                              player.SoulShards = player.SoulShards - 500\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"4th\") {\r\n                    msg (\"Fourth level spells cost <b>700</b> soul shards each. The fourth level spells available to purchase are:<br/>\")\r\n                    if (Spellbook.KnowBlessing = false) {\r\n                      msg (\"Available: (<b>blessing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowRegeneration = false) {\r\n                      msg (\"Available: (<b>regeneration</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowHaste = false) {\r\n                      msg (\"Available: (<b>haste</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowRejuvenation = false) {\r\n                      msg (\"Available: (<b>rejuvenation</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowInvisibility = false) {\r\n                      msg (\"Available: (<b>invisibilty</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPiercingZot = false) {\r\n                      msg (\"Available: (<b>piercing zot</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowFireball = false) {\r\n                      msg (\"Available: (<b>fireball</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowAgony = false) {\r\n                      msg (\"Available: (<b>agony</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"piercing zot\") {\r\n                          if (Spellbook.KnowPiercingZot = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Piercing Zot.\")\r\n                              Spellbook.KnowPiercingZot = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"blessing\") {\r\n                          if (Spellbook.KnowBlessing = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Blessing.\")\r\n                              Spellbook.KnowBlessing = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"agony\") {\r\n                          if (Spellbook.KnowAgony = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Agony.\")\r\n                              Spellbook.KnowAgony = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"fireball\") {\r\n                          if (Spellbook.KnowFireball = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Fireballl.\")\r\n                              Spellbook.KnowFireball = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"regeneration\") {\r\n                          if (Spellbook.KnowRegeneration = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Regeneration.\")\r\n                              Spellbook.KnowRegeneration = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"invisibility\") {\r\n                          if (Spellbook.KnowInvisibility = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Invisibility.\")\r\n                              Spellbook.KnowInvisibility = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"haste\") {\r\n                          if (Spellbook.KnowHaste = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Haste.\")\r\n                              Spellbook.KnowHaste = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"rejuvenation\") {\r\n                          if (Spellbook.KnowRejuvenation = false) {\r\n                            if (player.SoulShards > 699) {\r\n                              msg (\"<br/>You learn the spell Rejuvenation.\")\r\n                              Spellbook.KnowRejuvenation = true\r\n                              player.SoulShards = player.SoulShards - 700\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"5th\") {\r\n                    msg (\"Fifth level spells cost <b>900</b> soul shards each. The fifth level spells available to purchase are:<br/>\")\r\n                    if (Spellbook.KnowMajorHealing = false) {\r\n                      msg (\"Available: (<b>major healing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMajorAid = false) {\r\n                      msg (\"Available: (<b>major aid</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPowerWeaponI = false) {\r\n                      msg (\"Available: (<b>power weapon i</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowForceShieldI = false) {\r\n                      msg (\"Available: (<b>force shield i</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPiercingFireball = false) {\r\n                      msg (\"Available: (<b>piercing fireball</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowConeOfCold = false) {\r\n                      msg (\"Available: (<b>cone of cold</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowExplosion = false) {\r\n                      msg (\"Available: (<b>explosion</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"piercing fireball\") {\r\n                          if (Spellbook.KnowPiercingFireball = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Piercing Fireball.\")\r\n                              Spellbook.KnowPiercingFireball = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"major healing\") {\r\n                          if (Spellbook.KnowMajorHealing = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Major Healing.\")\r\n                              Spellbook.KnowMajorHealing = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"major aid\") {\r\n                          if (Spellbook.KnowMajorAid = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Major Aid.\")\r\n                              Spellbook.KnowMajorAid = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"explosion\") {\r\n                          if (Spellbook.KnowExplosion = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Explosion.\")\r\n                              Spellbook.KnowExplosion = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"cone of cold\") {\r\n                          if (Spellbook.KnowConeOfCold = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Cone of Cold.\")\r\n                              Spellbook.KnowConeOfCold = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"power weapon i\") {\r\n                          if (Spellbook.KnowPowerWeaponI = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Power Weapon I.\")\r\n                              Spellbook.KnowPowerWeaponI = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"force shield i\") {\r\n                          if (Spellbook.KnowForceShieldI = false) {\r\n                            if (player.SoulShards > 899) {\r\n                              msg (\"<br/>You learn the spell Force Shield I.\")\r\n                              Spellbook.KnowForceShieldI = true\r\n                              player.SoulShards = player.SoulShards - 900\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                  case (\"6th\") {\r\n                    msg (\"Sixth level spells cost <b>1100</b> soul shards each. The sixth level spells available to purchase are:<br/>\")\r\n                    if (Spellbook.KnowMajorBlessing = false) {\r\n                      msg (\"Available: (<b>major blessing</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMajorRegeneration = false) {\r\n                      msg (\"Available: (<b>major regeneration</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowMajorHaste = false) {\r\n                      msg (\"Available: (<b>major haste</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowSpellPotencyII = false) {\r\n                      msg (\"Available: (<b>spell potency ii</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowPiercingCold = false) {\r\n                      msg (\"Available: (<b>piercing cold</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowInferno = false) {\r\n                      msg (\"Available: (<b>inferno</b>)\")\r\n                    }\r\n                    if (Spellbook.KnowBlizzard = false) {\r\n                      msg (\"Available: (<b>blizzard</b>)\")\r\n                    }\r\n                    msg (\"Which spell would you like to purchase?\")\r\n                    get input {\r\n                      switch (result) {\r\n                        case (\"piercing cold\") {\r\n                          if (Spellbook.KnowPiercingCold = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Piercing Cold.\")\r\n                              Spellbook.KnowPiercingCold = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"major blessing\") {\r\n                          if (Spellbook.KnowMajorBlessing = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Major Blessing.\")\r\n                              Spellbook.KnowMajorBlessing = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"major regeneration\") {\r\n                          if (Spellbook.KnowMajorRegeneration = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Major Regeneration.\")\r\n                              Spellbook.KnowMajorRegeneration = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"blizzard\") {\r\n                          if (Spellbook.KnowBlizzard = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Blizzard.\")\r\n                              Spellbook.KnowBlizzard = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"inferno\") {\r\n                          if (Spellbook.KnowInferno = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Inferno.\")\r\n                              Spellbook.KnowInferno = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"major haste\") {\r\n                          if (Spellbook.KnowMajorHaste = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Major Haste.\")\r\n                              Spellbook.KnowMajorHaste = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        case (\"spell potency ii\") {\r\n                          if (Spellbook.KnowSpellPotencyII = false) {\r\n                            if (player.SoulShards > 1099) {\r\n                              msg (\"<br/>You learn the spell Spell Potency II.\")\r\n                              Spellbook.KnowSpellPotencyII = true\r\n                              player.SoulShards = player.SoulShards - 1100\r\n                            }\r\n                            else {\r\n                              msg (\"You lack the soul shards.\")\r\n                            }\r\n                          }\r\n                          else {\r\n                            msg (\"You know that spell already.\")\r\n                          }\r\n                        }\r\n                        default {\r\n                          msg (\"You decide to not buy a spell today.\")\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Well. I just removed the entire system of purchasing spells from the code, placed the spell code elsewhere (in a different file) and copied the code without the spell buying code back into my game.</p>\n<p>The game now loads the script.</p>\n<p>So...</p>\n<p>Here is the spell purchasing code; as I've narrowed down that the issue is somewhere in this code section, it might help you guys figure out what I did wrong. Code:</p>\n<pre><code>              msg (\"Which level of spells would you like to purchase from? (&lt;b&gt;1st&lt;/b&gt;), (&lt;b&gt;2nd&lt;/b&gt;), (&lt;b&gt;3rd&lt;/b&gt;), (&lt;b&gt;4th&lt;/b&gt;), (&lt;b&gt;5th&lt;/b&gt;), (&lt;b&gt;6th&lt;/b&gt;), (&lt;b&gt;7th&lt;/b&gt;)\")\n              get input {\n                switch (result) {\n                  case (\"1st\") {\n                    msg (\"First level spells cost &lt;b&gt;100&lt;/b&gt; soul shards each. The first level spells available to purchase are:&lt;br/&gt;\")\n                    if (Spellbook.KnowMinorHealing = false) {\n                      msg (\"Available: (&lt;b&gt;minor healing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMinorAid = false) {\n                      msg (\"Available: (&lt;b&gt;minor aid&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowAnalysis = false) {\n                      msg (\"Available: (&lt;b&gt;analysis&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMinorRejuvenation = false) {\n                      msg (\"Available: (&lt;b&gt;minor rejuvenation&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowArcaneZap = false) {\n                      msg (\"Available: (&lt;b&gt;arcane zap&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowFirebolt = false) {\n                      msg (\"Available: (&lt;b&gt;firebolt&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"arcane zap\") {\n                          if (Spellbook.KnowArcaneZap = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Arcane Zap.\")\n                              Spellbook.KnowArcaneZap = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor healing\") {\n                          if (Spellbook.KnowMinorHealing = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Healing.\")\n                              Spellbook.KnowMinorHealing = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"firebolt\") {\n                          if (Spellbook.KnowFirebolt = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Firebolt.\")\n                              Spellbook.KnowFirebolt = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor aid\") {\n                          if (Spellbook.KnowMinorAid = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Aid.\")\n                              Spellbook.KnowMinorAid = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"analysis\") {\n                          if (Spellbook.KnowAnalysis = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Analysis.\")\n                              Spellbook.KnowAnalysis = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor rejuvenation\") {\n                          if (Spellbook.KnowMinorRejuvenation = false) {\n                            if (player.SoulShards &gt; 99) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Rejuvenation.\")\n                              Spellbook.KnowMinorRejuvenation = true\n                              player.SoulShards = player.SoulShards - 100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n                  case (\"2nd\") {\n                    msg (\"Second level spells cost &lt;b&gt;300&lt;/b&gt; soul shards each. The second level spells available to purchase are:&lt;br/&gt;\")\n                    if (Spellbook.KnowMinorBlessing = false) {\n                      msg (\"Available: (&lt;b&gt;minor blessing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMinorRegeneration = false) {\n                      msg (\"Available: (&lt;b&gt;minor regeneration&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMinorHaste = false) {\n                      msg (\"Available: (&lt;b&gt;minor haste&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowRelocate = false) {\n                      msg (\"Available: (&lt;b&gt;relocate&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPiercingZap = false) {\n                      msg (\"Available: (&lt;b&gt;piercing zap&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowIcyLance = false) {\n                      msg (\"Available: (&lt;b&gt;icy lance&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowAcidSpray = false) {\n                      msg (\"Available: (&lt;b&gt;acid spray&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"icy lance\") {\n                          if (Spellbook.KnowIcyLance = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Icy Lance.\")\n                              Spellbook.KnowIcyLance = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor blessing\") {\n                          if (Spellbook.KnowMinorBlessing = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Blessing.\")\n                              Spellbook.KnowMinorBlessing = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"acid spray\") {\n                          if (Spellbook.KnowAcidSpray = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Acid Spray.\")\n                              Spellbook.KnowAcidSpray = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"piercing zap\") {\n                          if (Spellbook.KnowPiercingZap = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Piercing Zap.\")\n                              Spellbook.KnowPiercingZap = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor regeneration\") {\n                          if (Spellbook.KnowMinorRegeneration = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Regeneration.\")\n                              Spellbook.KnowMinorRegeneration = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"relocate\") {\n                          if (Spellbook.KnowRelocate = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Relocate.\")\n                              Spellbook.KnowRelocate = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"minor haste\") {\n                          if (Spellbook.KnowMinorHaste = false) {\n                            if (player.SoulShards &gt; 299) {\n                              msg (\"&lt;br/&gt;You learn the spell Minor Haste.\")\n                              Spellbook.KnowMinorHaste = true\n                              player.SoulShards = player.SoulShards - 300\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n                  case (\"3rd\") {\n                    msg (\"Third level spells cost &lt;b&gt;500&lt;/b&gt; soul shards each. The third level spells available to purchase are:&lt;br/&gt;\")\n                    if (Spellbook.KnowHealing = false) {\n                      msg (\"Available: (&lt;b&gt;healing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowSpellPotencyI = false) {\n                      msg (\"Available: (&lt;b&gt;spell potency i&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowAid = false) {\n                      msg (\"Available: (&lt;b&gt;aid&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowTerrify = false) {\n                      msg (\"Available: (&lt;b&gt;terrify&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPiercingLance = false) {\n                      msg (\"Available: (&lt;b&gt;piercing lance&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMagicZot = false) {\n                      msg (\"Available: (&lt;b&gt;magic zot&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowShockBolt = false) {\n                      msg (\"Available: (&lt;b&gt;shock bolt&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"magic zot\") {\n                          if (Spellbook.KnowMagicZot = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Magic Zot.\")\n                              Spellbook.KnowMagicZot = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"healing\") {\n                          if (Spellbook.KnowHealing = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Healing.\")\n                              Spellbook.KnowHealing = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"shock bolt\") {\n                          if (Spellbook.KnowShockBolt = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Shock Bolt.\")\n                              Spellbook.KnowShockBolt = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"piercing lance\") {\n                          if (Spellbook.KnowPiercingLance = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Piercing Lance.\")\n                              Spellbook.KnowPiercingLance = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"aid\") {\n                          if (Spellbook.KnowAid = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Aid.\")\n                              Spellbook.KnowAid = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"terrify\") {\n                          if (Spellbook.KnowTerrify = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Terrify.\")\n                              Spellbook.KnowTerrify = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"spell potency i\") {\n                          if (Spellbook.KnowSpellPotencyI = false) {\n                            if (player.SoulShards &gt; 499) {\n                              msg (\"&lt;br/&gt;You learn the spell Spell Potency I.\")\n                              Spellbook.KnowSpellPotencyI = true\n                              player.SoulShards = player.SoulShards - 500\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n                  case (\"4th\") {\n                    msg (\"Fourth level spells cost &lt;b&gt;700&lt;/b&gt; soul shards each. The fourth level spells available to purchase are:&lt;br/&gt;\")\n                    if (Spellbook.KnowBlessing = false) {\n                      msg (\"Available: (&lt;b&gt;blessing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowRegeneration = false) {\n                      msg (\"Available: (&lt;b&gt;regeneration&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowHaste = false) {\n                      msg (\"Available: (&lt;b&gt;haste&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowRejuvenation = false) {\n                      msg (\"Available: (&lt;b&gt;rejuvenation&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowInvisibility = false) {\n                      msg (\"Available: (&lt;b&gt;invisibilty&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPiercingZot = false) {\n                      msg (\"Available: (&lt;b&gt;piercing zot&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowFireball = false) {\n                      msg (\"Available: (&lt;b&gt;fireball&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowAgony = false) {\n                      msg (\"Available: (&lt;b&gt;agony&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"piercing zot\") {\n                          if (Spellbook.KnowPiercingZot = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Piercing Zot.\")\n                              Spellbook.KnowPiercingZot = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"blessing\") {\n                          if (Spellbook.KnowBlessing = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Blessing.\")\n                              Spellbook.KnowBlessing = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"agony\") {\n                          if (Spellbook.KnowAgony = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Agony.\")\n                              Spellbook.KnowAgony = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"fireball\") {\n                          if (Spellbook.KnowFireball = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Fireballl.\")\n                              Spellbook.KnowFireball = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"regeneration\") {\n                          if (Spellbook.KnowRegeneration = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Regeneration.\")\n                              Spellbook.KnowRegeneration = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"invisibility\") {\n                          if (Spellbook.KnowInvisibility = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Invisibility.\")\n                              Spellbook.KnowInvisibility = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"haste\") {\n                          if (Spellbook.KnowHaste = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Haste.\")\n                              Spellbook.KnowHaste = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"rejuvenation\") {\n                          if (Spellbook.KnowRejuvenation = false) {\n                            if (player.SoulShards &gt; 699) {\n                              msg (\"&lt;br/&gt;You learn the spell Rejuvenation.\")\n                              Spellbook.KnowRejuvenation = true\n                              player.SoulShards = player.SoulShards - 700\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n                  case (\"5th\") {\n                    msg (\"Fifth level spells cost &lt;b&gt;900&lt;/b&gt; soul shards each. The fifth level spells available to purchase are:&lt;br/&gt;\")\n                    if (Spellbook.KnowMajorHealing = false) {\n                      msg (\"Available: (&lt;b&gt;major healing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMajorAid = false) {\n                      msg (\"Available: (&lt;b&gt;major aid&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPowerWeaponI = false) {\n                      msg (\"Available: (&lt;b&gt;power weapon i&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowForceShieldI = false) {\n                      msg (\"Available: (&lt;b&gt;force shield i&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPiercingFireball = false) {\n                      msg (\"Available: (&lt;b&gt;piercing fireball&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowConeOfCold = false) {\n                      msg (\"Available: (&lt;b&gt;cone of cold&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowExplosion = false) {\n                      msg (\"Available: (&lt;b&gt;explosion&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"piercing fireball\") {\n                          if (Spellbook.KnowPiercingFireball = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Piercing Fireball.\")\n                              Spellbook.KnowPiercingFireball = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"major healing\") {\n                          if (Spellbook.KnowMajorHealing = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Major Healing.\")\n                              Spellbook.KnowMajorHealing = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"major aid\") {\n                          if (Spellbook.KnowMajorAid = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Major Aid.\")\n                              Spellbook.KnowMajorAid = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"explosion\") {\n                          if (Spellbook.KnowExplosion = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Explosion.\")\n                              Spellbook.KnowExplosion = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"cone of cold\") {\n                          if (Spellbook.KnowConeOfCold = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Cone of Cold.\")\n                              Spellbook.KnowConeOfCold = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"power weapon i\") {\n                          if (Spellbook.KnowPowerWeaponI = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Power Weapon I.\")\n                              Spellbook.KnowPowerWeaponI = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"force shield i\") {\n                          if (Spellbook.KnowForceShieldI = false) {\n                            if (player.SoulShards &gt; 899) {\n                              msg (\"&lt;br/&gt;You learn the spell Force Shield I.\")\n                              Spellbook.KnowForceShieldI = true\n                              player.SoulShards = player.SoulShards - 900\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n                  case (\"6th\") {\n                    msg (\"Sixth level spells cost &lt;b&gt;1100&lt;/b&gt; soul shards each. The sixth level spells available to purchase are:&lt;br/&gt;\")\n                    if (Spellbook.KnowMajorBlessing = false) {\n                      msg (\"Available: (&lt;b&gt;major blessing&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMajorRegeneration = false) {\n                      msg (\"Available: (&lt;b&gt;major regeneration&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowMajorHaste = false) {\n                      msg (\"Available: (&lt;b&gt;major haste&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowSpellPotencyII = false) {\n                      msg (\"Available: (&lt;b&gt;spell potency ii&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowPiercingCold = false) {\n                      msg (\"Available: (&lt;b&gt;piercing cold&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowInferno = false) {\n                      msg (\"Available: (&lt;b&gt;inferno&lt;/b&gt;)\")\n                    }\n                    if (Spellbook.KnowBlizzard = false) {\n                      msg (\"Available: (&lt;b&gt;blizzard&lt;/b&gt;)\")\n                    }\n                    msg (\"Which spell would you like to purchase?\")\n                    get input {\n                      switch (result) {\n                        case (\"piercing cold\") {\n                          if (Spellbook.KnowPiercingCold = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Piercing Cold.\")\n                              Spellbook.KnowPiercingCold = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"major blessing\") {\n                          if (Spellbook.KnowMajorBlessing = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Major Blessing.\")\n                              Spellbook.KnowMajorBlessing = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"major regeneration\") {\n                          if (Spellbook.KnowMajorRegeneration = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Major Regeneration.\")\n                              Spellbook.KnowMajorRegeneration = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"blizzard\") {\n                          if (Spellbook.KnowBlizzard = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Blizzard.\")\n                              Spellbook.KnowBlizzard = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"inferno\") {\n                          if (Spellbook.KnowInferno = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Inferno.\")\n                              Spellbook.KnowInferno = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"major haste\") {\n                          if (Spellbook.KnowMajorHaste = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Major Haste.\")\n                              Spellbook.KnowMajorHaste = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        case (\"spell potency ii\") {\n                          if (Spellbook.KnowSpellPotencyII = false) {\n                            if (player.SoulShards &gt; 1099) {\n                              msg (\"&lt;br/&gt;You learn the spell Spell Potency II.\")\n                              Spellbook.KnowSpellPotencyII = true\n                              player.SoulShards = player.SoulShards - 1100\n                            }\n                            else {\n                              msg (\"You lack the soul shards.\")\n                            }\n                          }\n                          else {\n                            msg (\"You know that spell already.\")\n                          }\n                        }\n                        default {\n                          msg (\"You decide to not buy a spell today.\")\n                        }\n                      }\n                    }\n                  }\n</code></pre>\n\n",
      "PostDate": "2017-09-21T23:56:54.704614Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f3fe3bfa-a54d-45f7-895b-3a7b8944a44f",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@ lord palandus:\r\n\r\nan obvious possibility (and bad assumption, lol. I told you I love assumptions too, even though usually am wrong):\r\n\r\ncheck your scripting 'order of operations', if you're nesting/indenting and/or location of scripts is off, it'll cause issues.\r\n\r\nALSO: if you do any looping and/or having multiple blocks of code running at the same time, when using any of the code that gets user input ('get input', 'show menu / ShowMenu', 'ask / Ask', Commands, etc), you'll have errors too. You got to be really careful with scripting's 'order of operations' with getting user input, as with quest, it doesn't have anything (without getting into the technicality that some other thread explained about --- I should favorite/bookmark that thread, lol) that halts/stops scripts from running, unfortunately.\r\n\r\n------\r\n\r\nalso, keep cutting out chunks of that code and again and again... until you whittle it down to the very small segment of code that is the actual problem (hopefully, you don't have multiple errors spread out... that's more difficult to trouble-shoot, obviously).\r\n\r\n---------\r\n\r\nit'll likely be some typo or missing character/symbol... but with how much code you got right now... it'll be hard to find...\r\n\r\nhence why you got to narrow down your offending code... to what is the actual chunk of offending code. That's too much code to find some small typo / missing character/symbol... as these errors are very hard things to find/notice... unfortunately.",
      "EditableFormat": "markdown",
      "HTML": "<p>@ lord palandus:</p>\n<p>an obvious possibility (and bad assumption, lol. I told you I love assumptions too, even though usually am wrong):</p>\n<p>check your scripting 'order of operations', if you're nesting/indenting and/or location of scripts is off, it'll cause issues.</p>\n<p>ALSO: if you do any looping and/or having multiple blocks of code running at the same time, when using any of the code that gets user input ('get input', 'show menu / ShowMenu', 'ask / Ask', Commands, etc), you'll have errors too. You got to be really careful with scripting's 'order of operations' with getting user input, as with quest, it doesn't have anything (without getting into the technicality that some other thread explained about --- I should favorite/bookmark that thread, lol) that halts/stops scripts from running, unfortunately.</p>\n<hr>\n<p>also, keep cutting out chunks of that code and again and again... until you whittle it down to the very small segment of code that is the actual problem (hopefully, you don't have multiple errors spread out... that's more difficult to trouble-shoot, obviously).</p>\n<hr>\n<p>it'll likely be some typo or missing character/symbol... but with how much code you got right now... it'll be hard to find...</p>\n<p>hence why you got to narrow down your offending code... to what is the actual chunk of offending code. That's too much code to find some small typo / missing character/symbol... as these errors are very hard things to find/notice... unfortunately.</p>\n\n",
      "PostDate": "2017-09-22T00:03:14.1929929Z",
      "LastEditDate": "2017-09-22T00:09:22.7092761Z",
      "link": null
    },
    {
      "PostId": "1e12d14b-a708-4c28-97bb-99b24f5c1aa4",
      "UserId": 307193,
      "Username": "lordpalandus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/637feacf8e8a52834eaa284e96f879bf?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "1. I've been doing all of this nesting and order of operations within the UI, and not the code view. I can understand me making a mistake in the order of operations if I was doing it in code view, but the issue occurred while doing it in the UI view.\r\n\r\n2. Order of operations was working flawlessly until I added the new spells today. I didn't touch the order of operations at all when I added the new spells, so order of operations shouldn't be the issue.\r\n\r\n3. Most of the time though, it will spew an error about such a situation of having two things asking for input at the same time, or would hang, if I created an infinite loop. This is the first time it has refused to load the script after doing work in the UI only.\r\n\r\n4. The only things I did was add new spells to the command. And fix one spell that was using the old system that I had missed when I refactored the spell buy code in V3 (which is operational and has no issues) Its possible that that spell was borked and by messing with it borked the rest of the command. That spell was LV6, Inferno, for reference. \r\n\r\n5. I'll try cutting Inferno spell, and see if it accepts that.\r\n\r\n6. I dunno, but if it was a missing character or variable it would scream at me about incorrect syntax. This situation is entirely different.",
      "EditableFormat": "markdown",
      "HTML": "<ol>\n<li>\n<p>I've been doing all of this nesting and order of operations within the UI, and not the code view. I can understand me making a mistake in the order of operations if I was doing it in code view, but the issue occurred while doing it in the UI view.</p>\n</li>\n<li>\n<p>Order of operations was working flawlessly until I added the new spells today. I didn't touch the order of operations at all when I added the new spells, so order of operations shouldn't be the issue.</p>\n</li>\n<li>\n<p>Most of the time though, it will spew an error about such a situation of having two things asking for input at the same time, or would hang, if I created an infinite loop. This is the first time it has refused to load the script after doing work in the UI only.</p>\n</li>\n<li>\n<p>The only things I did was add new spells to the command. And fix one spell that was using the old system that I had missed when I refactored the spell buy code in V3 (which is operational and has no issues) Its possible that that spell was borked and by messing with it borked the rest of the command. That spell was LV6, Inferno, for reference.</p>\n</li>\n<li>\n<p>I'll try cutting Inferno spell, and see if it accepts that.</p>\n</li>\n<li>\n<p>I dunno, but if it was a missing character or variable it would scream at me about incorrect syntax. This situation is entirely different.</p>\n</li>\n</ol>\n\n",
      "PostDate": "2017-09-22T00:22:50.2885851Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8459f94a-e9a9-4bd0-a557-9a6a23435c5c",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think it needs two more lines at the end with just a } on each.",
      "EditableFormat": "markdown",
      "HTML": "<p>I think it needs two more lines at the end with just a } on each.</p>\n\n",
      "PostDate": "2017-09-22T07:01:44.8331714Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1d05ffda-bcfb-42cf-92e9-498f3a66420e",
      "UserId": 307193,
      "Username": "lordpalandus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/637feacf8e8a52834eaa284e96f879bf?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Added two more end squiggly brackets (  }  ) and still fails to load. Even tried just one and it still fails to load.\r\n\r\nAlso tried removing the offending spell Inferno and that didn't do it.\r\n\r\nSo, its looking like I'll just have to rebuild the spell purchasing code; better than having to rebuild everything, but I can't figure out the issue with the code. But, now that I HAVE to rebuild it, I might as well figure out a better way of doing it, right! So, I might be able to implement a better system with a List or possibly a Dictionary. Can lists or dictionaries be created beforehand (before the game starts) or are they only available at runtime?",
      "EditableFormat": "markdown",
      "HTML": "<p>Added two more end squiggly brackets (  }  ) and still fails to load. Even tried just one and it still fails to load.</p>\n<p>Also tried removing the offending spell Inferno and that didn't do it.</p>\n<p>So, its looking like I'll just have to rebuild the spell purchasing code; better than having to rebuild everything, but I can't figure out the issue with the code. But, now that I HAVE to rebuild it, I might as well figure out a better way of doing it, right! So, I might be able to implement a better system with a List or possibly a Dictionary. Can lists or dictionaries be created beforehand (before the game starts) or are they only available at runtime?</p>\n\n",
      "PostDate": "2017-09-22T15:06:35.0293245Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "686e92f2-f48f-489e-90bd-8a12bb9140e7",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The lack of literal dictionaries and lists was one of the hardest things for me to get used to in Quest. Most of the time, for a string list you can get away with doing something like `directions = Split(\"north;south;east;west\", \";\")` for a List.\r\n\r\nOr you can use objects; create an object for each spell, with attributes to determine its cost.\r\nIf I was doing something like this I'd probably use objects, and use Quest's parser to match the player's input against the names. That's a stylistic choice, though; if you want the player to have to type the exact spell name, or allow abbreviations.",
      "EditableFormat": "markdown",
      "HTML": "<p>The lack of literal dictionaries and lists was one of the hardest things for me to get used to in Quest. Most of the time, for a string list you can get away with doing something like <code>directions = Split(\"north;south;east;west\", \";\")</code> for a List.</p>\n<p>Or you can use objects; create an object for each spell, with attributes to determine its cost.<br>\nIf I was doing something like this I'd probably use objects, and use Quest's parser to match the player's input against the names. That's a stylistic choice, though; if you want the player to have to type the exact spell name, or allow abbreviations.</p>\n\n",
      "PostDate": "2017-09-22T16:00:15.6847958Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a1ef3f6f-7650-4a2d-b797-b2403e0be766",
      "UserId": 307193,
      "Username": "lordpalandus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/637feacf8e8a52834eaa284e96f879bf?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well, the way I handle spells is by flags, variables, and Booleans attached to a single object, the Spellbook. Likely, I'd have to use a string list, otherwise I'd be looking at a complete redesign of the entire game, if I were to go the object route. Plus, wouldn't you have to have the objects on hand/visible/in inventory, if you went the object route, for doing spells?",
      "EditableFormat": "markdown",
      "HTML": "<p>Well, the way I handle spells is by flags, variables, and Booleans attached to a single object, the Spellbook. Likely, I'd have to use a string list, otherwise I'd be looking at a complete redesign of the entire game, if I were to go the object route. Plus, wouldn't you have to have the objects on hand/visible/in inventory, if you went the object route, for doing spells?</p>\n\n",
      "PostDate": "2017-09-22T16:23:17.1781466Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "995b293e-9a72-4968-ba01-9200f4b2db83",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">  Added two more end squiggly brackets ( } ) and still fails to load. Even tried just one and it still fails to load.\r\n\r\nI added an object \"Spellbook\" to a game, then added a command \"test\", pasted in your code, added two } at the end, and the game will play (the command gives an error because Spellbook is missing some attributes though).",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Added two more end squiggly brackets ( } ) and still fails to load. Even tried just one and it still fails to load.</p>\n</blockquote>\n<p>I added an object \"Spellbook\" to a game, then added a command \"test\", pasted in your code, added two } at the end, and the game will play (the command gives an error because Spellbook is missing some attributes though).</p>\n\n",
      "PostDate": "2017-09-22T19:01:04.348458Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9282b9b4-88d6-44b1-8096-927a7f13360d",
      "UserId": 307193,
      "Username": "lordpalandus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/637feacf8e8a52834eaa284e96f879bf?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well then there must be something wrong with my project, in general then.\r\n\r\nBecause I pasted the entire buy command, plus two extra } at the end in a separate command with the spell buy code and it won't accept it. And I tried pasting the entire spell buy code all buy itself in a separate command, with two extra } at the end, and it didn't work either.\r\n\r\nI also tried pasting the code in a completely different project with two extra } at the end of the spell buy code and it still fails to load.\r\n\r\nDunno why it is working for you though.\r\n\r\nMind pasting the code that you fixed and I'll see if it works on my end too?",
      "EditableFormat": "markdown",
      "HTML": "<p>Well then there must be something wrong with my project, in general then.</p>\n<p>Because I pasted the entire buy command, plus two extra } at the end in a separate command with the spell buy code and it won't accept it. And I tried pasting the entire spell buy code all buy itself in a separate command, with two extra } at the end, and it didn't work either.</p>\n<p>I also tried pasting the code in a completely different project with two extra } at the end of the spell buy code and it still fails to load.</p>\n<p>Dunno why it is working for you though.</p>\n<p>Mind pasting the code that you fixed and I'll see if it works on my end too?</p>\n\n",
      "PostDate": "2017-09-22T20:28:06.7518098Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "be4c66a0-c153-4e13-8c7e-f0c2a2104f60",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here is a whole game:\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"push dir\">\r\n    <gameid>6d8e63c1-d3fd-41e5-8499-2d717e5399a3</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <start type=\"script\">\r\n    </start>\r\n    <object name=\"Spellbook\">\r\n      <inherit name=\"editor_object\" />\r\n    </object>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <command>\r\n    <pattern>test</pattern>\r\n    <script><![CDATA[\r\n      msg (\"Which level of spells would you like to purchase from? (<b>1st</b>), (<b>2nd</b>), (<b>3rd</b>), (<b>4th</b>), (<b>5th</b>), (<b>6th</b>), (<b>7th</b>)\")\r\n      get input {\r\n        switch (result) {\r\n          case (\"1st\") {\r\n            msg (\"First level spells cost <b>100</b> soul shards each. The first level spells available to purchase are:<br/>\")\r\n            if (Spellbook.KnowMinorHealing = false) {\r\n              msg (\"Available: (<b>minor healing</b>)\")\r\n            }\r\n            if (Spellbook.KnowMinorAid = false) {\r\n              msg (\"Available: (<b>minor aid</b>)\")\r\n            }\r\n            if (Spellbook.KnowAnalysis = false) {\r\n              msg (\"Available: (<b>analysis</b>)\")\r\n            }\r\n            if (Spellbook.KnowMinorRejuvenation = false) {\r\n              msg (\"Available: (<b>minor rejuvenation</b>)\")\r\n            }\r\n            if (Spellbook.KnowArcaneZap = false) {\r\n              msg (\"Available: (<b>arcane zap</b>)\")\r\n            }\r\n            if (Spellbook.KnowFirebolt = false) {\r\n              msg (\"Available: (<b>firebolt</b>)\")\r\n            }\r\n            msg (\"Which spell would you like to purchase?\")\r\n            get input {\r\n              switch (result) {\r\n                case (\"arcane zap\") {\r\n                  if (Spellbook.KnowArcaneZap = false) {\r\n                    if (player.SoulShards > 99) {\r\n                      msg (\"<br/>You learn the spell Arcane Zap.\")\r\n                      Spellbook.KnowArcaneZap = true\r\n                      player.SoulShards = player.SoulShards - 100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"minor healing\") {\r\n                  if (Spellbook.KnowMinorHealing = false) {\r\n                    if (player.SoulShards > 99) {\r\n                      msg (\"<br/>You learn the spell Minor Healing.\")\r\n                      Spellbook.KnowMinorHealing = true\r\n                      player.SoulShards = player.SoulShards - 100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"firebolt\") {\r\n                  if (Spellbook.KnowFirebolt = false) {\r\n                    if (player.SoulShards > 99) {\r\n                      msg (\"<br/>You learn the spell Firebolt.\")\r\n                      Spellbook.KnowFirebolt = true\r\n                      player.SoulShards = player.SoulShards - 100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"minor aid\") {\r\n                  if (Spellbook.KnowMinorAid = false) {\r\n                    if (player.SoulShards > 99) {\r\n                      msg (\"<br/>You learn the spell Minor Aid.\")\r\n                      Spellbook.KnowMinorAid = true\r\n                      player.SoulShards = player.SoulShards - 100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"analysis\") {\r\n                  if (Spellbook.KnowAnalysis = false) {\r\n                    if (player.SoulShards > 99) {\r\n                      msg (\"<br/>You learn the spell Analysis.\")\r\n                      Spellbook.KnowAnalysis = true\r\n                      player.SoulShards = player.SoulShards - 100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"minor rejuvenation\") {\r\n                  if (Spellbook.KnowMinorRejuvenation = false) {\r\n                    if (player.SoulShards > 99) {\r\n                      msg (\"<br/>You learn the spell Minor Rejuvenation.\")\r\n                      Spellbook.KnowMinorRejuvenation = true\r\n                      player.SoulShards = player.SoulShards - 100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                default {\r\n                  msg (\"You decide to not buy a spell today.\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n          case (\"2nd\") {\r\n            msg (\"Second level spells cost <b>300</b> soul shards each. The second level spells available to purchase are:<br/>\")\r\n            if (Spellbook.KnowMinorBlessing = false) {\r\n              msg (\"Available: (<b>minor blessing</b>)\")\r\n            }\r\n            if (Spellbook.KnowMinorRegeneration = false) {\r\n              msg (\"Available: (<b>minor regeneration</b>)\")\r\n            }\r\n            if (Spellbook.KnowMinorHaste = false) {\r\n              msg (\"Available: (<b>minor haste</b>)\")\r\n            }\r\n            if (Spellbook.KnowRelocate = false) {\r\n              msg (\"Available: (<b>relocate</b>)\")\r\n            }\r\n            if (Spellbook.KnowPiercingZap = false) {\r\n              msg (\"Available: (<b>piercing zap</b>)\")\r\n            }\r\n            if (Spellbook.KnowIcyLance = false) {\r\n              msg (\"Available: (<b>icy lance</b>)\")\r\n            }\r\n            if (Spellbook.KnowAcidSpray = false) {\r\n              msg (\"Available: (<b>acid spray</b>)\")\r\n            }\r\n            msg (\"Which spell would you like to purchase?\")\r\n            get input {\r\n              switch (result) {\r\n                case (\"icy lance\") {\r\n                  if (Spellbook.KnowIcyLance = false) {\r\n                    if (player.SoulShards > 299) {\r\n                      msg (\"<br/>You learn the spell Icy Lance.\")\r\n                      Spellbook.KnowIcyLance = true\r\n                      player.SoulShards = player.SoulShards - 300\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"minor blessing\") {\r\n                  if (Spellbook.KnowMinorBlessing = false) {\r\n                    if (player.SoulShards > 299) {\r\n                      msg (\"<br/>You learn the spell Minor Blessing.\")\r\n                      Spellbook.KnowMinorBlessing = true\r\n                      player.SoulShards = player.SoulShards - 300\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"acid spray\") {\r\n                  if (Spellbook.KnowAcidSpray = false) {\r\n                    if (player.SoulShards > 299) {\r\n                      msg (\"<br/>You learn the spell Acid Spray.\")\r\n                      Spellbook.KnowAcidSpray = true\r\n                      player.SoulShards = player.SoulShards - 300\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"piercing zap\") {\r\n                  if (Spellbook.KnowPiercingZap = false) {\r\n                    if (player.SoulShards > 299) {\r\n                      msg (\"<br/>You learn the spell Piercing Zap.\")\r\n                      Spellbook.KnowPiercingZap = true\r\n                      player.SoulShards = player.SoulShards - 300\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"minor regeneration\") {\r\n                  if (Spellbook.KnowMinorRegeneration = false) {\r\n                    if (player.SoulShards > 299) {\r\n                      msg (\"<br/>You learn the spell Minor Regeneration.\")\r\n                      Spellbook.KnowMinorRegeneration = true\r\n                      player.SoulShards = player.SoulShards - 300\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"relocate\") {\r\n                  if (Spellbook.KnowRelocate = false) {\r\n                    if (player.SoulShards > 299) {\r\n                      msg (\"<br/>You learn the spell Relocate.\")\r\n                      Spellbook.KnowRelocate = true\r\n                      player.SoulShards = player.SoulShards - 300\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"minor haste\") {\r\n                  if (Spellbook.KnowMinorHaste = false) {\r\n                    if (player.SoulShards > 299) {\r\n                      msg (\"<br/>You learn the spell Minor Haste.\")\r\n                      Spellbook.KnowMinorHaste = true\r\n                      player.SoulShards = player.SoulShards - 300\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                default {\r\n                  msg (\"You decide to not buy a spell today.\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n          case (\"3rd\") {\r\n            msg (\"Third level spells cost <b>500</b> soul shards each. The third level spells available to purchase are:<br/>\")\r\n            if (Spellbook.KnowHealing = false) {\r\n              msg (\"Available: (<b>healing</b>)\")\r\n            }\r\n            if (Spellbook.KnowSpellPotencyI = false) {\r\n              msg (\"Available: (<b>spell potency i</b>)\")\r\n            }\r\n            if (Spellbook.KnowAid = false) {\r\n              msg (\"Available: (<b>aid</b>)\")\r\n            }\r\n            if (Spellbook.KnowTerrify = false) {\r\n              msg (\"Available: (<b>terrify</b>)\")\r\n            }\r\n            if (Spellbook.KnowPiercingLance = false) {\r\n              msg (\"Available: (<b>piercing lance</b>)\")\r\n            }\r\n            if (Spellbook.KnowMagicZot = false) {\r\n              msg (\"Available: (<b>magic zot</b>)\")\r\n            }\r\n            if (Spellbook.KnowShockBolt = false) {\r\n              msg (\"Available: (<b>shock bolt</b>)\")\r\n            }\r\n            msg (\"Which spell would you like to purchase?\")\r\n            get input {\r\n              switch (result) {\r\n                case (\"magic zot\") {\r\n                  if (Spellbook.KnowMagicZot = false) {\r\n                    if (player.SoulShards > 499) {\r\n                      msg (\"<br/>You learn the spell Magic Zot.\")\r\n                      Spellbook.KnowMagicZot = true\r\n                      player.SoulShards = player.SoulShards - 500\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"healing\") {\r\n                  if (Spellbook.KnowHealing = false) {\r\n                    if (player.SoulShards > 499) {\r\n                      msg (\"<br/>You learn the spell Healing.\")\r\n                      Spellbook.KnowHealing = true\r\n                      player.SoulShards = player.SoulShards - 500\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"shock bolt\") {\r\n                  if (Spellbook.KnowShockBolt = false) {\r\n                    if (player.SoulShards > 499) {\r\n                      msg (\"<br/>You learn the spell Shock Bolt.\")\r\n                      Spellbook.KnowShockBolt = true\r\n                      player.SoulShards = player.SoulShards - 500\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"piercing lance\") {\r\n                  if (Spellbook.KnowPiercingLance = false) {\r\n                    if (player.SoulShards > 499) {\r\n                      msg (\"<br/>You learn the spell Piercing Lance.\")\r\n                      Spellbook.KnowPiercingLance = true\r\n                      player.SoulShards = player.SoulShards - 500\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"aid\") {\r\n                  if (Spellbook.KnowAid = false) {\r\n                    if (player.SoulShards > 499) {\r\n                      msg (\"<br/>You learn the spell Aid.\")\r\n                      Spellbook.KnowAid = true\r\n                      player.SoulShards = player.SoulShards - 500\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"terrify\") {\r\n                  if (Spellbook.KnowTerrify = false) {\r\n                    if (player.SoulShards > 499) {\r\n                      msg (\"<br/>You learn the spell Terrify.\")\r\n                      Spellbook.KnowTerrify = true\r\n                      player.SoulShards = player.SoulShards - 500\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"spell potency i\") {\r\n                  if (Spellbook.KnowSpellPotencyI = false) {\r\n                    if (player.SoulShards > 499) {\r\n                      msg (\"<br/>You learn the spell Spell Potency I.\")\r\n                      Spellbook.KnowSpellPotencyI = true\r\n                      player.SoulShards = player.SoulShards - 500\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                default {\r\n                  msg (\"You decide to not buy a spell today.\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n          case (\"4th\") {\r\n            msg (\"Fourth level spells cost <b>700</b> soul shards each. The fourth level spells available to purchase are:<br/>\")\r\n            if (Spellbook.KnowBlessing = false) {\r\n              msg (\"Available: (<b>blessing</b>)\")\r\n            }\r\n            if (Spellbook.KnowRegeneration = false) {\r\n              msg (\"Available: (<b>regeneration</b>)\")\r\n            }\r\n            if (Spellbook.KnowHaste = false) {\r\n              msg (\"Available: (<b>haste</b>)\")\r\n            }\r\n            if (Spellbook.KnowRejuvenation = false) {\r\n              msg (\"Available: (<b>rejuvenation</b>)\")\r\n            }\r\n            if (Spellbook.KnowInvisibility = false) {\r\n              msg (\"Available: (<b>invisibilty</b>)\")\r\n            }\r\n            if (Spellbook.KnowPiercingZot = false) {\r\n              msg (\"Available: (<b>piercing zot</b>)\")\r\n            }\r\n            if (Spellbook.KnowFireball = false) {\r\n              msg (\"Available: (<b>fireball</b>)\")\r\n            }\r\n            if (Spellbook.KnowAgony = false) {\r\n              msg (\"Available: (<b>agony</b>)\")\r\n            }\r\n            msg (\"Which spell would you like to purchase?\")\r\n            get input {\r\n              switch (result) {\r\n                case (\"piercing zot\") {\r\n                  if (Spellbook.KnowPiercingZot = false) {\r\n                    if (player.SoulShards > 699) {\r\n                      msg (\"<br/>You learn the spell Piercing Zot.\")\r\n                      Spellbook.KnowPiercingZot = true\r\n                      player.SoulShards = player.SoulShards - 700\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"blessing\") {\r\n                  if (Spellbook.KnowBlessing = false) {\r\n                    if (player.SoulShards > 699) {\r\n                      msg (\"<br/>You learn the spell Blessing.\")\r\n                      Spellbook.KnowBlessing = true\r\n                      player.SoulShards = player.SoulShards - 700\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"agony\") {\r\n                  if (Spellbook.KnowAgony = false) {\r\n                    if (player.SoulShards > 699) {\r\n                      msg (\"<br/>You learn the spell Agony.\")\r\n                      Spellbook.KnowAgony = true\r\n                      player.SoulShards = player.SoulShards - 700\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"fireball\") {\r\n                  if (Spellbook.KnowFireball = false) {\r\n                    if (player.SoulShards > 699) {\r\n                      msg (\"<br/>You learn the spell Fireballl.\")\r\n                      Spellbook.KnowFireball = true\r\n                      player.SoulShards = player.SoulShards - 700\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"regeneration\") {\r\n                  if (Spellbook.KnowRegeneration = false) {\r\n                    if (player.SoulShards > 699) {\r\n                      msg (\"<br/>You learn the spell Regeneration.\")\r\n                      Spellbook.KnowRegeneration = true\r\n                      player.SoulShards = player.SoulShards - 700\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"invisibility\") {\r\n                  if (Spellbook.KnowInvisibility = false) {\r\n                    if (player.SoulShards > 699) {\r\n                      msg (\"<br/>You learn the spell Invisibility.\")\r\n                      Spellbook.KnowInvisibility = true\r\n                      player.SoulShards = player.SoulShards - 700\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"haste\") {\r\n                  if (Spellbook.KnowHaste = false) {\r\n                    if (player.SoulShards > 699) {\r\n                      msg (\"<br/>You learn the spell Haste.\")\r\n                      Spellbook.KnowHaste = true\r\n                      player.SoulShards = player.SoulShards - 700\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"rejuvenation\") {\r\n                  if (Spellbook.KnowRejuvenation = false) {\r\n                    if (player.SoulShards > 699) {\r\n                      msg (\"<br/>You learn the spell Rejuvenation.\")\r\n                      Spellbook.KnowRejuvenation = true\r\n                      player.SoulShards = player.SoulShards - 700\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                default {\r\n                  msg (\"You decide to not buy a spell today.\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n          case (\"5th\") {\r\n            msg (\"Fifth level spells cost <b>900</b> soul shards each. The fifth level spells available to purchase are:<br/>\")\r\n            if (Spellbook.KnowMajorHealing = false) {\r\n              msg (\"Available: (<b>major healing</b>)\")\r\n            }\r\n            if (Spellbook.KnowMajorAid = false) {\r\n              msg (\"Available: (<b>major aid</b>)\")\r\n            }\r\n            if (Spellbook.KnowPowerWeaponI = false) {\r\n              msg (\"Available: (<b>power weapon i</b>)\")\r\n            }\r\n            if (Spellbook.KnowForceShieldI = false) {\r\n              msg (\"Available: (<b>force shield i</b>)\")\r\n            }\r\n            if (Spellbook.KnowPiercingFireball = false) {\r\n              msg (\"Available: (<b>piercing fireball</b>)\")\r\n            }\r\n            if (Spellbook.KnowConeOfCold = false) {\r\n              msg (\"Available: (<b>cone of cold</b>)\")\r\n            }\r\n            if (Spellbook.KnowExplosion = false) {\r\n              msg (\"Available: (<b>explosion</b>)\")\r\n            }\r\n            msg (\"Which spell would you like to purchase?\")\r\n            get input {\r\n              switch (result) {\r\n                case (\"piercing fireball\") {\r\n                  if (Spellbook.KnowPiercingFireball = false) {\r\n                    if (player.SoulShards > 899) {\r\n                      msg (\"<br/>You learn the spell Piercing Fireball.\")\r\n                      Spellbook.KnowPiercingFireball = true\r\n                      player.SoulShards = player.SoulShards - 900\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"major healing\") {\r\n                  if (Spellbook.KnowMajorHealing = false) {\r\n                    if (player.SoulShards > 899) {\r\n                      msg (\"<br/>You learn the spell Major Healing.\")\r\n                      Spellbook.KnowMajorHealing = true\r\n                      player.SoulShards = player.SoulShards - 900\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"major aid\") {\r\n                  if (Spellbook.KnowMajorAid = false) {\r\n                    if (player.SoulShards > 899) {\r\n                      msg (\"<br/>You learn the spell Major Aid.\")\r\n                      Spellbook.KnowMajorAid = true\r\n                      player.SoulShards = player.SoulShards - 900\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"explosion\") {\r\n                  if (Spellbook.KnowExplosion = false) {\r\n                    if (player.SoulShards > 899) {\r\n                      msg (\"<br/>You learn the spell Explosion.\")\r\n                      Spellbook.KnowExplosion = true\r\n                      player.SoulShards = player.SoulShards - 900\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"cone of cold\") {\r\n                  if (Spellbook.KnowConeOfCold = false) {\r\n                    if (player.SoulShards > 899) {\r\n                      msg (\"<br/>You learn the spell Cone of Cold.\")\r\n                      Spellbook.KnowConeOfCold = true\r\n                      player.SoulShards = player.SoulShards - 900\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"power weapon i\") {\r\n                  if (Spellbook.KnowPowerWeaponI = false) {\r\n                    if (player.SoulShards > 899) {\r\n                      msg (\"<br/>You learn the spell Power Weapon I.\")\r\n                      Spellbook.KnowPowerWeaponI = true\r\n                      player.SoulShards = player.SoulShards - 900\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"force shield i\") {\r\n                  if (Spellbook.KnowForceShieldI = false) {\r\n                    if (player.SoulShards > 899) {\r\n                      msg (\"<br/>You learn the spell Force Shield I.\")\r\n                      Spellbook.KnowForceShieldI = true\r\n                      player.SoulShards = player.SoulShards - 900\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                default {\r\n                  msg (\"You decide to not buy a spell today.\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n          case (\"6th\") {\r\n            msg (\"Sixth level spells cost <b>1100</b> soul shards each. The sixth level spells available to purchase are:<br/>\")\r\n            if (Spellbook.KnowMajorBlessing = false) {\r\n              msg (\"Available: (<b>major blessing</b>)\")\r\n            }\r\n            if (Spellbook.KnowMajorRegeneration = false) {\r\n              msg (\"Available: (<b>major regeneration</b>)\")\r\n            }\r\n            if (Spellbook.KnowMajorHaste = false) {\r\n              msg (\"Available: (<b>major haste</b>)\")\r\n            }\r\n            if (Spellbook.KnowSpellPotencyII = false) {\r\n              msg (\"Available: (<b>spell potency ii</b>)\")\r\n            }\r\n            if (Spellbook.KnowPiercingCold = false) {\r\n              msg (\"Available: (<b>piercing cold</b>)\")\r\n            }\r\n            if (Spellbook.KnowInferno = false) {\r\n              msg (\"Available: (<b>inferno</b>)\")\r\n            }\r\n            if (Spellbook.KnowBlizzard = false) {\r\n              msg (\"Available: (<b>blizzard</b>)\")\r\n            }\r\n            msg (\"Which spell would you like to purchase?\")\r\n            get input {\r\n              switch (result) {\r\n                case (\"piercing cold\") {\r\n                  if (Spellbook.KnowPiercingCold = false) {\r\n                    if (player.SoulShards > 1099) {\r\n                      msg (\"<br/>You learn the spell Piercing Cold.\")\r\n                      Spellbook.KnowPiercingCold = true\r\n                      player.SoulShards = player.SoulShards - 1100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"major blessing\") {\r\n                  if (Spellbook.KnowMajorBlessing = false) {\r\n                    if (player.SoulShards > 1099) {\r\n                      msg (\"<br/>You learn the spell Major Blessing.\")\r\n                      Spellbook.KnowMajorBlessing = true\r\n                      player.SoulShards = player.SoulShards - 1100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"major regeneration\") {\r\n                  if (Spellbook.KnowMajorRegeneration = false) {\r\n                    if (player.SoulShards > 1099) {\r\n                      msg (\"<br/>You learn the spell Major Regeneration.\")\r\n                      Spellbook.KnowMajorRegeneration = true\r\n                      player.SoulShards = player.SoulShards - 1100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"blizzard\") {\r\n                  if (Spellbook.KnowBlizzard = false) {\r\n                    if (player.SoulShards > 1099) {\r\n                      msg (\"<br/>You learn the spell Blizzard.\")\r\n                      Spellbook.KnowBlizzard = true\r\n                      player.SoulShards = player.SoulShards - 1100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"inferno\") {\r\n                  if (Spellbook.KnowInferno = false) {\r\n                    if (player.SoulShards > 1099) {\r\n                      msg (\"<br/>You learn the spell Inferno.\")\r\n                      Spellbook.KnowInferno = true\r\n                      player.SoulShards = player.SoulShards - 1100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"major haste\") {\r\n                  if (Spellbook.KnowMajorHaste = false) {\r\n                    if (player.SoulShards > 1099) {\r\n                      msg (\"<br/>You learn the spell Major Haste.\")\r\n                      Spellbook.KnowMajorHaste = true\r\n                      player.SoulShards = player.SoulShards - 1100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                case (\"spell potency ii\") {\r\n                  if (Spellbook.KnowSpellPotencyII = false) {\r\n                    if (player.SoulShards > 1099) {\r\n                      msg (\"<br/>You learn the spell Spell Potency II.\")\r\n                      Spellbook.KnowSpellPotencyII = true\r\n                      player.SoulShards = player.SoulShards - 1100\r\n                    }\r\n                    else {\r\n                      msg (\"You lack the soul shards.\")\r\n                    }\r\n                  }\r\n                  else {\r\n                    msg (\"You know that spell already.\")\r\n                  }\r\n                }\r\n                default {\r\n                  msg (\"You decide to not buy a spell today.\")\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    ]]></script>\r\n  </command>\r\n</asl>",
      "EditableFormat": "markdown",
      "HTML": "<p>Here is a whole game:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"push dir\"&gt;\n    &lt;gameid&gt;6d8e63c1-d3fd-41e5-8499-2d717e5399a3&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;start type=\"script\"&gt;\n    &lt;/start&gt;\n    &lt;object name=\"Spellbook\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n    &lt;/object&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;test&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      msg (\"Which level of spells would you like to purchase from? (&lt;b&gt;1st&lt;/b&gt;), (&lt;b&gt;2nd&lt;/b&gt;), (&lt;b&gt;3rd&lt;/b&gt;), (&lt;b&gt;4th&lt;/b&gt;), (&lt;b&gt;5th&lt;/b&gt;), (&lt;b&gt;6th&lt;/b&gt;), (&lt;b&gt;7th&lt;/b&gt;)\")\n      get input {\n        switch (result) {\n          case (\"1st\") {\n            msg (\"First level spells cost &lt;b&gt;100&lt;/b&gt; soul shards each. The first level spells available to purchase are:&lt;br/&gt;\")\n            if (Spellbook.KnowMinorHealing = false) {\n              msg (\"Available: (&lt;b&gt;minor healing&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowMinorAid = false) {\n              msg (\"Available: (&lt;b&gt;minor aid&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowAnalysis = false) {\n              msg (\"Available: (&lt;b&gt;analysis&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowMinorRejuvenation = false) {\n              msg (\"Available: (&lt;b&gt;minor rejuvenation&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowArcaneZap = false) {\n              msg (\"Available: (&lt;b&gt;arcane zap&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowFirebolt = false) {\n              msg (\"Available: (&lt;b&gt;firebolt&lt;/b&gt;)\")\n            }\n            msg (\"Which spell would you like to purchase?\")\n            get input {\n              switch (result) {\n                case (\"arcane zap\") {\n                  if (Spellbook.KnowArcaneZap = false) {\n                    if (player.SoulShards &gt; 99) {\n                      msg (\"&lt;br/&gt;You learn the spell Arcane Zap.\")\n                      Spellbook.KnowArcaneZap = true\n                      player.SoulShards = player.SoulShards - 100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"minor healing\") {\n                  if (Spellbook.KnowMinorHealing = false) {\n                    if (player.SoulShards &gt; 99) {\n                      msg (\"&lt;br/&gt;You learn the spell Minor Healing.\")\n                      Spellbook.KnowMinorHealing = true\n                      player.SoulShards = player.SoulShards - 100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"firebolt\") {\n                  if (Spellbook.KnowFirebolt = false) {\n                    if (player.SoulShards &gt; 99) {\n                      msg (\"&lt;br/&gt;You learn the spell Firebolt.\")\n                      Spellbook.KnowFirebolt = true\n                      player.SoulShards = player.SoulShards - 100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"minor aid\") {\n                  if (Spellbook.KnowMinorAid = false) {\n                    if (player.SoulShards &gt; 99) {\n                      msg (\"&lt;br/&gt;You learn the spell Minor Aid.\")\n                      Spellbook.KnowMinorAid = true\n                      player.SoulShards = player.SoulShards - 100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"analysis\") {\n                  if (Spellbook.KnowAnalysis = false) {\n                    if (player.SoulShards &gt; 99) {\n                      msg (\"&lt;br/&gt;You learn the spell Analysis.\")\n                      Spellbook.KnowAnalysis = true\n                      player.SoulShards = player.SoulShards - 100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"minor rejuvenation\") {\n                  if (Spellbook.KnowMinorRejuvenation = false) {\n                    if (player.SoulShards &gt; 99) {\n                      msg (\"&lt;br/&gt;You learn the spell Minor Rejuvenation.\")\n                      Spellbook.KnowMinorRejuvenation = true\n                      player.SoulShards = player.SoulShards - 100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                default {\n                  msg (\"You decide to not buy a spell today.\")\n                }\n              }\n            }\n          }\n          case (\"2nd\") {\n            msg (\"Second level spells cost &lt;b&gt;300&lt;/b&gt; soul shards each. The second level spells available to purchase are:&lt;br/&gt;\")\n            if (Spellbook.KnowMinorBlessing = false) {\n              msg (\"Available: (&lt;b&gt;minor blessing&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowMinorRegeneration = false) {\n              msg (\"Available: (&lt;b&gt;minor regeneration&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowMinorHaste = false) {\n              msg (\"Available: (&lt;b&gt;minor haste&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowRelocate = false) {\n              msg (\"Available: (&lt;b&gt;relocate&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowPiercingZap = false) {\n              msg (\"Available: (&lt;b&gt;piercing zap&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowIcyLance = false) {\n              msg (\"Available: (&lt;b&gt;icy lance&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowAcidSpray = false) {\n              msg (\"Available: (&lt;b&gt;acid spray&lt;/b&gt;)\")\n            }\n            msg (\"Which spell would you like to purchase?\")\n            get input {\n              switch (result) {\n                case (\"icy lance\") {\n                  if (Spellbook.KnowIcyLance = false) {\n                    if (player.SoulShards &gt; 299) {\n                      msg (\"&lt;br/&gt;You learn the spell Icy Lance.\")\n                      Spellbook.KnowIcyLance = true\n                      player.SoulShards = player.SoulShards - 300\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"minor blessing\") {\n                  if (Spellbook.KnowMinorBlessing = false) {\n                    if (player.SoulShards &gt; 299) {\n                      msg (\"&lt;br/&gt;You learn the spell Minor Blessing.\")\n                      Spellbook.KnowMinorBlessing = true\n                      player.SoulShards = player.SoulShards - 300\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"acid spray\") {\n                  if (Spellbook.KnowAcidSpray = false) {\n                    if (player.SoulShards &gt; 299) {\n                      msg (\"&lt;br/&gt;You learn the spell Acid Spray.\")\n                      Spellbook.KnowAcidSpray = true\n                      player.SoulShards = player.SoulShards - 300\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"piercing zap\") {\n                  if (Spellbook.KnowPiercingZap = false) {\n                    if (player.SoulShards &gt; 299) {\n                      msg (\"&lt;br/&gt;You learn the spell Piercing Zap.\")\n                      Spellbook.KnowPiercingZap = true\n                      player.SoulShards = player.SoulShards - 300\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"minor regeneration\") {\n                  if (Spellbook.KnowMinorRegeneration = false) {\n                    if (player.SoulShards &gt; 299) {\n                      msg (\"&lt;br/&gt;You learn the spell Minor Regeneration.\")\n                      Spellbook.KnowMinorRegeneration = true\n                      player.SoulShards = player.SoulShards - 300\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"relocate\") {\n                  if (Spellbook.KnowRelocate = false) {\n                    if (player.SoulShards &gt; 299) {\n                      msg (\"&lt;br/&gt;You learn the spell Relocate.\")\n                      Spellbook.KnowRelocate = true\n                      player.SoulShards = player.SoulShards - 300\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"minor haste\") {\n                  if (Spellbook.KnowMinorHaste = false) {\n                    if (player.SoulShards &gt; 299) {\n                      msg (\"&lt;br/&gt;You learn the spell Minor Haste.\")\n                      Spellbook.KnowMinorHaste = true\n                      player.SoulShards = player.SoulShards - 300\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                default {\n                  msg (\"You decide to not buy a spell today.\")\n                }\n              }\n            }\n          }\n          case (\"3rd\") {\n            msg (\"Third level spells cost &lt;b&gt;500&lt;/b&gt; soul shards each. The third level spells available to purchase are:&lt;br/&gt;\")\n            if (Spellbook.KnowHealing = false) {\n              msg (\"Available: (&lt;b&gt;healing&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowSpellPotencyI = false) {\n              msg (\"Available: (&lt;b&gt;spell potency i&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowAid = false) {\n              msg (\"Available: (&lt;b&gt;aid&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowTerrify = false) {\n              msg (\"Available: (&lt;b&gt;terrify&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowPiercingLance = false) {\n              msg (\"Available: (&lt;b&gt;piercing lance&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowMagicZot = false) {\n              msg (\"Available: (&lt;b&gt;magic zot&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowShockBolt = false) {\n              msg (\"Available: (&lt;b&gt;shock bolt&lt;/b&gt;)\")\n            }\n            msg (\"Which spell would you like to purchase?\")\n            get input {\n              switch (result) {\n                case (\"magic zot\") {\n                  if (Spellbook.KnowMagicZot = false) {\n                    if (player.SoulShards &gt; 499) {\n                      msg (\"&lt;br/&gt;You learn the spell Magic Zot.\")\n                      Spellbook.KnowMagicZot = true\n                      player.SoulShards = player.SoulShards - 500\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"healing\") {\n                  if (Spellbook.KnowHealing = false) {\n                    if (player.SoulShards &gt; 499) {\n                      msg (\"&lt;br/&gt;You learn the spell Healing.\")\n                      Spellbook.KnowHealing = true\n                      player.SoulShards = player.SoulShards - 500\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"shock bolt\") {\n                  if (Spellbook.KnowShockBolt = false) {\n                    if (player.SoulShards &gt; 499) {\n                      msg (\"&lt;br/&gt;You learn the spell Shock Bolt.\")\n                      Spellbook.KnowShockBolt = true\n                      player.SoulShards = player.SoulShards - 500\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"piercing lance\") {\n                  if (Spellbook.KnowPiercingLance = false) {\n                    if (player.SoulShards &gt; 499) {\n                      msg (\"&lt;br/&gt;You learn the spell Piercing Lance.\")\n                      Spellbook.KnowPiercingLance = true\n                      player.SoulShards = player.SoulShards - 500\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"aid\") {\n                  if (Spellbook.KnowAid = false) {\n                    if (player.SoulShards &gt; 499) {\n                      msg (\"&lt;br/&gt;You learn the spell Aid.\")\n                      Spellbook.KnowAid = true\n                      player.SoulShards = player.SoulShards - 500\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"terrify\") {\n                  if (Spellbook.KnowTerrify = false) {\n                    if (player.SoulShards &gt; 499) {\n                      msg (\"&lt;br/&gt;You learn the spell Terrify.\")\n                      Spellbook.KnowTerrify = true\n                      player.SoulShards = player.SoulShards - 500\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"spell potency i\") {\n                  if (Spellbook.KnowSpellPotencyI = false) {\n                    if (player.SoulShards &gt; 499) {\n                      msg (\"&lt;br/&gt;You learn the spell Spell Potency I.\")\n                      Spellbook.KnowSpellPotencyI = true\n                      player.SoulShards = player.SoulShards - 500\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                default {\n                  msg (\"You decide to not buy a spell today.\")\n                }\n              }\n            }\n          }\n          case (\"4th\") {\n            msg (\"Fourth level spells cost &lt;b&gt;700&lt;/b&gt; soul shards each. The fourth level spells available to purchase are:&lt;br/&gt;\")\n            if (Spellbook.KnowBlessing = false) {\n              msg (\"Available: (&lt;b&gt;blessing&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowRegeneration = false) {\n              msg (\"Available: (&lt;b&gt;regeneration&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowHaste = false) {\n              msg (\"Available: (&lt;b&gt;haste&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowRejuvenation = false) {\n              msg (\"Available: (&lt;b&gt;rejuvenation&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowInvisibility = false) {\n              msg (\"Available: (&lt;b&gt;invisibilty&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowPiercingZot = false) {\n              msg (\"Available: (&lt;b&gt;piercing zot&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowFireball = false) {\n              msg (\"Available: (&lt;b&gt;fireball&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowAgony = false) {\n              msg (\"Available: (&lt;b&gt;agony&lt;/b&gt;)\")\n            }\n            msg (\"Which spell would you like to purchase?\")\n            get input {\n              switch (result) {\n                case (\"piercing zot\") {\n                  if (Spellbook.KnowPiercingZot = false) {\n                    if (player.SoulShards &gt; 699) {\n                      msg (\"&lt;br/&gt;You learn the spell Piercing Zot.\")\n                      Spellbook.KnowPiercingZot = true\n                      player.SoulShards = player.SoulShards - 700\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"blessing\") {\n                  if (Spellbook.KnowBlessing = false) {\n                    if (player.SoulShards &gt; 699) {\n                      msg (\"&lt;br/&gt;You learn the spell Blessing.\")\n                      Spellbook.KnowBlessing = true\n                      player.SoulShards = player.SoulShards - 700\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"agony\") {\n                  if (Spellbook.KnowAgony = false) {\n                    if (player.SoulShards &gt; 699) {\n                      msg (\"&lt;br/&gt;You learn the spell Agony.\")\n                      Spellbook.KnowAgony = true\n                      player.SoulShards = player.SoulShards - 700\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"fireball\") {\n                  if (Spellbook.KnowFireball = false) {\n                    if (player.SoulShards &gt; 699) {\n                      msg (\"&lt;br/&gt;You learn the spell Fireballl.\")\n                      Spellbook.KnowFireball = true\n                      player.SoulShards = player.SoulShards - 700\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"regeneration\") {\n                  if (Spellbook.KnowRegeneration = false) {\n                    if (player.SoulShards &gt; 699) {\n                      msg (\"&lt;br/&gt;You learn the spell Regeneration.\")\n                      Spellbook.KnowRegeneration = true\n                      player.SoulShards = player.SoulShards - 700\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"invisibility\") {\n                  if (Spellbook.KnowInvisibility = false) {\n                    if (player.SoulShards &gt; 699) {\n                      msg (\"&lt;br/&gt;You learn the spell Invisibility.\")\n                      Spellbook.KnowInvisibility = true\n                      player.SoulShards = player.SoulShards - 700\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"haste\") {\n                  if (Spellbook.KnowHaste = false) {\n                    if (player.SoulShards &gt; 699) {\n                      msg (\"&lt;br/&gt;You learn the spell Haste.\")\n                      Spellbook.KnowHaste = true\n                      player.SoulShards = player.SoulShards - 700\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"rejuvenation\") {\n                  if (Spellbook.KnowRejuvenation = false) {\n                    if (player.SoulShards &gt; 699) {\n                      msg (\"&lt;br/&gt;You learn the spell Rejuvenation.\")\n                      Spellbook.KnowRejuvenation = true\n                      player.SoulShards = player.SoulShards - 700\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                default {\n                  msg (\"You decide to not buy a spell today.\")\n                }\n              }\n            }\n          }\n          case (\"5th\") {\n            msg (\"Fifth level spells cost &lt;b&gt;900&lt;/b&gt; soul shards each. The fifth level spells available to purchase are:&lt;br/&gt;\")\n            if (Spellbook.KnowMajorHealing = false) {\n              msg (\"Available: (&lt;b&gt;major healing&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowMajorAid = false) {\n              msg (\"Available: (&lt;b&gt;major aid&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowPowerWeaponI = false) {\n              msg (\"Available: (&lt;b&gt;power weapon i&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowForceShieldI = false) {\n              msg (\"Available: (&lt;b&gt;force shield i&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowPiercingFireball = false) {\n              msg (\"Available: (&lt;b&gt;piercing fireball&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowConeOfCold = false) {\n              msg (\"Available: (&lt;b&gt;cone of cold&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowExplosion = false) {\n              msg (\"Available: (&lt;b&gt;explosion&lt;/b&gt;)\")\n            }\n            msg (\"Which spell would you like to purchase?\")\n            get input {\n              switch (result) {\n                case (\"piercing fireball\") {\n                  if (Spellbook.KnowPiercingFireball = false) {\n                    if (player.SoulShards &gt; 899) {\n                      msg (\"&lt;br/&gt;You learn the spell Piercing Fireball.\")\n                      Spellbook.KnowPiercingFireball = true\n                      player.SoulShards = player.SoulShards - 900\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"major healing\") {\n                  if (Spellbook.KnowMajorHealing = false) {\n                    if (player.SoulShards &gt; 899) {\n                      msg (\"&lt;br/&gt;You learn the spell Major Healing.\")\n                      Spellbook.KnowMajorHealing = true\n                      player.SoulShards = player.SoulShards - 900\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"major aid\") {\n                  if (Spellbook.KnowMajorAid = false) {\n                    if (player.SoulShards &gt; 899) {\n                      msg (\"&lt;br/&gt;You learn the spell Major Aid.\")\n                      Spellbook.KnowMajorAid = true\n                      player.SoulShards = player.SoulShards - 900\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"explosion\") {\n                  if (Spellbook.KnowExplosion = false) {\n                    if (player.SoulShards &gt; 899) {\n                      msg (\"&lt;br/&gt;You learn the spell Explosion.\")\n                      Spellbook.KnowExplosion = true\n                      player.SoulShards = player.SoulShards - 900\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"cone of cold\") {\n                  if (Spellbook.KnowConeOfCold = false) {\n                    if (player.SoulShards &gt; 899) {\n                      msg (\"&lt;br/&gt;You learn the spell Cone of Cold.\")\n                      Spellbook.KnowConeOfCold = true\n                      player.SoulShards = player.SoulShards - 900\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"power weapon i\") {\n                  if (Spellbook.KnowPowerWeaponI = false) {\n                    if (player.SoulShards &gt; 899) {\n                      msg (\"&lt;br/&gt;You learn the spell Power Weapon I.\")\n                      Spellbook.KnowPowerWeaponI = true\n                      player.SoulShards = player.SoulShards - 900\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"force shield i\") {\n                  if (Spellbook.KnowForceShieldI = false) {\n                    if (player.SoulShards &gt; 899) {\n                      msg (\"&lt;br/&gt;You learn the spell Force Shield I.\")\n                      Spellbook.KnowForceShieldI = true\n                      player.SoulShards = player.SoulShards - 900\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                default {\n                  msg (\"You decide to not buy a spell today.\")\n                }\n              }\n            }\n          }\n          case (\"6th\") {\n            msg (\"Sixth level spells cost &lt;b&gt;1100&lt;/b&gt; soul shards each. The sixth level spells available to purchase are:&lt;br/&gt;\")\n            if (Spellbook.KnowMajorBlessing = false) {\n              msg (\"Available: (&lt;b&gt;major blessing&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowMajorRegeneration = false) {\n              msg (\"Available: (&lt;b&gt;major regeneration&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowMajorHaste = false) {\n              msg (\"Available: (&lt;b&gt;major haste&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowSpellPotencyII = false) {\n              msg (\"Available: (&lt;b&gt;spell potency ii&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowPiercingCold = false) {\n              msg (\"Available: (&lt;b&gt;piercing cold&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowInferno = false) {\n              msg (\"Available: (&lt;b&gt;inferno&lt;/b&gt;)\")\n            }\n            if (Spellbook.KnowBlizzard = false) {\n              msg (\"Available: (&lt;b&gt;blizzard&lt;/b&gt;)\")\n            }\n            msg (\"Which spell would you like to purchase?\")\n            get input {\n              switch (result) {\n                case (\"piercing cold\") {\n                  if (Spellbook.KnowPiercingCold = false) {\n                    if (player.SoulShards &gt; 1099) {\n                      msg (\"&lt;br/&gt;You learn the spell Piercing Cold.\")\n                      Spellbook.KnowPiercingCold = true\n                      player.SoulShards = player.SoulShards - 1100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"major blessing\") {\n                  if (Spellbook.KnowMajorBlessing = false) {\n                    if (player.SoulShards &gt; 1099) {\n                      msg (\"&lt;br/&gt;You learn the spell Major Blessing.\")\n                      Spellbook.KnowMajorBlessing = true\n                      player.SoulShards = player.SoulShards - 1100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"major regeneration\") {\n                  if (Spellbook.KnowMajorRegeneration = false) {\n                    if (player.SoulShards &gt; 1099) {\n                      msg (\"&lt;br/&gt;You learn the spell Major Regeneration.\")\n                      Spellbook.KnowMajorRegeneration = true\n                      player.SoulShards = player.SoulShards - 1100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"blizzard\") {\n                  if (Spellbook.KnowBlizzard = false) {\n                    if (player.SoulShards &gt; 1099) {\n                      msg (\"&lt;br/&gt;You learn the spell Blizzard.\")\n                      Spellbook.KnowBlizzard = true\n                      player.SoulShards = player.SoulShards - 1100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"inferno\") {\n                  if (Spellbook.KnowInferno = false) {\n                    if (player.SoulShards &gt; 1099) {\n                      msg (\"&lt;br/&gt;You learn the spell Inferno.\")\n                      Spellbook.KnowInferno = true\n                      player.SoulShards = player.SoulShards - 1100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"major haste\") {\n                  if (Spellbook.KnowMajorHaste = false) {\n                    if (player.SoulShards &gt; 1099) {\n                      msg (\"&lt;br/&gt;You learn the spell Major Haste.\")\n                      Spellbook.KnowMajorHaste = true\n                      player.SoulShards = player.SoulShards - 1100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                case (\"spell potency ii\") {\n                  if (Spellbook.KnowSpellPotencyII = false) {\n                    if (player.SoulShards &gt; 1099) {\n                      msg (\"&lt;br/&gt;You learn the spell Spell Potency II.\")\n                      Spellbook.KnowSpellPotencyII = true\n                      player.SoulShards = player.SoulShards - 1100\n                    }\n                    else {\n                      msg (\"You lack the soul shards.\")\n                    }\n                  }\n                  else {\n                    msg (\"You know that spell already.\")\n                  }\n                }\n                default {\n                  msg (\"You decide to not buy a spell today.\")\n                }\n              }\n            }\n          }\n        }\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2017-09-22T20:54:39.0240217Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "018851e5-6078-4eae-baf0-cc740c0a80d9",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "one other possibility that you could look into:\r\n\r\nsometimes doing stuff in the GUI/Editor, and then removing it, still leaves the actual code of it in place, which can cause errors.\r\n\r\nso, you might want to scour through your entire game code for this type of stuff.\r\n\r\nAlso, did you edit any of the default/built-in stuff? As you could have made mistakes with it, which is causing your errors with your game.\r\n\r\nLastly, try making a new game, and try out chunks of your code and/or entire code with that new game, and see if it works (then there's just some kind of error with that original game file) or not (there's a problem with your code)",
      "EditableFormat": "markdown",
      "HTML": "<p>one other possibility that you could look into:</p>\n<p>sometimes doing stuff in the GUI/Editor, and then removing it, still leaves the actual code of it in place, which can cause errors.</p>\n<p>so, you might want to scour through your entire game code for this type of stuff.</p>\n<p>Also, did you edit any of the default/built-in stuff? As you could have made mistakes with it, which is causing your errors with your game.</p>\n<p>Lastly, try making a new game, and try out chunks of your code and/or entire code with that new game, and see if it works (then there's just some kind of error with that original game file) or not (there's a problem with your code)</p>\n\n",
      "PostDate": "2017-09-22T22:23:52.6976456Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
