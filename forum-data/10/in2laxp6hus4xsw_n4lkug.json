{
  "Topic": {
    "TopicId": "in2laxp6hus4xsw_n4lkug",
    "ForumId": "10",
    "Title": "Unlocking doors?",
    "LastUpdated": "2017-06-29T17:01:49.4576861Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "72e2ea01-7a27-49ae-af40-ce7a6306550a",
      "UserId": 313799,
      "Username": "Skyheart033",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm not sure how to make it so that a player can unlock a door (if they have the key). I have created the key object and the door exit, just not sure how to make them connect.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm not sure how to make it so that a player can unlock a door (if they have the key). I have created the key object and the door exit, just not sure how to make them connect.</p>\n\n",
      "PostDate": "2017-06-29T17:01:49.4576861Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c40d7575-cba2-4f55-ac5f-fa30a80f120a",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "1.  Create an exit like you would for any other unlocked exit.\r\n2.  Tick the 'Locked' box.\r\n3.  Give the this Locked exit a name like:  **doorlock1**\r\n--- option1 --- note - option 1 requires player to type 'use key on door' to unlock the door.  You CAN certainly use commands to account for other options the player might try... it just depends on the type of game you are making.\r\nThere are multiple ways to do this, but I find the first the most error-proof (many may disagree with me...)\r\n1.  On the Features tab of the key, tick the 'use/give' box.  \r\n2.  Select that tab.  \r\n3.  Click the little +Add button by the Use this on (other object) and select handle objects individually and select the door.  \r\n4.  For the Scripts, I choose to run an If script.  If object 'door' has flag 'unlock1' then print message \"The door is already unlocked.\"  In the Else, I printed a \"You unlock the door\" message, an unlock exit 'doorlock1' script, and a set flag on object 'door' named 'unlock1'.  In the look at description for the door, I used an If script to write a proper description for the door IF it had the flag name 'unlock1' and ELSE a message indicating it was still locked.  I also copy-pasted the door to my other room so that it can be seen from both rooms (makes sense, right?).\r\n--- option 2 --- I've always hated containers... but you could...\r\n1.  Do 1-3 at the top - create door and key.\r\n2.  On the features tab of the door, click container and choose the closed container option.\r\n3.  Scroll down to switch lock type to 'lockable'.\r\n4.  Choose '1' for the number of keys to unlock and select the key object for this door.\r\n5.  I left the auto unlock and auto open boxes ticked.\r\n6.  And I ran an unlock exit script in the section 'After unlocking the object' at the very bottom.\r\n\r\nFor option 2, there are other things you could do like run scripts instead of automatically doing things.  All the player has to do with this door is type 'unlock door' and if the player has the key, it will automatically do the rest.\r\n\r\nLet me know if this helps.\r\n\r\nBelow is the code I used if you want to copy-paste it and take a look.\r\n\r\n```\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Locking and Unlocking Test\">\r\n    <gameid>c3e0e639-ed0d-42a2-92c4-39acd2ceca0a</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n  </game>\r\n  <object name=\"room1\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <exit name=\"doorlock1\" alias=\"south\" to=\"room2\">\r\n      <inherit name=\"southdirection\" />\r\n      <locked />\r\n    </exit>\r\n    <object name=\"door\">\r\n      <inherit name=\"editor_object\" />\r\n      <look type=\"script\">\r\n        if (GetBoolean(door, \"unlock1\")) {\r\n          msg (\"The door has been unlocked and you can go south.\")\r\n        }\r\n        else {\r\n          msg (\"The door is locked and blocks your path.\")\r\n        }\r\n      </look>\r\n    </object>\r\n    <object name=\"key\">\r\n      <inherit name=\"editor_object\" />\r\n      <look>It's a key and can be used to unlock doors.</look>\r\n      <feature_usegive />\r\n      <selfuseon type=\"scriptdictionary\">\r\n        <item key=\"door\">\r\n          if (GetBoolean(door, \"unlock1\")) {\r\n            msg (\"The door is already unlocked.\")\r\n          }\r\n          else {\r\n            msg (\"You use the key to unlock the door.\")\r\n            SetObjectFlagOn (door, \"unlock1\")\r\n            UnlockExit (doorlock1)\r\n          }\r\n        </item>\r\n      </selfuseon>\r\n      <take />\r\n    </object>\r\n  </object>\r\n  <object name=\"room2\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"north\" to=\"room1\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n    <object name=\"door1\">\r\n      <inherit name=\"editor_object\" />\r\n      <look type=\"script\">\r\n        if (GetBoolean(door, \"unlock1\")) {\r\n          msg (\"The door has been unlocked and you can go north.\")\r\n        }\r\n        else {\r\n          msg (\"The door is locked and blocks your path.\")\r\n        }\r\n      </look>\r\n      <alias>door</alias>\r\n    </object>\r\n    <exit alias=\"south\" to=\"room3\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"room3\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit name=\"doorlock2\" alias=\"south\" to=\"room4\">\r\n      <inherit name=\"southdirection\" />\r\n      <locked />\r\n    </exit>\r\n    <object name=\"key2\">\r\n      <inherit name=\"editor_object\" />\r\n      <alias>gold key</alias>\r\n      <look>It's a key.</look>\r\n      <take />\r\n    </object>\r\n    <object name=\"door2\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"container_lockable\" />\r\n      <inherit name=\"container_closed\" />\r\n      <alias>door</alias>\r\n      <look type=\"script\">\r\n        if (door2.isopen) {\r\n          msg (\"The door is open and you can travel south if you wish.\")\r\n        }\r\n        else {\r\n          msg (\"The door is locked it appears.\")\r\n        }\r\n      </look>\r\n      <feature_container />\r\n      <keycount type=\"int\">1</keycount>\r\n      <key type=\"object\">key2</key>\r\n      <onunlock type=\"script\">\r\n        UnlockExit (doorlock2)\r\n      </onunlock>\r\n      <open />\r\n      <close />\r\n    </object>\r\n  </object>\r\n  <object name=\"room4\">\r\n    <inherit name=\"editor_room\" />\r\n  </object>\r\n</asl>\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<ol>\n<li>Create an exit like you would for any other unlocked exit.</li>\n<li>Tick the 'Locked' box.</li>\n<li>Give the this Locked exit a name like:  <strong>doorlock1</strong><br>\n--- option1 --- note - option 1 requires player to type 'use key on door' to unlock the door.  You CAN certainly use commands to account for other options the player might try... it just depends on the type of game you are making.<br>\nThere are multiple ways to do this, but I find the first the most error-proof (many may disagree with me...)</li>\n<li>On the Features tab of the key, tick the 'use/give' box.</li>\n<li>Select that tab.</li>\n<li>Click the little +Add button by the Use this on (other object) and select handle objects individually and select the door.</li>\n<li>For the Scripts, I choose to run an If script.  If object 'door' has flag 'unlock1' then print message \"The door is already unlocked.\"  In the Else, I printed a \"You unlock the door\" message, an unlock exit 'doorlock1' script, and a set flag on object 'door' named 'unlock1'.  In the look at description for the door, I used an If script to write a proper description for the door IF it had the flag name 'unlock1' and ELSE a message indicating it was still locked.  I also copy-pasted the door to my other room so that it can be seen from both rooms (makes sense, right?).<br>\n--- option 2 --- I've always hated containers... but you could...</li>\n<li>Do 1-3 at the top - create door and key.</li>\n<li>On the features tab of the door, click container and choose the closed container option.</li>\n<li>Scroll down to switch lock type to 'lockable'.</li>\n<li>Choose '1' for the number of keys to unlock and select the key object for this door.</li>\n<li>I left the auto unlock and auto open boxes ticked.</li>\n<li>And I ran an unlock exit script in the section 'After unlocking the object' at the very bottom.</li>\n</ol>\n<p>For option 2, there are other things you could do like run scripts instead of automatically doing things.  All the player has to do with this door is type 'unlock door' and if the player has the key, it will automatically do the rest.</p>\n<p>Let me know if this helps.</p>\n<p>Below is the code I used if you want to copy-paste it and take a look.</p>\n<pre><code>&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Locking and Unlocking Test\"&gt;\n    &lt;gameid&gt;c3e0e639-ed0d-42a2-92c4-39acd2ceca0a&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room1\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;exit name=\"doorlock1\" alias=\"south\" to=\"room2\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n      &lt;locked /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"door\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;look type=\"script\"&gt;\n        if (GetBoolean(door, \"unlock1\")) {\n          msg (\"The door has been unlocked and you can go south.\")\n        }\n        else {\n          msg (\"The door is locked and blocks your path.\")\n        }\n      &lt;/look&gt;\n    &lt;/object&gt;\n    &lt;object name=\"key\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;look&gt;It's a key and can be used to unlock doors.&lt;/look&gt;\n      &lt;feature_usegive /&gt;\n      &lt;selfuseon type=\"scriptdictionary\"&gt;\n        &lt;item key=\"door\"&gt;\n          if (GetBoolean(door, \"unlock1\")) {\n            msg (\"The door is already unlocked.\")\n          }\n          else {\n            msg (\"You use the key to unlock the door.\")\n            SetObjectFlagOn (door, \"unlock1\")\n            UnlockExit (doorlock1)\n          }\n        &lt;/item&gt;\n      &lt;/selfuseon&gt;\n      &lt;take /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room2\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"north\" to=\"room1\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"door1\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;look type=\"script\"&gt;\n        if (GetBoolean(door, \"unlock1\")) {\n          msg (\"The door has been unlocked and you can go north.\")\n        }\n        else {\n          msg (\"The door is locked and blocks your path.\")\n        }\n      &lt;/look&gt;\n      &lt;alias&gt;door&lt;/alias&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"south\" to=\"room3\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room3\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit name=\"doorlock2\" alias=\"south\" to=\"room4\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n      &lt;locked /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"key2\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;alias&gt;gold key&lt;/alias&gt;\n      &lt;look&gt;It's a key.&lt;/look&gt;\n      &lt;take /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"door2\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"container_lockable\" /&gt;\n      &lt;inherit name=\"container_closed\" /&gt;\n      &lt;alias&gt;door&lt;/alias&gt;\n      &lt;look type=\"script\"&gt;\n        if (door2.isopen) {\n          msg (\"The door is open and you can travel south if you wish.\")\n        }\n        else {\n          msg (\"The door is locked it appears.\")\n        }\n      &lt;/look&gt;\n      &lt;feature_container /&gt;\n      &lt;keycount type=\"int\"&gt;1&lt;/keycount&gt;\n      &lt;key type=\"object\"&gt;key2&lt;/key&gt;\n      &lt;onunlock type=\"script\"&gt;\n        UnlockExit (doorlock2)\n      &lt;/onunlock&gt;\n      &lt;open /&gt;\n      &lt;close /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room4\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2017-06-29T18:54:24.6840728Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
