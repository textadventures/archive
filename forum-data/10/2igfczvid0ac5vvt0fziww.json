{
  "Topic": {
    "TopicId": "2igfczvid0ac5vvt0fziww",
    "ForumId": "10",
    "Title": "Ordering exits",
    "LastUpdated": "2017-09-23T11:44:46.1418123Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "96f6260f-e78e-4d1e-b463-364880e33de9",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK, I'm using a randomly-generated area (specific rooms, but arranged randomly). Almost every \"room\" in the forest has 4 exits for the cardinal compass points. And it's turned out to be oddly distracting when I play the game: Every room displays the exits in a different order. I'm assuming that ScopeExits() returns the exits in the order they were created or something, and the default ShowRoomDescription() just lists them in that order.\r\n\r\nIs there a way to change the order of exits in a room? Is there a flag somewhere that I've missed to sort them?\r\nIf ScopeExits() orders them by the order they were added to the room, I guess I could loop over the exits, move them into a temporary room and then move them back in a consistent order. But if it's ordering them by name, there's not much I can do about it. Is it worth experimenting; or is this something with a known solution?",
      "EditableFormat": "markdown",
      "HTML": "<p>OK, I'm using a randomly-generated area (specific rooms, but arranged randomly). Almost every \"room\" in the forest has 4 exits for the cardinal compass points. And it's turned out to be oddly distracting when I play the game: Every room displays the exits in a different order. I'm assuming that ScopeExits() returns the exits in the order they were created or something, and the default ShowRoomDescription() just lists them in that order.</p>\n<p>Is there a way to change the order of exits in a room? Is there a flag somewhere that I've missed to sort them?<br>\nIf ScopeExits() orders them by the order they were added to the room, I guess I could loop over the exits, move them into a temporary room and then move them back in a consistent order. But if it's ordering them by name, there's not much I can do about it. Is it worth experimenting; or is this something with a known solution?</p>\n\n",
      "PostDate": "2017-09-23T11:44:46.1418123Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "73051354-0d0a-45d3-ac78-989a11210958",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Would it be easier to turn off rom exits list while in the forest?  Just wondering.",
      "EditableFormat": "markdown",
      "HTML": "<p>Would it be easier to turn off rom exits list while in the forest?  Just wondering.</p>\n\n",
      "PostDate": "2017-09-23T13:03:25.4950306Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c5a763e6-a9e8-40ce-9707-63618203c2f5",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I did something similar in Deeper, which is a randomly generated dungeon. I had the exits described in the text as part of the room description, so I could add flavour text (\"there is a broken wooden door to the north and a narrow passge east\").\r\n\r\n> I'm assuming that ScopeExits() returns the exits in the order they were created or something, and the default ShowRoomDescription() just lists them in that order.\r\n\r\nI think that that is the case. Objects definitely work like that, and I assume exits do too.",
      "EditableFormat": "markdown",
      "HTML": "<p>I did something similar in Deeper, which is a randomly generated dungeon. I had the exits described in the text as part of the room description, so I could add flavour text (\"there is a broken wooden door to the north and a narrow passge east\").</p>\n<blockquote>\n<p>I'm assuming that ScopeExits() returns the exits in the order they were created or something, and the default ShowRoomDescription() just lists them in that order.</p>\n</blockquote>\n<p>I think that that is the case. Objects definitely work like that, and I assume exits do too.</p>\n\n",
      "PostDate": "2017-09-23T14:31:05.9845659Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7951186c-6349-4dae-8eed-daf9eaa4ed3d",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I think that that is the case. Objects definitely work like that, and I assume exits do too.\r\n\r\nHave now confirmed that the exits are listed in order of creation, not the order they were added to the room. It shouldn't be a big deal, but it looks ugly. I guess the only way to fix it is to remove the automatic exit list and make my own; which would be way more trouble than it's worth.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I think that that is the case. Objects definitely work like that, and I assume exits do too.</p>\n</blockquote>\n<p>Have now confirmed that the exits are listed in order of creation, not the order they were added to the room. It shouldn't be a big deal, but it looks ugly. I guess the only way to fix it is to remove the automatic exit list and make my own; which would be way more trouble than it's worth.</p>\n\n",
      "PostDate": "2017-09-23T22:25:01.1769068Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ab59c5f5-5d3a-4887-9603-1173b610c68b",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you are generating them, can you not generate them in order?",
      "EditableFormat": "markdown",
      "HTML": "<p>If you are generating them, can you not generate them in order?</p>\n\n",
      "PostDate": "2017-09-23T22:47:26.8156678Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9a15eb28-d5ca-4ae1-bde6-d3f788620e55",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Can you use:\r\n\r\n**StringListSort**\r\nhttp://docs.textadventures.co.uk/quest/functions/stringlistsort.html\r\n\r\nOr\r\n**ObjectListSort**\r\nhttp://docs.textadventures.co.uk/quest/functions/objectlistsort.html",
      "EditableFormat": "markdown",
      "HTML": "<p>Can you use:</p>\n<p><strong>StringListSort</strong><br>\nhttp://docs.textadventures.co.uk/quest/functions/stringlistsort.html</p>\n<p>Or<br>\n<strong>ObjectListSort</strong><br>\nhttp://docs.textadventures.co.uk/quest/functions/objectlistsort.html</p>\n\n",
      "PostDate": "2017-09-23T22:53:54.2996311Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8852d676-5c36-40e2-b4ba-b7749b091531",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Doctor Agon: If I was writing a script that needed a list, yes. But on the web version it would be a big pain to add a line in the middle of one of the core functions. It would likely mean adding code to almost every room, which would likely make it harder if I have other rooms that want to do something complex later on.\r\n\r\nUnless… I could disable `game.autodescription_youcango`; then create a dummy scenery object. Have the player's `changedparent` script move the dummy object to the room you're in, and set its `inroomdescription` to a \"You can go :\" line with the exits sorted. Does that seem like it would work?",
      "EditableFormat": "markdown",
      "HTML": "<p>Doctor Agon: If I was writing a script that needed a list, yes. But on the web version it would be a big pain to add a line in the middle of one of the core functions. It would likely mean adding code to almost every room, which would likely make it harder if I have other rooms that want to do something complex later on.</p>\n<p>Unless… I could disable <code>game.autodescription_youcango</code>; then create a dummy scenery object. Have the player's <code>changedparent</code> script move the dummy object to the room you're in, and set its <code>inroomdescription</code> to a \"You can go :\" line with the exits sorted. Does that seem like it would work?</p>\n\n",
      "PostDate": "2017-09-23T23:19:54.0549335Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0417f0b7-02b9-4e71-a155-4a100b213b57",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry, only trying to help. I thought the answer might lie in the function ShowRoomDescription, and by altering the way the exits are formatted into their list, you might be able to list the exits alphabetically.\r\n```\r\nexits = FormatExitList(game.pov.parent.exitslistprefix, GetExitsList(), Template(\"Or\"), \".\")\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry, only trying to help. I thought the answer might lie in the function ShowRoomDescription, and by altering the way the exits are formatted into their list, you might be able to list the exits alphabetically.</p>\n<pre><code>exits = FormatExitList(game.pov.parent.exitslistprefix, GetExitsList(), Template(\"Or\"), \".\")\n</code></pre>\n\n",
      "PostDate": "2017-09-23T23:33:30.3108567Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bcb6d26f-966b-4f75-a764-132344f85c76",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry, didn't intend to sound sarcastic there.\r\n\r\nI'd be interested to hear what you have in mind: Where would I put the modified code? Can you suggest anything better than a scenery object acting as an exit list? (which seems clunky, but possible)",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry, didn't intend to sound sarcastic there.</p>\n<p>I'd be interested to hear what you have in mind: Where would I put the modified code? Can you suggest anything better than a scenery object acting as an exit list? (which seems clunky, but possible)</p>\n\n",
      "PostDate": "2017-09-24T00:06:30.226404Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "25fa551d-6216-4a2e-ab56-075fb8350417",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Not really sure. I've looked at the code but I can't seem to get it to work the way I thought it should. I mean, after all, everything in the game from the objects you can pick up, to the exits, even the player itself, is an object, so you should in theory, be able to order the exit list into alphabetical order, if you can find the right coded function, without resorting to some cluncky clumsy bodge.",
      "EditableFormat": "markdown",
      "HTML": "<p>Not really sure. I've looked at the code but I can't seem to get it to work the way I thought it should. I mean, after all, everything in the game from the objects you can pick up, to the exits, even the player itself, is an object, so you should in theory, be able to order the exit list into alphabetical order, if you can find the right coded function, without resorting to some cluncky clumsy bodge.</p>\n\n",
      "PostDate": "2017-09-24T15:07:57.2596467Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e08bb85d-00ab-4c6e-b81d-1d90941b0391",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well, I tried the bodge. It works, but it's really ugly and likely to break other things.\r\n\r\nThe other option seems to be making a complete copy of the `OnEnterRoom()` and `ShowRoomDescription()` functions from the core code, and then making a couple of changes to them. That's looking simpler than I initially thought; it's just a huge copy-paste. Just have to make sure I modify everywhere those functions are called from to make sure it always uses my version.",
      "EditableFormat": "markdown",
      "HTML": "<p>Well, I tried the bodge. It works, but it's really ugly and likely to break other things.</p>\n<p>The other option seems to be making a complete copy of the <code>OnEnterRoom()</code> and <code>ShowRoomDescription()</code> functions from the core code, and then making a couple of changes to them. That's looking simpler than I initially thought; it's just a huge copy-paste. Just have to make sure I modify everywhere those functions are called from to make sure it always uses my version.</p>\n\n",
      "PostDate": "2017-09-24T18:55:45.1990693Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0f6ab2ba-4deb-475f-88a4-33547dfe95c7",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\nx = ScopeUnlockedExitsForRoom(game.pov.parent)\r\ny = NewStringList()\r\nforeach (o, x) {\r\n  list add (y, o.name)\r\n}\r\ny = (StringListSort(y))\r\ngame.exits = NewObjectList()\r\nforeach (exit, y) {\r\n  list add (game.exits, GetObject(exit))\r\n}\r\nDisplayList (game.exits, false)\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>x = ScopeUnlockedExitsForRoom(game.pov.parent)\ny = NewStringList()\nforeach (o, x) {\n  list add (y, o.name)\n}\ny = (StringListSort(y))\ngame.exits = NewObjectList()\nforeach (exit, y) {\n  list add (game.exits, GetObject(exit))\n}\nDisplayList (game.exits, false)\n</code></pre>\n\n",
      "PostDate": "2017-09-24T19:06:50.2949647Z",
      "LastEditDate": "2017-09-24T20:55:02.7515194Z",
      "link": null
    },
    {
      "PostId": "5c57e6d2-57db-4514-a0b9-7a8f6b8aceec",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "KV ... I'm not sure what you're trying to do there. Turn a list of objects into a list of strings and back again?\r\n\r\nThe question is whether there's an easier way to get custom output into the room description; do I really have to make custom functions replicating the entire behaviour of `OnEnterRoom(oldvalue)` and `ShowRoomDescription()`, just to change the order of one list?",
      "EditableFormat": "markdown",
      "HTML": "<p>KV ... I'm not sure what you're trying to do there. Turn a list of objects into a list of strings and back again?</p>\n<p>The question is whether there's an easier way to get custom output into the room description; do I really have to make custom functions replicating the entire behaviour of <code>OnEnterRoom(oldvalue)</code> and <code>ShowRoomDescription()</code>, just to change the order of one list?</p>\n\n",
      "PostDate": "2017-09-24T19:28:29.0804325Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2d6f15a2-5be6-4474-9c1e-4fce28773c3e",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh!\r\n\r\nI thought we wanted the exits in alphabetical order by name for some reason.\r\n\r\nI'll go play with the correct thing, and I shall return.\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh!</p>\n<p>I thought we wanted the exits in alphabetical order by name for some reason.</p>\n<p>I'll go play with the correct thing, and I shall return.</p>\n\n",
      "PostDate": "2017-09-24T20:51:27.3711937Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4592a8cb-b6b3-444f-98c0-b80866aa0573",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Actually, I think I'm going to make a custom `player.changedparent`, that calls my own `OnRoomEnter` and `ShowRoomDescription()`. The implementation of that function is kind of awkward, and I think I can come up with a version that deals more sanely with onenter scripts that move you to a different location. And also tweak the room description script so that ticking \"new line after …\" doesn't result in multiple consecutive line breaks if the sections don't exist.",
      "EditableFormat": "markdown",
      "HTML": "<p>Actually, I think I'm going to make a custom <code>player.changedparent</code>, that calls my own <code>OnRoomEnter</code> and <code>ShowRoomDescription()</code>. The implementation of that function is kind of awkward, and I think I can come up with a version that deals more sanely with onenter scripts that move you to a different location. And also tweak the room description script so that ticking \"new line after …\" doesn't result in multiple consecutive line breaks if the sections don't exist.</p>\n\n",
      "PostDate": "2017-09-25T19:40:21.9711145Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d6309b09-d08d-43f1-a49e-f14bb5857164",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I don't like multiple consecutive line breaks!\r\n\r\nI also don't like it when ShowMenu clears a  long menu!!!\r\n\r\n...okay.  I'm done complaining now.",
      "EditableFormat": "markdown",
      "HTML": "<p>I don't like multiple consecutive line breaks!</p>\n<p>I also don't like it when ShowMenu clears a  long menu!!!</p>\n<p>...okay.  I'm done complaining now.</p>\n\n",
      "PostDate": "2017-09-25T20:51:32.2444531Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
