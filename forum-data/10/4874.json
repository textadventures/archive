{
  "Topic": {
    "TopicId": "4874",
    "ForumId": "10",
    "Title": "Making a night time level",
    "LastUpdated": "2014-12-09T08:37:21+00:00",
    "ReplyCount": 20
  },
  "Posts": [
    {
      "PostId": "32563",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "I want to trigger a night time level if my player fails to gather certain information on their first attempt (the night time level will give them a second chance to gather the information a different way).\n\nI thought this would be fairly straightforward (what a fool am I?) by using flags, but because I already have two descriptions for each of my locations (a detailed one for 1st visit, less detailed for subsequent visits) this is proving difficult.\n\nThe basic idea was to set a flag on the player called 'nightlevel' at the point at which he's failed in certain tasks. After some narrative about it having been a long day and him wanting to get some rest, I 'move' him back to his apartment. I thought I could then simply check for the 'nightlevel' flag at each of the locations, and give a night time description. Once they successfully complete the task they failed at the first time, I remove the flag and move him back to his apartment, ready to start a new day and continue the story.\n\nThe problem seems to be getting the game to ignore the other room descriptions if the flag is present, and only print the night time description.\n\nWould I be right in saying a room can't have more than two descriptions triggered?\n\nWould the script that checks for the 'nightlevel' flag have to be the first thing in the block of scripts in the room descriptions?\n\nAnother way, of course, would be to simply create night versions for each room, i.e 'gas station' and 'gas station night', and just move the player to the night time version of the rooms during the night stage. However, this would be a lot of work as it means creating a whole set of exits too.\n\nAny ideas how I could achieve this?\n\nI tried TP's method here, but couldn't get the desired effect. Again, I think it's because I already have two descriptions for each of my rooms. Many are already checking for other flags too - which doesn't help matters.\n\n<!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=18&amp;t=4807#p31888\">viewtopic.php?f=18&amp;t=4807#p31888</a><!-- l -->",
      "EditableFormat": "bbcode",
      "HTML": "I want to trigger a night time level if my player fails to gather certain information on their first attempt (the night time level will give them a second chance to gather the information a different way).<br/><br/>I thought this would be fairly straightforward (what a fool am I?) by using flags, but because I already have two descriptions for each of my locations (a detailed one for 1st visit, less detailed for subsequent visits) this is proving difficult.<br/><br/>The basic idea was to set a flag on the player called 'nightlevel' at the point at which he's failed in certain tasks. After some narrative about it having been a long day and him wanting to get some rest, I 'move' him back to his apartment. I thought I could then simply check for the 'nightlevel' flag at each of the locations, and give a night time description. Once they successfully complete the task they failed at the first time, I remove the flag and move him back to his apartment, ready to start a new day and continue the story.<br/><br/>The problem seems to be getting the game to ignore the other room descriptions if the flag is present, and only print the night time description.<br/><br/>Would I be right in saying a room can't have more than two descriptions triggered?<br/><br/>Would the script that checks for the 'nightlevel' flag have to be the first thing in the block of scripts in the room descriptions?<br/><br/>Another way, of course, would be to simply create night versions for each room, i.e 'gas station' and 'gas station night', and just move the player to the night time version of the rooms during the night stage. However, this would be a lot of work as it means creating a whole set of exits too.<br/><br/>Any ideas how I could achieve this?<br/><br/>I tried TP's method here, but couldn't get the desired effect. Again, I think it's because I already have two descriptions for each of my rooms. Many are already checking for other flags too - which doesn't help matters.<br/><br/><!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=18&amp;t=4807#p31888\">viewtopic.php?f=18&amp;t=4807#p31888</a><!-- l -->",
      "PostDate": "2014-12-06T20:58:53+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32564",
      "UserId": 0,
      "Username": "george",
      "UserAvatar": null,
      "UserGravatar": "dc6fe8e6172303d85249a13c9a49c1ff",
      "EditableText": "There's not a limit on how many descriptions a room can have. Did you try Pixie's technique with the switch from that post you linked? Though I would modify the switch a little, I think you can switch on words like &quot;night&quot;, &quot;day&quot;, etc. rather than numbers. Makes it easier to keep track of things.",
      "EditableFormat": "bbcode",
      "HTML": "There's not a limit on how many descriptions a room can have. Did you try Pixie's technique with the switch from that post you linked? Though I would modify the switch a little, I think you can switch on words like &quot;night&quot;, &quot;day&quot;, etc. rather than numbers. Makes it easier to keep track of things.",
      "PostDate": "2014-12-06T21:36:43+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32565",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "[quote=&quot;george&quot;:2xnd5s1d]Did you try Pixie's technique with the switch from that post you linked? [/quote:2xnd5s1d]\nYes. I can get the night time description to show, but one of the other descriptions shows too, depending on whether it's my first or second visit there.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>george wrote:</cite>Did you try Pixie's technique with the switch from that post you linked? </blockquote><br/>Yes. I can get the night time description to show, but one of the other descriptions shows too, depending on whether it's my first or second visit there.",
      "PostDate": "2014-12-06T22:03:46+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32566",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "I'm doubling up all my rooms at the moment, calling them '[room name] night' but it's an absolute nightmare.\n\nWhat I'm doing is effectively making the whole game again, but set at night. There's got to be an easier way that that!\n\nSimplify, simplify, simplify! Scrap the night level (it was a nice idea, but only aesthetic).\n\nHave a day pass by, helps the pacing of the story, but have the player wake up the next [i:3i4dp3mj]day[/i:3i4dp3mj], so that I don't have to worry about the descriptions.",
      "EditableFormat": "bbcode",
      "HTML": "I'm doubling up all my rooms at the moment, calling them '[room name] night' but it's an absolute nightmare.<br/><br/>What I'm doing is effectively making the whole game again, but set at night. There's got to be an easier way that that!<br/><br/>Simplify, simplify, simplify! Scrap the night level (it was a nice idea, but only aesthetic).<br/><br/>Have a day pass by, helps the pacing of the story, but have the player wake up the next <span style=\"font-style:italic;\">day</span>, so that I don't have to worry about the descriptions.",
      "PostDate": "2014-12-06T22:07:12+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32570",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "You need to put the original room description in an &quot;else&quot; off of your nightlevel flag if. It sounds like you're doing:\n\n[code:1uzofmkt]if (player&#46;nightlevel) {\n   // print night level stuff\n}\n\n// original description with the two prints&#46;[/code:1uzofmkt]\nIn this structure, after the nightlevel code runs, it falls through and does your normal room description. Instead you want it more like:\n\n[code:1uzofmkt]if (player&#46;nightlevel) {\n   // print night level stuff\n} else {\n// original description with the two prints&#46;\n}[/code:1uzofmkt]\nIf it's a night level, you don't want to do the other (original) code.",
      "EditableFormat": "bbcode",
      "HTML": "You need to put the original room description in an &quot;else&quot; off of your nightlevel flag if. It sounds like you're doing:<br/><br/><pre><code>if (player&#46;nightlevel) {<br/>   // print night level stuff<br/>}<br/><br/>// original description with the two prints&#46;</code></pre><br/>In this structure, after the nightlevel code runs, it falls through and does your normal room description. Instead you want it more like:<br/><br/><pre><code>if (player&#46;nightlevel) {<br/>   // print night level stuff<br/>} else {<br/>// original description with the two prints&#46;<br/>}</code></pre><br/>If it's a night level, you don't want to do the other (original) code.",
      "PostDate": "2014-12-07T01:21:06+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32571",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "Thanks, Jay. I shall experiment with that.\n\nWould all the other flags and elses I already have in place for other things, be treated differently with this nesting, too?\n\nJust tried a very simple three room test, using 'first time / otherwise' scripts' and a night time description, the way you described, and it worked <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->\n\nYou would not believe how long I struggled with this last night... well, you probably would, but I just couldn't figure out the damn nesting!!\n\nThank you <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "Thanks, Jay. I shall experiment with that.<br/><br/>Would all the other flags and elses I already have in place for other things, be treated differently with this nesting, too?<br/><br/>Just tried a very simple three room test, using 'first time / otherwise' scripts' and a night time description, the way you described, and it worked <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --><br/><br/>You would not believe how long I struggled with this last night... well, you probably would, but I just couldn't figure out the damn nesting!!<br/><br/>Thank you <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2014-12-07T06:45:44+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32572",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "As I expected, rooms that already contain flags get me very muddled when it comes to inserting the night time level.\n\nTake this storage hut, for instance. I have two flags checking for whether or not the player had already gained entry, so how would I add a night version to this?\n\n[code:35l39m3o]if (not GetBoolean(player, &quot;inhut&quot;)) {\n  msg (&quot;It looks like a storage hut&#46;&lt;br/&gt;&lt;br/&gt;East will take you back to the entrance&#46;&lt;br/&gt;&quot;)\n}\nelse if (GetBoolean(player, &quot;inhut&quot;)) {\n  msg (&quot;The door to the storage hut lies open,&lt;br/&gt;&lt;br/&gt;East will take you back to the entrance&#46;&lt;br/&gt;&quot;)\n}[/code:35l39m3o]\n\nFor the night version, I'm also going to have to somehow incorporate 'use torch' scripts into this too  <!-- s:shock: --><img src=\"{SMILIES_PATH}/icon_eek.gif\" alt=\":shock:\" title=\"Shocked\" /><!-- s:shock: -->",
      "EditableFormat": "bbcode",
      "HTML": "As I expected, rooms that already contain flags get me very muddled when it comes to inserting the night time level.<br/><br/>Take this storage hut, for instance. I have two flags checking for whether or not the player had already gained entry, so how would I add a night version to this?<br/><br/><pre><code>if (not GetBoolean(player, &quot;inhut&quot;)) {<br/>  msg (&quot;It looks like a storage hut&#46;&lt;br/&gt;&lt;br/&gt;East will take you back to the entrance&#46;&lt;br/&gt;&quot;)<br/>}<br/>else if (GetBoolean(player, &quot;inhut&quot;)) {<br/>  msg (&quot;The door to the storage hut lies open,&lt;br/&gt;&lt;br/&gt;East will take you back to the entrance&#46;&lt;br/&gt;&quot;)<br/>}</code></pre><br/><br/>For the night version, I'm also going to have to somehow incorporate 'use torch' scripts into this too  <!-- s:shock: --><img src=\"{SMILIES_PATH}/icon_eek.gif\" alt=\":shock:\" title=\"Shocked\" /><!-- s:shock: -->",
      "PostDate": "2014-12-07T08:02:28+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32578",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "I would be selective about which rooms get nighttime descriptions. Does the description for the storage hut change at night? If not, leave it as it is.\n\nAn alternative approach would be to build up a description in your script. In this example, I have a variable called s, to which more text is added, depending on the game state, before getting doosplayed.\n[code:1b8wt2um]s = &quot;It looks like a storage hut&#46;&quot;\nif (GetBoolean(player, &quot;inhut&quot;)) {\n  s = s + &quot; The door lies open&#46;&quot;\n}\nif (GetBoolean(game, &quot;night&quot;)) {\n  s = s + &quot; At this time of night it looks very dark&#46;&quot;\n}\ns = s + &quot;East will take you back to the entrance&#46;&quot;\nmsg(s)[/code:1b8wt2um]",
      "EditableFormat": "bbcode",
      "HTML": "I would be selective about which rooms get nighttime descriptions. Does the description for the storage hut change at night? If not, leave it as it is.<br/><br/>An alternative approach would be to build up a description in your script. In this example, I have a variable called s, to which more text is added, depending on the game state, before getting doosplayed.<br/><pre><code>s = &quot;It looks like a storage hut&#46;&quot;<br/>if (GetBoolean(player, &quot;inhut&quot;)) {<br/>  s = s + &quot; The door lies open&#46;&quot;<br/>}<br/>if (GetBoolean(game, &quot;night&quot;)) {<br/>  s = s + &quot; At this time of night it looks very dark&#46;&quot;<br/>}<br/>s = s + &quot;East will take you back to the entrance&#46;&quot;<br/>msg(s)</code></pre>",
      "PostDate": "2014-12-07T09:54:17+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32580",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "[quote=&quot;The Pixie&quot;:tdt5muoz]I would be selective about which rooms get nighttime descriptions. Does the description for the storage hut change at night? If not, leave it as it is.[/quote:tdt5muoz]\nMore so than anywhere else, in fact, as it's on a derelict industrial park with no lighting - which is why I'm going to have to try and work some torch use into there too.\n\n[quote=&quot;The Pixie&quot;:tdt5muoz]\nAn alternative approach would be to build up a description in your script. In this example, I have a variable called s, to which more text is added, depending on the game state, before getting doosplayed.\n[code:tdt5muoz]s = &quot;It looks like a storage hut&#46;&quot;\nif (GetBoolean(player, &quot;inhut&quot;)) {\n  s = s + &quot; The door lies open&#46;&quot;\n}\nif (GetBoolean(game, &quot;night&quot;)) {\n  s = s + &quot; At this time of night it looks very dark&#46;&quot;\n}\ns = s + &quot;East will take you back to the entrance&#46;&quot;\nmsg(s)[/code:tdt5muoz][/quote:tdt5muoz]\nI'll try adding this, see what happens.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>The Pixie wrote:</cite>I would be selective about which rooms get nighttime descriptions. Does the description for the storage hut change at night? If not, leave it as it is.</blockquote><br/>More so than anywhere else, in fact, as it's on a derelict industrial park with no lighting - which is why I'm going to have to try and work some torch use into there too.<br/><br/><blockquote><cite>The Pixie wrote:</cite><br/>An alternative approach would be to build up a description in your script. In this example, I have a variable called s, to which more text is added, depending on the game state, before getting doosplayed.<br/><pre><code>s = &quot;It looks like a storage hut&#46;&quot;<br/>if (GetBoolean(player, &quot;inhut&quot;)) {<br/>  s = s + &quot; The door lies open&#46;&quot;<br/>}<br/>if (GetBoolean(game, &quot;night&quot;)) {<br/>  s = s + &quot; At this time of night it looks very dark&#46;&quot;<br/>}<br/>s = s + &quot;East will take you back to the entrance&#46;&quot;<br/>msg(s)</code></pre></blockquote><br/>I'll try adding this, see what happens.",
      "PostDate": "2014-12-07T10:08:21+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32582",
      "UserId": 0,
      "Username": "Silver",
      "UserAvatar": null,
      "UserGravatar": "13024be5ccbb463906b024d5bd3cb5e8",
      "EditableText": "If you're struggling at this stage I really wouldn't bring torch use into it. Then it isn't just the description being either night or day. You'll have to set scripts for every single object depending on whether it's day, night or night with the torch on.",
      "EditableFormat": "bbcode",
      "HTML": "If you're struggling at this stage I really wouldn't bring torch use into it. Then it isn't just the description being either night or day. You'll have to set scripts for every single object depending on whether it's day, night or night with the torch on.",
      "PostDate": "2014-12-07T10:19:18+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32583",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "Wonderful! Thanks, TP.\n\nThe one [i:2mul08t7]tiny[/i:2mul08t7] thing is that the &quot;At this time of night it looks very dark.&quot; doesn't trigger on the night level, but it doesn't really matter as the daytime description for outside the hut is okay, even at night. It's only when I go [i:2mul08t7]into[/i:2mul08t7] the hut that the darkness needs to happen, and this is triggered as desired.\n\nThanks again.",
      "EditableFormat": "bbcode",
      "HTML": "Wonderful! Thanks, TP.<br/><br/>The one <span style=\"font-style:italic;\">tiny</span> thing is that the &quot;At this time of night it looks very dark.&quot; doesn't trigger on the night level, but it doesn't really matter as the daytime description for outside the hut is okay, even at night. It's only when I go <span style=\"font-style:italic;\">into</span> the hut that the darkness needs to happen, and this is triggered as desired.<br/><br/>Thanks again.",
      "PostDate": "2014-12-07T10:26:13+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32584",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "[quote=&quot;Silver&quot;:1u332ugs]If you're struggling at this stage I really wouldn't bring torch use into it. Then it isn't just the description being either night or day. You'll have to set scripts for every single object depending on whether it's day, night or night with the torch on.[/quote:1u332ugs]\nI don't want to tempt fate, but I don't think my method would need to do all that. It's a small storage hut, so once the player has turned on their torch, it would illuminate all the objects.\n\nhopefully it's a simple case of: Player can't see &gt;&gt; turn on torch &gt;&gt; player has torch? &gt;&gt; Yes &gt;&gt; Player can see.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>Silver wrote:</cite>If you're struggling at this stage I really wouldn't bring torch use into it. Then it isn't just the description being either night or day. You'll have to set scripts for every single object depending on whether it's day, night or night with the torch on.</blockquote><br/>I don't want to tempt fate, but I don't think my method would need to do all that. It's a small storage hut, so once the player has turned on their torch, it would illuminate all the objects.<br/><br/>hopefully it's a simple case of: Player can't see &gt;&gt; turn on torch &gt;&gt; player has torch? &gt;&gt; Yes &gt;&gt; Player can see.",
      "PostDate": "2014-12-07T10:32:00+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32585",
      "UserId": 0,
      "Username": "Silver",
      "UserAvatar": null,
      "UserGravatar": "13024be5ccbb463906b024d5bd3cb5e8",
      "EditableText": "Could be. I forget you're doing things a bit differently. The very first room in my game has light and dark states. Considering it's one room, it has been a lot of work. Although mine is a bit more complex than a torch on and off. \n\nBut for example, if the room is dark the default for examining an object is &quot;You can't see that.&quot; So a possible issue you'll come up against is:\nuse torch\n&gt;you can't see that.",
      "EditableFormat": "bbcode",
      "HTML": "Could be. I forget you're doing things a bit differently. The very first room in my game has light and dark states. Considering it's one room, it has been a lot of work. Although mine is a bit more complex than a torch on and off. <br/><br/>But for example, if the room is dark the default for examining an object is &quot;You can't see that.&quot; So a possible issue you'll come up against is:<br/>use torch<br/>&gt;you can't see that.",
      "PostDate": "2014-12-07T10:39:57+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32586",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Make the torch a weak light source when it's off and a strong one when it's on. Then you'll always be able to see it, and it will illuminate the room when switched on.",
      "EditableFormat": "bbcode",
      "HTML": "Make the torch a weak light source when it's off and a strong one when it's on. Then you'll always be able to see it, and it will illuminate the room when switched on.",
      "PostDate": "2014-12-07T11:15:12+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32587",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "[quote=&quot;Silver&quot;:21hsha0x]Could be. I forget you're doing things a bit differently. The very first room in my game has light and dark states. Considering it's one room, it has been a lot of work. Although mine is a bit more complex than a torch on and off. \n\nBut for example, if the room is dark the default for examining an object is &quot;You can't see that.&quot; So a possible issue you'll come up against is:\nuse torch\n&gt;you can't see that.[/quote:21hsha0x]\nLOL - we all have our ways, don't we? It's all very interesting, actually.\n\nI don't use light and dark scripts or anything, I just use the narrative. As for the objects, if it's dark, I don't include them in the description until the player switches on their torch, so they're not likely to say 'get book' as I never told them it was there (as it was dark and they couldn't see it).\n\nAs for the torch, I just set a command for 'use torch; switch on torch; etc', then run a script to check if they're carrying it. If they are, I run a description of the newly lit room.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>Silver wrote:</cite>Could be. I forget you're doing things a bit differently. The very first room in my game has light and dark states. Considering it's one room, it has been a lot of work. Although mine is a bit more complex than a torch on and off. <br/><br/>But for example, if the room is dark the default for examining an object is &quot;You can't see that.&quot; So a possible issue you'll come up against is:<br/>use torch<br/>&gt;you can't see that.</blockquote><br/>LOL - we all have our ways, don't we? It's all very interesting, actually.<br/><br/>I don't use light and dark scripts or anything, I just use the narrative. As for the objects, if it's dark, I don't include them in the description until the player switches on their torch, so they're not likely to say 'get book' as I never told them it was there (as it was dark and they couldn't see it).<br/><br/>As for the torch, I just set a command for 'use torch; switch on torch; etc', then run a script to check if they're carrying it. If they are, I run a description of the newly lit room.",
      "PostDate": "2014-12-07T11:37:10+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32591",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "[quote=&quot;The Pixie&quot;:1kmixnh0]I would be selective about which rooms get nighttime descriptions. Does the description for the storage hut change at night? If not, leave it as it is.\n\nAn alternative approach would be to build up a description in your script. In this example, I have a variable called s, to which more text is added, depending on the game state, before getting doosplayed.\n[/quote:1kmixnh0]\n\nhaving a bit of a problem getting the game to remember if the door to the hut has been previously opened on the night section. It works fine on the day section and the sequence should be:\n\n&quot;It looks like a storage hut&quot; &gt;&gt; Enter hut &gt;&gt; &quot;it's locked&quot; &gt;&gt; kick door &gt;&gt; &quot;The door smashes in&quot; &gt;&gt; enter &gt;&gt; &quot;You are inside the hut&quot; &gt;&gt; leave &gt;&gt; &quot;It looks like a storage hut and the door is smashed in&quot; &gt;&gt; enter hut &gt;&gt; &quot;You are inside the hut&quot;\n\nBut at night, I get:\n\n&quot;It looks like a storage hut&quot; &gt;&gt; Enter hut &gt;&gt; &quot;it's locked&quot; &gt;&gt; kick door &gt;&gt; &quot;The door smashes in&quot; &gt;&gt; enter &gt;&gt; &quot;You are inside the hut. It's pitch black&quot; &gt;&gt; leave &gt;&gt; &quot;It looks like a storage hut&quot; &gt;&gt; enter hut &gt;&gt; &quot;it's locked&quot;\n\nThis sequence uses two rooms; hut (exterior) and hutinside (interior)\n\nOn the description for the hut (exterior) I run the following script supplied by TP:\n\n[code:1kmixnh0]s = &quot;It looks like a storage hut&#46;&quot;\nif (GetBoolean(player, &quot;inhut&quot;)) {\n  s = s + &quot; The door lies open&#46;&quot;\n}\nif (GetBoolean(game, &quot;night&quot;)) {\n  s = s + &quot; At this time of night it looks very dark&#46;&quot;\n}\ns = s + &quot;East will take you back to the entrance&#46;&quot;\nmsg (s)[/code:1kmixnh0]\nAnd on the command pattern for 'open door; enter hut; etc' I run the script&#058;\n\n[code:1kmixnh0]if (not GetBoolean(player, &quot;inhut&quot;)) {\n  msg (&quot;You try the door, but it's locked and rattles loosely in the frame&#46; It appears to be very flimsy&#46;&quot;)\n}\nelse if (GetBoolean(player, &quot;inhut&quot;)) {\n  MoveObject (player, hutinside)\n}[/code:1kmixnh0]\nI think I need to add the night condition to the last script, but can't figure out how.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>The Pixie wrote:</cite>I would be selective about which rooms get nighttime descriptions. Does the description for the storage hut change at night? If not, leave it as it is.<br/><br/>An alternative approach would be to build up a description in your script. In this example, I have a variable called s, to which more text is added, depending on the game state, before getting doosplayed.<br/></blockquote><br/><br/>having a bit of a problem getting the game to remember if the door to the hut has been previously opened on the night section. It works fine on the day section and the sequence should be:<br/><br/>&quot;It looks like a storage hut&quot; &gt;&gt; Enter hut &gt;&gt; &quot;it's locked&quot; &gt;&gt; kick door &gt;&gt; &quot;The door smashes in&quot; &gt;&gt; enter &gt;&gt; &quot;You are inside the hut&quot; &gt;&gt; leave &gt;&gt; &quot;It looks like a storage hut and the door is smashed in&quot; &gt;&gt; enter hut &gt;&gt; &quot;You are inside the hut&quot;<br/><br/>But at night, I get:<br/><br/>&quot;It looks like a storage hut&quot; &gt;&gt; Enter hut &gt;&gt; &quot;it's locked&quot; &gt;&gt; kick door &gt;&gt; &quot;The door smashes in&quot; &gt;&gt; enter &gt;&gt; &quot;You are inside the hut. It's pitch black&quot; &gt;&gt; leave &gt;&gt; &quot;It looks like a storage hut&quot; &gt;&gt; enter hut &gt;&gt; &quot;it's locked&quot;<br/><br/>This sequence uses two rooms; hut (exterior) and hutinside (interior)<br/><br/>On the description for the hut (exterior) I run the following script supplied by TP:<br/><br/><pre><code>s = &quot;It looks like a storage hut&#46;&quot;<br/>if (GetBoolean(player, &quot;inhut&quot;)) {<br/>  s = s + &quot; The door lies open&#46;&quot;<br/>}<br/>if (GetBoolean(game, &quot;night&quot;)) {<br/>  s = s + &quot; At this time of night it looks very dark&#46;&quot;<br/>}<br/>s = s + &quot;East will take you back to the entrance&#46;&quot;<br/>msg (s)</code></pre><br/>And on the command pattern for 'open door; enter hut; etc' I run the script&#058;<br/><br/><pre><code>if (not GetBoolean(player, &quot;inhut&quot;)) {<br/>  msg (&quot;You try the door, but it's locked and rattles loosely in the frame&#46; It appears to be very flimsy&#46;&quot;)<br/>}<br/>else if (GetBoolean(player, &quot;inhut&quot;)) {<br/>  MoveObject (player, hutinside)<br/>}</code></pre><br/>I think I need to add the night condition to the last script, but can't figure out how.",
      "PostDate": "2014-12-07T12:17:22+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32592",
      "UserId": 0,
      "Username": "Silver",
      "UserAvatar": null,
      "UserGravatar": "13024be5ccbb463906b024d5bd3cb5e8",
      "EditableText": "[quote=&quot;jaynabonne&quot;:4ru9plk4]Make the torch a weak light source when it's off and a strong one when it's on. Then you'll always be able to see it, and it will illuminate the room when switched on.[/quote:4ru9plk4]\n\nYep, that solves it. And make all the other things you want to be able to see when it's dark weak light sources too (admittedly there might not be any, I had quite a few...)",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>jaynabonne wrote:</cite>Make the torch a weak light source when it's off and a strong one when it's on. Then you'll always be able to see it, and it will illuminate the room when switched on.</blockquote><br/><br/>Yep, that solves it. And make all the other things you want to be able to see when it's dark weak light sources too (admittedly there might not be any, I had quite a few...)",
      "PostDate": "2014-12-07T12:35:20+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32716",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "Sorry to bump, but can anyone with the know-now run their eyes over this to see where I'm going wrong?\n\n[quote:msyql26f]having a bit of a problem getting the game to remember if the door to the hut has been previously opened on the night section. It works fine on the day section and the sequence should be:\n\n&quot;It looks like a storage hut&quot; &gt;&gt; Enter hut &gt;&gt; &quot;it's locked&quot; &gt;&gt; kick door &gt;&gt; &quot;The door smashes in&quot; &gt;&gt; enter &gt;&gt; &quot;You are inside the hut&quot; &gt;&gt; leave &gt;&gt; &quot;It looks like a storage hut and the door is smashed in&quot; &gt;&gt; enter hut &gt;&gt; &quot;You are inside the hut&quot;\n\nBut at night, I get:\n\n&quot;It looks like a storage hut&quot; &gt;&gt; Enter hut &gt;&gt; &quot;it's locked&quot; &gt;&gt; kick door &gt;&gt; &quot;The door smashes in&quot; &gt;&gt; enter &gt;&gt; &quot;You are inside the hut. It's pitch black&quot; &gt;&gt; leave &gt;&gt; &quot;It looks like a storage hut&quot; &gt;&gt; enter hut &gt;&gt; &quot;it's locked&quot;\n\nThis sequence uses two rooms; hut (exterior) and hutinside (interior)\n\nOn the description for the hut (exterior) I run the following script supplied by TP:\n\n[code:msyql26f]s = &quot;It looks like a storage hut&#46;&quot;\nif (GetBoolean(player, &quot;inhut&quot;)) {\n  s = s + &quot; The door lies open&#46;&quot;\n}\nif (GetBoolean(game, &quot;night&quot;)) {\n  s = s + &quot; At this time of night it looks very dark&#46;&quot;\n}\ns = s + &quot;East will take you back to the entrance&#46;&quot;\nmsg (s)[/code:msyql26f]\nAnd on the command pattern for 'open door; enter hut; etc' I run the script&#058;\n\n[code:msyql26f]if (not GetBoolean(player, &quot;inhut&quot;)) {\n  msg (&quot;You try the door, but it's locked and rattles loosely in the frame&#46; It appears to be very flimsy&#46;&quot;)\n}\nelse if (GetBoolean(player, &quot;inhut&quot;)) {\n  MoveObject (player, hutinside)\n}[/code:msyql26f]\nI think I need to add the night condition to the last script, but can't figure out how.[/quote:msyql26f]",
      "EditableFormat": "bbcode",
      "HTML": "Sorry to bump, but can anyone with the know-now run their eyes over this to see where I'm going wrong?<br/><br/><blockquote><p>having a bit of a problem getting the game to remember if the door to the hut has been previously opened on the night section. It works fine on the day section and the sequence should be:<br/><br/>&quot;It looks like a storage hut&quot; &gt;&gt; Enter hut &gt;&gt; &quot;it's locked&quot; &gt;&gt; kick door &gt;&gt; &quot;The door smashes in&quot; &gt;&gt; enter &gt;&gt; &quot;You are inside the hut&quot; &gt;&gt; leave &gt;&gt; &quot;It looks like a storage hut and the door is smashed in&quot; &gt;&gt; enter hut &gt;&gt; &quot;You are inside the hut&quot;<br/><br/>But at night, I get:<br/><br/>&quot;It looks like a storage hut&quot; &gt;&gt; Enter hut &gt;&gt; &quot;it's locked&quot; &gt;&gt; kick door &gt;&gt; &quot;The door smashes in&quot; &gt;&gt; enter &gt;&gt; &quot;You are inside the hut. It's pitch black&quot; &gt;&gt; leave &gt;&gt; &quot;It looks like a storage hut&quot; &gt;&gt; enter hut &gt;&gt; &quot;it's locked&quot;<br/><br/>This sequence uses two rooms; hut (exterior) and hutinside (interior)<br/><br/>On the description for the hut (exterior) I run the following script supplied by TP:<br/><br/><pre><code>s = &quot;It looks like a storage hut&#46;&quot;<br/>if (GetBoolean(player, &quot;inhut&quot;)) {<br/>  s = s + &quot; The door lies open&#46;&quot;<br/>}<br/>if (GetBoolean(game, &quot;night&quot;)) {<br/>  s = s + &quot; At this time of night it looks very dark&#46;&quot;<br/>}<br/>s = s + &quot;East will take you back to the entrance&#46;&quot;<br/>msg (s)</code></pre><br/>And on the command pattern for 'open door; enter hut; etc' I run the script&#058;<br/><br/><pre><code>if (not GetBoolean(player, &quot;inhut&quot;)) {<br/>  msg (&quot;You try the door, but it's locked and rattles loosely in the frame&#46; It appears to be very flimsy&#46;&quot;)<br/>}<br/>else if (GetBoolean(player, &quot;inhut&quot;)) {<br/>  MoveObject (player, hutinside)<br/>}</code></pre><br/>I think I need to add the night condition to the last script, but can't figure out how.</p></blockquote>",
      "PostDate": "2014-12-09T02:28:37+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32717",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "@OurJud,\n\nkey:\n\nnocturnal: sleep during the day, awake at night\ndiurnal (or however it's spelled): sleep during the night, awake during the day\n\nhere's an example of working with two flags:\n\nyou can do it in either order:\n\nOrder 1:\n\n[code:1ntydw9d]if (game&#46;daytime_or_nighttime = &quot;nighttime&quot;) {\n  if (player&#46;sleep_behavior = &quot;diurnal&quot;) {\n    player&#46;sleeping = true\n  } else if (player&#46;sleep_behavior = &quot;nocturnal&quot;) {\n    player&#46;sleeping = false\n  }\n} else if (game&#46;daytime_or_nighttime = &quot;daytime&quot;) {\n  if (player&#46;sleep_behavior = &quot;diurnal&quot;) {\n    player&#46;sleeping = false\n  } else if (player&#46;sleep_behavior = &quot;nocturnal&quot;) {\n    player&#46;sleeping = true\n  }\n}[/code:1ntydw9d]\n\nOR\n\nOrder 2:\n\n[code:1ntydw9d]if (player&#46;sleep_behavior = &quot;diurnal&quot;) {\n  if (game&#46;daytime_or_nighttime = &quot;daytime&quot;) {\n    player&#46;sleeping = false\n  } else if (game&#46;daytime_or_nighttime = &quot;nighttime&quot;) {\n    player&#46;sleeping = true\n  }\n} else if (player&#46;sleep_behavior = &quot;nocturnal&quot;) {\n  if (game&#46;daytime_or_nighttime = &quot;daytime&quot;) {\n    player&#46;sleeping = true\n  } else if (game&#46;daytime_or_nighttime = &quot;nighttime&quot;) {\n    player&#46;sleeping = false\n  }\n}[/code:1ntydw9d]\n\n-----------------\n\nso the same is true for your 'dark~light' and 'inside~outside' Flags:\n\nif (dark)\n-&gt; if (inside)\n-&gt;-&gt; script1\n-&gt; else if (outside)\n-&gt;-&gt; script2\nelse if (light)\n-&gt; if (inside)\n-&gt;-&gt; script3\n-&gt; else if (outside)\n-&gt;-&gt; script4\n\nOR\n\nif (inside)\n-&gt; if (light)\n-&gt;-&gt; script1\n-&gt; else if (dark)\n-&gt;-&gt; script2\nelse if (outside)\n-&gt; if (light)\n-&gt;-&gt; script3\n-&gt; else if (dark)\n-&gt;-&gt; script4",
      "EditableFormat": "bbcode",
      "HTML": "@OurJud,<br/><br/>key:<br/><br/>nocturnal: sleep during the day, awake at night<br/>diurnal (or however it's spelled): sleep during the night, awake during the day<br/><br/>here's an example of working with two flags:<br/><br/>you can do it in either order:<br/><br/>Order 1:<br/><br/><pre><code>if (game&#46;daytime_or_nighttime = &quot;nighttime&quot;) {<br/>  if (player&#46;sleep_behavior = &quot;diurnal&quot;) {<br/>    player&#46;sleeping = true<br/>  } else if (player&#46;sleep_behavior = &quot;nocturnal&quot;) {<br/>    player&#46;sleeping = false<br/>  }<br/>} else if (game&#46;daytime_or_nighttime = &quot;daytime&quot;) {<br/>  if (player&#46;sleep_behavior = &quot;diurnal&quot;) {<br/>    player&#46;sleeping = false<br/>  } else if (player&#46;sleep_behavior = &quot;nocturnal&quot;) {<br/>    player&#46;sleeping = true<br/>  }<br/>}</code></pre><br/><br/>OR<br/><br/>Order 2:<br/><br/><pre><code>if (player&#46;sleep_behavior = &quot;diurnal&quot;) {<br/>  if (game&#46;daytime_or_nighttime = &quot;daytime&quot;) {<br/>    player&#46;sleeping = false<br/>  } else if (game&#46;daytime_or_nighttime = &quot;nighttime&quot;) {<br/>    player&#46;sleeping = true<br/>  }<br/>} else if (player&#46;sleep_behavior = &quot;nocturnal&quot;) {<br/>  if (game&#46;daytime_or_nighttime = &quot;daytime&quot;) {<br/>    player&#46;sleeping = true<br/>  } else if (game&#46;daytime_or_nighttime = &quot;nighttime&quot;) {<br/>    player&#46;sleeping = false<br/>  }<br/>}</code></pre><br/><br/>-----------------<br/><br/>so the same is true for your 'dark~light' and 'inside~outside' Flags:<br/><br/>if (dark)<br/>-&gt; if (inside)<br/>-&gt;-&gt; script1<br/>-&gt; else if (outside)<br/>-&gt;-&gt; script2<br/>else if (light)<br/>-&gt; if (inside)<br/>-&gt;-&gt; script3<br/>-&gt; else if (outside)<br/>-&gt;-&gt; script4<br/><br/>OR<br/><br/>if (inside)<br/>-&gt; if (light)<br/>-&gt;-&gt; script1<br/>-&gt; else if (dark)<br/>-&gt;-&gt; script2<br/>else if (outside)<br/>-&gt; if (light)<br/>-&gt;-&gt; script3<br/>-&gt; else if (dark)<br/>-&gt;-&gt; script4",
      "PostDate": "2014-12-09T06:41:48+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32719",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "[quote=&quot;OurJud&quot;:3emtzmzs]Sorry to bump, but can anyone with the know-now run their eyes over this to see where I'm going wrong?[/quote:3emtzmzs]\nThe code you posted should work fine. Where are you setting player.inhut? I would look there and see if it is missed at night (or post your whole game).\n\nThat said...\n[code:3emtzmzs]if (not GetBoolean(player, &quot;inhut&quot;)) {\n  msg (&quot;You try the door, but it's locked and rattles loosely in the frame&#46; It appears to be very flimsy&#46;&quot;)\n}\nelse if (GetBoolean(player, &quot;inhut&quot;)) {\n  MoveObject (player, hutinside)\n}[/code:3emtzmzs]\nYou do not need the second if statement here. Try this:\n[code:3emtzmzs]if (not GetBoolean(player, &quot;inhut&quot;)) {\n  msg (&quot;You try the door, but it's locked and rattles loosely in the frame&#46; It appears to be very flimsy&#46;&quot;)\n}\nelse {\n  MoveObject (player, hutinside)\n}[/code:3emtzmzs]\nThe game does the test in the first line. If it is true, it does the first block (bit in {}), if it is not true, it does the block after the else. No need to check it is not true at that point - it has to be to get there (sometimes you do want to test if something else is true, so you will see if tests there, but they should be testing something else).",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>OurJud wrote:</cite>Sorry to bump, but can anyone with the know-now run their eyes over this to see where I'm going wrong?</blockquote><br/>The code you posted should work fine. Where are you setting player.inhut? I would look there and see if it is missed at night (or post your whole game).<br/><br/>That said...<br/><pre><code>if (not GetBoolean(player, &quot;inhut&quot;)) {<br/>  msg (&quot;You try the door, but it's locked and rattles loosely in the frame&#46; It appears to be very flimsy&#46;&quot;)<br/>}<br/>else if (GetBoolean(player, &quot;inhut&quot;)) {<br/>  MoveObject (player, hutinside)<br/>}</code></pre><br/>You do not need the second if statement here. Try this:<br/><pre><code>if (not GetBoolean(player, &quot;inhut&quot;)) {<br/>  msg (&quot;You try the door, but it's locked and rattles loosely in the frame&#46; It appears to be very flimsy&#46;&quot;)<br/>}<br/>else {<br/>  MoveObject (player, hutinside)<br/>}</code></pre><br/>The game does the test in the first line. If it is true, it does the first block (bit in {}), if it is not true, it does the block after the else. No need to check it is not true at that point - it has to be to get there (sometimes you do want to test if something else is true, so you will see if tests there, but they should be testing something else).",
      "PostDate": "2014-12-09T08:02:40+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "32720",
      "UserId": 0,
      "Username": "OurJud",
      "UserAvatar": "7473_1417206896.jpg",
      "UserGravatar": "7892e1059c02a91b34ffd60deb7402ff",
      "EditableText": "[quote=&quot;The Pixie&quot;:3340y7wq]Where are you setting player.inhut? I would look there and see if it is missed at night (or post your whole game).[/quote:3340y7wq]\nThanks, HK, I'll try and get my head around that at some point.\n\nTP, thank you so much. That was exactly the problem. I set the inhut flag inside the hut, but as you so rightly point out, I hadn't set it for the night version. It's funny how when you look at things with a fresh mind, you see them straight away.\n\nAlthough that's not to say I would have done without you pointing out it was that which may have been causing the problem.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>The Pixie wrote:</cite>Where are you setting player.inhut? I would look there and see if it is missed at night (or post your whole game).</blockquote><br/>Thanks, HK, I'll try and get my head around that at some point.<br/><br/>TP, thank you so much. That was exactly the problem. I set the inhut flag inside the hut, but as you so rightly point out, I hadn't set it for the night version. It's funny how when you look at things with a fresh mind, you see them straight away.<br/><br/>Although that's not to say I would have done without you pointing out it was that which may have been causing the problem.",
      "PostDate": "2014-12-09T08:37:21+00:00",
      "LastEditDate": null
    }
  ]
}
