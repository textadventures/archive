{
  "Topic": {
    "TopicId": "934",
    "ForumId": "10",
    "Title": "strings to numeric, can it be done?",
    "LastUpdated": "2005-12-12T15:47:53+00:00",
    "ReplyCount": 8
  },
  "Posts": [
    {
      "PostId": "7133",
      "UserId": 0,
      "Username": "Elexxorine",
      "UserAvatar": null,
      "UserGravatar": "a220ee44d8fe2f07029cf1f61b98bf40",
      "EditableText": "i'm having some trouble when trying to use properties as quest sees them as strings, yet i need to use them as numerics. i have tried setting numeric status variables as them but quest crashes.... how can i, if at all, do it?",
      "EditableFormat": "bbcode",
      "HTML": "i'm having some trouble when trying to use properties as quest sees them as strings, yet i need to use them as numerics. i have tried setting numeric status variables as them but quest crashes.... how can i, if at all, do it?",
      "PostDate": "2005-12-08T11:17:14+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7136",
      "UserId": 0,
      "Username": "paul_one",
      "UserAvatar": null,
      "UserGravatar": "fef8a1875028f4300bb683f29c432894",
      "EditableText": "property &lt;#object#; value&gt; - or however you do a property set... then:\n\nset numeric &lt;temporaryvalue; #(object):property# &gt;\n\nNow that should get all the numbers from the property.",
      "EditableFormat": "bbcode",
      "HTML": "property &lt;#object#; value&gt; - or however you do a property set... then:<br/><br/>set numeric &lt;temporaryvalue; #(object):property# &gt;<br/><br/>Now that should get all the numbers from the property.",
      "PostDate": "2005-12-08T13:02:44+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7137",
      "UserId": 0,
      "Username": "Elexxorine",
      "UserAvatar": null,
      "UserGravatar": "a220ee44d8fe2f07029cf1f61b98bf40",
      "EditableText": "i'm doing that but it comes up with 'type mismatch' and 'invalid procedure call or arguement'. you seriously think i didn't think of setting a numeric to the propery value? shame on you tron.",
      "EditableFormat": "bbcode",
      "HTML": "i'm doing that but it comes up with 'type mismatch' and 'invalid procedure call or arguement'. you seriously think i didn't think of setting a numeric to the propery value? shame on you tron.",
      "PostDate": "2005-12-09T13:53:44+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7141",
      "UserId": 0,
      "Username": "paul_one",
      "UserAvatar": null,
      "UserGravatar": "fef8a1875028f4300bb683f29c432894",
      "EditableText": "Here is a snippet of code that WORKS.\nAs tested, by me.\nType \"property\" and then ANYTHING - mixture of numbers and/or letters and/or funny symbols. I'd be a little careful around #'s and %'s though.\n\nDoes this mean I get a prize like this? (warning, naughty piccy for those at work/etc/under a certain age):\n[ [i:1ci2bnuo]link removed by Alex, obviously...[/i:1ci2bnuo] ]\n\n[code:1ci2bnuo]' Game created by the Almighty Tr0nÂ²\n\ndefine game &lt;property test&gt;\n\tasl-version &lt;350&gt;\n\tgame author &lt;Tr0nÂ²&gt;\n\tgame version &lt;0&#46;35&gt;\n\tgame info &lt;Created for Elexxorine&gt;\n\n\tstart &lt;onlyroom&gt;\n\t\n\tdefine variable &lt;whitenumbers&gt;\n\t\ttype numeric\n\t\tvalue &lt;0&gt;\n\t\tdisplay &lt;white&#58; !&gt;\n\tend define\n\t\nend define\n\ndefine room &lt;onlyroom&gt;\n\n\tdescription &lt;Woop! &#46;&#46;&#46; A plain white room - what do you expect?&gt;\n\t\n\tcommand &lt;property #value#&gt; &#123;\n\t\tproperty &lt;onlyroom; white=#value#&gt;\n\t\tmsg &lt;Property now = #onlyroom&#58;white# ! &gt;\n\t&#125;\n\tcommand &lt;set&gt; &#123;\n\t\tset numeric &lt;whitenumbers; #onlyroom&#58;white#&gt;\n\t\tmsg &lt;%whitenumbers%&gt;\n\t&#125;\n\tcommand &lt;set2&gt; &#123;\n\t\tset numeric &lt;whitenumbers; $objectproperty&#40;onlyroom;white&#41;$&gt;\n\t\tmsg &lt;%whitenumbers%&gt;\n\t&#125;\n\nend define[/code:1ci2bnuo]",
      "EditableFormat": "bbcode",
      "HTML": "Here is a snippet of code that WORKS.<br/>As tested, by me.<br/>Type \"property\" and then ANYTHING - mixture of numbers and/or letters and/or funny symbols. I'd be a little careful around #'s and %'s though.<br/><br/>Does this mean I get a prize like this? (warning, naughty piccy for those at work/etc/under a certain age):<br/>[ <span style=\"font-style:italic;\">link removed by Alex, obviously...</span> ]<br/><br/><pre><code>' Game created by the Almighty Tr0nÂ²<br/><br/>define game &lt;property test&gt;<br/>\tasl-version &lt;350&gt;<br/>\tgame author &lt;Tr0nÂ²&gt;<br/>\tgame version &lt;0&#46;35&gt;<br/>\tgame info &lt;Created for Elexxorine&gt;<br/><br/>\tstart &lt;onlyroom&gt;<br/>\t<br/>\tdefine variable &lt;whitenumbers&gt;<br/>\t\ttype numeric<br/>\t\tvalue &lt;0&gt;<br/>\t\tdisplay &lt;white&#58; !&gt;<br/>\tend define<br/>\t<br/>end define<br/><br/>define room &lt;onlyroom&gt;<br/><br/>\tdescription &lt;Woop! &#46;&#46;&#46; A plain white room - what do you expect?&gt;<br/>\t<br/>\tcommand &lt;property #value#&gt; &#123;<br/>\t\tproperty &lt;onlyroom; white=#value#&gt;<br/>\t\tmsg &lt;Property now = #onlyroom&#58;white# ! &gt;<br/>\t&#125;<br/>\tcommand &lt;set&gt; &#123;<br/>\t\tset numeric &lt;whitenumbers; #onlyroom&#58;white#&gt;<br/>\t\tmsg &lt;%whitenumbers%&gt;<br/>\t&#125;<br/>\tcommand &lt;set2&gt; &#123;<br/>\t\tset numeric &lt;whitenumbers; $objectproperty&#40;onlyroom;white&#41;$&gt;<br/>\t\tmsg &lt;%whitenumbers%&gt;<br/>\t&#125;<br/><br/>end define</code></pre>",
      "PostDate": "2005-12-11T20:18:23+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7143",
      "UserId": 0,
      "Username": "Elexxorine",
      "UserAvatar": null,
      "UserGravatar": "a220ee44d8fe2f07029cf1f61b98bf40",
      "EditableText": "ok. my code's a little bit more complicated than that. plus i need to use #'s and do maths with the properties.... there's my code, YAY you get to go through 21 1/2 K of text...... sorry.... (the bit where it doesn't work is when checking who goes first in the battle, that the first bit using properties in maths... that's as far as i get, quest crashes there, the mon_hit codes are pritty much the same as the one's for you, except switched over....) have fun:\n[quote:2tb3wbgf]' \"Elexxorine's RPG base code\"\n' Created with QDK 3.53 - UNREGISTERED VERSION\n\ndefine game &lt;Elexxorine's RPG base code&gt;\n\tasl-version &lt;350&gt;\n\tgametype singleplayer\n\tstart &lt;Start&gt;\n\tgame author &lt;Elexxorine&gt;\n\tgame version &lt;0.0.001&gt;\n\tgame copyright &lt;Â© 2005 Elexxorine.&gt;\n\tgame info &lt;Created with QDK 3.53 - UNREGISTERED EVALUATION VERSION.&gt;\n\tdefault fontsize &lt;16&gt;\n\tbackground &lt;black&gt;\n\tforeground &lt;white&gt;\n\tstartscript {\n\t\tgive &lt;me&gt;\n\t\tmsg &lt;|s45|jc|bWelcome to Elexxorine's |cl|iRPG Base Code.|cb|xi|xb|s22|n|jc|iFor making advanced single player rpg's.|xi|n|cr|jc(Copyright: 2005 by Elexxorine.)|cb|n|nThis code has been made for use as a base for rpg's. It includes a battle system, time, highly advanced weather system, shops, magic, conditions, and many other cool stuff.|n|n|iI would like to thank Christopher Ames and his 'RPG - Reading Presented Gallivant' for inspiring me to keep going and showing me how useful object properties are.|xi|n|nPlease tell me of all bugs/comments/etc by emailing me at: |cr|ilord.daedran@hotmail.com|cb|xi, even if it's just a spelling mistake - though all care has been put into making this game grammatically correct and spelt right, I am still dyslexic (yet I can spell dyslexia, strange) and will make mistakes.|n|nAnyway: I hope you enjoy.&gt;\n\t\twait &lt;Press any key...&gt;\n\t\tclear\n\t\tmsg&lt;|jc|s16CHANGE!!!!!&gt;\n\t\tclear\n\t}\n\tafterturn do &lt;after turn checks&gt;\n\tcommand &lt;stats&gt; msg &lt;You are a level #me:lvl# #me:gender# #me:race# #me:class#, going by the name of #me:name#. You are wearing #me:armour_body# about your body as well as #me:armour_extra# and carrying a #me:weapon#.|nTpye '|cgstats me/weapon/armour/items/spells/area|cb' for more info.&gt;\n\tcommand &lt;stats me&gt; msg &lt;|bGeneral:|xb|nName: #me:name#.|nRace: #me:race#.|nClass: #me:class#.|nGender: #me:gender#.|nLevel: #me:lvl#.|nExp: #me:exp#.|n|nHit points: #me:cur_hp# / #me:max_hp#.|nMana: #me:cur_mp# / #me:max_mp#.|nStamina: #me:cur_sta# / #me:max_sta#.|nHunger: #me:cur_hun# / #me:max_hun#.|n|nWeapon: #me:weapon#.|nArmour: #me:armour_body#.|nOther: #me:armour_extra#.|n|n|bStats:|xb|nStrength: #me:temp_str# / #me:max_str#.|nAglity: #me:temp_agl# / #me:max_agl#.|nIntelligance: #me:temp_int# / #me:max_int#.|nWisdom: #me:temp_wis# / #me:max_wis#.|nCharisma: #me:temp_cha# / #me:max_cha#.|nDexerity: #me:temp_dex# / #me:max_dex#.|nSpeed: #me:temp_spd# / #me:max_spd#.|nStamina: #me:temp_sta# / #me:max_sta#.|n|n|bConditions:|xb|n&gt;\n\terror &lt;badcommand; You cannot do that.&gt;\n\terror &lt;badthing; You cannot see that here.&gt;\n\terror &lt;badplace; You cannot go there.&gt;\n\terror &lt;itemunwanted; #quest.error.gender# politely refuses your offer.&gt;\n\terror &lt;defaultuse; You can't use that now.&gt;\n\terror &lt;cantdrop; You cannot drop this.&gt;\n\terror &lt;noitem; You don't have that.&gt;\n\terror &lt;badexamine; You cannot do that.&gt;\n\terror &lt;badgo; You cannot do that.&gt;\n\terror &lt;baduse; You cannot do that.&gt;\n\terror &lt;badgive; Give to whom?&gt;\n\terror &lt;badtake; You cannot take that.&gt;\n\terror &lt;baditem; You cannot see that.&gt;\n\terror &lt;baddrop; You don't have that.&gt;\n\terror &lt;badpronoun; Please define 'it'.&gt;\n\terror &lt;defaultout; You cannot go out from here.&gt;\n\terror &lt;defaultdrop; You drop #quest.error.article# onto the ground.&gt;\n\terror &lt;defaultexamine; $objectproperty(#thing#; look)$&gt;\n\terror &lt;defaultlook; Surprisingly uninteresting.&gt;\n\terror &lt;defaultspeak; You cannot speak to #quest.error.gender#.&gt;\n\terror &lt;defaulttake; You take #quest.error.article# and put #quest.error.article# in your bag.&gt;\n\tdefine variable &lt;diffrate&gt;\n\t\ttype numeric\n\t\tvalue &lt;0&gt;\n\tend define\n\t` badcommand:    the player types an invalid command\n\t` baddrop:    the player tries to drop an object they are not carrying\n\t` badexamine:     the player uses \"examine\" in an unrecognized way\n\t` baditem:     the player tries to take an object which does not exist\n\t` badgo:     the player uses \"go\" in an unrecognized way\n\t` badgive:     the player uses \"give\" and does not specify an object to give to\n\t` badlook:     (obsolete from Quest 3.1 onwards)\n\t` badplace:     the player tries to go to a non-existent room using \"go to ...\".\n\t` badpronou:n     the player uses a pronoun (\"IT\" etc.) when that pronoun doesn\n\t`     (the pronoun used is returned in #quest.error.pronoun#)\n\t` badtake:     the player tries to take an object which can\n\t` badthing:     the player tries to do something to an object that does not exist\n\t` baduse:     the player uses \"use\" in an unrecognized way\n\t` cantdrop:     the player tries to drop an object that can\n\t` defaultdrop:    the player successfully drops an object\n\t`     (the article (e.g. \"it\", \"them\") is returned in #quest.error.article#)\n\t` defaultexamine: the player examines something for which there is no examine tag defined\n\t` defaultlook:     the player looks at something for which there is no \"look\" tag defined\n\t` defaultout:     the player tries to use \"out\" to exit from a room which has no \"out\" tag\n\t` defaultspeak: the player speaks to an object for whom there is no \"speak\" tag defined\n\t` defaulttake:     the player picks up an object successfully. e.g. \"You pick it up.\"\n\t` defaultuse:     the player tries to use something on an object where no relevant \"use\" tag can be found\n\t` itemunwanted: an object does not want an object being given to it (i.e., no relevant \"give\" tag can be           ` found)\n\t` noitem: the player tries to use an object they don\nend define\n\ndefine synonyms\nend define\n\ndefine room &lt;Start&gt;\n\talias &lt;Unknown&gt;\n\tlook &lt;Swirling mist surrounds you, covering your body and all that is around you. You cannot see anything but the mist. Slowly it changes colour from its dull grey to a pale blue and then to purple, you can fell your invisable body changing shape, forming outside your vision. A tiny thought is telling you that you can control this shaping somehow...&gt;\n\tindescription &lt;|jl|s16You do not know where you are.&gt;\n\tscript {\n\t\twait &lt;Press any key...&gt;\n\t\tchoose &lt;race_pick&gt;\n\t}\n\n\tdefine object &lt;me&gt;\n\t\talias &lt;you&gt;\n\t\talt &lt;me; myself&gt;\n\t\tlook exec &lt;stats&gt;\n\t\texamine exec &lt;stats me&gt;\n\t\tdisplaytype &lt;PC&gt;\n\t\tarticle &lt;you&gt;\n\t\tproperties &lt;you; character; max_hp=0; cur_hp=0; max_mp=0; cur_mp=0; cur_hun=0; max_hun=0; name=(no name); race=(no race); class=(no class); gender=(no gender); lvl=0; exp=0; armour_body=nothing; armour_extra=nothing; weapon=nothing; max_str=0; max_agl=0; max_int=0; max_wis=0; max_cha=0; max_dex=0; max_sta=0; max_spd=0; cur_str=0; cur_agl=0; cur_int=0; cur_wis=0; cur_cha=0; cur_dex=0; cur_sta=0; cur_spd=0; temp_str=0; temp_agl=0; temp_int=0; temp_wis=0; temp_cha=0; temp_dex=0; temp_sta=0; temp_spd=0; not dead; not poison; not deadly_poison; not mind_poison; not mind_sap; not paralye; not burn; not freeze; not confusion; not blind; not mute; not deaf; not sleep; not stun; not unkillable; not nightsee; not fly; not invisable&gt;\n\tend define\n\nend define\n\ndefine room &lt;Start2&gt;\n\talias &lt;Unknown&gt;\n\tlook &lt;The mist still surrounds you and your nearly formed body. Its colour keeps switching between a powder blue and a warm pink...&gt;\n\tindescription &lt;You do not know where you are.&gt;\n\tscript {\n\t\twait &lt;Press any key...&gt;\n\t\tchoose &lt;gender_pick&gt;\n\t}\nend define\n\ndefine room &lt;Start3&gt;\n\talias &lt;Unknown&gt;\n\tlook &lt;Suddenly you start to fall and land on the ground beneath you with a loud thud and lie there dazed. Off in the distance you can hear the sound of footsteps approaching...&gt;\n\tindescription &lt;You do not know where you are.&gt;\n\tscript {\n\t\twait &lt;Press any key...&gt;\n\t\tgoto &lt;town&gt;\n\t}\nend define\n\ndefine room &lt;mon_store&gt;\n\tlook &lt;How did you get here, I wonder?&gt;\n\tindescription &lt;You are in the :&gt;\n\tscript msg &lt;haha&gt;\n\n\tdefine object &lt;wisp&gt;\n\t\talias &lt;will o' wisp&gt;\n\t\talt &lt;wisp&gt;\n\t\tlook &lt;You look closely at the ball od smoke - It's a will o' wisp. These are very rare and their smoke is highly vavlued.&gt;\n\t\tdisplaytype &lt;Monster&gt;\n\t\tarticle &lt;it&gt;\n\t\tproperties &lt;monster; race=wisp; element=air; gender=it; cur_hp=3; cur_sta=999; hp=3; lvl=2; exp=120; minda=1; maxda=6; dodge=8; magic=0; sta=999; spd=4; dex=8; def=6; not effectable; not dead; not poison; not deadly_poison; not mind_poison; not mind_sap; not paralye; not burn; not freeze; not confusion; not blind; not mute; not deaf; not sleep; not stun; not unkillable; not nightsee; not fly; not invisable&gt;\n\tend define\n\n\tdefine object &lt;fimp&gt;\n\t\talias &lt;Fire imp&gt;\n\t\talt &lt;imp; fire imp&gt;\n\t\tlook &lt;A ball of fire surrounds the magical imp, the flame lick at the air and the smell of burning is in the air.&gt;\n\t\tdisplaytype &lt;Monster&gt;\n\t\tarticle &lt;it&gt;\n\t\tproperties &lt;monster; race=imp_fire; element=fire; gender=it; cur_hp=7; cur_sta=10; hp=7; lvl=1; exp=50; minda=0; maxda=3; dodge=1; magic=0; sta=5; spd=3; dex=3; def=2; not dead; not poison; not deadly_poison; not mind_poison; not mind_sap; not paralye; not burn; not freeze; not confusion; not blind; not mute; not deaf; not sleep; not stun; not unkillable; not nightsee; not fly; not invisable&gt;\n\tend define\n\nend define\n\ndefine room &lt;battle room&gt;\n\tlook &lt;OH NO!!! A BATTLE!&gt;\n\tindescription &lt;You are in the :&gt;\nend define\n\ndefine room &lt;town&gt;\n\tlook &lt;A small save-haeven from the widerness outside.&gt;\n\tindescription &lt;You are in a :&gt;\n\twest &lt;wilderness1&gt;\n\tproperties &lt;town&gt;\nend define\n\ndefine room &lt;wilderness1&gt;\n\talias &lt;wilderness&gt;\n\tlook &lt;Thick trees surround you, monsters could be lurking anywhere.&gt;\n\tindescription &lt;You are in the :&gt;\n\teast &lt;town&gt;\n\tproperties &lt;wilderness; wood&gt;\n\n\tdefine object &lt;tempnum&gt;\n\t\tproperties &lt;1=0; 2=0; 3=0; 4=0; 5=0&gt;\n\tend define\nend define\n\ndefine procedure &lt;mon_dataget&gt;\n\tset numeric &lt;mnum; $rand(1; 2)$&gt;\n\tif ( %mnum% = 1 ) then {\n\t\tset string &lt;mon_name; wisp&gt;\n\t\tmsg &lt;You are fighting a wisp, level=$objectproperty(#mon_name#; lvl)$.&gt;\n\t\tmove &lt;wisp; battle room&gt;\n\t}\n\tif ( %mnum% = 2 ) then {\n\t\tset string &lt;mon_name; fimp&gt;\n\t\tmsg &lt;You are fighting a fire imp, level=$objectproperty(#mon_name#; lvl)$.&gt;\n\t\tmove &lt;fimp; battle room&gt;\n\t}\n\tset &lt;diffrate; $objectproperty(#mon_name#; lvl)$ - #me:lvl#&gt;\n\tif ( %diffrate% &gt; 5 ) then msg &lt;What would you like on your tomb stone?&gt;\n\tif ( %diffrate% &lt; 6 ) and ( %diffrate% &gt; 2 ) then msg &lt;Look like it'll be a tricky fight.&gt;\n\tif ( %diffrate% &lt; 3 ) and ( %diffrate% &gt; -3 ) then msg &lt;Looks like a fair fight.&gt;\n\tif ( %diffrate% &lt; -2 ) and ( %diffrate% &gt; -6 ) then msg &lt;Looks like you have the upper hand.&gt;\n\tif ( %diffrate% &lt; -5 ) then msg &lt;This'll be easy!&gt;\n\tgoto &lt;battle room&gt;\n\tchoose &lt;battle_menu&gt;\nend define\n\ndefine procedure &lt;att_order&gt;\n\tmsg &lt;your spd=#me:temp_spd#, mon's spd=$objectproperty(#mon_name#; spd)$.&gt;\n\t'property &lt;tempnum:1; $objectproperty(#mon_name#; spd)$&gt;\n\t'property &lt;tempnum:2; $objectproperty(me; temp_spd)$&gt;\n\t' ##\n\tproperty &lt;tempnum:1; 4&gt;\n\tproperty &lt;tempnum:2; 3&gt;\n\t' ##\n\t'set numeric &lt;temp; $objectproperty(#mon_name#; spd)$&gt;\n\t'set numeric &lt;temp2; $objectproperty(me; temp_spd)$&gt;\n\tif ( $objectproperty(tempnum; 2)$ &gt; $objectproperty(tempnum; 1)$ ) then {\n\t\tmsg &lt;You will attack first...&gt;\n\t\tdo &lt;you_hit&gt; }\n\tif ( $objectproperty(tempnum; 2)$ &lt; $objectproperty(tempnum; 1)$ ) then {\n\t\tmsg &lt;#mon_name# will attack first...&gt;\n\t\tdo &lt;mon_hit&gt; }\n\tif ( $objectproperty(tempnum; 2)$ = $objectproperty(tempnum; 1)$ ) then {\n\t\tset numeric &lt;temp; $rand(0; 1)$&gt;\n\t\tif ( %temp% = 0 ) then do &lt;you_hit&gt; else do &lt;mon_hit&gt; }\n\nend define\n\ndefine procedure &lt;you_hit&gt;\n\tif property &lt;me; paralyse&gt; then {\n\t\tset nemeric &lt;temp; $rand(0; 1)$&gt;\n\t\tif ( %temp% = 0 ) then {\n\t\t\tmsg &lt;You are paralysed and cannot attack.&gt;\n\t\t\tdo &lt;mon_hit&gt;\n\t\t}\n\t\telse do &lt;you_hit2&gt;\n\t}\n\telse {\n\t\tif property &lt;me; sleep&gt; then {\n\t\t\tset numeric &lt;temp; $rand(0; 3)$&gt;\n\t\t\tif ( %temp% = 3 ) then {\n\t\t\t\tmsg &lt;You wake up and attack.&gt;\n\t\t\t\tdo &lt;you_hit2&gt;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmsg &lt;You are asleep and do not wake up.&gt;\n\t\t\t\tdo &lt;mon_hit&gt;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif property &lt;me; blind&gt; then {\n\t\t\t\tset numeric &lt;temp; %rand(1;5)$&gt;\n\t\t\t\tif ( %temp% &gt; 4 ) then do &lt;you_hit2&gt; else {\n\t\t\t\t\tmsg &lt;You blindly try to attack and fail...&gt;\n\t\t\t\t\tdo &lt;mon_hit&gt;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse do &lt;you_hit2&gt;\n\t\t}\n\t}\n\t\nend define\n\ndefine procedure &lt;you_hit2&gt;\n\tif ( #me:temp_dex# &gt; $objectproperty(#mon_name#; dodge)$ ) then {\n\t\tset numeric &lt;temp; #me:temp_str# + #me:temp_int# + $rand(#weap:minda#; #weap:maxda#)$&gt;\n\t\tif property &lt;me; confusion&gt; then {\n\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;\n\t\t\tif ( %temp2% = 0 ) then {\n\t\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;\n\t\t\t\tmsg &lt;You are confused and hurt yourself trying to attack.&gt;\n\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;\n\t\t\t\tdo &lt;mon_hit&gt;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;\n\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;\n\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;\n\t\t\t\tmsg &lt;You hit #mon_name# for %temp% damage.&gt;\n\t\t\t\tdo &lt;mon_check&gt;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;\n\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;\n\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;\n\t\t\tmsg &lt;You hit #mon_name# for %temp% damage.&gt;\n\t\t\tdo &lt;mon_hit&gt;\n\t\t}\n\t}\n\tif ( #me:temp_dex# = $objectproperty(#mon_name#; dodge)$ ) then {\n\t\tset numeric &lt;temp; $rand(0; 1)$&gt;\n\t\tif ( %temp% = 0 ) then {\n\t\t\tset numeric &lt;temp; #me:temp_str# + #me:temp_int# + $rand(#weap:minda#; #weap:maxda#)$&gt;\n\t\t\tif property &lt;me; confusion&gt; then {\n\t\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;\n\t\t\t\tif ( %temp2% = 0 ) then {\n\t\t\t\t\tset &lt;temp; %temp% - #armour:value#&gt;\n\t\t\t\t\tmsg &lt;You are confused and hurt yourself trying to attack.&gt;\n\t\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;\n\t\t\t\t\tdo &lt;mon_hit&gt;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;\n\t\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;\n\t\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;\n\t\t\t\t\tmsg &lt;You hit #mon_name# for %temp% damage.&gt;\n\t\t\t\t\tdo &lt;mon_check&gt;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;\n\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;\n\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;\n\t\t\t\tmsg &lt;You hit #mon_name# for %temp% damage.&gt;\n\t\t\t\tdo &lt;mon_hit&gt;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tmsg &lt;You fail to hit #mon_name#.&gt;\n\t\t\tdo &lt;mon_hit&gt;\n\t\t}\n\t}\n\tif ( #me:temp_dex# &lt; $objectproperty(#mon_name#; dodge)$ ) then {\n\t\tset numeric &lt;temp; #me:temp_str# + #me:temp_int# + $rand(#weap:minda#; #weap:maxda#)$&gt;\n\t\tif property &lt;me; confusion&gt; then {\n\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;\n\t\t\tif ( %temp2% = 0 ) then {\n\t\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;\n\t\t\t\tmsg &lt;You are confused and hurt yourself trying to attack.&gt;\n\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;\n\t\t\t\tdo &lt;mon_hit&gt;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmsg &lt;you fail to hit #mon_name#.&gt;\n\t\t\t\tdo &lt;mon_hit&gt;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tmsg &lt;you fail to hit #mon_name#.&gt;\n\t\t\tdo &lt;mon_hit&gt;\n\t\t}\n\t}\n\t\nend define\n\ndefine procedure &lt;mon_check&gt;\n\tif ( $objectproperty(#mon_name#; cur_hp)$ &lt; 1 ) then do &lt;exp_gain&gt; else do &lt;mon_hit&gt;\n\t\nend define\n\ndefine procedure &lt;death_check&gt;\n\tif ( #me:cur_hp# &lt; 1 ) then do &lt;you_lose&gt; else choose &lt;battle_menu&gt;\n\t\nend define\n\ndefine procedure &lt;mon_hit&gt;\n\tif property &lt;#mon_name#; paralyse&gt; then {\n\t\tset numeric &lt;temp; $rand(0; 1)$&gt;\n\t\tif ( %temp% = 0 ) then {\n\t\t\tmsg &lt;#mon_name# is paralysed and cannot attack.&gt;\n\t\t\tdo &lt;you_hit&gt;\n\t\t}\n\t\telse do &lt;mon_hit2&gt;\n\t}\n\telse {\n\t\tif property &lt;#mon_name#; sleep&gt; then {\n\t\t\tset numeric &lt;temp; $rand(0; 3)$&gt;\n\t\t\tif ( %temp% = 3 ) then {\n\t\t\t\tmsg &lt;#mon_name# wakes up and attacks.&gt;\n\t\t\t\tdo &lt;mon_hit2&gt;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmsg &lt;#mon_name# is asleep and does not wake up.&gt;\n\t\t\t\tdo &lt;you_hit&gt;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif property &lt;#mon_name#; blind&gt; then {\n\t\t\t\tset numeric &lt;temp; %rand(1;5)$&gt;\n\t\t\t\tif ( %temp% &gt; 4 ) then do &lt;mon_hit2&gt; else {\n\t\t\t\t\tmsg &lt;#mon_name# blindly tries to attack and fails...&gt;\n\t\t\t\t\tdo &lt;you_hit&gt;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse do &lt;mon_hit2&gt;\n\t\t}\n\t}\n\t\nend define\n\ndefine procedure &lt;mon_hit2&gt;\n\tif ( #me:temp_dex# &lt; $objectproperty(#mon_name#; dodge)$ ) then {\n\t\tset numeric &lt;temp2; $objectproperty(#mon_name; minda)$&gt;\n\t\tset numeric &lt;temp3; $objectproperty(#mon_name#; maxda)$&gt;\n\t\tset numeric &lt;temp; $rand(%temp2%; %temp3%)$&gt;\n\t\tif property &lt;#mon_name#; confusion&gt; then {\n\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;\n\t\t\tif ( %temp2% = 0 ) then {\n\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;\n\t\t\t\tmsg &lt;#mon_name# is confused and hurts itself trying to attack.&gt;\n\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;\n\t\t\t\tdo &lt;you_hit&gt;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;\n\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;\n\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;\n\t\t\t\tmsg &lt;You are hit by #mon_name# for %temp% damage.&gt;\n\t\t\t\tdo &lt;death_check&gt;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;\n\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;\n\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;\n\t\t\tmsg &lt;You are hit by #mon_name# for %temp% damage.&gt;\n\t\t\tdo &lt;death_check&gt;\n\t\t}\n\t}\n\tif ( #me:temp_dex# = %#mon_name#:dodge% ) then {\n\t\tset numeric &lt;temp; $rand(0; 1)$&gt;\n\t\tif ( %temp% = 0 ) then {\n\t\t\tset numeric &lt;temp2; $objectproperty(#mon_name; minda)$&gt;\n\t\t\tset numeric &lt;temp3; $objectproperty(#mon_name#; maxda)$&gt;\n\t\t\tset numeric &lt;temp; $rand(%temp2%; %temp3%)$&gt;\n\t\t\tif property &lt;#mon_name#; confusion&gt; then {\n\t\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;\n\t\t\t\tif ( %temp2% = 0 ) then {\n\t\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;\n\t\t\t\t\tmsg &lt;#mon_name# is confused and hurts itself trying to attack.&gt;\n\t\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;\n\t\t\t\t\tdo &lt;you_hit&gt;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;\n\t\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;\n\t\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;\n\t\t\t\t\tmsg &lt;You are hit by #mon_name# for %temp% damage.&gt;\n\t\t\t\t\tdo &lt;death_check&gt;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;\n\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;\n\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;\n\t\t\t\tmsg &lt;You are hit by #mon_name# for %temp% damage.&gt;\n\t\t\t\tdo &lt;death_check&gt;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tmsg &lt;#mon_name# fails to hit you.&gt;\n\t\t\tdo &lt;mon_hit&gt;\n\t\t}\n\t}\n\tif ( #me:temp_dex# &gt; $objectproperty(#mon_name#; dodge)$ ) then {\n\t\tset numeric &lt;temp2; $objectproperty(#mon_name; minda)$&gt;\n\t\tset numeric &lt;temp3; $objectproperty(#mon_name#; maxda)$&gt;\n\t\tset numeric &lt;temp; $rand(%temp2%; %temp3%)$&gt;\n\t\tif property &lt;#mon_name#; confusion&gt; then {\n\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;\n\t\t\tif ( %temp2% = 0 ) then {\n\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;\n\t\t\t\tmsg &lt;#mon_name# is confused and hurts itself trying to attack.&gt;\n\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;\n\t\t\t\tdo &lt;you_hit&gt;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tmsg &lt;#mon_name# fails to hit you.&gt;\n\t\t\t\tdo &lt;you_hit&gt;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tmsg &lt;#mon_name# fails to hit you.&gt;\n\t\t\tdo &lt;you_hit&gt;\n\t\t}\n\t}\n\t\nend define\n\ndefine procedure &lt;after turn checks&gt;\n\tif property &lt;#quest.currentroom#; wilderness&gt; then {\n\t\tset &lt;last_room; #quest.currentroom#&gt;\n\t\tset numeric &lt;battle; $rand(1; 6)$&gt;\n\t\tmsg &lt;batte? = %battle%&gt;\n\t\tif ( %battle% = 5 ) then {\n\t\t\tmsg &lt;You are being attacked!!&gt;\n\t\t\twait &lt;Press any key to start the battle...&gt;\n\t\t\tdo &lt;mon_dataget&gt;\n\t\t}\n\t}\n\t\nend define\n\ndefine text &lt;intro&gt;\n\nend define\n\ndefine text &lt;win&gt;\n\nend define\n\ndefine text &lt;lose&gt;\n\nend define\n\ndefine selection &lt;battle_menu&gt;\n\tinfo &lt;You are in a fight!&gt;\n\tchoice &lt;Attack&gt; do &lt;att_order&gt;\n\tchoice &lt;Magic&gt; {\n\t\tmsg &lt;Magic is not done yet...&gt;\n\t\twait\n\t\tchoose &lt;battle_menu&gt;\n\t}\n\tchoice &lt;Item&gt; {\n\t\tmsg &lt;Items are not done yet...&gt;\n\t\twait\n\t\tchoose &lt;battle_menu&gt;\n\t}\n\tchoice &lt;Flee&gt; {\n\t\tmsg &lt;Fleeing is not done yet...&gt;\n\t\twait\n\t\tchoose &lt;battle_menu&gt;\n\t}\nend define\ndefine selection &lt;race_pick&gt;\n\tinfo &lt;Which race shall you be?&gt;\n\tchoice &lt;Human&gt; {\n\t\tmsg &lt;Human is an all round even race. They are good at haggling and item automatically cost less.&gt;\n\t\twait &lt;Press any key...&gt;\n\t\tif ask &lt;Shall you be a human?&gt; then {\n\t\t\tproperty &lt;me; race=human&gt;\n\t\t\tmsg &lt;You are now a human.&gt;\n\t\t\tgoto &lt;Start2&gt;\n\t\t}\n\t\telse choose &lt;race_pick&gt;\n\t}\n\tchoice &lt;Elf&gt; {\n\t\tmsg &lt;Eleves are a highly magical race, weak in combat. They are good spell casters and their magic abilities over-compensate for their physical weaknesses.&gt;\n\t\twait &lt;Press any key...&gt;\n\t\tif ask &lt;Shall you be an elf?&gt; then {\n\t\t\tproperty &lt;me; race=elf&gt;\n\t\t\tmsg &lt;You are now a elf.&gt;\n\t\t\tgoto &lt;Start2&gt;\n\t\t}\n\t\telse choose &lt;race_pick&gt;\n\t}\n\tchoice &lt;Niko&gt; {\n\t\tmsg &lt;Niko are race of cat-people, with ears, tail, and sometimes fur and claws. They are very quick and agile, able to see in the dark and exellent hunters.&gt;\n\t\twait &lt;Press any key...&gt;\n\t\tif ask &lt;Shall you be a niko?&gt; then {\n\t\t\tproperty &lt;me; race=niko&gt;\n\t\t\tmsg &lt;You are now a niko.&gt;\n\t\t\tgoto &lt;Start2&gt;\n\t\t}\n\t\telse choose &lt;race_pick&gt;\n\t}\n\tchoice &lt;Werewolf&gt; {\n\t\tmsg &lt;Werewolves have the appearance of humans by day, but at night they metamorphasis into giant wolf-like beasts. They hunger for blood and are highly dangerous, able to inflict damage even without a weapon.&gt;\n\t\twait &lt;Press any key...&gt;\n\t\tif ask &lt;Shall you be a werewolf?&gt; then {\n\t\t\tproperty &lt;me; race=werewolf&gt;\n\t\t\tmsg &lt;You are now a werewolf.&gt;\n\t\t\tgoto &lt;Start2&gt;\n\t\t}\n\t\telse choose &lt;race_pick&gt;\n\t}\nend define\ndefine selection &lt;gender_pick&gt;\n\tinfo &lt;Which class shall you be?&gt;\n\tchoice &lt;Male&gt; {\n\t\tmsg &lt;Males of the races are usually stronger and more well built, making them better at fighting but more bulky. They are worse at magic skills.&gt;\n\t\twait &lt;Press any key...&gt;\n\t\tif ask &lt;Shall you be male?&gt; then {\n\t\t\tproperty &lt;me; gender=male&gt;\n\t\t\tmsg &lt;You are now male.&gt;\n\t\t\tgoto &lt;Start3&gt;\n\t\t}\n\t\telse choose &lt;gender_pick&gt;\n\t}\n\tchoice &lt;Female&gt; {\n\t\tmsg &lt;Females are usually better at magic as well as lighter on their feet, but less well built and therefore weaker in fights.&gt;\n\t\twait &lt;Press any key...&gt;\n\t\tif ask &lt;Shall you be female?&gt; then {\n\t\t\tproperty &lt;me; gender=female&gt;\n\t\t\tmsg &lt;You are now female.&gt;\n\t\t\tgoto &lt;Start3&gt;\n\t\t}\n\t\telse choose &lt;gender_pick&gt;\n\t}\nend define[/quote:2tb3wbgf]",
      "EditableFormat": "bbcode",
      "HTML": "ok. my code's a little bit more complicated than that. plus i need to use #'s and do maths with the properties.... there's my code, YAY you get to go through 21 1/2 K of text...... sorry.... (the bit where it doesn't work is when checking who goes first in the battle, that the first bit using properties in maths... that's as far as i get, quest crashes there, the mon_hit codes are pritty much the same as the one's for you, except switched over....) have fun:<br/><blockquote><p>' \"Elexxorine's RPG base code\"<br/>' Created with QDK 3.53 - UNREGISTERED VERSION<br/><br/>define game &lt;Elexxorine's RPG base code&gt;<br/>\tasl-version &lt;350&gt;<br/>\tgametype singleplayer<br/>\tstart &lt;Start&gt;<br/>\tgame author &lt;Elexxorine&gt;<br/>\tgame version &lt;0.0.001&gt;<br/>\tgame copyright &lt;Â© 2005 Elexxorine.&gt;<br/>\tgame info &lt;Created with QDK 3.53 - UNREGISTERED EVALUATION VERSION.&gt;<br/>\tdefault fontsize &lt;16&gt;<br/>\tbackground &lt;black&gt;<br/>\tforeground &lt;white&gt;<br/>\tstartscript {<br/>\t\tgive &lt;me&gt;<br/>\t\tmsg &lt;|s45|jc|bWelcome to Elexxorine's |cl|iRPG Base Code.|cb|xi|xb|s22|n|jc|iFor making advanced single player rpg's.|xi|n|cr|jc(Copyright: 2005 by Elexxorine.)|cb|n|nThis code has been made for use as a base for rpg's. It includes a battle system, time, highly advanced weather system, shops, magic, conditions, and many other cool stuff.|n|n|iI would like to thank Christopher Ames and his 'RPG - Reading Presented Gallivant' for inspiring me to keep going and showing me how useful object properties are.|xi|n|nPlease tell me of all bugs/comments/etc by emailing me at: |cr|ilord.daedran@hotmail.com|cb|xi, even if it's just a spelling mistake - though all care has been put into making this game grammatically correct and spelt right, I am still dyslexic (yet I can spell dyslexia, strange) and will make mistakes.|n|nAnyway: I hope you enjoy.&gt;<br/>\t\twait &lt;Press any key...&gt;<br/>\t\tclear<br/>\t\tmsg&lt;|jc|s16CHANGE!!!!!&gt;<br/>\t\tclear<br/>\t}<br/>\tafterturn do &lt;after turn checks&gt;<br/>\tcommand &lt;stats&gt; msg &lt;You are a level #me:lvl# #me:gender# #me:race# #me:class#, going by the name of #me:name#. You are wearing #me:armour_body# about your body as well as #me:armour_extra# and carrying a #me:weapon#.|nTpye '|cgstats me/weapon/armour/items/spells/area|cb' for more info.&gt;<br/>\tcommand &lt;stats me&gt; msg &lt;|bGeneral:|xb|nName: #me:name#.|nRace: #me:race#.|nClass: #me:class#.|nGender: #me:gender#.|nLevel: #me:lvl#.|nExp: #me:exp#.|n|nHit points: #me:cur_hp# / #me:max_hp#.|nMana: #me:cur_mp# / #me:max_mp#.|nStamina: #me:cur_sta# / #me:max_sta#.|nHunger: #me:cur_hun# / #me:max_hun#.|n|nWeapon: #me:weapon#.|nArmour: #me:armour_body#.|nOther: #me:armour_extra#.|n|n|bStats:|xb|nStrength: #me:temp_str# / #me:max_str#.|nAglity: #me:temp_agl# / #me:max_agl#.|nIntelligance: #me:temp_int# / #me:max_int#.|nWisdom: #me:temp_wis# / #me:max_wis#.|nCharisma: #me:temp_cha# / #me:max_cha#.|nDexerity: #me:temp_dex# / #me:max_dex#.|nSpeed: #me:temp_spd# / #me:max_spd#.|nStamina: #me:temp_sta# / #me:max_sta#.|n|n|bConditions:|xb|n&gt;<br/>\terror &lt;badcommand; You cannot do that.&gt;<br/>\terror &lt;badthing; You cannot see that here.&gt;<br/>\terror &lt;badplace; You cannot go there.&gt;<br/>\terror &lt;itemunwanted; #quest.error.gender# politely refuses your offer.&gt;<br/>\terror &lt;defaultuse; You can't use that now.&gt;<br/>\terror &lt;cantdrop; You cannot drop this.&gt;<br/>\terror &lt;noitem; You don't have that.&gt;<br/>\terror &lt;badexamine; You cannot do that.&gt;<br/>\terror &lt;badgo; You cannot do that.&gt;<br/>\terror &lt;baduse; You cannot do that.&gt;<br/>\terror &lt;badgive; Give to whom?&gt;<br/>\terror &lt;badtake; You cannot take that.&gt;<br/>\terror &lt;baditem; You cannot see that.&gt;<br/>\terror &lt;baddrop; You don't have that.&gt;<br/>\terror &lt;badpronoun; Please define 'it'.&gt;<br/>\terror &lt;defaultout; You cannot go out from here.&gt;<br/>\terror &lt;defaultdrop; You drop #quest.error.article# onto the ground.&gt;<br/>\terror &lt;defaultexamine; $objectproperty(#thing#; look)$&gt;<br/>\terror &lt;defaultlook; Surprisingly uninteresting.&gt;<br/>\terror &lt;defaultspeak; You cannot speak to #quest.error.gender#.&gt;<br/>\terror &lt;defaulttake; You take #quest.error.article# and put #quest.error.article# in your bag.&gt;<br/>\tdefine variable &lt;diffrate&gt;<br/>\t\ttype numeric<br/>\t\tvalue &lt;0&gt;<br/>\tend define<br/>\t` badcommand:    the player types an invalid command<br/>\t` baddrop:    the player tries to drop an object they are not carrying<br/>\t` badexamine:     the player uses \"examine\" in an unrecognized way<br/>\t` baditem:     the player tries to take an object which does not exist<br/>\t` badgo:     the player uses \"go\" in an unrecognized way<br/>\t` badgive:     the player uses \"give\" and does not specify an object to give to<br/>\t` badlook:     (obsolete from Quest 3.1 onwards)<br/>\t` badplace:     the player tries to go to a non-existent room using \"go to ...\".<br/>\t` badpronou:n     the player uses a pronoun (\"IT\" etc.) when that pronoun doesn<br/>\t`     (the pronoun used is returned in #quest.error.pronoun#)<br/>\t` badtake:     the player tries to take an object which can<br/>\t` badthing:     the player tries to do something to an object that does not exist<br/>\t` baduse:     the player uses \"use\" in an unrecognized way<br/>\t` cantdrop:     the player tries to drop an object that can<br/>\t` defaultdrop:    the player successfully drops an object<br/>\t`     (the article (e.g. \"it\", \"them\") is returned in #quest.error.article#)<br/>\t` defaultexamine: the player examines something for which there is no examine tag defined<br/>\t` defaultlook:     the player looks at something for which there is no \"look\" tag defined<br/>\t` defaultout:     the player tries to use \"out\" to exit from a room which has no \"out\" tag<br/>\t` defaultspeak: the player speaks to an object for whom there is no \"speak\" tag defined<br/>\t` defaulttake:     the player picks up an object successfully. e.g. \"You pick it up.\"<br/>\t` defaultuse:     the player tries to use something on an object where no relevant \"use\" tag can be found<br/>\t` itemunwanted: an object does not want an object being given to it (i.e., no relevant \"give\" tag can be           ` found)<br/>\t` noitem: the player tries to use an object they don<br/>end define<br/><br/>define synonyms<br/>end define<br/><br/>define room &lt;Start&gt;<br/>\talias &lt;Unknown&gt;<br/>\tlook &lt;Swirling mist surrounds you, covering your body and all that is around you. You cannot see anything but the mist. Slowly it changes colour from its dull grey to a pale blue and then to purple, you can fell your invisable body changing shape, forming outside your vision. A tiny thought is telling you that you can control this shaping somehow...&gt;<br/>\tindescription &lt;|jl|s16You do not know where you are.&gt;<br/>\tscript {<br/>\t\twait &lt;Press any key...&gt;<br/>\t\tchoose &lt;race_pick&gt;<br/>\t}<br/><br/>\tdefine object &lt;me&gt;<br/>\t\talias &lt;you&gt;<br/>\t\talt &lt;me; myself&gt;<br/>\t\tlook exec &lt;stats&gt;<br/>\t\texamine exec &lt;stats me&gt;<br/>\t\tdisplaytype &lt;PC&gt;<br/>\t\tarticle &lt;you&gt;<br/>\t\tproperties &lt;you; character; max_hp=0; cur_hp=0; max_mp=0; cur_mp=0; cur_hun=0; max_hun=0; name=(no name); race=(no race); class=(no class); gender=(no gender); lvl=0; exp=0; armour_body=nothing; armour_extra=nothing; weapon=nothing; max_str=0; max_agl=0; max_int=0; max_wis=0; max_cha=0; max_dex=0; max_sta=0; max_spd=0; cur_str=0; cur_agl=0; cur_int=0; cur_wis=0; cur_cha=0; cur_dex=0; cur_sta=0; cur_spd=0; temp_str=0; temp_agl=0; temp_int=0; temp_wis=0; temp_cha=0; temp_dex=0; temp_sta=0; temp_spd=0; not dead; not poison; not deadly_poison; not mind_poison; not mind_sap; not paralye; not burn; not freeze; not confusion; not blind; not mute; not deaf; not sleep; not stun; not unkillable; not nightsee; not fly; not invisable&gt;<br/>\tend define<br/><br/>end define<br/><br/>define room &lt;Start2&gt;<br/>\talias &lt;Unknown&gt;<br/>\tlook &lt;The mist still surrounds you and your nearly formed body. Its colour keeps switching between a powder blue and a warm pink...&gt;<br/>\tindescription &lt;You do not know where you are.&gt;<br/>\tscript {<br/>\t\twait &lt;Press any key...&gt;<br/>\t\tchoose &lt;gender_pick&gt;<br/>\t}<br/>end define<br/><br/>define room &lt;Start3&gt;<br/>\talias &lt;Unknown&gt;<br/>\tlook &lt;Suddenly you start to fall and land on the ground beneath you with a loud thud and lie there dazed. Off in the distance you can hear the sound of footsteps approaching...&gt;<br/>\tindescription &lt;You do not know where you are.&gt;<br/>\tscript {<br/>\t\twait &lt;Press any key...&gt;<br/>\t\tgoto &lt;town&gt;<br/>\t}<br/>end define<br/><br/>define room &lt;mon_store&gt;<br/>\tlook &lt;How did you get here, I wonder?&gt;<br/>\tindescription &lt;You are in the :&gt;<br/>\tscript msg &lt;haha&gt;<br/><br/>\tdefine object &lt;wisp&gt;<br/>\t\talias &lt;will o' wisp&gt;<br/>\t\talt &lt;wisp&gt;<br/>\t\tlook &lt;You look closely at the ball od smoke - It's a will o' wisp. These are very rare and their smoke is highly vavlued.&gt;<br/>\t\tdisplaytype &lt;Monster&gt;<br/>\t\tarticle &lt;it&gt;<br/>\t\tproperties &lt;monster; race=wisp; element=air; gender=it; cur_hp=3; cur_sta=999; hp=3; lvl=2; exp=120; minda=1; maxda=6; dodge=8; magic=0; sta=999; spd=4; dex=8; def=6; not effectable; not dead; not poison; not deadly_poison; not mind_poison; not mind_sap; not paralye; not burn; not freeze; not confusion; not blind; not mute; not deaf; not sleep; not stun; not unkillable; not nightsee; not fly; not invisable&gt;<br/>\tend define<br/><br/>\tdefine object &lt;fimp&gt;<br/>\t\talias &lt;Fire imp&gt;<br/>\t\talt &lt;imp; fire imp&gt;<br/>\t\tlook &lt;A ball of fire surrounds the magical imp, the flame lick at the air and the smell of burning is in the air.&gt;<br/>\t\tdisplaytype &lt;Monster&gt;<br/>\t\tarticle &lt;it&gt;<br/>\t\tproperties &lt;monster; race=imp_fire; element=fire; gender=it; cur_hp=7; cur_sta=10; hp=7; lvl=1; exp=50; minda=0; maxda=3; dodge=1; magic=0; sta=5; spd=3; dex=3; def=2; not dead; not poison; not deadly_poison; not mind_poison; not mind_sap; not paralye; not burn; not freeze; not confusion; not blind; not mute; not deaf; not sleep; not stun; not unkillable; not nightsee; not fly; not invisable&gt;<br/>\tend define<br/><br/>end define<br/><br/>define room &lt;battle room&gt;<br/>\tlook &lt;OH NO!!! A BATTLE!&gt;<br/>\tindescription &lt;You are in the :&gt;<br/>end define<br/><br/>define room &lt;town&gt;<br/>\tlook &lt;A small save-haeven from the widerness outside.&gt;<br/>\tindescription &lt;You are in a :&gt;<br/>\twest &lt;wilderness1&gt;<br/>\tproperties &lt;town&gt;<br/>end define<br/><br/>define room &lt;wilderness1&gt;<br/>\talias &lt;wilderness&gt;<br/>\tlook &lt;Thick trees surround you, monsters could be lurking anywhere.&gt;<br/>\tindescription &lt;You are in the :&gt;<br/>\teast &lt;town&gt;<br/>\tproperties &lt;wilderness; wood&gt;<br/><br/>\tdefine object &lt;tempnum&gt;<br/>\t\tproperties &lt;1=0; 2=0; 3=0; 4=0; 5=0&gt;<br/>\tend define<br/>end define<br/><br/>define procedure &lt;mon_dataget&gt;<br/>\tset numeric &lt;mnum; $rand(1; 2)$&gt;<br/>\tif ( %mnum% = 1 ) then {<br/>\t\tset string &lt;mon_name; wisp&gt;<br/>\t\tmsg &lt;You are fighting a wisp, level=$objectproperty(#mon_name#; lvl)$.&gt;<br/>\t\tmove &lt;wisp; battle room&gt;<br/>\t}<br/>\tif ( %mnum% = 2 ) then {<br/>\t\tset string &lt;mon_name; fimp&gt;<br/>\t\tmsg &lt;You are fighting a fire imp, level=$objectproperty(#mon_name#; lvl)$.&gt;<br/>\t\tmove &lt;fimp; battle room&gt;<br/>\t}<br/>\tset &lt;diffrate; $objectproperty(#mon_name#; lvl)$ - #me:lvl#&gt;<br/>\tif ( %diffrate% &gt; 5 ) then msg &lt;What would you like on your tomb stone?&gt;<br/>\tif ( %diffrate% &lt; 6 ) and ( %diffrate% &gt; 2 ) then msg &lt;Look like it'll be a tricky fight.&gt;<br/>\tif ( %diffrate% &lt; 3 ) and ( %diffrate% &gt; -3 ) then msg &lt;Looks like a fair fight.&gt;<br/>\tif ( %diffrate% &lt; -2 ) and ( %diffrate% &gt; -6 ) then msg &lt;Looks like you have the upper hand.&gt;<br/>\tif ( %diffrate% &lt; -5 ) then msg &lt;This'll be easy!&gt;<br/>\tgoto &lt;battle room&gt;<br/>\tchoose &lt;battle_menu&gt;<br/>end define<br/><br/>define procedure &lt;att_order&gt;<br/>\tmsg &lt;your spd=#me:temp_spd#, mon's spd=$objectproperty(#mon_name#; spd)$.&gt;<br/>\t'property &lt;tempnum:1; $objectproperty(#mon_name#; spd)$&gt;<br/>\t'property &lt;tempnum:2; $objectproperty(me; temp_spd)$&gt;<br/>\t' ##<br/>\tproperty &lt;tempnum:1; 4&gt;<br/>\tproperty &lt;tempnum:2; 3&gt;<br/>\t' ##<br/>\t'set numeric &lt;temp; $objectproperty(#mon_name#; spd)$&gt;<br/>\t'set numeric &lt;temp2; $objectproperty(me; temp_spd)$&gt;<br/>\tif ( $objectproperty(tempnum; 2)$ &gt; $objectproperty(tempnum; 1)$ ) then {<br/>\t\tmsg &lt;You will attack first...&gt;<br/>\t\tdo &lt;you_hit&gt; }<br/>\tif ( $objectproperty(tempnum; 2)$ &lt; $objectproperty(tempnum; 1)$ ) then {<br/>\t\tmsg &lt;#mon_name# will attack first...&gt;<br/>\t\tdo &lt;mon_hit&gt; }<br/>\tif ( $objectproperty(tempnum; 2)$ = $objectproperty(tempnum; 1)$ ) then {<br/>\t\tset numeric &lt;temp; $rand(0; 1)$&gt;<br/>\t\tif ( %temp% = 0 ) then do &lt;you_hit&gt; else do &lt;mon_hit&gt; }<br/><br/>end define<br/><br/>define procedure &lt;you_hit&gt;<br/>\tif property &lt;me; paralyse&gt; then {<br/>\t\tset nemeric &lt;temp; $rand(0; 1)$&gt;<br/>\t\tif ( %temp% = 0 ) then {<br/>\t\t\tmsg &lt;You are paralysed and cannot attack.&gt;<br/>\t\t\tdo &lt;mon_hit&gt;<br/>\t\t}<br/>\t\telse do &lt;you_hit2&gt;<br/>\t}<br/>\telse {<br/>\t\tif property &lt;me; sleep&gt; then {<br/>\t\t\tset numeric &lt;temp; $rand(0; 3)$&gt;<br/>\t\t\tif ( %temp% = 3 ) then {<br/>\t\t\t\tmsg &lt;You wake up and attack.&gt;<br/>\t\t\t\tdo &lt;you_hit2&gt;<br/>\t\t\t}<br/>\t\t\telse {<br/>\t\t\t\tmsg &lt;You are asleep and do not wake up.&gt;<br/>\t\t\t\tdo &lt;mon_hit&gt;<br/>\t\t\t}<br/>\t\t}<br/>\t\telse {<br/>\t\t\tif property &lt;me; blind&gt; then {<br/>\t\t\t\tset numeric &lt;temp; %rand(1;5)$&gt;<br/>\t\t\t\tif ( %temp% &gt; 4 ) then do &lt;you_hit2&gt; else {<br/>\t\t\t\t\tmsg &lt;You blindly try to attack and fail...&gt;<br/>\t\t\t\t\tdo &lt;mon_hit&gt;<br/>\t\t\t\t}<br/>\t\t\t}<br/>\t\t\telse do &lt;you_hit2&gt;<br/>\t\t}<br/>\t}<br/>\t<br/>end define<br/><br/>define procedure &lt;you_hit2&gt;<br/>\tif ( #me:temp_dex# &gt; $objectproperty(#mon_name#; dodge)$ ) then {<br/>\t\tset numeric &lt;temp; #me:temp_str# + #me:temp_int# + $rand(#weap:minda#; #weap:maxda#)$&gt;<br/>\t\tif property &lt;me; confusion&gt; then {<br/>\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;<br/>\t\t\tif ( %temp2% = 0 ) then {<br/>\t\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;<br/>\t\t\t\tmsg &lt;You are confused and hurt yourself trying to attack.&gt;<br/>\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;<br/>\t\t\t\tdo &lt;mon_hit&gt;<br/>\t\t\t}<br/>\t\t\telse {<br/>\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;<br/>\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;<br/>\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;<br/>\t\t\t\tmsg &lt;You hit #mon_name# for %temp% damage.&gt;<br/>\t\t\t\tdo &lt;mon_check&gt;<br/>\t\t\t}<br/>\t\t}<br/>\t\telse {<br/>\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;<br/>\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;<br/>\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;<br/>\t\t\tmsg &lt;You hit #mon_name# for %temp% damage.&gt;<br/>\t\t\tdo &lt;mon_hit&gt;<br/>\t\t}<br/>\t}<br/>\tif ( #me:temp_dex# = $objectproperty(#mon_name#; dodge)$ ) then {<br/>\t\tset numeric &lt;temp; $rand(0; 1)$&gt;<br/>\t\tif ( %temp% = 0 ) then {<br/>\t\t\tset numeric &lt;temp; #me:temp_str# + #me:temp_int# + $rand(#weap:minda#; #weap:maxda#)$&gt;<br/>\t\t\tif property &lt;me; confusion&gt; then {<br/>\t\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;<br/>\t\t\t\tif ( %temp2% = 0 ) then {<br/>\t\t\t\t\tset &lt;temp; %temp% - #armour:value#&gt;<br/>\t\t\t\t\tmsg &lt;You are confused and hurt yourself trying to attack.&gt;<br/>\t\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;<br/>\t\t\t\t\tdo &lt;mon_hit&gt;<br/>\t\t\t\t}<br/>\t\t\t\telse {<br/>\t\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;<br/>\t\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;<br/>\t\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;<br/>\t\t\t\t\tmsg &lt;You hit #mon_name# for %temp% damage.&gt;<br/>\t\t\t\t\tdo &lt;mon_check&gt;<br/>\t\t\t\t}<br/>\t\t\t}<br/>\t\t\telse {<br/>\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;<br/>\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;<br/>\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;<br/>\t\t\t\tmsg &lt;You hit #mon_name# for %temp% damage.&gt;<br/>\t\t\t\tdo &lt;mon_hit&gt;<br/>\t\t\t}<br/>\t\t}<br/>\t\telse {<br/>\t\t\tmsg &lt;You fail to hit #mon_name#.&gt;<br/>\t\t\tdo &lt;mon_hit&gt;<br/>\t\t}<br/>\t}<br/>\tif ( #me:temp_dex# &lt; $objectproperty(#mon_name#; dodge)$ ) then {<br/>\t\tset numeric &lt;temp; #me:temp_str# + #me:temp_int# + $rand(#weap:minda#; #weap:maxda#)$&gt;<br/>\t\tif property &lt;me; confusion&gt; then {<br/>\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;<br/>\t\t\tif ( %temp2% = 0 ) then {<br/>\t\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;<br/>\t\t\t\tmsg &lt;You are confused and hurt yourself trying to attack.&gt;<br/>\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;<br/>\t\t\t\tdo &lt;mon_hit&gt;<br/>\t\t\t}<br/>\t\t\telse {<br/>\t\t\t\tmsg &lt;you fail to hit #mon_name#.&gt;<br/>\t\t\t\tdo &lt;mon_hit&gt;<br/>\t\t\t}<br/>\t\t}<br/>\t\telse {<br/>\t\t\tmsg &lt;you fail to hit #mon_name#.&gt;<br/>\t\t\tdo &lt;mon_hit&gt;<br/>\t\t}<br/>\t}<br/>\t<br/>end define<br/><br/>define procedure &lt;mon_check&gt;<br/>\tif ( $objectproperty(#mon_name#; cur_hp)$ &lt; 1 ) then do &lt;exp_gain&gt; else do &lt;mon_hit&gt;<br/>\t<br/>end define<br/><br/>define procedure &lt;death_check&gt;<br/>\tif ( #me:cur_hp# &lt; 1 ) then do &lt;you_lose&gt; else choose &lt;battle_menu&gt;<br/>\t<br/>end define<br/><br/>define procedure &lt;mon_hit&gt;<br/>\tif property &lt;#mon_name#; paralyse&gt; then {<br/>\t\tset numeric &lt;temp; $rand(0; 1)$&gt;<br/>\t\tif ( %temp% = 0 ) then {<br/>\t\t\tmsg &lt;#mon_name# is paralysed and cannot attack.&gt;<br/>\t\t\tdo &lt;you_hit&gt;<br/>\t\t}<br/>\t\telse do &lt;mon_hit2&gt;<br/>\t}<br/>\telse {<br/>\t\tif property &lt;#mon_name#; sleep&gt; then {<br/>\t\t\tset numeric &lt;temp; $rand(0; 3)$&gt;<br/>\t\t\tif ( %temp% = 3 ) then {<br/>\t\t\t\tmsg &lt;#mon_name# wakes up and attacks.&gt;<br/>\t\t\t\tdo &lt;mon_hit2&gt;<br/>\t\t\t}<br/>\t\t\telse {<br/>\t\t\t\tmsg &lt;#mon_name# is asleep and does not wake up.&gt;<br/>\t\t\t\tdo &lt;you_hit&gt;<br/>\t\t\t}<br/>\t\t}<br/>\t\telse {<br/>\t\t\tif property &lt;#mon_name#; blind&gt; then {<br/>\t\t\t\tset numeric &lt;temp; %rand(1;5)$&gt;<br/>\t\t\t\tif ( %temp% &gt; 4 ) then do &lt;mon_hit2&gt; else {<br/>\t\t\t\t\tmsg &lt;#mon_name# blindly tries to attack and fails...&gt;<br/>\t\t\t\t\tdo &lt;you_hit&gt;<br/>\t\t\t\t}<br/>\t\t\t}<br/>\t\t\telse do &lt;mon_hit2&gt;<br/>\t\t}<br/>\t}<br/>\t<br/>end define<br/><br/>define procedure &lt;mon_hit2&gt;<br/>\tif ( #me:temp_dex# &lt; $objectproperty(#mon_name#; dodge)$ ) then {<br/>\t\tset numeric &lt;temp2; $objectproperty(#mon_name; minda)$&gt;<br/>\t\tset numeric &lt;temp3; $objectproperty(#mon_name#; maxda)$&gt;<br/>\t\tset numeric &lt;temp; $rand(%temp2%; %temp3%)$&gt;<br/>\t\tif property &lt;#mon_name#; confusion&gt; then {<br/>\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;<br/>\t\t\tif ( %temp2% = 0 ) then {<br/>\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;<br/>\t\t\t\tmsg &lt;#mon_name# is confused and hurts itself trying to attack.&gt;<br/>\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;<br/>\t\t\t\tdo &lt;you_hit&gt;<br/>\t\t\t}<br/>\t\t\telse {<br/>\t\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;<br/>\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;<br/>\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;<br/>\t\t\t\tmsg &lt;You are hit by #mon_name# for %temp% damage.&gt;<br/>\t\t\t\tdo &lt;death_check&gt;<br/>\t\t\t}<br/>\t\t}<br/>\t\telse {<br/>\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;<br/>\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;<br/>\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;<br/>\t\t\tmsg &lt;You are hit by #mon_name# for %temp% damage.&gt;<br/>\t\t\tdo &lt;death_check&gt;<br/>\t\t}<br/>\t}<br/>\tif ( #me:temp_dex# = %#mon_name#:dodge% ) then {<br/>\t\tset numeric &lt;temp; $rand(0; 1)$&gt;<br/>\t\tif ( %temp% = 0 ) then {<br/>\t\t\tset numeric &lt;temp2; $objectproperty(#mon_name; minda)$&gt;<br/>\t\t\tset numeric &lt;temp3; $objectproperty(#mon_name#; maxda)$&gt;<br/>\t\t\tset numeric &lt;temp; $rand(%temp2%; %temp3%)$&gt;<br/>\t\t\tif property &lt;#mon_name#; confusion&gt; then {<br/>\t\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;<br/>\t\t\t\tif ( %temp2% = 0 ) then {<br/>\t\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;<br/>\t\t\t\t\tmsg &lt;#mon_name# is confused and hurts itself trying to attack.&gt;<br/>\t\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;<br/>\t\t\t\t\tdo &lt;you_hit&gt;<br/>\t\t\t\t}<br/>\t\t\t\telse {<br/>\t\t\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;<br/>\t\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;<br/>\t\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;<br/>\t\t\t\t\tmsg &lt;You are hit by #mon_name# for %temp% damage.&gt;<br/>\t\t\t\t\tdo &lt;death_check&gt;<br/>\t\t\t\t}<br/>\t\t\t}<br/>\t\t\telse {<br/>\t\t\t\tset numeric &lt;temp; %temp% - #armour:value#&gt;<br/>\t\t\t\tif ( %temp% &lt; 0 ) then set &lt;temp; 0&gt;<br/>\t\t\t\tset &lt;me:cur_hp; #me:cur_hp# - %temp%&gt;<br/>\t\t\t\tmsg &lt;You are hit by #mon_name# for %temp% damage.&gt;<br/>\t\t\t\tdo &lt;death_check&gt;<br/>\t\t\t}<br/>\t\t}<br/>\t\telse {<br/>\t\t\tmsg &lt;#mon_name# fails to hit you.&gt;<br/>\t\t\tdo &lt;mon_hit&gt;<br/>\t\t}<br/>\t}<br/>\tif ( #me:temp_dex# &gt; $objectproperty(#mon_name#; dodge)$ ) then {<br/>\t\tset numeric &lt;temp2; $objectproperty(#mon_name; minda)$&gt;<br/>\t\tset numeric &lt;temp3; $objectproperty(#mon_name#; maxda)$&gt;<br/>\t\tset numeric &lt;temp; $rand(%temp2%; %temp3%)$&gt;<br/>\t\tif property &lt;#mon_name#; confusion&gt; then {<br/>\t\t\tset numeric &lt;temp2; $rand(0; 1)$&gt;<br/>\t\t\tif ( %temp2% = 0 ) then {<br/>\t\t\t\tset numeric &lt;temp; %temp% - $objectproperty(#mon_name#; def)$&gt;<br/>\t\t\t\tmsg &lt;#mon_name# is confused and hurts itself trying to attack.&gt;<br/>\t\t\t\tset &lt;#mon_name#:cur_hp; $objectproperty(#mon_name#; cur_hp)$ - %temp%&gt;<br/>\t\t\t\tdo &lt;you_hit&gt;<br/>\t\t\t}<br/>\t\t\telse {<br/>\t\t\t\tmsg &lt;#mon_name# fails to hit you.&gt;<br/>\t\t\t\tdo &lt;you_hit&gt;<br/>\t\t\t}<br/>\t\t}<br/>\t\telse {<br/>\t\t\tmsg &lt;#mon_name# fails to hit you.&gt;<br/>\t\t\tdo &lt;you_hit&gt;<br/>\t\t}<br/>\t}<br/>\t<br/>end define<br/><br/>define procedure &lt;after turn checks&gt;<br/>\tif property &lt;#quest.currentroom#; wilderness&gt; then {<br/>\t\tset &lt;last_room; #quest.currentroom#&gt;<br/>\t\tset numeric &lt;battle; $rand(1; 6)$&gt;<br/>\t\tmsg &lt;batte? = %battle%&gt;<br/>\t\tif ( %battle% = 5 ) then {<br/>\t\t\tmsg &lt;You are being attacked!!&gt;<br/>\t\t\twait &lt;Press any key to start the battle...&gt;<br/>\t\t\tdo &lt;mon_dataget&gt;<br/>\t\t}<br/>\t}<br/>\t<br/>end define<br/><br/>define text &lt;intro&gt;<br/><br/>end define<br/><br/>define text &lt;win&gt;<br/><br/>end define<br/><br/>define text &lt;lose&gt;<br/><br/>end define<br/><br/>define selection &lt;battle_menu&gt;<br/>\tinfo &lt;You are in a fight!&gt;<br/>\tchoice &lt;Attack&gt; do &lt;att_order&gt;<br/>\tchoice &lt;Magic&gt; {<br/>\t\tmsg &lt;Magic is not done yet...&gt;<br/>\t\twait<br/>\t\tchoose &lt;battle_menu&gt;<br/>\t}<br/>\tchoice &lt;Item&gt; {<br/>\t\tmsg &lt;Items are not done yet...&gt;<br/>\t\twait<br/>\t\tchoose &lt;battle_menu&gt;<br/>\t}<br/>\tchoice &lt;Flee&gt; {<br/>\t\tmsg &lt;Fleeing is not done yet...&gt;<br/>\t\twait<br/>\t\tchoose &lt;battle_menu&gt;<br/>\t}<br/>end define<br/>define selection &lt;race_pick&gt;<br/>\tinfo &lt;Which race shall you be?&gt;<br/>\tchoice &lt;Human&gt; {<br/>\t\tmsg &lt;Human is an all round even race. They are good at haggling and item automatically cost less.&gt;<br/>\t\twait &lt;Press any key...&gt;<br/>\t\tif ask &lt;Shall you be a human?&gt; then {<br/>\t\t\tproperty &lt;me; race=human&gt;<br/>\t\t\tmsg &lt;You are now a human.&gt;<br/>\t\t\tgoto &lt;Start2&gt;<br/>\t\t}<br/>\t\telse choose &lt;race_pick&gt;<br/>\t}<br/>\tchoice &lt;Elf&gt; {<br/>\t\tmsg &lt;Eleves are a highly magical race, weak in combat. They are good spell casters and their magic abilities over-compensate for their physical weaknesses.&gt;<br/>\t\twait &lt;Press any key...&gt;<br/>\t\tif ask &lt;Shall you be an elf?&gt; then {<br/>\t\t\tproperty &lt;me; race=elf&gt;<br/>\t\t\tmsg &lt;You are now a elf.&gt;<br/>\t\t\tgoto &lt;Start2&gt;<br/>\t\t}<br/>\t\telse choose &lt;race_pick&gt;<br/>\t}<br/>\tchoice &lt;Niko&gt; {<br/>\t\tmsg &lt;Niko are race of cat-people, with ears, tail, and sometimes fur and claws. They are very quick and agile, able to see in the dark and exellent hunters.&gt;<br/>\t\twait &lt;Press any key...&gt;<br/>\t\tif ask &lt;Shall you be a niko?&gt; then {<br/>\t\t\tproperty &lt;me; race=niko&gt;<br/>\t\t\tmsg &lt;You are now a niko.&gt;<br/>\t\t\tgoto &lt;Start2&gt;<br/>\t\t}<br/>\t\telse choose &lt;race_pick&gt;<br/>\t}<br/>\tchoice &lt;Werewolf&gt; {<br/>\t\tmsg &lt;Werewolves have the appearance of humans by day, but at night they metamorphasis into giant wolf-like beasts. They hunger for blood and are highly dangerous, able to inflict damage even without a weapon.&gt;<br/>\t\twait &lt;Press any key...&gt;<br/>\t\tif ask &lt;Shall you be a werewolf?&gt; then {<br/>\t\t\tproperty &lt;me; race=werewolf&gt;<br/>\t\t\tmsg &lt;You are now a werewolf.&gt;<br/>\t\t\tgoto &lt;Start2&gt;<br/>\t\t}<br/>\t\telse choose &lt;race_pick&gt;<br/>\t}<br/>end define<br/>define selection &lt;gender_pick&gt;<br/>\tinfo &lt;Which class shall you be?&gt;<br/>\tchoice &lt;Male&gt; {<br/>\t\tmsg &lt;Males of the races are usually stronger and more well built, making them better at fighting but more bulky. They are worse at magic skills.&gt;<br/>\t\twait &lt;Press any key...&gt;<br/>\t\tif ask &lt;Shall you be male?&gt; then {<br/>\t\t\tproperty &lt;me; gender=male&gt;<br/>\t\t\tmsg &lt;You are now male.&gt;<br/>\t\t\tgoto &lt;Start3&gt;<br/>\t\t}<br/>\t\telse choose &lt;gender_pick&gt;<br/>\t}<br/>\tchoice &lt;Female&gt; {<br/>\t\tmsg &lt;Females are usually better at magic as well as lighter on their feet, but less well built and therefore weaker in fights.&gt;<br/>\t\twait &lt;Press any key...&gt;<br/>\t\tif ask &lt;Shall you be female?&gt; then {<br/>\t\t\tproperty &lt;me; gender=female&gt;<br/>\t\t\tmsg &lt;You are now female.&gt;<br/>\t\t\tgoto &lt;Start3&gt;<br/>\t\t}<br/>\t\telse choose &lt;gender_pick&gt;<br/>\t}<br/>end define</p></blockquote>",
      "PostDate": "2005-12-11T20:41:01+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7145",
      "UserId": 0,
      "Username": "paul_one",
      "UserAvatar": null,
      "UserGravatar": "fef8a1875028f4300bb683f29c432894",
      "EditableText": "I've got it to a point where it no longer crashes when you press \"attack\".\nIt was simply some missing # 's and stuff.\n\nI'll have to coach you through the finer points of setting object properties.\n\nFor instance, DON'T use \"set &lt;#mon#:prop; value&gt;\"\nUse: \"property &lt;#mon#; prop=value&gt;\"\n\nAnd these values ARE NOT EVALUATED!\nSo, using \"property &lt;#mon#; prop=3+1&gt;\" will set prop to \"3+1\"\nYou need to have set numeric &lt;temp; 3+1&gt;\" before it, and then:\nproperty &lt;#mon#; prop=%temp%&gt;\n\n.. there are loads of other things in there too. I'll try to work through it after work tomorrow.",
      "EditableFormat": "bbcode",
      "HTML": "I've got it to a point where it no longer crashes when you press \"attack\".<br/>It was simply some missing # 's and stuff.<br/><br/>I'll have to coach you through the finer points of setting object properties.<br/><br/>For instance, DON'T use \"set &lt;#mon#:prop; value&gt;\"<br/>Use: \"property &lt;#mon#; prop=value&gt;\"<br/><br/>And these values ARE NOT EVALUATED!<br/>So, using \"property &lt;#mon#; prop=3+1&gt;\" will set prop to \"3+1\"<br/>You need to have set numeric &lt;temp; 3+1&gt;\" before it, and then:<br/>property &lt;#mon#; prop=%temp%&gt;<br/><br/>.. there are loads of other things in there too. I'll try to work through it after work tomorrow.",
      "PostDate": "2005-12-11T23:39:50+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7148",
      "UserId": 0,
      "Username": "Elexxorine",
      "UserAvatar": null,
      "UserGravatar": "a220ee44d8fe2f07029cf1f61b98bf40",
      "EditableText": "oh thank you so much tron. why do you need to talk it through with me? if you don't understand what i'm trying to do i'll send you the battle plan which saying what the code is meant to do.....",
      "EditableFormat": "bbcode",
      "HTML": "oh thank you so much tron. why do you need to talk it through with me? if you don't understand what i'm trying to do i'll send you the battle plan which saying what the code is meant to do.....",
      "PostDate": "2005-12-12T11:23:51+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7149",
      "UserId": 0,
      "Username": "Elexxorine",
      "UserAvatar": null,
      "UserGravatar": "a220ee44d8fe2f07029cf1f61b98bf40",
      "EditableText": "oh thank you so much tron. why do you need to talk it through with me? if you don't understand what i'm trying to do i'll send you the battle plan which saying what the code is meant to do.....",
      "EditableFormat": "bbcode",
      "HTML": "oh thank you so much tron. why do you need to talk it through with me? if you don't understand what i'm trying to do i'll send you the battle plan which saying what the code is meant to do.....",
      "PostDate": "2005-12-12T11:24:43+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7150",
      "UserId": 0,
      "Username": "paul_one",
      "UserAvatar": null,
      "UserGravatar": "fef8a1875028f4300bb683f29c432894",
      "EditableText": "No. It's so that you understand the difference between the different ways you can get to use object properties.\n\nThere's some bits that look like they've been ripped directly from my RPG library.\nBut other bits that look like they could be largely 'simplified'. (Ie, get slightly more complicated - but then become easier to read and more 'compressed').\n\nI'll try and do all that for you.",
      "EditableFormat": "bbcode",
      "HTML": "No. It's so that you understand the difference between the different ways you can get to use object properties.<br/><br/>There's some bits that look like they've been ripped directly from my RPG library.<br/>But other bits that look like they could be largely 'simplified'. (Ie, get slightly more complicated - but then become easier to read and more 'compressed').<br/><br/>I'll try and do all that for you.",
      "PostDate": "2005-12-12T15:47:53+00:00",
      "LastEditDate": null
    }
  ]
}
