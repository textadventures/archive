{
  "Topic": {
    "TopicId": "5229",
    "ForumId": "10",
    "Title": "Setting Room Layer (Height)",
    "LastUpdated": "2015-05-19T11:54:59+01:00",
    "ReplyCount": 6
  },
  "Posts": [
    {
      "PostId": "36068",
      "UserId": 0,
      "Username": "Watcher55",
      "UserAvatar": null,
      "UserGravatar": "5fbb9717e1d63a1d8e1b7d5563f17891",
      "EditableText": "Hi, I've been playing with Quest and it is impressive, but I've hit a mapping snag.\nMy game has staircases etc which go both vertically and horizontally (as staircases do). As far as I can tell, if you have multiple exits (e.g. both west and down for staircase leading west and down), Quest takes the bottom one of the list of exits and if it is &quot;down&quot; puts the new room directly under the current one but at the same X/Y position, but if it is &quot;west&quot; puts the new room to the west but at the same height. This makes it difficult to make sensible maps when a corridor is winding around the place and going over and under. There are ways but they are clunky (e.g. the bottom exit is &quot;west&quot; which takes you to a fake room to the west, which after entry moves the player immediately down to a room of the same dimensions under it).\nWhat would make this easier, at least for me, is if there was a way to program in the layer (Z coordinate) for the room. Thus, in the example above the bottom exit could be &quot;west&quot; and on entry to that room Quest could set the Z coordinate to one less than that of the room we came from.\nDoes anyone know if this is possible?",
      "EditableFormat": "bbcode",
      "HTML": "Hi, I've been playing with Quest and it is impressive, but I've hit a mapping snag.<br/>My game has staircases etc which go both vertically and horizontally (as staircases do). As far as I can tell, if you have multiple exits (e.g. both west and down for staircase leading west and down), Quest takes the bottom one of the list of exits and if it is &quot;down&quot; puts the new room directly under the current one but at the same X/Y position, but if it is &quot;west&quot; puts the new room to the west but at the same height. This makes it difficult to make sensible maps when a corridor is winding around the place and going over and under. There are ways but they are clunky (e.g. the bottom exit is &quot;west&quot; which takes you to a fake room to the west, which after entry moves the player immediately down to a room of the same dimensions under it).<br/>What would make this easier, at least for me, is if there was a way to program in the layer (Z coordinate) for the room. Thus, in the example above the bottom exit could be &quot;west&quot; and on entry to that room Quest could set the Z coordinate to one less than that of the room we came from.<br/>Does anyone know if this is possible?",
      "PostDate": "2015-05-17T12:47:20+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "36070",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "I'm not sure if this is exactly what you want, but it's a try. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> \n\nNote that I'm using Quest 5.6. The grid code in Quest seems to be continually evolving, so I'm not sure if this will work with 5.5 or earlier.\n\nHere is the full test game. \n\n[code:ogeiq7ux]&lt;!--Saved by Quest 5&#46;6&#46;5510&#46;29036--&gt;\n&lt;asl version=&quot;550&quot;&gt;\n  &lt;include ref=&quot;English&#46;aslx&quot; /&gt;\n  &lt;include ref=&quot;Core&#46;aslx&quot; /&gt;\n  &lt;game name=&quot;downmaptest&quot;&gt;\n    &lt;gameid&gt;afca1937-7ae4-4bcf-af7e-73c3ba8ff12e&lt;/gameid&gt;\n    &lt;version&gt;1&#46;0&lt;/version&gt;\n    &lt;firstpublished&gt;2015&lt;/firstpublished&gt;\n    &lt;gridmap /&gt;\n  &lt;/game&gt;\n  &lt;object name=&quot;room&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;object name=&quot;player&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;inherit name=&quot;editor_player&quot; /&gt;\n    &lt;/object&gt;\n    &lt;exit alias=&quot;north&quot; to=&quot;nroom&quot;&gt;\n      &lt;inherit name=&quot;northdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;south&quot; to=&quot;sroom&quot;&gt;\n      &lt;inherit name=&quot;southdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;east&quot; to=&quot;eroom&quot;&gt;\n      &lt;inherit name=&quot;eastdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;west&quot; to=&quot;wroom&quot;&gt;\n      &lt;inherit name=&quot;westdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=&quot;nroom&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;exit alias=&quot;south&quot; to=&quot;room&quot;&gt;\n      &lt;inherit name=&quot;southdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=&quot;sroom&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;exit alias=&quot;north&quot; to=&quot;room&quot;&gt;\n      &lt;inherit name=&quot;northdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=&quot;wroom&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;enter type=&quot;script&quot;&gt;\n      Grid_SetGridCoordinateForPlayer (game&#46;pov, dwroom, &quot;z&quot;, Grid_GetGridCoordinateForPlayer(game&#46;pov, wroom, &quot;z&quot;)+1)\n    &lt;/enter&gt;\n    &lt;exit alias=&quot;east&quot; to=&quot;room&quot;&gt;\n      &lt;inherit name=&quot;eastdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;west&quot; to=&quot;dwroom&quot;&gt;\n      &lt;inherit name=&quot;westdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=&quot;eroom&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;exit alias=&quot;west&quot; to=&quot;room&quot;&gt;\n      &lt;inherit name=&quot;westdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=&quot;dnroom&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;exit alias=&quot;south&quot; to=&quot;dwroom&quot;&gt;\n      &lt;inherit name=&quot;southdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=&quot;dsroom&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;exit alias=&quot;north&quot; to=&quot;dwroom&quot;&gt;\n      &lt;inherit name=&quot;northdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=&quot;dwroom&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;enter type=&quot;script&quot;&gt;\n      Grid_SetGridCoordinateForPlayer (game&#46;pov, wroom, &quot;z&quot;, Grid_GetGridCoordinateForPlayer(game&#46;pov, dwroom, &quot;z&quot;)-1)\n    &lt;/enter&gt;\n    &lt;exit alias=&quot;east&quot; to=&quot;wroom&quot;&gt;\n      &lt;inherit name=&quot;eastdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;north&quot; to=&quot;dnroom&quot;&gt;\n      &lt;inherit name=&quot;northdirection&quot; /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=&quot;south&quot; to=&quot;dsroom&quot;&gt;\n      &lt;inherit name=&quot;southdirection&quot; /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;[/code:ogeiq7ux]\n\nIt's largely rooms I put in to see the map. It has a main room with four exits off in the normal cardinal directions. The room to the west has another room to the west, which is supposed to be a level down.\n\nEach of the two special rooms (the west room (&quot;wroom&quot;) and the down west room (&quot;dwroom&quot;)) have &quot;enter&quot; scripts which fix up the levels of the rooms they connect to. It turns out that every time you enter a room, Quest will fix up all the rooms it connects to, so you have to continually update the z coordinates on entry. \n\nHere is a sample &quot;enter&quot; script&#058;\n\n[code:ogeiq7ux]    &lt;enter type=&quot;script&quot;&gt;\n      Grid_SetGridCoordinateForPlayer (game&#46;pov, wroom, &quot;z&quot;, Grid_GetGridCoordinateForPlayer(game&#46;pov, dwroom, &quot;z&quot;)-1)\n    &lt;/enter&gt;[/code:ogeiq7ux]\nWhat it does is to simply set the grid &quot;z&quot; coordinate to the one &quot;down&quot; from the current room. \n\nHope that helps!",
      "EditableFormat": "bbcode",
      "HTML": "I'm not sure if this is exactly what you want, but it's a try. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> <br/><br/>Note that I'm using Quest 5.6. The grid code in Quest seems to be continually evolving, so I'm not sure if this will work with 5.5 or earlier.<br/><br/>Here is the full test game. <br/><br/><pre><code>&lt;!--Saved by Quest 5&#46;6&#46;5510&#46;29036--&gt;<br/>&lt;asl version=&quot;550&quot;&gt;<br/>  &lt;include ref=&quot;English&#46;aslx&quot; /&gt;<br/>  &lt;include ref=&quot;Core&#46;aslx&quot; /&gt;<br/>  &lt;game name=&quot;downmaptest&quot;&gt;<br/>    &lt;gameid&gt;afca1937-7ae4-4bcf-af7e-73c3ba8ff12e&lt;/gameid&gt;<br/>    &lt;version&gt;1&#46;0&lt;/version&gt;<br/>    &lt;firstpublished&gt;2015&lt;/firstpublished&gt;<br/>    &lt;gridmap /&gt;<br/>  &lt;/game&gt;<br/>  &lt;object name=&quot;room&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;object name=&quot;player&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;inherit name=&quot;editor_player&quot; /&gt;<br/>    &lt;/object&gt;<br/>    &lt;exit alias=&quot;north&quot; to=&quot;nroom&quot;&gt;<br/>      &lt;inherit name=&quot;northdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;south&quot; to=&quot;sroom&quot;&gt;<br/>      &lt;inherit name=&quot;southdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;east&quot; to=&quot;eroom&quot;&gt;<br/>      &lt;inherit name=&quot;eastdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;west&quot; to=&quot;wroom&quot;&gt;<br/>      &lt;inherit name=&quot;westdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;object name=&quot;nroom&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;exit alias=&quot;south&quot; to=&quot;room&quot;&gt;<br/>      &lt;inherit name=&quot;southdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;object name=&quot;sroom&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;exit alias=&quot;north&quot; to=&quot;room&quot;&gt;<br/>      &lt;inherit name=&quot;northdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;object name=&quot;wroom&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;enter type=&quot;script&quot;&gt;<br/>      Grid_SetGridCoordinateForPlayer (game&#46;pov, dwroom, &quot;z&quot;, Grid_GetGridCoordinateForPlayer(game&#46;pov, wroom, &quot;z&quot;)+1)<br/>    &lt;/enter&gt;<br/>    &lt;exit alias=&quot;east&quot; to=&quot;room&quot;&gt;<br/>      &lt;inherit name=&quot;eastdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;west&quot; to=&quot;dwroom&quot;&gt;<br/>      &lt;inherit name=&quot;westdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;object name=&quot;eroom&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;exit alias=&quot;west&quot; to=&quot;room&quot;&gt;<br/>      &lt;inherit name=&quot;westdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;object name=&quot;dnroom&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;exit alias=&quot;south&quot; to=&quot;dwroom&quot;&gt;<br/>      &lt;inherit name=&quot;southdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;object name=&quot;dsroom&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;exit alias=&quot;north&quot; to=&quot;dwroom&quot;&gt;<br/>      &lt;inherit name=&quot;northdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>  &lt;object name=&quot;dwroom&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;enter type=&quot;script&quot;&gt;<br/>      Grid_SetGridCoordinateForPlayer (game&#46;pov, wroom, &quot;z&quot;, Grid_GetGridCoordinateForPlayer(game&#46;pov, dwroom, &quot;z&quot;)-1)<br/>    &lt;/enter&gt;<br/>    &lt;exit alias=&quot;east&quot; to=&quot;wroom&quot;&gt;<br/>      &lt;inherit name=&quot;eastdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;north&quot; to=&quot;dnroom&quot;&gt;<br/>      &lt;inherit name=&quot;northdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>    &lt;exit alias=&quot;south&quot; to=&quot;dsroom&quot;&gt;<br/>      &lt;inherit name=&quot;southdirection&quot; /&gt;<br/>    &lt;/exit&gt;<br/>  &lt;/object&gt;<br/>&lt;/asl&gt;</code></pre><br/><br/>It's largely rooms I put in to see the map. It has a main room with four exits off in the normal cardinal directions. The room to the west has another room to the west, which is supposed to be a level down.<br/><br/>Each of the two special rooms (the west room (&quot;wroom&quot;) and the down west room (&quot;dwroom&quot;)) have &quot;enter&quot; scripts which fix up the levels of the rooms they connect to. It turns out that every time you enter a room, Quest will fix up all the rooms it connects to, so you have to continually update the z coordinates on entry. <br/><br/>Here is a sample &quot;enter&quot; script&#058;<br/><br/><pre><code>    &lt;enter type=&quot;script&quot;&gt;<br/>      Grid_SetGridCoordinateForPlayer (game&#46;pov, wroom, &quot;z&quot;, Grid_GetGridCoordinateForPlayer(game&#46;pov, dwroom, &quot;z&quot;)-1)<br/>    &lt;/enter&gt;</code></pre><br/>What it does is to simply set the grid &quot;z&quot; coordinate to the one &quot;down&quot; from the current room. <br/><br/>Hope that helps!",
      "PostDate": "2015-05-17T14:53:05+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "36071",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "aside from Jay's help above, at least with older versions of quest with the map~grid (as Jay says: it is evolving), here's some quick general commentary about quest's map~grid usage:\n\nit was only 2D, no vertical layers~levels of mapping~grid'ing.\n\nwhat people would do is when they would go to a different vertical level~layer, is to clear the map~grid (as it was for the previous vertical layer~level), and thus have it draw a new grid~map for your new vertical layer~level of horizontal mapping~grid'ing.\n\nJay's done some really fancy map~grid stuff (3d map~grid auto-random-generation and the like), so he's a good resource to be getting help from, hehe.",
      "EditableFormat": "bbcode",
      "HTML": "aside from Jay's help above, at least with older versions of quest with the map~grid (as Jay says: it is evolving), here's some quick general commentary about quest's map~grid usage:<br/><br/>it was only 2D, no vertical layers~levels of mapping~grid'ing.<br/><br/>what people would do is when they would go to a different vertical level~layer, is to clear the map~grid (as it was for the previous vertical layer~level), and thus have it draw a new grid~map for your new vertical layer~level of horizontal mapping~grid'ing.<br/><br/>Jay's done some really fancy map~grid stuff (3d map~grid auto-random-generation and the like), so he's a good resource to be getting help from, hehe.",
      "PostDate": "2015-05-17T15:51:01+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "36073",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Just an note: The multi-level grid support has been in there since at least 5.5. (I remember seeing it there.) By evolving, I mostly meant the internal code functions keep changing name, which makes it a bit dodgy sometimes calling them unless you know which version you're dealing with.\n\nSome of the grid stuff I did in 5.4 didn't work untouched in 5.5, as new parameters had been added to functions, etc.  <!-- s:( --><img src=\"{SMILIES_PATH}/icon_sad.gif\" alt=\":(\" title=\"Sad\" /><!-- s:( -->",
      "EditableFormat": "bbcode",
      "HTML": "Just an note: The multi-level grid support has been in there since at least 5.5. (I remember seeing it there.) By evolving, I mostly meant the internal code functions keep changing name, which makes it a bit dodgy sometimes calling them unless you know which version you're dealing with.<br/><br/>Some of the grid stuff I did in 5.4 didn't work untouched in 5.5, as new parameters had been added to functions, etc.  <!-- s:( --><img src=\"{SMILIES_PATH}/icon_sad.gif\" alt=\":(\" title=\"Sad\" /><!-- s:( -->",
      "PostDate": "2015-05-17T19:38:34+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "36088",
      "UserId": 0,
      "Username": "Watcher55",
      "UserAvatar": null,
      "UserGravatar": "5fbb9717e1d63a1d8e1b7d5563f17891",
      "EditableText": "Ah, interesting, thanks, I reckon that will do it. The Quest documentation (at least, under Functions) doesn't appear to have Grid_GetGridCoordinateForPlayer (or Grid_SetGridCoordinateForPlayer) so thanks for the inside tip <!-- s:-) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":-)\" title=\"Smile\" /><!-- s:-) -->",
      "EditableFormat": "bbcode",
      "HTML": "Ah, interesting, thanks, I reckon that will do it. The Quest documentation (at least, under Functions) doesn't appear to have Grid_GetGridCoordinateForPlayer (or Grid_SetGridCoordinateForPlayer) so thanks for the inside tip <!-- s:-) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":-)\" title=\"Smile\" /><!-- s:-) -->",
      "PostDate": "2015-05-19T09:02:51+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "36089",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "it might (probably is) an internal code command, which you can see and change SAFELY (due to the GUI~Editor's FORCED~REQUIRED 'copy' button):\n\nin the GUI~Editor: left side's 'tree of stuff' (or jsut the lower left corner of the window~screen) -&gt; Filter -&gt; Show Library Elements -&gt; this is a toggle to show~hide the underlying code commands, which will now appear (if toggled on of course) as light grey text up in your left side's 'tree of stuff'\n\nor, if you're a good programmer and know what you're doing, you can write~change the underlying code directly (but this is UNsafe ~ if you mess it up and can't fix it, you'll have to DL quest again):\n\njust go into (open up) the actual quest folders+files (the 'core' files) with a text software (notepad, wordpad, notepad++, apple: text editor, etc), and change the code.",
      "EditableFormat": "bbcode",
      "HTML": "it might (probably is) an internal code command, which you can see and change SAFELY (due to the GUI~Editor's FORCED~REQUIRED 'copy' button):<br/><br/>in the GUI~Editor: left side's 'tree of stuff' (or jsut the lower left corner of the window~screen) -&gt; Filter -&gt; Show Library Elements -&gt; this is a toggle to show~hide the underlying code commands, which will now appear (if toggled on of course) as light grey text up in your left side's 'tree of stuff'<br/><br/>or, if you're a good programmer and know what you're doing, you can write~change the underlying code directly (but this is UNsafe ~ if you mess it up and can't fix it, you'll have to DL quest again):<br/><br/>just go into (open up) the actual quest folders+files (the 'core' files) with a text software (notepad, wordpad, notepad++, apple: text editor, etc), and change the code.",
      "PostDate": "2015-05-19T09:14:19+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "36092",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "You can also go half-way in between - load up the files with a text editor to see how they work and see what's available to use, but don't change them. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> At least, that's what I do.",
      "EditableFormat": "bbcode",
      "HTML": "You can also go half-way in between - load up the files with a text editor to see how they work and see what's available to use, but don't change them. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> At least, that's what I do.",
      "PostDate": "2015-05-19T11:54:59+01:00",
      "LastEditDate": null
    }
  ]
}
