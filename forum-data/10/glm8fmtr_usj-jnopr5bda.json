{
  "Topic": {
    "TopicId": "glm8fmtr_usj-jnopr5bda",
    "ForumId": "10",
    "Title": "Calling NPCs",
    "LastUpdated": "2016-10-21T02:43:50.7172133Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "18a2717f-f7d9-40e5-96cc-cb4854f35fe4",
      "UserId": 253952,
      "Username": "Finch",
      "AvatarUrl": "https://secure.gravatar.com/avatar/6105deea847467f2dae744d3a55dddde?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So, this was a problem I ran into while testing out an experimental concept, and I was hoping I could make it work, still. See, I had a system in place where the player could call NPCs on a phone for hints or background fluff conversations. I decided the most logical way to do it would be to make a verb: \"call (NPC NAME).\" So far, so good. The problem, however, comes with making the game recognize the NPC exists. At first, I thought I'd just have all the NPCs in question sequestered in their own little hidden room, so that they technically existed, but whenever I used \"call (NPC)\" I'd get the message \"I can't see that. (NPC)\" So, I tried placing the NPCs in the players inventory as invisible objects. Again, same problem. I don't want to make the NPCs visible, or else the player would just see a bunch of names floating around their inventory. Can somebody point out the probably blatantly obvious mistake I'm making, here?",
      "EditableFormat": "markdown",
      "HTML": "<p>So, this was a problem I ran into while testing out an experimental concept, and I was hoping I could make it work, still. See, I had a system in place where the player could call NPCs on a phone for hints or background fluff conversations. I decided the most logical way to do it would be to make a verb: \"call (NPC NAME).\" So far, so good. The problem, however, comes with making the game recognize the NPC exists. At first, I thought I'd just have all the NPCs in question sequestered in their own little hidden room, so that they technically existed, but whenever I used \"call (NPC)\" I'd get the message \"I can't see that. (NPC)\" So, I tried placing the NPCs in the players inventory as invisible objects. Again, same problem. I don't want to make the NPCs visible, or else the player would just see a bunch of names floating around their inventory. Can somebody point out the probably blatantly obvious mistake I'm making, here?</p>\n\n",
      "PostDate": "2016-10-21T02:43:50.7172133Z",
      "LastEditDate": null
    },
    {
      "PostId": "7c129019-3747-49ae-9184-a0156a94e597",
      "UserId": 248029,
      "Username": "Anonynn",
      "AvatarUrl": "http://i.imgur.com/28lV6nMb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I could be wrong but you won't be able to connect it to an object in the game, unless that object is present in the room (and if you make an object invisible you cannot interact with it at all). What you can do is make a \"command\" on the player or better yet a global command and name it \"Phone\" or \"Call\". Make a boolean of whether or not the player has met the npc in question, then set up a script on the command that says something like...\r\n```\r\nif (npc.met=True) {\r\n  if (game.pov.parent = certain_room) {\r\n   firsttime { \r\n   msg (\"Oh, that room? You need to do a backflip to get through that puzzle, you silly goose. Okay bye!\")\r\n   }\r\n   otherwise {\r\n   msg (\"Whaaaaat? I already told you about that goofus. Leave me be!\")\r\n   }\r\n }\r\n}\r\n```\r\nOr something like that. Does that help at all?",
      "EditableFormat": "markdown",
      "HTML": "<p>I could be wrong but you won't be able to connect it to an object in the game, unless that object is present in the room (and if you make an object invisible you cannot interact with it at all). What you can do is make a \"command\" on the player or better yet a global command and name it \"Phone\" or \"Call\". Make a boolean of whether or not the player has met the npc in question, then set up a script on the command that says something like...</p>\n<pre><code>if (npc.met=True) {\n  if (game.pov.parent = certain_room) {\n   firsttime { \n   msg (\"Oh, that room? You need to do a backflip to get through that puzzle, you silly goose. Okay bye!\")\n   }\n   otherwise {\n   msg (\"Whaaaaat? I already told you about that goofus. Leave me be!\")\n   }\n }\n}\n</code></pre>\n<p>Or something like that. Does that help at all?</p>\n\n",
      "PostDate": "2016-10-21T03:48:44.5398388Z",
      "LastEditDate": null
    },
    {
      "PostId": "40f863ad-3e16-4354-b51d-dbcb8405ff4a",
      "UserId": 924,
      "Username": "Pertex",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4cc1e52f99452e841ecf4cbee9eadde9?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think you used the command pattern \"call #object#\" . So Quest expects an object available for the player. You can use \"call #text#\" instead of it.  With this pattern Quest saves the called person in a string variable named text.  Within the script you should check if an object with that name exists. Something like this:\r\n\r\n```\r\n        x = GetObject(text)\r\n        if (x = null) {\r\n          msg (\"You don't know a person named \" + text)\r\n          \r\n        } else {\r\n          msg (\"Hello , here is \"+ x.name)\r\n        }  \r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>I think you used the command pattern \"call #object#\" . So Quest expects an object available for the player. You can use \"call #text#\" instead of it.  With this pattern Quest saves the called person in a string variable named text.  Within the script you should check if an object with that name exists. Something like this:</p>\n<pre><code>        x = GetObject(text)\n        if (x = null) {\n          msg (\"You don't know a person named \" + text)\n          \n        } else {\n          msg (\"Hello , here is \"+ x.name)\n        }  \n</code></pre>\n\n",
      "PostDate": "2016-10-21T06:01:47.0240725Z",
      "LastEditDate": null
    },
    {
      "PostId": "6e161747-396e-43c3-9cc1-b27b50949dcb",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have a tutorial on how to do that sort of thing here:\r\nhttps://github.com/ThePix/quest/wiki/Commands-with-unusual-scopes",
      "EditableFormat": "markdown",
      "HTML": "<p>I have a tutorial on how to do that sort of thing here:<br>\nhttps://github.com/ThePix/quest/wiki/Commands-with-unusual-scopes</p>\n\n",
      "PostDate": "2016-10-21T07:22:08.9666627Z",
      "LastEditDate": null
    },
    {
      "PostId": "ca4144d2-a62e-409b-b229-ba069c778dc1",
      "UserId": 253952,
      "Username": "Finch",
      "AvatarUrl": "https://secure.gravatar.com/avatar/6105deea847467f2dae744d3a55dddde?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So, I tried The Pixie's method, and the game gives me an error message when I post the code in where there'd be script.\r\n\r\n\"Invalid XML: Name cannot begin with the '>' character, hexadecimal value 0x3E. Line 139, position 16.\"\r\n\r\nI should mention that I have almost no experience with code, so a lot of this is a bit above my head, at least for the time being. One of these days I suppose it'd behoove me to learn the language the system's coded in, but for now I've mostly been wrestling with flag logic.",
      "EditableFormat": "markdown",
      "HTML": "<p>So, I tried The Pixie's method, and the game gives me an error message when I post the code in where there'd be script.</p>\n<p>\"Invalid XML: Name cannot begin with the '&gt;' character, hexadecimal value 0x3E. Line 139, position 16.\"</p>\n<p>I should mention that I have almost no experience with code, so a lot of this is a bit above my head, at least for the time being. One of these days I suppose it'd behoove me to learn the language the system's coded in, but for now I've mostly been wrestling with flag logic.</p>\n\n",
      "PostDate": "2016-10-23T00:44:19.3201044Z",
      "LastEditDate": null
    },
    {
      "PostId": "ed117af6-214f-4a23-a687-19d5a8c042e8",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "we'll need to see the code at line 139, to be able to help you fix this likely typo that's the cause for the error. Hopefully, the GUI/Editor's Code View shows its mouse cursor's line/position count, which you can toggle back and forth from the Code View and back into the GUI/Editor view, via the top menu bar's notepaper-like button, between the 'play' and 'help' buttons. Paste your code here of/at your line 139, so we can see your incorrect syntax/code line, to fix the likely simple typo in its format/structure/syntax.",
      "EditableFormat": "markdown",
      "HTML": "<p>we'll need to see the code at line 139, to be able to help you fix this likely typo that's the cause for the error. Hopefully, the GUI/Editor's Code View shows its mouse cursor's line/position count, which you can toggle back and forth from the Code View and back into the GUI/Editor view, via the top menu bar's notepaper-like button, between the 'play' and 'help' buttons. Paste your code here of/at your line 139, so we can see your incorrect syntax/code line, to fix the likely simple typo in its format/structure/syntax.</p>\n\n",
      "PostDate": "2016-10-23T02:02:06.4361548Z",
      "LastEditDate": "2016-10-23T02:05:35.8780231Z"
    },
    {
      "PostId": "39c173bc-b328-48d1-b52c-38a81eeacb76",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The error is talking about the XML name, not the Quest name. Inthis tag, it is \"object\" that is the XML name.\r\n```\r\n <object name=\"teapot\">\r\n```\r\nSounds like you have something like this:\r\n```\r\n <>object name=\"teapot\">\r\n```\r\nHave you been changing stuff in the full code view? Generally that is a bad idea. Just use the code view for individual scripts (there is an icon above the script). That said, to correct it, you will need to go into full code view (or even use a text editor like Notepad). Do a search for `<>` to locate the problem.\r\n\r\nIf you are not sure how it should be, copy-and-paste a few lines before and several lines after into a post so we can see it.",
      "EditableFormat": "markdown",
      "HTML": "<p>The error is talking about the XML name, not the Quest name. Inthis tag, it is \"object\" that is the XML name.</p>\n<pre><code> &lt;object name=\"teapot\"&gt;\n</code></pre>\n<p>Sounds like you have something like this:</p>\n<pre><code> &lt;&gt;object name=\"teapot\"&gt;\n</code></pre>\n<p>Have you been changing stuff in the full code view? Generally that is a bad idea. Just use the code view for individual scripts (there is an icon above the script). That said, to correct it, you will need to go into full code view (or even use a text editor like Notepad). Do a search for <code>&lt;&gt;</code> to locate the problem.</p>\n<p>If you are not sure how it should be, copy-and-paste a few lines before and several lines after into a post so we can see it.</p>\n\n",
      "PostDate": "2016-10-23T09:59:53.7016354Z",
      "LastEditDate": null
    },
    {
      "PostId": "14f0b849-80ff-4578-91f7-fdcb4d9660cd",
      "UserId": 253952,
      "Username": "Finch",
      "AvatarUrl": "https://secure.gravatar.com/avatar/6105deea847467f2dae744d3a55dddde?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh, hey. I was going to say that the problem seemed to be that <> marks were in the code itself, but then I saw that you could go into code view for individual scripts. Gonna be honest, I didn't know that was possible, so I was trying to inject it in full code view where I saw the program wanted to put code for function scripts. It seems to be working out all right, so far: I've got a series of scripts all set up in GUI view.\r\n\r\nOne thing I kind of want to figure out is if this script can be used to different effect for different objects. I'd assume the function of being able to \"buy #text#\" would be to allow multiple things stored in the checkup room to be referenced, but in this case the function would be used to print messages from one of multiple NPCs, and they're going to say different things. How does one go about letting the BuyFunction work for multiple objects?",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh, hey. I was going to say that the problem seemed to be that &lt;&gt; marks were in the code itself, but then I saw that you could go into code view for individual scripts. Gonna be honest, I didn't know that was possible, so I was trying to inject it in full code view where I saw the program wanted to put code for function scripts. It seems to be working out all right, so far: I've got a series of scripts all set up in GUI view.</p>\n<p>One thing I kind of want to figure out is if this script can be used to different effect for different objects. I'd assume the function of being able to \"buy #text#\" would be to allow multiple things stored in the checkup room to be referenced, but in this case the function would be used to print messages from one of multiple NPCs, and they're going to say different things. How does one go about letting the BuyFunction work for multiple objects?</p>\n\n",
      "PostDate": "2016-10-24T21:50:49.9597126Z",
      "LastEditDate": null
    },
    {
      "PostId": "34d66886-8fa0-44b0-b762-e9712ff37ee1",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "there' is the 'multiple' Attribute for Verbs/Commands, but I don't understand how it works, myself:\r\n\r\nhttp://docs.textadventures.co.uk/quest/elements/command.html (scroll down to the 'multiple' section/category)\r\n\r\nah, okay, after reading it, I now understand it a bit, in that whatever the code/code-handling is for it, it just uses/returns an Object List Attribute (containing your Object items in it).\r\n\r\nnot sure if it can be used for other things, besides its built-in usage with the 'take/drop', though...\r\n\r\n-------------\r\n\r\nif you just want to do a more simplistic usage of multiple things or of handling different things, you can just use a Function's Parameters or a Command's Parameters ( #text# / #object# ).\r\n\r\nif you're new to coding... this is a bit more advanced stuff, and not easy to explain it, but if interested in working with Functions/Commands, let me know.",
      "EditableFormat": "markdown",
      "HTML": "<p>there' is the 'multiple' Attribute for Verbs/Commands, but I don't understand how it works, myself:</p>\n<p>http://docs.textadventures.co.uk/quest/elements/command.html (scroll down to the 'multiple' section/category)</p>\n<p>ah, okay, after reading it, I now understand it a bit, in that whatever the code/code-handling is for it, it just uses/returns an Object List Attribute (containing your Object items in it).</p>\n<p>not sure if it can be used for other things, besides its built-in usage with the 'take/drop', though...</p>\n<hr>\n<p>if you just want to do a more simplistic usage of multiple things or of handling different things, you can just use a Function's Parameters or a Command's Parameters ( #text# / #object# ).</p>\n<p>if you're new to coding... this is a bit more advanced stuff, and not easy to explain it, but if interested in working with Functions/Commands, let me know.</p>\n\n",
      "PostDate": "2016-10-24T22:29:54.5028091Z",
      "LastEditDate": null
    },
    {
      "PostId": "08afa08c-8dd3-4378-881a-29d8860ff513",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have updated the tutorial I linked to above to include doing just this.\r\nhttps://github.com/ThePix/quest/wiki/Commands-with-unusual-scopes",
      "EditableFormat": "markdown",
      "HTML": "<p>I have updated the tutorial I linked to above to include doing just this.<br>\nhttps://github.com/ThePix/quest/wiki/Commands-with-unusual-scopes</p>\n\n",
      "PostDate": "2016-10-26T07:28:10.3445342Z",
      "LastEditDate": null
    },
    {
      "PostId": "9876f9db-1a5b-4c3f-bc80-14bcac09e4eb",
      "UserId": 253952,
      "Username": "Finch",
      "AvatarUrl": "https://secure.gravatar.com/avatar/6105deea847467f2dae744d3a55dddde?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh, man. This has been a serious bit of work. So, I put together a test pattern game to try and isolate this bit of coding, and after some fiddling around and figuring out what works where, I managed to get it all running smoothly. The next step is going to be copying this success in the game proper, but for now, that's a concept proven and done with. Thanks for your help; I honestly had no idea something so pedestrian would wind up being so complex.",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh, man. This has been a serious bit of work. So, I put together a test pattern game to try and isolate this bit of coding, and after some fiddling around and figuring out what works where, I managed to get it all running smoothly. The next step is going to be copying this success in the game proper, but for now, that's a concept proven and done with. Thanks for your help; I honestly had no idea something so pedestrian would wind up being so complex.</p>\n\n",
      "PostDate": "2016-10-26T18:46:21.1314977Z",
      "LastEditDate": null
    }
  ]
}
