{
  "Topic": {
    "TopicId": "3885",
    "ForumId": "10",
    "Title": "General Map Designing for fun and profit",
    "LastUpdated": "2013-08-26T00:09:55+01:00",
    "ReplyCount": 8
  },
  "Posts": [
    {
      "PostId": "25991",
      "UserId": 0,
      "Username": "Entropic Pen",
      "UserAvatar": null,
      "UserGravatar": "e5f002e803b6ffc8146a20f6f4777d33",
      "EditableText": "EDIT:  Let's put our questions about the map system here so in the future we won't have to scroll through so many threads.\n\nSo I was in the heat of designing &quot;Welcome to Dream Valley&quot; when I had the brilliant idea to implement a map screen when I came across something called a &quot;custom drawing layer&quot; and it appears to be some sort of map-editing script that can be &quot;shown&quot; and &quot;cleared&quot;.\n\nWhat am I looking at and how can I use this for fun and profit?",
      "EditableFormat": "bbcode",
      "HTML": "EDIT:  Let's put our questions about the map system here so in the future we won't have to scroll through so many threads.<br/><br/>So I was in the heat of designing &quot;Welcome to Dream Valley&quot; when I had the brilliant idea to implement a map screen when I came across something called a &quot;custom drawing layer&quot; and it appears to be some sort of map-editing script that can be &quot;shown&quot; and &quot;cleared&quot;.<br/><br/>What am I looking at and how can I use this for fun and profit?",
      "PostDate": "2013-08-25T14:50:36+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25992",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Where did you come across this? In the Quest code or docs or...?  If I can get that, I might be able to tell you what you're looking at. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "Where did you come across this? In the Quest code or docs or...?  If I can get that, I might be able to tell you what you're looking at. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2013-08-25T15:16:10+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25993",
      "UserId": 0,
      "Username": "Entropic Pen",
      "UserAvatar": null,
      "UserGravatar": "e5f002e803b6ffc8146a20f6f4777d33",
      "EditableText": "They're functions in the Quest CoreGrid.aslx library, I stumbled upon them when I checked the &quot;Show Library Elements&quot; box.",
      "EditableFormat": "bbcode",
      "HTML": "They're functions in the Quest CoreGrid.aslx library, I stumbled upon them when I checked the &quot;Show Library Elements&quot; box.",
      "PostDate": "2013-08-25T15:22:46+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25994",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "To be honest, I'm not sure. I believe it's another layer within the map/grid display system, but the only function I see for drawing to it is Grid_DrawSquare. Perhaps Alex had a special use in mind, since it's so specific.\n\nBy the way: if you ever want to customize the grid code, I have gone through the work of extracting and rewriting it slightly so that it's not embedded in the paper.js instance it currently is (which makes it currently non-customizable). I was using it as a test, to draw a different shape for the player than the current circle. Once it's exposed like that, all kinds of things could be drawn to the map (or just the canvas in general) using the handy paper.js APIs.",
      "EditableFormat": "bbcode",
      "HTML": "To be honest, I'm not sure. I believe it's another layer within the map/grid display system, but the only function I see for drawing to it is Grid_DrawSquare. Perhaps Alex had a special use in mind, since it's so specific.<br/><br/>By the way: if you ever want to customize the grid code, I have gone through the work of extracting and rewriting it slightly so that it's not embedded in the paper.js instance it currently is (which makes it currently non-customizable). I was using it as a test, to draw a different shape for the player than the current circle. Once it's exposed like that, all kinds of things could be drawn to the map (or just the canvas in general) using the handy paper.js APIs.",
      "PostDate": "2013-08-25T16:30:24+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25995",
      "UserId": 0,
      "Username": "Entropic Pen",
      "UserAvatar": null,
      "UserGravatar": "e5f002e803b6ffc8146a20f6f4777d33",
      "EditableText": "Thanks for looking into it, Jay, I'll check it out.",
      "EditableFormat": "bbcode",
      "HTML": "Thanks for looking into it, Jay, I'll check it out.",
      "PostDate": "2013-08-25T16:34:04+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25997",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "I've posted the grid map code I was talking about. It's a bit of a hack, but it might be useful to someone. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "I've posted the grid map code I was talking about. It's a bit of a hack, but it might be useful to someone. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2013-08-25T16:41:18+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "25999",
      "UserId": 0,
      "Username": "Entropic Pen",
      "UserAvatar": null,
      "UserGravatar": "e5f002e803b6ffc8146a20f6f4777d33",
      "EditableText": "You've blown our minds yet again, Jay.\n\nNow riddle me this; for the implementation of a map screen in &quot;Welcome to Dream Valley&quot; to really work, we're going to have to find a way to display different maps for different areas depending on where the player is.\n\nFor example; the tunnels in and out of the underworld when put on a map are way off from what the Quest Engine's map calculator could put together.  I was thinking that when a player goes down to the underworld the map would clear itself of any rooms not registered as &quot;underworld&quot;, and display the rooms that are registered as &quot;underworld&quot;.  Then if the player leaves the underworld and ends up in the Volcano of Gloom, the map would clear itself and display the rooms registered as &quot;gloom&quot;.",
      "EditableFormat": "bbcode",
      "HTML": "You've blown our minds yet again, Jay.<br/><br/>Now riddle me this; for the implementation of a map screen in &quot;Welcome to Dream Valley&quot; to really work, we're going to have to find a way to display different maps for different areas depending on where the player is.<br/><br/>For example; the tunnels in and out of the underworld when put on a map are way off from what the Quest Engine's map calculator could put together.  I was thinking that when a player goes down to the underworld the map would clear itself of any rooms not registered as &quot;underworld&quot;, and display the rooms that are registered as &quot;underworld&quot;.  Then if the player leaves the underworld and ends up in the Volcano of Gloom, the map would clear itself and display the rooms registered as &quot;gloom&quot;.",
      "PostDate": "2013-08-25T19:51:28+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26000",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "The question to be answered first is: are you going to be gradually revealing the map or do you want it all shown at once? If you want to reveal the map gradually (as is done now), then you'd be better of, perhaps, using the z coordinate to switch layers. Because the rooms that have been visited only show up because they've been drawn to the paper. Once you clear it, you'd lose all that state. (So leaving a dungeon and coming back would show you just the room you're in.)\n\nIf you want to show the entire map, then that's doable as you'd clear the previous map and draw the entire new one.\n\nThe drawback to using the z index is that, once again, app policy is hard-coded in the low-level Quest routines. So, there is a maximum of 7 levels at the moment (-3 through +3), and the other layers are partially shown when you switch z coordinate, which might make sense in some cases, but could also be really annoying in others.\n\nIf you do want to use the z coord, you could probably take the code I just posted, change the opacity handling in activateLayer (set it to 0 instead of 0.2), and then set the layer count to what you'll need. Then you would have to layout the z coordinates in the rooms to be consistent across different areas. There might be an easy way to do it with the exits, as the exits have length. So you could go down 1 level for one area, go down two for another, etc. And they'd all be on separate layers. (I hope that makes sense.)",
      "EditableFormat": "bbcode",
      "HTML": "The question to be answered first is: are you going to be gradually revealing the map or do you want it all shown at once? If you want to reveal the map gradually (as is done now), then you'd be better of, perhaps, using the z coordinate to switch layers. Because the rooms that have been visited only show up because they've been drawn to the paper. Once you clear it, you'd lose all that state. (So leaving a dungeon and coming back would show you just the room you're in.)<br/><br/>If you want to show the entire map, then that's doable as you'd clear the previous map and draw the entire new one.<br/><br/>The drawback to using the z index is that, once again, app policy is hard-coded in the low-level Quest routines. So, there is a maximum of 7 levels at the moment (-3 through +3), and the other layers are partially shown when you switch z coordinate, which might make sense in some cases, but could also be really annoying in others.<br/><br/>If you do want to use the z coord, you could probably take the code I just posted, change the opacity handling in activateLayer (set it to 0 instead of 0.2), and then set the layer count to what you'll need. Then you would have to layout the z coordinates in the rooms to be consistent across different areas. There might be an easy way to do it with the exits, as the exits have length. So you could go down 1 level for one area, go down two for another, etc. And they'd all be on separate layers. (I hope that makes sense.)",
      "PostDate": "2013-08-25T21:57:53+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "26003",
      "UserId": 0,
      "Username": "Entropic Pen",
      "UserAvatar": null,
      "UserGravatar": "e5f002e803b6ffc8146a20f6f4777d33",
      "EditableText": "In short:  LazyNo up's an downs for the same area after you resort the map opacity to 0.\n\nLet's see here, there's the Overworld, Underworld, Gloom, and Unicornia which maybe after some math and a dozen or so headaches putting up with the randomly-selected layouts... yeah.  This could work.\n\nThanks Jay!",
      "EditableFormat": "bbcode",
      "HTML": "In short:  LazyNo up's an downs for the same area after you resort the map opacity to 0.<br/><br/>Let's see here, there's the Overworld, Underworld, Gloom, and Unicornia which maybe after some math and a dozen or so headaches putting up with the randomly-selected layouts... yeah.  This could work.<br/><br/>Thanks Jay!",
      "PostDate": "2013-08-26T00:09:55+01:00",
      "LastEditDate": null
    }
  ]
}
