{
  "Topic": {
    "TopicId": "l02ztse0k06szrrcmw5tja",
    "ForumId": "10",
    "Title": "How to end Wait using hyperlinks (no command bar) for click-only games?",
    "LastUpdated": "2020-05-31T20:12:25.4969835Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "bca93c8f-b886-4907-aad3-6dfa9d02988a",
      "UserId": 385983,
      "Username": "JonQ",
      "AvatarUrl": "https://i.imgur.com/AXGkXqeb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi!  I've looked up everything I can find on the forums having to do with this, but come up empty.  Here's my big question >>> Is there a way to enable clicking (only) on the \"Continue...\" link for online play with no command bar, or if that isn't possible, then can I hide the blinking cursor?\r\n\r\nI've made a click-only text adventure that has some WAITs in the code.  I need the player to click \"Continue...\" (or any link) to fire the next events.  I don't want a key press or get input.  Just clicking.\r\n\r\nI've tried using the Show/Hide command bar idea, but that doesn't work for online play (it works fine on desktop play).  Online, it does nothing but wait, even using... \r\nJS.setInterfaceString(\"ContinueLabel\", \"Insert your new label here...\")  [and yes, I inserted my own label]\r\n\r\n...and adding this to the User Interface Initialisation script (I put it right in line with the code above, yes with an opening bracket):   \r\na id=\"endWaitLink\" onclick=\"endWait();\" class=\"cmdlink\" style=\"display: none\">Continue...</a>\r\n\r\nIt works one time, but then on the following screen, it just shows the Type Here... command bar, but won't respond to clicking or even show Continue...\r\n\r\nI have tried to see if I need some kind of *Update Links* kind of thing (a command version of UpdateObjectLinks?), but I see nothing like that in forums or tutorials.  The best I can do is leave the Command Bar visible, but hide the label from \"Type Here...\" to a space bar, but then I still have a blinking cursor, and players can still type.\r\n\r\nSo again, my big question > > >  Is there a way to enable clicking (only) on the \"Continue...\" link for online play with no command bar, or if that isn't possible, then can I hide the blinking cursor?\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi!  I've looked up everything I can find on the forums having to do with this, but come up empty.  Here's my big question &gt;&gt;&gt; Is there a way to enable clicking (only) on the \"Continue...\" link for online play with no command bar, or if that isn't possible, then can I hide the blinking cursor?</p>\n<p>I've made a click-only text adventure that has some WAITs in the code.  I need the player to click \"Continue...\" (or any link) to fire the next events.  I don't want a key press or get input.  Just clicking.</p>\n<p>I've tried using the Show/Hide command bar idea, but that doesn't work for online play (it works fine on desktop play).  Online, it does nothing but wait, even using...<br>\nJS.setInterfaceString(\"ContinueLabel\", \"Insert your new label here...\")  [and yes, I inserted my own label]</p>\n<p>...and adding this to the User Interface Initialisation script (I put it right in line with the code above, yes with an opening bracket):<br>\na id=\"endWaitLink\" onclick=\"endWait();\" class=\"cmdlink\" style=\"display: none\"&gt;Continue...</p>\n<p>It works one time, but then on the following screen, it just shows the Type Here... command bar, but won't respond to clicking or even show Continue...</p>\n<p>I have tried to see if I need some kind of <em>Update Links</em> kind of thing (a command version of UpdateObjectLinks?), but I see nothing like that in forums or tutorials.  The best I can do is leave the Command Bar visible, but hide the label from \"Type Here...\" to a space bar, but then I still have a blinking cursor, and players can still type.</p>\n<p>So again, my big question &gt; &gt; &gt;  Is there a way to enable clicking (only) on the \"Continue...\" link for online play with no command bar, or if that isn't possible, then can I hide the blinking cursor?</p>\n\n",
      "PostDate": "2020-05-31T20:12:25.4969835Z",
      "LastEditDate": "2020-05-31T20:19:21.9677811Z",
      "link": null
    },
    {
      "PostId": "dd9294b5-d5c9-4961-b51c-2737301fecd4",
      "UserId": 385983,
      "Username": "JonQ",
      "AvatarUrl": "https://i.imgur.com/AXGkXqeb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I guess because of the brackets, it won't display this line in my post (either in the original, or when I try to edit).\r\n\r\nI added this to the user interface init JS code:\r\na id=\"endWaitLink\" onclick=\"endWait();\" class=\"cmdlink\" style=\"display: none\">Continue...",
      "EditableFormat": "markdown",
      "HTML": "<p>I guess because of the brackets, it won't display this line in my post (either in the original, or when I try to edit).</p>\n<p>I added this to the user interface init JS code:<br>\na id=\"endWaitLink\" onclick=\"endWait();\" class=\"cmdlink\" style=\"display: none\"&gt;Continue...</p>\n\n",
      "PostDate": "2020-05-31T20:16:09.5547734Z",
      "LastEditDate": "2020-05-31T20:17:39.5404715Z",
      "link": null
    },
    {
      "PostId": "17701b7f-3452-4846-bdaf-e68d4085e4a0",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It looks like you're including a second \"Continue…\" link; which then overrides the default one when it's unhidden.\r\n\r\nMy first guess if you want to move the endWaitLink around would be something like:\r\n```\r\nJS.eval(\"$('#endWaitLink').appendTo(getCurrentDiv());\")\r\n```\r\nimmediately before the `wait`.",
      "EditableFormat": "markdown",
      "HTML": "<p>It looks like you're including a second \"Continue…\" link; which then overrides the default one when it's unhidden.</p>\n<p>My first guess if you want to move the endWaitLink around would be something like:</p>\n<pre><code>JS.eval(\"$('#endWaitLink').appendTo(getCurrentDiv());\")\n</code></pre>\n<p>immediately before the <code>wait</code>.</p>\n\n",
      "PostDate": "2020-05-31T21:03:30.7600934Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0e6590aa-8329-4caf-803f-3aac1ee22709",
      "UserId": 385983,
      "Username": "JonQ",
      "AvatarUrl": "https://i.imgur.com/AXGkXqeb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you, mrangel.  That is working like a charm so far on desktop Quest.  We'll see how it does online.  \r\n\r\nThat line of JS not only works if you put it right before Wait, but also after the events that fire (inside of Wait), but in the latter case without the \"Continue...\" (players can just click other links).",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you, mrangel.  That is working like a charm so far on desktop Quest.  We'll see how it does online.</p>\n<p>That line of JS not only works if you put it right before Wait, but also after the events that fire (inside of Wait), but in the latter case without the \"Continue...\" (players can just click other links).</p>\n\n",
      "PostDate": "2020-05-31T22:03:54.467153Z",
      "LastEditDate": "2020-05-31T22:04:48.5742031Z",
      "link": null
    },
    {
      "PostId": "a69e7d38-c0a2-4411-b061-0b6d288b0325",
      "UserId": 385983,
      "Username": "JonQ",
      "AvatarUrl": "https://i.imgur.com/AXGkXqeb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Drat!  Same problem I had before when I upload it for Online Play.  \r\n\r\nIt works fine in the ways I described above, but only for desktop play.  The JS does not help either way, mrangel.\r\n\r\nIf I have the command bar shown, it doesn't work (this is what causes the double Continue, right, and so overrides?)  But if I have it hidden, it doesn't work because I must move it down below the Wait line, or else it bisects the rest of the screen's verbiage with the Continue... i.e., if cmd bar is hidden, I can't put the JS line above Wait, because it's aesthetically and logically weird to have that in the middle of the screen's paragraphs.\r\n\r\nOn desktop Quest, it works fine to place the JS line inside the Wait function.  But online, I can't make it work.\r\n\r\n.  I just don't see how to use Clicking to end a Wait during online play.",
      "EditableFormat": "markdown",
      "HTML": "<p>Drat!  Same problem I had before when I upload it for Online Play.</p>\n<p>It works fine in the ways I described above, but only for desktop play.  The JS does not help either way, mrangel.</p>\n<p>If I have the command bar shown, it doesn't work (this is what causes the double Continue, right, and so overrides?)  But if I have it hidden, it doesn't work because I must move it down below the Wait line, or else it bisects the rest of the screen's verbiage with the Continue... i.e., if cmd bar is hidden, I can't put the JS line above Wait, because it's aesthetically and logically weird to have that in the middle of the screen's paragraphs.</p>\n<p>On desktop Quest, it works fine to place the JS line inside the Wait function.  But online, I can't make it work.</p>\n<p>.  I just don't see how to use Clicking to end a Wait during online play.</p>\n\n",
      "PostDate": "2020-05-31T22:39:51.5364252Z",
      "LastEditDate": "2020-06-01T01:47:48.654272Z",
      "link": null
    },
    {
      "PostId": "4ec592f6-c78e-4247-b184-ffeed2557f90",
      "UserId": 385983,
      "Username": "JonQ",
      "AvatarUrl": "https://i.imgur.com/AXGkXqeb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think for some of my events, I can simply do a TurnTimeout instead.  It will give much the same result (players may not notice much difference -- they just won't see the \"Continue...\" and any link will take them there instead).\r\n\r\nStill, it would make more sense with Wait (Continue...)  And I have a couple of events where it really needs that, so it would be nice to know how to make this work for Click-text Adventures.",
      "EditableFormat": "markdown",
      "HTML": "<p>I think for some of my events, I can simply do a TurnTimeout instead.  It will give much the same result (players may not notice much difference -- they just won't see the \"Continue...\" and any link will take them there instead).</p>\n<p>Still, it would make more sense with Wait (Continue...)  And I have a couple of events where it really needs that, so it would be nice to know how to make this work for Click-text Adventures.</p>\n\n",
      "PostDate": "2020-06-01T02:39:28.3305857Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "69d82cd9-42bb-45f3-ae0a-5a602ec851d6",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is a very strange error condition. Can you provide a link to an online game that exhibits this error, so I can take a look at what's going wrong?\r\n\r\nAlso, you said:\r\n> I guess because of the brackets, it won't display this line in my post (either in the original, or when I try to edit).\r\n\r\nThere's a little note to the right of the reply box → saying that to post code, you need to put a line of three backticks (<code><b>```</b></code>) above and below it.",
      "EditableFormat": "markdown",
      "HTML": "<p>This is a very strange error condition. Can you provide a link to an online game that exhibits this error, so I can take a look at what's going wrong?</p>\n<p>Also, you said:</p>\n<blockquote>\n<p>I guess because of the brackets, it won't display this line in my post (either in the original, or when I try to edit).</p>\n</blockquote>\n<p>There's a little note to the right of the reply box → saying that to post code, you need to put a line of three backticks (<code><b>```</b></code>) above and below it.</p>\n\n",
      "PostDate": "2020-06-01T10:26:57.7669442Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bc47cbb2-b949-433a-a8e7-d3b78b098183",
      "UserId": 385983,
      "Username": "JonQ",
      "AvatarUrl": "https://i.imgur.com/AXGkXqeb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel, sorry about the coding ``` (I kept trying that but couldn't get it to work -- maybe I have browser issues).\r\n\r\nHere is the link to my finished game -- I used the workarounds mentioned above, and everything acts as it should now.  But I would still like to know how to Click links to end a Wait.  Do you need code, or just the finished game (I don't know if you're able to see the code somehow -- I've heard of people doing that).\r\n\r\nhttp://textadventures.co.uk/games/view/0n03o9im10yhjjzmnqpuba/treehouse-champion",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel, sorry about the coding ``` (I kept trying that but couldn't get it to work -- maybe I have browser issues).</p>\n<p>Here is the link to my finished game -- I used the workarounds mentioned above, and everything acts as it should now.  But I would still like to know how to Click links to end a Wait.  Do you need code, or just the finished game (I don't know if you're able to see the code somehow -- I've heard of people doing that).</p>\n<p>http://textadventures.co.uk/games/view/0n03o9im10yhjjzmnqpuba/treehouse-champion</p>\n\n",
      "PostDate": "2020-06-01T14:00:33.3871359Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "53470673-df2b-41ef-96c9-4b25760959bd",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I've tried the code I posted above, and it works fine for me.\r\n\r\nI can only assume you've got some code somewhere that's breaking it.\r\n\r\n> Do you need code, or just the finished game\r\n\r\nIt's easy enough to download the game and take a look at it. But as I don't have a Windows computer, I can't run someone else's game. So I can't try it out and see what the problem is unless you can show me a game that has the problem.",
      "EditableFormat": "markdown",
      "HTML": "<p>I've tried the code I posted above, and it works fine for me.</p>\n<p>I can only assume you've got some code somewhere that's breaking it.</p>\n<blockquote>\n<p>Do you need code, or just the finished game</p>\n</blockquote>\n<p>It's easy enough to download the game and take a look at it. But as I don't have a Windows computer, I can't run someone else's game. So I can't try it out and see what the problem is unless you can show me a game that has the problem.</p>\n\n",
      "PostDate": "2020-06-01T17:21:55.8554163Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ca773e4f-aa88-4845-b98d-79204f6575b4",
      "UserId": 385983,
      "Username": "JonQ",
      "AvatarUrl": "https://i.imgur.com/AXGkXqeb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Even though I've got my game up and running satisfactorily, I still want to know WHY this doesn't work, in case I make other games in this mode -- it seems like a basic thing that you should be able to do for click-only text adventures.  I tried this every which way but got nowhere with it online, whereas on my desktop, it's no problem.\r\n\r\nOkay, so I coded over the bits that weren't working, and my previous files got erased to make room in the folder for the whole game (I was pushing very close to 20 MB).  \r\n\r\nBut here's a sample of an event that get messed up when you upload and try to play ONline.  This is with the command bar NOT selected in \"Interface\" options under the Game (up top of the tree hierarchy).  This code is the Script for a Room description -- it's what fires when you enter the Room:\r\n\r\n```\r\nif (not GetBoolean(treasure, \"victory\") and not this.visited) {\r\n  msg (\"Before you can get a good look, brutish voices assail you and the monsters rough you up, then toss you back out!<br/>\")\r\n  SetObjectFlagOn (clubhouse, \"visited\")\r\n  MakeExitInvisible (opendoor)\r\n  door.isopen = false\r\n  JS.eval(\"$('#endWaitLink').appendTo(getCurrentDiv());\")\r\n  wait {\r\n    MoveObject (player, Abandoned Playground)\r\n  }\r\n}\r\nelse {\r\n  MoveObject (player, dim chamber)\r\n}\r\n```\r\nIf I remember right, putting it above the Wait just did nothing online -- it would hang on that screen until you pressed a button on your keyboard.  So I tried moving the JS line of code INSIDE the Wait (above the \"MoveObject\").  It worked by showing the Continue..., but it bisected the verbiage on the screen, when the monsters in there attacked you on sight (using Pixie's CombatLib).  So yes, that was interfering when the JS was INSIDE the Wait.\r\n\r\nMy other trouble spot came when \"summoning\" the hero to battle.  That WAIT was coded inside an if > foreach > if, so maybe that was interfering?  I can show you this code if that would help...",
      "EditableFormat": "markdown",
      "HTML": "<p>Even though I've got my game up and running satisfactorily, I still want to know WHY this doesn't work, in case I make other games in this mode -- it seems like a basic thing that you should be able to do for click-only text adventures.  I tried this every which way but got nowhere with it online, whereas on my desktop, it's no problem.</p>\n<p>Okay, so I coded over the bits that weren't working, and my previous files got erased to make room in the folder for the whole game (I was pushing very close to 20 MB).</p>\n<p>But here's a sample of an event that get messed up when you upload and try to play ONline.  This is with the command bar NOT selected in \"Interface\" options under the Game (up top of the tree hierarchy).  This code is the Script for a Room description -- it's what fires when you enter the Room:</p>\n<pre><code>if (not GetBoolean(treasure, \"victory\") and not this.visited) {\n  msg (\"Before you can get a good look, brutish voices assail you and the monsters rough you up, then toss you back out!&lt;br/&gt;\")\n  SetObjectFlagOn (clubhouse, \"visited\")\n  MakeExitInvisible (opendoor)\n  door.isopen = false\n  JS.eval(\"$('#endWaitLink').appendTo(getCurrentDiv());\")\n  wait {\n    MoveObject (player, Abandoned Playground)\n  }\n}\nelse {\n  MoveObject (player, dim chamber)\n}\n</code></pre>\n<p>If I remember right, putting it above the Wait just did nothing online -- it would hang on that screen until you pressed a button on your keyboard.  So I tried moving the JS line of code INSIDE the Wait (above the \"MoveObject\").  It worked by showing the Continue..., but it bisected the verbiage on the screen, when the monsters in there attacked you on sight (using Pixie's CombatLib).  So yes, that was interfering when the JS was INSIDE the Wait.</p>\n<p>My other trouble spot came when \"summoning\" the hero to battle.  That WAIT was coded inside an if &gt; foreach &gt; if, so maybe that was interfering?  I can show you this code if that would help...</p>\n\n",
      "PostDate": "2020-06-01T18:16:16.3912546Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7dbfb3b0-7281-4625-b620-f35a9ff5bbd9",
      "UserId": 207026,
      "Username": "Pykrete",
      "AvatarUrl": "https://i.imgur.com/n9Ygszeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh, I have a slightly hacky solution for this that I've been using for a few years, now.\r\n\r\nBefore a wait, I show the command bar. Immediately after, I hide it again.\r\n\r\n```\r\nrequest (Show, \"Command\")\r\nwait {\r\n  request (Hide, \"Command\")\r\n}\r\n```\r\n\r\nOne could probably insert this into the actual wait function somewhere to make it a persistent feature, if you only want to make click-only games like I do.",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh, I have a slightly hacky solution for this that I've been using for a few years, now.</p>\n<p>Before a wait, I show the command bar. Immediately after, I hide it again.</p>\n<pre><code>request (Show, \"Command\")\nwait {\n  request (Hide, \"Command\")\n}\n</code></pre>\n<p>One could probably insert this into the actual wait function somewhere to make it a persistent feature, if you only want to make click-only games like I do.</p>\n\n",
      "PostDate": "2020-06-02T11:46:23.91677Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "96c91f7c-48fb-4b66-b7c5-69846427842a",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That would be my normal suggestion. But in the first post, the OP said they were adding an extra `a id=\"endWaitLink\" onclick=\"endWait();\" class=\"cmdlink\" style=\"display: none\">Continue...`, so I assume they also want to move the continue link to the current position in the output for some reason.\r\n\r\nI believe `request` is deprecated, and should no longer be used. The recommended way to do this would be:\r\n```\r\nJS.uiShow (\"#txtCommandDiv\")\r\nwait {\r\n  JS.uiHide (\"#txtCommandDiv\")\r\n  // whatever else you're doing after the wait\r\n}\r\n```\r\n\r\nAlternatively, you could add a line to the UI Initialisation script:\r\n```\r\n$('#endWaitLink').insertBefore('#txtCommandDiv');\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>That would be my normal suggestion. But in the first post, the OP said they were adding an extra <code>a id=\"endWaitLink\" onclick=\"endWait();\" class=\"cmdlink\" style=\"display: none\"&gt;Continue...</code>, so I assume they also want to move the continue link to the current position in the output for some reason.</p>\n<p>I believe <code>request</code> is deprecated, and should no longer be used. The recommended way to do this would be:</p>\n<pre><code>JS.uiShow (\"#txtCommandDiv\")\nwait {\n  JS.uiHide (\"#txtCommandDiv\")\n  // whatever else you're doing after the wait\n}\n</code></pre>\n<p>Alternatively, you could add a line to the UI Initialisation script:</p>\n<pre><code>$('#endWaitLink').insertBefore('#txtCommandDiv');\n</code></pre>\n\n",
      "PostDate": "2020-06-02T13:53:45.7782179Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
