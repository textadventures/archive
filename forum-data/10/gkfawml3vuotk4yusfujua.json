{
  "Topic": {
    "TopicId": "gkfawml3vuotk4yusfujua",
    "ForumId": "10",
    "Title": "Using the 'popup' command?",
    "LastUpdated": "2020-01-12T03:37:57.1812078Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "633cf034-5d39-4525-a502-378e6e202375",
      "UserId": 454326,
      "Username": "Brian5757",
      "AvatarUrl": "https://secure.gravatar.com/avatar/411c3e8cd4782d4a996f292940a61069?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I came across a popup text command in the help menu (see below), but so far I have not found a way to use this command.\r\nFirst I tried to use it in the 'GameBook' description section as it would be useful for text to pop-up when I click on word links, but so luck so far. Maybe this is for the 'Text adventure' part of Quest, if so then I can't see a way of fitting this into the script.\r\nI'm using Version 5.8 of Quest and it says this command is for Quest 5.7, so if this has not been removed for version 5.8 then this command should be working.\r\n\r\n{popup:text:long text} Displays a link, with the first text (which cannot have text processor directives nested in it). When the player clicks on the link, a pop-up will be displayed, containing the long text. The pop-up will disappear when the long text is clicked on. This can be used with the img command to have an image pop-up.",
      "EditableFormat": "markdown",
      "HTML": "<p>I came across a popup text command in the help menu (see below), but so far I have not found a way to use this command.<br>\nFirst I tried to use it in the 'GameBook' description section as it would be useful for text to pop-up when I click on word links, but so luck so far. Maybe this is for the 'Text adventure' part of Quest, if so then I can't see a way of fitting this into the script.<br>\nI'm using Version 5.8 of Quest and it says this command is for Quest 5.7, so if this has not been removed for version 5.8 then this command should be working.</p>\n<p>{popup:text:long text} Displays a link, with the first text (which cannot have text processor directives nested in it). When the player clicks on the link, a pop-up will be displayed, containing the long text. The pop-up will disappear when the long text is clicked on. This can be used with the img command to have an image pop-up.</p>\n\n",
      "PostDate": "2020-01-12T03:37:57.1812078Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "21671753-657e-46a7-89f2-34362be72259",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "What happens when you try it?\r\n\r\nDoes it just display the text? Does it display the text-processor directive as you wrote it? Does it display nothing at all?\r\n\r\nCan you show an example of how you used it?\r\nAre you using it in a `msg` command, or in the \"text\" section of a gamebook page? (both should work, but it might help to track down the problem).",
      "EditableFormat": "markdown",
      "HTML": "<p>What happens when you try it?</p>\n<p>Does it just display the text? Does it display the text-processor directive as you wrote it? Does it display nothing at all?</p>\n<p>Can you show an example of how you used it?<br>\nAre you using it in a <code>msg</code> command, or in the \"text\" section of a gamebook page? (both should work, but it might help to track down the problem).</p>\n\n",
      "PostDate": "2020-01-12T11:37:47.1158155Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f09935b3-3588-4208-8e59-b2aa3a7efe81",
      "UserId": 454326,
      "Username": "Brian5757",
      "AvatarUrl": "https://secure.gravatar.com/avatar/411c3e8cd4782d4a996f292940a61069?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi mrangel.\r\n\r\nThis is what I type in the description of the GameBook\r\n\r\n{popup Test:Some more text}\r\n\r\nand the  is what is displayed as text when I run the program.\r\n\r\n<script type=\"script\">\r\n      msg (\"{popup Test::Some more text}\")\r\n    </script>\r\n\r\n\r\n\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi mrangel.</p>\n<p>This is what I type in the description of the GameBook</p>\n<p>{popup Test:Some more text}</p>\n<p>and the  is what is displayed as text when I run the program.</p>\n\n\n",
      "PostDate": "2020-01-12T23:21:15.0699043Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1ee122d9-f42b-4b78-a87f-4170695601d1",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> in the description of the GameBook\r\n\r\nThe description of a gamebook is not displayed during the game; it's metadata.\r\n\r\nI assume you mean in the text of a page which is the \"Text\" ot \"Text and Script\" types.\r\n\r\n>     {popup Test:Some more text}\r\n\r\nThe help text says you should put `{popup:text:long text}`.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>in the description of the GameBook</p>\n</blockquote>\n<p>The description of a gamebook is not displayed during the game; it's metadata.</p>\n<p>I assume you mean in the text of a page which is the \"Text\" ot \"Text and Script\" types.</p>\n<blockquote>\n<pre><code>{popup Test:Some more text}\n</code></pre>\n</blockquote>\n<p>The help text says you should put <code>{popup:text:long text}</code>.</p>\n\n",
      "PostDate": "2020-01-13T10:28:37.3631517Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fb9360f9-65bd-45bc-89b8-69dad2501628",
      "UserId": 454326,
      "Username": "Brian5757",
      "AvatarUrl": "https://secure.gravatar.com/avatar/411c3e8cd4782d4a996f292940a61069?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I used the command with Text and Script types and typed in the description\r\n{popup:text:long text}\r\nBut it does not get accepted as a script command. Quest sees it as just text so it displays {popup:text:long text} as part of the text.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I used the command with Text and Script types and typed in the description<br>\n{popup:text:long text}<br>\nBut it does not get accepted as a script command. Quest sees it as just text so it displays {popup:text:long text} as part of the text.</p>\n\n",
      "PostDate": "2020-01-13T23:50:05.8409671Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ad81be8e-03a3-4bef-90a5-8a3c1f13951c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Can you copy and paste the exact text you're using it in? Maybe there's some detail we're missing.\r\n\r\nYou've provided two different examples of what you put in your text; one is correct, the other isn't.\r\n\r\nOr can you share a game that's giving you this problem, so that someone else can see it?\r\n\r\n> But it does not get accepted as a script command.\r\n\r\nIt isn't a script command. It's a text processor command.",
      "EditableFormat": "markdown",
      "HTML": "<p>Can you copy and paste the exact text you're using it in? Maybe there's some detail we're missing.</p>\n<p>You've provided two different examples of what you put in your text; one is correct, the other isn't.</p>\n<p>Or can you share a game that's giving you this problem, so that someone else can see it?</p>\n<blockquote>\n<p>But it does not get accepted as a script command.</p>\n</blockquote>\n<p>It isn't a script command. It's a text processor command.</p>\n\n",
      "PostDate": "2020-01-14T09:55:57.3809979Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "09d425b2-37fe-48f1-a007-3c2455f7f926",
      "UserId": 924,
      "Username": "Pertex",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4cc1e52f99452e841ecf4cbee9eadde9?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "When I try to use {popup:text:long text} in a gamebokk I get the message\r\n\r\nError running script: Error compiling expression 'JSSafe(s1) + GetRandomInt(0, 999999999)': FunctionCallElement: Could find not function 'JSSafe(String)'",
      "EditableFormat": "markdown",
      "HTML": "<p>When I try to use {popup:text:long text} in a gamebokk I get the message</p>\n<p>Error running script: Error compiling expression 'JSSafe(s1) + GetRandomInt(0, 999999999)': FunctionCallElement: Could find not function 'JSSafe(String)'</p>\n\n",
      "PostDate": "2020-01-14T14:49:34.1293601Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c7a1062e-f8e9-42d5-a7c9-a58047ad4037",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, that's more useful.\r\n\r\nIf you include the error message, it's so much easier to come up with a fix.\r\n\r\nCreate a function named `JSSafe` with type \"string\" and a single parameter `s`.\r\nThe script should be:\r\n```\r\n    s = Replace(s, \"\\\"\", \"\")\r\n    s = Replace(s, \"\\'\", \"\")\r\n    s = Replace(s, \" \", \"\")\r\n    s = Replace(s, \".\", \"\")\r\n    s = Replace(s, \",\", \"\")\r\n    s = Replace(s, \"!\", \"\")\r\n    s = Replace(s, \"?\", \"\")\r\n    s = Replace(s, \"-\", \"\")\r\n    s = Replace(s, \"/\", \"\")\r\n    s = Replace(s, \"(\", \"\")\r\n    s = Replace(s, \")\", \"\")\r\n    s = Replace(s, \"$\", \"\")\r\n    s = Replace(s, \"%\", \"\")\r\n    s = Replace(s, \"&\", \"\")\r\n    s = Replace(s, \"*\", \"\")\r\n    s = Replace(s, \"@\", \"\")\r\n    return (s)\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, that's more useful.</p>\n<p>If you include the error message, it's so much easier to come up with a fix.</p>\n<p>Create a function named <code>JSSafe</code> with type \"string\" and a single parameter <code>s</code>.<br>\nThe script should be:</p>\n<pre><code>    s = Replace(s, \"\\\"\", \"\")\n    s = Replace(s, \"\\'\", \"\")\n    s = Replace(s, \" \", \"\")\n    s = Replace(s, \".\", \"\")\n    s = Replace(s, \",\", \"\")\n    s = Replace(s, \"!\", \"\")\n    s = Replace(s, \"?\", \"\")\n    s = Replace(s, \"-\", \"\")\n    s = Replace(s, \"/\", \"\")\n    s = Replace(s, \"(\", \"\")\n    s = Replace(s, \")\", \"\")\n    s = Replace(s, \"$\", \"\")\n    s = Replace(s, \"%\", \"\")\n    s = Replace(s, \"&amp;\", \"\")\n    s = Replace(s, \"*\", \"\")\n    s = Replace(s, \"@\", \"\")\n    return (s)\n</code></pre>\n\n",
      "PostDate": "2020-01-14T17:42:32.3141765Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "aef5a819-be77-4eb9-af91-7bdd3a069c59",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(Though this is a bizarre piece of code in any case; it's inefficient, and doesn't really give any benefits)",
      "EditableFormat": "markdown",
      "HTML": "<p>(Though this is a bizarre piece of code in any case; it's inefficient, and doesn't really give any benefits)</p>\n\n",
      "PostDate": "2020-01-14T17:44:55.2529459Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "20ca27b0-9091-486b-a344-5c8c79320db6",
      "UserId": 454326,
      "Username": "Brian5757",
      "AvatarUrl": "https://secure.gravatar.com/avatar/411c3e8cd4782d4a996f292940a61069?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks mrangel.\r\n\r\nI don't know a lot about functions but hope to experiment with them.\r\n\r\nHow would I call the function JSSafe, is this done from a script or from a command in the description window.\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks mrangel.</p>\n<p>I don't know a lot about functions but hope to experiment with them.</p>\n<p>How would I call the function JSSafe, is this done from a script or from a command in the description window.</p>\n\n",
      "PostDate": "2020-01-14T23:33:25.4855379Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bb332c6e-6924-4a37-94d7-532d7ba074fa",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> How would I call the function JSSafe\r\n\r\nYou don't.\r\nIt's called internally whenever the text processor sees `{popup:`. If the function JSSafe doesn't exist (because it's only available in text adventures by default), the text processor fails to generate the popup.\r\n\r\nIf you create that function, everything else should start working again.\r\n\r\n(I still think that there's no reason for the popup script to use JSSafe… it would be better if that function didn't exist at all. But as long as `ProcessTextCommand_Popup` uses it, copying JSSafe over from the text adventure library is the easiest way to make it work.)",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>How would I call the function JSSafe</p>\n</blockquote>\n<p>You don't.<br>\nIt's called internally whenever the text processor sees <code>{popup:</code>. If the function JSSafe doesn't exist (because it's only available in text adventures by default), the text processor fails to generate the popup.</p>\n<p>If you create that function, everything else should start working again.</p>\n<p>(I still think that there's no reason for the popup script to use JSSafe… it would be better if that function didn't exist at all. But as long as <code>ProcessTextCommand_Popup</code> uses it, copying JSSafe over from the text adventure library is the easiest way to make it work.)</p>\n\n",
      "PostDate": "2020-01-15T00:00:29.746624Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c125d603-9172-4e0a-ab67-f759165d1dec",
      "UserId": 454326,
      "Username": "Brian5757",
      "AvatarUrl": "https://secure.gravatar.com/avatar/411c3e8cd4782d4a996f292940a61069?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "From what I understand.\r\nI click on Functions on the left of the screen (shown in a tree format)\r\nI then click on the + symbol and I'm asked for the name of the function\r\nI type in JSScript\r\nDo you mean set the return type to string?\r\nI'm not certain what to do after that as I can't see anywhere to type in the script  \"s = Replace(\"s\", \"\\\"\", \"\") etc",
      "EditableFormat": "markdown",
      "HTML": "<p>From what I understand.<br>\nI click on Functions on the left of the screen (shown in a tree format)<br>\nI then click on the + symbol and I'm asked for the name of the function<br>\nI type in JSScript<br>\nDo you mean set the return type to string?<br>\nI'm not certain what to do after that as I can't see anywhere to type in the script  \"s = Replace(\"s\", \"\"\", \"\") etc</p>\n\n",
      "PostDate": "2020-01-16T05:46:55.6280442Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "abc9739a-2580-4340-be56-5a04cc8d4cd3",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yes, the name should be JSSafe, return type string.\r\nThere's a list to add parameters to; there should be a single one called `s`.\r\n\r\nThere should be a place within the function to add a script; I'd suggest clicking the code view button so you can just paste in the correct code.",
      "EditableFormat": "markdown",
      "HTML": "<p>Yes, the name should be JSSafe, return type string.<br>\nThere's a list to add parameters to; there should be a single one called <code>s</code>.</p>\n<p>There should be a place within the function to add a script; I'd suggest clicking the code view button so you can just paste in the correct code.</p>\n\n",
      "PostDate": "2020-01-16T09:14:04.1099207Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "94dc7287-149a-47ce-b827-b9ad7650ebe9",
      "UserId": 454326,
      "Username": "Brian5757",
      "AvatarUrl": "https://secure.gravatar.com/avatar/411c3e8cd4782d4a996f292940a61069?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks mrangel.\r\nI finally got it working.\r\n\r\nDoes having to enter the extra function code mean that there is an error in Quest?\r\nMaybe in the next version the function code will be part of the Quest program.\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks mrangel.<br>\nI finally got it working.</p>\n<p>Does having to enter the extra function code mean that there is an error in Quest?<br>\nMaybe in the next version the function code will be part of the Quest program.</p>\n\n",
      "PostDate": "2020-01-17T05:29:30.6486533Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "accedebb-7f07-49c1-bd48-ac5b1522c2f8",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Does having to enter the extra function code mean that there is an error in Quest?\r\nMaybe in the next version the function code will be part of the Quest program.\r\n\r\nI think so.\r\n\r\nWe've come across this a few times; functions that used to be text-adventure-only have been copied across to GamebookCore, but  someone's missed copying another function that they rely on internally.\r\n\r\nUsually these things get fixed once they're discovered.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Does having to enter the extra function code mean that there is an error in Quest?<br>\nMaybe in the next version the function code will be part of the Quest program.</p>\n</blockquote>\n<p>I think so.</p>\n<p>We've come across this a few times; functions that used to be text-adventure-only have been copied across to GamebookCore, but  someone's missed copying another function that they rely on internally.</p>\n<p>Usually these things get fixed once they're discovered.</p>\n\n",
      "PostDate": "2020-01-17T11:25:20.9586687Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
