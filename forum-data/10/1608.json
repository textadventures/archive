{
  "Topic": {
    "TopicId": "1608",
    "ForumId": "10",
    "Title": "Saving a Game ($loadmethod$)",
    "LastUpdated": "2007-03-07T23:38:05+00:00",
    "ReplyCount": 26
  },
  "Posts": [
    {
      "PostId": "12716",
      "UserId": 0,
      "Username": "witch wyzwurd",
      "UserAvatar": null,
      "UserGravatar": "05e3fb359c040589d773db02decd0770",
      "EditableText": "First of all, I understand there's the $loadmethod$ funtion, and it has two values, but how are thing saved?  Nowhere can I find this explained, not even in the 4.0 Tutorial.\r\n\r\nI made a very simple test to learn what can be saved:\r\n\r\n-------------------\r\nif flag &quot;Name&quot; not set then\r\nprint &quot;What is your name?&quot;\r\nenter next command into &quot;Saved_Name&quot; string variable\r\nset flag &quot;Name&quot; on\r\n-------------------\r\nprint &quot;Your name is #Saved_Name#&quot;\r\n-------------------\r\n\r\nHow do I use $loadmethod$ to record:\r\nIf the flag &quot;Name&quot; is set?\r\nThe name of the player in #Saved_Name#?\r\n\r\nAnd what kind of stuff can be saved (variables, flags, anything quest.x)?",
      "EditableFormat": "bbcode",
      "HTML": "First of all, I understand there's the $loadmethod$ funtion, and it has two values, but how are thing saved?  Nowhere can I find this explained, not even in the 4.0 Tutorial.<br/><br/>I made a very simple test to learn what can be saved:<br/><br/>-------------------<br/>if flag &quot;Name&quot; not set then<br/>print &quot;What is your name?&quot;<br/>enter next command into &quot;Saved_Name&quot; string variable<br/>set flag &quot;Name&quot; on<br/>-------------------<br/>print &quot;Your name is #Saved_Name#&quot;<br/>-------------------<br/><br/>How do I use $loadmethod$ to record:<br/>If the flag &quot;Name&quot; is set?<br/>The name of the player in #Saved_Name#?<br/><br/>And what kind of stuff can be saved (variables, flags, anything quest.x)?",
      "PostDate": "2007-02-16T07:51:53+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12721",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "You don't need to worry about what is saved - [i:1v02rd50]everything[/i:1v02rd50] is saved when you save a game.\r\n\r\nIn your example, if the player saves the game after entering their name, then the next time they load that game (from their QSG savegame file) the Saved_Name string variable will contain their name, and the &quot;Name&quot; flag will be set.\r\n\r\nYou use $loadmethod$ to determine whether the player loaded the game from scratch, or if they loaded from a QSG savegame file. This used to be useful in your game start script - you could check this function to determine whether to show a long intro sequence. It's not really needed now though, as from v4.0 the game start script only runs when the game is run for the first time - it does not run again when loaded from a QSG savegame file.",
      "EditableFormat": "bbcode",
      "HTML": "You don't need to worry about what is saved - <span style=\"font-style:italic;\">everything</span> is saved when you save a game.<br/><br/>In your example, if the player saves the game after entering their name, then the next time they load that game (from their QSG savegame file) the Saved_Name string variable will contain their name, and the &quot;Name&quot; flag will be set.<br/><br/>You use $loadmethod$ to determine whether the player loaded the game from scratch, or if they loaded from a QSG savegame file. This used to be useful in your game start script - you could check this function to determine whether to show a long intro sequence. It's not really needed now though, as from v4.0 the game start script only runs when the game is run for the first time - it does not run again when loaded from a QSG savegame file.",
      "PostDate": "2007-02-16T11:23:33+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12724",
      "UserId": 0,
      "Username": "witch wyzwurd",
      "UserAvatar": null,
      "UserGravatar": "05e3fb359c040589d773db02decd0770",
      "EditableText": "yah, but Alex, I ran my test, entered my name, then saved game as a qsg file.  I even compiled the program into a CAS file for extra precautions.  I opened the saved qsg file (not the asl or cas file) and it started with the &quot;what's your name&quot; question.  This should not've happened considering the flag was already turned on... right?\r\n\r\nI'm telling you Alex, the code above is all there is to it.  A very simple conditional statement followed by a print variable statement.  I've rechecked my code, and everything is right.  I just retyped my code to make doubly sure.  Still, no dice... ?  :{  Ok, I even added a conditional to say if flag is set then print..., just in case that had to be defined.  Still no dice.  Screw it, here's my full code (Flag name/variable name changed when I retyped. Also extended a bit):\r\n[quote:2pmorwz5]\n' Created with QDK Pro 3.53\n\ndefine game &lt;&gt;\n\tasl-version &lt;350&gt;\n\tgametype singleplayer\n\tstart &lt;Test Room&gt;\n\tgame info &lt;Created with QDK Pro 3.53&gt;\nend define\n\ndefine synonyms\nend define\n\ndefine room &lt;Test Room&gt;\n\tdescription {\n\t\tclear\n\t\tif flag &lt;Name_Run&gt; then msg &lt;I know your name is #Name# already!&gt;\n\t\tif not flag &lt;Name_Run&gt; then {\n\t\t\tmsg &lt;What is your name?&gt;\n\t\t\tenter &lt;Name&gt;\n\t\t\tmsg &lt;Your name is: #Name#&gt;\n\t\t\tflag on &lt;Name_Run&gt;\n\t\t}\n\t\tif ask &lt;Go again?&gt; then goto &lt;Test Room&gt;\n\t}\nend define\n\ndefine text &lt;intro&gt;\n\nend define\n\ndefine text &lt;win&gt;\n\nend define\n\ndefine text &lt;lose&gt;\n\nend define[/quote:2pmorwz5]",
      "EditableFormat": "bbcode",
      "HTML": "yah, but Alex, I ran my test, entered my name, then saved game as a qsg file.  I even compiled the program into a CAS file for extra precautions.  I opened the saved qsg file (not the asl or cas file) and it started with the &quot;what's your name&quot; question.  This should not've happened considering the flag was already turned on... right?<br/><br/>I'm telling you Alex, the code above is all there is to it.  A very simple conditional statement followed by a print variable statement.  I've rechecked my code, and everything is right.  I just retyped my code to make doubly sure.  Still, no dice... ?  :{  Ok, I even added a conditional to say if flag is set then print..., just in case that had to be defined.  Still no dice.  Screw it, here's my full code (Flag name/variable name changed when I retyped. Also extended a bit):<br/><blockquote><p><br/>' Created with QDK Pro 3.53<br/><br/>define game &lt;&gt;<br/>\tasl-version &lt;350&gt;<br/>\tgametype singleplayer<br/>\tstart &lt;Test Room&gt;<br/>\tgame info &lt;Created with QDK Pro 3.53&gt;<br/>end define<br/><br/>define synonyms<br/>end define<br/><br/>define room &lt;Test Room&gt;<br/>\tdescription {<br/>\t\tclear<br/>\t\tif flag &lt;Name_Run&gt; then msg &lt;I know your name is #Name# already!&gt;<br/>\t\tif not flag &lt;Name_Run&gt; then {<br/>\t\t\tmsg &lt;What is your name?&gt;<br/>\t\t\tenter &lt;Name&gt;<br/>\t\t\tmsg &lt;Your name is: #Name#&gt;<br/>\t\t\tflag on &lt;Name_Run&gt;<br/>\t\t}<br/>\t\tif ask &lt;Go again?&gt; then goto &lt;Test Room&gt;<br/>\t}<br/>end define<br/><br/>define text &lt;intro&gt;<br/><br/>end define<br/><br/>define text &lt;win&gt;<br/><br/>end define<br/><br/>define text &lt;lose&gt;<br/><br/>end define</p></blockquote>",
      "PostDate": "2007-02-16T11:59:59+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12729",
      "UserId": 0,
      "Username": "Cryophile",
      "UserAvatar": null,
      "UserGravatar": "cbb093447274bd6d64613a0a60a7ab52",
      "EditableText": "Only code in the Start Script is not repeated when loaded. In your example the player is asked the question outside of that, which will be repeated.",
      "EditableFormat": "bbcode",
      "HTML": "Only code in the Start Script is not repeated when loaded. In your example the player is asked the question outside of that, which will be repeated.",
      "PostDate": "2007-02-16T14:46:11+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12734",
      "UserId": 0,
      "Username": "paul_one",
      "UserAvatar": null,
      "UserGravatar": "fef8a1875028f4300bb683f29c432894",
      "EditableText": "Can't see anything wrong with the code...\r\n\r\nThen again, 'not' is a funny one.\r\nInstead of having two if's, try putting the other part in the &quot;else&quot; part of the conditional.",
      "EditableFormat": "bbcode",
      "HTML": "Can't see anything wrong with the code...<br/><br/>Then again, 'not' is a funny one.<br/>Instead of having two if's, try putting the other part in the &quot;else&quot; part of the conditional.",
      "PostDate": "2007-02-16T18:59:41+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12738",
      "UserId": 0,
      "Username": "witch wyzwurd",
      "UserAvatar": null,
      "UserGravatar": "05e3fb359c040589d773db02decd0770",
      "EditableText": "[quote=&quot;S1aY3R&quot;:1rt3l69m]Only code in the Start Script is not repeated when loaded. In your example the player is asked the question outside of that, which will be repeated.[/quote:1rt3l69m]That makes no sense to me, S1ay3r.  What you're telling me is that every part of a large game must be included in a startscript for it not to be repeated then?  How about flags, etc. throughout a large game? There'd be no code in define rooms and define objects then, since it all would be in define game (if I'm understanding you correctly, else...). Plus if I put &quot;flag not on&quot; in startscript, which will cause it to process first and turn flag on when player enters name, then when Quest reads the room script, it will process the &quot;flag on&quot; script without a break.  That can't be it. \n\nIs there concurrence with S1ay3r's synopsis?\n\n[b:1rt3l69m]By the way, I'm testing on 3.53 still, because I'm having problems with 4.0 trial-version as mentioned in other post, and I won't use it until problems are understood and/or solved.[/b:1rt3l69m]\n\n[quote:1rt3l69m]Instead of having two if's, try putting the other part in the &quot;else&quot; part of the conditional.[/quote:1rt3l69m]I do my best to stay away from &quot;Else&quot; statements, since some of my conditionals can get rather deep.  I've found that by making it logically simple and easy for me to read, that I'll have fewer screw-ups.  Plus, this can't be the problem, which I'm sure you know.  Quest understands my code as is.\r\n\r\nI just tried using an &quot;Else&quot; statement, using the else statement in define game, not using else statement but using startscript... nothing worked.  My program runs fine, just doesn't save anything.  Still need help...",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>S1aY3R wrote:</cite>Only code in the Start Script is not repeated when loaded. In your example the player is asked the question outside of that, which will be repeated.</blockquote>That makes no sense to me, S1ay3r.  What you're telling me is that every part of a large game must be included in a startscript for it not to be repeated then?  How about flags, etc. throughout a large game? There'd be no code in define rooms and define objects then, since it all would be in define game (if I'm understanding you correctly, else...). Plus if I put &quot;flag not on&quot; in startscript, which will cause it to process first and turn flag on when player enters name, then when Quest reads the room script, it will process the &quot;flag on&quot; script without a break.  That can't be it. <br/><br/>Is there concurrence with S1ay3r's synopsis?<br/><br/><span style=\"font-weight:bold;\">By the way, I'm testing on 3.53 still, because I'm having problems with 4.0 trial-version as mentioned in other post, and I won't use it until problems are understood and/or solved.</span><br/><br/><blockquote><p>Instead of having two if's, try putting the other part in the &quot;else&quot; part of the conditional.</p></blockquote>I do my best to stay away from &quot;Else&quot; statements, since some of my conditionals can get rather deep.  I've found that by making it logically simple and easy for me to read, that I'll have fewer screw-ups.  Plus, this can't be the problem, which I'm sure you know.  Quest understands my code as is.<br/><br/>I just tried using an &quot;Else&quot; statement, using the else statement in define game, not using else statement but using startscript... nothing worked.  My program runs fine, just doesn't save anything.  Still need help...",
      "PostDate": "2007-02-16T21:24:46+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12744",
      "UserId": 0,
      "Username": "Cryophile",
      "UserAvatar": null,
      "UserGravatar": "cbb093447274bd6d64613a0a60a7ab52",
      "EditableText": "It seems my cell phone is cutting off lines, because the ends of most paragraphs are missing. Judging from what I could read it looked like you were asking a completely different question. What I said before is completely irrelevant to the situation at hand. It looks to me like your code should work.",
      "EditableFormat": "bbcode",
      "HTML": "It seems my cell phone is cutting off lines, because the ends of most paragraphs are missing. Judging from what I could read it looked like you were asking a completely different question. What I said before is completely irrelevant to the situation at hand. It looks to me like your code should work.",
      "PostDate": "2007-02-17T04:50:35+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12748",
      "UserId": 0,
      "Username": "witch wyzwurd",
      "UserAvatar": null,
      "UserGravatar": "05e3fb359c040589d773db02decd0770",
      "EditableText": "I agree, as far as my knowledge goes on this subject, but it doesn't.  I really need this figured out before I finish my game.  I don't want to program thousands of lines of code to find out Quest can't save my game correctly.  Any other ideas?  Has anyone duplicated my code and tried it?",
      "EditableFormat": "bbcode",
      "HTML": "I agree, as far as my knowledge goes on this subject, but it doesn't.  I really need this figured out before I finish my game.  I don't want to program thousands of lines of code to find out Quest can't save my game correctly.  Any other ideas?  Has anyone duplicated my code and tried it?",
      "PostDate": "2007-02-17T14:38:03+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12749",
      "UserId": 0,
      "Username": "paul_one",
      "UserAvatar": null,
      "UserGravatar": "fef8a1875028f4300bb683f29c432894",
      "EditableText": "Actually - I think it's the way Quest loads up files etc..\r\n\r\nIt appears to load up the game and put you in the start room - THEN load up the saved data..\r\n\r\nOn Q4 you load it up and it asks for the name - save it, and then load it up and you get asked the question again... after clicking the 'no' though it immediately produced the &quot;I already know your name is: jon&quot; and appears to seem like it's loaded the data from the file. As if the first question was never asked.",
      "EditableFormat": "bbcode",
      "HTML": "Actually - I think it's the way Quest loads up files etc..<br/><br/>It appears to load up the game and put you in the start room - THEN load up the saved data..<br/><br/>On Q4 you load it up and it asks for the name - save it, and then load it up and you get asked the question again... after clicking the 'no' though it immediately produced the &quot;I already know your name is: jon&quot; and appears to seem like it's loaded the data from the file. As if the first question was never asked.",
      "PostDate": "2007-02-17T22:40:16+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12760",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "Tr0n is correct - it's a bug in Quest.\r\n\r\nQuest is first initialising the game, and then applying the data it loads from the QSG file. Unfortunately, as part of initialising the game, it initialises the start room, which then causes the flag check script to be run. This happens [i:6etg7xun]before[/i:6etg7xun] Quest has actually loaded the data from the QSG file.\r\n\r\nIf you remove the &quot;clear&quot; script command you will see that it completes loading the QSG file after it has asked you the question.\r\n\r\nI will add this to my &quot;to do&quot; list.",
      "EditableFormat": "bbcode",
      "HTML": "Tr0n is correct - it's a bug in Quest.<br/><br/>Quest is first initialising the game, and then applying the data it loads from the QSG file. Unfortunately, as part of initialising the game, it initialises the start room, which then causes the flag check script to be run. This happens <span style=\"font-style:italic;\">before</span> Quest has actually loaded the data from the QSG file.<br/><br/>If you remove the &quot;clear&quot; script command you will see that it completes loading the QSG file after it has asked you the question.<br/><br/>I will add this to my &quot;to do&quot; list.",
      "PostDate": "2007-02-19T13:46:36+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12763",
      "UserId": 0,
      "Username": "steve the gaming guy",
      "UserAvatar": null,
      "UserGravatar": "6577a0affcb6ea711c75baf052ffd08a",
      "EditableText": "That sounds logical.\r\n\r\nI had lots of things going on with my KQ5 game that I have already submitted.  My beta-tester gave me some good tips on how to stop procedures from running when you restart the game.  \r\n\r\nI can't remember how it's done off the top of my head but if you care to review the code, my game is available....",
      "EditableFormat": "bbcode",
      "HTML": "That sounds logical.<br/><br/>I had lots of things going on with my KQ5 game that I have already submitted.  My beta-tester gave me some good tips on how to stop procedures from running when you restart the game.  <br/><br/>I can't remember how it's done off the top of my head but if you care to review the code, my game is available....",
      "PostDate": "2007-02-20T19:27:53+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12771",
      "UserId": 0,
      "Username": "witch wyzwurd",
      "UserAvatar": null,
      "UserGravatar": "05e3fb359c040589d773db02decd0770",
      "EditableText": "Ok.  Thanks.  Steve, thanks for your help.  I currently don't have access to the internet, except here at the library, and there's a time limit.  If you could supply a brief example, if time permits, I'd appreciate it.  I'll look into your code in short bursts from time to time.\r\n\r\nAlex, when would the change be made.  Any idea?  I still have awhile to go on my game.\r\n\r\nAlso, most likely I'll be getting a new computer that'll probably have Vista on it.  I saw on the Quest page that it's Vista compatible.  Is it fully compatible then?\r\n\r\nAnd if I skip out on 4.0 for now, does my Quest savings roll over to the next version of Quest 4.x, or even 5.x?",
      "EditableFormat": "bbcode",
      "HTML": "Ok.  Thanks.  Steve, thanks for your help.  I currently don't have access to the internet, except here at the library, and there's a time limit.  If you could supply a brief example, if time permits, I'd appreciate it.  I'll look into your code in short bursts from time to time.<br/><br/>Alex, when would the change be made.  Any idea?  I still have awhile to go on my game.<br/><br/>Also, most likely I'll be getting a new computer that'll probably have Vista on it.  I saw on the Quest page that it's Vista compatible.  Is it fully compatible then?<br/><br/>And if I skip out on 4.0 for now, does my Quest savings roll over to the next version of Quest 4.x, or even 5.x?",
      "PostDate": "2007-02-21T16:44:42+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12773",
      "UserId": 0,
      "Username": "Freak",
      "UserAvatar": null,
      "UserGravatar": "325ed9ac125e00c9937be0d3aea0916d",
      "EditableText": "What sort of changes will you be making?",
      "EditableFormat": "bbcode",
      "HTML": "What sort of changes will you be making?",
      "PostDate": "2007-02-21T17:00:33+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12774",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "I don't know when I'll be releasing the next version of Quest. There will probably be a v4.01 released fairly soon, as I have had a few bugs reported which it would be good to fix before ploughing on with a more major version.\r\n\r\nI tested Quest and QDK on a beta version of Vista and they worked correctly, apart from some minor display problems. I'll be doing more testing on the final version of Vista in the near future.\r\n\r\nYes, you will still be entitled to purchase Quest Pro 4.x at the upgrade price if you are a registered user of Quest Pro 3.x. I don't know what the situation will be if/when Quest 5 comes along - I haven't made any decisions about that at all yet.\r\n\r\nThere will probably be a Quest 4.1 release in a few months' time, though again I've not made many decisions about what will be included in that (apart from having better compatibility with screen reading software such as JAWS).",
      "EditableFormat": "bbcode",
      "HTML": "I don't know when I'll be releasing the next version of Quest. There will probably be a v4.01 released fairly soon, as I have had a few bugs reported which it would be good to fix before ploughing on with a more major version.<br/><br/>I tested Quest and QDK on a beta version of Vista and they worked correctly, apart from some minor display problems. I'll be doing more testing on the final version of Vista in the near future.<br/><br/>Yes, you will still be entitled to purchase Quest Pro 4.x at the upgrade price if you are a registered user of Quest Pro 3.x. I don't know what the situation will be if/when Quest 5 comes along - I haven't made any decisions about that at all yet.<br/><br/>There will probably be a Quest 4.1 release in a few months' time, though again I've not made many decisions about what will be included in that (apart from having better compatibility with screen reading software such as JAWS).",
      "PostDate": "2007-02-21T18:03:07+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12784",
      "UserId": 0,
      "Username": "Freak",
      "UserAvatar": null,
      "UserGravatar": "325ed9ac125e00c9937be0d3aea0916d",
      "EditableText": "Rephrase:  To fix that problem, what existing features are likely to be implemented differently, as opposed to entirely new features?",
      "EditableFormat": "bbcode",
      "HTML": "Rephrase:  To fix that problem, what existing features are likely to be implemented differently, as opposed to entirely new features?",
      "PostDate": "2007-02-22T13:18:33+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12787",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "I haven't looked into it fully, but it should hopefully just be a matter of not launching the start room before the QSG load has finished.",
      "EditableFormat": "bbcode",
      "HTML": "I haven't looked into it fully, but it should hopefully just be a matter of not launching the start room before the QSG load has finished.",
      "PostDate": "2007-02-22T14:14:32+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12792",
      "UserId": 0,
      "Username": "Freak",
      "UserAvatar": null,
      "UserGravatar": "325ed9ac125e00c9937be0d3aea0916d",
      "EditableText": "Grrr... I had worked out a way to clean up the main event loop of Geas, that depended on a particular assumption, then I noticed that there was ONE way that assumption could fail, and then I checked it against the runner, and found that Quest doesn't even handle the case consistently.",
      "EditableFormat": "bbcode",
      "HTML": "Grrr... I had worked out a way to clean up the main event loop of Geas, that depended on a particular assumption, then I noticed that there was ONE way that assumption could fail, and then I checked it against the runner, and found that Quest doesn't even handle the case consistently.",
      "PostDate": "2007-02-22T18:05:45+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12793",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "Not quite sure what you mean - what's not consistent? What assumption did you make that could fail?",
      "EditableFormat": "bbcode",
      "HTML": "Not quite sure what you mean - what's not consistent? What assumption did you make that could fail?",
      "PostDate": "2007-02-22T18:10:39+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12800",
      "UserId": 0,
      "Username": "witch wyzwurd",
      "UserAvatar": null,
      "UserGravatar": "05e3fb359c040589d773db02decd0770",
      "EditableText": "Thanks for the response Alex.  It's exciting to watch Quest grow.  Glad to be a part of it.  Thanks.",
      "EditableFormat": "bbcode",
      "HTML": "Thanks for the response Alex.  It's exciting to watch Quest grow.  Glad to be a part of it.  Thanks.",
      "PostDate": "2007-02-22T19:35:54+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12801",
      "UserId": 0,
      "Username": "Freak",
      "UserAvatar": null,
      "UserGravatar": "325ed9ac125e00c9937be0d3aea0916d",
      "EditableText": "My assumption was that the &quot;read ASL / CAS file &amp; initialize game state&quot; was entirely non-interactive.\r\n\r\nVariables within an object property evaluated at load-time?  No problem.  What if it contains a function call?  That could potentially do anything (like call 'ask', 'enter', or 'select')!  Testing... functions are loaded after all the game / rooms / objects are evaluated.  No problem.  What if...\r\n\r\nWhere this failed was that an ASL file could have something like\r\n\r\n[code:bf2fi9uu]\ndefine object &#46;&#46;&#46;\n    examine &lt;$getobjectname&#40;&#46;&#46;&#46;&#41;$&gt;\nend define\n[/code:bf2fi9uu]\r\n\r\nwhere the argument to the getobjectname is ambiguous in terms of objects defined above it.  That will cause it to show a disambiguation prompt at load-time.\r\n\r\nWhat's really strange is that if you type &quot;restart&quot;, then it won't run those functions, even though it does reload the file.  (It'll put a &quot;!&quot; in the examine property.)",
      "EditableFormat": "bbcode",
      "HTML": "My assumption was that the &quot;read ASL / CAS file &amp; initialize game state&quot; was entirely non-interactive.<br/><br/>Variables within an object property evaluated at load-time?  No problem.  What if it contains a function call?  That could potentially do anything (like call 'ask', 'enter', or 'select')!  Testing... functions are loaded after all the game / rooms / objects are evaluated.  No problem.  What if...<br/><br/>Where this failed was that an ASL file could have something like<br/><br/><pre><code><br/>define object &#46;&#46;&#46;<br/>    examine &lt;$getobjectname&#40;&#46;&#46;&#46;&#41;$&gt;<br/>end define<br/></code></pre><br/><br/>where the argument to the getobjectname is ambiguous in terms of objects defined above it.  That will cause it to show a disambiguation prompt at load-time.<br/><br/>What's really strange is that if you type &quot;restart&quot;, then it won't run those functions, even though it does reload the file.  (It'll put a &quot;!&quot; in the examine property.)",
      "PostDate": "2007-02-22T19:41:17+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12808",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "Interesting. The intention is that reading an ASL/CAS/QSG [i:12bhlt9c]should[/i:12bhlt9c] be non-interactive.\r\n\r\nThe specific bug that we're talking about in this thread occurs because when Quest loads a QSG, it:\r\n\r\n1. reads the original ASL/CAS\r\n2. it then applies the QSG data\r\n\r\nNow when performing action 1 above, it (erroneously) calls up the ASL/CAS start room, thereby causing any &quot;script&quot; tag (&quot;When the player enters the room&quot; script) to be run. If this contains an interactive script command, it will halt the loading process until the player answers.\r\n\r\nThe fix for this will be for Quest to not launch the ASL/CAS start room when it is loading a QSG.\r\n\r\nYou bring up an interesting question regarding object tags that include function calls. This will require separate investigation. I think it is obscure enough not to cause significant problems for most games, and those games that do want to call a function from an object tag should be doing so within a script anyway - in your example, the &quot;examine&quot; tag should be something like\r\n\r\n[code:12bhlt9c]\nexamine msg &lt;$getobjectname&#40;&#46;&#46;&#46;&#41;$&gt; \n[/code:12bhlt9c]\r\n\r\nThis will avoid problems with Quest trying to evaluate the function when loading the game.",
      "EditableFormat": "bbcode",
      "HTML": "Interesting. The intention is that reading an ASL/CAS/QSG <span style=\"font-style:italic;\">should</span> be non-interactive.<br/><br/>The specific bug that we're talking about in this thread occurs because when Quest loads a QSG, it:<br/><br/>1. reads the original ASL/CAS<br/>2. it then applies the QSG data<br/><br/>Now when performing action 1 above, it (erroneously) calls up the ASL/CAS start room, thereby causing any &quot;script&quot; tag (&quot;When the player enters the room&quot; script) to be run. If this contains an interactive script command, it will halt the loading process until the player answers.<br/><br/>The fix for this will be for Quest to not launch the ASL/CAS start room when it is loading a QSG.<br/><br/>You bring up an interesting question regarding object tags that include function calls. This will require separate investigation. I think it is obscure enough not to cause significant problems for most games, and those games that do want to call a function from an object tag should be doing so within a script anyway - in your example, the &quot;examine&quot; tag should be something like<br/><br/><pre><code><br/>examine msg &lt;$getobjectname&#40;&#46;&#46;&#46;&#41;$&gt; <br/></code></pre><br/><br/>This will avoid problems with Quest trying to evaluate the function when loading the game.",
      "PostDate": "2007-02-22T20:52:52+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12809",
      "UserId": 0,
      "Username": "witch wyzwurd",
      "UserAvatar": null,
      "UserGravatar": "05e3fb359c040589d773db02decd0770",
      "EditableText": "Alex, are you saying that it's only the Start Room which causes the malfunction?  Are you saying that data (flags, variables, etc.) in any other room besides the Start Room shall be saved?  Does this mean that a saved game runs the Sart Room everytime it's loaded up?\r\n\r\nI'll test my question on my own game, since the Start Room doesn't have any data to save.  But answer my questions anyways since I might not get to my game before you answer.",
      "EditableFormat": "bbcode",
      "HTML": "Alex, are you saying that it's only the Start Room which causes the malfunction?  Are you saying that data (flags, variables, etc.) in any other room besides the Start Room shall be saved?  Does this mean that a saved game runs the Sart Room everytime it's loaded up?<br/><br/>I'll test my question on my own game, since the Start Room doesn't have any data to save.  But answer my questions anyways since I might not get to my game before you answer.",
      "PostDate": "2007-02-22T20:58:46+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12812",
      "UserId": 0,
      "Username": "Freak",
      "UserAvatar": null,
      "UserGravatar": "325ed9ac125e00c9937be0d3aea0916d",
      "EditableText": "The problem is that, as far as distribution formats go, anything not explicitly illegal is valid, and must be supported.\r\n\r\n(And I take a strict definition of &quot;illegal&quot;.  If the runner will load it, it's legal.)\r\n\r\nIf the Quest runner allows that code, whether it should have been written to use a script, then Geas will be written to get the same result.",
      "EditableFormat": "bbcode",
      "HTML": "The problem is that, as far as distribution formats go, anything not explicitly illegal is valid, and must be supported.<br/><br/>(And I take a strict definition of &quot;illegal&quot;.  If the runner will load it, it's legal.)<br/><br/>If the Quest runner allows that code, whether it should have been written to use a script, then Geas will be written to get the same result.",
      "PostDate": "2007-02-22T21:11:43+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12813",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "[quote:35k7i8en]\nAlex, are you saying that it's only the Start Room which causes the malfunction? Are you saying that data (flags, variables, etc.) in any other room besides the Start Room shall be saved? Does this mean that a saved game runs the Sart Room everytime it's loaded up? \n[/quote:35k7i8en]\r\n\r\n[i:35k7i8en]All[/i:35k7i8en] the data is saved, the problem is the order in which it's loaded.\r\n\r\nYou only get the problem because of the script in the Start Room. If the script was in a different room, you wouldn't get the problem.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><p><br/>Alex, are you saying that it's only the Start Room which causes the malfunction? Are you saying that data (flags, variables, etc.) in any other room besides the Start Room shall be saved? Does this mean that a saved game runs the Sart Room everytime it's loaded up? <br/></p></blockquote><br/><br/><span style=\"font-style:italic;\">All</span> the data is saved, the problem is the order in which it's loaded.<br/><br/>You only get the problem because of the script in the Start Room. If the script was in a different room, you wouldn't get the problem.",
      "PostDate": "2007-02-22T21:18:08+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12829",
      "UserId": 0,
      "Username": "witch wyzwurd",
      "UserAvatar": null,
      "UserGravatar": "05e3fb359c040589d773db02decd0770",
      "EditableText": "Ok.  Yeah!  I'm still yet to check how the save command works with my game, but if what you say is completely true, and I'm sure it is, then I can easily work around that.  Thanks!",
      "EditableFormat": "bbcode",
      "HTML": "Ok.  Yeah!  I'm still yet to check how the save command works with my game, but if what you say is completely true, and I'm sure it is, then I can easily work around that.  Thanks!",
      "PostDate": "2007-02-23T19:19:07+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "12998",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "This problem is now fixed in Quest v4.01, which will be released soon.\r\n\r\nThere were in fact two bugs here:\r\n\r\n1. Quest was launching the start room as part of the QSG loading process, as previously discussed. This no longer occurs; instead Quest simply launches the player's current room at the end of loading the QSG.\r\n2. When a property or flag was applied as part of the start room's &quot;when the player enters the room&quot; script, that data was not written to the QSG file.\r\n\r\nBoth of these problems have now been addressed for v4.01.",
      "EditableFormat": "bbcode",
      "HTML": "This problem is now fixed in Quest v4.01, which will be released soon.<br/><br/>There were in fact two bugs here:<br/><br/>1. Quest was launching the start room as part of the QSG loading process, as previously discussed. This no longer occurs; instead Quest simply launches the player's current room at the end of loading the QSG.<br/>2. When a property or flag was applied as part of the start room's &quot;when the player enters the room&quot; script, that data was not written to the QSG file.<br/><br/>Both of these problems have now been addressed for v4.01.",
      "PostDate": "2007-03-07T19:50:22+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "13005",
      "UserId": 0,
      "Username": "witch wyzwurd",
      "UserAvatar": null,
      "UserGravatar": "05e3fb359c040589d773db02decd0770",
      "EditableText": "Totally cool!",
      "EditableFormat": "bbcode",
      "HTML": "Totally cool!",
      "PostDate": "2007-03-07T23:38:05+00:00",
      "LastEditDate": null
    }
  ]
}
