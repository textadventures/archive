{
  "Topic": {
    "TopicId": "w04unjfypkwt-qz7qd2rlg",
    "ForumId": "10",
    "Title": "Menu Choices Not Always Working ??",
    "LastUpdated": "2021-10-16T18:02:58.499046Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "7ec40c7d-d405-41fd-a4e9-4f7aae415607",
      "UserId": 452476,
      "Username": "Athslade",
      "AvatarUrl": "https://secure.gravatar.com/avatar/2b4c42bd9abf2d6754ca4a24cab8cd7d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I am building the startup menus for a new story / game. The following menu and all of its options work just fine\r\n\r\n```options = Split(\"Help;Synopsis;I Got This<br/>\", \";\")\r\nShowMenu (\"Info\", options, true) {\r\n  switch (result) {\r\n    case (\"Help\") {\r\n      MoveObject (player, Commands)\r\n    }\r\n    case (\"I Got This\") {\r\n      MoveObjectHere (player)\r\n    }\r\n    case (\"Synopsis\") {\r\n      MoveObject (player, Premise)\r\n    }\r\n  }\r\n}\r\n```\r\nWhen I run the following menu only the first option works, the second option returns no response\r\n```gender = Split(\"Male;Female<br/>\", \";\")\r\nShowMenu (\"<br/>What is your gender?<br/>\", gender, false) {\r\n  switch (result) {\r\n    case (\"Male\") {\r\n      SetObjectFlagOn (player, \"Sex_1\")\r\n    }\r\n    case (\"Female\") {\r\n      SetObjectFlagOn (player, \"Sex_2\")\r\n    }\r\n  }\r\n```\r\nI'm not sure what the difference is. The program added the \"\" on the second menu options but it did not for the first menu options. Any help figuring this out will be much appreciated.",
      "EditableFormat": "markdown",
      "HTML": "<p>I am building the startup menus for a new story / game. The following menu and all of its options work just fine</p>\n<pre><code>ShowMenu (\"Info\", options, true) {\n  switch (result) {\n    case (\"Help\") {\n      MoveObject (player, Commands)\n    }\n    case (\"I Got This\") {\n      MoveObjectHere (player)\n    }\n    case (\"Synopsis\") {\n      MoveObject (player, Premise)\n    }\n  }\n}\n</code></pre>\n<p>When I run the following menu only the first option works, the second option returns no response</p>\n<pre><code>ShowMenu (\"&lt;br/&gt;What is your gender?&lt;br/&gt;\", gender, false) {\n  switch (result) {\n    case (\"Male\") {\n      SetObjectFlagOn (player, \"Sex_1\")\n    }\n    case (\"Female\") {\n      SetObjectFlagOn (player, \"Sex_2\")\n    }\n  }\n</code></pre>\n<p>I'm not sure what the difference is. The program added the \"\" on the second menu options but it did not for the first menu options. Any help figuring this out will be much appreciated.</p>\n\n",
      "PostDate": "2021-10-16T18:02:58.499046Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8be22fab-897e-4385-860d-bc744b03ecb8",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Are the options in the `gender` variable exactly `\"Male\"` and `\"Female\"`?\r\n\r\nUsually when one option doesn't work, it's because they don't exactly match. Could be a capital letter, a typo in the option, or an extra space.",
      "EditableFormat": "markdown",
      "HTML": "<p>Are the options in the <code>gender</code> variable exactly <code>\"Male\"</code> and <code>\"Female\"</code>?</p>\n<p>Usually when one option doesn't work, it's because they don't exactly match. Could be a capital letter, a typo in the option, or an extra space.</p>\n\n",
      "PostDate": "2021-10-16T19:02:46.9728695Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9dafbbc7-e999-4ec4-8327-529ddaf8211c",
      "UserId": 452476,
      "Username": "Athslade",
      "AvatarUrl": "https://secure.gravatar.com/avatar/2b4c42bd9abf2d6754ca4a24cab8cd7d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yep, they were identical. I looked at it a thousand times for any minute error in syntax, spelling, order, etc. I also kept trying various combinations or sets of object attributes and variables. Ultimately what ended up working was using the open / closed object attribute as shown here.\r\n```\r\nShowMenu (\"<br/>What is your gender?<br/>\", Split(\"Male;Female<br/>\", \";\"), false) {\r\n  switch (result) {\r\n    case (\"Male\") {\r\n      HelperOpenObject (player)\r\n    }\r\n    case (\"Female\") {\r\n      HelperCloseObject (player)\r\n    }\r\n  }\r\n  ```",
      "EditableFormat": "markdown",
      "HTML": "<p>Yep, they were identical. I looked at it a thousand times for any minute error in syntax, spelling, order, etc. I also kept trying various combinations or sets of object attributes and variables. Ultimately what ended up working was using the open / closed object attribute as shown here.</p>\n<pre><code>ShowMenu (\"&lt;br/&gt;What is your gender?&lt;br/&gt;\", Split(\"Male;Female&lt;br/&gt;\", \";\"), false) {\n  switch (result) {\n    case (\"Male\") {\n      HelperOpenObject (player)\n    }\n    case (\"Female\") {\n      HelperCloseObject (player)\n    }\n  }\n</code></pre>\n\n",
      "PostDate": "2021-10-16T19:08:29.3393178Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ead9cf5e-7c1b-45db-948f-db99117d90f4",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Yep, they were identical. I looked at it a thousand times for any minute error in syntax, spelling, order, etc.\r\n\r\nYou mean the 11 characters `Female<br/>` and the 6 characters `Female` are the exact same set of characters?\r\n\r\nThe second clause still doesn't run; but it makes no difference because the player object is already closed.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Yep, they were identical. I looked at it a thousand times for any minute error in syntax, spelling, order, etc.</p>\n</blockquote>\n<p>You mean the 11 characters <code>Female&lt;br/&gt;</code> and the 6 characters <code>Female</code> are the exact same set of characters?</p>\n<p>The second clause still doesn't run; but it makes no difference because the player object is already closed.</p>\n\n",
      "PostDate": "2021-10-16T22:43:24.4742979Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e98dfbee-580b-426e-bbcf-423643982d13",
      "UserId": 452476,
      "Username": "Athslade",
      "AvatarUrl": "https://secure.gravatar.com/avatar/2b4c42bd9abf2d6754ca4a24cab8cd7d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks mrangel, I didn't realize the br/ became part of the key. All is working fine now.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks mrangel, I didn't realize the br/ became part of the key. All is working fine now.</p>\n\n",
      "PostDate": "2021-11-01T10:31:19.8696515Z",
      "LastEditDate": "2021-11-01T10:32:21.9082834Z",
      "link": null
    },
    {
      "PostId": "d9a1ac1f-18e3-4314-beff-52601203f00d",
      "UserId": 452476,
      "Username": "Athslade",
      "AvatarUrl": "https://secure.gravatar.com/avatar/2b4c42bd9abf2d6754ca4a24cab8cd7d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Having problems with menus again. First problem with code example - All options work except \"I Got This\" only works if the numeral key is pressed, clicking the hyper link for option 3 gives no response. (In Quest the options list themselves with Synopsis as the third in code but second in game - this doesn't appear to alter the functionality of Synopsis at all, only I Got This. I have re-ordered them in code and they simply reset themselves to this order)\r\n```msg (\"If you choose option 3 at this point you can always return to the help menu by typing 'info' or 'help' into the command bar<br/>\")\r\noptions = Split(\"Help;Synopsis;I Got This<br/>\", \";\")\r\nShowMenu (\"Info\", options, true) {\r\n  switch (result) {\r\n    case (\"Help\") {\r\n      MoveObject (player, Commands)\r\n    }\r\n    case (\"I Got This<br/>\") {\r\n      MoveObject (player, Fairfax)\r\n    }\r\n    case (\"Synopsis\") {\r\n      MoveObject (player, Premise)\r\n    }\r\n  }\r\n}\r\n```\r\nSecond problem with code example - All options work as intended with the same issue as above. Option 4 in this list will only work if the numerical key for that option is pressed.\r\n\r\n```\r\nwait {\r\n  dudeoptions1 = Split(\"And you got a helluva knack for assuming people need saving.;South of here, a place called nowhere.;You guys aint much on introductions are you?;This dump got a name?<br/>\", \";\")\r\n  ShowMenu (\"\", dudeoptions1, false) {\r\n    switch (result) {\r\n      case (\"And you got a helluva knack for assuming people need saving.\") {\r\n        msg (\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\")\r\n      }\r\n      case (\"South of here, a place called nowhere.\") {\r\n        msg (\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbb\")\r\n      }\r\n      case (\"You guys aint much on introductions are you?\") {\r\n        msg (\"ccccccccccccccccccccccccccccccccc\")\r\n      }\r\n      case (\"This dump got a name?<br/>\") {\r\n        msg (\"ddddddddddddddddddddddddddd\")\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nThank in advance for any help with this",
      "EditableFormat": "markdown",
      "HTML": "<p>Having problems with menus again. First problem with code example - All options work except \"I Got This\" only works if the numeral key is pressed, clicking the hyper link for option 3 gives no response. (In Quest the options list themselves with Synopsis as the third in code but second in game - this doesn't appear to alter the functionality of Synopsis at all, only I Got This. I have re-ordered them in code and they simply reset themselves to this order)</p>\n<pre><code>options = Split(\"Help;Synopsis;I Got This&lt;br/&gt;\", \";\")\nShowMenu (\"Info\", options, true) {\n  switch (result) {\n    case (\"Help\") {\n      MoveObject (player, Commands)\n    }\n    case (\"I Got This&lt;br/&gt;\") {\n      MoveObject (player, Fairfax)\n    }\n    case (\"Synopsis\") {\n      MoveObject (player, Premise)\n    }\n  }\n}\n</code></pre>\n<p>Second problem with code example - All options work as intended with the same issue as above. Option 4 in this list will only work if the numerical key for that option is pressed.</p>\n<pre><code>wait {\n  dudeoptions1 = Split(\"And you got a helluva knack for assuming people need saving.;South of here, a place called nowhere.;You guys aint much on introductions are you?;This dump got a name?&lt;br/&gt;\", \";\")\n  ShowMenu (\"\", dudeoptions1, false) {\n    switch (result) {\n      case (\"And you got a helluva knack for assuming people need saving.\") {\n        msg (\"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\")\n      }\n      case (\"South of here, a place called nowhere.\") {\n        msg (\"bbbbbbbbbbbbbbbbbbbbbbbbbbbbb\")\n      }\n      case (\"You guys aint much on introductions are you?\") {\n        msg (\"ccccccccccccccccccccccccccccccccc\")\n      }\n      case (\"This dump got a name?&lt;br/&gt;\") {\n        msg (\"ddddddddddddddddddddddddddd\")\n      }\n    }\n  }\n}\n</code></pre>\n<p>Thank in advance for any help with this</p>\n\n",
      "PostDate": "2021-11-24T11:43:42.7094511Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9592ddb0-1762-4159-9809-c45a1fdf3985",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'd guess that having a `<br/>` in the option gets mangled somewhere in the process of being sent from Quest to the frontend and back.\r\n\r\nHmm… I just tried a copy of the third option, and it looks like the value seen in the javascript is `I Got This<br/></a>` for some reason. I'd assume it is trying to unmangle the string going the other way as well, which is stopping Quest from giving a sensible error message.\r\n\r\nIf you really want to have a line break as part of a menu option, you would probably want to use a dictionary for the options instead.\r\n\r\nFor example:\r\n```\r\noptions = NewStringDictionary()\r\ndictionary add (options, \"option1\", \"Help\")\r\ndictionary add (options, \"option2\", \"Synopsis\")\r\ndictionary add (options, \"option3\", \"I Got This<br/>\")\r\nShowMenu (\"Info\", options, true) {\r\n  switch (result) {\r\n    case (\"option1\") {\r\n      MoveObject (player, Commands)\r\n    }\r\n    case (\"option3\") {\r\n      MoveObject (player, Fairfax)\r\n    }\r\n    case (\"option2\") {\r\n      MoveObject (player, Premise)\r\n    }\r\n  }\r\n}\r\n```\r\nIn this case, the dictionary key is the part that the `case` statement matches, and the value is what is shown to the player. You can make them the same  if you want; I just used `option1` so it's clearer to see how the code works.\r\n\r\nHowever, I don't really think you should need this. I *suspect* that you really want to display a newline after the menu, rather than as part of the last option. In which case, why not just do that?\r\n\r\n<pre><code>ShowMenu (\"Info\", Split(\"Help;Synopsis;I Got This\"), true) {\r\n  switch (result) {\r\n    case (\"Help\") {\r\n      MoveObject (player, Commands)\r\n    }\r\n    case (\"I Got This\") {\r\n      MoveObject (player, Fairfax)\r\n    }\r\n    case (\"Synopsis\") {\r\n      MoveObject (player, Premise)\r\n    }\r\n  }\r\n}\r\n<b>msg (\"\")</b></code></pre>",
      "EditableFormat": "markdown",
      "HTML": "<p>I'd guess that having a <code>&lt;br/&gt;</code> in the option gets mangled somewhere in the process of being sent from Quest to the frontend and back.</p>\n<p>Hmm… I just tried a copy of the third option, and it looks like the value seen in the javascript is <code>I Got This&lt;br/&gt;&lt;/a&gt;</code> for some reason. I'd assume it is trying to unmangle the string going the other way as well, which is stopping Quest from giving a sensible error message.</p>\n<p>If you really want to have a line break as part of a menu option, you would probably want to use a dictionary for the options instead.</p>\n<p>For example:</p>\n<pre><code>options = NewStringDictionary()\ndictionary add (options, \"option1\", \"Help\")\ndictionary add (options, \"option2\", \"Synopsis\")\ndictionary add (options, \"option3\", \"I Got This&lt;br/&gt;\")\nShowMenu (\"Info\", options, true) {\n  switch (result) {\n    case (\"option1\") {\n      MoveObject (player, Commands)\n    }\n    case (\"option3\") {\n      MoveObject (player, Fairfax)\n    }\n    case (\"option2\") {\n      MoveObject (player, Premise)\n    }\n  }\n}\n</code></pre>\n<p>In this case, the dictionary key is the part that the <code>case</code> statement matches, and the value is what is shown to the player. You can make them the same  if you want; I just used <code>option1</code> so it's clearer to see how the code works.</p>\n<p>However, I don't really think you should need this. I <em>suspect</em> that you really want to display a newline after the menu, rather than as part of the last option. In which case, why not just do that?</p>\n<pre><code>ShowMenu (\"Info\", Split(\"Help;Synopsis;I Got This\"), true) {\n  switch (result) {\n    case (\"Help\") {\n      MoveObject (player, Commands)\n    }\n    case (\"I Got This\") {\n      MoveObject (player, Fairfax)\n    }\n    case (\"Synopsis\") {\n      MoveObject (player, Premise)\n    }\n  }\n}\n<b>msg (\"\")</b></code></pre>\n\n",
      "PostDate": "2021-11-24T13:01:48.4126804Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7dba8b90-acd5-44cf-8661-4da9df687ccf",
      "UserId": 452476,
      "Username": "Athslade",
      "AvatarUrl": "https://secure.gravatar.com/avatar/2b4c42bd9abf2d6754ca4a24cab8cd7d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel - Thanks again for your help with this. All is working well now.",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel - Thanks again for your help with this. All is working well now.</p>\n\n",
      "PostDate": "2021-11-24T19:05:12.226957Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
