{
  "Topic": {
    "TopicId": "6j-wzgnus0urepk6bksura",
    "ForumId": "10",
    "Title": "What can break displaying menus?",
    "LastUpdated": "2017-09-22T18:55:46.6743438Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "f668beeb-585f-4be7-8f2a-c8e1231604bd",
      "UserId": 319964,
      "Username": "GregC",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So I have a situation where my game works fine, but if I save it and then load it then menus no longer work properly.\r\n\r\nThe options are displayed as usual, the game responds to them being clicked as usual, but the menu options don't disappear afterwards like they usually do (and throw up error messages if you keep clicking on them). Presumably you could generate some odd behaviour by doing something that showed a new menu and clicked on something from an old one.\r\n\r\nWith a bit of experimenting I've found that it only happens if you move before you save (I can start a game, save in the first room, tinker with stuff and save/load with no problems). The thing is that my move code is not simple and I've no idea what I'm looking for.\r\n\r\nMoving calls Explore (which draws the map around the player based on a procedurally generated lookup dictionary of coordinates - the player actually stays in the same room but all of the descriptions etc. change) which in turn calls LeaveRoom (which removes all objects that are in this room because they were in the previous room) then Explore calls ExplorePart2 which calls Compass (which updates compass items the player is carrying to show the direction to certain destinations) UpdateRegion (which works out what the nearest point of interest to the player is and stores it for various purposes) and CheckWalls (which determines which exist to make invisible to properly simulate the player being in the point on the map specified) When all that's done it calls RandomEncounter but I tried turning that off and it didn't fix anything so I'm confident it's not that.\r\n\r\nBasically there's a lot of stuff going on when the player moves and I've no notion of why any part of it should mean that ShowMenu works fine - but will now break if the player saves and then loads.\r\n\r\nWhat sort of mistake am I even looking for?",
      "EditableFormat": "markdown",
      "HTML": "<p>So I have a situation where my game works fine, but if I save it and then load it then menus no longer work properly.</p>\n<p>The options are displayed as usual, the game responds to them being clicked as usual, but the menu options don't disappear afterwards like they usually do (and throw up error messages if you keep clicking on them). Presumably you could generate some odd behaviour by doing something that showed a new menu and clicked on something from an old one.</p>\n<p>With a bit of experimenting I've found that it only happens if you move before you save (I can start a game, save in the first room, tinker with stuff and save/load with no problems). The thing is that my move code is not simple and I've no idea what I'm looking for.</p>\n<p>Moving calls Explore (which draws the map around the player based on a procedurally generated lookup dictionary of coordinates - the player actually stays in the same room but all of the descriptions etc. change) which in turn calls LeaveRoom (which removes all objects that are in this room because they were in the previous room) then Explore calls ExplorePart2 which calls Compass (which updates compass items the player is carrying to show the direction to certain destinations) UpdateRegion (which works out what the nearest point of interest to the player is and stores it for various purposes) and CheckWalls (which determines which exist to make invisible to properly simulate the player being in the point on the map specified) When all that's done it calls RandomEncounter but I tried turning that off and it didn't fix anything so I'm confident it's not that.</p>\n<p>Basically there's a lot of stuff going on when the player moves and I've no notion of why any part of it should mean that ShowMenu works fine - but will now break if the player saves and then loads.</p>\n<p>What sort of mistake am I even looking for?</p>\n\n",
      "PostDate": "2017-09-22T18:55:46.6743438Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ba6c7355-c448-40c0-a228-196bc35344a7",
      "UserId": 319964,
      "Username": "GregC",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay so after a bunch of commenting out code etc. I've managed to isolate the bug and it looks like a problem with Quest\r\n\r\nIf you use ClearScreen() then the save appears permanently broken such that if the user saves and then loads then ShowMenu() will cause menu options to fail to disappear when clicked on.\r\n\r\nReplicated in a program that was just the default setup with an extra object that had two verbs, one for clearing the screen and one for showing a menu.\r\n\r\nAnyone else had this problem? Kinda an issue if ClearScreen() permanently breaks my saves.",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay so after a bunch of commenting out code etc. I've managed to isolate the bug and it looks like a problem with Quest</p>\n<p>If you use ClearScreen() then the save appears permanently broken such that if the user saves and then loads then ShowMenu() will cause menu options to fail to disappear when clicked on.</p>\n<p>Replicated in a program that was just the default setup with an extra object that had two verbs, one for clearing the screen and one for showing a menu.</p>\n<p>Anyone else had this problem? Kinda an issue if ClearScreen() permanently breaks my saves.</p>\n\n",
      "PostDate": "2017-09-22T21:25:50.6523272Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b68eab6a-7fbb-4793-960d-8c38886e572d",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I use ClearScreen quite frequently in the three games I've got going on, and I haven't had any problems loading the save games.\r\n\r\nI even call the ClearScreen function inside of my modified Save command so it clears the screen before saving.  (This is just to keep the player from having to wait for the game to scroll through everything when loading the saved game.)\r\n\r\n---\r\nDo you have a copy of the test game you made?\r\n\r\nI'll play around with it, if you post it.",
      "EditableFormat": "markdown",
      "HTML": "<p>I use ClearScreen quite frequently in the three games I've got going on, and I haven't had any problems loading the save games.</p>\n<p>I even call the ClearScreen function inside of my modified Save command so it clears the screen before saving.  (This is just to keep the player from having to wait for the game to scroll through everything when loading the saved game.)</p>\n<hr>\n<p>Do you have a copy of the test game you made?</p>\n<p>I'll play around with it, if you post it.</p>\n\n",
      "PostDate": "2017-09-22T21:36:06.5343653Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6d2abb12-508d-4458-8123-e854bec3761e",
      "UserId": 319964,
      "Username": "GregC",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Does your game use ShowMenu? The specific problem is that the behaviour of that function changes after saving a game that's invoked ClearScreen\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Test\">\r\n    <gameid>eb0d1436-8c1f-4a0e-b0e9-3a0585ff5d25</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"thing\">\r\n      <inherit name=\"editor_object\" />\r\n      <clearscreen type=\"script\">\r\n        ClearScreen\r\n      </clearscreen>\r\n      <showmenu type=\"script\">\r\n        ShowMenu (\"Menu\", Split(\"One;Two\",\";\"), true) {\r\n        }\r\n      </showmenu>\r\n    </object>\r\n  </object>\r\n  <verb>\r\n    <property>clearscreen</property>\r\n    <pattern>clearscreen</pattern>\r\n    <defaultexpression>\"You can't clearscreen \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <verb>\r\n    <property>showmenu</property>\r\n    <pattern>showmenu</pattern>\r\n    <defaultexpression>\"You can't showmenu \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n</asl>\r\n```\r\nThat's the minimum program I've been able to replicate it with. If you save and load it works fine. If you use the clearscreen verb on the object it works fine. If you use the clearscreen verb and then save and load the show menu verb starts misbehaving.",
      "EditableFormat": "markdown",
      "HTML": "<p>Does your game use ShowMenu? The specific problem is that the behaviour of that function changes after saving a game that's invoked ClearScreen</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Test\"&gt;\n    &lt;gameid&gt;eb0d1436-8c1f-4a0e-b0e9-3a0585ff5d25&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"thing\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;clearscreen type=\"script\"&gt;\n        ClearScreen\n      &lt;/clearscreen&gt;\n      &lt;showmenu type=\"script\"&gt;\n        ShowMenu (\"Menu\", Split(\"One;Two\",\";\"), true) {\n        }\n      &lt;/showmenu&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;verb&gt;\n    &lt;property&gt;clearscreen&lt;/property&gt;\n    &lt;pattern&gt;clearscreen&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't clearscreen \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;showmenu&lt;/property&gt;\n    &lt;pattern&gt;showmenu&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't showmenu \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n&lt;/asl&gt;\n</code></pre>\n<p>That's the minimum program I've been able to replicate it with. If you save and load it works fine. If you use the clearscreen verb on the object it works fine. If you use the clearscreen verb and then save and load the show menu verb starts misbehaving.</p>\n\n",
      "PostDate": "2017-09-23T07:07:24.3284228Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6cbe5866-7e37-46a0-ad19-3e017d4310db",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hmm....\r\n\r\n I added a message that prints the result you chose, and it appears ShowMenu just isn't clearing the menu after you choose something.\r\n\r\n<samp>\r\n\r\n\\> showmenu thing\r\nMenu\r\n1: One\r\n2: Two\r\nYou chose One\r\n\r\n\\> showmenu thing\r\nMenu\r\n1: One\r\n2: Two\r\nYou chose Two\r\n\r\n</samp>\r\n\r\n---\r\nBefore I added that, I thought it wasn't doing anything when you selected something.\r\n\r\nIt always prints this when you click on a selection after you've already selected something from the menu the first time: ```Error running script: Unexpected menu response```.\r\n\r\n---\r\nBut, yes.\r\n\r\nAfter you clear the screen, save the game, then load, the ClearMenu function appears to be broken.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hmm....</p>\n<p>I added a message that prints the result you chose, and it appears ShowMenu just isn't clearing the menu after you choose something.</p>\n<samp>\n<p>&gt; showmenu thing<br>\nMenu<br>\n1: One<br>\n2: Two<br>\nYou chose One</p>\n<p>&gt; showmenu thing<br>\nMenu<br>\n1: One<br>\n2: Two<br>\nYou chose Two</p>\n</samp>\n<hr>\n<p>Before I added that, I thought it wasn't doing anything when you selected something.</p>\n<p>It always prints this when you click on a selection after you've already selected something from the menu the first time: <code>Error running script: Unexpected menu response</code>.</p>\n<hr>\n<p>But, yes.</p>\n<p>After you clear the screen, save the game, then load, the ClearMenu function appears to be broken.</p>\n\n",
      "PostDate": "2017-09-23T10:02:35.3476636Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "83cbd9a7-fbb4-4b3e-9345-28a132827433",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "...but...\r\n\r\nI have a game with a **ClearScreen** command and MANY ShowMenu inducing verbs.\r\n\r\nI just tested it on that, and it works fine.\r\n\r\nSo, maybe it's because it's a verb?\r\n\r\nThat makes no sense, I know, but I'm about to test the theory out.",
      "EditableFormat": "markdown",
      "HTML": "<p>...but...</p>\n<p>I have a game with a <strong>ClearScreen</strong> command and MANY ShowMenu inducing verbs.</p>\n<p>I just tested it on that, and it works fine.</p>\n<p>So, maybe it's because it's a verb?</p>\n<p>That makes no sense, I know, but I'm about to test the theory out.</p>\n\n",
      "PostDate": "2017-09-23T10:08:00.9525368Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2df93e10-e75e-4240-aae2-0b9fb04d86b1",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You can start the game.  Clear the screen.  Load the saved game.\r\n\r\nThen, the menu is messed up.\r\n\r\n---\r\nHere's the function that's supposed to clear the menu on click (from the saved game):\r\n\r\n```\r\n<function name=\"ShowMenuResponse\" parameters=\"option\">\r\n    if (game.menucallback = null) {\r\n      error (\"Unexpected menu response\")\r\n    }\r\n    else {\r\n      parameters = NewStringDictionary()\r\n      dictionary add (parameters, \"result\", UnescapeQuotes(option))\r\n      script = game.menucallback\r\n      ClearMenu\r\n      invoke (script, parameters)\r\n    }\r\n  </function>\r\n```\r\n\r\n---\r\nHere's the one that's supposed to do it if you enter a command to select:\r\n\r\n```\r\n<function name=\"HandleMenuTextResponse\" parameters=\"input\" type=\"boolean\"><![CDATA[\r\n    handled = false\r\n    if (IsInt(input)) {\r\n      number = ToInt(input)\r\n      if (number > 0 and number <= ListCount(game.menuoptionskeys)) {\r\n        handled = true\r\n        ShowMenuResponse (StringListItem(game.menuoptionskeys, number - 1))\r\n      }\r\n    }\r\n    return (handled)\r\n  ]]></function>\r\n```\r\n\r\n---\r\nAnd ClearMenu:\r\n\r\n```\r\n<function name=\"ClearMenu\">\r\n    HideOutputSection (game.menuoutputsection)\r\n    game.menuoutputsection = null\r\n    game.menuoptions = null\r\n    game.menucallback = null\r\n  </function>\r\n```\r\n\r\n\r\n---\r\nNow, the debugger shows game.menuoutputsection when you haven't selected a menu option yet, and it definitely goes back to null once you make a selection.  The menu just doesn't clear.\r\n\r\nIt's strange that it works in my other game, though.\r\n\r\nI'm about to make a game from scratch and test it.\r\n\r\n...and it still messes up in a new game.\r\n\r\n...but it all works perfectly fine in the game I've been working on for a month or two.  Like I say, it has a clear command, and very many things that call ShowMenu.  I just tested it every which way but loose, and there was no problem with the menus after clearing the screen and saving.\r\n\r\nWhat a mystery...",
      "EditableFormat": "markdown",
      "HTML": "<p>You can start the game.  Clear the screen.  Load the saved game.</p>\n<p>Then, the menu is messed up.</p>\n<hr>\n<p>Here's the function that's supposed to clear the menu on click (from the saved game):</p>\n<pre><code>&lt;function name=\"ShowMenuResponse\" parameters=\"option\"&gt;\n    if (game.menucallback = null) {\n      error (\"Unexpected menu response\")\n    }\n    else {\n      parameters = NewStringDictionary()\n      dictionary add (parameters, \"result\", UnescapeQuotes(option))\n      script = game.menucallback\n      ClearMenu\n      invoke (script, parameters)\n    }\n  &lt;/function&gt;\n</code></pre>\n<hr>\n<p>Here's the one that's supposed to do it if you enter a command to select:</p>\n<pre><code>&lt;function name=\"HandleMenuTextResponse\" parameters=\"input\" type=\"boolean\"&gt;&lt;![CDATA[\n    handled = false\n    if (IsInt(input)) {\n      number = ToInt(input)\n      if (number &gt; 0 and number &lt;= ListCount(game.menuoptionskeys)) {\n        handled = true\n        ShowMenuResponse (StringListItem(game.menuoptionskeys, number - 1))\n      }\n    }\n    return (handled)\n  ]]&gt;&lt;/function&gt;\n</code></pre>\n<hr>\n<p>And ClearMenu:</p>\n<pre><code>&lt;function name=\"ClearMenu\"&gt;\n    HideOutputSection (game.menuoutputsection)\n    game.menuoutputsection = null\n    game.menuoptions = null\n    game.menucallback = null\n  &lt;/function&gt;\n</code></pre>\n<hr>\n<p>Now, the debugger shows game.menuoutputsection when you haven't selected a menu option yet, and it definitely goes back to null once you make a selection.  The menu just doesn't clear.</p>\n<p>It's strange that it works in my other game, though.</p>\n<p>I'm about to make a game from scratch and test it.</p>\n<p>...and it still messes up in a new game.</p>\n<p>...but it all works perfectly fine in the game I've been working on for a month or two.  Like I say, it has a clear command, and very many things that call ShowMenu.  I just tested it every which way but loose, and there was no problem with the menus after clearing the screen and saving.</p>\n<p>What a mystery...</p>\n\n",
      "PostDate": "2017-09-23T10:18:57.0890893Z",
      "LastEditDate": "2017-09-23T10:28:57.9081156Z",
      "link": null
    },
    {
      "PostId": "ecaba2ed-2490-44c5-a897-3cd3a6681f5e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm thinking the issue is in the JS function that's supposed to hide the section, but I don't know jQuery well enough to poke further.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm thinking the issue is in the JS function that's supposed to hide the section, but I don't know jQuery well enough to poke further.</p>\n\n",
      "PostDate": "2017-09-23T11:28:37.1440728Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d809beb9-eb47-4242-b698-0a5d79b310cd",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The JS function:\r\n\r\nI wanted to think that, but the JS functions shouldn't change at all on save, should they?\r\n\r\n---\r\nAll of those scripts I posted are directly from the saved game, too.\r\n\r\nIt was bed time.  I'm about to run a DIFF on the scripts now, but I doubt anything is different.\r\n\r\nIf it **is** in the JS function:  If I can't bulldog through to figure it out, I bet Pixie can point it out quickly.\r\n\r\n---\r\nThe most confusing thing is that my game I've been building for months has a Clear Screen command and ShowMenus everywhere you click, but it doesn't have the problem.\r\n\r\nThe game I created last night does, though...",
      "EditableFormat": "markdown",
      "HTML": "<p>The JS function:</p>\n<p>I wanted to think that, but the JS functions shouldn't change at all on save, should they?</p>\n<hr>\n<p>All of those scripts I posted are directly from the saved game, too.</p>\n<p>It was bed time.  I'm about to run a DIFF on the scripts now, but I doubt anything is different.</p>\n<p>If it <strong>is</strong> in the JS function:  If I can't bulldog through to figure it out, I bet Pixie can point it out quickly.</p>\n<hr>\n<p>The most confusing thing is that my game I've been building for months has a Clear Screen command and ShowMenus everywhere you click, but it doesn't have the problem.</p>\n<p>The game I created last night does, though...</p>\n\n",
      "PostDate": "2017-09-23T23:24:59.7597738Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "646af463-af42-42c3-90b8-68308a8e0c30",
      "UserId": 319964,
      "Username": "GregC",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hmm. Have you done anything unusual with the interface in your game?\r\n\r\nI'm curious about why it works fine the existing game, but we can easily replicate the problem elsewhere.\r\n\r\nIt already seemed a bit of a head-scratcher, now I've no idea what to do!",
      "EditableFormat": "markdown",
      "HTML": "<p>Hmm. Have you done anything unusual with the interface in your game?</p>\n<p>I'm curious about why it works fine the existing game, but we can easily replicate the problem elsewhere.</p>\n<p>It already seemed a bit of a head-scratcher, now I've no idea what to do!</p>\n\n",
      "PostDate": "2017-09-23T23:31:15.3475785Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ad8696fa-d93b-48f5-ba77-0e99225af0a6",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "\\>Have you done anything unusual with the interface in your game?\r\n\r\nI started on it before I updated to 5.7...\r\n\r\nThat's the only thing I've come up with that may matter...\r\n\r\n...but I don't see how it could...\r\n\r\n...but I can't say that it couldn't.\r\n\r\n---\r\n\\>It already seemed a bit of a head-scratcher, now I've no idea what to do!\r\n\r\nThat's what I'm screaming!\r\n\r\n---\r\nAre you online or using the desktop editor?\r\n\r\n---\r\nI'm about to publish my example game and see if it happens in the online player.",
      "EditableFormat": "markdown",
      "HTML": "<p>&gt;Have you done anything unusual with the interface in your game?</p>\n<p>I started on it before I updated to 5.7...</p>\n<p>That's the only thing I've come up with that may matter...</p>\n<p>...but I don't see how it could...</p>\n<p>...but I can't say that it couldn't.</p>\n<hr>\n<p>&gt;It already seemed a bit of a head-scratcher, now I've no idea what to do!</p>\n<p>That's what I'm screaming!</p>\n<hr>\n<p>Are you online or using the desktop editor?</p>\n<hr>\n<p>I'm about to publish my example game and see if it happens in the online player.</p>\n\n",
      "PostDate": "2017-09-23T23:58:08.2124661Z",
      "LastEditDate": "2017-09-23T23:59:51.8760723Z",
      "link": null
    },
    {
      "PostId": "3427a92f-1864-4c34-a1ba-a8d213d2019f",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I don't know how that happens; as I can't find the message that's sent to  the client on restoring a save. But I can see how that kind of error _could_ occur based on the bits of code I've seen.\r\n\r\nIf I'm right, the error would be linked to an empty section (`<div />`) in the restored output; so clearing the screen immediately before saving.",
      "EditableFormat": "markdown",
      "HTML": "<p>I don't know how that happens; as I can't find the message that's sent to  the client on restoring a save. But I can see how that kind of error <em>could</em> occur based on the bits of code I've seen.</p>\n<p>If I'm right, the error would be linked to an empty section (<code>&lt;div /&gt;</code>) in the restored output; so clearing the screen immediately before saving.</p>\n\n",
      "PostDate": "2017-09-23T23:59:09.1744559Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "014c9c86-a0a8-4565-b250-f5f6e6252df7",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel,\r\n\r\nOh, I think I'm following you.\r\n\r\nClearing the screen deletes the div element that ClearMenu is trying to delete?",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel,</p>\n<p>Oh, I think I'm following you.</p>\n<p>Clearing the screen deletes the div element that ClearMenu is trying to delete?</p>\n\n",
      "PostDate": "2017-09-24T00:00:49.7896508Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "431406a1-6175-47e7-9ab2-8e30be375be8",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "In an unsaved game, the div element just keeps increasing ```n``` at the end of ```divOutputAlign```:\r\n\r\n```\r\n<div id=\"divOutputAlign26\"\r\n```\r\n![image](https://user-images.githubusercontent.com/30656341/30779001-f709069e-a0a8-11e7-9388-5f69a28a5f5e.png)\r\n\r\n---\r\n\r\n...but it's adding ```NaN``` in the loaded save game:\r\n\r\n```\r\n<div id=\"divOutputAlignNaN\"\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30778994-d283a02c-a0a8-11e7-8802-c6786dfbdfb0.png)\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>In an unsaved game, the div element just keeps increasing <code>n</code> at the end of <code>divOutputAlign</code>:</p>\n<pre><code>&lt;div id=\"divOutputAlign26\"\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30779001-f709069e-a0a8-11e7-9388-5f69a28a5f5e.png\" alt=\"image\"></p>\n<hr>\n<p>...but it's adding <code>NaN</code> in the loaded save game:</p>\n<pre><code>&lt;div id=\"divOutputAlignNaN\"\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30778994-d283a02c-a0a8-11e7-8802-c6786dfbdfb0.png\" alt=\"image\"></p>\n\n",
      "PostDate": "2017-09-24T02:49:42.0478635Z",
      "LastEditDate": "2017-09-24T02:50:39.8842749Z",
      "link": null
    },
    {
      "PostId": "b23ccd98-4f74-4fc5-971a-a19b8e6e433c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Might it be something in this (specifically, the createNewDiv function):\r\n\r\n```\r\nfunction addText(text) {\r\n    if (getCurrentDiv() == null) {\r\n        createNewDiv(\"left\");\r\n    }\r\n\r\n    getCurrentDiv().append(text);\r\n    $(\"#divOutput\").css(\"min-height\", $(\"#divOutput\").height());\r\n}\r\n\r\nfunction createNewDiv(alignment) {\r\n    var classes = _outputSections.join(\" \");\r\n    setDivCount(getDivCount() + 1);\r\n    $(\"<div/>\", {\r\n        id: \"divOutputAlign\" + getDivCount(),\r\n        style: \"text-align: \" + alignment,\r\n        \"class\": classes\r\n    }).appendTo(\"#divOutput\");\r\n    setCurrentDiv(\"#divOutputAlign\" + getDivCount());\r\n}\r\n\r\nvar _currentDiv = null;\r\n\r\nfunction getCurrentDiv() {\r\n    if (_currentDiv) return _currentDiv;\r\n\r\n    var divId = $(\"#outputData\").attr(\"data-currentdiv\");\r\n    if (divId) {\r\n        _currentDiv = $(divId);\r\n        return _currentDiv;\r\n    }\r\n\r\n    return null;\r\n}\r\n\r\nfunction setCurrentDiv(div) {\r\n    _currentDiv = $(div);\r\n    $(\"#outputData\").attr(\"data-currentdiv\", div);\r\n}\r\n\r\nvar _divCount = -1;\r\n\r\nfunction getDivCount() {\r\n    if (_divCount == -1) {\r\n        _divCount = parseInt($(\"#outputData\").attr(\"data-divcount\"));\r\n    }\r\n    return _divCount;\r\n}\r\n\r\nfunction setDivCount(count) {\r\n    _divCount = count;\r\n    $(\"#outputData\").attr(\"data-divcount\", _divCount);\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Might it be something in this (specifically, the createNewDiv function):</p>\n<pre><code>function addText(text) {\n    if (getCurrentDiv() == null) {\n        createNewDiv(\"left\");\n    }\n\n    getCurrentDiv().append(text);\n    $(\"#divOutput\").css(\"min-height\", $(\"#divOutput\").height());\n}\n\nfunction createNewDiv(alignment) {\n    var classes = _outputSections.join(\" \");\n    setDivCount(getDivCount() + 1);\n    $(\"&lt;div/&gt;\", {\n        id: \"divOutputAlign\" + getDivCount(),\n        style: \"text-align: \" + alignment,\n        \"class\": classes\n    }).appendTo(\"#divOutput\");\n    setCurrentDiv(\"#divOutputAlign\" + getDivCount());\n}\n\nvar _currentDiv = null;\n\nfunction getCurrentDiv() {\n    if (_currentDiv) return _currentDiv;\n\n    var divId = $(\"#outputData\").attr(\"data-currentdiv\");\n    if (divId) {\n        _currentDiv = $(divId);\n        return _currentDiv;\n    }\n\n    return null;\n}\n\nfunction setCurrentDiv(div) {\n    _currentDiv = $(div);\n    $(\"#outputData\").attr(\"data-currentdiv\", div);\n}\n\nvar _divCount = -1;\n\nfunction getDivCount() {\n    if (_divCount == -1) {\n        _divCount = parseInt($(\"#outputData\").attr(\"data-divcount\"));\n    }\n    return _divCount;\n}\n\nfunction setDivCount(count) {\n    _divCount = count;\n    $(\"#outputData\").attr(\"data-divcount\", _divCount);\n}\n</code></pre>\n\n",
      "PostDate": "2017-09-24T02:58:37.5837298Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "eb854aec-dcd9-4ae1-ba47-fc0182b60717",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh yeah...\r\n\r\nHere's this, too:\r\n\r\n```\r\nfunction clearScreen() {\r\n    $(\"#divOutput\").css(\"min-height\", 0);\r\n    $(\"#divOutput\").html(\"\");\r\n    createNewDiv(\"left\");\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $(\"html,body\").scrollTop(0);\r\n    }, 100);\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh yeah...</p>\n<p>Here's this, too:</p>\n<pre><code>function clearScreen() {\n    $(\"#divOutput\").css(\"min-height\", 0);\n    $(\"#divOutput\").html(\"\");\n    createNewDiv(\"left\");\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $(\"html,body\").scrollTop(0);\n    }, 100);\n}\n</code></pre>\n\n",
      "PostDate": "2017-09-24T02:59:41.2102735Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "871ef779-c24e-4940-9a61-fd33ebcdd479",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It does it online, too.\r\n\r\n---\r\nhttp://textadventures.co.uk/games/view/5vghpddwzks0vbqg3zkt5g/clear-screen-showmenu-test\r\n\r\n1. Clear your screen\r\n2. SAVE\r\n3. [QUIT THE GAME]\r\n4. Load the saved game\r\n5. Click or enter: Choices to make\r\n\r\nAt this point, you can make a selection, but the menu does not clear.  Then, if you click on something, it throws an error (of course).\r\n\r\n---\r\n<s>Is the player that launches a saved game accessing a different playercore.js?\r\n\r\nWas there a file name or location change in the update to 5.7 that didn't make it into the player that launches a saved game?  (I only theorize that it ***may*** be a different player because the window is set up totally differently.  I may be being completely silly.)</s>\r\n\r\nAll the text I used \\<s> on has to be wrong, because the online player does the same thing.",
      "EditableFormat": "markdown",
      "HTML": "<p>It does it online, too.</p>\n<hr>\n<p>http://textadventures.co.uk/games/view/5vghpddwzks0vbqg3zkt5g/clear-screen-showmenu-test</p>\n<ol>\n<li>Clear your screen</li>\n<li>SAVE</li>\n<li>[QUIT THE GAME]</li>\n<li>Load the saved game</li>\n<li>Click or enter: Choices to make</li>\n</ol>\n<p>At this point, you can make a selection, but the menu does not clear.  Then, if you click on something, it throws an error (of course).</p>\n<hr>\n<p><s>Is the player that launches a saved game accessing a different playercore.js?</s></p><s>\n</s><p><s>Was there a file name or location change in the update to 5.7 that didn't make it into the player that launches a saved game?  (I only theorize that it <strong><em>may</em></strong> be a different player because the window is set up totally differently.  I may be being completely silly.)</s></p>\n<p>All the text I used &lt;s&gt; on has to be wrong, because the online player does the same thing.</p>\n\n",
      "PostDate": "2017-09-24T03:08:59.632267Z",
      "LastEditDate": "2017-09-24T03:10:13.7623647Z",
      "link": null
    },
    {
      "PostId": "b25bb681-6e11-44fd-990f-bfdb087a32fa",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Falsy values in JavaScript are ```false```, ```null```, ```0```, ```\"\"```, ```undefined```, and ```NaN```.\r\n\r\n\r\n-from freecodecamp.org",
      "EditableFormat": "markdown",
      "HTML": "<p>Falsy values in JavaScript are <code>false</code>, <code>null</code>, <code>0</code>, <code>\"\"</code>, <code>undefined</code>, and <code>NaN</code>.</p>\n<p>-from freecodecamp.org</p>\n\n",
      "PostDate": "2017-09-24T06:30:44.1395302Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8d51a1c3-a10b-4ec0-b12a-532caf15c1a9",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think the divCount is NaN (which I'm guessing means Not a Number).",
      "EditableFormat": "markdown",
      "HTML": "<p>I think the divCount is NaN (which I'm guessing means Not a Number).</p>\n\n",
      "PostDate": "2017-09-24T06:49:18.3859743Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cebf0fcd-9060-4e6d-a714-03e33549d05e",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I just updated the example game.\r\n\r\nYou can now use JS functions to debug/fix/whatever.\r\n\r\n```JS.clearScreen()``` will clear the screen.\r\n\r\n```JS.addText(\"Hello Forum\")``` will print Hello Forum.\r\n\r\n```JS.setDivCount(42)``` does this (it assigns a number to divOutputAlign, which fixes ClearMenu):\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30780408-a846b3fe-a0cf-11e7-8347-7e076b6d0394.png)\r\n\r\n\r\n---\r\n\r\n<samp>\r\n\r\n\\> save\r\n\r\n\\> menu\r\nPick one\r\n1: one\r\n2: two\r\none\r\n\r\n\\> JS.setDivCount(42)\r\n\r\n\\> menu\r\none\r\n\r\n</samp>",
      "EditableFormat": "markdown",
      "HTML": "<p>I just updated the example game.</p>\n<p>You can now use JS functions to debug/fix/whatever.</p>\n<p><code>JS.clearScreen()</code> will clear the screen.</p>\n<p><code>JS.addText(\"Hello Forum\")</code> will print Hello Forum.</p>\n<p><code>JS.setDivCount(42)</code> does this (it assigns a number to divOutputAlign, which fixes ClearMenu):</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30780408-a846b3fe-a0cf-11e7-8347-7e076b6d0394.png\" alt=\"image\"></p>\n<hr>\n<samp>\n<p>&gt; save</p>\n<p>&gt; menu<br>\nPick one<br>\n1: one<br>\n2: two<br>\none</p>\n<p>&gt; JS.setDivCount(42)</p>\n<p>&gt; menu<br>\none</p>\n</samp>\n\n",
      "PostDate": "2017-09-24T07:26:04.0377221Z",
      "LastEditDate": "2017-09-24T07:30:13.3703929Z",
      "link": null
    },
    {
      "PostId": "c19c08ae-df99-4251-9937-f4e0fd4cf8ab",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Put this in your user interface initialization script.  It will fix the menu problem:\r\n\r\n```JS.getDivCount ()```",
      "EditableFormat": "markdown",
      "HTML": "<p>Put this in your user interface initialization script.  It will fix the menu problem:</p>\n<p><code>JS.getDivCount ()</code></p>\n\n",
      "PostDate": "2017-09-24T07:37:21.1591891Z",
      "LastEditDate": "2017-09-24T07:43:49.7577639Z",
      "link": null
    },
    {
      "PostId": "2b96aec4-c455-4893-91ec-86442f6c012c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Fixed.\r\n\r\nYou just add that one line (```JS.getDivCount()```) to your user interface initialisation script.\r\n\r\nExample game:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"clrtest\">\r\n    <gameid>6b741173-fc50-4668-a656-eda0d6db9b45</gameid>\r\n    <version>1.1</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <feature_advancedscripts />\r\n    <commandpane />\r\n    <inituserinterface type=\"script\">\r\n      JS.setCommands (\"clear;menu;save;look\", \"black\")\r\n      JS.getDivCount () //This is the fix\r\n    </inituserinterface>\r\n    <description><![CDATA[Just an example game.<br/><br/>ShowMenu breaks if you save the game after clearing the screen, but I found a fix.]]></description>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <enter type=\"script\">\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <command>\r\n    <pattern>clear</pattern>\r\n    <script>\r\n      ClearScreen\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>menu</pattern>\r\n    <script>\r\n      ShowMenu (\"Pick one\", Split (\"one;two\", \";\"), true) {\r\n        msg (result)\r\n      }\r\n    </script>\r\n  </command>\r\n</asl>\r\n```\r\n\r\n---\r\nIt's around time for The Pixie to be checking in on us...\r\n\r\nMaybe I can find the wiki page where he explains how Quest loads things when loading a saved game before he sees this one...\r\n\r\n---\r\nhttps://github.com/ThePix/quest/wiki/UI-Part-05:-Where-and-When-To-Do-Stuff",
      "EditableFormat": "markdown",
      "HTML": "<p>Fixed.</p>\n<p>You just add that one line (<code>JS.getDivCount()</code>) to your user interface initialisation script.</p>\n<p>Example game:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"clrtest\"&gt;\n    &lt;gameid&gt;6b741173-fc50-4668-a656-eda0d6db9b45&lt;/gameid&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;commandpane /&gt;\n    &lt;inituserinterface type=\"script\"&gt;\n      JS.setCommands (\"clear;menu;save;look\", \"black\")\n      JS.getDivCount () //This is the fix\n    &lt;/inituserinterface&gt;\n    &lt;description&gt;&lt;![CDATA[Just an example game.&lt;br/&gt;&lt;br/&gt;ShowMenu breaks if you save the game after clearing the screen, but I found a fix.]]&gt;&lt;/description&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;enter type=\"script\"&gt;\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;clear&lt;/pattern&gt;\n    &lt;script&gt;\n      ClearScreen\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;menu&lt;/pattern&gt;\n    &lt;script&gt;\n      ShowMenu (\"Pick one\", Split (\"one;two\", \";\"), true) {\n        msg (result)\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>It's around time for The Pixie to be checking in on us...</p>\n<p>Maybe I can find the wiki page where he explains how Quest loads things when loading a saved game before he sees this one...</p>\n<hr>\n<p>https://github.com/ThePix/quest/wiki/UI-Part-05:-Where-and-When-To-Do-Stuff</p>\n\n",
      "PostDate": "2017-09-24T07:46:57.9428526Z",
      "LastEditDate": "2017-09-24T07:56:24.2973688Z",
      "link": null
    },
    {
      "PostId": "6830ddc5-153d-4b82-b775-19485e98c6d6",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hrmm...\r\n\r\nDoes Quest not have like a default initialisation script?\r\n\r\nIf I could find that (if it exists), I could just add the line in my Quest 5 folder and just roll with it.\r\n\r\n---\r\nHelp!\r\n\r\nI tried to find it, Pixie!\r\n\r\nI really, really tried!",
      "EditableFormat": "markdown",
      "HTML": "<p>Hrmm...</p>\n<p>Does Quest not have like a default initialisation script?</p>\n<p>If I could find that (if it exists), I could just add the line in my Quest 5 folder and just roll with it.</p>\n<hr>\n<p>Help!</p>\n<p>I tried to find it, Pixie!</p>\n<p>I really, really tried!</p>\n\n",
      "PostDate": "2017-09-24T09:20:09.2484665Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "05b14503-4efb-4dd1-9793-01b23af22064",
      "UserId": 319964,
      "Username": "GregC",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks K.V. that works perfectly :)\r\n\r\nI'm still trying to follow how you worked it out! It looks like you're seeing parts of the engine I'm not - the code for (for example) ShowMenu isn't in my game so I had no chance to spot the thing (Not that I imagine I'd have been particularly likely to, I think you're cleverer than me, but it'd have been nice to give it a go). Presumably when I include the lines\r\n\r\n```\r\n<include ref=\"English.aslx\" />\r\n<include ref=\"Core.aslx\" />\r\n```\r\nI'm pulling in a bunch of other functions from somewhere, but I don't know where from or how to look at them. Presumably I don't open them in quest so much as grab another program to look at them?\r\n\r\nI don't imagine this'll come up again, but it's nice to see how things work :) Thanks again!",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks K.V. that works perfectly :)</p>\n<p>I'm still trying to follow how you worked it out! It looks like you're seeing parts of the engine I'm not - the code for (for example) ShowMenu isn't in my game so I had no chance to spot the thing (Not that I imagine I'd have been particularly likely to, I think you're cleverer than me, but it'd have been nice to give it a go). Presumably when I include the lines</p>\n<pre><code>&lt;include ref=\"English.aslx\" /&gt;\n&lt;include ref=\"Core.aslx\" /&gt;\n</code></pre>\n<p>I'm pulling in a bunch of other functions from somewhere, but I don't know where from or how to look at them. Presumably I don't open them in quest so much as grab another program to look at them?</p>\n<p>I don't imagine this'll come up again, but it's nice to see how things work :) Thanks again!</p>\n\n",
      "PostDate": "2017-09-24T10:30:16.6875197Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "76dfeb46-b60c-4069-bf4e-97aaa96184d4",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">I'm pulling in a bunch of other functions from somewhere, but I don't know where from or how to look at them.\r\n\r\nYep, you've pretty much got it!\r\n\r\nIf you want to see those functions, click on **Filter**, then **Show Library Elements** at the bottom left of the desktop editor:\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/30350916-6c8531f0-97de-11e7-9f08-f96d5789db81.png)\r\n\r\n---\r\nhttp://docs.textadventures.co.uk/quest/overriding.html\r\n\r\nhttp://docs.textadventures.co.uk/quest/functions/hardcoded.html\r\n\r\n\r\n---\r\n...but that wasn't what I did here, because I was looking for something that might have changed in the save file.\r\n\r\nSo I navigated to the directory where the save file was located, right-clicked it, opened it up with Notepad++, and *voila*, all of the functions (even the ones you can't see by default in the editor)!",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I'm pulling in a bunch of other functions from somewhere, but I don't know where from or how to look at them.</p>\n</blockquote>\n<p>Yep, you've pretty much got it!</p>\n<p>If you want to see those functions, click on <strong>Filter</strong>, then <strong>Show Library Elements</strong> at the bottom left of the desktop editor:</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/30350916-6c8531f0-97de-11e7-9f08-f96d5789db81.png\" alt=\"image\"></p>\n<hr>\n<p>http://docs.textadventures.co.uk/quest/overriding.html</p>\n<p>http://docs.textadventures.co.uk/quest/functions/hardcoded.html</p>\n<hr>\n<p>...but that wasn't what I did here, because I was looking for something that might have changed in the save file.</p>\n<p>So I navigated to the directory where the save file was located, right-clicked it, opened it up with Notepad++, and <em>voila</em>, all of the functions (even the ones you can't see by default in the editor)!</p>\n\n",
      "PostDate": "2017-09-24T11:22:21.3309086Z",
      "LastEditDate": "2017-09-24T11:25:19.9822489Z",
      "link": null
    },
    {
      "PostId": "10b9724d-d2ec-4e62-af39-c3b249854e7b",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "# My fix worked as far as ```ShowMenu``` was concerned, but it messed up the way Quest prints text to the screen!\r\n\r\nSee this post:\r\n\r\nhttp://textadventures.co.uk/forum/quest/topic/ik0dbblaq0o5fdqq7nuwia/js-function-to-find-the-last-divoutputalign-in-a-saved-game\r\n\r\n---\r\nActually, you can skip to the solution.  The fix here is not good.\r\n\r\nSorry!",
      "EditableFormat": "markdown",
      "HTML": "<h1>My fix worked as far as <code>ShowMenu</code> was concerned, but it messed up the way Quest prints text to the screen!</h1>\n<p>See this post:</p>\n<p>http://textadventures.co.uk/forum/quest/topic/ik0dbblaq0o5fdqq7nuwia/js-function-to-find-the-last-divoutputalign-in-a-saved-game</p>\n<hr>\n<p>Actually, you can skip to the solution.  The fix here is not good.</p>\n<p>Sorry!</p>\n\n",
      "PostDate": "2017-10-14T06:03:34.477392Z",
      "LastEditDate": "2017-10-14T06:05:57.0445891Z",
      "link": null
    }
  ]
}
