{
  "Topic": {
    "TopicId": "llccckckresqjnbke8n15a",
    "ForumId": "10",
    "Title": "How to wait for a specific keypress before continuing",
    "LastUpdated": "2017-12-15T20:39:21.620794Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "ce5b757c-a8ae-431d-9d4d-f7c32b3ba154",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sherlocho was trying to get this working back in August.\r\n\r\nhttps://textadventures.co.uk/forum/quest/topic/fromceo72e2suyw7en4jbw/possible-to-wait-for-a-specific-keypress-to-continue\r\n\r\nDr. Agon reminded me of this this morning, and mrangel and Pixie have taught me an awful lot about JS since then, so I can make this work now.\r\n\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Continue Function\">\r\n    <gameid>176bc4ca-f00d-456f-bfc9-b90bf4452749</gameid>\r\n    <version>1.1</version>\r\n    <firstpublished>2017</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description type=\"string\"></description>\r\n    <enter type=\"script\">\r\n      WaitFunction (\"g\")\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <function name=\"WaitFunction\" parameters=\"key\"><![CDATA[\r\n    key = UCase(key)\r\n    key = Asc(key)\r\n    if (key<Asc(\"A\") or key>Asc(\"Z\")) {\r\n      error (\"The key must be a letter!\")\r\n    }\r\n    // DEBUGGING\r\n    // msg(key)\r\n    msg (\"<div style='display:none' id='pressToContinue'><center><h4>PRESS \"+Chr(key)+\" TO CONTINUE!</h4></center></div>\")\r\n    JS.eval (\"$('#pressToContinue').insertBefore($('#txtCommand')).css('display','block');setInterfaceString('TypeHereLabel','Press \"+Chr(key)+\" to continue!');$('input').bind('keyup',function(e){var value = (e.keyCode);if(value !== parseInt('\"+key+\"')){document.getElementById('txtCommand').value = '';setInterfaceString('TypeHereLabel','You must press \"+Chr(key)+\"');}else{\t$('input').unbind('keyup');\tsetInterfaceString('TypeHereLabel','Type here...');$('#pressToContinue').hide();document.getElementById('txtCommand').value = '';}});\")\r\n  ]]></function>\r\n</asl>\r\n```\r\n\r\n---\r\nI've got it calling the function in the room's **After enter** script, just in case anyone wants to play with this and change it around.\r\n\r\nJust be sure to wrap your letter in ```\"\"``` in the parameter, just like you would any other string.\r\n\r\nExample:\r\n\r\n```WaitFunction(\"c\")```",
      "EditableFormat": "markdown",
      "HTML": "<p>Sherlocho was trying to get this working back in August.</p>\n<p>https://textadventures.co.uk/forum/quest/topic/fromceo72e2suyw7en4jbw/possible-to-wait-for-a-specific-keypress-to-continue</p>\n<p>Dr. Agon reminded me of this this morning, and mrangel and Pixie have taught me an awful lot about JS since then, so I can make this work now.</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Continue Function\"&gt;\n    &lt;gameid&gt;176bc4ca-f00d-456f-bfc9-b90bf4452749&lt;/gameid&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description type=\"string\"&gt;&lt;/description&gt;\n    &lt;enter type=\"script\"&gt;\n      WaitFunction (\"g\")\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;function name=\"WaitFunction\" parameters=\"key\"&gt;&lt;![CDATA[\n    key = UCase(key)\n    key = Asc(key)\n    if (key&lt;Asc(\"A\") or key&gt;Asc(\"Z\")) {\n      error (\"The key must be a letter!\")\n    }\n    // DEBUGGING\n    // msg(key)\n    msg (\"&lt;div style='display:none' id='pressToContinue'&gt;&lt;center&gt;&lt;h4&gt;PRESS \"+Chr(key)+\" TO CONTINUE!&lt;/h4&gt;&lt;/center&gt;&lt;/div&gt;\")\n    JS.eval (\"$('#pressToContinue').insertBefore($('#txtCommand')).css('display','block');setInterfaceString('TypeHereLabel','Press \"+Chr(key)+\" to continue!');$('input').bind('keyup',function(e){var value = (e.keyCode);if(value !== parseInt('\"+key+\"')){document.getElementById('txtCommand').value = '';setInterfaceString('TypeHereLabel','You must press \"+Chr(key)+\"');}else{\t$('input').unbind('keyup');\tsetInterfaceString('TypeHereLabel','Type here...');$('#pressToContinue').hide();document.getElementById('txtCommand').value = '';}});\")\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>I've got it calling the function in the room's <strong>After enter</strong> script, just in case anyone wants to play with this and change it around.</p>\n<p>Just be sure to wrap your letter in <code>\"\"</code> in the parameter, just like you would any other string.</p>\n<p>Example:</p>\n<p><code>WaitFunction(\"c\")</code></p>\n\n",
      "PostDate": "2017-12-15T20:39:21.620794Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
