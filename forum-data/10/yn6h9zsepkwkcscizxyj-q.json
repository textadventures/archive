{
  "Topic": {
    "TopicId": "yn6h9zsepkwkcscizxyj-q",
    "ForumId": "10",
    "Title": "Waiting for ShowMenu",
    "LastUpdated": "2018-04-09T06:29:56.6195364Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "34c34488-2394-42fe-80fb-680d40453ab6",
      "UserId": 352042,
      "Username": "StallKross",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7005f3b07e2be71c0346b41a468902b3?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I wanted to present a list of options to the player to choose from during character creation, I used the ShowMenu function for that purpose, but as I found out it doesn't wait for the result to run the rest of the code. I've read some topics on the forum related to that subject and the page about blocks and script (http://docs.textadventures.co.uk/quest/blocks_and_scripts.html), but didn't figured out yet how to make the game do what I want:\r\nShow the menu with the list of choices, wait for the player to pick one of the options, then run the rest of the code after that.\r\nI would appreciate any help.",
      "EditableFormat": "markdown",
      "HTML": "<p>I wanted to present a list of options to the player to choose from during character creation, I used the ShowMenu function for that purpose, but as I found out it doesn't wait for the result to run the rest of the code. I've read some topics on the forum related to that subject and the page about blocks and script (http://docs.textadventures.co.uk/quest/blocks_and_scripts.html), but didn't figured out yet how to make the game do what I want:<br>\nShow the menu with the list of choices, wait for the player to pick one of the options, then run the rest of the code after that.<br>\nI would appreciate any help.</p>\n\n",
      "PostDate": "2018-04-09T06:29:56.6195364Z",
      "LastEditDate": "2018-04-09T06:31:37.7177093Z",
      "link": null
    },
    {
      "PostId": "70c6ce9d-1b52-413b-9327-e336c0a94aaf",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "for what you want, it can be done with a 'wait' Script/Function nested within the 'show menu / ShowMenu' Script/Function, and then nested within the 'wait' Script/Function is the code you want to wait (for a key press or mouse click) before it is done/run:\r\n\r\nan example:\r\n\r\n```\r\nshow menu (\"Race?\", split (\"human;dwarf;elf;gnome;halfling;giant\", \";\"), false) {\r\n  player.race = result\r\n  wait {\r\n    msg (\"Race: \" + player.race)\r\n  }\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>for what you want, it can be done with a 'wait' Script/Function nested within the 'show menu / ShowMenu' Script/Function, and then nested within the 'wait' Script/Function is the code you want to wait (for a key press or mouse click) before it is done/run:</p>\n<p>an example:</p>\n<pre><code>show menu (\"Race?\", split (\"human;dwarf;elf;gnome;halfling;giant\", \";\"), false) {\n  player.race = result\n  wait {\n    msg (\"Race: \" + player.race)\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2018-04-09T08:31:19.0674541Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "56819889-3df1-41c6-8295-6df18d5951d0",
      "UserId": 352042,
      "Username": "StallKross",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7005f3b07e2be71c0346b41a468902b3?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Tried this before, It works for the blocks and scripts nested within the ```wait``` function script, but the real problem I'm having is that when I run the game and get to that step of the character creation where I used the ```ShowMenu``` the description of the starting room leaks in showing along with the list of choices.",
      "EditableFormat": "markdown",
      "HTML": "<p>Tried this before, It works for the blocks and scripts nested within the <code>wait</code> function script, but the real problem I'm having is that when I run the game and get to that step of the character creation where I used the <code>ShowMenu</code> the description of the starting room leaks in showing along with the list of choices.</p>\n\n",
      "PostDate": "2018-04-09T09:02:05.7979295Z",
      "LastEditDate": "2018-04-09T09:04:31.0408729Z",
      "link": null
    },
    {
      "PostId": "5634f246-9b97-4187-8443-324afb7d8415",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "ah... you're probably going have to turn off the 'auto room description', and manually put in the 'show room description' into the 'wait' Script/Function, I have the same problem with it too, and I think this is the only way to do it, aside from tracking down where this is within the underlying quest engine code and fixing/editing/adjusting it... way beyond my ability... lol",
      "EditableFormat": "markdown",
      "HTML": "<p>ah... you're probably going have to turn off the 'auto room description', and manually put in the 'show room description' into the 'wait' Script/Function, I have the same problem with it too, and I think this is the only way to do it, aside from tracking down where this is within the underlying quest engine code and fixing/editing/adjusting it... way beyond my ability... lol</p>\n\n",
      "PostDate": "2018-04-09T10:22:55.0614983Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c620bb63-beaa-4991-b1bf-330cc5244235",
      "UserId": 329383,
      "Username": "J_J",
      "AvatarUrl": "https://secure.gravatar.com/avatar/d6dcf2651a8e3cfe546c1fe096981552?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I might be misunderstanding the issue, but could you move the player in an empty character creation room, and then transport them to the starting room once they are done?",
      "EditableFormat": "markdown",
      "HTML": "<p>I might be misunderstanding the issue, but could you move the player in an empty character creation room, and then transport them to the starting room once they are done?</p>\n\n",
      "PostDate": "2018-04-09T10:22:56.5335745Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b955ba90-a6c0-485b-aef4-eb1098af2dc2",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Show the menu with the list of choices, wait for the player to pick one of the options, then run the rest of the code after that.\r\n\r\nEasy. Put the rest of the code inside the menu block.\r\n\r\n> the description of the starting room leaks in\r\n\r\nThere are a few ways to deal with this. (as other people have suggested while I was writing this)\r\n\r\nI believe the simplest is to make a room just for character creation. Give it an alias like \"Character Creation\", and no description. Then move the player to the actual starting room after they answered all the questions. This has the advantage that the first room's alias doesn't show up in the title bar until character creation is done.\r\n\r\nAlternatively, you could untick the option \"Show room description when entering a room\" on the game object, and then after your last menu has been answered do:\r\n```\r\n  game.showdescriptiononenter = true\r\n  ShowRoomDescription()\r\n```\r\n\r\n\r\nI found that for me, the easiest way to arrange a character creation script is to put the options in a turnscript. That way, you don't end up with a dozen menus inside each other, crushed up at the right hand side of the editor window. Something like this:\r\n```\r\nif (not HasAttribute (player, \"gender\")) {\r\n  ShowMenu (\"Gender?\", Split (\"boy;girl;other;undecided\"), true) {\r\n    player.gender = result\r\n    msg (\"OK, you're \"+result)\r\n  }\r\n}\r\nelse if (not HasAttribute (player, \"sex\")) {\r\n  ShowMenu (\"Sex?\", Split (\"XX,XY,XXY,X0,YY\"), true) {\r\n    player.sex = result\r\n    msg (\"OK, you're \"+result)\r\n  }\r\n}\r\nelse if (not HasAttribute (player, \"race\")) {\r\n  ShowMenu (\"Race?\", Split (\"human;orc;Greek;elf;green;yellow;300m;marathon\"), true) {\r\n    player.race = result\r\n    msg (\"OK, you're \"+result)\r\n  }\r\n}\r\nelse {\r\n  DisableTurnScript (this)\r\n  game.showdescriptiononenter = true\r\n  ShowRoomDescription()\r\n}\r\n```\r\n(note that this wouldn't run on the first turn unless you put `RunTurnScripts` in your start script)",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Show the menu with the list of choices, wait for the player to pick one of the options, then run the rest of the code after that.</p>\n</blockquote>\n<p>Easy. Put the rest of the code inside the menu block.</p>\n<blockquote>\n<p>the description of the starting room leaks in</p>\n</blockquote>\n<p>There are a few ways to deal with this. (as other people have suggested while I was writing this)</p>\n<p>I believe the simplest is to make a room just for character creation. Give it an alias like \"Character Creation\", and no description. Then move the player to the actual starting room after they answered all the questions. This has the advantage that the first room's alias doesn't show up in the title bar until character creation is done.</p>\n<p>Alternatively, you could untick the option \"Show room description when entering a room\" on the game object, and then after your last menu has been answered do:</p>\n<pre><code>  game.showdescriptiononenter = true\n  ShowRoomDescription()\n</code></pre>\n<p>I found that for me, the easiest way to arrange a character creation script is to put the options in a turnscript. That way, you don't end up with a dozen menus inside each other, crushed up at the right hand side of the editor window. Something like this:</p>\n<pre><code>if (not HasAttribute (player, \"gender\")) {\n  ShowMenu (\"Gender?\", Split (\"boy;girl;other;undecided\"), true) {\n    player.gender = result\n    msg (\"OK, you're \"+result)\n  }\n}\nelse if (not HasAttribute (player, \"sex\")) {\n  ShowMenu (\"Sex?\", Split (\"XX,XY,XXY,X0,YY\"), true) {\n    player.sex = result\n    msg (\"OK, you're \"+result)\n  }\n}\nelse if (not HasAttribute (player, \"race\")) {\n  ShowMenu (\"Race?\", Split (\"human;orc;Greek;elf;green;yellow;300m;marathon\"), true) {\n    player.race = result\n    msg (\"OK, you're \"+result)\n  }\n}\nelse {\n  DisableTurnScript (this)\n  game.showdescriptiononenter = true\n  ShowRoomDescription()\n}\n</code></pre>\n<p>(note that this wouldn't run on the first turn unless you put <code>RunTurnScripts</code> in your start script)</p>\n\n",
      "PostDate": "2018-04-09T10:40:42.5888003Z",
      "LastEditDate": "2018-04-09T14:58:51.319049Z",
      "link": null
    },
    {
      "PostId": "5601a884-f2e3-4346-92b7-29f8fa2394b5",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You could play/put a function in the game's start script, and use ShowMenu or show menu. I've done that before.",
      "EditableFormat": "markdown",
      "HTML": "<p>You could play/put a function in the game's start script, and use ShowMenu or show menu. I've done that before.</p>\n\n",
      "PostDate": "2018-04-09T14:53:06.6666728Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "65979dd0-6dd5-49d9-8c55-66655e39a4c1",
      "UserId": 352042,
      "Username": "StallKross",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7005f3b07e2be71c0346b41a468902b3?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I was hoping for an elegant solution, but the ones suggested will work. Thanks to everyone that replied. (:\r\n\r\n@jmnevil54 that's what I was doing, but I had the problem with the room description anyway.",
      "EditableFormat": "markdown",
      "HTML": "<p>I was hoping for an elegant solution, but the ones suggested will work. Thanks to everyone that replied. (:</p>\n<p>@jmnevil54 that's what I was doing, but I had the problem with the room description anyway.</p>\n\n",
      "PostDate": "2018-04-09T17:32:16.9359288Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bc4dd04e-62ce-4ee8-b4d4-a3957536cdfa",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh. Have you tried putting the Show Menu in the room description?",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh. Have you tried putting the Show Menu in the room description?</p>\n\n",
      "PostDate": "2018-04-09T17:45:56.2891247Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f433b219-7b1d-4410-a358-e0073e77ef14",
      "UserId": 248029,
      "Username": "Anonynn",
      "AvatarUrl": "https://i.imgur.com/1xu84dwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have a blank template for a character creation with Show Menu/Function if you would like to use it. Here it is.\r\n\r\n```\r\nClearScreen\r\nmsg (\"\")\r\nShowMenu (\"\", game.nameofmenuhere, false) {\r\n  switch (result) {\r\n    case (\"Question 1\") {\r\n      list remove (game.nameofmenuhere, \"Question 1\")\r\n      list add (game.nameofmenuhere, \"Question 2\")\r\n      NameofFunctionHere\r\n    }\r\n    case (\"Question 2\") {\r\n      msg (\"\")\r\n        ShowMenu (\"\", menulist, false) {\r\n          if (result = \"Choice 1\") {\r\n            list remove (game.nameofmenuhere, \"Question 2\")\r\n            list add (game.nameofmenuhere, \"Question 3\")\r\n            ClearScreen\r\n            NameofFunctionHere\r\n          }\r\n          else if (result = \"Choice 2\") {\r\n            list remove (game.nameofmenuhere, \"Question 2\")\r\n            list add (game.nameofmenuhere, \"Question 3\")\r\n            ClearScreen\r\n            NameofFunctionHere\r\n          }\r\n       }\r\n\t   }\r\n    case (\"Question 3\") {\r\n      msg (\"\")\r\n      menulist = Split(\"Choice 1;Choice 2;Random\", \";\")\r\n      ShowMenu (\"\", menulist, false) {\r\n        if (result = \"Choice 1\") {\r\n          ClearScreen\r\n          list remove (game.nameofmenuhere, \"Question 3\")\r\n          list add (game.nameofmenuhere, \"Question 4\")\r\n          NameofFunctionHere\r\n        }\r\n        else if (result= \"Choice 2\") {\r\n          ClearScreen\r\n          list remove (game.nameofmenuhere, \"Question 3\")\r\n          list add (game.nameofmenuhere, \"Question 4\")\r\n          NameofFunctionHere\r\n        }\r\n        else if (result= \"Random\") {\r\n\t\t}\r\n }\r\n }\r\n    case (\"Question 4\") {\r\n      msg (\"\")\r\n      get input {\r\n        player.alias = result\r\n        msg (\"<br/>Pleased to meet you, <font color=\\\"dedede\\\">{player.alias}</font color>! \")\r\n        wait {\r\n          ClearScreen\r\n          list remove (game.nameofmenuhere, \"Question 4\")\r\n          list add (game.nameofmenuhere, \"Question 5\")\r\n          NameofFunctionHere\r\n        }\r\n      }\r\n    }\r\n    case (\"Question 5\") {\r\n      msg (\"\")\r\n                ClearScreen\r\n                MoveObject (player, NameofRoomHere)\r\n              }\r\n            }\r\n\t}\r\n```\r\n\r\nAnonynn. ",
      "EditableFormat": "markdown",
      "HTML": "<p>I have a blank template for a character creation with Show Menu/Function if you would like to use it. Here it is.</p>\n<pre><code>ClearScreen\nmsg (\"\")\nShowMenu (\"\", game.nameofmenuhere, false) {\n  switch (result) {\n    case (\"Question 1\") {\n      list remove (game.nameofmenuhere, \"Question 1\")\n      list add (game.nameofmenuhere, \"Question 2\")\n      NameofFunctionHere\n    }\n    case (\"Question 2\") {\n      msg (\"\")\n        ShowMenu (\"\", menulist, false) {\n          if (result = \"Choice 1\") {\n            list remove (game.nameofmenuhere, \"Question 2\")\n            list add (game.nameofmenuhere, \"Question 3\")\n            ClearScreen\n            NameofFunctionHere\n          }\n          else if (result = \"Choice 2\") {\n            list remove (game.nameofmenuhere, \"Question 2\")\n            list add (game.nameofmenuhere, \"Question 3\")\n            ClearScreen\n            NameofFunctionHere\n          }\n       }\n\t   }\n    case (\"Question 3\") {\n      msg (\"\")\n      menulist = Split(\"Choice 1;Choice 2;Random\", \";\")\n      ShowMenu (\"\", menulist, false) {\n        if (result = \"Choice 1\") {\n          ClearScreen\n          list remove (game.nameofmenuhere, \"Question 3\")\n          list add (game.nameofmenuhere, \"Question 4\")\n          NameofFunctionHere\n        }\n        else if (result= \"Choice 2\") {\n          ClearScreen\n          list remove (game.nameofmenuhere, \"Question 3\")\n          list add (game.nameofmenuhere, \"Question 4\")\n          NameofFunctionHere\n        }\n        else if (result= \"Random\") {\n\t\t}\n }\n }\n    case (\"Question 4\") {\n      msg (\"\")\n      get input {\n        player.alias = result\n        msg (\"&lt;br/&gt;Pleased to meet you, &lt;font color=\\\"dedede\\\"&gt;{player.alias}&lt;/font color&gt;! \")\n        wait {\n          ClearScreen\n          list remove (game.nameofmenuhere, \"Question 4\")\n          list add (game.nameofmenuhere, \"Question 5\")\n          NameofFunctionHere\n        }\n      }\n    }\n    case (\"Question 5\") {\n      msg (\"\")\n                ClearScreen\n                MoveObject (player, NameofRoomHere)\n              }\n            }\n\t}\n</code></pre>\n<p>Anonynn.</p>\n\n",
      "PostDate": "2018-04-11T06:03:57.5151882Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cea194d8-b282-4f70-a49d-993ba1476d85",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Isn't **Waiting for ShowMenu** the name of that Tom Hanks / Meg Ryan movie about how two people fall in love while discussing interactive fiction over the internet?\r\n\r\n<details><summary>CLICK HERE FOR A SPOILER!</summary>\r\n\r\nThey never get together.  The movie's run-time exceeds 2 hours.  Don't watch it.\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>Isn't <strong>Waiting for ShowMenu</strong> the name of that Tom Hanks / Meg Ryan movie about how two people fall in love while discussing interactive fiction over the internet?</p>\n<details><summary>CLICK HERE FOR A SPOILER!</summary>\n<p>They never get together.  The movie's run-time exceeds 2 hours.  Don't watch it.</p>\n</details>\n\n",
      "PostDate": "2018-04-11T14:53:21.7668302Z",
      "LastEditDate": "2018-04-11T14:53:53.2246516Z",
      "link": null
    }
  ]
}
