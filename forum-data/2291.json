{
  "Topic": {
    "TopicId": "2291",
    "ForumId": "10",
    "Title": "hitpoint variable and healing...",
    "LastUpdated": "2010-08-03T20:48:19+01:00",
    "ReplyCount": 4
  },
  "Posts": [
    {
      "PostId": "17378",
      "UserId": 0,
      "Username": "Tomsa",
      "UserAvatar": null,
      "UserGravatar": "ef37a3599eb99171e2b32ae318749ff7",
      "EditableText": "Suppose I have a numeric variable called HP with the value 25, and make a healing spell that will increment this value 2-8 points each time it is cast, how do I prevent the HP value from exceeding 25?\n\nThe same question also applies when discussing destruction spells that would decrement the same value, but should be limited to 0, and not past that point into minus HP (such as -7HP).",
      "EditableFormat": "bbcode",
      "HTML": "Suppose I have a numeric variable called HP with the value 25, and make a healing spell that will increment this value 2-8 points each time it is cast, how do I prevent the HP value from exceeding 25?<br/><br/>The same question also applies when discussing destruction spells that would decrement the same value, but should be limited to 0, and not past that point into minus HP (such as -7HP).",
      "PostDate": "2010-08-02T16:05:56+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "17379",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "Set the variable up as a Status Variable. Then you can run a script each time the value changes - if the value is less than zero, set it to zero, and if it's above the maximum, set it to the maximum.",
      "EditableFormat": "bbcode",
      "HTML": "Set the variable up as a Status Variable. Then you can run a script each time the value changes - if the value is less than zero, set it to zero, and if it's above the maximum, set it to the maximum.",
      "PostDate": "2010-08-02T20:01:26+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "17380",
      "UserId": 0,
      "Username": "Tomsa",
      "UserAvatar": null,
      "UserGravatar": "ef37a3599eb99171e2b32ae318749ff7",
      "EditableText": "I seem to have solved the problem now, but...the game crashes a lot! Since I have made enough variables and if statements to make my head spin, perhaps it is better for me to post the ASL. It should be perfectly playable by now, if it weren't for all the crashes.\n\n' &quot;The Dice of Death&quot;\n' Created with QDK Pro 4.1.2\n\n!include &lt;stdverbs.lib&gt;\n\ndefine game &lt;The Dice of Death&gt;\n\tasl-version &lt;410&gt;\n\tstart &lt;the chamber of deadly games&gt;\n\tgame info &lt;Created with QDK Pro 4.1.2&gt;\n\tdefault fontsize &lt;16&gt;\n\tbackground &lt;black&gt;\n\tforeground &lt;white&gt;\n\tstartscript give &lt;dice d6&gt;\n\tdefine variable &lt;d6&gt;\n\t\ttype numeric\n\t\tvalue &lt;0&gt;\n\t\tdisplay &lt;!dice&gt;\n\t\tonchange {\n\t\t\tselect case &lt;%d6%&gt; {\n\t\t\t\tcase &lt;1&gt; {\n\t\t\t\t\tif flag &lt;guardian's turn&gt; then {\n\t\t\t\t\t\tmsg &lt;...but nothing happens!&gt;\n\t\t\t\t\t\tflag off &lt;Guardian's turn&gt;\n\t\t\t\t\t\tchoose &lt;dice&gt; } else {\n\t\t\t\t\t\tmsg &lt;...but nothing happens!&gt;\n\t\t\t\t\t\tflag on &lt;Guardian's turn&gt;\n\t\t\t\t\t\tdo &lt;Guardian &gt; }}\n\t\t\t\tcase &lt;2&gt; {\n\t\t\t\t\tif flag &lt;guardian's turn&gt; then {\n\t\t\t\t\t\tif ( %guardian hp% = 25 ) then {\n\t\t\t\t\t\t\tmsg &lt;|s00The Guardian heals himself...but his HP is already at maximum.&gt;\n\t\t\t\t\t\t\tflag off &lt;Guardian's turn&gt;\n\t\t\t\t\t\t\tchoose &lt;dice&gt; } else {\n\t\t\t\t\t\t\tmsg &lt;The Guardian heals one d6.&gt;\n\t\t\t\t\t\t\tinc &lt;guardian hp; $rand(1; 6)$&gt;\n\t\t\t\t\t\t\tflag off &lt;Guardian's turn&gt;\n\t\t\t\t\t\t\tchoose &lt;dice&gt; } } else {\n\t\t\t\t\t\tif ( %hp% = 25 ) then {\n\t\t\t\t\t\t\tmsg &lt;|s00You need no healing - Your HP are maxed!&gt;\n\t\t\t\t\t\t\tflag on &lt;Guardian's turn&gt;\n\t\t\t\t\t\t\tdo &lt;Guardian &gt; } else {\n\t\t\t\t\t\t\tmsg &lt;You heal one d6.&gt;\n\t\t\t\t\t\t\tinc &lt;hp; $rand(1; 6)$&gt;\n\t\t\t\t\t\t\tflag on &lt;Guardian's turn&gt;\n\t\t\t\t\t\t\tdo &lt;Guardian &gt; } }}\n\t\t\t\tcase &lt;3&gt; {\n\t\t\t\t\tif flag &lt;guardian's turn&gt; then {\n\t\t\t\t\t\tmsg &lt;The Guardian damages you for one d6!&gt;\n\t\t\t\t\t\tdec &lt;hp; $rand(1; 6)$&gt;\n\t\t\t\t\t\tflag off &lt;Guardian's turn&gt;\n\t\t\t\t\t\tchoose &lt;dice&gt; } else {\n\t\t\t\t\t\tmsg &lt;You damage your foe for one d6!&gt;\n\t\t\t\t\t\tdec &lt;guardian hp; $rand(1; 6)$&gt;\n\t\t\t\t\t\tflag on &lt;Guardian's turn&gt;\n\t\t\t\t\t\tdo &lt;Guardian &gt; }}\n\t\t\t\tcase &lt;4&gt; {\n\t\t\t\t\tif flag &lt;guardian's turn&gt; then {\n\t\t\t\t\t\tmsg &lt;The Guardian gains an extra turn! &gt;\n\t\t\t\t\t\tdo &lt;Guardian &gt; } else {\n\t\t\t\t\t\tmsg &lt;You gain an extra turn! &gt;\n\t\t\t\t\t\tchoose &lt;dice&gt; }}\n\t\t\t\tcase &lt;5&gt; {\n\t\t\t\t\tif flag &lt;guardian's turn&gt; then {\n\t\t\t\t\t\tmsg &lt;&quot;I fart in your general direction!&quot;, the Guardian taunts you in an outrageous French accent.&gt;\n\t\t\t\t\t\tflag off &lt;guardian's turn&gt;\n\t\t\t\t\t\tchoose &lt;dice&gt; } else {\n\t\t\t\t\t\tmsg &lt;&quot;I wave my testicles at your aunts!&quot; you taunt the Guardian by imitating his accent.&gt;\n\t\t\t\t\t\tflag on &lt;guardian's turn&gt;\n\t\t\t\t\t\tdo &lt;Guardian &gt; }}\n\t\t\t\tcase &lt;6&gt; {\n\t\t\t\t\tif flag &lt;guardian's turn&gt; then {\n\t\t\t\t\t\tmsg &lt;Critical strike! The guardian damages you for one d12.&gt;\n\t\t\t\t\t\tdec &lt;hp; $rand(1; 12)$&gt;\n\t\t\t\t\t\tflag off &lt;guardian's turn&gt;\n\t\t\t\t\t\tchoose &lt;dice&gt; } else {\n\t\t\t\t\t\tmsg &lt;Critical strike! You damage your foe for one d12.&gt;\n\t\t\t\t\t\tdec &lt;guardian hp; $rand(1; 12)$&gt;\n\t\t\t\t\t\tflag on &lt;Guardian's turn&gt;\n\t\t\t\t\t\tdo &lt;Guardian &gt; }}\n\t\t\t\t}\n\t\t}\n\tend define\n\tdefine variable &lt;HP&gt;\n\t\ttype numeric\n\t\tvalue &lt;25&gt;\n\t\tdisplay &lt;!HP&gt;\n\t\tonchange {\n\t\t\tif ( %hp% &lt;= 0 ) then {\n\t\t\t\tset numeric &lt;hp; 0&gt;\n\t\t\t\tflag off &lt;guardian's turn&gt;\n\t\t\t\tdisplaytext &lt;lose&gt;\n\t\t\t\tplayerlose } else {\n\t\t\t\tif ( %hp% &gt; 25 ) then set numeric &lt;hp; 25&gt; }\n\t\t}\n\tend define\n\tdefine variable &lt;Guardian HP&gt;\n\t\ttype numeric\n\t\tvalue &lt;25&gt;\n\t\tdisplay &lt;!Guardian HP&gt;\n\t\tonchange {\n\t\t\tif ( %guardian hp% &lt;= 0 ) then {\n\t\t\t\tset numeric &lt;guardian hp; 0&gt;\n\t\t\t\tflag off &lt;guardian's turn&gt;\n\t\t\t\tdisplaytext &lt;win&gt;\n\t\t\t\tplayerwin } else {\n\t\t\t\tif ( %guardian hp% &gt; 25 ) then set numeric &lt;guardian hp; 25&gt; }\n\t\t}\n\tend define\nend define\n\ndefine options\n\tdebug on\n\tpanes on\n\tabbreviations on\nend define\n\ndefine room &lt;the chamber of deadly games&gt;\n\tdescription &lt;|s09Welcome to Dice of Death!|n|nIn this game you battle against the mysterious Guardian by taking turns using a d6 dice. Each of the six sides of the dice represents an effect, for instance, getting a 3 will damage your opponent for one d6 (1-6 damage) while getting a 5 will result in the taunting of eachother and so forth. When either your or the Guardian's hitpoints reaches 0, the game ends. |n|nStart the game by using the dice d6 in your inventory, which you find in the upper right of the screen.|s00&gt;\n\n\tdefine object &lt;dice d6&gt;\n\t\ttake\n\t\tdisplaytype &lt;Object&gt;\n\t\tarticle &lt;it&gt;\n\t\tgender &lt;it&gt;\n\t\tuse choose &lt;dice&gt;\n\tend define\n\n\tdefine object &lt;Guardian&gt;\n\t\tlook &lt;The black skinned Guardian is dressed in a hooded white robe. A pair of blue eyes are staring intensly at you.&gt;\n\t\tspeak &lt;&quot;When you are ready, use the dice, and we shall do battle!&quot;, the Guardian speaks in an ominous voice.&gt;\n\t\tdisplaytype &lt;Object&gt;\n\t\tarticle &lt;it&gt;\n\t\tgender &lt;it&gt;\n\tend define\n\nend define\n\ndefine procedure &lt;Guardian &gt;\n\tmsg &lt;|s00The Guardian throws the dice...&gt;\n\tset numeric &lt;d6; $rand(1; 6)$&gt;\nend define\n\ndefine text &lt;win&gt;\nYou defeated the Guardian. Congratulations - you have won the game!\nend define\n\ndefine text &lt;lose&gt;\nYou were defeated by the Guardian. The game is over!\nend define\n\ndefine selection &lt;dice&gt;\n\tchoice &lt;throw dice&gt; {\n\t\tmsg &lt;You throw the dice...&gt;\n\t\tset numeric &lt;d6; $rand(1; 6)$&gt;\n\t}\n\tchoice &lt;give up&gt; playerlose\nend define",
      "EditableFormat": "bbcode",
      "HTML": "I seem to have solved the problem now, but...the game crashes a lot! Since I have made enough variables and if statements to make my head spin, perhaps it is better for me to post the ASL. It should be perfectly playable by now, if it weren't for all the crashes.<br/><br/>' &quot;The Dice of Death&quot;<br/>' Created with QDK Pro 4.1.2<br/><br/>!include &lt;stdverbs.lib&gt;<br/><br/>define game &lt;The Dice of Death&gt;<br/>\tasl-version &lt;410&gt;<br/>\tstart &lt;the chamber of deadly games&gt;<br/>\tgame info &lt;Created with QDK Pro 4.1.2&gt;<br/>\tdefault fontsize &lt;16&gt;<br/>\tbackground &lt;black&gt;<br/>\tforeground &lt;white&gt;<br/>\tstartscript give &lt;dice d6&gt;<br/>\tdefine variable &lt;d6&gt;<br/>\t\ttype numeric<br/>\t\tvalue &lt;0&gt;<br/>\t\tdisplay &lt;!dice&gt;<br/>\t\tonchange {<br/>\t\t\tselect case &lt;%d6%&gt; {<br/>\t\t\t\tcase &lt;1&gt; {<br/>\t\t\t\t\tif flag &lt;guardian's turn&gt; then {<br/>\t\t\t\t\t\tmsg &lt;...but nothing happens!&gt;<br/>\t\t\t\t\t\tflag off &lt;Guardian's turn&gt;<br/>\t\t\t\t\t\tchoose &lt;dice&gt; } else {<br/>\t\t\t\t\t\tmsg &lt;...but nothing happens!&gt;<br/>\t\t\t\t\t\tflag on &lt;Guardian's turn&gt;<br/>\t\t\t\t\t\tdo &lt;Guardian &gt; }}<br/>\t\t\t\tcase &lt;2&gt; {<br/>\t\t\t\t\tif flag &lt;guardian's turn&gt; then {<br/>\t\t\t\t\t\tif ( %guardian hp% = 25 ) then {<br/>\t\t\t\t\t\t\tmsg &lt;|s00The Guardian heals himself...but his HP is already at maximum.&gt;<br/>\t\t\t\t\t\t\tflag off &lt;Guardian's turn&gt;<br/>\t\t\t\t\t\t\tchoose &lt;dice&gt; } else {<br/>\t\t\t\t\t\t\tmsg &lt;The Guardian heals one d6.&gt;<br/>\t\t\t\t\t\t\tinc &lt;guardian hp; $rand(1; 6)$&gt;<br/>\t\t\t\t\t\t\tflag off &lt;Guardian's turn&gt;<br/>\t\t\t\t\t\t\tchoose &lt;dice&gt; } } else {<br/>\t\t\t\t\t\tif ( %hp% = 25 ) then {<br/>\t\t\t\t\t\t\tmsg &lt;|s00You need no healing - Your HP are maxed!&gt;<br/>\t\t\t\t\t\t\tflag on &lt;Guardian's turn&gt;<br/>\t\t\t\t\t\t\tdo &lt;Guardian &gt; } else {<br/>\t\t\t\t\t\t\tmsg &lt;You heal one d6.&gt;<br/>\t\t\t\t\t\t\tinc &lt;hp; $rand(1; 6)$&gt;<br/>\t\t\t\t\t\t\tflag on &lt;Guardian's turn&gt;<br/>\t\t\t\t\t\t\tdo &lt;Guardian &gt; } }}<br/>\t\t\t\tcase &lt;3&gt; {<br/>\t\t\t\t\tif flag &lt;guardian's turn&gt; then {<br/>\t\t\t\t\t\tmsg &lt;The Guardian damages you for one d6!&gt;<br/>\t\t\t\t\t\tdec &lt;hp; $rand(1; 6)$&gt;<br/>\t\t\t\t\t\tflag off &lt;Guardian's turn&gt;<br/>\t\t\t\t\t\tchoose &lt;dice&gt; } else {<br/>\t\t\t\t\t\tmsg &lt;You damage your foe for one d6!&gt;<br/>\t\t\t\t\t\tdec &lt;guardian hp; $rand(1; 6)$&gt;<br/>\t\t\t\t\t\tflag on &lt;Guardian's turn&gt;<br/>\t\t\t\t\t\tdo &lt;Guardian &gt; }}<br/>\t\t\t\tcase &lt;4&gt; {<br/>\t\t\t\t\tif flag &lt;guardian's turn&gt; then {<br/>\t\t\t\t\t\tmsg &lt;The Guardian gains an extra turn! &gt;<br/>\t\t\t\t\t\tdo &lt;Guardian &gt; } else {<br/>\t\t\t\t\t\tmsg &lt;You gain an extra turn! &gt;<br/>\t\t\t\t\t\tchoose &lt;dice&gt; }}<br/>\t\t\t\tcase &lt;5&gt; {<br/>\t\t\t\t\tif flag &lt;guardian's turn&gt; then {<br/>\t\t\t\t\t\tmsg &lt;&quot;I fart in your general direction!&quot;, the Guardian taunts you in an outrageous French accent.&gt;<br/>\t\t\t\t\t\tflag off &lt;guardian's turn&gt;<br/>\t\t\t\t\t\tchoose &lt;dice&gt; } else {<br/>\t\t\t\t\t\tmsg &lt;&quot;I wave my testicles at your aunts!&quot; you taunt the Guardian by imitating his accent.&gt;<br/>\t\t\t\t\t\tflag on &lt;guardian's turn&gt;<br/>\t\t\t\t\t\tdo &lt;Guardian &gt; }}<br/>\t\t\t\tcase &lt;6&gt; {<br/>\t\t\t\t\tif flag &lt;guardian's turn&gt; then {<br/>\t\t\t\t\t\tmsg &lt;Critical strike! The guardian damages you for one d12.&gt;<br/>\t\t\t\t\t\tdec &lt;hp; $rand(1; 12)$&gt;<br/>\t\t\t\t\t\tflag off &lt;guardian's turn&gt;<br/>\t\t\t\t\t\tchoose &lt;dice&gt; } else {<br/>\t\t\t\t\t\tmsg &lt;Critical strike! You damage your foe for one d12.&gt;<br/>\t\t\t\t\t\tdec &lt;guardian hp; $rand(1; 12)$&gt;<br/>\t\t\t\t\t\tflag on &lt;Guardian's turn&gt;<br/>\t\t\t\t\t\tdo &lt;Guardian &gt; }}<br/>\t\t\t\t}<br/>\t\t}<br/>\tend define<br/>\tdefine variable &lt;HP&gt;<br/>\t\ttype numeric<br/>\t\tvalue &lt;25&gt;<br/>\t\tdisplay &lt;!HP&gt;<br/>\t\tonchange {<br/>\t\t\tif ( %hp% &lt;= 0 ) then {<br/>\t\t\t\tset numeric &lt;hp; 0&gt;<br/>\t\t\t\tflag off &lt;guardian's turn&gt;<br/>\t\t\t\tdisplaytext &lt;lose&gt;<br/>\t\t\t\tplayerlose } else {<br/>\t\t\t\tif ( %hp% &gt; 25 ) then set numeric &lt;hp; 25&gt; }<br/>\t\t}<br/>\tend define<br/>\tdefine variable &lt;Guardian HP&gt;<br/>\t\ttype numeric<br/>\t\tvalue &lt;25&gt;<br/>\t\tdisplay &lt;!Guardian HP&gt;<br/>\t\tonchange {<br/>\t\t\tif ( %guardian hp% &lt;= 0 ) then {<br/>\t\t\t\tset numeric &lt;guardian hp; 0&gt;<br/>\t\t\t\tflag off &lt;guardian's turn&gt;<br/>\t\t\t\tdisplaytext &lt;win&gt;<br/>\t\t\t\tplayerwin } else {<br/>\t\t\t\tif ( %guardian hp% &gt; 25 ) then set numeric &lt;guardian hp; 25&gt; }<br/>\t\t}<br/>\tend define<br/>end define<br/><br/>define options<br/>\tdebug on<br/>\tpanes on<br/>\tabbreviations on<br/>end define<br/><br/>define room &lt;the chamber of deadly games&gt;<br/>\tdescription &lt;|s09Welcome to Dice of Death!|n|nIn this game you battle against the mysterious Guardian by taking turns using a d6 dice. Each of the six sides of the dice represents an effect, for instance, getting a 3 will damage your opponent for one d6 (1-6 damage) while getting a 5 will result in the taunting of eachother and so forth. When either your or the Guardian's hitpoints reaches 0, the game ends. |n|nStart the game by using the dice d6 in your inventory, which you find in the upper right of the screen.|s00&gt;<br/><br/>\tdefine object &lt;dice d6&gt;<br/>\t\ttake<br/>\t\tdisplaytype &lt;Object&gt;<br/>\t\tarticle &lt;it&gt;<br/>\t\tgender &lt;it&gt;<br/>\t\tuse choose &lt;dice&gt;<br/>\tend define<br/><br/>\tdefine object &lt;Guardian&gt;<br/>\t\tlook &lt;The black skinned Guardian is dressed in a hooded white robe. A pair of blue eyes are staring intensly at you.&gt;<br/>\t\tspeak &lt;&quot;When you are ready, use the dice, and we shall do battle!&quot;, the Guardian speaks in an ominous voice.&gt;<br/>\t\tdisplaytype &lt;Object&gt;<br/>\t\tarticle &lt;it&gt;<br/>\t\tgender &lt;it&gt;<br/>\tend define<br/><br/>end define<br/><br/>define procedure &lt;Guardian &gt;<br/>\tmsg &lt;|s00The Guardian throws the dice...&gt;<br/>\tset numeric &lt;d6; $rand(1; 6)$&gt;<br/>end define<br/><br/>define text &lt;win&gt;<br/>You defeated the Guardian. Congratulations - you have won the game!<br/>end define<br/><br/>define text &lt;lose&gt;<br/>You were defeated by the Guardian. The game is over!<br/>end define<br/><br/>define selection &lt;dice&gt;<br/>\tchoice &lt;throw dice&gt; {<br/>\t\tmsg &lt;You throw the dice...&gt;<br/>\t\tset numeric &lt;d6; $rand(1; 6)$&gt;<br/>\t}<br/>\tchoice &lt;give up&gt; playerlose<br/>end define",
      "PostDate": "2010-08-03T12:42:15+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "17381",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "Your script is getting stuck in an infinite loop. You are triggering a script whenever &quot;d6&quot; changes, but that script is then calling the &quot;Guardian&quot; procedure, which itself sets the value of &quot;d6&quot;, which calls the script again...",
      "EditableFormat": "bbcode",
      "HTML": "Your script is getting stuck in an infinite loop. You are triggering a script whenever &quot;d6&quot; changes, but that script is then calling the &quot;Guardian&quot; procedure, which itself sets the value of &quot;d6&quot;, which calls the script again...",
      "PostDate": "2010-08-03T15:42:37+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "17383",
      "UserId": 0,
      "Username": "Tomsa",
      "UserAvatar": null,
      "UserGravatar": "ef37a3599eb99171e2b32ae318749ff7",
      "EditableText": "Yes, I see it quite clearly now...I made Quest vomit by overly complicating things. I will do a hard reset and redo the whole thing, sigh *rolling eyeballs at myself*.",
      "EditableFormat": "bbcode",
      "HTML": "Yes, I see it quite clearly now...I made Quest vomit by overly complicating things. I will do a hard reset and redo the whole thing, sigh *rolling eyeballs at myself*.",
      "PostDate": "2010-08-03T20:48:19+01:00",
      "LastEditDate": null
    }
  ]
}
