{
  "Topic": {
    "TopicId": "hgk6furzi0yzp2lghom8eg",
    "ForumId": "10",
    "Title": "Random 'canAdd' error.",
    "LastUpdated": "2017-12-03T15:25:26.4728449Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "be4ee8b7-be2f-4f6d-9511-125ec79785d5",
      "UserId": 17092,
      "Username": "GAGE HOLSTON",
      "AvatarUrl": "https://secure.gravatar.com/avatar/57b86a567d503acfa104a604accfa863?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sometimes when I'm testing my game I get this seemingly random error:\r\nError running script: Error evaluating expression 'canAdd': Unknown object or variable 'canAdd'\r\nError running script: Unknown object or variable 'canAdd'\r\n\r\nProblem is, I have NO idea where this error could be coming from. My scripts don't seem to have anything wrong with them and I never got this before the Quest desktop update. Is it just a Quest bug, or am I overlooking something?",
      "EditableFormat": "markdown",
      "HTML": "<p>Sometimes when I'm testing my game I get this seemingly random error:<br>\nError running script: Error evaluating expression 'canAdd': Unknown object or variable 'canAdd'<br>\nError running script: Unknown object or variable 'canAdd'</p>\n<p>Problem is, I have NO idea where this error could be coming from. My scripts don't seem to have anything wrong with them and I never got this before the Quest desktop update. Is it just a Quest bug, or am I overlooking something?</p>\n\n",
      "PostDate": "2017-12-03T15:25:26.4728449Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c27a2326-f095-4ec5-a2c7-fb2963b9b832",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Check the scripts around where this error occurs. Without seeing the script, it could be a missing space, or \" in the wrong place. if you can post your script i'm sure the 'Quest' community can help you out.",
      "EditableFormat": "markdown",
      "HTML": "<p>Check the scripts around where this error occurs. Without seeing the script, it could be a missing space, or \" in the wrong place. if you can post your script i'm sure the 'Quest' community can help you out.</p>\n\n",
      "PostDate": "2017-12-03T15:32:52.7050095Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "323259b2-5a0d-48f8-beaa-64201e632827",
      "UserId": 17092,
      "Username": "GAGE HOLSTON",
      "AvatarUrl": "https://secure.gravatar.com/avatar/57b86a567d503acfa104a604accfa863?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Considering it seems to happen randomly, anywhere I'm at in the game, I taking a wild guess that there's something wrong with my \"timer script.\" A mechanic is that the game flows in real time and I use the following timer to do this. The script runs when 1 second passes. Considering the \"canAdd\" bug happens anywhere in the game so far, I'm willing to be something is wrong here. It's the only thing I can think of.\r\n\r\ngame.second = game.second + 1\r\nif (game.second = 60) {\r\n  game.second = 0\r\n  if (game.minuteSECOND = 9) {\r\n    if (game.minuteFIRST = 5) {\r\n      if (game.hour = 12) {\r\n        game.hour = 1\r\n      }\r\n      else {\r\n        game.hour = game.hour + 1\r\n      }\r\n      game.minuteFIRST = 0\r\n      game.minuteSECOND = 0\r\n    }\r\n    else {\r\n      game.minuteSECOND = 0\r\n      game.minuteFIRST = game.minuteFIRST + 1\r\n    }\r\n  }\r\n  else {\r\n    game.minuteSECOND = game.minuteSECOND + 1\r\n  }\r\n}",
      "EditableFormat": "markdown",
      "HTML": "<p>Considering it seems to happen randomly, anywhere I'm at in the game, I taking a wild guess that there's something wrong with my \"timer script.\" A mechanic is that the game flows in real time and I use the following timer to do this. The script runs when 1 second passes. Considering the \"canAdd\" bug happens anywhere in the game so far, I'm willing to be something is wrong here. It's the only thing I can think of.</p>\n<p>game.second = game.second + 1<br>\nif (game.second = 60) {<br>\ngame.second = 0<br>\nif (game.minuteSECOND = 9) {<br>\nif (game.minuteFIRST = 5) {<br>\nif (game.hour = 12) {<br>\ngame.hour = 1<br>\n}<br>\nelse {<br>\ngame.hour = game.hour + 1<br>\n}<br>\ngame.minuteFIRST = 0<br>\ngame.minuteSECOND = 0<br>\n}<br>\nelse {<br>\ngame.minuteSECOND = 0<br>\ngame.minuteFIRST = game.minuteFIRST + 1<br>\n}<br>\n}<br>\nelse {<br>\ngame.minuteSECOND = game.minuteSECOND + 1<br>\n}<br>\n}</p>\n\n",
      "PostDate": "2017-12-03T16:56:46.9365667Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "debf73de-8c4c-4dc0-b30d-4f59f8026335",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello.\r\n\r\nTo make it easier to read your code, you can wrap it in <code>```</code>, like so:\r\n\r\n<pre><code>\r\n```\r\nif (this was a real code){\r\n  msg(\"This would keep the formatting intact.\")\r\n}\r\n```\r\n</code></pre>\r\n\r\nThis would display:\r\n\r\n```\r\nif (this was a real code){\r\n  msg(\"This would keep the formatting intact.\")\r\n}\r\n```\r\n\r\n---\r\nI've taken the liberty of formatting your code..\r\n\r\n```\r\ngame.second = game.second + 1\r\nif (game.second = 60) {\r\n  game.second = 0\r\n  if (game.minuteSECOND = 9) {\r\n    if (game.minuteFIRST = 5) {\r\n      if (game.hour = 12) {\r\n        game.hour = 1\r\n      }\r\n      else {\r\n        game.hour = game.hour + 1\r\n      }\r\n      game.minuteFIRST = 0\r\n      game.minuteSECOND = 0\r\n    }\r\n    else {\r\n      game.minuteSECOND = 0\r\n      game.minuteFIRST = game.minuteFIRST + 1\r\n    }\r\n  }\r\n  else {\r\n    game.minuteSECOND = game.minuteSECOND + 1\r\n  }\r\n}\r\n```\r\n\r\n---\r\n<s>Are you using JS or a SetTimeout to call this script every second?\r\n\r\nCan you paste that code here, too?</s>\r\n\r\nNever mind me.  If I had slowed down a little while reading your post, I'd have known this *is* the SetTimeout script.\r\n\r\nI'll go mess with this and be right back.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello.</p>\n<p>To make it easier to read your code, you can wrap it in <code>```</code>, like so:</p>\n<pre><code>\n```\nif (this was a real code){\n  msg(\"This would keep the formatting intact.\")\n}\n```\n</code></pre>\n<p>This would display:</p>\n<pre><code>if (this was a real code){\n  msg(\"This would keep the formatting intact.\")\n}\n</code></pre>\n<hr>\n<p>I've taken the liberty of formatting your code..</p>\n<pre><code>game.second = game.second + 1\nif (game.second = 60) {\n  game.second = 0\n  if (game.minuteSECOND = 9) {\n    if (game.minuteFIRST = 5) {\n      if (game.hour = 12) {\n        game.hour = 1\n      }\n      else {\n        game.hour = game.hour + 1\n      }\n      game.minuteFIRST = 0\n      game.minuteSECOND = 0\n    }\n    else {\n      game.minuteSECOND = 0\n      game.minuteFIRST = game.minuteFIRST + 1\n    }\n  }\n  else {\n    game.minuteSECOND = game.minuteSECOND + 1\n  }\n}\n</code></pre>\n<hr>\n<p><s>Are you using JS or a SetTimeout to call this script every second?</s></p><s>\n</s><p><s>Can you paste that code here, too?</s></p>\n<p>Never mind me.  If I had slowed down a little while reading your post, I'd have known this <em>is</em> the SetTimeout script.</p>\n<p>I'll go mess with this and be right back.</p>\n\n",
      "PostDate": "2017-12-03T19:09:00.2709392Z",
      "LastEditDate": "2017-12-03T19:13:21.3631649Z",
      "link": null
    },
    {
      "PostId": "aca36c1a-e959-4f64-85ba-f1c9b1ec7f36",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This tester works fine for me:\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Place Your Bets\">\r\n    <gameid>eb3aa6cf-5961-4ed1-aa58-06f517ff9827</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <showmoney type=\"boolean\">false</showmoney>\r\n    <start type=\"script\">\r\n      game.second = 0\r\n      game.hour = 0\r\n      game.minuteFIRST = 0\r\n      game.minuteSECOND = 0\r\n      doTime\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <function name=\"doTime\"><![CDATA[\r\n    game.second = game.second + 1\r\n    if (game.second = 60) {\r\n      game.second = 0\r\n      if (game.minuteSECOND = 9) {\r\n        if (game.minuteFIRST = 5) {\r\n          if (game.hour = 12) {\r\n            game.hour = 1\r\n          }\r\n          else {\r\n            game.hour = game.hour + 1\r\n          }\r\n          game.minuteFIRST = 0\r\n          game.minuteSECOND = 0\r\n        }\r\n        else {\r\n          game.minuteSECOND = 0\r\n          game.minuteFIRST = game.minuteFIRST + 1\r\n        }\r\n      }\r\n      else {\r\n        game.minuteSECOND = game.minuteSECOND + 1\r\n      }\r\n    }\r\n    msg (\"<br/>\"+game.hour+\" HOURS, \"+game.minuteFIRST+\"\"+game.minuteSECOND+\" MINUTES, \"+game.second+\" SECONDS\")\r\n    JS.addTextAndScroll(\"\")\r\n    SetTimeout (1) {\r\n      doTime\r\n    }\r\n  ]]></function>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n---\r\nIt may be due to another script that's using a timer...\r\n\r\n(You can't cross the streams sometimes.)",
      "EditableFormat": "markdown",
      "HTML": "<p>This tester works fine for me:</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Place Your Bets\"&gt;\n    &lt;gameid&gt;eb3aa6cf-5961-4ed1-aa58-06f517ff9827&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;showmoney type=\"boolean\"&gt;false&lt;/showmoney&gt;\n    &lt;start type=\"script\"&gt;\n      game.second = 0\n      game.hour = 0\n      game.minuteFIRST = 0\n      game.minuteSECOND = 0\n      doTime\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;function name=\"doTime\"&gt;&lt;![CDATA[\n    game.second = game.second + 1\n    if (game.second = 60) {\n      game.second = 0\n      if (game.minuteSECOND = 9) {\n        if (game.minuteFIRST = 5) {\n          if (game.hour = 12) {\n            game.hour = 1\n          }\n          else {\n            game.hour = game.hour + 1\n          }\n          game.minuteFIRST = 0\n          game.minuteSECOND = 0\n        }\n        else {\n          game.minuteSECOND = 0\n          game.minuteFIRST = game.minuteFIRST + 1\n        }\n      }\n      else {\n        game.minuteSECOND = game.minuteSECOND + 1\n      }\n    }\n    msg (\"&lt;br/&gt;\"+game.hour+\" HOURS, \"+game.minuteFIRST+\"\"+game.minuteSECOND+\" MINUTES, \"+game.second+\" SECONDS\")\n    JS.addTextAndScroll(\"\")\n    SetTimeout (1) {\n      doTime\n    }\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n<hr>\n<p>It may be due to another script that's using a timer...</p>\n<p>(You can't cross the streams sometimes.)</p>\n\n",
      "PostDate": "2017-12-03T19:25:47.1931677Z",
      "LastEditDate": "2017-12-03T19:48:06.1685941Z",
      "link": null
    },
    {
      "PostId": "e873764a-6cff-4349-95a5-1408112daca2",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Also,  I can't remember who taught me this trick (I think it was mrangel), but you can use ```PadString()``` instead of making 2 minute attributes (minuteFIRST and minuteSECOND).\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Place Your Bets\">\r\n    <gameid>eb3aa6cf-5961-4ed1-aa58-06f517ff9827</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <showmoney type=\"boolean\">false</showmoney>\r\n    <start type=\"script\">\r\n      game.second = 0\r\n      game.hour = 0\r\n      game.minute = 0\r\n      doTime\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <function name=\"doTime\"><![CDATA[\r\n    game.second = game.second + 1\r\n    if (game.second = 60) {\r\n      game.second = 0\r\n      if (game.minute = 59) {\r\n        if (game.hour = 12) {\r\n          game.hour = 1\r\n        }\r\n        else {\r\n          game.hour = game.hour + 1\r\n        }\r\n        game.minute = 0\r\n      }\r\n      else {\r\n        game.minute = game.minute + 1\r\n      }\r\n    }\r\n    // PadString is adding the 0 in front when not 2 digits\r\n    hrs = PadString(game.hour, 2, 0)\r\n    mins = PadString(game.minute, 2, 0)\r\n    secs = PadString(game.second, 2, 0)\r\n    msg (\"<br/>\"+hrs+\" HOURS, \"+mins+\" MINUTES, \"+secs+\" SECONDS\")\r\n    //This next line of code just makes it scroll down, so I don't \\\r\n    //  have to do the scrolling while watching the time go by.\r\n    JS.addTextAndScroll (\"\")  \r\n    SetTimeout (1) {\r\n      doTime\r\n    }\r\n  ]]></function>\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>Also,  I can't remember who taught me this trick (I think it was mrangel), but you can use <code>PadString()</code> instead of making 2 minute attributes (minuteFIRST and minuteSECOND).</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Place Your Bets\"&gt;\n    &lt;gameid&gt;eb3aa6cf-5961-4ed1-aa58-06f517ff9827&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;showmoney type=\"boolean\"&gt;false&lt;/showmoney&gt;\n    &lt;start type=\"script\"&gt;\n      game.second = 0\n      game.hour = 0\n      game.minute = 0\n      doTime\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;function name=\"doTime\"&gt;&lt;![CDATA[\n    game.second = game.second + 1\n    if (game.second = 60) {\n      game.second = 0\n      if (game.minute = 59) {\n        if (game.hour = 12) {\n          game.hour = 1\n        }\n        else {\n          game.hour = game.hour + 1\n        }\n        game.minute = 0\n      }\n      else {\n        game.minute = game.minute + 1\n      }\n    }\n    // PadString is adding the 0 in front when not 2 digits\n    hrs = PadString(game.hour, 2, 0)\n    mins = PadString(game.minute, 2, 0)\n    secs = PadString(game.second, 2, 0)\n    msg (\"&lt;br/&gt;\"+hrs+\" HOURS, \"+mins+\" MINUTES, \"+secs+\" SECONDS\")\n    //This next line of code just makes it scroll down, so I don't \\\n    //  have to do the scrolling while watching the time go by.\n    JS.addTextAndScroll (\"\")  \n    SetTimeout (1) {\n      doTime\n    }\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2017-12-03T19:41:10.6242788Z",
      "LastEditDate": "2017-12-03T19:48:32.6197648Z",
      "link": null
    },
    {
      "PostId": "0cabd3a9-241e-40f6-8f18-d52023b44843",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "canAdd is local variable in the `ContainsAccessible` function in Quest (in CoreScopes.aslx), which is used by `ScopeInventory`and others. It is not something that got changed in the last update. The block of code is used when there is an object in a container, and Quest is tryng to decide if the object is visible or reachable; if it cam then canAdd is set to true.\r\n\r\nI cannot see anything wrong with the code, and I cannot imagine this would not have been spotted earlier if it was a bug. That said, I cannot imagine how anything in your code would be doing this either.",
      "EditableFormat": "markdown",
      "HTML": "<p>canAdd is local variable in the <code>ContainsAccessible</code> function in Quest (in CoreScopes.aslx), which is used by <code>ScopeInventory</code>and others. It is not something that got changed in the last update. The block of code is used when there is an object in a container, and Quest is tryng to decide if the object is visible or reachable; if it cam then canAdd is set to true.</p>\n<p>I cannot see anything wrong with the code, and I cannot imagine this would not have been spotted earlier if it was a bug. That said, I cannot imagine how anything in your code would be doing this either.</p>\n\n",
      "PostDate": "2017-12-03T19:54:38.4191165Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a6b80253-cf09-4d37-8d6d-27a06339b133",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That error appears to concern scope.\r\n\r\n```\r\nkv@LAPTOP-GJBI9A4P:~$ cd /mnt/c/Program\\ Files\\ \\(x86\\)/Quest\\ 5/\r\nkv@LAPTOP-GJBI9A4P:/mnt/c/Program Files (x86)/Quest 5$ grep -r canAdd *\r\nCore/CoreScopes.aslx:          canAdd = CanReachThrough(searchObj.parent)\r\nCore/CoreScopes.aslx:          canAdd = CanSeeThrough(searchObj.parent)\r\nCore/CoreScopes.aslx:        if (canAdd) {\r\nBinary file devtools_resources.pak matches\r\n```\r\n\r\n---\r\nAnd this script contains the only three instances of ```canAdd```:\r\n\r\n```\r\n<function name=\"ContainsAccessible\" type=\"boolean\" parameters=\"parentObj, searchObj, onlyReachable\">\r\n    if (not HasObject(searchObj, \"parent\")) {\r\n      return (false)\r\n    }\r\n    else if (not searchObj.visible) {\r\n      return (false)\r\n    }\r\n    else if (GetBoolean(parentObj, \"darklevel\") and not GetBoolean(searchObj, \"lightsource\")) {\r\n      return (false)\r\n    }\r\n    else {\r\n      if (searchObj.parent = null) {\r\n        return (false)\r\n      }\r\n      else if (searchObj.parent = parentObj) {\r\n        return (true)\r\n      } else {\r\n        if (onlyReachable) {\r\n          canAdd = CanReachThrough(searchObj.parent)\r\n        }\r\n        else {\r\n          canAdd = CanSeeThrough(searchObj.parent)\r\n        }\r\n        \r\n        if (canAdd) {\r\n          return (ContainsAccessible(parentObj, searchObj.parent, onlyReachable))\r\n        } else {\r\n          return (false)\r\n        }\r\n      }\r\n    }\r\n  </function>\r\n```\r\n\r\n---\r\n\r\nThat script is called by these two (which, I believe are invoked after each turn):\r\n\r\n```\r\n  <function name=\"ContainsVisible\" type=\"boolean\" parameters=\"parentObj, searchObj\">\r\n    return (ContainsAccessible(parentObj, searchObj, false))\r\n  </function>\r\n\r\n  <function name=\"ContainsReachable\" type=\"boolean\" parameters=\"parentObj, searchObj\">\r\n    return (ContainsAccessible(parentObj, searchObj, true))\r\n  </function>\r\n````\r\n\r\n---\r\nYep.  That's definitely called each turn.\r\n\r\n```\r\n  <function name=\"ScopeInventory\" type=\"objectlist\">\r\n    result = NewObjectList()\r\n    foreach (obj, GetAllChildObjects(game.pov)) {\r\n      if (ContainsVisible(game.pov, obj)) {\r\n        list add(result, obj)\r\n      }\r\n    }\r\n    return (result)\r\n  </function>\r\n```\r\n\r\n---\r\nAlso, I added other SetTimeout scripts, along with ```get input```, ```Ask```, and ```ShowMenu```, and I never saw that error.\r\n\r\nI'm guessing your error is being caused by something besides your clock.\r\n\r\n---\r\nEDIT\r\n\r\nI was playing around with this while typing it up for about ten minutes, and I didn't see that The Pixie had posted the answer until just now...  (Hehehe.)",
      "EditableFormat": "markdown",
      "HTML": "<p>That error appears to concern scope.</p>\n<pre><code>kv@LAPTOP-GJBI9A4P:~$ cd /mnt/c/Program\\ Files\\ \\(x86\\)/Quest\\ 5/\nkv@LAPTOP-GJBI9A4P:/mnt/c/Program Files (x86)/Quest 5$ grep -r canAdd *\nCore/CoreScopes.aslx:          canAdd = CanReachThrough(searchObj.parent)\nCore/CoreScopes.aslx:          canAdd = CanSeeThrough(searchObj.parent)\nCore/CoreScopes.aslx:        if (canAdd) {\nBinary file devtools_resources.pak matches\n</code></pre>\n<hr>\n<p>And this script contains the only three instances of <code>canAdd</code>:</p>\n<pre><code>&lt;function name=\"ContainsAccessible\" type=\"boolean\" parameters=\"parentObj, searchObj, onlyReachable\"&gt;\n    if (not HasObject(searchObj, \"parent\")) {\n      return (false)\n    }\n    else if (not searchObj.visible) {\n      return (false)\n    }\n    else if (GetBoolean(parentObj, \"darklevel\") and not GetBoolean(searchObj, \"lightsource\")) {\n      return (false)\n    }\n    else {\n      if (searchObj.parent = null) {\n        return (false)\n      }\n      else if (searchObj.parent = parentObj) {\n        return (true)\n      } else {\n        if (onlyReachable) {\n          canAdd = CanReachThrough(searchObj.parent)\n        }\n        else {\n          canAdd = CanSeeThrough(searchObj.parent)\n        }\n        \n        if (canAdd) {\n          return (ContainsAccessible(parentObj, searchObj.parent, onlyReachable))\n        } else {\n          return (false)\n        }\n      }\n    }\n  &lt;/function&gt;\n</code></pre>\n<hr>\n<p>That script is called by these two (which, I believe are invoked after each turn):</p>\n<pre><code>  &lt;function name=\"ContainsVisible\" type=\"boolean\" parameters=\"parentObj, searchObj\"&gt;\n    return (ContainsAccessible(parentObj, searchObj, false))\n  &lt;/function&gt;\n\n  &lt;function name=\"ContainsReachable\" type=\"boolean\" parameters=\"parentObj, searchObj\"&gt;\n    return (ContainsAccessible(parentObj, searchObj, true))\n  &lt;/function&gt;\n</code></pre>\n<hr>\n<p>Yep.  That's definitely called each turn.</p>\n<pre><code>  &lt;function name=\"ScopeInventory\" type=\"objectlist\"&gt;\n    result = NewObjectList()\n    foreach (obj, GetAllChildObjects(game.pov)) {\n      if (ContainsVisible(game.pov, obj)) {\n        list add(result, obj)\n      }\n    }\n    return (result)\n  &lt;/function&gt;\n</code></pre>\n<hr>\n<p>Also, I added other SetTimeout scripts, along with <code>get input</code>, <code>Ask</code>, and <code>ShowMenu</code>, and I never saw that error.</p>\n<p>I'm guessing your error is being caused by something besides your clock.</p>\n<hr>\n<p>EDIT</p>\n<p>I was playing around with this while typing it up for about ten minutes, and I didn't see that The Pixie had posted the answer until just now...  (Hehehe.)</p>\n\n",
      "PostDate": "2017-12-03T19:58:52.7224292Z",
      "LastEditDate": "2017-12-04T01:11:12.9772451Z",
      "link": null
    },
    {
      "PostId": "984c9946-ba15-4f73-b6ec-3e968a7f27d1",
      "UserId": 17092,
      "Username": "GAGE HOLSTON",
      "AvatarUrl": "https://secure.gravatar.com/avatar/57b86a567d503acfa104a604accfa863?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So basically, I'm not gonna be able to figure out what specifically caused this error?\r\nBecause I honestly cannot think of what else could have caused it. I don't think I can just post ALL of the game's scripts here, to figure it out.",
      "EditableFormat": "markdown",
      "HTML": "<p>So basically, I'm not gonna be able to figure out what specifically caused this error?<br>\nBecause I honestly cannot think of what else could have caused it. I don't think I can just post ALL of the game's scripts here, to figure it out.</p>\n\n",
      "PostDate": "2017-12-03T20:48:13.6847578Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "76d36d2f-35be-4c1c-9535-c355af2463f4",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I don't think I can just post ALL of the game's scripts here\r\n\r\nYou can email me the .aslx file or post the code as a secret GitHub Gist (which can be easily deleted or altered) and link to it here.\r\n\r\n(Message me if you'd like to go the email route.)\r\n\r\n---\r\nIf it's not terribly long, you could just copy the entire game's text and paste it here.  (We probably need to get at the entire game, though.  If the game is published online and just not available for everyone to see, we could test it out that way, too.)",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I don't think I can just post ALL of the game's scripts here</p>\n</blockquote>\n<p>You can email me the .aslx file or post the code as a secret GitHub Gist (which can be easily deleted or altered) and link to it here.</p>\n<p>(Message me if you'd like to go the email route.)</p>\n<hr>\n<p>If it's not terribly long, you could just copy the entire game's text and paste it here.  (We probably need to get at the entire game, though.  If the game is published online and just not available for everyone to see, we could test it out that way, too.)</p>\n\n",
      "PostDate": "2017-12-04T01:29:04.8433325Z",
      "LastEditDate": "2017-12-04T01:30:37.7028927Z",
      "link": null
    },
    {
      "PostId": "fce439a1-d166-4b57-aa11-dde1bada3c8b",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I also experience something similar and possibly related, wherein I get bizarre, seemingly random, and inconsistent error messages (including \"CanAdd\" messages).  Many of these had to do with conflicts using \"wait\" scripts.  What happens is that Quest will continue executing other scripts that are in subsequent blocks while waiting for the scripts in the current \"wait\" block to finish.  So you get an issue with two streams of scripts simultaneously executing.  This potentially applies to scripts with blocks that wait, and functions with scripts that wait (timers), as Pixie has outlined here:\r\n\r\nhttp://docs.textadventures.co.uk/quest/blocks_and_scripts.html\r\n\r\nMy solution was to use \"on ready\" and quarter-second silent sound files (that play nothing; found these on GitHub) to force Quest to resolve the wait blocks before continuing on with the main stream of remaining scripts.\r\n\r\nThe other thing I've found that causes this type of issue is when, as a player, you input commands too fast before Quest has resolved the last turn.  If you input commands too soon, Quest will ignore them (with no error messages); if you input them after Quest has fully resolved the last turn, things work fine.  But there is a slim window between the two where if you input commands JUST AS Quest is finishing the previous turn, Quest will spit out strange error messages but still manage to process the new turn OK.",
      "EditableFormat": "markdown",
      "HTML": "<p>I also experience something similar and possibly related, wherein I get bizarre, seemingly random, and inconsistent error messages (including \"CanAdd\" messages).  Many of these had to do with conflicts using \"wait\" scripts.  What happens is that Quest will continue executing other scripts that are in subsequent blocks while waiting for the scripts in the current \"wait\" block to finish.  So you get an issue with two streams of scripts simultaneously executing.  This potentially applies to scripts with blocks that wait, and functions with scripts that wait (timers), as Pixie has outlined here:</p>\n<p>http://docs.textadventures.co.uk/quest/blocks_and_scripts.html</p>\n<p>My solution was to use \"on ready\" and quarter-second silent sound files (that play nothing; found these on GitHub) to force Quest to resolve the wait blocks before continuing on with the main stream of remaining scripts.</p>\n<p>The other thing I've found that causes this type of issue is when, as a player, you input commands too fast before Quest has resolved the last turn.  If you input commands too soon, Quest will ignore them (with no error messages); if you input them after Quest has fully resolved the last turn, things work fine.  But there is a slim window between the two where if you input commands JUST AS Quest is finishing the previous turn, Quest will spit out strange error messages but still manage to process the new turn OK.</p>\n\n",
      "PostDate": "2017-12-04T06:44:09.3803091Z",
      "LastEditDate": "2017-12-04T18:27:36.2456256Z",
      "link": null
    }
  ]
}
