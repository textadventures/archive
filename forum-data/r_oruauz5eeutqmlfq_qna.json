{
  "Topic": {
    "TopicId": "r_oruauz5eeutqmlfq_qna",
    "ForumId": "10",
    "Title": "Object Descriptions in Room",
    "LastUpdated": "2021-06-09T11:45:23.4015959Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "853a5c72-32da-4593-931b-c6ed0aa1cb21",
      "UserId": 262169,
      "Username": "Laraqua",
      "AvatarUrl": "https://secure.gravatar.com/avatar/62e7b4391dc6f205a4820699c027a564?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How do I get the object's description to appear in the room description while it's in the room?  So it'd show up like this:\r\n\r\n\"(Room Description) The room is dark and covered in chalk drawings.\r\n\r\nThere's a gun lying on the floor.\"\r\n\r\nThen if they pick up the gun, the description is no longer there.  I know I could do a \"If <object> is in room then....\" but I was wondering if there were a simpler option.  I could have sworn back in 2018 there was a tick box but I may be wrong.  It's been awhile!",
      "EditableFormat": "markdown",
      "HTML": "<p>How do I get the object's description to appear in the room description while it's in the room?  So it'd show up like this:</p>\n<p>\"(Room Description) The room is dark and covered in chalk drawings.</p>\n<p>There's a gun lying on the floor.\"</p>\n<p>Then if they pick up the gun, the description is no longer there.  I know I could do a \"If </p>",
      "PostDate": "2021-06-09T11:45:23.4015959Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "05d74e22-4705-43a5-bf3a-9fa1a0014461",
      "UserId": 924,
      "Username": "Pertex",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4cc1e52f99452e841ecf4cbee9eadde9?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You could use the inroomdescription of that object",
      "EditableFormat": "markdown",
      "HTML": "<p>You could use the inroomdescription of that object</p>\n\n",
      "PostDate": "2021-06-09T12:23:18.9697907Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f480e672-498b-4a4f-9f3b-7febf22defca",
      "UserId": 262169,
      "Username": "Laraqua",
      "AvatarUrl": "https://secure.gravatar.com/avatar/62e7b4391dc6f205a4820699c027a564?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Where do I find that on the program itself?  Or is it script code I can put in the object's description?",
      "EditableFormat": "markdown",
      "HTML": "<p>Where do I find that on the program itself?  Or is it script code I can put in the object's description?</p>\n\n",
      "PostDate": "2021-06-09T22:36:42.1641692Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "68f69ab0-4cc1-43c1-8c2a-503472a245a4",
      "UserId": 260569,
      "Username": "DarkLizerd",
      "AvatarUrl": "https://i.imgur.com/HiZKEtPb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It should be on the object's tab itself.\r\nHmm, maybe what I'm referring to was dropped in Quest 5.80.",
      "EditableFormat": "markdown",
      "HTML": "<p>It should be on the object's tab itself.<br>\nHmm, maybe what I'm referring to was dropped in Quest 5.80.</p>\n\n",
      "PostDate": "2021-06-10T00:07:21.9574038Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8add4063-7a1d-490b-8bd6-ba5f4dcf4065",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Are you using the online or the desktop version of Quest?",
      "EditableFormat": "markdown",
      "HTML": "<p>Are you using the online or the desktop version of Quest?</p>\n\n",
      "PostDate": "2021-06-10T01:25:08.4648136Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2e314cd0-c15a-4460-bc95-0bceca70030d",
      "UserId": 262169,
      "Username": "Laraqua",
      "AvatarUrl": "https://secure.gravatar.com/avatar/62e7b4391dc6f205a4820699c027a564?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Desktop version of Quest.",
      "EditableFormat": "markdown",
      "HTML": "<p>Desktop version of Quest.</p>\n\n",
      "PostDate": "2021-06-10T03:04:50.194618Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b8023911-d405-4997-b346-184778f6f06e",
      "UserId": 163617,
      "Username": "Deckrect ",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Look, as far as I know, if you use the automatic room descriptions, it will just put in the room description something like \"You see a gun.\"\r\n\r\nI think the best way doing it is changing the room description for a script. The first part of the script is a print massage with the first part of the room's description. Then you add an scrip checking IF Object RoomX contains Object Gun, THEN print \"There is a gun on the floor.\"\r\n\r\nI find it a far better way to control the way the descriptions get into the game.",
      "EditableFormat": "markdown",
      "HTML": "<p>Look, as far as I know, if you use the automatic room descriptions, it will just put in the room description something like \"You see a gun.\"</p>\n<p>I think the best way doing it is changing the room description for a script. The first part of the script is a print massage with the first part of the room's description. Then you add an scrip checking IF Object RoomX contains Object Gun, THEN print \"There is a gun on the floor.\"</p>\n<p>I find it a far better way to control the way the descriptions get into the game.</p>\n\n",
      "PostDate": "2021-06-10T10:18:24.7342202Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f4919c46-9e94-408b-8de7-f3c4305c242a",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello.\r\n\r\nHonestly, Deckrect's advice is the way I'd handle it, but to use in-room descriptions for objects:\r\n\r\n\r\n---\r\nFirst, click on the ```game``` object the object tree. Then, click on the \"Features\" tab.\r\n\r\nThen, check the box to select \"In-room descriptions [...]\".\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/121546848-3df8de80-c9d1-11eb-9f51-e723e4fe1968.png)\r\n\r\n---\r\nAfter doing that, your objects will have a new \"In-room description\" option.\r\n\r\n**EDIT**\r\nAlso, make the object scenery by checking the \"Scenery\" option.\r\n\r\nI used the text processor to check if the object is scenery before printing the in-room description in this (updated) example.\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/121552328-00e31b00-c9d6-11eb-9fe8-063cc45f3d1e.png)\r\n\r\n---\r\n![image](https://user-images.githubusercontent.com/30656341/121552636-3be54e80-c9d6-11eb-9f5c-c467d76a2cb3.png)\r\n\r\n\r\n---\r\nThat only works before it is picked up the first time, though.\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/121552787-5ae3e080-c9d6-11eb-90a8-16937f953bdf.png)",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello.</p>\n<p>Honestly, Deckrect's advice is the way I'd handle it, but to use in-room descriptions for objects:</p>\n<hr>\n<p>First, click on the <code>game</code> object the object tree. Then, click on the \"Features\" tab.</p>\n<p>Then, check the box to select \"In-room descriptions [...]\".</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/121546848-3df8de80-c9d1-11eb-9f51-e723e4fe1968.png\" alt=\"image\"></p>\n<hr>\n<p>After doing that, your objects will have a new \"In-room description\" option.</p>\n<p><strong>EDIT</strong><br>\nAlso, make the object scenery by checking the \"Scenery\" option.</p>\n<p>I used the text processor to check if the object is scenery before printing the in-room description in this (updated) example.</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/121552328-00e31b00-c9d6-11eb-9fe8-063cc45f3d1e.png\" alt=\"image\"></p>\n<hr>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/121552636-3be54e80-c9d6-11eb-9f5c-c467d76a2cb3.png\" alt=\"image\"></p>\n<hr>\n<p>That only works before it is picked up the first time, though.</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/121552787-5ae3e080-c9d6-11eb-90a8-16937f953bdf.png\" alt=\"image\"></p>\n\n",
      "PostDate": "2021-06-10T14:58:26.894163Z",
      "LastEditDate": "2021-06-10T15:27:07.1095359Z",
      "link": null
    },
    {
      "PostId": "a3897b35-cb51-4e7d-b62d-3c683d629b4d",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Where do I find that on the program itself? Or is it script code I can put in the object's description?\r\n\r\nOn the game's *Features* tab there is a checkbox \"In-room descriptions: additional text which each object contributes to a room description\"\r\n\r\nOnce that is enabled, the object's *Setup* tab will have a space at the bottom for \"In-room description\".\r\nThis will be added to the end of the room description when the object is present, but it will *not* remove the object from the \"You can see:\" list. So if you don't want the object to be mentioned twice, you would need to either make it 'scenery', or turn off the objects list.\r\n\r\nI've made a little modification that causes an object to be displayed only once, but this requires modifying some of the core functions so only works on the desktop editor.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Where do I find that on the program itself? Or is it script code I can put in the object's description?</p>\n</blockquote>\n<p>On the game's <em>Features</em> tab there is a checkbox \"In-room descriptions: additional text which each object contributes to a room description\"</p>\n<p>Once that is enabled, the object's <em>Setup</em> tab will have a space at the bottom for \"In-room description\".<br>\nThis will be added to the end of the room description when the object is present, but it will <em>not</em> remove the object from the \"You can see:\" list. So if you don't want the object to be mentioned twice, you would need to either make it 'scenery', or turn off the objects list.</p>\n<p>I've made a little modification that causes an object to be displayed only once, but this requires modifying some of the core functions so only works on the desktop editor.</p>\n\n",
      "PostDate": "2021-06-10T15:01:42.5994279Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0cd1af73-4315-4988-9ae4-6b6ed2a6a07a",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, posting at the same time :)",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, posting at the same time :)</p>\n\n",
      "PostDate": "2021-06-10T15:02:27.6792836Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e6360d80-33eb-499d-bbcf-cb5e29832e96",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is the way I'd advise a new Quest user handle Deckrect's advice:\r\n\r\nIf the gun object is actually ```gun``` and the current room name is actually ```room```, set the ```scenery``` attribute on the ```gun``` object to ```true```. (Don't worry, when it is picked up the first time, ```scenery``` will be changed to ```false```; which also makes this only work ***before*** the gun is picked up for the first time.)\r\n\r\nThe room description:\r\n```\r\nThe room is dark and covered in chalk drawings.{if gun.parent=room:{if gun.scenery:\r\n\r\nThere's a gun lying on the floor.}}\r\n```\r\n\r\n\r\nScreenshots:\r\n\r\n<details>\r\n\r\n---\r\n![image](https://user-images.githubusercontent.com/30656341/121549664-ae086400-c9d3-11eb-9655-7f7ef410f1a1.png)\r\n\r\n---\r\n![image](https://user-images.githubusercontent.com/30656341/121549748-bf517080-c9d3-11eb-8b80-62ef3a43fd43.png)\r\n\r\n\r\n---\r\nBut after taking the gun the first time, the magic is gone.\r\n\r\nIf you drop it again using this code, it will just go back to the defaults:\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/121550227-2b33d900-c9d4-11eb-90c9-03d444554665.png)\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>This is the way I'd advise a new Quest user handle Deckrect's advice:</p>\n<p>If the gun object is actually <code>gun</code> and the current room name is actually <code>room</code>, set the <code>scenery</code> attribute on the <code>gun</code> object to <code>true</code>. (Don't worry, when it is picked up the first time, <code>scenery</code> will be changed to <code>false</code>; which also makes this only work <strong><em>before</em></strong> the gun is picked up for the first time.)</p>\n<p>The room description:</p>\n<pre><code>The room is dark and covered in chalk drawings.{if gun.parent=room:{if gun.scenery:\n\nThere's a gun lying on the floor.}}\n</code></pre>\n<p>Screenshots:</p>\n<details>\n<hr>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/121549664-ae086400-c9d3-11eb-9655-7f7ef410f1a1.png\" alt=\"image\"></p>\n<hr>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/121549748-bf517080-c9d3-11eb-8b80-62ef3a43fd43.png\" alt=\"image\"></p>\n<hr>\n<p>But after taking the gun the first time, the magic is gone.</p>\n<p>If you drop it again using this code, it will just go back to the defaults:</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/121550227-2b33d900-c9d4-11eb-90c9-03d444554665.png\" alt=\"image\"></p>\n</details>\n\n",
      "PostDate": "2021-06-10T15:11:56.8286617Z",
      "LastEditDate": "2021-06-10T15:17:10.4781695Z",
      "link": null
    },
    {
      "PostId": "8770dec0-5f21-497e-a516-698b3ee18cd5",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "PS\r\n\r\nIf you want to get more complicated than this, you can make the game behave however you want. So, just say the word if you want to get down even funkier than any of the current examples will allow.",
      "EditableFormat": "markdown",
      "HTML": "<p>PS</p>\n<p>If you want to get more complicated than this, you can make the game behave however you want. So, just say the word if you want to get down even funkier than any of the current examples will allow.</p>\n\n",
      "PostDate": "2021-06-10T15:15:50.9006566Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f3bdbf30-c1ac-4f6d-9264-9398f8d9837c",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ha!\r\n\r\nI see I missed two posts by mrangel whilst playing with all of that code.\r\n\r\nAs he says, you can get a little bit more complicated if you wish and modify the objects list behavior.\r\n\r\n---\r\nI couldn't find anything in the docs explaining the in-room descriptions; so, I posted all the screenshots in that first example.  (I only searched through the docs for 3 or 4 minutes. So, there may already be an existing one that I missed.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Ha!</p>\n<p>I see I missed two posts by mrangel whilst playing with all of that code.</p>\n<p>As he says, you can get a little bit more complicated if you wish and modify the objects list behavior.</p>\n<hr>\n<p>I couldn't find anything in the docs explaining the in-room descriptions; so, I posted all the screenshots in that first example.  (I only searched through the docs for 3 or 4 minutes. So, there may already be an existing one that I missed.)</p>\n\n",
      "PostDate": "2021-06-10T15:37:05.0079952Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9671ea2e-be9d-47e9-8781-b45ac6b5a457",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "In case you want to see it, this is how I'd modify two functions so that objects with \"in room descriptions\" are removed from the default \"You can see:\" list:\r\n\r\n<details><summary style=\"font-family: monospace; text-decoration: underline\">Click to show</summary>\r\nAs usual, I've highlighted code I added in green, and code I replaced in blue.\r\n\r\n<pre><code>  &lt;function name=\"ShowRoomDescription\">\r\n    &lt;![CDATA[\r\n<b style=\"color: green\">      if (GetBoolean (game, \"suppressduplicateobjects\")) {\r\n        game.pov.objectsinroomdescription = NewObjectList()\r\n      }\r\n      showndescription = false</b>\r\n      isDark = CheckDarkness()\r\n      if (isDark) {\r\n        descriptionfield = \"darkroomdescription\"\r\n      }\r\n      else {\r\n        descriptionfield = \"description\"\r\n      }\r\n\r\n      if (game.autodescription) {\r\n        desc = \"\"\r\n        \r\n        for (i, 1, 4) {\r\n          if (i = game.autodescription_youarein) {\r\n            if (game.autodescription_youarein_useprefix) {\r\n              youarein = game.pov.parent.descprefix\r\n              desc = AddDescriptionLine (desc, youarein + \" \" + GetDisplayName(game.pov.parent) + \".\")\r\n            }\r\n            else {\r\n              desc = AddDescriptionLine (desc, \"&lt;b>\" + CapFirst(GetDisplayName(game.pov.parent)) + \"&lt;/b>\")\r\n            }\r\n            if (game.autodescription_youarein_newline) {\r\n              msg (desc + \"&lt;br/>\")\r\n              desc = \"\"\r\n            }\r\n          }\r\n          if (i = game.autodescription_youcansee) {\r\n<b style=\"color: blue\">            objects = \"\"\r\n            objectlist = RemoveSceneryObjects (GetDirectChildren (GetNonTransparentParent (game.pov.parent)))\r\n            if (isDark) {\r\n              objectlist = RemoveDarkObjects (objectlist)\r\n            }\r\n            if (GetBoolean (game, \"suppressduplicateobjects\") and ListCount(objectlist) > 0) {\r\n\r\n              <em>// Bodge to make it work if the description is after the object list, or there's no newline between them\r\n              game.tempdictionary = game.textprocessor_seen\r\n              if (not showndescription) {\r\n                ProcessText (GetRoomDescription ())\r\n              }\r\n              else if (not desc = \"\") {\r\n                ProcessText (desc)\r\n              }\r\n              game.textprocessor_seen = game.tempdictionary\r\n              game.tempdictionary = null\r\n              // I apologise for the ugliness of the bodge above. Feel free to remove it if you don't need it</em>\r\n\r\n              objectlist = ListExclude (objectlist, game.pov.objectsinroomdescription)\r\n            }\r\n            if (ListCount (objectlist) > 0) {\r\n              objects = game.pov.parent.objectslistprefix + FormatList(objectlist, \", \", Template(\"And\"), \"\") + \".\"\r\n            }</b>\r\n            desc = AddDescriptionLine(desc, objects)\r\n            \r\n            if (game.autodescription_youcansee_newline) {\r\n              msg (desc + \"&lt;br/>\")\r\n              desc = \"\"\r\n            }\r\n          }\r\n          if (i = game.autodescription_youcango) {\r\n            exits = FormatExitList(game.pov.parent.exitslistprefix, GetExitsList(), Template(\"Or\"), \".\")\r\n            desc = AddDescriptionLine(desc, exits)\r\n            \r\n            if (game.autodescription_youcango_newline) {\r\n              msg (desc + \"&lt;br/>\")\r\n              desc = \"\"\r\n            }\r\n          }\r\n          if (i = game.autodescription_description) {\r\n            <b style=\"color: green\">showndescription = true</b>\r\n            if (HasScript(game.pov.parent, descriptionfield)) {\r\n              if (LengthOf(desc) > 0) {\r\n                    msg (desc)\r\n                    desc = \"\"\r\n                }\r\n              do (game.pov.parent, descriptionfield)\r\n              if (game.autodescription_description_newline) {\r\n                msg (\"\")\r\n              }\r\n            }\r\n            else  {\r\n              desc = AddDescriptionLine(desc, GetRoomDescription())\r\n              if (game.autodescription_description_newline) {\r\n                msg (desc + \"&lt;br/>\")\r\n                desc = \"\"\r\n              }\r\n            }\r\n          }\r\n        }\r\n        \r\n        if (LengthOf(desc) > 0) {\r\n          msg (desc)\r\n        }\r\n      }\r\n      else {\r\n        if (HasScript(game.pov.parent, descriptionfield)) {\r\n          do (game.pov.parent, descriptionfield)\r\n        }\r\n        else {\r\n          fulldesc = GetRoomDescription()\r\n     \r\n          if (LengthOf(fulldesc) > 0) {\r\n            msg (fulldesc)\r\n          }\r\n        }\r\n      }\r\n    ]]>\r\n  &lt;/function>\r\n\r\n&lt;function name=\"ProcessTextCommand_Object\" type=\"string\" parameters=\"section, data\">\r\n    &lt;![CDATA[\r\n    objectname = Mid(section, 8)\r\n    text = \"\"\r\n    colon = Instr(objectname, \":\")\r\n    if (colon > 0) {\r\n      text = Mid(objectname, colon + 1)\r\n      objectname = Left(objectname, colon - 1)\r\n    }\r\n    object = ObjectForTextProcessor(objectname)\r\n    if (object = null) {\r\n      return (\"@@@open@@@\" + ProcessTextSection(section, data) + \"@@@close@@@\")\r\n    }\r\n    else {\r\n<b style=\"color: green\">      if (HasAttribute (game.pov, \"objectsinroomdescription\")) {\r\n        list add (game.pov.objectsinroomdescription, object)\r\n      }</b>\r\n      if (LengthOf(text) = 0) {\r\n        text = SafeXML(GetDisplayAlias(object))\r\n      }\r\n      if (game.enablehyperlinks) {\r\n        linkid = ProcessTextCommand_GetNextLinkId()\r\n        colour = \"\"\r\n        if (HasString(object, \"linkcolour\") and GetUIOption(\"UseGameColours\") = \"true\") {\r\n          colour = object.linkcolour\r\n        }\r\n        else {\r\n          colour = GetLinkTextColour()\r\n        }\r\n        style = GetCurrentTextFormat(colour)\r\n        return (\"&lt;a id=\\\"\" + linkid + \"\\\" style=\\\"\" + style + \"\\\" class=\\\"cmdlink elementmenu\\\" data-elementid=\\\"\" + object.name + \"\\\">\" + text + \"&lt;/a>\")\r\n      }\r\n      else {\r\n        return (text)\r\n      }\r\n    }\r\n    ]]>\r\n  &lt;/function></code></pre>",
      "EditableFormat": "markdown",
      "HTML": "<p>In case you want to see it, this is how I'd modify two functions so that objects with \"in room descriptions\" are removed from the default \"You can see:\" list:</p>\n<details><summary style=\"font-family: monospace; text-decoration: underline\">Click to show</summary>\nAs usual, I've highlighted code I added in green, and code I replaced in blue.\n<pre><code>  &lt;function name=\"ShowRoomDescription\"&gt;\n    &lt;![CDATA[\n<b style=\"color: green\">      if (GetBoolean (game, \"suppressduplicateobjects\")) {\n        game.pov.objectsinroomdescription = NewObjectList()\n      }\n      showndescription = false</b>\n      isDark = CheckDarkness()\n      if (isDark) {\n        descriptionfield = \"darkroomdescription\"\n      }\n      else {\n        descriptionfield = \"description\"\n      }\n\n      if (game.autodescription) {\n        desc = \"\"\n        \n        for (i, 1, 4) {\n          if (i = game.autodescription_youarein) {\n            if (game.autodescription_youarein_useprefix) {\n              youarein = game.pov.parent.descprefix\n              desc = AddDescriptionLine (desc, youarein + \" \" + GetDisplayName(game.pov.parent) + \".\")\n            }\n            else {\n              desc = AddDescriptionLine (desc, \"&lt;b&gt;\" + CapFirst(GetDisplayName(game.pov.parent)) + \"&lt;/b&gt;\")\n            }\n            if (game.autodescription_youarein_newline) {\n              msg (desc + \"&lt;br/&gt;\")\n              desc = \"\"\n            }\n          }\n          if (i = game.autodescription_youcansee) {\n<b style=\"color: blue\">            objects = \"\"\n            objectlist = RemoveSceneryObjects (GetDirectChildren (GetNonTransparentParent (game.pov.parent)))\n            if (isDark) {\n              objectlist = RemoveDarkObjects (objectlist)\n            }\n            if (GetBoolean (game, \"suppressduplicateobjects\") and ListCount(objectlist) &gt; 0) {\n\n              <em>// Bodge to make it work if the description is after the object list, or there's no newline between them\n              game.tempdictionary = game.textprocessor_seen\n              if (not showndescription) {\n                ProcessText (GetRoomDescription ())\n              }\n              else if (not desc = \"\") {\n                ProcessText (desc)\n              }\n              game.textprocessor_seen = game.tempdictionary\n              game.tempdictionary = null\n              // I apologise for the ugliness of the bodge above. Feel free to remove it if you don't need it</em>\n\n              objectlist = ListExclude (objectlist, game.pov.objectsinroomdescription)\n            }\n            if (ListCount (objectlist) &gt; 0) {\n              objects = game.pov.parent.objectslistprefix + FormatList(objectlist, \", \", Template(\"And\"), \"\") + \".\"\n            }</b>\n            desc = AddDescriptionLine(desc, objects)\n            \n            if (game.autodescription_youcansee_newline) {\n              msg (desc + \"&lt;br/&gt;\")\n              desc = \"\"\n            }\n          }\n          if (i = game.autodescription_youcango) {\n            exits = FormatExitList(game.pov.parent.exitslistprefix, GetExitsList(), Template(\"Or\"), \".\")\n            desc = AddDescriptionLine(desc, exits)\n            \n            if (game.autodescription_youcango_newline) {\n              msg (desc + \"&lt;br/&gt;\")\n              desc = \"\"\n            }\n          }\n          if (i = game.autodescription_description) {\n            <b style=\"color: green\">showndescription = true</b>\n            if (HasScript(game.pov.parent, descriptionfield)) {\n              if (LengthOf(desc) &gt; 0) {\n                    msg (desc)\n                    desc = \"\"\n                }\n              do (game.pov.parent, descriptionfield)\n              if (game.autodescription_description_newline) {\n                msg (\"\")\n              }\n            }\n            else  {\n              desc = AddDescriptionLine(desc, GetRoomDescription())\n              if (game.autodescription_description_newline) {\n                msg (desc + \"&lt;br/&gt;\")\n                desc = \"\"\n              }\n            }\n          }\n        }\n        \n        if (LengthOf(desc) &gt; 0) {\n          msg (desc)\n        }\n      }\n      else {\n        if (HasScript(game.pov.parent, descriptionfield)) {\n          do (game.pov.parent, descriptionfield)\n        }\n        else {\n          fulldesc = GetRoomDescription()\n     \n          if (LengthOf(fulldesc) &gt; 0) {\n            msg (fulldesc)\n          }\n        }\n      }\n    ]]&gt;\n  &lt;/function&gt;\n\n&lt;function name=\"ProcessTextCommand_Object\" type=\"string\" parameters=\"section, data\"&gt;\n    &lt;![CDATA[\n    objectname = Mid(section, 8)\n    text = \"\"\n    colon = Instr(objectname, \":\")\n    if (colon &gt; 0) {\n      text = Mid(objectname, colon + 1)\n      objectname = Left(objectname, colon - 1)\n    }\n    object = ObjectForTextProcessor(objectname)\n    if (object = null) {\n      return (\"@@@open@@@\" + ProcessTextSection(section, data) + \"@@@close@@@\")\n    }\n    else {\n<b style=\"color: green\">      if (HasAttribute (game.pov, \"objectsinroomdescription\")) {\n        list add (game.pov.objectsinroomdescription, object)\n      }</b>\n      if (LengthOf(text) = 0) {\n        text = SafeXML(GetDisplayAlias(object))\n      }\n      if (game.enablehyperlinks) {\n        linkid = ProcessTextCommand_GetNextLinkId()\n        colour = \"\"\n        if (HasString(object, \"linkcolour\") and GetUIOption(\"UseGameColours\") = \"true\") {\n          colour = object.linkcolour\n        }\n        else {\n          colour = GetLinkTextColour()\n        }\n        style = GetCurrentTextFormat(colour)\n        return (\"&lt;a id=\\\"\" + linkid + \"\\\" style=\\\"\" + style + \"\\\" class=\\\"cmdlink elementmenu\\\" data-elementid=\\\"\" + object.name + \"\\\"&gt;\" + text + \"&lt;/a&gt;\")\n      }\n      else {\n        return (text)\n      }\n    }\n    ]]&gt;\n  &lt;/function&gt;</code></pre>\n\n</details>",
      "PostDate": "2021-06-10T16:04:14.4821027Z",
      "LastEditDate": "2021-06-10T16:08:17.6489738Z",
      "link": null
    },
    {
      "PostId": "faea061e-2048-4533-81d7-3ee05b6a5d95",
      "UserId": 260569,
      "Username": "DarkLizerd",
      "AvatarUrl": "https://i.imgur.com/HiZKEtPb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Good! I thought I was dreaming about seeing that before.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Good! I thought I was dreaming about seeing that before.</p>\n\n",
      "PostDate": "2021-06-11T03:24:26.6091713Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "88c66a9c-43d7-4b5d-be02-dad5d30489dd",
      "UserId": 262169,
      "Username": "Laraqua",
      "AvatarUrl": "https://secure.gravatar.com/avatar/62e7b4391dc6f205a4820699c027a564?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you so much!  I hadn't realised I needed to enable it.  :)",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you so much!  I hadn't realised I needed to enable it.  :)</p>\n\n",
      "PostDate": "2021-06-11T04:44:39.2439274Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
