{
  "Topic": {
    "TopicId": "5bcghekxle_tgcpx8nzk9a",
    "ForumId": "10",
    "Title": "Strange issue with string attribute",
    "LastUpdated": "2017-06-26T22:51:02.9083939Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "95305ae4-4473-4580-a59b-0b4f474972a1",
      "UserId": 160782,
      "Username": "JenniferKline",
      "AvatarUrl": "https://secure.gravatar.com/avatar/577a4cda5f04217fc7c986ba5b2da370?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Back again!\r\n\r\nTrying out a clothing system that consists of upper and lower armour. If a player is wearing both an upper of light armour and a lower of light armour they get a matching set bonus. If they're wearing an upper of heavy and a lower of heavy, the same. If they've got no armour on upper or lower they get no bonus and are classed as 'nude'. Well, not nude, they have clothes, but you get what I mean.\r\n\r\nNow, I made the string attributes:\r\n\r\n```player.upper```  which is currently at```\"nothing\"``` to start at.\r\n```player.lower``` which is currently at ```\"nothing\"``` to start at.\r\n```player.clothed```  which is currently at ```\"\"``` to start at until it is given its value.\r\n\r\nThen I have a turn script. I tried this with an attribute change script too, but had the same issue.\r\n\r\n```\r\nif (player.upper = \"nothing\") {\r\n  if (player.lower = \"nothing\") {\r\n    player.clothed = nude\r\n  }\r\n}\r\n```\r\n\r\nI'm using ```if object attribute equals``` and ```set variable or attribute```. I also tried the  ```set an object 's attribute (named by an expression)``` and had no dice.\r\n\r\n```if (player.upper = \"nothing\") {\r\n  if (player.lower = \"nothing\") {\r\n    player.clothed = nude\r\n  }\r\n}\r\n```\r\n\r\nWhich doesn't look right. Weird, because I'm sure these things should work, they worked fine for me altering attributes in the past, but I don't think I've really tried to use the whole ```if object attribute equals``` before.\r\n\r\nTo add, my test function is a command that I use to debug and give me current stats.\r\n\r\n```\r\nSetInc (150)\r\nmsg (\"{player.plevel}\")\r\nmsg (\"{player.purity}\")\r\nmsg (\"{player.clothed}\")\r\nmsg (\"{player.upper}\")\r\nmsg (\"{player.lower}\")\r\n```\r\n\r\nI'm told my lower and upper is ```\"nothing\"``` so I probably need to remove the quotation marks there, but my ```player.clothed``` value just returns ```\"\"```\r\n\r\nAny help would be appreciated, pretty sure I'm missing something simple but it's really annoying. Turn script is set to be on when the game begins, too.",
      "EditableFormat": "markdown",
      "HTML": "<p>Back again!</p>\n<p>Trying out a clothing system that consists of upper and lower armour. If a player is wearing both an upper of light armour and a lower of light armour they get a matching set bonus. If they're wearing an upper of heavy and a lower of heavy, the same. If they've got no armour on upper or lower they get no bonus and are classed as 'nude'. Well, not nude, they have clothes, but you get what I mean.</p>\n<p>Now, I made the string attributes:</p>\n<p><code>player.upper</code>  which is currently at<code>\"nothing\"</code> to start at.<br>\n<code>player.lower</code> which is currently at <code>\"nothing\"</code> to start at.<br>\n<code>player.clothed</code>  which is currently at <code>\"\"</code> to start at until it is given its value.</p>\n<p>Then I have a turn script. I tried this with an attribute change script too, but had the same issue.</p>\n<pre><code>if (player.upper = \"nothing\") {\n  if (player.lower = \"nothing\") {\n    player.clothed = nude\n  }\n}\n</code></pre>\n<p>I'm using <code>if object attribute equals</code> and <code>set variable or attribute</code>. I also tried the  <code>set an object 's attribute (named by an expression)</code> and had no dice.</p>\n<pre><code>  if (player.lower = \"nothing\") {\n    player.clothed = nude\n  }\n}\n</code></pre>\n<p>Which doesn't look right. Weird, because I'm sure these things should work, they worked fine for me altering attributes in the past, but I don't think I've really tried to use the whole <code>if object attribute equals</code> before.</p>\n<p>To add, my test function is a command that I use to debug and give me current stats.</p>\n<pre><code>SetInc (150)\nmsg (\"{player.plevel}\")\nmsg (\"{player.purity}\")\nmsg (\"{player.clothed}\")\nmsg (\"{player.upper}\")\nmsg (\"{player.lower}\")\n</code></pre>\n<p>I'm told my lower and upper is <code>\"nothing\"</code> so I probably need to remove the quotation marks there, but my <code>player.clothed</code> value just returns <code>\"\"</code></p>\n<p>Any help would be appreciated, pretty sure I'm missing something simple but it's really annoying. Turn script is set to be on when the game begins, too.</p>\n\n",
      "PostDate": "2017-06-26T22:51:02.9083939Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "befb5285-18c1-4720-bd5e-262d79751e7d",
      "UserId": 160782,
      "Username": "JenniferKline",
      "AvatarUrl": "https://secure.gravatar.com/avatar/577a4cda5f04217fc7c986ba5b2da370?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hmmh, I appear to have fixed it by removing the ```\"```nothing```\"```. Perhaps the quotation marks I thought had to be there to let the game know it wasn't something (I forget) confused it when placed into a String attribute then needing to be called on in scripts?",
      "EditableFormat": "markdown",
      "HTML": "<p>Hmmh, I appear to have fixed it by removing the <code>\"</code>nothing<code>\"</code>. Perhaps the quotation marks I thought had to be there to let the game know it wasn't something (I forget) confused it when placed into a String attribute then needing to be called on in scripts?</p>\n\n",
      "PostDate": "2017-06-26T23:02:10.9802468Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d62be9e9-502d-44ca-9f09-bed5436e8e0a",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Data Types must match up and when doing scripting of Attributes, quest parses its Value to determine the Attribute Type (if you already set the Atttribute's Type through the GUI/Editor, then your Value must match up with it.\r\n\r\nany thing in double quotes is a String Value\r\nany non-decimal number is an Integer Value\r\nany decimal number is a Double Value\r\nany thing that is not in double quotes and is not a number and is not a special/reserved word, is an Object (reference/pointer) Value\r\n'true' and 'false' are reserved-as Boolean Values\r\n'this' is a special Value that GETS the parent Object\r\n\r\na String Attribute holds String Values, example:\r\nplayer.strength_string_attribute = \"100\" // even numbers become String values, when encased in double quotes\r\ngame.greeting = \"hi\"\r\nplayer.right_hand_string_attribute = \"sword\" // notice the double quotes on 'sword'\r\n```\r\na Object Attribute holds Object (reference/pointer: name_of_object)  Values, example:\r\n\r\nplayer.right_hand_object_attribute = sword // NO double quotes on the 'sword'\r\n\r\n// there has to actually be a 'sword' Object too (or else an ERROR):\r\n<object name=\"sword\">\r\n</object>\r\n```\r\na Boolean Attribute holds Boolean Values, example: orc.dead = false\r\nan Integer Attribute holds Integer Values: player.strength_integer = 100\r\na Double Attribute holds Double Values: player.damage = 57.23\r\n\r\n--------------\r\n\r\nif you're using Object Attributes for your equipment, those Objects need to actually exist (or else an ERROR), for example:\r\n\r\n```\r\nplayer.right_hand = sword // or: unarmed // or: unknown // or: nothing\r\nplayer.left_hand = shield // or: unarmed // or: unknown // or: nothing\r\nplayer.torso = unarmed // or: naked // or: unknown // or: mail // or: nothing\r\n\r\n<object name=\"sword\">\r\n  <attr name=\"damage\" type=\"int\">10</attr>\r\n</object>\r\n\r\n<object name=\"unarmed\">\r\n  <attr name=\"damage\" type=\"int\">1</attr>\r\n</object>\r\n\r\n<object name=\"unknown\">\r\n  <attr name=\"damage\" type=\"int\">1</attr>\r\n</object>\r\n\r\n<object name=\"naked\">\r\n  <attr name=\"damage\" type=\"int\">1</attr>\r\n</object>\r\n\r\n<object name=\"shield\">\r\n</object>\r\n\r\n<object name=\"mail\">\r\n</object>\r\n\r\n<object name=\"nothing\">\r\n  <attr name=\"damage\" type=\"int\">1</attr>\r\n</object>\r\n\r\n// and you'd do something like this for scirpting:\r\n\r\n<object name=\"player\">\r\n  <attr name=\"damage\" type=\"int\">1</attr>\r\n  <attr name=\"right_hand\" type=\"object\">unknown</attr>\r\n  <attr name=\"changedright_hand\" type=\"script\">\r\n    player.damage = player.right_hand.damage\r\n  </attr>\r\n</object>\r\n```\r\n\r\n--------------\r\n\r\nif you're just/purely using String Attributes, then you don't need the Objects existing:\r\n\r\n```\r\n\r\nplayer.right_hand = \"sword\" // or: \"unarmed\" // or: \"unknown\" // or: \"nothing\"\r\n\r\nbut, then you'd have to do something like this for scripting:\r\n\r\n<object name=\"player\">\r\n  <attr name=\"right_hand\" type=\"string\">unknown</attr>\r\n  <attr name=\"damage\" type=\"int\">1</attr>\r\n  <attr name=\"changedright_hand\" type=\"script\">\r\n    if (player.right_hand = \"unarmed\" or player.right_hand = \"nothing\" or player.right_hand = \"unknown\" or player.right_hand = \"naked\") {\r\n      player.damage = 1\r\n    } else if (player.right_hand = \"sword\") {\r\n      player.damage = 10\r\n    }\r\n  </attr>\r\n</object>\r\n```\r\n\r\n--------\r\n\r\nyou can also use String Attributes but then use the String Attribute/Value to get/use Objects: with GetObject(STRING_NAME_OF_OBJECT)\r\n\r\n--------\r\n\r\nP.S.\r\n\r\n```\r\nthere's also a blank value:\r\n\r\nplayer.right_hand_string_attribute = \"\"\r\nplayer.right_hand_object_attribute =\r\n\r\n<object name=\"player\">\r\n  <attr name=\"right_hand_string_attribute\" type=\"string\"></attr>\r\n  <attr name=\"right_hand_object_attribute\" type=\"object\"></attr>\r\n</object>\r\n\r\nand there's also a 'null' value too:\r\n\r\nplayer.right_hand_string_attribute = null\r\nplayer.right_hand_object_attribute = null\r\n\r\n<object name=\"player\">\r\n  <attr name=\"right_hand_string_attribute\" type=\"string\">null</attr>\r\n  <attr name=\"right_hand_object_attribute\" type=\"object\">null</attr>\r\n</object>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Data Types must match up and when doing scripting of Attributes, quest parses its Value to determine the Attribute Type (if you already set the Atttribute's Type through the GUI/Editor, then your Value must match up with it.</p>\n<p>any thing in double quotes is a String Value<br>\nany non-decimal number is an Integer Value<br>\nany decimal number is a Double Value<br>\nany thing that is not in double quotes and is not a number and is not a special/reserved word, is an Object (reference/pointer) Value<br>\n'true' and 'false' are reserved-as Boolean Values<br>\n'this' is a special Value that GETS the parent Object</p>\n<p>a String Attribute holds String Values, example:<br>\nplayer.strength_string_attribute = \"100\" // even numbers become String values, when encased in double quotes<br>\ngame.greeting = \"hi\"<br>\nplayer.right_hand_string_attribute = \"sword\" // notice the double quotes on 'sword'</p>\n<pre><code>a Object Attribute holds Object (reference/pointer: name_of_object)  Values, example:\n\nplayer.right_hand_object_attribute = sword // NO double quotes on the 'sword'\n\n// there has to actually be a 'sword' Object too (or else an ERROR):\n&lt;object name=\"sword\"&gt;\n&lt;/object&gt;\n</code></pre>\n<p>a Boolean Attribute holds Boolean Values, example: orc.dead = false<br>\nan Integer Attribute holds Integer Values: player.strength_integer = 100<br>\na Double Attribute holds Double Values: player.damage = 57.23</p>\n<hr>\n<p>if you're using Object Attributes for your equipment, those Objects need to actually exist (or else an ERROR), for example:</p>\n<pre><code>player.right_hand = sword // or: unarmed // or: unknown // or: nothing\nplayer.left_hand = shield // or: unarmed // or: unknown // or: nothing\nplayer.torso = unarmed // or: naked // or: unknown // or: mail // or: nothing\n\n&lt;object name=\"sword\"&gt;\n  &lt;attr name=\"damage\" type=\"int\"&gt;10&lt;/attr&gt;\n&lt;/object&gt;\n\n&lt;object name=\"unarmed\"&gt;\n  &lt;attr name=\"damage\" type=\"int\"&gt;1&lt;/attr&gt;\n&lt;/object&gt;\n\n&lt;object name=\"unknown\"&gt;\n  &lt;attr name=\"damage\" type=\"int\"&gt;1&lt;/attr&gt;\n&lt;/object&gt;\n\n&lt;object name=\"naked\"&gt;\n  &lt;attr name=\"damage\" type=\"int\"&gt;1&lt;/attr&gt;\n&lt;/object&gt;\n\n&lt;object name=\"shield\"&gt;\n&lt;/object&gt;\n\n&lt;object name=\"mail\"&gt;\n&lt;/object&gt;\n\n&lt;object name=\"nothing\"&gt;\n  &lt;attr name=\"damage\" type=\"int\"&gt;1&lt;/attr&gt;\n&lt;/object&gt;\n\n// and you'd do something like this for scirpting:\n\n&lt;object name=\"player\"&gt;\n  &lt;attr name=\"damage\" type=\"int\"&gt;1&lt;/attr&gt;\n  &lt;attr name=\"right_hand\" type=\"object\"&gt;unknown&lt;/attr&gt;\n  &lt;attr name=\"changedright_hand\" type=\"script\"&gt;\n    player.damage = player.right_hand.damage\n  &lt;/attr&gt;\n&lt;/object&gt;\n</code></pre>\n<hr>\n<p>if you're just/purely using String Attributes, then you don't need the Objects existing:</p>\n<pre><code>\nplayer.right_hand = \"sword\" // or: \"unarmed\" // or: \"unknown\" // or: \"nothing\"\n\nbut, then you'd have to do something like this for scripting:\n\n&lt;object name=\"player\"&gt;\n  &lt;attr name=\"right_hand\" type=\"string\"&gt;unknown&lt;/attr&gt;\n  &lt;attr name=\"damage\" type=\"int\"&gt;1&lt;/attr&gt;\n  &lt;attr name=\"changedright_hand\" type=\"script\"&gt;\n    if (player.right_hand = \"unarmed\" or player.right_hand = \"nothing\" or player.right_hand = \"unknown\" or player.right_hand = \"naked\") {\n      player.damage = 1\n    } else if (player.right_hand = \"sword\") {\n      player.damage = 10\n    }\n  &lt;/attr&gt;\n&lt;/object&gt;\n</code></pre>\n<hr>\n<p>you can also use String Attributes but then use the String Attribute/Value to get/use Objects: with GetObject(STRING_NAME_OF_OBJECT)</p>\n<hr>\n<p>P.S.</p>\n<pre><code>there's also a blank value:\n\nplayer.right_hand_string_attribute = \"\"\nplayer.right_hand_object_attribute =\n\n&lt;object name=\"player\"&gt;\n  &lt;attr name=\"right_hand_string_attribute\" type=\"string\"&gt;&lt;/attr&gt;\n  &lt;attr name=\"right_hand_object_attribute\" type=\"object\"&gt;&lt;/attr&gt;\n&lt;/object&gt;\n\nand there's also a 'null' value too:\n\nplayer.right_hand_string_attribute = null\nplayer.right_hand_object_attribute = null\n\n&lt;object name=\"player\"&gt;\n  &lt;attr name=\"right_hand_string_attribute\" type=\"string\"&gt;null&lt;/attr&gt;\n  &lt;attr name=\"right_hand_object_attribute\" type=\"object\"&gt;null&lt;/attr&gt;\n&lt;/object&gt;\n</code></pre>\n\n",
      "PostDate": "2017-06-27T00:28:41.8857481Z",
      "LastEditDate": "2017-06-27T00:38:41.3271464Z",
      "link": null
    },
    {
      "PostId": "b5352e49-765c-45ea-9cda-ae966ae79b1d",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You are using String Attributes for your equipment Attributes:\r\n\r\nplayer.upper which is currently at\"nothing\" to start at.\r\nplayer.lower which is currently at \"nothing\" to start at.\r\nplayer.clothed which is currently at \"\" to start at until it is given its value.\r\n\r\nso, you need the double quotes on 'nude':\r\n\r\n```\r\nif (player.upper = \"nothing\") {\r\n  if (player.lower = \"nothing\") {\r\n    player.clothed = \"nude\" // <---------- you didn't have double quotes on 'nude'\r\n  }\r\n}\r\n\r\n// --------------\r\n\r\nSetInc (150)\r\nmsg (\"{player.plevel}\")\r\nmsg (\"{player.purity}\")\r\nmsg (\"{player.clothed}\")\r\nmsg (\"{player.upper}\")\r\nmsg (\"{player.lower}\")\r\n```\r\n\r\nnow, it should work for you.",
      "EditableFormat": "markdown",
      "HTML": "<p>You are using String Attributes for your equipment Attributes:</p>\n<p>player.upper which is currently at\"nothing\" to start at.<br>\nplayer.lower which is currently at \"nothing\" to start at.<br>\nplayer.clothed which is currently at \"\" to start at until it is given its value.</p>\n<p>so, you need the double quotes on 'nude':</p>\n<pre><code>if (player.upper = \"nothing\") {\n  if (player.lower = \"nothing\") {\n    player.clothed = \"nude\" // &lt;---------- you didn't have double quotes on 'nude'\n  }\n}\n\n// --------------\n\nSetInc (150)\nmsg (\"{player.plevel}\")\nmsg (\"{player.purity}\")\nmsg (\"{player.clothed}\")\nmsg (\"{player.upper}\")\nmsg (\"{player.lower}\")\n</code></pre>\n<p>now, it should work for you.</p>\n\n",
      "PostDate": "2017-06-27T00:51:30.5710787Z",
      "LastEditDate": "2017-06-27T00:52:44.402142Z",
      "link": null
    },
    {
      "PostId": "10a3485f-2276-4c1c-9627-918312c0ab43",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How are you setting `player.upper` and `player.lower` in the first place? If you are doing so via the _Attributes_ tab, there should be no quotes. If you are doing it in a script, then there should be quotes.\r\n\r\nWith regards:\r\n```\r\nif (player.upper = \"nothing\") {\r\n  if (player.lower = \"nothing\") {\r\n    player.clothed = nude\r\n  }\r\n}\r\n```\r\n\"nude\" should be in quotes. You also need some code that will set `player.clothed` to some other value when the player is not nude (but perhaps you just did not show).",
      "EditableFormat": "markdown",
      "HTML": "<p>How are you setting <code>player.upper</code> and <code>player.lower</code> in the first place? If you are doing so via the <em>Attributes</em> tab, there should be no quotes. If you are doing it in a script, then there should be quotes.</p>\n<p>With regards:</p>\n<pre><code>if (player.upper = \"nothing\") {\n  if (player.lower = \"nothing\") {\n    player.clothed = nude\n  }\n}\n</code></pre>\n<p>\"nude\" should be in quotes. You also need some code that will set <code>player.clothed</code> to some other value when the player is not nude (but perhaps you just did not show).</p>\n\n",
      "PostDate": "2017-06-27T06:54:37.5139803Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9174ab60-c31f-492c-8c29-2d438a90a641",
      "UserId": 160782,
      "Username": "JenniferKline",
      "AvatarUrl": "https://secure.gravatar.com/avatar/577a4cda5f04217fc7c986ba5b2da370?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yeah, Pixie, the attributes had quotes on. ```player.upper```, ```player.lower ``` and ```player.clothed``` were all added on the player's attribute tab. I'd put quotes on all of them, which did lead to them printing with quotes on and the turn script I'd set to try and calculate when the player was nude to not be working. \r\n\r\nMoment I took away the quotes, things started working with my test command.\r\n\r\n**Turn Script**\r\n```\r\nif (player.upper = \"nothing\") {\r\n  if (player.lower = \"nothing\") {\r\n    set (player, \"clothed\", \"nude\")\r\n  }\r\n}\r\n```\r\n**Test Command**\r\n```\r\nSetInc (150)\r\nmsg (\"{player.plevel}\")\r\nmsg (\"{player.purity}\")\r\nmsg (\"{player.clothed}\")\r\nmsg (\"{player.upper}\")\r\nmsg (\"{player.lower}\")\r\n```\r\n**Attributes**\r\n```String: player.clothed:```\r\n```String: player.upper: nothing```\r\n```String: player.lower: nothing```\r\n\r\nI now get my ```nude``` value as desired. Maybe I didn't fix or work it the proper way, but as long as it works >.> <.< then it's all good.",
      "EditableFormat": "markdown",
      "HTML": "<p>Yeah, Pixie, the attributes had quotes on. <code>player.upper</code>, <code>player.lower</code> and <code>player.clothed</code> were all added on the player's attribute tab. I'd put quotes on all of them, which did lead to them printing with quotes on and the turn script I'd set to try and calculate when the player was nude to not be working.</p>\n<p>Moment I took away the quotes, things started working with my test command.</p>\n<p><strong>Turn Script</strong></p>\n<pre><code>if (player.upper = \"nothing\") {\n  if (player.lower = \"nothing\") {\n    set (player, \"clothed\", \"nude\")\n  }\n}\n</code></pre>\n<p><strong>Test Command</strong></p>\n<pre><code>SetInc (150)\nmsg (\"{player.plevel}\")\nmsg (\"{player.purity}\")\nmsg (\"{player.clothed}\")\nmsg (\"{player.upper}\")\nmsg (\"{player.lower}\")\n</code></pre>\n<p><strong>Attributes</strong><br>\n<code>String: player.clothed:</code><br>\n<code>String: player.upper: nothing</code><br>\n<code>String: player.lower: nothing</code></p>\n<p>I now get my <code>nude</code> value as desired. Maybe I didn't fix or work it the proper way, but as long as it works &gt;.&gt; &lt;.&lt; then it's all good.</p>\n\n",
      "PostDate": "2017-06-27T09:12:41.8147078Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
