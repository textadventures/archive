{
  "Topic": {
    "TopicId": "ziltkiwk2e6_iul0ffydcq",
    "ForumId": "10",
    "Title": "Mixing a cocktail - need help with transformation logic",
    "LastUpdated": "2017-03-02T15:22:08.3593232Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "d8244df3-3a67-4ec8-9601-50732f6b5ab4",
      "UserId": 263865,
      "Username": "NecroDeath",
      "AvatarUrl": "http://i.imgur.com/1w7HHAhb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The player needs to make a cocktail, there is a glass and there are three ingredients they must put in the glass to create the cocktail.\r\n\r\nI have made the glass a transparent container so you can see it contains each of the ingredients as they are added, but I want to transform the glass of items into a cocktail drink when all three ingredients have been added - the problem is they can be added in any order and you can remove them so I don't know how to set the logic, answer is probably object flags but I'm stumped!\r\n\r\nUsing online editor btw. Thanks!",
      "EditableFormat": "markdown",
      "HTML": "<p>The player needs to make a cocktail, there is a glass and there are three ingredients they must put in the glass to create the cocktail.</p>\n<p>I have made the glass a transparent container so you can see it contains each of the ingredients as they are added, but I want to transform the glass of items into a cocktail drink when all three ingredients have been added - the problem is they can be added in any order and you can remove them so I don't know how to set the logic, answer is probably object flags but I'm stumped!</p>\n<p>Using online editor btw. Thanks!</p>\n\n",
      "PostDate": "2017-03-02T15:22:08.3593232Z",
      "LastEditDate": null
    },
    {
      "PostId": "fa874841-2a59-412a-832a-4a7bfd4bb73e",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm not sure how this works on the online version but here is how I do it with download version.\r\n\r\nYou need to set an integer attribute on the glass (or other object) and add 1 each time a correct ingredient is added.\r\n\r\nSet Glass.IngredientCount to Glass.IngredientCount + 1\r\n\r\nAdd a changedIngredientCount as well and run an If script.  If IngredientCount = 1 then print \"blah\"\r\nElse If IngredientCount = 2, then print \"blah\".\r\nElse If IngredientCount = 3, then make \"finished glass\" visible and remove glass.\r\n\r\nYou would have to subtract one from Glass.IngredientCount if you remove an Ingredient.\r\n\r\nI know this will work as I've used it a bunch but I'm not sure if my syntax is correct.  I'll check and give a better answer when I get home!  Hopefully this will get you started.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm not sure how this works on the online version but here is how I do it with download version.</p>\n<p>You need to set an integer attribute on the glass (or other object) and add 1 each time a correct ingredient is added.</p>\n<p>Set Glass.IngredientCount to Glass.IngredientCount + 1</p>\n<p>Add a changedIngredientCount as well and run an If script.  If IngredientCount = 1 then print \"blah\"<br>\nElse If IngredientCount = 2, then print \"blah\".<br>\nElse If IngredientCount = 3, then make \"finished glass\" visible and remove glass.</p>\n<p>You would have to subtract one from Glass.IngredientCount if you remove an Ingredient.</p>\n<p>I know this will work as I've used it a bunch but I'm not sure if my syntax is correct.  I'll check and give a better answer when I get home!  Hopefully this will get you started.</p>\n\n",
      "PostDate": "2017-03-02T15:37:45.3859173Z",
      "LastEditDate": "2017-03-02T15:38:39.3513375Z"
    },
    {
      "PostId": "20de7322-d3b2-4c9c-b165-89733f711af8",
      "UserId": 263865,
      "Username": "NecroDeath",
      "AvatarUrl": "http://i.imgur.com/1w7HHAhb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, OK that makes sense, I'll give it a go. Thank you!",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, OK that makes sense, I'll give it a go. Thank you!</p>\n\n",
      "PostDate": "2017-03-02T16:10:12.392932Z",
      "LastEditDate": null
    },
    {
      "PostId": "1e1a11ca-6cff-4170-8a84-a27a2d527b3a",
      "UserId": 263865,
      "Username": "NecroDeath",
      "AvatarUrl": "http://i.imgur.com/1w7HHAhb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Immediate problem is that I can't see where on the Object attributes to add the integer/script?",
      "EditableFormat": "markdown",
      "HTML": "<p>Immediate problem is that I can't see where on the Object attributes to add the integer/script?</p>\n\n",
      "PostDate": "2017-03-02T16:13:03.800815Z",
      "LastEditDate": null
    },
    {
      "PostId": "e3080fc9-c31f-46ef-b98a-a3dd558e58a0",
      "UserId": 260569,
      "Username": "DarkLizerd",
      "AvatarUrl": "http://i.imgur.com/BXvaaIub.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think, using logic here, you should remove the \"remove item\" option on the glass.\r\n(Ever tried removing salt from a drink?)\r\nBut you could have an option to discard the glass, empty it, and start over....\r\nBut if you have a limit of ingredients to start with, it would limit the players chances if he \r\nuses trial and error...\r\n(just a thought)\r\nBut you may need a \"drink mix book\" somewhere...\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I think, using logic here, you should remove the \"remove item\" option on the glass.<br>\n(Ever tried removing salt from a drink?)<br>\nBut you could have an option to discard the glass, empty it, and start over....<br>\nBut if you have a limit of ingredients to start with, it would limit the players chances if he<br>\nuses trial and error...<br>\n(just a thought)<br>\nBut you may need a \"drink mix book\" somewhere...</p>\n\n",
      "PostDate": "2017-03-02T18:49:11.8787053Z",
      "LastEditDate": null
    },
    {
      "PostId": "22b2dde3-a297-4a9a-92d9-046ac240b9f9",
      "UserId": 263865,
      "Username": "NecroDeath",
      "AvatarUrl": "http://i.imgur.com/1w7HHAhb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I don't see a 'remove item' option to change?",
      "EditableFormat": "markdown",
      "HTML": "<p>I don't see a 'remove item' option to change?</p>\n\n",
      "PostDate": "2017-03-02T18:54:32.3577761Z",
      "LastEditDate": null
    },
    {
      "PostId": "e7bf6379-0af5-4e2d-b3b0-e13cae885405",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh boy. I'll look at the online version when I get home.  Not sure what needs to be done there.  I'll post in a couple hours.",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh boy. I'll look at the online version when I get home.  Not sure what needs to be done there.  I'll post in a couple hours.</p>\n\n",
      "PostDate": "2017-03-02T19:25:33.694015Z",
      "LastEditDate": null
    },
    {
      "PostId": "27f9bea5-5702-4598-9aaa-64faaf09d79c",
      "UserId": 263865,
      "Username": "NecroDeath",
      "AvatarUrl": "http://i.imgur.com/1w7HHAhb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks, really appreciate it.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks, really appreciate it.</p>\n\n",
      "PostDate": "2017-03-02T19:56:04.5544244Z",
      "LastEditDate": null
    },
    {
      "PostId": "34168764-4943-41a1-a4d6-8c90297fbd75",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This will depend on how you have it set up. If there is only one instance of each ingredient in the world, then an integer is good. Otherwise, you would need a flag for each ingredient if you wanted to prevent the player adding the same ingredient twice, or an integer for each ingredient, if you want to let the player create any mixture.\r\n\r\nThe way to add attributes is in the start script on the game object. Eg:\r\n```\r\ndrink.ingredient1count = 0",
      "EditableFormat": "markdown",
      "HTML": "<p>This will depend on how you have it set up. If there is only one instance of each ingredient in the world, then an integer is good. Otherwise, you would need a flag for each ingredient if you wanted to prevent the player adding the same ingredient twice, or an integer for each ingredient, if you want to let the player create any mixture.</p>\n<p>The way to add attributes is in the start script on the game object. Eg:</p>\n<pre><code>drink.ingredient1count = 0\n</code></pre>\n\n",
      "PostDate": "2017-03-02T20:43:33.5129856Z",
      "LastEditDate": null
    },
    {
      "PostId": "01fdac53-81f5-4364-961e-d498bc2471bf",
      "UserId": 263865,
      "Username": "NecroDeath",
      "AvatarUrl": "http://i.imgur.com/1w7HHAhb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "only one of each ingredient so that logic works, but I don't know how to increase the integer when item is placed inside container/glass? I could create a logic IF tree using 'object contains', but only if I can change the remove item on the glass container? \r\n\r\nThanks.",
      "EditableFormat": "markdown",
      "HTML": "<p>only one of each ingredient so that logic works, but I don't know how to increase the integer when item is placed inside container/glass? I could create a logic IF tree using 'object contains', but only if I can change the remove item on the glass container?</p>\n<p>Thanks.</p>\n\n",
      "PostDate": "2017-03-02T20:53:03.9789423Z",
      "LastEditDate": null
    },
    {
      "PostId": "26aeedd0-e1d4-4b9b-9819-0534911216fd",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sounds like a job for [change scripts](http://docs.textadventures.co.uk/quest/change_scripts.html). As you are on the web version, you will need to set this up on the game start script. A change script fires when an attribute changes, and in this case we want that when the parent attribute of each ingredient changes. Say the first is called `ingredient1`, this code will give is a change script that will call a function, `CocktailTest`, whenever it is moved. You need to do that for each ingredient.\r\n```\r\ningredient1.changedparent => {\r\n  CocktailTest\r\n}\r\n```\r\nThen create the function, CocktailTest. If has to add one to the running total (creating a running total if it does not exist yet), and not when it reaches 3.\r\n```\r\nif (not HasInt(glass, \"count\")) {\r\n  glass.count = 0\r\n}\r\nglass.count = glass.count + 1\r\nif (glass.count = 3) {\r\n  msg(\"You made that cocktail.\")\r\n}\r\n```\r\nBy the way, never do this for the player. It already has a change script for the parent attribute; if you add yours it will mess up big time.",
      "EditableFormat": "markdown",
      "HTML": "<p>Sounds like a job for <a href=\"http://docs.textadventures.co.uk/quest/change_scripts.html\">change scripts</a>. As you are on the web version, you will need to set this up on the game start script. A change script fires when an attribute changes, and in this case we want that when the parent attribute of each ingredient changes. Say the first is called <code>ingredient1</code>, this code will give is a change script that will call a function, <code>CocktailTest</code>, whenever it is moved. You need to do that for each ingredient.</p>\n<pre><code>ingredient1.changedparent =&gt; {\n  CocktailTest\n}\n</code></pre>\n<p>Then create the function, CocktailTest. If has to add one to the running total (creating a running total if it does not exist yet), and not when it reaches 3.</p>\n<pre><code>if (not HasInt(glass, \"count\")) {\n  glass.count = 0\n}\nglass.count = glass.count + 1\nif (glass.count = 3) {\n  msg(\"You made that cocktail.\")\n}\n</code></pre>\n<p>By the way, never do this for the player. It already has a change script for the parent attribute; if you add yours it will mess up big time.</p>\n\n",
      "PostDate": "2017-03-02T21:09:57.5713615Z",
      "LastEditDate": null
    },
    {
      "PostId": "11f7bcaa-347b-4663-9599-c1640f7bd121",
      "UserId": 263865,
      "Username": "NecroDeath",
      "AvatarUrl": "http://i.imgur.com/1w7HHAhb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Awesome! Thanks for this, will try it tomorrow with a clean head.",
      "EditableFormat": "markdown",
      "HTML": "<p>Awesome! Thanks for this, will try it tomorrow with a clean head.</p>\n\n",
      "PostDate": "2017-03-02T21:17:16.6718399Z",
      "LastEditDate": null
    },
    {
      "PostId": "72e5afd9-6311-4cb9-9657-b35525e3d860",
      "UserId": 260569,
      "Username": "DarkLizerd",
      "AvatarUrl": "http://i.imgur.com/BXvaaIub.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "\"No remove item\"... that I did not know, it was just mentioned in the previous post...\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>\"No remove item\"... that I did not know, it was just mentioned in the previous post...</p>\n\n",
      "PostDate": "2017-03-03T03:31:44.944579Z",
      "LastEditDate": null
    },
    {
      "PostId": "aa9bf919-0135-4503-b33b-19120ef9b4ec",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry... that was meant to be \"Remove object\" under the object tab.  =/\r\n\r\nI suggested removing the original glass object when the mix was complete as to eliminate any possible mistakes/conflicts with the finished product.  After removing the old glass, the new glass takes on all new attributes so no more messing with the old stuff.  \r\n\r\nLooks like TP has given you good advice!  I would suggest, however, to try to use the download version if possible.  So much more versatile and reliable!  =)\r\n\r\nBest of luck!",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry... that was meant to be \"Remove object\" under the object tab.  =/</p>\n<p>I suggested removing the original glass object when the mix was complete as to eliminate any possible mistakes/conflicts with the finished product.  After removing the old glass, the new glass takes on all new attributes so no more messing with the old stuff.</p>\n<p>Looks like TP has given you good advice!  I would suggest, however, to try to use the download version if possible.  So much more versatile and reliable!  =)</p>\n<p>Best of luck!</p>\n\n",
      "PostDate": "2017-03-03T05:28:37.0903901Z",
      "LastEditDate": null
    }
  ]
}
