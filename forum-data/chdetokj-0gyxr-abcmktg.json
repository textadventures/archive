{
  "Topic": {
    "TopicId": "chdetokj-0gyxr-abcmktg",
    "ForumId": "18",
    "Title": "HorseLib ",
    "LastUpdated": "2018-03-28T23:21:13.3707169Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "71cf834f-41d9-4b63-92b7-da9d9cc27c29",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello.\r\n\r\nI'm working on a Horseback library.\r\n\r\nAny comments or suggestions are welcome!\r\n\r\n---\r\n\r\nHere's a link to the example game:\r\n\r\nhttp://textadventures.co.uk/games/view/kjeixkq6m0sglxi5b1tl_g/horse\r\n\r\n---\r\n\r\nHere's the current example game's code:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <include ref=\"HorseLib.aslx\" />\r\n  <game name=\"Horse\">\r\n    <gameid>61f556ff-667d-4c55-af9b-205789629685</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <publishfileextensions>*.jpg;*.jpeg;*.png;*.gif;*.js;*.wav;*.mp3;*.htm;*.html;*.svg;*.ogg</publishfileextensions>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <alias>field</alias>\r\n    <beforeenter type=\"script\">\r\n    </beforeenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"horse1\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"horsetype\" />\r\n      <look>Behold, a pale horse.</look>\r\n      <alias>horse</alias>\r\n    </object>\r\n    <object name=\"bottle\">\r\n      <inherit name=\"editor_object\" />\r\n      <take />\r\n    </object>\r\n    <exit alias=\"north\" to=\"second room\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"second room\">\r\n    <inherit name=\"editor_room\" />\r\n    <alias>clearing</alias>\r\n    <exit alias=\"south\" to=\"room\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n</asl>\r\n```\r\n\r\n\r\n---\r\nHere's the current library:\r\n\r\n```\r\n<?xml version=\"1.0\"?>\r\n<library>\r\n  <object name=\"standin_horse\">\r\n    <inherit name=\"editor_object\" />\r\n    <inherit name=\"surface\" />\r\n    <alias>horse</alias>\r\n    <scenery type=\"boolean\">false</scenery>\r\n    <look>You are riding it.</look>\r\n    <visible type=\"boolean\">false</visible>\r\n    <feature_container />\r\n    <listchildren />\r\n    <listchildrenprefix>On its back, you can see</listchildrenprefix>\r\n\t<displayverbs type=\"stringlist\">\r\n      <value>Look at</value>\r\n      <value>Dismount</value>\r\n    </displayverbs>\r\n    <dismount type=\"script\">\r\n      this.visible = false\r\n      foreach (o, GetDirectChildren(this.real_horse)) {\r\n        MoveObject (o, game.real_pov)\r\n      }\r\n      game.real_pov.visible = true\r\n      DisableTurnScript (on_horseback)\r\n      ChangePOV (game.real_pov)\r\n\t  game.pov.onhorseback = false\r\n      link = ProcessText(\"{object:\"+game.currenthorse.name+\":\"+game.currenthorse.alias+\"}\")\r\n      JS.eval (\"$('.elementmenu').each(function(){if($(this).attr('data-elementid') == '\"+this.name+\"'){$(this).html('\"+link+\"');}\t});\")\r\n      game.currenthorse = null\r\n    </dismount>\r\n    <addscript type=\"script\">\r\n      s = WriteVerb(object,\"fall\")\r\n      msg (s + \" off of the horse.\")\r\n      object.parent = this.parent\r\n    </addscript>\r\n  </object>\r\n  <command name=\"dismount_cmd\">\r\n    <pattern type=\"string\">^dismount$</pattern>\r\n    <script>\r\n      if (DoesInherit(game.pov,\"horsetype\")) {\r\n        do (game.currenthorse.standin, \"dismount\")\r\n      }\r\n      else {\r\n        msg (\"You aren't riding anything.\")\r\n      }\r\n    </script>\r\n  </command>\r\n  <command name=\"take_mod\">\r\n    <pattern>take #object#; get #object#; pick up #object#</pattern>\r\n    <multiple>\r\n      takeList = NewObjectList()\r\n      foreach (obj, ListExclude(ScopeVisibleNotHeldNotScenery(), game.pov)) {\r\n        if (obj.parent = game.pov.parent) {\r\n          list add (takeList, obj)\r\n        }\r\n      }\r\n      return (takeList)\r\n    </multiple>\r\n    <scope>notheld</scope>\r\n    <multipleobjects type=\"script\">\r\n      game.pov.currentcommandpendingobjectscope = NewObjectList()\r\n      foreach (obj, ListExclude(ScopeVisibleNotHeldNotScenery(), game.pov)) {\r\n        if (obj.parent = game.pov.parent and not DoesInherit(obj, \"npc_type\")) {\r\n          list add (game.pov.currentcommandpendingobjectscope, obj)\r\n        }\r\n      }\r\n    </multipleobjects>\r\n    <script>\r\n      if (multiple and ListCount(object) = 0) {\r\n        msg (\"Nothing here to take.\")\r\n      }\r\n      else {\r\n        foreach (obj, object) {\r\n          goodtogo = false\r\n          if (not GetBoolean (game.pov, \"onhorseback\")) {\r\n            goodtogo = true\r\n          }\r\n          else {\r\n            if (obj.parent = game.pov.parent) {\r\n              goodtogo = false\r\n              msg (\"You'll have to dismount first.\")\r\n            }\r\n          }\r\n          if (goodtogo) {\r\n            DoTake (obj, multiple)\r\n          }\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n  <type name=\"horsetype\">\r\n    <inherit name=\"surface\" />\r\n    <inherit name=\"editor_player\" />\r\n    <feature_container />\r\n    <feature_player />\r\n\t<standinprototype type=\"object\">standin_horse</standinprototype>\r\n    <attr name=\"pov_alias\">me (on horseback)</attr>\r\n    <attr name=\"pov_gender\">you (on horseback)</attr>\r\n    <attr name=\"pov_article\">yourself (on horseback)</attr>\r\n    <attr name=\"pov_possessive\">your</attr>\r\n    <attr name=\"pov_look\">Looking good  (on horseback).</attr>\r\n    <displayverbs type=\"stringlist\">\r\n      <value>Look at</value>\r\n      <value>Mount</value>\r\n    </displayverbs>\r\n    <mount type=\"script\">\r\n      if (not game.pov = this) {\r\n        msg (\"Done.\")\r\n        game.pov.visible = false\r\n        game.currenthorse = this\r\n        game.real_pov = game.pov\r\n        this.standin = CloneObjectAndMoveHere(this.standinprototype)\r\n        this.oldalt = GetDisplayAlias(this)\r\n        this.standin.visible = true\r\n        this.standin.real_horse = this\r\n        foreach (o, GetDirectChildren(game.pov)) {\r\n          MoveObject (o, this)\r\n        }\r\n        EnableTurnScript (on_horseback)\r\n        ChangePOV (this)\r\n\t\tgame.pov.onhorseback = true\r\n        this.alt = this.alt - this.oldalt\r\n        game.pov.pov_alt = game.pov.pov_alt - this.oldalt\r\n      }\r\n      else {\r\n        msg (\"You already have.\")\r\n      }\r\n      link = ProcessText(\"{object:\"+this.standin.name+\":\"+this.standin.alias+\"}\")\r\n      JS.eval (\"$('.elementmenu').each(function(){if($(this).attr('data-elementid') == '\"+this.name+\"'){$(this).html('\"+link+\"');}\t});\")\r\n    </mount>\r\n  </type>\r\n\r\n  <verb>\r\n    <property>mount</property>\r\n    <pattern>mount</pattern>\r\n    <defaultexpression>\"You can't mount \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <verb name=\"dismount_verb\">\r\n    <property>dismount</property>\r\n    <pattern>dismount</pattern>\r\n    <defaultexpression>\"You can't dismount \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <turnscript name=\"on_horseback\">\r\n    <enabled type=\"boolean\">false</enabled>\r\n    <script>\r\n      game.currenthorse.standin.parent = game.currenthorse.parent\r\n      JS.eval (\"updateLocation ('\"+CapFirst(GetDisplayName(game.pov.parent))+\" (on horseback)');\")\r\n    </script>\r\n  </turnscript>\r\n  \r\n  <tab>\r\n    <parent>_ObjectEditor</parent>\r\n    <caption>Horse Options</caption>\r\n    <mustnotinherit>editor_room</mustnotinherit>\r\n\t<onlydisplayif>not this=player</onlydisplayif>\r\n\t\r\n\t<control>\r\n      <controltype>dropdowntypes</controltype>\r\n      <caption>Type</caption>\r\n      <types>*=None; horsetype=Horse</types>\r\n      <width>150</width>\r\n    </control>\r\n\t\r\n\t<control>\r\n      <controltype>objects</controltype>\r\n      <caption>Stand-in prototype</caption>\r\n      <attribute>standinprototype</attribute>\r\n      <mustinherit>horsetype</mustinherit>\r\n    </control>\r\n\t\r\n\t\r\n  </tab>\r\n\t\r\n</library>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello.</p>\n<p>I'm working on a Horseback library.</p>\n<p>Any comments or suggestions are welcome!</p>\n<hr>\n<p>Here's a link to the example game:</p>\n<p>http://textadventures.co.uk/games/view/kjeixkq6m0sglxi5b1tl_g/horse</p>\n<hr>\n<p>Here's the current example game's code:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;include ref=\"HorseLib.aslx\" /&gt;\n  &lt;game name=\"Horse\"&gt;\n    &lt;gameid&gt;61f556ff-667d-4c55-af9b-205789629685&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;publishfileextensions&gt;*.jpg;*.jpeg;*.png;*.gif;*.js;*.wav;*.mp3;*.htm;*.html;*.svg;*.ogg&lt;/publishfileextensions&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;alias&gt;field&lt;/alias&gt;\n    &lt;beforeenter type=\"script\"&gt;\n    &lt;/beforeenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"horse1\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"horsetype\" /&gt;\n      &lt;look&gt;Behold, a pale horse.&lt;/look&gt;\n      &lt;alias&gt;horse&lt;/alias&gt;\n    &lt;/object&gt;\n    &lt;object name=\"bottle\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;take /&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"north\" to=\"second room\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"second room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;alias&gt;clearing&lt;/alias&gt;\n    &lt;exit alias=\"south\" to=\"room\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>Here's the current library:</p>\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;library&gt;\n  &lt;object name=\"standin_horse\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;inherit name=\"surface\" /&gt;\n    &lt;alias&gt;horse&lt;/alias&gt;\n    &lt;scenery type=\"boolean\"&gt;false&lt;/scenery&gt;\n    &lt;look&gt;You are riding it.&lt;/look&gt;\n    &lt;visible type=\"boolean\"&gt;false&lt;/visible&gt;\n    &lt;feature_container /&gt;\n    &lt;listchildren /&gt;\n    &lt;listchildrenprefix&gt;On its back, you can see&lt;/listchildrenprefix&gt;\n\t&lt;displayverbs type=\"stringlist\"&gt;\n      &lt;value&gt;Look at&lt;/value&gt;\n      &lt;value&gt;Dismount&lt;/value&gt;\n    &lt;/displayverbs&gt;\n    &lt;dismount type=\"script\"&gt;\n      this.visible = false\n      foreach (o, GetDirectChildren(this.real_horse)) {\n        MoveObject (o, game.real_pov)\n      }\n      game.real_pov.visible = true\n      DisableTurnScript (on_horseback)\n      ChangePOV (game.real_pov)\n\t  game.pov.onhorseback = false\n      link = ProcessText(\"{object:\"+game.currenthorse.name+\":\"+game.currenthorse.alias+\"}\")\n      JS.eval (\"$('.elementmenu').each(function(){if($(this).attr('data-elementid') == '\"+this.name+\"'){$(this).html('\"+link+\"');}\t});\")\n      game.currenthorse = null\n    &lt;/dismount&gt;\n    &lt;addscript type=\"script\"&gt;\n      s = WriteVerb(object,\"fall\")\n      msg (s + \" off of the horse.\")\n      object.parent = this.parent\n    &lt;/addscript&gt;\n  &lt;/object&gt;\n  &lt;command name=\"dismount_cmd\"&gt;\n    &lt;pattern type=\"string\"&gt;^dismount$&lt;/pattern&gt;\n    &lt;script&gt;\n      if (DoesInherit(game.pov,\"horsetype\")) {\n        do (game.currenthorse.standin, \"dismount\")\n      }\n      else {\n        msg (\"You aren't riding anything.\")\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"take_mod\"&gt;\n    &lt;pattern&gt;take #object#; get #object#; pick up #object#&lt;/pattern&gt;\n    &lt;multiple&gt;\n      takeList = NewObjectList()\n      foreach (obj, ListExclude(ScopeVisibleNotHeldNotScenery(), game.pov)) {\n        if (obj.parent = game.pov.parent) {\n          list add (takeList, obj)\n        }\n      }\n      return (takeList)\n    &lt;/multiple&gt;\n    &lt;scope&gt;notheld&lt;/scope&gt;\n    &lt;multipleobjects type=\"script\"&gt;\n      game.pov.currentcommandpendingobjectscope = NewObjectList()\n      foreach (obj, ListExclude(ScopeVisibleNotHeldNotScenery(), game.pov)) {\n        if (obj.parent = game.pov.parent and not DoesInherit(obj, \"npc_type\")) {\n          list add (game.pov.currentcommandpendingobjectscope, obj)\n        }\n      }\n    &lt;/multipleobjects&gt;\n    &lt;script&gt;\n      if (multiple and ListCount(object) = 0) {\n        msg (\"Nothing here to take.\")\n      }\n      else {\n        foreach (obj, object) {\n          goodtogo = false\n          if (not GetBoolean (game.pov, \"onhorseback\")) {\n            goodtogo = true\n          }\n          else {\n            if (obj.parent = game.pov.parent) {\n              goodtogo = false\n              msg (\"You'll have to dismount first.\")\n            }\n          }\n          if (goodtogo) {\n            DoTake (obj, multiple)\n          }\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;type name=\"horsetype\"&gt;\n    &lt;inherit name=\"surface\" /&gt;\n    &lt;inherit name=\"editor_player\" /&gt;\n    &lt;feature_container /&gt;\n    &lt;feature_player /&gt;\n\t&lt;standinprototype type=\"object\"&gt;standin_horse&lt;/standinprototype&gt;\n    &lt;attr name=\"pov_alias\"&gt;me (on horseback)&lt;/attr&gt;\n    &lt;attr name=\"pov_gender\"&gt;you (on horseback)&lt;/attr&gt;\n    &lt;attr name=\"pov_article\"&gt;yourself (on horseback)&lt;/attr&gt;\n    &lt;attr name=\"pov_possessive\"&gt;your&lt;/attr&gt;\n    &lt;attr name=\"pov_look\"&gt;Looking good  (on horseback).&lt;/attr&gt;\n    &lt;displayverbs type=\"stringlist\"&gt;\n      &lt;value&gt;Look at&lt;/value&gt;\n      &lt;value&gt;Mount&lt;/value&gt;\n    &lt;/displayverbs&gt;\n    &lt;mount type=\"script\"&gt;\n      if (not game.pov = this) {\n        msg (\"Done.\")\n        game.pov.visible = false\n        game.currenthorse = this\n        game.real_pov = game.pov\n        this.standin = CloneObjectAndMoveHere(this.standinprototype)\n        this.oldalt = GetDisplayAlias(this)\n        this.standin.visible = true\n        this.standin.real_horse = this\n        foreach (o, GetDirectChildren(game.pov)) {\n          MoveObject (o, this)\n        }\n        EnableTurnScript (on_horseback)\n        ChangePOV (this)\n\t\tgame.pov.onhorseback = true\n        this.alt = this.alt - this.oldalt\n        game.pov.pov_alt = game.pov.pov_alt - this.oldalt\n      }\n      else {\n        msg (\"You already have.\")\n      }\n      link = ProcessText(\"{object:\"+this.standin.name+\":\"+this.standin.alias+\"}\")\n      JS.eval (\"$('.elementmenu').each(function(){if($(this).attr('data-elementid') == '\"+this.name+\"'){$(this).html('\"+link+\"');}\t});\")\n    &lt;/mount&gt;\n  &lt;/type&gt;\n\n  &lt;verb&gt;\n    &lt;property&gt;mount&lt;/property&gt;\n    &lt;pattern&gt;mount&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't mount \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb name=\"dismount_verb\"&gt;\n    &lt;property&gt;dismount&lt;/property&gt;\n    &lt;pattern&gt;dismount&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't dismount \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;turnscript name=\"on_horseback\"&gt;\n    &lt;enabled type=\"boolean\"&gt;false&lt;/enabled&gt;\n    &lt;script&gt;\n      game.currenthorse.standin.parent = game.currenthorse.parent\n      JS.eval (\"updateLocation ('\"+CapFirst(GetDisplayName(game.pov.parent))+\" (on horseback)');\")\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  \n  &lt;tab&gt;\n    &lt;parent&gt;_ObjectEditor&lt;/parent&gt;\n    &lt;caption&gt;Horse Options&lt;/caption&gt;\n    &lt;mustnotinherit&gt;editor_room&lt;/mustnotinherit&gt;\n\t&lt;onlydisplayif&gt;not this=player&lt;/onlydisplayif&gt;\n\t\n\t&lt;control&gt;\n      &lt;controltype&gt;dropdowntypes&lt;/controltype&gt;\n      &lt;caption&gt;Type&lt;/caption&gt;\n      &lt;types&gt;*=None; horsetype=Horse&lt;/types&gt;\n      &lt;width&gt;150&lt;/width&gt;\n    &lt;/control&gt;\n\t\n\t&lt;control&gt;\n      &lt;controltype&gt;objects&lt;/controltype&gt;\n      &lt;caption&gt;Stand-in prototype&lt;/caption&gt;\n      &lt;attribute&gt;standinprototype&lt;/attribute&gt;\n      &lt;mustinherit&gt;horsetype&lt;/mustinherit&gt;\n    &lt;/control&gt;\n\t\n\t\n  &lt;/tab&gt;\n\t\n&lt;/library&gt;\n</code></pre>\n\n",
      "PostDate": "2018-03-28T23:21:13.3707169Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
