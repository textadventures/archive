{
  "Topic": {
    "TopicId": "lrdb56u2bka3vqduogog0w",
    "ForumId": "10",
    "Title": "Variable Not Subtracting in a Function [SOLVED]",
    "LastUpdated": "2018-12-23T03:51:47.0676545Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "2b1eb0fa-2eb3-43fe-94cc-25e340e1e332",
      "UserId": 248029,
      "Username": "Anonynn",
      "AvatarUrl": "https://i.imgur.com/1xu84dwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "For some reason the player's gold is not subtracting when an item is purchased from this Function. Does anyone see what I'm doing wrong? \r\n\r\n```\r\nClearScreen\r\nmenulist = Split(\"Large Health Potion;Small Health Potion;Decurser;Sewing Kit;Mixing Kit;Metallurgy Kit;Sword of Demonslaying;Leather Whip;Leave\", \";\")\r\nShowMenu (\"\", menulist, true) {\r\n  if (result = \"Large Health Potion\") {\r\n    msg (\"<br/><font color= \\\"74789D\\\">\\\"Hm...4 gold for that.\\\"</font color><br/><br/>Would you like to buy this?\")\r\n    menulist = Split(\"Yes;No\", \";\")\r\n    ShowMenu (\"\", menulist, true) {\r\n      if (result = \"Yes\") {\r\n        if (player.gold>=4) {\r\n          msg (\"<br/>You toss Jensen the gold{random: and then take the item in hand:}. \")\r\n          CloneObjectAndMove (large_health_potion, player)\r\n          player.gold = player.gold - 4\r\n          JensenShop\r\n        }\r\n        else {\r\n          msg (\"<br/>You don't have enough.\")\r\n          JensenShop\r\n        }\r\n      }\r\n      else if (result = \"No\") {\r\n        JensenShop\r\n      }\r\n    }\r\n  }\r\n  }\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>For some reason the player's gold is not subtracting when an item is purchased from this Function. Does anyone see what I'm doing wrong?</p>\n<pre><code>ClearScreen\nmenulist = Split(\"Large Health Potion;Small Health Potion;Decurser;Sewing Kit;Mixing Kit;Metallurgy Kit;Sword of Demonslaying;Leather Whip;Leave\", \";\")\nShowMenu (\"\", menulist, true) {\n  if (result = \"Large Health Potion\") {\n    msg (\"&lt;br/&gt;&lt;font color= \\\"74789D\\\"&gt;\\\"Hm...4 gold for that.\\\"&lt;/font color&gt;&lt;br/&gt;&lt;br/&gt;Would you like to buy this?\")\n    menulist = Split(\"Yes;No\", \";\")\n    ShowMenu (\"\", menulist, true) {\n      if (result = \"Yes\") {\n        if (player.gold&gt;=4) {\n          msg (\"&lt;br/&gt;You toss Jensen the gold{random: and then take the item in hand:}. \")\n          CloneObjectAndMove (large_health_potion, player)\n          player.gold = player.gold - 4\n          JensenShop\n        }\n        else {\n          msg (\"&lt;br/&gt;You don't have enough.\")\n          JensenShop\n        }\n      }\n      else if (result = \"No\") {\n        JensenShop\n      }\n    }\n  }\n  }\n</code></pre>\n\n",
      "PostDate": "2018-12-23T03:51:47.0676545Z",
      "LastEditDate": "2018-12-23T18:52:22.560754Z",
      "link": null
    },
    {
      "PostId": "fac083af-6a14-4578-8025-0efd02aab4db",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\nif (player.gold>=4) {  ///no spaces? if (player.gold >= 4) {",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>if (player.gold&gt;=4) {  ///no spaces? if (player.gold &gt;= 4) {\n</code></pre>\n\n",
      "PostDate": "2018-12-23T04:14:38.3759208Z",
      "LastEditDate": "2018-12-23T04:15:51.6931603Z",
      "link": null
    },
    {
      "PostId": "4f57234e-a8ec-4adf-9889-9573ee4f00a8",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "There needs to be spaces.\r\n\r\n```\r\n if (player.gold >= 4) {\r\n}\r\n```\r\n\r\nAlso, whenever I have this problem, I need to add space too, or I need to close and reload a game a few times.",
      "EditableFormat": "markdown",
      "HTML": "<p>There needs to be spaces.</p>\n<pre><code> if (player.gold &gt;= 4) {\n}\n</code></pre>\n<p>Also, whenever I have this problem, I need to add space too, or I need to close and reload a game a few times.</p>\n\n",
      "PostDate": "2018-12-23T04:31:21.7557452Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "76aa330c-631a-426e-aedd-8f19f0531054",
      "UserId": 248029,
      "Username": "Anonynn",
      "AvatarUrl": "https://i.imgur.com/1xu84dwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I don't think spaces matter. The player is receiving the item just fine which means the script is firing the way it's supposed to but the gold isn't getting subtracted from the script for some reason. \r\n\r\nAnonynn. ",
      "EditableFormat": "markdown",
      "HTML": "<p>I don't think spaces matter. The player is receiving the item just fine which means the script is firing the way it's supposed to but the gold isn't getting subtracted from the script for some reason.</p>\n<p>Anonynn.</p>\n\n",
      "PostDate": "2018-12-23T05:30:00.0946594Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "16e52902-c538-4c7d-af1a-079c916cfb50",
      "UserId": 248029,
      "Username": "Anonynn",
      "AvatarUrl": "https://i.imgur.com/1xu84dwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay....so it isn't updating the gold until after I leave the function... e_e",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay....so it isn't updating the gold until after I leave the function... e_e</p>\n\n",
      "PostDate": "2018-12-23T07:24:41.8269461Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a8fa8467-f451-48f9-80c7-e7218a78fa66",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you mean the gold shown in a status sttribute or similar, that's unfortunately the case now. Status attributes are not updated while a menu is displayed unless you manually call `UpdateStatusAttributes`.",
      "EditableFormat": "markdown",
      "HTML": "<p>If you mean the gold shown in a status sttribute or similar, that's unfortunately the case now. Status attributes are not updated while a menu is displayed unless you manually call <code>UpdateStatusAttributes</code>.</p>\n\n",
      "PostDate": "2018-12-23T10:19:11.109804Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0d6691df-ee3c-4e9b-99a4-3c81fb50167a",
      "UserId": 248029,
      "Username": "Anonynn",
      "AvatarUrl": "https://i.imgur.com/1xu84dwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yup! I added that in :) ",
      "EditableFormat": "markdown",
      "HTML": "<p>Yup! I added that in :)</p>\n\n",
      "PostDate": "2018-12-23T18:33:01.1982751Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a07db055-5e9c-4197-b4c3-abd0698a8d6f",
      "UserId": 248029,
      "Username": "Anonynn",
      "AvatarUrl": "https://i.imgur.com/1xu84dwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks for your input everyone!\r\n\r\nAnonynn",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks for your input everyone!</p>\n<p>Anonynn</p>\n\n",
      "PostDate": "2018-12-23T18:52:06.3844869Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
