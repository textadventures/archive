{
  "Topic": {
    "TopicId": "7irmzindaemqykiupyierq",
    "ForumId": "10",
    "Title": "Convlib + phone",
    "LastUpdated": "2018-04-17T11:57:14.9823655Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "32641815-f646-43fa-92e0-69f39f371f1b",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm using The Pixie's ConvLib and it's working really well. \r\n\r\nI wonder how to \"tie\" it to a phone (object).\r\nEx:\r\n\r\n(input) call 12345\r\nwhen pressing enter I want the conversation to start without typing \"talk to...\" etc.\r\nIs this doable?",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm using The Pixie's ConvLib and it's working really well.</p>\n<p>I wonder how to \"tie\" it to a phone (object).<br>\nEx:</p>\n<p>(input) call 12345<br>\nwhen pressing enter I want the conversation to start without typing \"talk to...\" etc.<br>\nIs this doable?</p>\n\n",
      "PostDate": "2018-04-17T11:57:14.9823655Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "36b977c3-e6ba-46fd-83bd-b2d951378971",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Couldn't you just change and copy the code for the talk command, into a new command? And then you could change the rest of the code if you needed to?",
      "EditableFormat": "markdown",
      "HTML": "<p>Couldn't you just change and copy the code for the talk command, into a new command? And then you could change the rest of the code if you needed to?</p>\n\n",
      "PostDate": "2018-04-18T16:05:30.0400067Z",
      "LastEditDate": "2018-04-18T16:05:56.9382267Z",
      "link": null
    },
    {
      "PostId": "190d48b0-3ad2-4a52-8311-593a021abe57",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Create a new game, open it in full code view, delete ALL the text, and paste this in.\r\n\r\nThen, flip back to GUI to check out one way I would do it.  (The phone is fixed in place in this example.  I didn't add any components; no buttons, screen, rotary dial, receiver, speaker, mic... Nothing.)\r\n\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Call People\">\r\n    <gameid>8a58a8e3-51ad-4b3f-8afb-55aa9c16f281</gameid>\r\n    <version>1.1</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <feature_asktell />\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"phone\">\r\n      <inherit name=\"editor_object\" />\r\n      <contacts type=\"stringdictionary\">\r\n        <item>\r\n          <key>12345</key>\r\n          <value>Ralph</value>\r\n        </item>\r\n      </contacts>\r\n      <feature_usegive />\r\n      <use type=\"script\">\r\n        msg (\"You need to call a number. Try something like CALL 12345\")\r\n      </use>\r\n      <hangup type=\"script\">\r\n        if (GetBoolean (game.pov, \"onphone\")) {\r\n          msg (\"You end the call.\")\r\n          DisconnectCall\r\n        }\r\n        else {\r\n          msg (\"You are not talking to anyone on the phone.\")\r\n        }\r\n      </hangup>\r\n      <look type=\"script\"><![CDATA[\r\n        msg (\"An ordinary phone.  <br/><br/>To use it, call a number. Example: CALL 12345<br/><br/>To end a call, enter END CALL or HANG UP THE PHONE<br/>\")\r\n        if (ListCount(this.contacts)>0) {\r\n          msg (\"There is a list of contacts on it:<br/>\")\r\n          table = \"<table class='contacts-table'><tr><th>Contact</th><th>Number</th></tr>\"\r\n          foreach (contact, this.contacts) {\r\n            table = table + \"<tr><td>\"+this.contacts[contact]+\"</td><td>\"+contact+\"</td></tr>\"\r\n          }\r\n          table = table + \"</table>\"\r\n          msg (table)\r\n          JS.setCss (\".contacts-table *\", \"padding:4px\")\r\n        }\r\n      ]]></look>\r\n      <takemsg>It's fixed in place.</takemsg>\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Use</value>\r\n      </displayverbs>\r\n    </object>\r\n    <exit alias=\"north\" to=\"second room\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"Ralph\">\r\n    <inherit name=\"editor_object\" />\r\n    <inherit name=\"namedmale\" />\r\n    <ask type=\"scriptdictionary\">\r\n      <item key=\"game\">\r\n        msg (\"\\\"This is just an example game,\\\" says Ralph.\")\r\n      </item>\r\n    </ask>\r\n    <askdefault type=\"script\">\r\n      msg (\"Ralph {random:says nothing:remains silent:does not reply}.\")\r\n    </askdefault>\r\n    <telldefault type=\"script\">\r\n      msg (\"Ralph {random:says nothing:remains silent:does not reply}.\")\r\n    </telldefault>\r\n    <telltodefault type=\"script\">\r\n      msg (\"Ralph {random:says nothing:remains silent:does not reply}.\")\r\n    </telltodefault>\r\n    <speak type=\"script\"><![CDATA[\r\n      if (GetBoolean(Ralph,\"onphone\")) {\r\n        msg (\"\\\"You mean you called me just to talk?!?\\\"  Ralph sounds offended.  \\\"You're not even going to ask me about the game?!?\\\"<br/><br/>Click.  Ralph just hung up on you.\")\r\n        DisconnectCall\r\n      }\r\n      else {\r\n        msg (\"\\\"This game is boring,\\\" says Ralph.\")\r\n      }\r\n    ]]></speak>\r\n    <hellomsg>\"Hello, this is Ralph.\"</hellomsg>\r\n  </object>\r\n  <command name=\"call_cmd\">\r\n    <pattern>call #text#;dial #text#</pattern>\r\n    <script>\r\n      if (not ListContains(ScopeReachable(),phone)) {\r\n        msg (\"You need a phone to do that.\")\r\n      }\r\n      else {\r\n        if (not GetBoolean(game.pov, \"onphone\")) {\r\n          if (DictionaryContains(phone.contacts,Trim(text))) {\r\n            o = StringDictionaryItem(phone.contacts,Trim(text))\r\n            o = GetObject(o)\r\n            if (not ListContains(ScopeReachable(),o)) {\r\n              phone.aliasbak = GetDisplayAlias(phone)\r\n              phone.alias = GetDisplayAlias(phone) + \" (connected to \"+GetDisplayName(o)+\")\"\r\n              o.visiblebak = o.visible\r\n              o.visible = true\r\n              o.scenerybak = o.scenery\r\n              o.scenery = true\r\n              o.parent = o.parentbak\r\n              MoveObjectHere (o)\r\n              game.pov.onphone = true\r\n              o.onphone = true\r\n              phone.connectedto = o\r\n              if (HasAttribute(o,\"hellomsg\")) {\r\n                msg (o.hellomsg)\r\n              }\r\n              else {\r\n                msg (CapFirst(GetDisplayName(o))+\" answers the phone. \\\"Hello.\\\"\")\r\n              }\r\n              EnableTurnScript (phone_surveillance)\r\n            }\r\n            else {\r\n              msg (CapFirst(GetDisplayName(o))+\" is here with you.  No need to call \"+o.article+\".\")\r\n            }\r\n          }\r\n          else {\r\n            msg (\"Your call did not go through.  Please check the number and try your call again.\")\r\n          }\r\n        }\r\n        else {\r\n          msg (\"You are currently on a call with \" + GetDisplayName(phone.connectedto)+\".\")\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n  <command name=\"end_call_cmd\">\r\n    <pattern>end call;terminate call</pattern>\r\n    <script>\r\n      if (GetBoolean (game.pov, \"onphone\")) {\r\n        msg (\"You end the call.\")\r\n        DisconnectCall\r\n      }\r\n      else {\r\n        msg (\"You are not on the phone.\")\r\n      }\r\n    </script>\r\n  </command>\r\n  <verb>\r\n    <property>hangup</property>\r\n    <pattern>hang up</pattern>\r\n    <defaultexpression>\"You can't hang up \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <turnscript name=\"phone_surveillance\">\r\n    <enabled type=\"boolean\">false</enabled>\r\n    <script><![CDATA[\r\n      if (not ListContains(ScopeReachable(),phone)) {\r\n        if (game.pov.onphone) {\r\n          if (not GetBoolean(phone,\"onhold\")) {\r\n            msg (\"<br/>You have walked away from the phone, and \"+GetDisplayName(phone.connectedto)+\" probably hung up.<br/>\")\r\n            DisconnectCall\r\n          }\r\n        }\r\n      }\r\n    ]]></script>\r\n  </turnscript>\r\n  <object name=\"second room\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"south\" to=\"room\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n  <function name=\"DisconnectCall\">\r\n    game.pov.onphone = false\r\n\to = phone.connectedto\r\n    o.onphone = false\r\n    o.alias = o.aliasbak\r\n    o.scenery = o.scenerybak\r\n    o.visible = o.visiblebak\r\n    o.parent = o.parentbak\r\n    phone.alias = phone.aliasbak\r\n    phone.connectedto = null\r\n    DisableTurnScript (phone_surveillance)\r\n  </function>\r\n</asl>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Create a new game, open it in full code view, delete ALL the text, and paste this in.</p>\n<p>Then, flip back to GUI to check out one way I would do it.  (The phone is fixed in place in this example.  I didn't add any components; no buttons, screen, rotary dial, receiver, speaker, mic... Nothing.)</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Call People\"&gt;\n    &lt;gameid&gt;8a58a8e3-51ad-4b3f-8afb-55aa9c16f281&lt;/gameid&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;feature_asktell /&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"phone\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;contacts type=\"stringdictionary\"&gt;\n        &lt;item&gt;\n          &lt;key&gt;12345&lt;/key&gt;\n          &lt;value&gt;Ralph&lt;/value&gt;\n        &lt;/item&gt;\n      &lt;/contacts&gt;\n      &lt;feature_usegive /&gt;\n      &lt;use type=\"script\"&gt;\n        msg (\"You need to call a number. Try something like CALL 12345\")\n      &lt;/use&gt;\n      &lt;hangup type=\"script\"&gt;\n        if (GetBoolean (game.pov, \"onphone\")) {\n          msg (\"You end the call.\")\n          DisconnectCall\n        }\n        else {\n          msg (\"You are not talking to anyone on the phone.\")\n        }\n      &lt;/hangup&gt;\n      &lt;look type=\"script\"&gt;&lt;![CDATA[\n        msg (\"An ordinary phone.  &lt;br/&gt;&lt;br/&gt;To use it, call a number. Example: CALL 12345&lt;br/&gt;&lt;br/&gt;To end a call, enter END CALL or HANG UP THE PHONE&lt;br/&gt;\")\n        if (ListCount(this.contacts)&gt;0) {\n          msg (\"There is a list of contacts on it:&lt;br/&gt;\")\n          table = \"&lt;table class='contacts-table'&gt;&lt;tr&gt;&lt;th&gt;Contact&lt;/th&gt;&lt;th&gt;Number&lt;/th&gt;&lt;/tr&gt;\"\n          foreach (contact, this.contacts) {\n            table = table + \"&lt;tr&gt;&lt;td&gt;\"+this.contacts[contact]+\"&lt;/td&gt;&lt;td&gt;\"+contact+\"&lt;/td&gt;&lt;/tr&gt;\"\n          }\n          table = table + \"&lt;/table&gt;\"\n          msg (table)\n          JS.setCss (\".contacts-table *\", \"padding:4px\")\n        }\n      ]]&gt;&lt;/look&gt;\n      &lt;takemsg&gt;It's fixed in place.&lt;/takemsg&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;Use&lt;/value&gt;\n      &lt;/displayverbs&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"north\" to=\"second room\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"Ralph\"&gt;\n    &lt;inherit name=\"editor_object\" /&gt;\n    &lt;inherit name=\"namedmale\" /&gt;\n    &lt;ask type=\"scriptdictionary\"&gt;\n      &lt;item key=\"game\"&gt;\n        msg (\"\\\"This is just an example game,\\\" says Ralph.\")\n      &lt;/item&gt;\n    &lt;/ask&gt;\n    &lt;askdefault type=\"script\"&gt;\n      msg (\"Ralph {random:says nothing:remains silent:does not reply}.\")\n    &lt;/askdefault&gt;\n    &lt;telldefault type=\"script\"&gt;\n      msg (\"Ralph {random:says nothing:remains silent:does not reply}.\")\n    &lt;/telldefault&gt;\n    &lt;telltodefault type=\"script\"&gt;\n      msg (\"Ralph {random:says nothing:remains silent:does not reply}.\")\n    &lt;/telltodefault&gt;\n    &lt;speak type=\"script\"&gt;&lt;![CDATA[\n      if (GetBoolean(Ralph,\"onphone\")) {\n        msg (\"\\\"You mean you called me just to talk?!?\\\"  Ralph sounds offended.  \\\"You're not even going to ask me about the game?!?\\\"&lt;br/&gt;&lt;br/&gt;Click.  Ralph just hung up on you.\")\n        DisconnectCall\n      }\n      else {\n        msg (\"\\\"This game is boring,\\\" says Ralph.\")\n      }\n    ]]&gt;&lt;/speak&gt;\n    &lt;hellomsg&gt;\"Hello, this is Ralph.\"&lt;/hellomsg&gt;\n  &lt;/object&gt;\n  &lt;command name=\"call_cmd\"&gt;\n    &lt;pattern&gt;call #text#;dial #text#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not ListContains(ScopeReachable(),phone)) {\n        msg (\"You need a phone to do that.\")\n      }\n      else {\n        if (not GetBoolean(game.pov, \"onphone\")) {\n          if (DictionaryContains(phone.contacts,Trim(text))) {\n            o = StringDictionaryItem(phone.contacts,Trim(text))\n            o = GetObject(o)\n            if (not ListContains(ScopeReachable(),o)) {\n              phone.aliasbak = GetDisplayAlias(phone)\n              phone.alias = GetDisplayAlias(phone) + \" (connected to \"+GetDisplayName(o)+\")\"\n              o.visiblebak = o.visible\n              o.visible = true\n              o.scenerybak = o.scenery\n              o.scenery = true\n              o.parent = o.parentbak\n              MoveObjectHere (o)\n              game.pov.onphone = true\n              o.onphone = true\n              phone.connectedto = o\n              if (HasAttribute(o,\"hellomsg\")) {\n                msg (o.hellomsg)\n              }\n              else {\n                msg (CapFirst(GetDisplayName(o))+\" answers the phone. \\\"Hello.\\\"\")\n              }\n              EnableTurnScript (phone_surveillance)\n            }\n            else {\n              msg (CapFirst(GetDisplayName(o))+\" is here with you.  No need to call \"+o.article+\".\")\n            }\n          }\n          else {\n            msg (\"Your call did not go through.  Please check the number and try your call again.\")\n          }\n        }\n        else {\n          msg (\"You are currently on a call with \" + GetDisplayName(phone.connectedto)+\".\")\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"end_call_cmd\"&gt;\n    &lt;pattern&gt;end call;terminate call&lt;/pattern&gt;\n    &lt;script&gt;\n      if (GetBoolean (game.pov, \"onphone\")) {\n        msg (\"You end the call.\")\n        DisconnectCall\n      }\n      else {\n        msg (\"You are not on the phone.\")\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;verb&gt;\n    &lt;property&gt;hangup&lt;/property&gt;\n    &lt;pattern&gt;hang up&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't hang up \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;turnscript name=\"phone_surveillance\"&gt;\n    &lt;enabled type=\"boolean\"&gt;false&lt;/enabled&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not ListContains(ScopeReachable(),phone)) {\n        if (game.pov.onphone) {\n          if (not GetBoolean(phone,\"onhold\")) {\n            msg (\"&lt;br/&gt;You have walked away from the phone, and \"+GetDisplayName(phone.connectedto)+\" probably hung up.&lt;br/&gt;\")\n            DisconnectCall\n          }\n        }\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;object name=\"second room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"south\" to=\"room\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;function name=\"DisconnectCall\"&gt;\n    game.pov.onphone = false\n\to = phone.connectedto\n    o.onphone = false\n    o.alias = o.aliasbak\n    o.scenery = o.scenerybak\n    o.visible = o.visiblebak\n    o.parent = o.parentbak\n    phone.alias = phone.aliasbak\n    phone.connectedto = null\n    DisableTurnScript (phone_surveillance)\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2018-04-18T18:02:25.1922568Z",
      "LastEditDate": "2018-04-18T18:06:23.9504994Z",
      "link": null
    },
    {
      "PostId": "a1f84a21-7d45-4f85-a7f8-387dacc3dde2",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "NOTE:  I forgot about the bit with ConvLib.\r\n\r\nLet me go check out what those functions are...",
      "EditableFormat": "markdown",
      "HTML": "<p>NOTE:  I forgot about the bit with ConvLib.</p>\n<p>Let me go check out what those functions are...</p>\n\n",
      "PostDate": "2018-04-18T18:12:08.482701Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "409ec740-6cfd-4139-9a12-c675dbb6e88b",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have a switch with all available numbers. I want every number (well, some of them) to lead directly to a conversation.\r\nI wrote this without checking your code above so maybe that's how you did it.\r\n\r\nI'll copy/paste it straight away! =)",
      "EditableFormat": "markdown",
      "HTML": "<p>I have a switch with all available numbers. I want every number (well, some of them) to lead directly to a conversation.<br>\nI wrote this without checking your code above so maybe that's how you did it.</p>\n<p>I'll copy/paste it straight away! =)</p>\n\n",
      "PostDate": "2018-04-18T18:48:15.1607488Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c403f7b4-5cf1-4e7c-8f4c-d8d09d939ebd",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I just added a 'contacts' dictionary to the phone.  When you examine the phone, it prints the contacts as a table (if contacts exist.).",
      "EditableFormat": "markdown",
      "HTML": "<p>I just added a 'contacts' dictionary to the phone.  When you examine the phone, it prints the contacts as a table (if contacts exist.).</p>\n\n",
      "PostDate": "2018-04-18T20:24:17.9179192Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1bd848a1-ef2c-4a08-a1ab-9bf6fd59aca5",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This bit in my CALL command is where I make stuff happen as soon as you call someone:\r\n\r\n```\r\n              if (HasAttribute(o,\"hellomsg\")) {\r\n                msg (o.hellomsg)\r\n              }\r\n```\r\n\r\n---\r\n```hellomsg``` could be a script, too.\r\n\r\nThis change would allow you to use either a string or a script:\r\n\r\n```\r\n              if (HasAttribute(o,\"hellomsg\")) {\r\n                if (HasString(o,\"hellomsg\")) msg (o.hellomsg)\r\n                else if (HasScript(o,\"hellomsg\")) invoke(o.hellomsg)\r\n              }\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>This bit in my CALL command is where I make stuff happen as soon as you call someone:</p>\n<pre><code>              if (HasAttribute(o,\"hellomsg\")) {\n                msg (o.hellomsg)\n              }\n</code></pre>\n<hr>\n<p><code>hellomsg</code> could be a script, too.</p>\n<p>This change would allow you to use either a string or a script:</p>\n<pre><code>              if (HasAttribute(o,\"hellomsg\")) {\n                if (HasString(o,\"hellomsg\")) msg (o.hellomsg)\n                else if (HasScript(o,\"hellomsg\")) invoke(o.hellomsg)\n              }\n</code></pre>\n\n",
      "PostDate": "2018-04-18T20:27:17.7233107Z",
      "LastEditDate": "2018-04-18T20:27:51.4368551Z",
      "link": null
    },
    {
      "PostId": "87dab20b-9216-4c96-9541-149ab1657ff3",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Tested it. It is very nice and if I'd used it from the start... that would've been rad :)\r\nHowever; before starting to set up the actual phone I wrote lots and conversations. Lots and lots.\r\nIt would be swell if the possibility exist to hook up above coded phone to the convlib functions. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Tested it. It is very nice and if I'd used it from the start... that would've been rad :)<br>\nHowever; before starting to set up the actual phone I wrote lots and conversations. Lots and lots.<br>\nIt would be swell if the possibility exist to hook up above coded phone to the convlib functions.</p>\n\n",
      "PostDate": "2018-04-19T06:57:02.1901295Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ec69a619-9e12-4d15-8420-a4436dbeda09",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hmm...\r\nI've not played with ConvLib much, but it looks pretty simple.\r\n\r\nIf you have NPC objects with a string attribute `phonenumber`\r\n```\r\n<command name=\"call\">\r\n  <pattern>call #text#</pattern>\r\n  <script><![CDATA[\r\n    person = FilterByAttribute (AllObjects(), \"phonenumber\", text)\r\n    if (not player.parent = phone.parent) {\r\n      // Yeah, there's better ways to do this if you have more than one phone object\r\n      // but this is a simple example\r\n      msg (\"You'd need a phone to do that!\")\r\n    }\r\n    else if (ListCount(person) > 0) {\r\n      Converse (PickOneObject(person), \"On the phone to \"+text)\r\n    }\r\n    else {\r\n      msg (\"You dial \"+text+\", but nobody answers\")\r\n    }\r\n  ]]></script>\r\n</command>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hmm...<br>\nI've not played with ConvLib much, but it looks pretty simple.</p>\n<p>If you have NPC objects with a string attribute <code>phonenumber</code></p>\n<pre><code>&lt;command name=\"call\"&gt;\n  &lt;pattern&gt;call #text#&lt;/pattern&gt;\n  &lt;script&gt;&lt;![CDATA[\n    person = FilterByAttribute (AllObjects(), \"phonenumber\", text)\n    if (not player.parent = phone.parent) {\n      // Yeah, there's better ways to do this if you have more than one phone object\n      // but this is a simple example\n      msg (\"You'd need a phone to do that!\")\n    }\n    else if (ListCount(person) &gt; 0) {\n      Converse (PickOneObject(person), \"On the phone to \"+text)\n    }\n    else {\n      msg (\"You dial \"+text+\", but nobody answers\")\n    }\n  ]]&gt;&lt;/script&gt;\n&lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2018-04-19T08:20:59.2096821Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "786eca81-e521-48cc-94cb-68a398fa8a43",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That works quite well, mrangel!",
      "EditableFormat": "markdown",
      "HTML": "<p>That works quite well, mrangel!</p>\n\n",
      "PostDate": "2018-04-19T19:24:39.1299642Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "07e7a876-8e02-4ce7-a7fc-03fca6c42c6d",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks :)\r\nI was thinking about trying to preprocess numbers somehow; so it doesn't matter if the player types punctuation or spaces or whatever (just loop over the text parameter and remove all non-digit characters). Or allowing the player to have a phone book of numbers they already know.\r\n\r\nHmm... if game.phonebook is an objectlist, it might look something like this:\r\n```\r\n<command name=\"call\">\r\n  <pattern>^(?<text_verb>call|phone|ring|dial)\\s*(?<text>(?:\\W*\\d)*\\W*|(?<object>.+))$</pattern>\r\n  <scope>game.phonebook</scope>\r\n  <script><![CDATA[\r\n    if (player.parent = phone.parent) {\r\n      failmessage = \"You dial \"+text+\", but nobody answers\"\r\n      if (IsDefined(\"object\")) {\r\n        if (object = phone) {\r\n          // Need to account for player entering \"dial phone\" or similar, because the\r\n          // phone itself is presumably in scope\r\n          object = null\r\n          failmessage = \"You need to pick somebody to call. Try entering “\"+text_verb+\" Bob” or “\"+text_verb+\" 555-1234-999”\"\r\n        }\r\n        else if (not ListContains(game.phonebook, object)) {\r\n          // Thanks to alternate scope, player could have entered the name of someone in the room\r\n          failmessage = \"You don't have a phone number for \"+GetDisplayName(object)\r\n          object = null\r\n        }\r\n      }\r\n      else {\r\n        object = null\r\n        number = \"\"\r\n        for (i, 1, LengthOf(text)) {\r\n          if (IsInt(Mid(text, i, 1))) {\r\n            number = number + Mid(text, i, 1)\r\n          }\r\n        }\r\n        if (number = \"\") {\r\n          failmessage = \"You need to pick somebody to call. Try entering “\"+text_verb+\" Bob” or “\"+text_verb+\" 555-1234-999”\"\r\n        }\r\n        else if (LengthOf(number) = 1) {\r\n          failmessage = \"You pick up the phone and press the \"+number+\" button, but nothing happens\"\r\n        }\r\n        else if (LengthOf(number) < 6) {\r\n          failmessage = \"You dial \"+ToWords(LengthOf(number))+\" digits, but the phone is waiting for more\"\r\n        }\r\n        // not sure about other countries' phone systems\r\n        // but here, if you dial extra digits at the end of a number it will still connect\r\n        foreach (obj, AllObjects()) {\r\n          if (HasString(obj, \"phonenumber\")) {\r\n            if (StartsWith(obj.phonenumber, number)) {\r\n              object = obj\r\n            }\r\n          }\r\n        }\r\n      }\r\n      if (object = null) {\r\n        msg (failmessage+\".\")\r\n      else {\r\n        Converse (object, \"You call \"+text)\r\n      }\r\n    }\r\n    else {\r\n      msg (\"There isn't a phone here!\")\r\n    }\r\n  ]]></script>\r\n</command>\r\n```\r\n(off the top of my head, so probably an error or two)",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks :)<br>\nI was thinking about trying to preprocess numbers somehow; so it doesn't matter if the player types punctuation or spaces or whatever (just loop over the text parameter and remove all non-digit characters). Or allowing the player to have a phone book of numbers they already know.</p>\n<p>Hmm... if game.phonebook is an objectlist, it might look something like this:</p>\n<pre><code>&lt;command name=\"call\"&gt;\n  &lt;pattern&gt;^(?&lt;text_verb&gt;call|phone|ring|dial)\\s*(?&lt;text&gt;(?:\\W*\\d)*\\W*|(?&lt;object&gt;.+))$&lt;/pattern&gt;\n  &lt;scope&gt;game.phonebook&lt;/scope&gt;\n  &lt;script&gt;&lt;![CDATA[\n    if (player.parent = phone.parent) {\n      failmessage = \"You dial \"+text+\", but nobody answers\"\n      if (IsDefined(\"object\")) {\n        if (object = phone) {\n          // Need to account for player entering \"dial phone\" or similar, because the\n          // phone itself is presumably in scope\n          object = null\n          failmessage = \"You need to pick somebody to call. Try entering “\"+text_verb+\" Bob” or “\"+text_verb+\" 555-1234-999”\"\n        }\n        else if (not ListContains(game.phonebook, object)) {\n          // Thanks to alternate scope, player could have entered the name of someone in the room\n          failmessage = \"You don't have a phone number for \"+GetDisplayName(object)\n          object = null\n        }\n      }\n      else {\n        object = null\n        number = \"\"\n        for (i, 1, LengthOf(text)) {\n          if (IsInt(Mid(text, i, 1))) {\n            number = number + Mid(text, i, 1)\n          }\n        }\n        if (number = \"\") {\n          failmessage = \"You need to pick somebody to call. Try entering “\"+text_verb+\" Bob” or “\"+text_verb+\" 555-1234-999”\"\n        }\n        else if (LengthOf(number) = 1) {\n          failmessage = \"You pick up the phone and press the \"+number+\" button, but nothing happens\"\n        }\n        else if (LengthOf(number) &lt; 6) {\n          failmessage = \"You dial \"+ToWords(LengthOf(number))+\" digits, but the phone is waiting for more\"\n        }\n        // not sure about other countries' phone systems\n        // but here, if you dial extra digits at the end of a number it will still connect\n        foreach (obj, AllObjects()) {\n          if (HasString(obj, \"phonenumber\")) {\n            if (StartsWith(obj.phonenumber, number)) {\n              object = obj\n            }\n          }\n        }\n      }\n      if (object = null) {\n        msg (failmessage+\".\")\n      else {\n        Converse (object, \"You call \"+text)\n      }\n    }\n    else {\n      msg (\"There isn't a phone here!\")\n    }\n  ]]&gt;&lt;/script&gt;\n&lt;/command&gt;\n</code></pre>\n<p>(off the top of my head, so probably an error or two)</p>\n\n",
      "PostDate": "2018-04-20T09:38:07.4314313Z",
      "LastEditDate": "2018-04-20T09:51:54.3403826Z",
      "link": null
    },
    {
      "PostId": "9532213c-bbeb-401d-8784-659483bf5479",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That looks pretty slick, too.\r\n\r\nCurrently, the call command is the one from the example.\r\n\r\nDoing this makes that script work with ConvLib:\r\n\r\n```\r\ncase (6700, \"rick\", \"slick rick\", \"gucci crew ii\") {\r\n   Converse (Slick Rick, \"Your call is now connected.  You can talk to \")\r\n   // This is referencing the song Sally (That Girl) https://youtu.be/M8QcIoaisTg?t=120\r\n} \r\n```\r\n\r\n---\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>That looks pretty slick, too.</p>\n<p>Currently, the call command is the one from the example.</p>\n<p>Doing this makes that script work with ConvLib:</p>\n<pre><code>case (6700, \"rick\", \"slick rick\", \"gucci crew ii\") {\n   Converse (Slick Rick, \"Your call is now connected.  You can talk to \")\n   // This is referencing the song Sally (That Girl) https://youtu.be/M8QcIoaisTg?t=120\n} \n</code></pre>\n<hr>\n\n",
      "PostDate": "2018-04-20T16:48:21.1384072Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f325145d-6df3-46df-8b4f-d664b4a18e74",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks guys for all your input!\r\nWhen I updated the convlib to the lastest version (thanks K.V. for pointing that out) I only need to change that line of code ((see example above) thanks K.V. for pointing that out) and now it's working exactly like I wanted it too (thanks K.V. for that)!\r\n\r\nYou guys are swell!",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks guys for all your input!<br>\nWhen I updated the convlib to the lastest version (thanks K.V. for pointing that out) I only need to change that line of code ((see example above) thanks K.V. for pointing that out) and now it's working exactly like I wanted it too (thanks K.V. for that)!</p>\n<p>You guys are swell!</p>\n\n",
      "PostDate": "2018-04-22T19:18:44.7245229Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6ad10450-c65a-4755-9236-561369fa27f1",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Aw shucks... I didn't do nothin'....\r\n\r\nPixie and mrangel did all the real work.\r\n\r\nGlad to hear it works now, though!",
      "EditableFormat": "markdown",
      "HTML": "<p>Aw shucks... I didn't do nothin'....</p>\n<p>Pixie and mrangel did all the real work.</p>\n<p>Glad to hear it works now, though!</p>\n\n",
      "PostDate": "2018-04-22T21:55:19.5620456Z",
      "LastEditDate": "2018-04-22T22:00:34.8250488Z",
      "link": null
    },
    {
      "PostId": "0b75432d-1559-448c-823e-246198bf8ad7",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sure they did! But you were the one who explained stuff to this incompetent noncoder! \r\nThere is such a thing as too much modesty man, take some credit! =)",
      "EditableFormat": "markdown",
      "HTML": "<p>Sure they did! But you were the one who explained stuff to this incompetent noncoder!<br>\nThere is such a thing as too much modesty man, take some credit! =)</p>\n\n",
      "PostDate": "2018-04-23T08:06:25.9360441Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
