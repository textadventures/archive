{
  "Topic": {
    "TopicId": "5753",
    "ForumId": "10",
    "Title": "commands on what?!?",
    "LastUpdated": "2015-12-22T00:51:42+00:00",
    "ReplyCount": 6
  },
  "Posts": [
    {
      "PostId": "39823",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "So, I totally understand adding commands to a room.  Easy.\n\nBut, how do commands on objects work?\n\nFor example, here is code I am trying to use in my tutorial game:\n\n[code:2hcw6nov]      &lt;command name=&quot;fill pot cmd&quot;&gt;\n        &lt;pattern&gt;fill pot with water; fill pot from waterfall; put pot in waterfall; put pot under waterfall; use pot on waterfall; use pot under waterfall; hold pot under waterfall; fill pot with waterfall; fill pot&lt;/pattern&gt;\n        &lt;script&gt;\n          if (GetBoolean(jug, &quot;filled&quot;)) {\n            msg (&quot;You can only have one container filled at a time&#46;&quot;)\n          }\n          else if (GetBoolean(bucket, &quot;filled&quot;)) {\n            msg (&quot;You can only have one container filled at a time&#46;&quot;)\n          }\n          else if (GetBoolean(pot, &quot;filled&quot;)) {\n            msg (&quot;You can only have one container filled at a time&#46;&quot;)\n          }\n          else {\n            msg (&quot;You hold the pot under the flowing waterfall until it is filled&#46;&quot;)\n            MoveObject (water1, pot)\n            SetObjectFlagOn (pot, &quot;filled&quot;)\n          }\n        &lt;/script&gt;\n      &lt;/command&gt;[/code:2hcw6nov]\n\nThis command script is on the object pot.  But it does not return my responses, only &quot;I don't understand your command.&quot;  I know I can put this command on the 'room' and it will work, but let's say there is another waterfall in a different room.  I'd like the command to follow around the pot and not be restricted to a room.  I also know I can use all sorts of &quot;If&quot; player is carrying object bucket, &quot;then&quot; &quot;if&quot; object waterfall is visible, &quot;then&quot; follow said script, but that just seems like unnecessary coding.  I also know that I can copy-paste each command into any room with a 'waterfall' in it, but what about commands on objects that can be moved around room to room?  Is the easiest way to make a complicated if/then/if/then script and make it global?  Ugh...\n\n[code:2hcw6nov]&lt;command name=&quot;water to jug cmd&quot;&gt;\n      &lt;pattern&gt;pour water into jug; transfer water to jug; put water in jug; transfer water to jug; pour water in jug&lt;/pattern&gt;\n      &lt;script&gt;\n        if (GetBoolean(pot, &quot;filled&quot;)) {\n          msg (&quot;You pour the water from the pot into the jug&#46;&quot;)\n          SetObjectFlagOn (jug, &quot;filled&quot;)\n          SetObjectFlagOff (pot, &quot;filled&quot;)\n        }\n        else if (GetBoolean(bucket, &quot;filled&quot;)) {\n          msg (&quot;You pour the water from the bucket into the jug&#46;&quot;)\n          SetObjectFlagOn (jug, &quot;filled&quot;)\n          SetObjectFlagOff (bucket, &quot;filled&quot;)\n        }\n        else if (GetBoolean(jug, &quot;filled&quot;)) {\n          msg (&quot;The jug already contains the water&#46;&quot;)\n        }\n        else {\n          msg (&quot;There is no water in a container to be poured into the jug&#46;  You need to fill one from the waterfall first&#46;&quot;)\n        }\n      &lt;/script&gt;\n    &lt;/command&gt;[/code:2hcw6nov]\n\nSo, where should I put the command in a case like this?  FYI, I have a 15-20 commands I would like to add to X2 that are similar.",
      "EditableFormat": "bbcode",
      "HTML": "So, I totally understand adding commands to a room.  Easy.<br/><br/>But, how do commands on objects work?<br/><br/>For example, here is code I am trying to use in my tutorial game:<br/><br/><pre><code>      &lt;command name=&quot;fill pot cmd&quot;&gt;<br/>        &lt;pattern&gt;fill pot with water; fill pot from waterfall; put pot in waterfall; put pot under waterfall; use pot on waterfall; use pot under waterfall; hold pot under waterfall; fill pot with waterfall; fill pot&lt;/pattern&gt;<br/>        &lt;script&gt;<br/>          if (GetBoolean(jug, &quot;filled&quot;)) {<br/>            msg (&quot;You can only have one container filled at a time&#46;&quot;)<br/>          }<br/>          else if (GetBoolean(bucket, &quot;filled&quot;)) {<br/>            msg (&quot;You can only have one container filled at a time&#46;&quot;)<br/>          }<br/>          else if (GetBoolean(pot, &quot;filled&quot;)) {<br/>            msg (&quot;You can only have one container filled at a time&#46;&quot;)<br/>          }<br/>          else {<br/>            msg (&quot;You hold the pot under the flowing waterfall until it is filled&#46;&quot;)<br/>            MoveObject (water1, pot)<br/>            SetObjectFlagOn (pot, &quot;filled&quot;)<br/>          }<br/>        &lt;/script&gt;<br/>      &lt;/command&gt;</code></pre><br/><br/>This command script is on the object pot.  But it does not return my responses, only &quot;I don't understand your command.&quot;  I know I can put this command on the 'room' and it will work, but let's say there is another waterfall in a different room.  I'd like the command to follow around the pot and not be restricted to a room.  I also know I can use all sorts of &quot;If&quot; player is carrying object bucket, &quot;then&quot; &quot;if&quot; object waterfall is visible, &quot;then&quot; follow said script, but that just seems like unnecessary coding.  I also know that I can copy-paste each command into any room with a 'waterfall' in it, but what about commands on objects that can be moved around room to room?  Is the easiest way to make a complicated if/then/if/then script and make it global?  Ugh...<br/><br/><pre><code>&lt;command name=&quot;water to jug cmd&quot;&gt;<br/>      &lt;pattern&gt;pour water into jug; transfer water to jug; put water in jug; transfer water to jug; pour water in jug&lt;/pattern&gt;<br/>      &lt;script&gt;<br/>        if (GetBoolean(pot, &quot;filled&quot;)) {<br/>          msg (&quot;You pour the water from the pot into the jug&#46;&quot;)<br/>          SetObjectFlagOn (jug, &quot;filled&quot;)<br/>          SetObjectFlagOff (pot, &quot;filled&quot;)<br/>        }<br/>        else if (GetBoolean(bucket, &quot;filled&quot;)) {<br/>          msg (&quot;You pour the water from the bucket into the jug&#46;&quot;)<br/>          SetObjectFlagOn (jug, &quot;filled&quot;)<br/>          SetObjectFlagOff (bucket, &quot;filled&quot;)<br/>        }<br/>        else if (GetBoolean(jug, &quot;filled&quot;)) {<br/>          msg (&quot;The jug already contains the water&#46;&quot;)<br/>        }<br/>        else {<br/>          msg (&quot;There is no water in a container to be poured into the jug&#46;  You need to fill one from the waterfall first&#46;&quot;)<br/>        }<br/>      &lt;/script&gt;<br/>    &lt;/command&gt;</code></pre><br/><br/>So, where should I put the command in a case like this?  FYI, I have a 15-20 commands I would like to add to X2 that are similar.",
      "PostDate": "2015-12-21T03:51:17+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "39824",
      "UserId": 0,
      "Username": "george",
      "UserAvatar": null,
      "UserGravatar": "dc6fe8e6172303d85249a13c9a49c1ff",
      "EditableText": "Maybe you want a verb instead?\n\n<!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?p=12268#p12268\">viewtopic.php?p=12268#p12268</a><!-- l -->",
      "EditableFormat": "bbcode",
      "HTML": "Maybe you want a verb instead?<br/><br/><!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?p=12268#p12268\">viewtopic.php?p=12268#p12268</a><!-- l -->",
      "PostDate": "2015-12-21T06:29:20+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "39825",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "But, can you link multiple objects with one verb on one object?  For example, 'watch ship with spyglass'.  Or, in my example above 'pour jug into bucket'.  Or, from X2, 'put poison on wrench' vs. 'put bottle on wrench' vs. 'put bottle in wrench' vs 'put poison in wrench' vs. 'put rat poison on wrench'.  Where would I put a verb in those conditions and how would I word it?  That seems like a job for a command, right?",
      "EditableFormat": "bbcode",
      "HTML": "But, can you link multiple objects with one verb on one object?  For example, 'watch ship with spyglass'.  Or, in my example above 'pour jug into bucket'.  Or, from X2, 'put poison on wrench' vs. 'put bottle on wrench' vs. 'put bottle in wrench' vs 'put poison in wrench' vs. 'put rat poison on wrench'.  Where would I put a verb in those conditions and how would I word it?  That seems like a job for a command, right?",
      "PostDate": "2015-12-21T06:39:36+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "39828",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "[quote=&quot;XanMag&quot;:2162nc4v]...\nThis command script is on the object pot.  But it does not return my responses, only &quot;I don't understand your command.&quot;[/quote:2162nc4v]\nThe &quot;I don't understand your command.&quot; response indicates it has not matched what the player typed with your command. I have pasted your pattern into a test game on my PC, and it gets recognised, so this is... odd. The only thing I can think of is that you have another command with the same name somewhere else in the game, and the other command is over-writing this one.\n[quote:2162nc4v]I know I can put this command on the 'room' and it will work, but let's say there is another waterfall in a different room.  I'd like the command to follow around the pot and not be restricted to a room.  I also know I can use all sorts of &quot;If&quot; player is carrying object bucket, &quot;then&quot; &quot;if&quot; object waterfall is visible, &quot;then&quot; follow said script, but that just seems like unnecessary coding.  I also know that I can copy-paste each command into any room with a 'waterfall' in it, but what about commands on objects that can be moved around room to room?  Is the easiest way to make a complicated if/then/if/then script and make it global?  Ugh...[/quote:2162nc4v]\nThe way I would do it is this:\n\nAny room with a waterfall (or similar), add a Boolean flag called &quot;watersource&quot;, and set it to true.\n\nAny item that can be filled (the pot, jug, etc.), add a boolean flag called &quot;filled&quot;, and set it to false.\n\nFor your command, use #object# to match against any object present.\n[code:2162nc4v]      &lt;command name=&quot;fill pot cmd&quot;&gt;\n        &lt;pattern&gt;fill #object# with water; fill #object# from waterfall; put #object# in waterfall; put #object# under waterfall; use #object# on waterfall; use #object# under waterfall; hold #object# under waterfall; fill #object# with waterfall; fill #object#&lt;/pattern&gt;\n        &lt;script&gt;\n          // first check if this object can be filled\n          if (not HasBoolean(objected, &quot;filled&quot;)) {\n            msg (&quot;That is not something you can fill with water&#46;&quot;)\n          }\n          // now check if it is already full\n          else if (GetBoolean(jug, &quot;filled&quot;)) {\n            msg (&quot;It is already full of water&#46;&quot;)\n          }\n          // is there water to fuill it from?\n          else if (GetBoolean(player&#46;parent, &quot;filled&quot;)) {\n            msg (&quot;There is no waterfall here&#46;&quot;)\n          }\n          // all checked okay, so do it\n          // use GetDisplayName to handle objects with and without alias\n          else {\n            msg (&quot;You hold the &quot; + GetDisplayName(object) + &quot; under the flowing waterfall until it is filled&#46;&quot;)\n            MoveObject (water1, object)\n            SetObjectFlagOn (object, &quot;filled&quot;)\n          }\n        &lt;/script&gt;\n      &lt;/command&gt;[/code:2162nc4v]",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>XanMag wrote:</cite>...<br/>This command script is on the object pot.  But it does not return my responses, only &quot;I don't understand your command.&quot;</blockquote><br/>The &quot;I don't understand your command.&quot; response indicates it has not matched what the player typed with your command. I have pasted your pattern into a test game on my PC, and it gets recognised, so this is... odd. The only thing I can think of is that you have another command with the same name somewhere else in the game, and the other command is over-writing this one.<br/><blockquote><p>I know I can put this command on the 'room' and it will work, but let's say there is another waterfall in a different room.  I'd like the command to follow around the pot and not be restricted to a room.  I also know I can use all sorts of &quot;If&quot; player is carrying object bucket, &quot;then&quot; &quot;if&quot; object waterfall is visible, &quot;then&quot; follow said script, but that just seems like unnecessary coding.  I also know that I can copy-paste each command into any room with a 'waterfall' in it, but what about commands on objects that can be moved around room to room?  Is the easiest way to make a complicated if/then/if/then script and make it global?  Ugh...</p></blockquote><br/>The way I would do it is this:<br/><br/>Any room with a waterfall (or similar), add a Boolean flag called &quot;watersource&quot;, and set it to true.<br/><br/>Any item that can be filled (the pot, jug, etc.), add a boolean flag called &quot;filled&quot;, and set it to false.<br/><br/>For your command, use #object# to match against any object present.<br/><pre><code>      &lt;command name=&quot;fill pot cmd&quot;&gt;<br/>        &lt;pattern&gt;fill #object# with water; fill #object# from waterfall; put #object# in waterfall; put #object# under waterfall; use #object# on waterfall; use #object# under waterfall; hold #object# under waterfall; fill #object# with waterfall; fill #object#&lt;/pattern&gt;<br/>        &lt;script&gt;<br/>          // first check if this object can be filled<br/>          if (not HasBoolean(objected, &quot;filled&quot;)) {<br/>            msg (&quot;That is not something you can fill with water&#46;&quot;)<br/>          }<br/>          // now check if it is already full<br/>          else if (GetBoolean(jug, &quot;filled&quot;)) {<br/>            msg (&quot;It is already full of water&#46;&quot;)<br/>          }<br/>          // is there water to fuill it from?<br/>          else if (GetBoolean(player&#46;parent, &quot;filled&quot;)) {<br/>            msg (&quot;There is no waterfall here&#46;&quot;)<br/>          }<br/>          // all checked okay, so do it<br/>          // use GetDisplayName to handle objects with and without alias<br/>          else {<br/>            msg (&quot;You hold the &quot; + GetDisplayName(object) + &quot; under the flowing waterfall until it is filled&#46;&quot;)<br/>            MoveObject (water1, object)<br/>            SetObjectFlagOn (object, &quot;filled&quot;)<br/>          }<br/>        &lt;/script&gt;<br/>      &lt;/command&gt;</code></pre>",
      "PostDate": "2015-12-21T08:47:46+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "39829",
      "UserId": 0,
      "Username": "Marzipan",
      "UserAvatar": null,
      "UserGravatar": "96db8d4d178365a7065b1872e874bc83",
      "EditableText": "Might not be exactly what you're looking for, but you can put a 'fill' verb on a bucket, invisible 'watersource' objects in certain rooms, and just put if-thens on the bucket checking if any of the water sources are visible. \n\nI'm sure there are more elegant solutions, but this lets you avoid going around putting scripts on every water source or worrying about whether the player is even holding the bucket.\n\n\ne: I'll add though, that instead of trying to match every possible command the player might try, you might consider just having a line in the bucket's description, 'You could [b:3bhu4nme]fill[/b:3bhu4nme] this from a water source.' As a player,  sometimes it's appreciated having the guesswork on a verb removed in a nice straightforward way. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "Might not be exactly what you're looking for, but you can put a 'fill' verb on a bucket, invisible 'watersource' objects in certain rooms, and just put if-thens on the bucket checking if any of the water sources are visible. <br/><br/>I'm sure there are more elegant solutions, but this lets you avoid going around putting scripts on every water source or worrying about whether the player is even holding the bucket.<br/><br/><br/>e: I'll add though, that instead of trying to match every possible command the player might try, you might consider just having a line in the bucket's description, 'You could <span style=\"font-weight:bold;\">fill</span> this from a water source.' As a player,  sometimes it's appreciated having the guesswork on a verb removed in a nice straightforward way. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2015-12-21T09:11:17+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "39862",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "Okay... So what about two objects I can carry around and use anywhere in my game?  Can commands be placed on rooms or the game only?  I am leaning toward using commands for manipulating objects with other objects because I think they're way more versatile but constantly writing scripts checking if the player has this and has that object is tedious.  The more I think about it, I think the only option is to use commands and then check and check to see if the player is carrying those objects.  Unless I'm missing something about command usage.\n\nCan commands be placed on objects?\nIs there a simpler way?",
      "EditableFormat": "bbcode",
      "HTML": "Okay... So what about two objects I can carry around and use anywhere in my game?  Can commands be placed on rooms or the game only?  I am leaning toward using commands for manipulating objects with other objects because I think they're way more versatile but constantly writing scripts checking if the player has this and has that object is tedious.  The more I think about it, I think the only option is to use commands and then check and check to see if the player is carrying those objects.  Unless I'm missing something about command usage.<br/><br/>Can commands be placed on objects?<br/>Is there a simpler way?",
      "PostDate": "2015-12-21T21:22:41+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "39870",
      "UserId": 0,
      "Username": "jdpjdpjdp",
      "UserAvatar": null,
      "UserGravatar": "540c24bb58e5434b39c7bd72916f5510",
      "EditableText": "Verbs have the &quot;require another object&quot; option, which you might find useful for some of the described scenarios. Another option is to task the commands to &quot;use&quot;. You'd set up a regular &quot;use x on y&quot; relationship, say &quot;use bucket on waterfall&quot;. Then you create a regular, game-wide command where &quot;fill bucket from waterfall&quot; or &quot;put bucket under waterfall&quot; or &quot;whatever I want to type here&quot; calls the &quot;HandleUseOn&quot; function with parameters &quot;bucket&quot; and &quot;waterfall&quot;. It's a nice little shortcut cheat I use sometimes.",
      "EditableFormat": "bbcode",
      "HTML": "Verbs have the &quot;require another object&quot; option, which you might find useful for some of the described scenarios. Another option is to task the commands to &quot;use&quot;. You'd set up a regular &quot;use x on y&quot; relationship, say &quot;use bucket on waterfall&quot;. Then you create a regular, game-wide command where &quot;fill bucket from waterfall&quot; or &quot;put bucket under waterfall&quot; or &quot;whatever I want to type here&quot; calls the &quot;HandleUseOn&quot; function with parameters &quot;bucket&quot; and &quot;waterfall&quot;. It's a nice little shortcut cheat I use sometimes.",
      "PostDate": "2015-12-22T00:51:42+00:00",
      "LastEditDate": null
    }
  ]
}
