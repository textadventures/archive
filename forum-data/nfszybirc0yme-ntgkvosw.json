{
  "Topic": {
    "TopicId": "nfszybirc0yme-ntgkvosw",
    "ForumId": "10",
    "Title": "Integral Objects and Body Parts",
    "LastUpdated": "2021-05-30T20:14:58.6093965Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "5a036db5-15e4-4f65-b156-ef6c6f2821cd",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay. . .\r\n\r\nThis all assumes the object is part of its parent ***and*** the parent is either transparent or a surface or an open container.\r\n\r\n---\r\nThe ```integral``` type:\r\n- has ```not_all``` set to ```true```\r\n- has this ```take``` script: ```msg (\"You can't take \" + this.article + \" off of \" + GetDefiniteName(this.parent) + \".\")```\r\n\r\n**NOTE:** I decided to leave up to the author whether or not it is scenery.\r\n\r\n---\r\nThe ```body_part``` type:\r\n- inherits the ```integral``` type\r\n- has ```scenery``` set to ```true```\r\n- has this ```drop``` script: ```msg (\"You can't do that with body parts.\")```\r\n\r\n---\r\nI altered ```DoTake```, changing this:\r\n\r\n```\r\n    if (object.parent = game.pov) {\r\n      msg (prefix + DynamicTemplate(\"AlreadyTaken\", object))\r\n    }\r\n```\r\n\r\n...to this:\r\n\r\n```\r\n    if (object.parent = game.pov) {\r\n      if (not GetBoolean(object, \"body_part_type\")) {\r\n        msg (prefix + DynamicTemplate(\"AlreadyTaken\", object))\r\n      }\r\n      else {\r\n        OutputTextNoBr (prefix)\r\n        do (object, \"take\")\r\n      }\r\n    }\r\n```\r\n\r\n---\r\nI feel liked I've overlooked something.\r\n\r\nWhat am I overlooking?\r\n\r\n(Note that the ```put``` command will defer to an object's ```drop``` attribute script, if it exists.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay. . .</p>\n<p>This all assumes the object is part of its parent <strong><em>and</em></strong> the parent is either transparent or a surface or an open container.</p>\n<hr>\n<p>The <code>integral</code> type:</p>\n<ul>\n<li>has <code>not_all</code> set to <code>true</code></li>\n<li>has this <code>take</code> script: <code>msg (\"You can't take \" + this.article + \" off of \" + GetDefiniteName(this.parent) + \".\")</code></li>\n</ul>\n<p><strong>NOTE:</strong> I decided to leave up to the author whether or not it is scenery.</p>\n<hr>\n<p>The <code>body_part</code> type:</p>\n<ul>\n<li>inherits the <code>integral</code> type</li>\n<li>has <code>scenery</code> set to <code>true</code></li>\n<li>has this <code>drop</code> script: <code>msg (\"You can't do that with body parts.\")</code></li>\n</ul>\n<hr>\n<p>I altered <code>DoTake</code>, changing this:</p>\n<pre><code>    if (object.parent = game.pov) {\n      msg (prefix + DynamicTemplate(\"AlreadyTaken\", object))\n    }\n</code></pre>\n<p>...to this:</p>\n<pre><code>    if (object.parent = game.pov) {\n      if (not GetBoolean(object, \"body_part_type\")) {\n        msg (prefix + DynamicTemplate(\"AlreadyTaken\", object))\n      }\n      else {\n        OutputTextNoBr (prefix)\n        do (object, \"take\")\n      }\n    }\n</code></pre>\n<hr>\n<p>I feel liked I've overlooked something.</p>\n<p>What am I overlooking?</p>\n<p>(Note that the <code>put</code> command will defer to an object's <code>drop</code> attribute script, if it exists.)</p>\n\n",
      "PostDate": "2021-05-30T20:14:58.6093965Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b52ecae3-90d8-4cdd-95e8-e77a89b450fa",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Example game:\r\n\r\n<details>\r\n\r\n```\r\n<!--Saved by Quest 5.8.7753.35184-->\r\n<asl version=\"580\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Integral Objects and Body Parts\">\r\n    <gameid>65c53d04-7133-4f0b-be6a-7c5ebdaf5657</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2021</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <isroom />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <object name=\"hands\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"body_part\" />\r\n      </object>\r\n    </object>\r\n    <object name=\"device\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"surface\" />\r\n      <feature_container />\r\n      <listchildren />\r\n      <addscript type=\"script\">\r\n        msg (\"You can't do that.\")\r\n      </addscript>\r\n      <object name=\"green button\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"integral\" />\r\n        <push>Nothing obvious happens.</push>\r\n      </object>\r\n    </object>\r\n    <object name=\"Mary\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"namedfemale\" />\r\n      <inherit name=\"surface\" />\r\n      <look>Mary has a big pimple.</look>\r\n      <feature_container />\r\n      <contentsprefix>who has</contentsprefix>\r\n      <listchildren />\r\n      <listchildrenprefix>She has</listchildrenprefix>\r\n      <addscript type=\"script\">\r\n        msg (\"Mary wouldn't like that.\")\r\n      </addscript>\r\n      <object name=\"big pimple\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"body_part\" />\r\n        <look>It is HUGE!!!</look>\r\n      </object>\r\n      <object name=\"earrings\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"plural\" />\r\n        <inherit name=\"integral\" />\r\n        <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n      </object>\r\n    </object>\r\n    <object name=\"basket\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"container_open\" />\r\n      <feature_container />\r\n      <open type=\"boolean\">false</open>\r\n      <close type=\"boolean\">false</close>\r\n      <listchildren />\r\n      <take />\r\n    </object>\r\n    <object name=\"eggs\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"plural\" />\r\n      <take />\r\n      <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n    </object>\r\n  </object>\r\n  <type name=\"integral\">\r\n    <integral_type />\r\n    <not_all />\r\n    <take type=\"script\">\r\n      msg (\"You can't take \" + this.article + \" off of \" + GetDefiniteName(this.parent) + \".\")\r\n    </take>\r\n  </type>\r\n  <type name=\"body_part\">\r\n    <inherit name=\"integral\" />\r\n    <body_part_type />\r\n    <scenery />\r\n    <drop type=\"script\">\r\n      msg (\"You can't do that with body parts.\")\r\n    </drop>\r\n  </type>\r\n  <function name=\"DoTake\" parameters=\"object, ismultiple\"><![CDATA[\r\n    prefix = \"\"\r\n    if (ismultiple) {\r\n      prefix = GetDisplayAlias(object) + \": \"\r\n    }\r\n    if (object.parent = game.pov) {\r\n      if (not GetBoolean(object, \"body_part_type\")) {\r\n        msg (prefix + DynamicTemplate(\"AlreadyTaken\", object))\r\n      }\r\n      else {\r\n        OutputTextNoBr (prefix)\r\n        do (object, \"take\")\r\n      }\r\n    }\r\n    else if (not ListContains(ScopeReachable(), object)) {\r\n      msg (BlockingMessage(object, prefix))\r\n    }\r\n    else if (not TestTakeGlobal(object, prefix)) {\r\n      // Do nothing, already handled\r\n    }\r\n    else if (not CheckLimits(object, prefix)) {\r\n      // Do nothing, already handled\r\n    }\r\n    else {\r\n      found = true\r\n      takemsg = object.takemsg\r\n      switch (TypeOf(object, \"take\")) {\r\n        case (\"script\") {\r\n          if (ismultiple) {\r\n            OutputTextNoBr (prefix)\r\n          }\r\n          do (object, \"take\")\r\n          takemsg = \"\"\r\n        }\r\n        case (\"boolean\") {\r\n          if (object.take = true) {\r\n            object.parent = game.pov\r\n            if (takemsg = null) {\r\n              takemsg = DynamicTemplate(\"TakeSuccessful\", object)\r\n            }\r\n          }\r\n          else {\r\n            found = false\r\n          }\r\n        }\r\n        case (\"string\") {\r\n          object.parent = game.pov\r\n          takemsg = object.take\r\n        }\r\n        default {\r\n          found = false\r\n        }\r\n      }\r\n      if (not found and takemsg = null) {\r\n        takemsg = DynamicTemplate(\"TakeUnsuccessful\", object)\r\n      }\r\n      if (LengthOf(takemsg) > 0) {\r\n        msg (prefix + takemsg)\r\n      }\r\n      if (HasScript(object, \"ontake\")) {\r\n        do (object, \"ontake\")\r\n      }\r\n      if (found and GetBoolean (object, \"scenery\") and object.parent = game.pov) {\r\n        object.scenery = false\r\n      }\r\n    }\r\n  ]]></function>\r\n</asl>\r\n```\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>Example game:</p>\n<details>\n<pre><code>&lt;!--Saved by Quest 5.8.7753.35184--&gt;\n&lt;asl version=\"580\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Integral Objects and Body Parts\"&gt;\n    &lt;gameid&gt;65c53d04-7133-4f0b-be6a-7c5ebdaf5657&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2021&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;isroom /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;object name=\"hands\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"body_part\" /&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"device\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"surface\" /&gt;\n      &lt;feature_container /&gt;\n      &lt;listchildren /&gt;\n      &lt;addscript type=\"script\"&gt;\n        msg (\"You can't do that.\")\n      &lt;/addscript&gt;\n      &lt;object name=\"green button\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"integral\" /&gt;\n        &lt;push&gt;Nothing obvious happens.&lt;/push&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"Mary\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"namedfemale\" /&gt;\n      &lt;inherit name=\"surface\" /&gt;\n      &lt;look&gt;Mary has a big pimple.&lt;/look&gt;\n      &lt;feature_container /&gt;\n      &lt;contentsprefix&gt;who has&lt;/contentsprefix&gt;\n      &lt;listchildren /&gt;\n      &lt;listchildrenprefix&gt;She has&lt;/listchildrenprefix&gt;\n      &lt;addscript type=\"script\"&gt;\n        msg (\"Mary wouldn't like that.\")\n      &lt;/addscript&gt;\n      &lt;object name=\"big pimple\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"body_part\" /&gt;\n        &lt;look&gt;It is HUGE!!!&lt;/look&gt;\n      &lt;/object&gt;\n      &lt;object name=\"earrings\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"plural\" /&gt;\n        &lt;inherit name=\"integral\" /&gt;\n        &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"basket\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"container_open\" /&gt;\n      &lt;feature_container /&gt;\n      &lt;open type=\"boolean\"&gt;false&lt;/open&gt;\n      &lt;close type=\"boolean\"&gt;false&lt;/close&gt;\n      &lt;listchildren /&gt;\n      &lt;take /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"eggs\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"plural\" /&gt;\n      &lt;take /&gt;\n      &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;type name=\"integral\"&gt;\n    &lt;integral_type /&gt;\n    &lt;not_all /&gt;\n    &lt;take type=\"script\"&gt;\n      msg (\"You can't take \" + this.article + \" off of \" + GetDefiniteName(this.parent) + \".\")\n    &lt;/take&gt;\n  &lt;/type&gt;\n  &lt;type name=\"body_part\"&gt;\n    &lt;inherit name=\"integral\" /&gt;\n    &lt;body_part_type /&gt;\n    &lt;scenery /&gt;\n    &lt;drop type=\"script\"&gt;\n      msg (\"You can't do that with body parts.\")\n    &lt;/drop&gt;\n  &lt;/type&gt;\n  &lt;function name=\"DoTake\" parameters=\"object, ismultiple\"&gt;&lt;![CDATA[\n    prefix = \"\"\n    if (ismultiple) {\n      prefix = GetDisplayAlias(object) + \": \"\n    }\n    if (object.parent = game.pov) {\n      if (not GetBoolean(object, \"body_part_type\")) {\n        msg (prefix + DynamicTemplate(\"AlreadyTaken\", object))\n      }\n      else {\n        OutputTextNoBr (prefix)\n        do (object, \"take\")\n      }\n    }\n    else if (not ListContains(ScopeReachable(), object)) {\n      msg (BlockingMessage(object, prefix))\n    }\n    else if (not TestTakeGlobal(object, prefix)) {\n      // Do nothing, already handled\n    }\n    else if (not CheckLimits(object, prefix)) {\n      // Do nothing, already handled\n    }\n    else {\n      found = true\n      takemsg = object.takemsg\n      switch (TypeOf(object, \"take\")) {\n        case (\"script\") {\n          if (ismultiple) {\n            OutputTextNoBr (prefix)\n          }\n          do (object, \"take\")\n          takemsg = \"\"\n        }\n        case (\"boolean\") {\n          if (object.take = true) {\n            object.parent = game.pov\n            if (takemsg = null) {\n              takemsg = DynamicTemplate(\"TakeSuccessful\", object)\n            }\n          }\n          else {\n            found = false\n          }\n        }\n        case (\"string\") {\n          object.parent = game.pov\n          takemsg = object.take\n        }\n        default {\n          found = false\n        }\n      }\n      if (not found and takemsg = null) {\n        takemsg = DynamicTemplate(\"TakeUnsuccessful\", object)\n      }\n      if (LengthOf(takemsg) &gt; 0) {\n        msg (prefix + takemsg)\n      }\n      if (HasScript(object, \"ontake\")) {\n        do (object, \"ontake\")\n      }\n      if (found and GetBoolean (object, \"scenery\") and object.parent = game.pov) {\n        object.scenery = false\n      }\n    }\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2021-05-30T20:15:52.2616867Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
