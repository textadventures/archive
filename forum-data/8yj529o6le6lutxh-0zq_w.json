{
  "Topic": {
    "TopicId": "8yj529o6le6lutxh-0zq_w",
    "ForumId": "24",
    "Title": "A combat system for Squiffy",
    "LastUpdated": "2019-01-14T22:34:53.2164628Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "9886ec82-459c-421d-a129-54a0045d6d72",
      "UserId": 394011,
      "Username": "Valgardur",
      "AvatarUrl": "https://i.imgur.com/jSYCAV7b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello!\r\n\r\nI've been putting together this combat simulator for my Squiffy game. Its graphically basic, but I've built it so that you can modify each specific combat with enemy names, skills etc.\r\n\r\nWith this system you can fight 1-3 enemies at the same time. It takes into consideration:\r\n\r\n*Choise of weapon (will impact dexterity and damage)\r\n*Armor (will impact armorsoak and dexterity)\r\n*Dexterity skill (for chance to dodge attacks)\r\n*Weapon skill (for chance to hit enemy)\r\n\r\nYou're able to modify each enemy alone so that you can, for instance, have a boss fighting together with henchmen. Or two heavy machinegunners fighting together with a dodgy ninja etc\r\n\r\nI would love some input on code crunching, bugs, suggestions etc!\r\n\r\n```\r\n[[Intro]]:\r\n\r\n@set weaponskill = 90\r\n@set dex = 45\r\n@set alive\r\n@set health = 80\r\n\r\nYou are Brian, a thug working for a crime syndicate.\r\n\r\n\r\nChoose your main weapon.\r\n\r\n<li>[Handgun] - Medium damage, no negative dexterity impact</li>\r\n<li>[Heavy pistol] - Medium/high damamge, very small impact on dexterity</li>\r\n<li>[Shotgun] - High damage, lowers dexterity</li>\r\n<li>[Automatic rifle] - Very high damage, greatly lowers dexterity</li>\r\n\r\n\r\n[Handgun]:\r\n\r\n@set my_weapon = handgun\r\n\r\nYou chose a handgun.\r\n\r\nNow, [choose armor](Armorchoise)\r\n\r\n[Heavy pistol]:\r\n\r\n@set my_weapon = heavy pistol\r\n\r\nYou chose a heavy pistol.\r\n\r\nNow, [choose armor](Armorchoise)\r\n\r\n[Shotgun]:\r\n\r\n@set my_weapon = shotgun\r\n\r\nYou chose the shotgun.\r\n\r\nNow, [choose armor](Armorchoise)\r\n\r\n[Automatic rifle]:\r\n\r\n@set my_weapon = automatic rifle\r\n\r\nYou chose the automatic rifle.\r\n\r\nNow, [choose armor](Armorchoise)\r\n\r\n[Armorchoise]:\r\n\r\nSelect which armor to wear. \r\n\r\n[No armor]\r\n\r\n[Protective vest] - lowers dexterity, high damage soak\r\n\r\n[Kevlar] - greatly lowers dexterity, very high damage soak\r\n\r\n[No armor]:\r\n\r\n@set armorsoak = 2\r\n\r\nYou chose no armor. Only your own jacket.\r\n\r\n[[Continue]](Start)\r\n\r\n[Protective vest]:\r\n\r\n@set armor1\r\n@set armorsoak = 20\r\n\r\nYou chose protective vest as armor.\r\n\r\n[[Continue]](Start)\r\n\r\n[Kevlar]:\r\n\r\n@set armor2\r\n@set armorsoak = 50\r\n\r\nYou chose kevlar as armor.\r\n\r\n[[Continue]](Start)\r\n\r\n[[Start]]:\r\n\r\n<DEFINE ENEMY, ENEMY SKILL, ENEMY NUMBERS, ENEMY ARMOR, BELOW. WARNING! \"enemies\" and \"enemiesfo\" must match! MODIFY enemy_alive and enemyfinish to match with enemy numbers.>\r\n\r\n@set enemy1_name = a thug overlord\r\n@set enemy2_name = a thug\r\n@set enemy3_name = a thugess\r\n@set enemy1_weaponskill = 90\r\n@set enemy2_weaponskill = 50\r\n@set enemy3_weaponskill = 40\r\n@set enemy1_dex = 30\r\n@set enemy2_dex = 10\r\n@set enemy3_dex = 10\r\n@set enemies = 3\r\n@set enemiesfo = 3\r\n@set enemy1_weapon = rifle\r\n@set enemy2_weapon = handgun\r\n@set enemy3_weapon = handgun\r\n@set enemy1_health = 80\r\n@set enemy2_health = 65\r\n@set enemy3_health = 60\r\n@set enemy1_armorsoak = 40\r\n@set enemy2_armorsoak = 20\r\n@set enemy3_armorsoak = 20\r\n@set enemy1_alive\r\n@set enemy2_alive\r\n@set enemy3_alive\r\n@set not enemy1finish\r\n@set not enemy2finish\r\n@set not enemy3finish\r\n@set enemyturn = 0\r\n\r\n<END OF ENEMY DEFINITION>\r\n\r\n<ARMOR CHECK IF YOUR ARMOR COMES FROM OTHER SOURCE>\r\n\r\n{if armor1:{@dex-=15}}\r\n{if armor2:{@dex-=25}}\r\n\r\n<END OF YOUR ARMOR CHECK>\r\n\r\n<WEAPON CHECK IF YOUR WEAPON COMES FROM OTHER SOURCE>\r\n\r\n{if my_weapon=knife:{@dex+=6}}\r\n{if my_weapon=club:{@dex+=3}}\r\n{if my_weapon=bat:{@dex+=1}}\r\n{if my_weapon=sword:{@dex+=1}}\r\n{if my_weapon=small pistol:{@dex+=5}}\r\n{if my_weapon=handgun:{@dex+=2}}\r\n{if my_weapon=heavy pistol:{@dex-=1}}\r\n{if my_weapon=shotgun:{@dex-=7}}\r\n{if my_weapon=rifle:{@dex-=9}}\r\n{if my_weapon=automatic rifle:{@dex-=15}}\r\n{if my_weapon=machinegun:{@dex-=30}}\r\n\r\n\r\n<END OF WEAPON CHECK>\r\n\r\nYou've just arrived at your destination. It's almost midnight and the street lies dark and abandoned. You and your comrade, Johnny Mikov, get out of the van, bringing two duffle bags with tools and spare armament with you.\r\n\r\nAll of a sudden, {if enemies=1:one}{if enemies=2: two}{if enemies=3: three} shadow{if enemies>1:s} appear at the end of the street. \r\n\r\n{if enemies=1: Its {enemy1_name}, and he is carrying a {enemy1_weapon}.}\r\n\r\n{if enemies>1:\r\n\r\nOne of them, {enemy1_name}, is carrying a {enemy1_weapon}. The other, {enemy2_name}, is {if enemy1_weapon=@enemy2_weapon: also} carrying a {enemy2_weapon}. \r\n\r\n{if enemies=3: The third, {enemy3_name}, is{if enemy2_weapon=@enemy3_weapon: also} carrying a {enemy3_weapon}}.\r\n\r\n}\r\n\r\nJohnny: *Shit! it must be Kreugers men!*\r\n\r\nYou've just gotten your {my_weapon} out when {if enemies=1:the lone enemy}{if enemies=2: two enemies}{if enemies=3: three enemies} pull up {if enemies=1: his}{if enemies>1: their} weapon{if enemies>1:s} and attack you!\r\n\r\nAs you throw yourself behind some crates at the side of the street, you're able to see Johnny fall down to the ground, screaming, with blood gushing from a wound right below his collar.\r\n\r\nYou engage the enemy alone!\r\n\r\n[[Continue]](Your_round)\r\n\r\n[[Enemy_round]]:\r\n\r\n@inc enemyturn\r\n\r\n{if enemy1_alive:{if enemyturn=1:{if alive: [[Enemy 1 ({enemy1_name}) attacks you!]](Enemy_round1)}}}\r\n\r\n{if not enemy1_alive:{if enemy2_alive:{if enemyturn=1:{if alive: [[Enemy 2 ({enemy2_name}) attacks you!]](Enemy_round2)}}}}\r\n\r\n{if enemy2_alive:{if enemyturn=2:{if enemy1_alive:{if alive: [[Enemy 2 ({enemy2_name}) attacks you!]](Enemy_round2)}}}}\r\n\r\n{if enemy3_alive:{if enemyturn=3:{if enemy1_alive:{if enemy2_alive:{if alive: [[Enemy 3 ({enemy3_name}) attacks you!]](Enemy_round3)}}}}}\r\n\r\n{if enemy3_alive:{if not enemy1_alive:{if not enemy2_alive:{if enemyturn=1: [[Enemy 3 ({enemy3_name}) attacks you!]](Enemy_round3)}}}}\r\n\r\n{if enemy3_alive:{if not enemy1_alive:{if enemyturn=2: [[Enemy 3 ({enemy3_name}) attacks you!]](Enemy_round3)}}}\r\n\r\n{if enemy3_alive:{if not enemy2_alive:{if enemyturn=2: [[Enemy 3 ({enemy3_name}) attacks you!]](Enemy_round3)}}}\r\n\r\n{if enemy1finish:{if enemy2finish:{if enemy3finish:\r\n\r\n[[Your turn]](Your_round)\r\n\r\n}}}\r\n\r\n[[Enemy_round1]]:\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"enemy_attackroll\", randomnumber(1,100));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"mydexroll\", randomnumber(1,100));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"enemy_damage\", randomnumber(9,80));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"text\", randomnumber(1,7));\r\n\r\n<h4>Enemy 1: {enemy1_name}</h4>\r\n\r\n{if enemy_attackroll<=@enemy1_weaponskill:{if mydexroll<=@dex:\r\n\r\n{if text=1: Your foe attacks you, but you duck down and narrowly escape his weapon.}\r\n{if text=2: You dodge the attack. Close one!}\r\n{if text=3: You lower your head just in time - your enemy misses.}\r\n{if text=4: You dive down to the ground and dodge the attack.}\r\n{if text=5: You're able to dodge the attack.}\r\n{if text=6: Your fast footwork saves you just in time - you dodge the attack.}\r\n\r\n}}\r\n\r\n\r\n\r\n{if enemy_attackroll>@enemy1_weaponskill:\r\n\r\n{if text=1: Your foe attacks you, but misses.}\r\n{if text=2: Your enemy is off balance, and misses you.}\r\n{if text=3: Your enemy misses.}\r\n{if text=4: Your foe misses the attack.}\r\n{if text=5: You're enemy is distracted and misses the attack.}\r\n{if text=6: Your foe attacks way too high, and misses your head.}\r\n\r\n}\r\n\r\n\r\n\r\n{if enemy_attackroll<=@enemy1_weaponskill:{if mydexroll>@dex:\r\n\r\n<font color=\"red\">The enemy hits you!</font>\r\n\r\n{if enemy1_weapon=knife:{@enemy_damage-=12}}\r\n{if enemy1_weapon=club:{@enemy_damage-=12}}\r\n{if enemy1_weapon=bat:{@enemy_damage-=9}}\r\n{if enemy1_weapon=sword:{@enemy_damage-=5}}\r\n{if enemy1_weapon=small pistol:{@enemy_damage-=10}}\r\n{if enemy1_weapon=handgun:{@enemy_damage-=2}}\r\n{if enemy1_weapon=heavy pistol:{@enemy_damage+=7}}\r\n{if enemy1_weapon=shotgun:{@enemy_damage+=14}}\r\n{if enemy1_weapon=rifle:{@enemy_damage+=15}}\r\n{if enemy1_weapon=automatic rifle:{@enemy_damage+=18}}\r\n{if enemy1_weapon=machinegun:{@enemy_damage+=30}}\r\n\r\n{@enemy_damage-=@armorsoak}\r\n\r\n{if enemy_damage>0:{@health-=@enemy_damage}}\r\n\r\n<b>Damage output:</b>{if enemy_damage<=0: {enemy_damage} (*Damaged totally soaked by your armor*)}{if enemy_damage>=1:{if enemy_damage<=5: {enemy_damage} (*Just a scratch!*)}}{if enemy_damage>=6:{if enemy_damage<=15: {enemy_damage} (Fleshwound)}}{if enemy_damage>=16:{if enemy_damage<=30: {enemy_damage} (Heavy wound)}}{if enemy_damage>=31: {enemy_damage} (Mortal wound)}\r\n\r\n{if health<=0: <font color=\"red\">You die from your wounds!</font>{@not alive}}\r\n\r\n}}\r\n\r\n@set enemy1finish\r\n\r\n{if alive: [[Continue]](Enemy_round)}\r\n\r\n[[Enemy_round2]]:\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"enemy_weaponroll\", randomnumber(1,100));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"mydexroll\", randomnumber(1,100));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"enemy_damage\", randomnumber(9,80));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"text\", randomnumber(1,7));\r\n\r\n<h4>Enemy 2: {enemy2_name}</h4>\r\n\r\n{if enemy_weaponroll<=@enemy2_weaponskill:{if mydexroll<=@dex:\r\n\r\n{if text=1: Your foe attacks you, but you duck down and narrowly escape his weapon.}\r\n{if text=2: You dodge the attack. Close one!}\r\n{if text=3: You lower your head just in time - your enemy misses.}\r\n{if text=4: You dive down to the ground and dodge the attack.}\r\n{if text=5: You're able to dodge the attack.}\r\n{if text=6: Your fast footwork saves you just in time - you dodge the attack.}\r\n\r\n}}\r\n\r\n\r\n\r\n{if enemy_weaponroll>@enemy2_weaponskill:\r\n\r\n{if text=1: Your foe attacks you, but misses.}\r\n{if text=2: Your enemy is off balance, and misses you.}\r\n{if text=3: Your enemy misses.}\r\n{if text=4: Your foe misses the attack.}\r\n{if text=5: You're enemy is distracted and misses the attack.}\r\n{if text=6: Your foe attacks way too high, and misses your head.}\r\n\r\n}\r\n\r\n\r\n\r\n{if enemy_weaponroll<=@enemy2_weaponskill:{if mydexroll>@dex:\r\n\r\n<font color=\"red\">The enemy hits you!</font>\r\n\r\n{if enemy2_weapon=knife:{@enemy_damage-=12}}\r\n{if enemy2_weapon=club:{@enemy_damage-=12}}\r\n{if enemy2_weapon=bat:{@enemy_damage-=9}}\r\n{if enemy2_weapon=sword:{@enemy_damage-=5}}\r\n{if enemy2_weapon=small pistol:{@enemy_damage-=10}}\r\n{if enemy2_weapon=handgun:{@enemy_damage-=2}}\r\n{if enemy2_weapon=heavy pistol:{@enemy_damage+=7}}\r\n{if enemy2_weapon=shotgun:{@enemy_damage+=14}}\r\n{if enemy2_weapon=rifle:{@enemy_damage+=15}}\r\n{if enemy2_weapon=automatic rifle:{@enemy_damage+=18}}\r\n{if enemy2_weapon=machinegun:{@enemy_damage+=30}}\r\n\r\n{@enemy_damage-=@armorsoak}\r\n\r\n{if enemy_damage>0:{@health-=@enemy_damage}}\r\n\r\n<b>Damage output:</b>{if enemy_damage<=0: {enemy_damage} (*Damaged totally soaked by your armor*)}{if enemy_damage>=1:{if enemy_damage<=5: {enemy_damage} (*Just a scratch!*)}}{if enemy_damage>=6:{if enemy_damage<=15: {enemy_damage} (Fleshwound)}}{if enemy_damage>=16:{if enemy_damage<=30: {enemy_damage} (Heavy wound)}}{if enemy_damage>=31: {enemy_damage} (Mortal wound)}\r\n\r\n{if health<=0: <font color=\"red\">You die from your wounds!</font>{@not alive}}\r\n\r\n}}\r\n\r\n@set enemy2finish\r\n\r\n{if alive: [[Continue]](Enemy_round)}\r\n\r\n[[Enemy_round3]]:\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"enemy_weaponroll\", randomnumber(1,100));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"mydexroll\", randomnumber(1,100));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"enemy_damage\", randomnumber(9,80));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"text\", randomnumber(1,7));\r\n\r\n<h4>Enemy 3: {enemy3_name}</h4>\r\n\r\n{if enemy_weaponroll<=@enemy3_weaponskill:{if mydexroll<=@dex:\r\n\r\n{if text=1: Your foe attacks you, but you duck down and narrowly escape his weapon.}\r\n{if text=2: You dodge the attack. Close one!}\r\n{if text=3: You lower your head just in time - your enemy misses.}\r\n{if text=4: You dive down to the ground and dodge the attack.}\r\n{if text=5: You're able to dodge the attack.}\r\n{if text=6: Your fast footwork saves you just in time - you dodge the attack.}\r\n\r\n}}\r\n\r\n\r\n\r\n{if enemy_weaponroll>@enemy3_weaponskill:\r\n\r\n{if text=1: Your foe attacks you, but misses.}\r\n{if text=2: Your enemy is off balance, and misses you.}\r\n{if text=3: Your enemy misses.}\r\n{if text=4: Your foe misses the attack.}\r\n{if text=5: You're enemy is distracted and misses the attack.}\r\n{if text=6: Your foe attacks way too high, and misses your head.}\r\n\r\n}\r\n\r\n\r\n\r\n{if enemy_weaponroll<=@enemy3_weaponskill:{if mydexroll>@dex:\r\n\r\n<font color=\"red\">The enemy hits you!</font>\r\n\r\n{if enemy3_weapon=knife:{@enemy_damage-=12}}\r\n{if enemy3_weapon=club:{@enemy_damage-=12}}\r\n{if enemy3_weapon=bat:{@enemy_damage-=9}}\r\n{if enemy3_weapon=sword:{@enemy_damage-=5}}\r\n{if enemy3_weapon=small pistol:{@enemy_damage-=10}}\r\n{if enemy3_weapon=handgun:{@enemy_damage-=2}}\r\n{if enemy3_weapon=heavy pistol:{@enemy_damage+=7}}\r\n{if enemy3_weapon=shotgun:{@enemy_damage+=14}}\r\n{if enemy3_weapon=rifle:{@enemy_damage+=15}}\r\n{if enemy3_weapon=automatic rifle:{@enemy_damage+=18}}\r\n{if enemy3_weapon=machinegun:{@enemy_damage+=30}}\r\n\r\n{@enemy_damage-=@armorsoak}\r\n\r\n{if enemy_damage>0:{@health-=@enemy_damage}}\r\n\r\n<b>Damage output:</b>{if enemy_damage<=0: {enemy_damage} (*Damaged totally soaked by your armor*)}{if enemy_damage>=1:{if enemy_damage<=5: {enemy_damage} (*Just a scratch!*)}}{if enemy_damage>=6:{if enemy_damage<=15: {enemy_damage} (Fleshwound)}}{if enemy_damage>=16:{if enemy_damage<=30: {enemy_damage} (Heavy wound)}}{if enemy_damage>=31: {enemy_damage} (Mortal wound)}\r\n\r\n{if health<=0: <font color=\"red\">You die from your wounds!</font>{@not alive}}\r\n\r\n}}\r\n\r\n@set enemy3finish\r\n\r\n{if alive: [[Continue]](Enemy_round)}\r\n\r\n[[Your_round]]:\r\n\r\n{if enemy1_alive: {@not enemy1finish}}\r\n{if enemy2_alive: {@not enemy2finish}}\r\n{if enemy3_alive: {@not enemy3finish}}\r\n\r\n@set enemyturn = 0\r\n\r\n{if enemies=0: \r\n\r\nYou have defeated {if enemiesfo=1: your enemy!}{if enemiesfo>1: your enemies!} The battle is over.\r\n\r\n[[Continue]](LINK TO YOUR STORY)\r\n\r\n}\r\n\r\n{if enemiesfo=1:\r\n\r\n{if enemy1_alive: [[Attack]](Att1)}{else: Attack} - {enemy1_name} {if enemy1_health>=1:{if enemy1_health<=20: <font color=\"red\">Wounded!</font>}}{if not enemy1_alive: <font color=\"red\">DEAD!</font>}\r\n\r\n}\r\n\r\n{if enemiesfo=2:\r\n\r\n{if enemy1_alive: [[Attack]](Att1)}{else: Attack} - {enemy1_name} {if enemy1_health>=1:{if enemy1_health<=20: <font color=\"red\">Wounded!</font>}}{if not enemy1_alive: <font color=\"red\">DEAD!</font>}\r\n\r\n\r\n{if enemy2_alive: [[Attack]](Att2)}{else: Attack} - {enemy2_name} {if enemy2_health>=1:{if enemy2_health<=20: <font color=\"red\">Wounded!</font>}}{if not enemy2_alive: <font color=\"red\">DEAD!</font>}\r\n\r\n}\r\n\r\n{if enemiesfo=3:\r\n\r\n{if enemy1_alive: [[Attack]](Att1)}{else: Attack} - {enemy1_name} {if enemy1_health>=1:{if enemy1_health<=20: <font color=\"red\">Wounded!</font>}}{if not enemy1_alive: <font color=\"red\">DEAD!</font>}\r\n\r\n\r\n{if enemy2_alive: [[Attack]](Att2)}{else: Attack} - {enemy2_name} {if enemy2_health>=1:{if enemy2_health<=20: <font color=\"red\">Wounded!</font>}}{if not enemy2_alive: <font color=\"red\">DEAD!</font>}\r\n\r\n\r\n{if enemy3_alive: [[Attack]](Att3)}{else: Attack} - {enemy3_name} {if enemy3_health>=1:{if enemy3_health<=20: <font color=\"red\">Wounded!</font>}}{if not enemy3_alive: <font color=\"red\">DEAD!</font>}\r\n\r\n}\r\n\r\n...............................\r\n\r\n<b>Your health:</b> {if health>=1:{if health<=10: <font color=\"red\"> Mortally wounded!</font>}}{if health>=11:{if health<=25: <font color=\"red\">Critically wounded!</font>}}{if health>=26:{if health<=40: <font color=\"red\">Badly wounded!</font>}}{if health>=41:{if health<=79: <font color=\"red\">Wounded!</font>}}{if health>=80: Fresh!}\r\n\r\n[[Att1]]:\r\n    clearTimeout(squiffy.myVar);\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"my_weaponroll\", randomnumber(1,100));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"my_damage\", randomnumber(9,95));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"enemydexroll\", randomnumber(1,100));\r\n\r\n{if my_weaponroll<=@weaponskill:{if enemydexroll<=@enemy1_dex:\r\n\r\nYou attack the enemy, but he is able to take cover.\r\n\r\n}}\r\n\r\n{if my_weaponroll>@weaponskill:\r\n\r\nYou miss the enemy!\r\n\r\n}\r\n\r\n\r\n{if my_weaponroll<=@weaponskill:{if enemydexroll>@enemy1_dex:\r\n\r\n<font color=\"red\">You aim high and hit the enemy with your {my_weapon}!</font>\r\n\r\n{if my_weapon=knife:{@my_damage-=12}}\r\n{if my_weapon=club:{@my_damage-=12}}\r\n{if my_weapon=bat:{@my_damage-=9}}\r\n{if my_weapon=sword:{@my_damage-=5}}\r\n{if my_weapon=small pistol:{@my_damage-=10}}\r\n{if my_weapon=handgun:{@my_damage-=2}}\r\n{if my_weapon=heavy pistol:{@my_damage+=7}}\r\n{if my_weapon=shotgun:{@my_damage+=14}}\r\n{if my_weapon=rifle:{@my_damage+=15}}\r\n{if my_weapon=automatic rifle:{@my_damage+=18}}\r\n{if my_weapon=machinegun:{@my_damage+=30}}\r\n\r\n{@my_damage-=@enemy1_armorsoak}\r\n\r\n{if my_damage>0:{@enemy1_health-=@my_damage}}\r\n\r\n<b>Damage output:</b>{if my_damage<=0: {my_damage} (*Damaged totally soaked by enemy armor*)}{if my_damage>=1:{if my_damage<=5: {my_damage} (*Just a scratch!*)}}{if my_damage>=6:{if my_damage<=15: {my_damage} (Fleshwound)}}{if my_damage>=16:{if my_damage<=30: {my_damage} (Heavy wound)}}{if my_damage>=31: {my_damage} (Mortal wound)}\r\n\r\n}}\r\n\r\n{if enemy1_health<=0:\r\n\r\nThe enemy is mortally wounded and cannot continue the fight!\r\n\r\n{@enemies-=1}{@not enemy1_alive}{@enemy1finish}\r\n\r\n}\r\n\r\n[[Next round]](Enemy_round)\r\n\r\n[[Att2]]:\r\n    clearTimeout(squiffy.myVar);\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"my_weaponroll\", randomnumber(1,100));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"my_damage\", randomnumber(9,95));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"enemydexroll\", randomnumber(1,100));\r\n\r\n{if my_weaponroll<=@weaponskill:{if enemydexroll<=@enemy2_dex:\r\n\r\nYou attack the enemy, but he is able to dodge.\r\n\r\n}}\r\n\r\n{if my_weaponroll>@weaponskill:\r\n\r\nYou miss the enemy!\r\n\r\n}\r\n\r\n\r\n{if my_weaponroll<=@weaponskill:{if enemydexroll>@enemy2_dex:\r\n\r\n<font color=\"red\">You hit the enemy with your {my_weapon}!</font>\r\n\r\n{if my_weapon=knife:{@my_damage-=12}}\r\n{if my_weapon=club:{@my_damage-=12}}\r\n{if my_weapon=bat:{@my_damage-=9}}\r\n{if my_weapon=sword:{@my_damage-=5}}\r\n{if my_weapon=small pistol:{@my_damage-=10}}\r\n{if my_weapon=handgun:{@my_damage-=2}}\r\n{if my_weapon=heavy pistol:{@my_damage+=7}}\r\n{if my_weapon=shotgun:{@my_damage+=14}}\r\n{if my_weapon=rifle:{@my_damage+=15}}\r\n{if my_weapon=automatic rifle:{@my_damage+=18}}\r\n{if my_weapon=machinegun:{@my_damage+=30}}\r\n\r\n{@my_damage-=@enemy2_armorsoak}\r\n\r\n{if my_damage>0:{@enemy2_health-=@my_damage}}\r\n\r\n<b>Damage output:</b>{if my_damage<=0: {my_damage} (*Damaged totally soaked by enemy armor*)}{if my_damage>=1:{if my_damage<=5: {my_damage} (*Just a scratch!*)}}{if my_damage>=6:{if my_damage<=15: {my_damage} (Fleshwound)}}{if my_damage>=16:{if my_damage<=30: {my_damage} (Heavy wound)}}{if my_damage>=31: {my_damage} (Mortal wound)}\r\n\r\n}}\r\n\r\n{if enemy2_health<=0:\r\n\r\nThe enemy is mortally wounded and cannot continue the fight!\r\n\r\n{@enemies-=1}{@not enemy2_alive}{@enemy2finish}\r\n\r\n}\r\n\r\n[[Next round]](Enemy_round)\r\n\r\n[[Att3]]:\r\n    clearTimeout(squiffy.myVar);\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"my_weaponroll\", randomnumber(1,100));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"my_damage\", randomnumber(9,95));\r\n    var randomnumber = function rng(min, max) {\r\n      return Math.floor(Math.random() * (max - min) + min);\r\n    }\r\n\r\n    set (\"enemydexroll\", randomnumber(1,100));\r\n\r\n{if my_weaponroll<=@weaponskill:{if enemydexroll<=@enemy3_dex:\r\n\r\nYou attack the enemy, but he is able to take cover.\r\n\r\n}}\r\n\r\n{if my_weaponroll>@weaponskill:\r\n\r\nYou miss the enemy!\r\n\r\n}\r\n\r\n\r\n{if my_weaponroll<=@weaponskill:{if enemydexroll>@enemy3_dex:\r\n\r\n<font color=\"red\">You aim high and hit the enemy with your {my_weapon}!</font>\r\n\r\n{if my_weapon=knife:{@my_damage-=12}}\r\n{if my_weapon=club:{@my_damage-=12}}\r\n{if my_weapon=bat:{@my_damage-=9}}\r\n{if my_weapon=sword:{@my_damage-=5}}\r\n{if my_weapon=small pistol:{@my_damage-=10}}\r\n{if my_weapon=handgun:{@my_damage-=2}}\r\n{if my_weapon=heavy pistol:{@my_damage+=7}}\r\n{if my_weapon=shotgun:{@my_damage+=14}}\r\n{if my_weapon=rifle:{@my_damage+=15}}\r\n{if my_weapon=automatic rifle:{@my_damage+=18}}\r\n{if my_weapon=machinegun:{@my_damage+=30}}\r\n\r\n{@my_damage-=@enemy3_armorsoak}\r\n\r\n{if my_damage>0:{@enemy3_health-=@my_damage}}\r\n\r\n<b>Damage output:</b>{if my_damage<=0: {my_damage} (*Damaged totally soaked by enemy armor*)}{if my_damage>=1:{if my_damage<=5: {my_damage} (*Just a scratch!*)}}{if my_damage>=6:{if my_damage<=15: {my_damage} (Fleshwound)}}{if my_damage>=16:{if my_damage<=30: {my_damage} (Heavy wound)}}{if my_damage>=31: {my_damage} (Mortal wound)}\r\n\r\n}}\r\n\r\n{if enemy3_health<=0:\r\n\r\nThe enemy is mortally wounded and cannot continue the fight!\r\n\r\n{@enemies-=1}{@not enemy3_alive}{@enemy3finish}\r\n\r\n}\r\n\r\n[[Next round]](Enemy_round)\r\n\r\n[[]]:\r\n@clear\r\n\r\n[]:\r\n@clear\r\n\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello!</p>\n<p>I've been putting together this combat simulator for my Squiffy game. Its graphically basic, but I've built it so that you can modify each specific combat with enemy names, skills etc.</p>\n<p>With this system you can fight 1-3 enemies at the same time. It takes into consideration:</p>\n<p>*Choise of weapon (will impact dexterity and damage)<br>\n*Armor (will impact armorsoak and dexterity)<br>\n*Dexterity skill (for chance to dodge attacks)<br>\n*Weapon skill (for chance to hit enemy)</p>\n<p>You're able to modify each enemy alone so that you can, for instance, have a boss fighting together with henchmen. Or two heavy machinegunners fighting together with a dodgy ninja etc</p>\n<p>I would love some input on code crunching, bugs, suggestions etc!</p>\n<pre><code>[[Intro]]:\n\n@set weaponskill = 90\n@set dex = 45\n@set alive\n@set health = 80\n\nYou are Brian, a thug working for a crime syndicate.\n\n\nChoose your main weapon.\n\n&lt;li&gt;[Handgun] - Medium damage, no negative dexterity impact&lt;/li&gt;\n&lt;li&gt;[Heavy pistol] - Medium/high damamge, very small impact on dexterity&lt;/li&gt;\n&lt;li&gt;[Shotgun] - High damage, lowers dexterity&lt;/li&gt;\n&lt;li&gt;[Automatic rifle] - Very high damage, greatly lowers dexterity&lt;/li&gt;\n\n\n[Handgun]:\n\n@set my_weapon = handgun\n\nYou chose a handgun.\n\nNow, [choose armor](Armorchoise)\n\n[Heavy pistol]:\n\n@set my_weapon = heavy pistol\n\nYou chose a heavy pistol.\n\nNow, [choose armor](Armorchoise)\n\n[Shotgun]:\n\n@set my_weapon = shotgun\n\nYou chose the shotgun.\n\nNow, [choose armor](Armorchoise)\n\n[Automatic rifle]:\n\n@set my_weapon = automatic rifle\n\nYou chose the automatic rifle.\n\nNow, [choose armor](Armorchoise)\n\n[Armorchoise]:\n\nSelect which armor to wear. \n\n[No armor]\n\n[Protective vest] - lowers dexterity, high damage soak\n\n[Kevlar] - greatly lowers dexterity, very high damage soak\n\n[No armor]:\n\n@set armorsoak = 2\n\nYou chose no armor. Only your own jacket.\n\n[[Continue]](Start)\n\n[Protective vest]:\n\n@set armor1\n@set armorsoak = 20\n\nYou chose protective vest as armor.\n\n[[Continue]](Start)\n\n[Kevlar]:\n\n@set armor2\n@set armorsoak = 50\n\nYou chose kevlar as armor.\n\n[[Continue]](Start)\n\n[[Start]]:\n\n&lt;DEFINE ENEMY, ENEMY SKILL, ENEMY NUMBERS, ENEMY ARMOR, BELOW. WARNING! \"enemies\" and \"enemiesfo\" must match! MODIFY enemy_alive and enemyfinish to match with enemy numbers.&gt;\n\n@set enemy1_name = a thug overlord\n@set enemy2_name = a thug\n@set enemy3_name = a thugess\n@set enemy1_weaponskill = 90\n@set enemy2_weaponskill = 50\n@set enemy3_weaponskill = 40\n@set enemy1_dex = 30\n@set enemy2_dex = 10\n@set enemy3_dex = 10\n@set enemies = 3\n@set enemiesfo = 3\n@set enemy1_weapon = rifle\n@set enemy2_weapon = handgun\n@set enemy3_weapon = handgun\n@set enemy1_health = 80\n@set enemy2_health = 65\n@set enemy3_health = 60\n@set enemy1_armorsoak = 40\n@set enemy2_armorsoak = 20\n@set enemy3_armorsoak = 20\n@set enemy1_alive\n@set enemy2_alive\n@set enemy3_alive\n@set not enemy1finish\n@set not enemy2finish\n@set not enemy3finish\n@set enemyturn = 0\n\n&lt;END OF ENEMY DEFINITION&gt;\n\n&lt;ARMOR CHECK IF YOUR ARMOR COMES FROM OTHER SOURCE&gt;\n\n{if armor1:{@dex-=15}}\n{if armor2:{@dex-=25}}\n\n&lt;END OF YOUR ARMOR CHECK&gt;\n\n&lt;WEAPON CHECK IF YOUR WEAPON COMES FROM OTHER SOURCE&gt;\n\n{if my_weapon=knife:{@dex+=6}}\n{if my_weapon=club:{@dex+=3}}\n{if my_weapon=bat:{@dex+=1}}\n{if my_weapon=sword:{@dex+=1}}\n{if my_weapon=small pistol:{@dex+=5}}\n{if my_weapon=handgun:{@dex+=2}}\n{if my_weapon=heavy pistol:{@dex-=1}}\n{if my_weapon=shotgun:{@dex-=7}}\n{if my_weapon=rifle:{@dex-=9}}\n{if my_weapon=automatic rifle:{@dex-=15}}\n{if my_weapon=machinegun:{@dex-=30}}\n\n\n&lt;END OF WEAPON CHECK&gt;\n\nYou've just arrived at your destination. It's almost midnight and the street lies dark and abandoned. You and your comrade, Johnny Mikov, get out of the van, bringing two duffle bags with tools and spare armament with you.\n\nAll of a sudden, {if enemies=1:one}{if enemies=2: two}{if enemies=3: three} shadow{if enemies&gt;1:s} appear at the end of the street. \n\n{if enemies=1: Its {enemy1_name}, and he is carrying a {enemy1_weapon}.}\n\n{if enemies&gt;1:\n\nOne of them, {enemy1_name}, is carrying a {enemy1_weapon}. The other, {enemy2_name}, is {if enemy1_weapon=@enemy2_weapon: also} carrying a {enemy2_weapon}. \n\n{if enemies=3: The third, {enemy3_name}, is{if enemy2_weapon=@enemy3_weapon: also} carrying a {enemy3_weapon}}.\n\n}\n\nJohnny: *Shit! it must be Kreugers men!*\n\nYou've just gotten your {my_weapon} out when {if enemies=1:the lone enemy}{if enemies=2: two enemies}{if enemies=3: three enemies} pull up {if enemies=1: his}{if enemies&gt;1: their} weapon{if enemies&gt;1:s} and attack you!\n\nAs you throw yourself behind some crates at the side of the street, you're able to see Johnny fall down to the ground, screaming, with blood gushing from a wound right below his collar.\n\nYou engage the enemy alone!\n\n[[Continue]](Your_round)\n\n[[Enemy_round]]:\n\n@inc enemyturn\n\n{if enemy1_alive:{if enemyturn=1:{if alive: [[Enemy 1 ({enemy1_name}) attacks you!]](Enemy_round1)}}}\n\n{if not enemy1_alive:{if enemy2_alive:{if enemyturn=1:{if alive: [[Enemy 2 ({enemy2_name}) attacks you!]](Enemy_round2)}}}}\n\n{if enemy2_alive:{if enemyturn=2:{if enemy1_alive:{if alive: [[Enemy 2 ({enemy2_name}) attacks you!]](Enemy_round2)}}}}\n\n{if enemy3_alive:{if enemyturn=3:{if enemy1_alive:{if enemy2_alive:{if alive: [[Enemy 3 ({enemy3_name}) attacks you!]](Enemy_round3)}}}}}\n\n{if enemy3_alive:{if not enemy1_alive:{if not enemy2_alive:{if enemyturn=1: [[Enemy 3 ({enemy3_name}) attacks you!]](Enemy_round3)}}}}\n\n{if enemy3_alive:{if not enemy1_alive:{if enemyturn=2: [[Enemy 3 ({enemy3_name}) attacks you!]](Enemy_round3)}}}\n\n{if enemy3_alive:{if not enemy2_alive:{if enemyturn=2: [[Enemy 3 ({enemy3_name}) attacks you!]](Enemy_round3)}}}\n\n{if enemy1finish:{if enemy2finish:{if enemy3finish:\n\n[[Your turn]](Your_round)\n\n}}}\n\n[[Enemy_round1]]:\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"enemy_attackroll\", randomnumber(1,100));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"mydexroll\", randomnumber(1,100));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"enemy_damage\", randomnumber(9,80));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"text\", randomnumber(1,7));\n\n&lt;h4&gt;Enemy 1: {enemy1_name}&lt;/h4&gt;\n\n{if enemy_attackroll&lt;=@enemy1_weaponskill:{if mydexroll&lt;=@dex:\n\n{if text=1: Your foe attacks you, but you duck down and narrowly escape his weapon.}\n{if text=2: You dodge the attack. Close one!}\n{if text=3: You lower your head just in time - your enemy misses.}\n{if text=4: You dive down to the ground and dodge the attack.}\n{if text=5: You're able to dodge the attack.}\n{if text=6: Your fast footwork saves you just in time - you dodge the attack.}\n\n}}\n\n\n\n{if enemy_attackroll&gt;@enemy1_weaponskill:\n\n{if text=1: Your foe attacks you, but misses.}\n{if text=2: Your enemy is off balance, and misses you.}\n{if text=3: Your enemy misses.}\n{if text=4: Your foe misses the attack.}\n{if text=5: You're enemy is distracted and misses the attack.}\n{if text=6: Your foe attacks way too high, and misses your head.}\n\n}\n\n\n\n{if enemy_attackroll&lt;=@enemy1_weaponskill:{if mydexroll&gt;@dex:\n\n&lt;font color=\"red\"&gt;The enemy hits you!&lt;/font&gt;\n\n{if enemy1_weapon=knife:{@enemy_damage-=12}}\n{if enemy1_weapon=club:{@enemy_damage-=12}}\n{if enemy1_weapon=bat:{@enemy_damage-=9}}\n{if enemy1_weapon=sword:{@enemy_damage-=5}}\n{if enemy1_weapon=small pistol:{@enemy_damage-=10}}\n{if enemy1_weapon=handgun:{@enemy_damage-=2}}\n{if enemy1_weapon=heavy pistol:{@enemy_damage+=7}}\n{if enemy1_weapon=shotgun:{@enemy_damage+=14}}\n{if enemy1_weapon=rifle:{@enemy_damage+=15}}\n{if enemy1_weapon=automatic rifle:{@enemy_damage+=18}}\n{if enemy1_weapon=machinegun:{@enemy_damage+=30}}\n\n{@enemy_damage-=@armorsoak}\n\n{if enemy_damage&gt;0:{@health-=@enemy_damage}}\n\n&lt;b&gt;Damage output:&lt;/b&gt;{if enemy_damage&lt;=0: {enemy_damage} (*Damaged totally soaked by your armor*)}{if enemy_damage&gt;=1:{if enemy_damage&lt;=5: {enemy_damage} (*Just a scratch!*)}}{if enemy_damage&gt;=6:{if enemy_damage&lt;=15: {enemy_damage} (Fleshwound)}}{if enemy_damage&gt;=16:{if enemy_damage&lt;=30: {enemy_damage} (Heavy wound)}}{if enemy_damage&gt;=31: {enemy_damage} (Mortal wound)}\n\n{if health&lt;=0: &lt;font color=\"red\"&gt;You die from your wounds!&lt;/font&gt;{@not alive}}\n\n}}\n\n@set enemy1finish\n\n{if alive: [[Continue]](Enemy_round)}\n\n[[Enemy_round2]]:\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"enemy_weaponroll\", randomnumber(1,100));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"mydexroll\", randomnumber(1,100));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"enemy_damage\", randomnumber(9,80));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"text\", randomnumber(1,7));\n\n&lt;h4&gt;Enemy 2: {enemy2_name}&lt;/h4&gt;\n\n{if enemy_weaponroll&lt;=@enemy2_weaponskill:{if mydexroll&lt;=@dex:\n\n{if text=1: Your foe attacks you, but you duck down and narrowly escape his weapon.}\n{if text=2: You dodge the attack. Close one!}\n{if text=3: You lower your head just in time - your enemy misses.}\n{if text=4: You dive down to the ground and dodge the attack.}\n{if text=5: You're able to dodge the attack.}\n{if text=6: Your fast footwork saves you just in time - you dodge the attack.}\n\n}}\n\n\n\n{if enemy_weaponroll&gt;@enemy2_weaponskill:\n\n{if text=1: Your foe attacks you, but misses.}\n{if text=2: Your enemy is off balance, and misses you.}\n{if text=3: Your enemy misses.}\n{if text=4: Your foe misses the attack.}\n{if text=5: You're enemy is distracted and misses the attack.}\n{if text=6: Your foe attacks way too high, and misses your head.}\n\n}\n\n\n\n{if enemy_weaponroll&lt;=@enemy2_weaponskill:{if mydexroll&gt;@dex:\n\n&lt;font color=\"red\"&gt;The enemy hits you!&lt;/font&gt;\n\n{if enemy2_weapon=knife:{@enemy_damage-=12}}\n{if enemy2_weapon=club:{@enemy_damage-=12}}\n{if enemy2_weapon=bat:{@enemy_damage-=9}}\n{if enemy2_weapon=sword:{@enemy_damage-=5}}\n{if enemy2_weapon=small pistol:{@enemy_damage-=10}}\n{if enemy2_weapon=handgun:{@enemy_damage-=2}}\n{if enemy2_weapon=heavy pistol:{@enemy_damage+=7}}\n{if enemy2_weapon=shotgun:{@enemy_damage+=14}}\n{if enemy2_weapon=rifle:{@enemy_damage+=15}}\n{if enemy2_weapon=automatic rifle:{@enemy_damage+=18}}\n{if enemy2_weapon=machinegun:{@enemy_damage+=30}}\n\n{@enemy_damage-=@armorsoak}\n\n{if enemy_damage&gt;0:{@health-=@enemy_damage}}\n\n&lt;b&gt;Damage output:&lt;/b&gt;{if enemy_damage&lt;=0: {enemy_damage} (*Damaged totally soaked by your armor*)}{if enemy_damage&gt;=1:{if enemy_damage&lt;=5: {enemy_damage} (*Just a scratch!*)}}{if enemy_damage&gt;=6:{if enemy_damage&lt;=15: {enemy_damage} (Fleshwound)}}{if enemy_damage&gt;=16:{if enemy_damage&lt;=30: {enemy_damage} (Heavy wound)}}{if enemy_damage&gt;=31: {enemy_damage} (Mortal wound)}\n\n{if health&lt;=0: &lt;font color=\"red\"&gt;You die from your wounds!&lt;/font&gt;{@not alive}}\n\n}}\n\n@set enemy2finish\n\n{if alive: [[Continue]](Enemy_round)}\n\n[[Enemy_round3]]:\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"enemy_weaponroll\", randomnumber(1,100));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"mydexroll\", randomnumber(1,100));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"enemy_damage\", randomnumber(9,80));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"text\", randomnumber(1,7));\n\n&lt;h4&gt;Enemy 3: {enemy3_name}&lt;/h4&gt;\n\n{if enemy_weaponroll&lt;=@enemy3_weaponskill:{if mydexroll&lt;=@dex:\n\n{if text=1: Your foe attacks you, but you duck down and narrowly escape his weapon.}\n{if text=2: You dodge the attack. Close one!}\n{if text=3: You lower your head just in time - your enemy misses.}\n{if text=4: You dive down to the ground and dodge the attack.}\n{if text=5: You're able to dodge the attack.}\n{if text=6: Your fast footwork saves you just in time - you dodge the attack.}\n\n}}\n\n\n\n{if enemy_weaponroll&gt;@enemy3_weaponskill:\n\n{if text=1: Your foe attacks you, but misses.}\n{if text=2: Your enemy is off balance, and misses you.}\n{if text=3: Your enemy misses.}\n{if text=4: Your foe misses the attack.}\n{if text=5: You're enemy is distracted and misses the attack.}\n{if text=6: Your foe attacks way too high, and misses your head.}\n\n}\n\n\n\n{if enemy_weaponroll&lt;=@enemy3_weaponskill:{if mydexroll&gt;@dex:\n\n&lt;font color=\"red\"&gt;The enemy hits you!&lt;/font&gt;\n\n{if enemy3_weapon=knife:{@enemy_damage-=12}}\n{if enemy3_weapon=club:{@enemy_damage-=12}}\n{if enemy3_weapon=bat:{@enemy_damage-=9}}\n{if enemy3_weapon=sword:{@enemy_damage-=5}}\n{if enemy3_weapon=small pistol:{@enemy_damage-=10}}\n{if enemy3_weapon=handgun:{@enemy_damage-=2}}\n{if enemy3_weapon=heavy pistol:{@enemy_damage+=7}}\n{if enemy3_weapon=shotgun:{@enemy_damage+=14}}\n{if enemy3_weapon=rifle:{@enemy_damage+=15}}\n{if enemy3_weapon=automatic rifle:{@enemy_damage+=18}}\n{if enemy3_weapon=machinegun:{@enemy_damage+=30}}\n\n{@enemy_damage-=@armorsoak}\n\n{if enemy_damage&gt;0:{@health-=@enemy_damage}}\n\n&lt;b&gt;Damage output:&lt;/b&gt;{if enemy_damage&lt;=0: {enemy_damage} (*Damaged totally soaked by your armor*)}{if enemy_damage&gt;=1:{if enemy_damage&lt;=5: {enemy_damage} (*Just a scratch!*)}}{if enemy_damage&gt;=6:{if enemy_damage&lt;=15: {enemy_damage} (Fleshwound)}}{if enemy_damage&gt;=16:{if enemy_damage&lt;=30: {enemy_damage} (Heavy wound)}}{if enemy_damage&gt;=31: {enemy_damage} (Mortal wound)}\n\n{if health&lt;=0: &lt;font color=\"red\"&gt;You die from your wounds!&lt;/font&gt;{@not alive}}\n\n}}\n\n@set enemy3finish\n\n{if alive: [[Continue]](Enemy_round)}\n\n[[Your_round]]:\n\n{if enemy1_alive: {@not enemy1finish}}\n{if enemy2_alive: {@not enemy2finish}}\n{if enemy3_alive: {@not enemy3finish}}\n\n@set enemyturn = 0\n\n{if enemies=0: \n\nYou have defeated {if enemiesfo=1: your enemy!}{if enemiesfo&gt;1: your enemies!} The battle is over.\n\n[[Continue]](LINK TO YOUR STORY)\n\n}\n\n{if enemiesfo=1:\n\n{if enemy1_alive: [[Attack]](Att1)}{else: Attack} - {enemy1_name} {if enemy1_health&gt;=1:{if enemy1_health&lt;=20: &lt;font color=\"red\"&gt;Wounded!&lt;/font&gt;}}{if not enemy1_alive: &lt;font color=\"red\"&gt;DEAD!&lt;/font&gt;}\n\n}\n\n{if enemiesfo=2:\n\n{if enemy1_alive: [[Attack]](Att1)}{else: Attack} - {enemy1_name} {if enemy1_health&gt;=1:{if enemy1_health&lt;=20: &lt;font color=\"red\"&gt;Wounded!&lt;/font&gt;}}{if not enemy1_alive: &lt;font color=\"red\"&gt;DEAD!&lt;/font&gt;}\n\n\n{if enemy2_alive: [[Attack]](Att2)}{else: Attack} - {enemy2_name} {if enemy2_health&gt;=1:{if enemy2_health&lt;=20: &lt;font color=\"red\"&gt;Wounded!&lt;/font&gt;}}{if not enemy2_alive: &lt;font color=\"red\"&gt;DEAD!&lt;/font&gt;}\n\n}\n\n{if enemiesfo=3:\n\n{if enemy1_alive: [[Attack]](Att1)}{else: Attack} - {enemy1_name} {if enemy1_health&gt;=1:{if enemy1_health&lt;=20: &lt;font color=\"red\"&gt;Wounded!&lt;/font&gt;}}{if not enemy1_alive: &lt;font color=\"red\"&gt;DEAD!&lt;/font&gt;}\n\n\n{if enemy2_alive: [[Attack]](Att2)}{else: Attack} - {enemy2_name} {if enemy2_health&gt;=1:{if enemy2_health&lt;=20: &lt;font color=\"red\"&gt;Wounded!&lt;/font&gt;}}{if not enemy2_alive: &lt;font color=\"red\"&gt;DEAD!&lt;/font&gt;}\n\n\n{if enemy3_alive: [[Attack]](Att3)}{else: Attack} - {enemy3_name} {if enemy3_health&gt;=1:{if enemy3_health&lt;=20: &lt;font color=\"red\"&gt;Wounded!&lt;/font&gt;}}{if not enemy3_alive: &lt;font color=\"red\"&gt;DEAD!&lt;/font&gt;}\n\n}\n\n...............................\n\n&lt;b&gt;Your health:&lt;/b&gt; {if health&gt;=1:{if health&lt;=10: &lt;font color=\"red\"&gt; Mortally wounded!&lt;/font&gt;}}{if health&gt;=11:{if health&lt;=25: &lt;font color=\"red\"&gt;Critically wounded!&lt;/font&gt;}}{if health&gt;=26:{if health&lt;=40: &lt;font color=\"red\"&gt;Badly wounded!&lt;/font&gt;}}{if health&gt;=41:{if health&lt;=79: &lt;font color=\"red\"&gt;Wounded!&lt;/font&gt;}}{if health&gt;=80: Fresh!}\n\n[[Att1]]:\n    clearTimeout(squiffy.myVar);\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"my_weaponroll\", randomnumber(1,100));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"my_damage\", randomnumber(9,95));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"enemydexroll\", randomnumber(1,100));\n\n{if my_weaponroll&lt;=@weaponskill:{if enemydexroll&lt;=@enemy1_dex:\n\nYou attack the enemy, but he is able to take cover.\n\n}}\n\n{if my_weaponroll&gt;@weaponskill:\n\nYou miss the enemy!\n\n}\n\n\n{if my_weaponroll&lt;=@weaponskill:{if enemydexroll&gt;@enemy1_dex:\n\n&lt;font color=\"red\"&gt;You aim high and hit the enemy with your {my_weapon}!&lt;/font&gt;\n\n{if my_weapon=knife:{@my_damage-=12}}\n{if my_weapon=club:{@my_damage-=12}}\n{if my_weapon=bat:{@my_damage-=9}}\n{if my_weapon=sword:{@my_damage-=5}}\n{if my_weapon=small pistol:{@my_damage-=10}}\n{if my_weapon=handgun:{@my_damage-=2}}\n{if my_weapon=heavy pistol:{@my_damage+=7}}\n{if my_weapon=shotgun:{@my_damage+=14}}\n{if my_weapon=rifle:{@my_damage+=15}}\n{if my_weapon=automatic rifle:{@my_damage+=18}}\n{if my_weapon=machinegun:{@my_damage+=30}}\n\n{@my_damage-=@enemy1_armorsoak}\n\n{if my_damage&gt;0:{@enemy1_health-=@my_damage}}\n\n&lt;b&gt;Damage output:&lt;/b&gt;{if my_damage&lt;=0: {my_damage} (*Damaged totally soaked by enemy armor*)}{if my_damage&gt;=1:{if my_damage&lt;=5: {my_damage} (*Just a scratch!*)}}{if my_damage&gt;=6:{if my_damage&lt;=15: {my_damage} (Fleshwound)}}{if my_damage&gt;=16:{if my_damage&lt;=30: {my_damage} (Heavy wound)}}{if my_damage&gt;=31: {my_damage} (Mortal wound)}\n\n}}\n\n{if enemy1_health&lt;=0:\n\nThe enemy is mortally wounded and cannot continue the fight!\n\n{@enemies-=1}{@not enemy1_alive}{@enemy1finish}\n\n}\n\n[[Next round]](Enemy_round)\n\n[[Att2]]:\n    clearTimeout(squiffy.myVar);\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"my_weaponroll\", randomnumber(1,100));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"my_damage\", randomnumber(9,95));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"enemydexroll\", randomnumber(1,100));\n\n{if my_weaponroll&lt;=@weaponskill:{if enemydexroll&lt;=@enemy2_dex:\n\nYou attack the enemy, but he is able to dodge.\n\n}}\n\n{if my_weaponroll&gt;@weaponskill:\n\nYou miss the enemy!\n\n}\n\n\n{if my_weaponroll&lt;=@weaponskill:{if enemydexroll&gt;@enemy2_dex:\n\n&lt;font color=\"red\"&gt;You hit the enemy with your {my_weapon}!&lt;/font&gt;\n\n{if my_weapon=knife:{@my_damage-=12}}\n{if my_weapon=club:{@my_damage-=12}}\n{if my_weapon=bat:{@my_damage-=9}}\n{if my_weapon=sword:{@my_damage-=5}}\n{if my_weapon=small pistol:{@my_damage-=10}}\n{if my_weapon=handgun:{@my_damage-=2}}\n{if my_weapon=heavy pistol:{@my_damage+=7}}\n{if my_weapon=shotgun:{@my_damage+=14}}\n{if my_weapon=rifle:{@my_damage+=15}}\n{if my_weapon=automatic rifle:{@my_damage+=18}}\n{if my_weapon=machinegun:{@my_damage+=30}}\n\n{@my_damage-=@enemy2_armorsoak}\n\n{if my_damage&gt;0:{@enemy2_health-=@my_damage}}\n\n&lt;b&gt;Damage output:&lt;/b&gt;{if my_damage&lt;=0: {my_damage} (*Damaged totally soaked by enemy armor*)}{if my_damage&gt;=1:{if my_damage&lt;=5: {my_damage} (*Just a scratch!*)}}{if my_damage&gt;=6:{if my_damage&lt;=15: {my_damage} (Fleshwound)}}{if my_damage&gt;=16:{if my_damage&lt;=30: {my_damage} (Heavy wound)}}{if my_damage&gt;=31: {my_damage} (Mortal wound)}\n\n}}\n\n{if enemy2_health&lt;=0:\n\nThe enemy is mortally wounded and cannot continue the fight!\n\n{@enemies-=1}{@not enemy2_alive}{@enemy2finish}\n\n}\n\n[[Next round]](Enemy_round)\n\n[[Att3]]:\n    clearTimeout(squiffy.myVar);\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"my_weaponroll\", randomnumber(1,100));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"my_damage\", randomnumber(9,95));\n    var randomnumber = function rng(min, max) {\n      return Math.floor(Math.random() * (max - min) + min);\n    }\n\n    set (\"enemydexroll\", randomnumber(1,100));\n\n{if my_weaponroll&lt;=@weaponskill:{if enemydexroll&lt;=@enemy3_dex:\n\nYou attack the enemy, but he is able to take cover.\n\n}}\n\n{if my_weaponroll&gt;@weaponskill:\n\nYou miss the enemy!\n\n}\n\n\n{if my_weaponroll&lt;=@weaponskill:{if enemydexroll&gt;@enemy3_dex:\n\n&lt;font color=\"red\"&gt;You aim high and hit the enemy with your {my_weapon}!&lt;/font&gt;\n\n{if my_weapon=knife:{@my_damage-=12}}\n{if my_weapon=club:{@my_damage-=12}}\n{if my_weapon=bat:{@my_damage-=9}}\n{if my_weapon=sword:{@my_damage-=5}}\n{if my_weapon=small pistol:{@my_damage-=10}}\n{if my_weapon=handgun:{@my_damage-=2}}\n{if my_weapon=heavy pistol:{@my_damage+=7}}\n{if my_weapon=shotgun:{@my_damage+=14}}\n{if my_weapon=rifle:{@my_damage+=15}}\n{if my_weapon=automatic rifle:{@my_damage+=18}}\n{if my_weapon=machinegun:{@my_damage+=30}}\n\n{@my_damage-=@enemy3_armorsoak}\n\n{if my_damage&gt;0:{@enemy3_health-=@my_damage}}\n\n&lt;b&gt;Damage output:&lt;/b&gt;{if my_damage&lt;=0: {my_damage} (*Damaged totally soaked by enemy armor*)}{if my_damage&gt;=1:{if my_damage&lt;=5: {my_damage} (*Just a scratch!*)}}{if my_damage&gt;=6:{if my_damage&lt;=15: {my_damage} (Fleshwound)}}{if my_damage&gt;=16:{if my_damage&lt;=30: {my_damage} (Heavy wound)}}{if my_damage&gt;=31: {my_damage} (Mortal wound)}\n\n}}\n\n{if enemy3_health&lt;=0:\n\nThe enemy is mortally wounded and cannot continue the fight!\n\n{@enemies-=1}{@not enemy3_alive}{@enemy3finish}\n\n}\n\n[[Next round]](Enemy_round)\n\n[[]]:\n@clear\n\n[]:\n@clear\n\n</code></pre>\n\n",
      "PostDate": "2019-01-14T22:34:53.2164628Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "71181004-d6de-4753-bff0-b8c65c963623",
      "UserId": 197771,
      "Username": "LA-Laker",
      "AvatarUrl": "https://secure.gravatar.com/avatar/3af86cbc947df7133ff42a46b8c525b3?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Awesome work! I've ran your code of squiffy scratchpad and it was amazing!",
      "EditableFormat": "markdown",
      "HTML": "<p>Awesome work! I've ran your code of squiffy scratchpad and it was amazing!</p>\n\n",
      "PostDate": "2019-01-28T03:01:11.4688336Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a51c026d-66a3-4a7c-82fa-de981a696e80",
      "UserId": 394011,
      "Username": "Valgardur",
      "AvatarUrl": "https://i.imgur.com/jSYCAV7b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks!\r\n\r\nWorking now on adding allies and ammunition count.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks!</p>\n<p>Working now on adding allies and ammunition count.</p>\n\n",
      "PostDate": "2019-01-31T21:34:58.6684295Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "74cc57b1-1ff2-4a31-aa47-051a069a0deb",
      "UserId": 219718,
      "Username": "MasterFB",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "how would you clear the bottom values? curious for my own work.\r\nAlso love the battle system, seems very versatile!",
      "EditableFormat": "markdown",
      "HTML": "<p>how would you clear the bottom values? curious for my own work.<br>\nAlso love the battle system, seems very versatile!</p>\n\n",
      "PostDate": "2019-02-18T03:39:55.7480562Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8993a2c6-4cda-4bdc-93c6-f69ffbad1e61",
      "UserId": 394011,
      "Username": "Valgardur",
      "AvatarUrl": "https://i.imgur.com/jSYCAV7b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Glad you like it!\r\n\r\nMasterFB: \r\n\r\nOnce you activate the number through a passage/if statement etc it's \"permanent\", you can only change its value, it never goes away. \r\n\r\nThe bottom values I think you're referring to is nothing you'll see in the final game, once you publish it. It's only there for debugging/testing purposes in the editor.  ",
      "EditableFormat": "markdown",
      "HTML": "<p>Glad you like it!</p>\n<p>MasterFB:</p>\n<p>Once you activate the number through a passage/if statement etc it's \"permanent\", you can only change its value, it never goes away.</p>\n<p>The bottom values I think you're referring to is nothing you'll see in the final game, once you publish it. It's only there for debugging/testing purposes in the editor.</p>\n\n",
      "PostDate": "2019-02-18T22:04:56.0091448Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a2322709-0be4-40ba-b121-8753bfe4afbe",
      "UserId": 219718,
      "Username": "MasterFB",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "oh i didn't know that, thanks for the info! literally no coding skills and pretty new to this. \r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>oh i didn't know that, thanks for the info! literally no coding skills and pretty new to this.</p>\n\n",
      "PostDate": "2019-02-18T23:25:34.6006571Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a07f31fc-3b12-48f8-b2c8-4d4a5df24e0d",
      "UserId": 394011,
      "Username": "Valgardur",
      "AvatarUrl": "https://i.imgur.com/dfHtLwOb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It's the same for everyone in the beginning! :) ",
      "EditableFormat": "markdown",
      "HTML": "<p>It's the same for everyone in the beginning! :)</p>\n\n",
      "PostDate": "2019-02-20T10:03:08.5330794Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6d494e89-0a5f-4794-a175-c64710c8bf12",
      "UserId": 403301,
      "Username": "sukalu88",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you for sharing this helpful tutorial, I really like the information you give. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you for sharing this helpful tutorial, I really like the information you give.</p>\n\n",
      "PostDate": "2019-02-26T03:52:38.8512306Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "86e6cea0-164d-41a0-b6ba-34aaabef8a24",
      "UserId": 295583,
      "Username": "Dgiunta100",
      "AvatarUrl": "https://secure.gravatar.com/avatar/6e7e1f8715504afe7ffe32d9803ab48d?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi. This is brilliant. Showed it to one of my students because he is creating choices for how Gilgamesh would fight Humbaba.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi. This is brilliant. Showed it to one of my students because he is creating choices for how Gilgamesh would fight Humbaba.</p>\n\n",
      "PostDate": "2019-04-04T12:47:32.7200314Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
