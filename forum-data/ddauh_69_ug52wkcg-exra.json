{
  "Topic": {
    "TopicId": "ddauh_69_ug52wkcg-exra",
    "ForumId": "10",
    "Title": "Extra dialogue",
    "LastUpdated": "2021-08-01T17:01:45.4689347Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "6d7faaf8-4781-47db-be4f-56d03528dd35",
      "UserId": 335385,
      "Username": "crjensen",
      "AvatarUrl": "https://i.imgur.com/pgHG6PJb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Can I add a number of different dialogues to the same person in the same room?\r\nThere are a number of houses in a city.\r\nThere are inhabitants/persons in each house.\r\nMy users/players can move around the city, visiting all houses, using the Transit System (http://docs.textadventures.co.uk/quest/transit_system.html).\r\n\r\nNow, my users will be visiting the city 7 times, though not during the same playthrough (I'm using this as part of a board game).\r\nEach of the 7 times they visit the city - and the rooms and persons - they are on a new mission, with new dialogues (I'm using the ConvLib library).\r\n\r\nI could of course create one Quest version with all the rooms and persons and the dialogue for the 1st time they visit the city and move around. I could then copy that version 6 times and change the dialogue in each version.\r\nBut: Is there an easier way to do this in Quest, with just one version of the city?\r\nIs it possible to maybe have a start screen where they click what mission they are on and then after that, when they visit the rooms and persons, the dialogue choices (still using ConvLib) change accordingly, because Quest knows they're now on Mission 5?\r\n\r\n\"If Mission 5 then > this dialogue string\"\r\n\"If Mission 3 then > another dialogue string\"\r\n...or something like that?\r\n\r\nThank you.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Can I add a number of different dialogues to the same person in the same room?<br>\nThere are a number of houses in a city.<br>\nThere are inhabitants/persons in each house.<br>\nMy users/players can move around the city, visiting all houses, using the Transit System (http://docs.textadventures.co.uk/quest/transit_system.html).</p>\n<p>Now, my users will be visiting the city 7 times, though not during the same playthrough (I'm using this as part of a board game).<br>\nEach of the 7 times they visit the city - and the rooms and persons - they are on a new mission, with new dialogues (I'm using the ConvLib library).</p>\n<p>I could of course create one Quest version with all the rooms and persons and the dialogue for the 1st time they visit the city and move around. I could then copy that version 6 times and change the dialogue in each version.<br>\nBut: Is there an easier way to do this in Quest, with just one version of the city?<br>\nIs it possible to maybe have a start screen where they click what mission they are on and then after that, when they visit the rooms and persons, the dialogue choices (still using ConvLib) change accordingly, because Quest knows they're now on Mission 5?</p>\n<p>\"If Mission 5 then &gt; this dialogue string\"<br>\n\"If Mission 3 then &gt; another dialogue string\"<br>\n...or something like that?</p>\n<p>Thank you.</p>\n\n",
      "PostDate": "2021-08-01T17:01:45.4689347Z",
      "LastEditDate": "2021-08-01T17:06:27.9768999Z",
      "link": null
    },
    {
      "PostId": "fa7eb519-0d11-4dae-aba9-ed5cc2ad0c99",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello.\r\n\r\n> Can I add a number of different dialogues to the same person in the same room?\r\n\r\nYou should be able to use **if/then** statements to handle it.\r\n\r\nI'll post a blind example of code, which you'll have to interpret to apply in your game.\r\n\r\nIf that doesn't help, you could post one bit of the code your using for one of the character's dialogue, and I could be more specific.\r\n\r\n---\r\n> Is it possible to maybe have a start screen where they click what mission they are on and then after that, when they visit the rooms and persons, the dialogue choices (still using ConvLib) change accordingly, because Quest knows they're now on Mission 5?\r\n\r\nMost assuredly, but I don't quite understand what you're doing. (I also don't know that much about ConvLib, but that probably won't matter on this one.)\r\n\r\nDoes the player start on Mission 1, then progress mission by mission throughout the game until completing the final mission?\r\n\r\nIf yes, the easy way to handle everything would be setting an **integer** (number) attribute on the ```game``` object. I'd call the attribute ```current_mission``` and set it to ```1``` (or ```0```, if the game begins without a current mission).\r\n\r\nThen, in the code for anything which changes depending upon the current mission (like dialogue, etc.), I'd have:\r\n\r\n```\r\nif (game.mission = 1) {\r\n  //Code here for mission 1\r\n}\r\nelse if (game.mission = 2) {\r\n  //Code here for mission 2\r\n}\r\nelse if (game.mission = 3) {\r\n  //Code here for mission 3\r\n}\r\nelse if (game.mission = 4) {\r\n  //Code here for mission 4\r\n}\r\nelse if (game.mission = 5) {\r\n  //Code here for mission 5\r\n}\r\nelse {\r\n  //Code for no current mission\r\n}\r\n```\r\n\r\n---\r\nYou could also use a **switch** script in place of the **if/else**, if you prefer.\r\n\r\n---\r\nOR, you might want the player to actually be able to choose which mission at the beginning of the game.\r\n\r\nIf so, you should be able to just use ```ShowMenu``` or ```show menu``` to give the player the choices.\r\n\r\n---\r\nSorry, I'm not 100% sure what you're wanting to do, but I think I get the general gist.\r\n\r\nIf this doesn't help, or if you just need more help, just let us know.\r\n\r\nI think ConvLib is one of The Pixie's libraries. If so, and I haven't helped you, Pixie will show up sooner or later with the information you seek.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello.</p>\n<blockquote>\n<p>Can I add a number of different dialogues to the same person in the same room?</p>\n</blockquote>\n<p>You should be able to use <strong>if/then</strong> statements to handle it.</p>\n<p>I'll post a blind example of code, which you'll have to interpret to apply in your game.</p>\n<p>If that doesn't help, you could post one bit of the code your using for one of the character's dialogue, and I could be more specific.</p>\n<hr>\n<blockquote>\n<p>Is it possible to maybe have a start screen where they click what mission they are on and then after that, when they visit the rooms and persons, the dialogue choices (still using ConvLib) change accordingly, because Quest knows they're now on Mission 5?</p>\n</blockquote>\n<p>Most assuredly, but I don't quite understand what you're doing. (I also don't know that much about ConvLib, but that probably won't matter on this one.)</p>\n<p>Does the player start on Mission 1, then progress mission by mission throughout the game until completing the final mission?</p>\n<p>If yes, the easy way to handle everything would be setting an <strong>integer</strong> (number) attribute on the <code>game</code> object. I'd call the attribute <code>current_mission</code> and set it to <code>1</code> (or <code>0</code>, if the game begins without a current mission).</p>\n<p>Then, in the code for anything which changes depending upon the current mission (like dialogue, etc.), I'd have:</p>\n<pre><code>if (game.mission = 1) {\n  //Code here for mission 1\n}\nelse if (game.mission = 2) {\n  //Code here for mission 2\n}\nelse if (game.mission = 3) {\n  //Code here for mission 3\n}\nelse if (game.mission = 4) {\n  //Code here for mission 4\n}\nelse if (game.mission = 5) {\n  //Code here for mission 5\n}\nelse {\n  //Code for no current mission\n}\n</code></pre>\n<hr>\n<p>You could also use a <strong>switch</strong> script in place of the <strong>if/else</strong>, if you prefer.</p>\n<hr>\n<p>OR, you might want the player to actually be able to choose which mission at the beginning of the game.</p>\n<p>If so, you should be able to just use <code>ShowMenu</code> or <code>show menu</code> to give the player the choices.</p>\n<hr>\n<p>Sorry, I'm not 100% sure what you're wanting to do, but I think I get the general gist.</p>\n<p>If this doesn't help, or if you just need more help, just let us know.</p>\n<p>I think ConvLib is one of The Pixie's libraries. If so, and I haven't helped you, Pixie will show up sooner or later with the information you seek.</p>\n\n",
      "PostDate": "2021-08-05T23:52:26.7313868Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f6eb0a44-b71b-4330-b520-f1e1fcf05ff0",
      "UserId": 335385,
      "Username": "crjensen",
      "AvatarUrl": "https://i.imgur.com/pgHG6PJb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "K.V., thank you. I'll try to clarify:\r\nI'm a teacher. I have a curriculum where my students go on 7 \"missions\" during the year.\r\nI have created a Quest game with a lot of rooms, like a map of a big city.\r\nAs part of my teaching the students will go on these 7 mission in this Quest \"city.\"\r\nI teach the students and then, at some point, ask them to go on Mission 1 on the Quest page (I'll probably have them scan a QR code with their phones).\r\nThey then move around, visiting houses/rooms, asking questions, until they find what they are looking for.\r\nThat concludes the first mission.\r\nA week later I ask them again to open the Quest page, but this time not on the same Mission as last week, but Mission 2. It's the same \"city\", with the same inhabitants in the rooms, but with new dialogue because it's a new mission.\r\n\r\nNow, I have created all the rooms/houses and placed characters in them.\r\nMy question is: Can I, using ConvLib, just have one Quest file where the character dialogues are different depending on what Mission my students are on (hence the need to maybe have a start screen where they enter what Mission they're on), or do I have to create 7 copies of my Quest file to give the characters in the rooms 7 different dialogue strings.\r\n\r\nCarsten.",
      "EditableFormat": "markdown",
      "HTML": "<p>K.V., thank you. I'll try to clarify:<br>\nI'm a teacher. I have a curriculum where my students go on 7 \"missions\" during the year.<br>\nI have created a Quest game with a lot of rooms, like a map of a big city.<br>\nAs part of my teaching the students will go on these 7 mission in this Quest \"city.\"<br>\nI teach the students and then, at some point, ask them to go on Mission 1 on the Quest page (I'll probably have them scan a QR code with their phones).<br>\nThey then move around, visiting houses/rooms, asking questions, until they find what they are looking for.<br>\nThat concludes the first mission.<br>\nA week later I ask them again to open the Quest page, but this time not on the same Mission as last week, but Mission 2. It's the same \"city\", with the same inhabitants in the rooms, but with new dialogue because it's a new mission.</p>\n<p>Now, I have created all the rooms/houses and placed characters in them.<br>\nMy question is: Can I, using ConvLib, just have one Quest file where the character dialogues are different depending on what Mission my students are on (hence the need to maybe have a start screen where they enter what Mission they're on), or do I have to create 7 copies of my Quest file to give the characters in the rooms 7 different dialogue strings.</p>\n<p>Carsten.</p>\n\n",
      "PostDate": "2021-08-06T07:55:17.8778811Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "42eb85f8-25ec-4d63-99ad-5a3452ad5426",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> A week later I ask them again to open the Quest page, but this time not on the same Mission as last week, but Mission 2. \r\n\r\nNow you got me thinking of weird ways to make sure they select the right mission :)\r\nIf  you're using a QR code, you could add something like `#mission1` to the end of the URI and use javascript to access that within the game. Or if it's a week later, you could have it choose a mission based on the date.\r\n\r\nOr, of course, just give them a menu to choose the mission.\r\n\r\nBut whichever way you do it, I assume you're setting an attribute to the current mission.\r\n\r\nYou could always use if statements as KV suggests; but if what you're doing is showing and hiding topics, it might be easier to do this when the mission is first selected.\r\n\r\nSo you could give each topic an extra attribute called \"mission\" which is a string containing something like `5` or `1;2`.\r\nAnd then after choosing the mission, you could have a script like:\r\n<pre><code>foreach (topic, FilterByType (AllObjects(), \"topic\")) {\r\n  if (HasString (topic, \"mission\")) {\r\n    if (not ListContains (Split (topic.mission), <em style=\"color: blue\">mission</em>)) {\r\n      HideTopic (topic)\r\n    }\r\n  }\r\n}</pre></code>\r\n\r\nThis will disable any topics whose `mission` attribute doesn't match the <code  style=\"color: blue\">mission</code> variable.\r\n\r\nIf you wanted to hide NPCs and objects as well, you  could change it to:\r\n<pre><code>foreach (obj, AllObjects ()) {\r\n  if (HasString (obj, \"mission\")) {\r\n    if (not ListContains (Split (obj.mission), <em style=\"color: blue\">mission</em>)) {\r\n      if (DoesInherit (obj, \"topic\")) {\r\n        HideTopic (obj)\r\n      }\r\n      else {\r\n        obj.visible = false\r\n      }\r\n    }\r\n  }\r\n}</pre></code>\r\nThis lets you give both topics and objects a `mission` attribute; any object with a mission attribute will be hidden unless the appropriate mission is selected.\r\nNote that if you want to use this to hide exits, you would want to change `AllObjects ()` to `ListCombine (AllObjects(), AllExits())` and I think it should work fine.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>A week later I ask them again to open the Quest page, but this time not on the same Mission as last week, but Mission 2.</p>\n</blockquote>\n<p>Now you got me thinking of weird ways to make sure they select the right mission :)<br>\nIf  you're using a QR code, you could add something like <code>#mission1</code> to the end of the URI and use javascript to access that within the game. Or if it's a week later, you could have it choose a mission based on the date.</p>\n<p>Or, of course, just give them a menu to choose the mission.</p>\n<p>But whichever way you do it, I assume you're setting an attribute to the current mission.</p>\n<p>You could always use if statements as KV suggests; but if what you're doing is showing and hiding topics, it might be easier to do this when the mission is first selected.</p>\n<p>So you could give each topic an extra attribute called \"mission\" which is a string containing something like <code>5</code> or <code>1;2</code>.<br>\nAnd then after choosing the mission, you could have a script like:</p>\n<pre><code>foreach (topic, FilterByType (AllObjects(), \"topic\")) {\n  if (HasString (topic, \"mission\")) {\n    if (not ListContains (Split (topic.mission), <em style=\"color: blue\">mission</em>)) {\n      HideTopic (topic)\n    }\n  }\n}</code></pre>\n<p>This will disable any topics whose <code>mission</code> attribute doesn't match the <code style=\"color: blue\">mission</code> variable.</p>\n<p>If you wanted to hide NPCs and objects as well, you  could change it to:</p>\n<pre><code>foreach (obj, AllObjects ()) {\n  if (HasString (obj, \"mission\")) {\n    if (not ListContains (Split (obj.mission), <em style=\"color: blue\">mission</em>)) {\n      if (DoesInherit (obj, \"topic\")) {\n        HideTopic (obj)\n      }\n      else {\n        obj.visible = false\n      }\n    }\n  }\n}</code></pre>\n<p>This lets you give both topics and objects a <code>mission</code> attribute; any object with a mission attribute will be hidden unless the appropriate mission is selected.<br>\nNote that if you want to use this to hide exits, you would want to change <code>AllObjects ()</code> to <code>ListCombine (AllObjects(), AllExits())</code> and I think it should work fine.</p>\n\n",
      "PostDate": "2021-08-06T11:04:44.3891273Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "45d68074-56df-4d3f-a5ca-5f537b77596e",
      "UserId": 335385,
      "Username": "crjensen",
      "AvatarUrl": "https://i.imgur.com/pgHG6PJb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Amazing! Thank you, mrangel.\r\nAs a test I have created two conversations for a character in one of the rooms and added a 'mission' attribute to each ('1' for the first conversation, '2' for the second).\r\nI'm not a programmer, so what would a simple showMenu script look like, when entering the game, that lets the user choose between Mission 1, 2, 3, 4, 5, 6, or 7 and then Quest knows that the 'mission' attribute now equals the number they chose?\r\nAnd is it possible to show a dropdown menu where the user chooses a number between 1 and 7?\r\n\r\nAfter choosing the mission I'll add the foreach script you suggested.\r\n\r\nThank you!",
      "EditableFormat": "markdown",
      "HTML": "<p>Amazing! Thank you, mrangel.<br>\nAs a test I have created two conversations for a character in one of the rooms and added a 'mission' attribute to each ('1' for the first conversation, '2' for the second).<br>\nI'm not a programmer, so what would a simple showMenu script look like, when entering the game, that lets the user choose between Mission 1, 2, 3, 4, 5, 6, or 7 and then Quest knows that the 'mission' attribute now equals the number they chose?<br>\nAnd is it possible to show a dropdown menu where the user chooses a number between 1 and 7?</p>\n<p>After choosing the mission I'll add the foreach script you suggested.</p>\n<p>Thank you!</p>\n\n",
      "PostDate": "2021-08-06T22:10:03.7839128Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a2264374-831d-4cae-8875-26d457641b6e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I'm not a programmer, so what would a simple showMenu script look like, when entering the game, that lets the user choose between Mission 1, 2, 3, 4, 5, 6, or 7 and then Quest knows that the 'mission' attribute now equals the number they chose?\r\n\r\nI'd say something like:\r\n```\r\nShowMenu (\"Which mission is this?\", Split (\"1;2;3;4;5;6;7\"), false) {\r\n  game.currentmission = result\r\n  foreach (obj, AllObjects ()) {\r\n    if (HasString (obj, \"mission\")) {\r\n      if (not ListContains (Split (obj.mission), result)) {\r\n        if (DoesInherit (obj, \"topic\")) {\r\n          HideTopic (obj)\r\n        }\r\n        else {\r\n          obj.visible = false\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // code here to move the player to the appropriate starting room if necessary\r\n}\r\n```\r\n\r\nI set the attribute `game.currentmission` in case you want to use the attribute for anything later in the game.\r\n\r\nA lot of games start the player in an empty \"menu room\", so that objects visible in the starting room don't show up in the sidebar while they're handling menus like this. If you do that, the last instruction in the script would simply be moving the player to the start room",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I'm not a programmer, so what would a simple showMenu script look like, when entering the game, that lets the user choose between Mission 1, 2, 3, 4, 5, 6, or 7 and then Quest knows that the 'mission' attribute now equals the number they chose?</p>\n</blockquote>\n<p>I'd say something like:</p>\n<pre><code>ShowMenu (\"Which mission is this?\", Split (\"1;2;3;4;5;6;7\"), false) {\n  game.currentmission = result\n  foreach (obj, AllObjects ()) {\n    if (HasString (obj, \"mission\")) {\n      if (not ListContains (Split (obj.mission), result)) {\n        if (DoesInherit (obj, \"topic\")) {\n          HideTopic (obj)\n        }\n        else {\n          obj.visible = false\n        }\n      }\n    }\n  }\n  // code here to move the player to the appropriate starting room if necessary\n}\n</code></pre>\n<p>I set the attribute <code>game.currentmission</code> in case you want to use the attribute for anything later in the game.</p>\n<p>A lot of games start the player in an empty \"menu room\", so that objects visible in the starting room don't show up in the sidebar while they're handling menus like this. If you do that, the last instruction in the script would simply be moving the player to the start room</p>\n\n",
      "PostDate": "2021-08-06T22:52:30.1788083Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fd7a968b-2dcb-4632-99f1-cecc77edef10",
      "UserId": 335385,
      "Username": "crjensen",
      "AvatarUrl": "https://i.imgur.com/pgHG6PJb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It works... almost!\r\nIf I use the menu and choose 'Mission 2' and then go to my test room where I have created two conversations, Quest correctly only shows the conversation for Mission 2.\r\nThat is awesome, but I think I may have inserted your code the wrong place because I keep getting this error:\r\n\r\nError running script: Error compiling expression 'not ListContains (Split (topic.mission), mission)': Unknown object or variable 'mission'\r\n\r\nI tried to insert the code in two different places:\r\nUnder \"game > Start scripts\". That gave the above error message. I then inserted it in the first room where the player is under \"After entering the room -scripts\". Same error message.\r\n\r\nThis is what I inserted:\r\nShowMenu (\"Which mission is this?\", Split (\"1;2;3;4;5;6;7\"), false) {\r\n```ShowMenu (\"Which mission is this?\", Split (\"1;2;3;4;5;6;7\"), false) {\r\n  game.currentmission = result\r\n  foreach (obj, AllObjects ()) {\r\n    if (HasString (obj, \"mission\")) {\r\n      if (not ListContains (Split (obj.mission), result)) {\r\n        if (DoesInherit (obj, \"topic\")) {\r\n          HideTopic (obj)\r\n        }\r\n        else {\r\n          obj.visible = false\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // code here to move the player to the appropriate starting room if necessary\r\n}\r\nforeach (topic, FilterByType (AllObjects(), \"topic\")) {\r\n  if (HasString (topic, \"mission\")) {\r\n    if (not ListContains (Split (topic.mission), mission)) {\r\n      HideTopic (topic)\r\n    }\r\n  }\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>It works... almost!<br>\nIf I use the menu and choose 'Mission 2' and then go to my test room where I have created two conversations, Quest correctly only shows the conversation for Mission 2.<br>\nThat is awesome, but I think I may have inserted your code the wrong place because I keep getting this error:</p>\n<p>Error running script: Error compiling expression 'not ListContains (Split (topic.mission), mission)': Unknown object or variable 'mission'</p>\n<p>I tried to insert the code in two different places:<br>\nUnder \"game &gt; Start scripts\". That gave the above error message. I then inserted it in the first room where the player is under \"After entering the room -scripts\". Same error message.</p>\n<p>This is what I inserted:<br>\nShowMenu (\"Which mission is this?\", Split (\"1;2;3;4;5;6;7\"), false) {</p>\n<pre><code>  game.currentmission = result\n  foreach (obj, AllObjects ()) {\n    if (HasString (obj, \"mission\")) {\n      if (not ListContains (Split (obj.mission), result)) {\n        if (DoesInherit (obj, \"topic\")) {\n          HideTopic (obj)\n        }\n        else {\n          obj.visible = false\n        }\n      }\n    }\n  }\n  // code here to move the player to the appropriate starting room if necessary\n}\nforeach (topic, FilterByType (AllObjects(), \"topic\")) {\n  if (HasString (topic, \"mission\")) {\n    if (not ListContains (Split (topic.mission), mission)) {\n      HideTopic (topic)\n    }\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2021-08-06T23:19:47.1298951Z",
      "LastEditDate": "2021-08-06T23:23:45.653118Z",
      "link": null
    },
    {
      "PostId": "2af87cea-e24e-4488-b474-58730ebb98dc",
      "UserId": 335385,
      "Username": "crjensen",
      "AvatarUrl": "https://i.imgur.com/pgHG6PJb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Aah, my bad. I added too much code. I just removed this:\r\n\r\nforeach (topic, FilterByType (AllObjects(), \"topic\")) {\r\n  if (HasString (topic, \"mission\")) {\r\n    if (not ListContains (Split (topic.mission), mission)) {\r\n      HideTopic (topic)\r\n    }\r\n  }\r\n}",
      "EditableFormat": "markdown",
      "HTML": "<p>Aah, my bad. I added too much code. I just removed this:</p>\n<p>foreach (topic, FilterByType (AllObjects(), \"topic\")) {<br>\nif (HasString (topic, \"mission\")) {<br>\nif (not ListContains (Split (topic.mission), mission)) {<br>\nHideTopic (topic)<br>\n}<br>\n}<br>\n}</p>\n\n",
      "PostDate": "2021-08-07T08:45:58.4794679Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3dd84338-3851-49dd-96fc-bb358966f161",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Either location should work.\r\n\r\nThe first script I posted would go inside the ShowMenu block if you're using a menu. So when I posted the ShowMenu script in my latest post, I included it (just with `mission` changed to `result` because it's a menu)\r\n\r\nThe error is coming because you have a duplicate copy of the script.\r\n<pre><code>ShowMenu (\"Which mission is this?\", Split (\"1;2;3;4;5;6;7\"), false) {\r\n\r\n  game.currentmission = result\r\n  foreach (obj, AllObjects ()) {\r\n    if (HasString (obj, \"mission\")) {\r\n      if (not ListContains (Split (obj.mission), result)) {\r\n        if (DoesInherit (obj, \"topic\")) {\r\n          HideTopic (obj)\r\n        }\r\n        else {\r\n          obj.visible = false\r\n        }\r\n      }\r\n    }\r\n  }\r\n  // code here to move the player to the appropriate starting room if necessary\r\n}\r\n<s>foreach (topic, FilterByType (AllObjects(), \"topic\")) {\r\n  if (HasString (topic, \"mission\")) {\r\n    if (not ListContains (Split (topic.mission), mission)) {\r\n      HideTopic (topic)\r\n    }\r\n  }\r\n}</s></code></pre>\r\n\r\nAlso, because it's been buzzing around in my head for a while, I thought I'd give this a shot off the top of my head:\r\n```\r\nJS.eval(\"$.each(window.location.hash.match(/(?<=^#mission)\\\\d+/i), function (a,i) { ASLEvent('ShowMenuResponse',i);})\")\r\n```\r\nPlaced immediately after the ShowMenu block (not inside it), it should cause a menu option to be chosen automatically if you add `#mission2` or similar to the end of the game's address. That way if you're giving students a QR code for the game, you can make a code which selects the right mission automatically.",
      "EditableFormat": "markdown",
      "HTML": "<p>Either location should work.</p>\n<p>The first script I posted would go inside the ShowMenu block if you're using a menu. So when I posted the ShowMenu script in my latest post, I included it (just with <code>mission</code> changed to <code>result</code> because it's a menu)</p>\n<p>The error is coming because you have a duplicate copy of the script.</p>\n<pre><code>ShowMenu (\"Which mission is this?\", Split (\"1;2;3;4;5;6;7\"), false) {\n\n  game.currentmission = result\n  foreach (obj, AllObjects ()) {\n    if (HasString (obj, \"mission\")) {\n      if (not ListContains (Split (obj.mission), result)) {\n        if (DoesInherit (obj, \"topic\")) {\n          HideTopic (obj)\n        }\n        else {\n          obj.visible = false\n        }\n      }\n    }\n  }\n  // code here to move the player to the appropriate starting room if necessary\n}\n<s>foreach (topic, FilterByType (AllObjects(), \"topic\")) {\n  if (HasString (topic, \"mission\")) {\n    if (not ListContains (Split (topic.mission), mission)) {\n      HideTopic (topic)\n    }\n  }\n}</s></code></pre>\n<p>Also, because it's been buzzing around in my head for a while, I thought I'd give this a shot off the top of my head:</p>\n<pre><code>JS.eval(\"$.each(window.location.hash.match(/(?&lt;=^#mission)\\\\d+/i), function (a,i) { ASLEvent('ShowMenuResponse',i);})\")\n</code></pre>\n<p>Placed immediately after the ShowMenu block (not inside it), it should cause a menu option to be chosen automatically if you add <code>#mission2</code> or similar to the end of the game's address. That way if you're giving students a QR code for the game, you can make a code which selects the right mission automatically.</p>\n\n",
      "PostDate": "2021-08-07T09:05:28.8411381Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a1103cd9-38ed-42e6-ae17-b21c78a69053",
      "UserId": 335385,
      "Username": "crjensen",
      "AvatarUrl": "https://i.imgur.com/pgHG6PJb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel, thank you for going above and beyond on this!\r\nI appreciate your help and the people on this Forum.\r\nI look forward to testing your JavaScript later today when I create a couple of QR codes.\r\n\r\nCarsten.",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel, thank you for going above and beyond on this!<br>\nI appreciate your help and the people on this Forum.<br>\nI look forward to testing your JavaScript later today when I create a couple of QR codes.</p>\n<p>Carsten.</p>\n\n",
      "PostDate": "2021-08-07T09:09:11.4226078Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1b8a96a1-32ca-4a75-9180-92740751dc28",
      "UserId": 335385,
      "Username": "crjensen",
      "AvatarUrl": "https://i.imgur.com/pgHG6PJb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel, I couldn't wait so I tested your JavaScript right away:\r\nIt's working!\r\nI uploaded the game, and when I add #mission2 or similar to the URL the script makes sure that the correct dialogue strings are opened in the test room.\r\n\r\nThank you again!",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel, I couldn't wait so I tested your JavaScript right away:<br>\nIt's working!<br>\nI uploaded the game, and when I add #mission2 or similar to the URL the script makes sure that the correct dialogue strings are opened in the test room.</p>\n<p>Thank you again!</p>\n\n",
      "PostDate": "2021-08-07T09:18:20.3755512Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
