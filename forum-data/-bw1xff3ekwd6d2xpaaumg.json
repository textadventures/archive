{
  "Topic": {
    "TopicId": "-bw1xff3ekwd6d2xpaaumg",
    "ForumId": "10",
    "Title": "Want to see what kicked my butt for two hours?!?",
    "LastUpdated": "2021-05-08T23:44:20.0047031Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "83834ab4-3202-43de-9e16-bb826daa59da",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is in a library file I'm writing which is 879 lines at the moment. This bit of code spans from line 639 - 649.\r\n\r\n```\r\n\r\n  <object name=\"curtains\">\r\n    <parent type=\"object\">Bedroom</parent>\r\n    <alias>your curtains</alias>\r\n    <synonym>curtain curtains shade shades</synonym>\r\n    <adjective>your</adjective>\r\n    <scenery/>\r\n    <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n    <action type=\"routine\">\r\n      return(CurtainsF(cmd,var))\r\n    </action>\r\n  </object>\"\r\n\r\n\r\n```\r\n\r\n---\r\nThe editor wouldn't even load the game.\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/117556272-ac422e00-b02c-11eb-8d79-105e5bc60b73.png)\r\n\r\n---\r\nI commented code out from where I knew it had worked to the end of the file and moved it down block by block until I found the problem.  (Honestly, I went back and forth past it, and then around and eventually just below it a few times before I saw the stupid thing that was driving me INSANE.)\r\n\r\nThe problem is right there in front of you!\r\n\r\nCan YOU find it?!?  (Bwahahahaha!)\r\n\r\n(If you spot it immediately, give me a handicap, as it was buried in nearly 900 lines of code.)",
      "EditableFormat": "markdown",
      "HTML": "<p>This is in a library file I'm writing which is 879 lines at the moment. This bit of code spans from line 639 - 649.</p>\n<pre><code>\n  &lt;object name=\"curtains\"&gt;\n    &lt;parent type=\"object\"&gt;Bedroom&lt;/parent&gt;\n    &lt;alias&gt;your curtains&lt;/alias&gt;\n    &lt;synonym&gt;curtain curtains shade shades&lt;/synonym&gt;\n    &lt;adjective&gt;your&lt;/adjective&gt;\n    &lt;scenery/&gt;\n    &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n    &lt;action type=\"routine\"&gt;\n      return(CurtainsF(cmd,var))\n    &lt;/action&gt;\n  &lt;/object&gt;\"\n\n\n</code></pre>\n<hr>\n<p>The editor wouldn't even load the game.</p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/117556272-ac422e00-b02c-11eb-8d79-105e5bc60b73.png\" alt=\"image\"></p>\n<hr>\n<p>I commented code out from where I knew it had worked to the end of the file and moved it down block by block until I found the problem.  (Honestly, I went back and forth past it, and then around and eventually just below it a few times before I saw the stupid thing that was driving me INSANE.)</p>\n<p>The problem is right there in front of you!</p>\n<p>Can YOU find it?!?  (Bwahahahaha!)</p>\n<p>(If you spot it immediately, give me a handicap, as it was buried in nearly 900 lines of code.)</p>\n\n",
      "PostDate": "2021-05-08T23:44:20.0047031Z",
      "LastEditDate": "2021-05-08T23:46:28.2641985Z",
      "link": null
    },
    {
      "PostId": "654ba90e-197d-4b1d-a8ec-e226b920e517",
      "UserId": 5574,
      "Username": "R2T1",
      "AvatarUrl": "http://i.imgur.com/32ogfqMb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm not sure, but to me it looks like you have ```<scenery/>```  on line 6 without a matching opening ```<scenery>```\r\n or  ```<scenery/>```  should be ```</scenery> ```.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm not sure, but to me it looks like you have <code>&lt;scenery/&gt;</code>  on line 6 without a matching opening <code>&lt;scenery&gt;</code><br>\nor  <code>&lt;scenery/&gt;</code>  should be <code>&lt;/scenery&gt;</code>.</p>\n\n",
      "PostDate": "2021-05-09T01:19:06.7776992Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e08aa5e0-2c03-468c-b3aa-430534313a89",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Good try, but ```<scenery />``` denotes a boolean set to true.  It is allowed.  (I had to double-check that myself. I thought maybe this was the issue at one point.)\r\n\r\nThat is the same thing as ```<scenery type=\"boolean\">true</scenery>```.\r\n\r\n---\r\nI'll make it even harder.\r\n\r\nClick to see the same code after I fixed it:\r\n\r\n<details>\r\n\r\n\r\n```\r\n\r\n\r\n  <object name=\"curtains\">\r\n    <parent type=\"object\">Bedroom</parent>\r\n    <alias>your curtains</alias>\r\n    <synonym>curtain curtains shade shades</synonym>\r\n    <adjective>your</adjective>\r\n    <scenery/>\r\n    <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n    <action type=\"routine\">\r\n      return(CurtainsF(cmd,var))\r\n    </action>\r\n  </object>\r\n\r\n```\r\n\r\n</details>\r\n\r\n---\r\nHINT\r\n\r\nIt's a stupid thing.  It got there because I was using a text editor that was automatically filling things in while coding, and I didn't notice it when things went haywire.",
      "EditableFormat": "markdown",
      "HTML": "<p>Good try, but <code>&lt;scenery /&gt;</code> denotes a boolean set to true.  It is allowed.  (I had to double-check that myself. I thought maybe this was the issue at one point.)</p>\n<p>That is the same thing as <code>&lt;scenery type=\"boolean\"&gt;true&lt;/scenery&gt;</code>.</p>\n<hr>\n<p>I'll make it even harder.</p>\n<p>Click to see the same code after I fixed it:</p>\n<details>\n<pre><code>\n\n  &lt;object name=\"curtains\"&gt;\n    &lt;parent type=\"object\"&gt;Bedroom&lt;/parent&gt;\n    &lt;alias&gt;your curtains&lt;/alias&gt;\n    &lt;synonym&gt;curtain curtains shade shades&lt;/synonym&gt;\n    &lt;adjective&gt;your&lt;/adjective&gt;\n    &lt;scenery/&gt;\n    &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n    &lt;action type=\"routine\"&gt;\n      return(CurtainsF(cmd,var))\n    &lt;/action&gt;\n  &lt;/object&gt;\n\n</code></pre>\n</details>\n<hr>\n<p>HINT</p>\n<p>It's a stupid thing.  It got there because I was using a text editor that was automatically filling things in while coding, and I didn't notice it when things went haywire.</p>\n\n",
      "PostDate": "2021-05-09T01:25:57.6293138Z",
      "LastEditDate": "2021-05-09T01:27:34.3181395Z",
      "link": null
    },
    {
      "PostId": "2c87467e-32e4-4c51-9f44-b1917d3f17bb",
      "UserId": 5574,
      "Username": "R2T1",
      "AvatarUrl": "http://i.imgur.com/32ogfqMb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Bummer. A simple closing quote. No wonder it took a while to find it. It would be one of thse things that you see but don't see.\r\nReminds me of the old dys of typing in listings from magazines and then debugging them. Sometime they were my mistakes as I typed and a few were caused by the scanners/typesetting of the listing.\r\n\r\nAt my age, my eyesight can also be a problem. But that is the subject for another forum.",
      "EditableFormat": "markdown",
      "HTML": "<p>Bummer. A simple closing quote. No wonder it took a while to find it. It would be one of thse things that you see but don't see.<br>\nReminds me of the old dys of typing in listings from magazines and then debugging them. Sometime they were my mistakes as I typed and a few were caused by the scanners/typesetting of the listing.</p>\n<p>At my age, my eyesight can also be a problem. But that is the subject for another forum.</p>\n\n",
      "PostDate": "2021-05-09T02:49:12.3917613Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e57bd6c4-f318-49ec-a53e-a0ab5b288546",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> At my age, my eyesight can also be a problem.\r\n\r\nActually, I didn't see the ```\"``` until I hooked my laptop up to my TV via HDMI. (I need new glasses.)\r\n\r\nThe TV is too small for movies, but too big for computing.\r\n\r\n...but it sure came in handy in this particular instance!",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>At my age, my eyesight can also be a problem.</p>\n</blockquote>\n<p>Actually, I didn't see the <code>\"</code> until I hooked my laptop up to my TV via HDMI. (I need new glasses.)</p>\n<p>The TV is too small for movies, but too big for computing.</p>\n<p>...but it sure came in handy in this particular instance!</p>\n\n",
      "PostDate": "2021-05-09T03:10:49.8196404Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "20b9371b-7bf5-427b-990c-f193b1cfc68f",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Editors that add a second quote character really annoy me too.\r\n\r\nWhat is `type=\"routine\"`? At first I thought it might be that?\r\n\r\nIn situations like this, you might find it useful to use an XML checker.",
      "EditableFormat": "markdown",
      "HTML": "<p>Editors that add a second quote character really annoy me too.</p>\n<p>What is <code>type=\"routine\"</code>? At first I thought it might be that?</p>\n<p>In situations like this, you might find it useful to use an XML checker.</p>\n\n",
      "PostDate": "2021-05-09T07:16:18.5624664Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "45d47c9c-da58-4e5b-80b2-c5364321c116",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Example XML validator:\r\nhttps://www.xmlvalidation.com/\r\n\r\nYou can paste in your whole file or just an element as you did here.",
      "EditableFormat": "markdown",
      "HTML": "<p>Example XML validator:<br>\nhttps://www.xmlvalidation.com/</p>\n<p>You can paste in your whole file or just an element as you did here.</p>\n\n",
      "PostDate": "2021-05-09T07:17:10.3580263Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0b5d3a42-1672-46ce-a1c4-e17e30d2d84f",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> What is `type=\"routine\"`? At first I thought it might be that?\r\n\r\nI would assume `routine` is the name of a delegate; although I'm not sure why that would be beneficial in this case.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>What is <code>type=\"routine\"</code>? At first I thought it might be that?</p>\n</blockquote>\n<p>I would assume <code>routine</code> is the name of a delegate; although I'm not sure why that would be beneficial in this case.</p>\n\n",
      "PostDate": "2021-05-09T12:17:44.3523332Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f362cd40-bec6-4700-ad4a-f22356e48750",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> What is ```type=\"routine\"```? At first I thought it might be that?\r\n\r\nAs mrangel assumes:\r\n\r\n> ```routine``` is the name of a delegate\r\n\r\nThat is another good guess, but the editor actually gave me a detailed error when I didn't have that delegate's code in the proper place. (It was initially in the game's main code, but if a library uses it, it has to be read before the code that uses it in the library.)\r\n\r\n---\r\n> Example XML validator\r\n\r\nCool!\r\n\r\nI didn't know these existed!\r\n\r\n---\r\n> I'm not sure why [a delegate] would be beneficial in this case.\r\n\r\nIt might not be, but it's <s>the only way</s> the easiest way I could find to handle the game I'm porting.\r\n\r\n```CurtainsF``` is a function that may or may not handle verbs for the curtains.\r\n\r\nIf ```CurtainsF``` does not find a situation where it handles any verbs during a command, it will not return ```true``` and the default stuff will handle the command.\r\n\r\nIt's like a way to kind of set up verbs on an object, but not really.\r\n\r\nIf a verb script could return a boolean, I wouldn't need the delegate.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>What is <code>type=\"routine\"</code>? At first I thought it might be that?</p>\n</blockquote>\n<p>As mrangel assumes:</p>\n<blockquote>\n<p><code>routine</code> is the name of a delegate</p>\n</blockquote>\n<p>That is another good guess, but the editor actually gave me a detailed error when I didn't have that delegate's code in the proper place. (It was initially in the game's main code, but if a library uses it, it has to be read before the code that uses it in the library.)</p>\n<hr>\n<blockquote>\n<p>Example XML validator</p>\n</blockquote>\n<p>Cool!</p>\n<p>I didn't know these existed!</p>\n<hr>\n<blockquote>\n<p>I'm not sure why [a delegate] would be beneficial in this case.</p>\n</blockquote>\n<p>It might not be, but it's <s>the only way</s> the easiest way I could find to handle the game I'm porting.</p>\n<p><code>CurtainsF</code> is a function that may or may not handle verbs for the curtains.</p>\n<p>If <code>CurtainsF</code> does not find a situation where it handles any verbs during a command, it will not return <code>true</code> and the default stuff will handle the command.</p>\n<p>It's like a way to kind of set up verbs on an object, but not really.</p>\n<p>If a verb script could return a boolean, I wouldn't need the delegate.</p>\n\n",
      "PostDate": "2021-05-09T13:12:04.9347607Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "65eea9b3-f643-4a7d-819f-7220522666c5",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\n  <function name=\"CurtainsF\" parameters=\"cmd,var\" type=\"boolean\">\r\n    if(cmd = open or cmd = look_inside_cmd){\r\n      bulldozer.visible = true\r\n      msg(\"As you part \" + GetDisplayAlias(curtains) + \" you see that i{global.nice_day}, and a large yellow \" + GetDisplayAlias(bulldozer) + \" is advancing on \" + GetDisplayAlias(home) + \".\")\r\n      return (true)\r\n    }\r\n    return (false)\r\n  </function>\r\n```\r\n\r\n---\r\nIf ```object```, ```object1```, or ```object2``` has the attribute \"action\", the action delegate . . .  Well, I'll let that bit of code explain itself:\r\n\r\n```\r\n      if (HasScript(game.pov.currentcommandpattern, \"script\")) {\r\n        handled = false\r\n        // This is the bit that actually runs the commands\r\n        if (global.dont_flag) {\r\n          DontF (game.pov.currentcommandpattern, game.pov.currentcommandresolvedelements)\r\n          handled = true\r\n        }\r\n        else if (objFound) {\r\n          // msg(TypeOf(obj))\r\n          if (IsDefined(\"obj2\")) {\r\n            if (HasFlag(obj2,\"unimportant\")) {\r\n              handled = true\r\n              UnimportantThingF\r\n            }\r\n            else if (HasDelegateImplementation(obj2,\"action\")) {\r\n              handled = RunDelegateFunction(obj2,\"action\", game.pov.currentcommandpattern, game.pov.currentcommandresolvedelements)\r\n            }\r\n          }\r\n          if (not handled and TypeOf(obj) = \"objectlist\") {\r\n            // msg(\"multiple\")\r\n            foreach (o, obj) {\r\n              if (HasFlag(o, \"unimportant\")) {\r\n                Tell (GetDisplayAias + \": \")\r\n                UnimportantThingF\r\n                handled = true\r\n              }\r\n              else if (HasDelegateImplementation(o,\"action\")) {\r\n                // msg (\"ResolveNextName found 'action': \" + o)\r\n                handled = RunDelegateFunction(o,\"action\", game.pov.currentcommandpattern, game.pov.currentcommandresolvedelements)\r\n              }\r\n              else if (not handled) {\r\n                handled = true\r\n                do (game.pov.currentcommandpattern, \"script\", game.pov.currentcommandresolvedelements)\r\n              }\r\n            }\r\n          }\r\n          else if (not handled and HasDelegateImplementation(obj,\"action\")) {\r\n            // msg (\"ResolveNextName found 'action': \" + obj)\r\n            handled = RunDelegateFunction(obj,\"action\", game.pov.currentcommandpattern, game.pov.currentcommandresolvedelements)\r\n          }\r\n        }\r\n        if (not handled) {\r\n          do (game.pov.currentcommandpattern, \"script\", game.pov.currentcommandresolvedelements)\r\n        }\r\n      }\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>  &lt;function name=\"CurtainsF\" parameters=\"cmd,var\" type=\"boolean\"&gt;\n    if(cmd = open or cmd = look_inside_cmd){\n      bulldozer.visible = true\n      msg(\"As you part \" + GetDisplayAlias(curtains) + \" you see that i{global.nice_day}, and a large yellow \" + GetDisplayAlias(bulldozer) + \" is advancing on \" + GetDisplayAlias(home) + \".\")\n      return (true)\n    }\n    return (false)\n  &lt;/function&gt;\n</code></pre>\n<hr>\n<p>If <code>object</code>, <code>object1</code>, or <code>object2</code> has the attribute \"action\", the action delegate . . .  Well, I'll let that bit of code explain itself:</p>\n<pre><code>      if (HasScript(game.pov.currentcommandpattern, \"script\")) {\n        handled = false\n        // This is the bit that actually runs the commands\n        if (global.dont_flag) {\n          DontF (game.pov.currentcommandpattern, game.pov.currentcommandresolvedelements)\n          handled = true\n        }\n        else if (objFound) {\n          // msg(TypeOf(obj))\n          if (IsDefined(\"obj2\")) {\n            if (HasFlag(obj2,\"unimportant\")) {\n              handled = true\n              UnimportantThingF\n            }\n            else if (HasDelegateImplementation(obj2,\"action\")) {\n              handled = RunDelegateFunction(obj2,\"action\", game.pov.currentcommandpattern, game.pov.currentcommandresolvedelements)\n            }\n          }\n          if (not handled and TypeOf(obj) = \"objectlist\") {\n            // msg(\"multiple\")\n            foreach (o, obj) {\n              if (HasFlag(o, \"unimportant\")) {\n                Tell (GetDisplayAias + \": \")\n                UnimportantThingF\n                handled = true\n              }\n              else if (HasDelegateImplementation(o,\"action\")) {\n                // msg (\"ResolveNextName found 'action': \" + o)\n                handled = RunDelegateFunction(o,\"action\", game.pov.currentcommandpattern, game.pov.currentcommandresolvedelements)\n              }\n              else if (not handled) {\n                handled = true\n                do (game.pov.currentcommandpattern, \"script\", game.pov.currentcommandresolvedelements)\n              }\n            }\n          }\n          else if (not handled and HasDelegateImplementation(obj,\"action\")) {\n            // msg (\"ResolveNextName found 'action': \" + obj)\n            handled = RunDelegateFunction(obj,\"action\", game.pov.currentcommandpattern, game.pov.currentcommandresolvedelements)\n          }\n        }\n        if (not handled) {\n          do (game.pov.currentcommandpattern, \"script\", game.pov.currentcommandresolvedelements)\n        }\n      }\n</code></pre>\n\n",
      "PostDate": "2021-05-09T13:24:47.6659002Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
