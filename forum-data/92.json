{
  "Topic": {
    "TopicId": "92",
    "ForumId": "10",
    "Title": "Typelib .qlb bug ?",
    "LastUpdated": "2003-10-30T18:14:27+00:00",
    "ReplyCount": 5
  },
  "Posts": [
    {
      "PostId": "402",
      "UserId": 0,
      "Username": "Farvardin",
      "UserAvatar": null,
      "UserGravatar": "b6ea46e28b64e5f7c68f80468607f022",
      "EditableText": "I've created a actor with typelib, and I want to give it an object, and in exchange a message.\n\nWithout typelib it work. And if i define the person with &lt;TLTobject&gt; alone and include typelib it works too.\nBut I want this person to be actor too. Then it no longer works (with or without &lt;TLTcontainer&gt;). TLTactor alone also doesn't work.\n\nI tried also to put the script in the peasant (with \"give\") instead of the object  but it's the same pb.\n\nIs it a bug ? Or have I done something wrong ?\n\n\tdefine object &lt;peasant3&gt;\n\t\talias &lt;young peasant&gt;\n\t\talt &lt;peasant; young&gt;\n\t\tlook &lt;This man is rather young&gt;\n\t\tspeak &lt;\"What do you want ?\"&gt;\n\t\tdetail &lt;young&gt;\n\t\ttype &lt;TLTobject&gt;\n\t\ttype &lt;TLTcontainer&gt;\n\t\ttype &lt;TLTactor&gt;\n\t\tproperties &lt;noSpeak=\"What do you want ?\"&gt;\n\t\taction &lt;wander&gt; if ( $rand(1;10)$ &gt; 4 ) then {\n\t\t\tmove &lt;peasant3; chateau&gt;\n\t\t\tmsg &lt;Someone has just left.&gt;\n\t\t}\n\t\telse {\n\t\t\tmove &lt;peasant3; village&gt;\n\t\t}\n\tend define\n\n\n\tdefine object &lt;sword&gt;\n\t\ttake\n\t\tgive to &lt;peasant3&gt; {\n\t\t\tsay &lt;Thank you my Lord&gt;\n\t\t\tlose &lt;sword&gt;\n\t\t}\n\t\ttype &lt;TLTobject&gt;\n\tend define",
      "EditableFormat": "bbcode",
      "HTML": "I've created a actor with typelib, and I want to give it an object, and in exchange a message.<br/><br/>Without typelib it work. And if i define the person with &lt;TLTobject&gt; alone and include typelib it works too.<br/>But I want this person to be actor too. Then it no longer works (with or without &lt;TLTcontainer&gt;). TLTactor alone also doesn't work.<br/><br/>I tried also to put the script in the peasant (with \"give\") instead of the object  but it's the same pb.<br/><br/>Is it a bug ? Or have I done something wrong ?<br/><br/>\tdefine object &lt;peasant3&gt;<br/>\t\talias &lt;young peasant&gt;<br/>\t\talt &lt;peasant; young&gt;<br/>\t\tlook &lt;This man is rather young&gt;<br/>\t\tspeak &lt;\"What do you want ?\"&gt;<br/>\t\tdetail &lt;young&gt;<br/>\t\ttype &lt;TLTobject&gt;<br/>\t\ttype &lt;TLTcontainer&gt;<br/>\t\ttype &lt;TLTactor&gt;<br/>\t\tproperties &lt;noSpeak=\"What do you want ?\"&gt;<br/>\t\taction &lt;wander&gt; if ( $rand(1;10)$ &gt; 4 ) then {<br/>\t\t\tmove &lt;peasant3; chateau&gt;<br/>\t\t\tmsg &lt;Someone has just left.&gt;<br/>\t\t}<br/>\t\telse {<br/>\t\t\tmove &lt;peasant3; village&gt;<br/>\t\t}<br/>\tend define<br/><br/><br/>\tdefine object &lt;sword&gt;<br/>\t\ttake<br/>\t\tgive to &lt;peasant3&gt; {<br/>\t\t\tsay &lt;Thank you my Lord&gt;<br/>\t\t\tlose &lt;sword&gt;<br/>\t\t}<br/>\t\ttype &lt;TLTobject&gt;<br/>\tend define",
      "PostDate": "2003-08-19T10:55:33+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "403",
      "UserId": 0,
      "Username": "MaDbRiT",
      "UserAvatar": null,
      "UserGravatar": "c3dda772bea28be252abe6e4a646a54a",
      "EditableText": "Hi Farvardin\n\nTwo things here. One is that yes you have found a bug in typelib.qlb, it doesn't deal properly with aliases for the indirect object - I've fixed this (hopefully without adding any further bugs) and if I can find your e-mail, I'll send you a revised 'typelib.qlb' file. \n\nSecond is that even without the bug, the code above wouldn't work. When you define an objects as an 'actor who can carry things' you are effectively making the object a container, therefore if you want to give things to (or put things into) that object, those things must be 'containables'. \n\nSo, in this case if 'Peasant3' is a container, the sword must be a 'containable' for it to work. Something like this...\n\n[code:ah8yhy52]\n\tdefine object &lt;peasant3&gt;\n\t\talias &lt;young peasant&gt;\n\t\talt &lt;peasant; young&gt;\n\t\tlook &lt;This man is rather young&gt;\n\t\tspeak &lt;&quot;What do you want ?&quot;&gt;\n\t\tdetail &lt;young&gt;\n\t\ttype &lt;TLTobject&gt;\n\t\ttype &lt;TLTcontainer&gt;\n\t\ttype &lt;TLTactor&gt;\n\t\tproperties &lt;noSpeak=&quot;What do you want ?&quot;&gt;\n\t\taction &lt;wander&gt; if &#40; $rand&#40;1;10&#41;$ &gt; 4 &#41; then &#123;\n\t\t\tmove &lt;peasant3; chateau&gt;\n\t\t\tmsg &lt;Someone has just left&#46;&gt;\n\t\t&#125;\n\t\telse &#123;\n\t\t\tmove &lt;peasant3; village&gt;\n\t\t&#125;\n\tend define\n\n\tdefine object &lt;sword&gt;\n\t\ttake\n\t\ttype &lt;TLTobject&gt;\n\t\ttype &lt;TLTcontainable&gt;\n\t\taction &lt;contained&gt; say &lt;Thank you my Lord&#46;&gt;\n\tend define\n[/code:ah8yhy52]\n\nNote that you have to use the 'action when contained' option in QDK to print a message (or do anything else for that matter) - the inbuilt GIVE options are completely ignored if you use typelib.qlb. They have to be, because rather than 'disappearing' the sword into limbo land it now gets tucked away where it can still be retrieved.\n\nTry examining the young peasant after you've given him the sword and you'll see something like...\n\nThe man is rather young\nHe is carrying a [b:ah8yhy52]sword.[/b:ah8yhy52]\n\nYou'll find that; \n\nTake the sword from the young peasant (or just take sword) works too <!-- s:-) --><img src=\"{SMILIES_PATH}/icon_e_smile.gif\" alt=\":-)\" title=\"Smile\" /><!-- s:-) -->\n\nThis sort of thing is what typelib is all about really, but it does require a bit more work than usual to get the benefit.\n\nAl",
      "EditableFormat": "bbcode",
      "HTML": "Hi Farvardin<br/><br/>Two things here. One is that yes you have found a bug in typelib.qlb, it doesn't deal properly with aliases for the indirect object - I've fixed this (hopefully without adding any further bugs) and if I can find your e-mail, I'll send you a revised 'typelib.qlb' file. <br/><br/>Second is that even without the bug, the code above wouldn't work. When you define an objects as an 'actor who can carry things' you are effectively making the object a container, therefore if you want to give things to (or put things into) that object, those things must be 'containables'. <br/><br/>So, in this case if 'Peasant3' is a container, the sword must be a 'containable' for it to work. Something like this...<br/><br/><pre><code><br/>\tdefine object &lt;peasant3&gt;<br/>\t\talias &lt;young peasant&gt;<br/>\t\talt &lt;peasant; young&gt;<br/>\t\tlook &lt;This man is rather young&gt;<br/>\t\tspeak &lt;&quot;What do you want ?&quot;&gt;<br/>\t\tdetail &lt;young&gt;<br/>\t\ttype &lt;TLTobject&gt;<br/>\t\ttype &lt;TLTcontainer&gt;<br/>\t\ttype &lt;TLTactor&gt;<br/>\t\tproperties &lt;noSpeak=&quot;What do you want ?&quot;&gt;<br/>\t\taction &lt;wander&gt; if &#40; $rand&#40;1;10&#41;$ &gt; 4 &#41; then &#123;<br/>\t\t\tmove &lt;peasant3; chateau&gt;<br/>\t\t\tmsg &lt;Someone has just left&#46;&gt;<br/>\t\t&#125;<br/>\t\telse &#123;<br/>\t\t\tmove &lt;peasant3; village&gt;<br/>\t\t&#125;<br/>\tend define<br/><br/>\tdefine object &lt;sword&gt;<br/>\t\ttake<br/>\t\ttype &lt;TLTobject&gt;<br/>\t\ttype &lt;TLTcontainable&gt;<br/>\t\taction &lt;contained&gt; say &lt;Thank you my Lord&#46;&gt;<br/>\tend define<br/></code></pre><br/><br/>Note that you have to use the 'action when contained' option in QDK to print a message (or do anything else for that matter) - the inbuilt GIVE options are completely ignored if you use typelib.qlb. They have to be, because rather than 'disappearing' the sword into limbo land it now gets tucked away where it can still be retrieved.<br/><br/>Try examining the young peasant after you've given him the sword and you'll see something like...<br/><br/>The man is rather young<br/>He is carrying a <span style=\"font-weight:bold;\">sword.</span><br/><br/>You'll find that; <br/><br/>Take the sword from the young peasant (or just take sword) works too <!-- s:-) --><img src=\"{SMILIES_PATH}/icon_e_smile.gif\" alt=\":-)\" title=\"Smile\" /><!-- s:-) --><br/><br/>This sort of thing is what typelib is all about really, but it does require a bit more work than usual to get the benefit.<br/><br/>Al",
      "PostDate": "2003-08-19T16:51:10+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "404",
      "UserId": 0,
      "Username": "Farvardin",
      "UserAvatar": null,
      "UserGravatar": "b6ea46e28b64e5f7c68f80468607f022",
      "EditableText": "Thanks you for your precisions.\nAt the moment I don't know yet all the subtilities of Typelib, but so far I hadn't any pb with it and it worked as expected. I'll change my code according to what you said anyway. \nMy email (used on forum only because of spam bots) is <!-- e --><a href=\"mailto:farvardin@1witch.com\">farvardin@1witch.com</a><!-- e -->, I'd be glad to get the modified library, thank you in advance.\n\nA related question, is it better, or compulsory, to use the      \n type &lt;TLTobject&gt; even if other TLT type are used (such as type &lt;TLTactor&gt; for ex.) ?\n\n&gt; the inbuilt GIVE options are completely ignored if you use typelib.qlb\n\nthe same code with only type &lt;TLTobject&gt;  worked as expected (I got the correct reply I mean) \n\n\nIt's not related to typelib only, but is it the same to write a code in the define of an object given to an other with \"give to\", or with an object which get the object with \"give\" ? It seems the result is the same.",
      "EditableFormat": "bbcode",
      "HTML": "Thanks you for your precisions.<br/>At the moment I don't know yet all the subtilities of Typelib, but so far I hadn't any pb with it and it worked as expected. I'll change my code according to what you said anyway. <br/>My email (used on forum only because of spam bots) is <!-- e --><a href=\"mailto:farvardin@1witch.com\">farvardin@1witch.com</a><!-- e -->, I'd be glad to get the modified library, thank you in advance.<br/><br/>A related question, is it better, or compulsory, to use the      <br/> type &lt;TLTobject&gt; even if other TLT type are used (such as type &lt;TLTactor&gt; for ex.) ?<br/><br/>&gt; the inbuilt GIVE options are completely ignored if you use typelib.qlb<br/><br/>the same code with only type &lt;TLTobject&gt;  worked as expected (I got the correct reply I mean) <br/><br/><br/>It's not related to typelib only, but is it the same to write a code in the define of an object given to an other with \"give to\", or with an object which get the object with \"give\" ? It seems the result is the same.",
      "PostDate": "2003-08-19T22:35:41+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "405",
      "UserId": 0,
      "Username": "Anonymous",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "[quote:vtkxir30]\nMy email (used on forum only because of spam bots) is <!-- e --><a href=\"mailto:farvardin@1witch.com\">farvardin@1witch.com</a><!-- e -->, I'd be glad to get the modified library, thank you in advance. \n\nA related question, is it better, or compulsory, to use the \ntype &lt;TLTobject&gt; even if other TLT type are used (such as type &lt;TLTactor&gt; for ex.) ? \n\n&gt; the inbuilt GIVE options are completely ignored if you use typelib.qlb \n\nthe same code with only type &lt;TLTobject&gt; worked as expected (I got the correct reply I mean) \n\n\nIt's not related to typelib only, but is it the same to write a code in the define of an object given to an other with \"give to\", or with an object which get the object with \"give\" ? It seems the result is the same.\n[/quote:vtkxir30]\n\nRevised lib wil be on its way when I get back to my own PC <!-- s:-) --><img src=\"{SMILIES_PATH}/icon_e_smile.gif\" alt=\":-)\" title=\"Smile\" /><!-- s:-) -->\n\nYou don't have to use TLTobject if you use TLTactor, because TLTactor is  built on the TLTobject anyway. (If you like to think of it that way the base object is TLTobject.)\n\nI probably didn't explain the 'give' bit very well. [b:vtkxir30]TLTcontainers[/b:vtkxir30] and [b:vtkxir30]TLTcontainables[/b:vtkxir30] replace the inbuilt 'give' options completely, TLTobjects don't do that, a regular give will actually work for these, but I don't recommend mixing the two in this way. \n\nIf you want 'givables' using typelib, make them containables and make the recipients 'containers' - that way you get listable inventories and the abilty to re-take stuff etc.\n\nAs regards the use of the regular give otions in either direct or receiving objects, there is an order or precedence as to which is given priority, which may rarely be significant, but otherwise it makes no difference which way you use.\n\nAl",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><p><br/>My email (used on forum only because of spam bots) is <!-- e --><a href=\"mailto:farvardin@1witch.com\">farvardin@1witch.com</a><!-- e -->, I'd be glad to get the modified library, thank you in advance. <br/><br/>A related question, is it better, or compulsory, to use the <br/>type &lt;TLTobject&gt; even if other TLT type are used (such as type &lt;TLTactor&gt; for ex.) ? <br/><br/>&gt; the inbuilt GIVE options are completely ignored if you use typelib.qlb <br/><br/>the same code with only type &lt;TLTobject&gt; worked as expected (I got the correct reply I mean) <br/><br/><br/>It's not related to typelib only, but is it the same to write a code in the define of an object given to an other with \"give to\", or with an object which get the object with \"give\" ? It seems the result is the same.<br/></p></blockquote><br/><br/>Revised lib wil be on its way when I get back to my own PC <!-- s:-) --><img src=\"{SMILIES_PATH}/icon_e_smile.gif\" alt=\":-)\" title=\"Smile\" /><!-- s:-) --><br/><br/>You don't have to use TLTobject if you use TLTactor, because TLTactor is  built on the TLTobject anyway. (If you like to think of it that way the base object is TLTobject.)<br/><br/>I probably didn't explain the 'give' bit very well. <span style=\"font-weight:bold;\">TLTcontainers</span> and <span style=\"font-weight:bold;\">TLTcontainables</span> replace the inbuilt 'give' options completely, TLTobjects don't do that, a regular give will actually work for these, but I don't recommend mixing the two in this way. <br/><br/>If you want 'givables' using typelib, make them containables and make the recipients 'containers' - that way you get listable inventories and the abilty to re-take stuff etc.<br/><br/>As regards the use of the regular give otions in either direct or receiving objects, there is an order or precedence as to which is given priority, which may rarely be significant, but otherwise it makes no difference which way you use.<br/><br/>Al",
      "PostDate": "2003-08-20T01:54:06+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "409",
      "UserId": 0,
      "Username": "Farvardin",
      "UserAvatar": null,
      "UserGravatar": "b6ea46e28b64e5f7c68f80468607f022",
      "EditableText": "Thank you, it's working now.\nA new problem raises : it's ok if I want to get the same action and reply for every people I give an object. But if I want for ex. to give a specific object to a specific actor, and get an other object in exchange, I don't know how to do this with your library. With the default use it was rather easy :\n\n[code:3234yx7a]\n\tdefine object &lt;backpack&gt;\n\t\talias &lt;sack&gt;\n\t\talt &lt;pack; sack&gt;\n\t\ttake msg &lt;This sack is an useful tool for your adventures&#46;&gt;\n\t\tgive to &lt;peasant2&gt; &#123;\n\t\t\tsay &lt;Thank you very much&#46;|nHere is the saw&#46;&gt;\n\t\t\tproperty &lt;saw; takeable&gt;\n\t\t\treveal &lt;saw&gt;\n\t\t\tgive &lt;saw&gt;\n\t\t&#125;\n\tend define\n[/code:3234yx7a]\n\nWith typelib I guess it's possible to make a conditional, but I don't know how is called \n[code:3234yx7a]\n\n\t\taction &lt;contained&gt; &#123;\n\t\t\tif &#40; #TLSiObj# = #@peasant2# &#41; &#123;\n\t\t\t\tsay &lt;Thank you very much&#46;|nHere is the saw&#46;&gt;\n\t\t\t\tproperty &lt;saw; takeable&gt;\n\t\t\t\treveal &lt;saw&gt;\n\t\t\t\tmove &lt;saw; village&gt;\n\t\t\t\tshow &lt;saw&gt;\n\t\t\t\tgive &lt;saw&gt;\n\t\t\t&#125; else say &lt;Thank you, I think I'll find some use for this&#46;&gt;\n\t\t&#125;\n\n[/code:3234yx7a]\n\n\nI tried also with if ( #quest.function.parameter.1# = #@peasant2# ), and with TLTcontainer but it doesn't work better  : my item disappear, but I don't get any message (\"Thank you very much.|nHere is the saw\" or the other object in exchange).",
      "EditableFormat": "bbcode",
      "HTML": "Thank you, it's working now.<br/>A new problem raises : it's ok if I want to get the same action and reply for every people I give an object. But if I want for ex. to give a specific object to a specific actor, and get an other object in exchange, I don't know how to do this with your library. With the default use it was rather easy :<br/><br/><pre><code><br/>\tdefine object &lt;backpack&gt;<br/>\t\talias &lt;sack&gt;<br/>\t\talt &lt;pack; sack&gt;<br/>\t\ttake msg &lt;This sack is an useful tool for your adventures&#46;&gt;<br/>\t\tgive to &lt;peasant2&gt; &#123;<br/>\t\t\tsay &lt;Thank you very much&#46;|nHere is the saw&#46;&gt;<br/>\t\t\tproperty &lt;saw; takeable&gt;<br/>\t\t\treveal &lt;saw&gt;<br/>\t\t\tgive &lt;saw&gt;<br/>\t\t&#125;<br/>\tend define<br/></code></pre><br/><br/>With typelib I guess it's possible to make a conditional, but I don't know how is called <br/><pre><code><br/><br/>\t\taction &lt;contained&gt; &#123;<br/>\t\t\tif &#40; #TLSiObj# = #@peasant2# &#41; &#123;<br/>\t\t\t\tsay &lt;Thank you very much&#46;|nHere is the saw&#46;&gt;<br/>\t\t\t\tproperty &lt;saw; takeable&gt;<br/>\t\t\t\treveal &lt;saw&gt;<br/>\t\t\t\tmove &lt;saw; village&gt;<br/>\t\t\t\tshow &lt;saw&gt;<br/>\t\t\t\tgive &lt;saw&gt;<br/>\t\t\t&#125; else say &lt;Thank you, I think I'll find some use for this&#46;&gt;<br/>\t\t&#125;<br/><br/></code></pre><br/><br/><br/>I tried also with if ( #quest.function.parameter.1# = #@peasant2# ), and with TLTcontainer but it doesn't work better  : my item disappear, but I don't get any message (\"Thank you very much.|nHere is the saw\" or the other object in exchange).",
      "PostDate": "2003-08-20T08:55:03+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "897",
      "UserId": 0,
      "Username": "codingmasters",
      "UserAvatar": null,
      "UserGravatar": "250751f8970f3fa0c377f52a0c81831f",
      "EditableText": "Is there any chance of me getting the library as well?\n\n<!-- e --><a href=\"mailto:matthewg14b@hotmail.com\">matthewg14b@hotmail.com</a><!-- e --> is the address\n\nMatthew G.",
      "EditableFormat": "bbcode",
      "HTML": "Is there any chance of me getting the library as well?<br/><br/><!-- e --><a href=\"mailto:matthewg14b@hotmail.com\">matthewg14b@hotmail.com</a><!-- e --> is the address<br/><br/>Matthew G.",
      "PostDate": "2003-10-30T18:14:27+00:00",
      "LastEditDate": null
    }
  ]
}
