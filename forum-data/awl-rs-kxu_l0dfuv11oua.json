{
  "Topic": {
    "TopicId": "awl-rs-kxu_l0dfuv11oua",
    "ForumId": "10",
    "Title": "Popup text colour",
    "LastUpdated": "2024-01-31T11:39:53.9815072Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "8c6a1e25-8da8-478a-89b0-b187dd41f0ae",
      "UserId": 579655,
      "Username": "Jennifer Wren",
      "AvatarUrl": "https://i.imgur.com/t1XUS1Kb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Can someone not change the colour of the text of a popup within a popup? I tried wrapping {colour:White:    } around the popup but that did nothing",
      "EditableFormat": "markdown",
      "HTML": "<p>Can someone not change the colour of the text of a popup within a popup? I tried wrapping {colour:White:    } around the popup but that did nothing</p>\n\n",
      "PostDate": "2024-01-31T11:39:53.9815072Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2ca8c3b6-44bb-4c7c-bc6e-53699ab2c810",
      "UserId": 31991,
      "Username": "daeun",
      "AvatarUrl": "https://i.imgur.com/a59YNl7b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The man is carrying a {popup:spade:A spade is a tool {colour:red:put in your text} commonly used for digging holes.} over his back.\r\n\r\nI used red because white is hard to see.\r\nYou can learn more about it at\r\nhttps://docs.textadventures.co.uk/quest/quest5_7.html",
      "EditableFormat": "markdown",
      "HTML": "<p>The man is carrying a {popup:spade:A spade is a tool {colour:red:put in your text} commonly used for digging holes.} over his back.</p>\n<p>I used red because white is hard to see.<br>\nYou can learn more about it at<br>\nhttps://docs.textadventures.co.uk/quest/quest5_7.html</p>\n\n",
      "PostDate": "2024-01-31T12:32:32.5864893Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a73d130e-e72c-4979-af72-bbe80e740d85",
      "UserId": 579655,
      "Username": "Jennifer Wren",
      "AvatarUrl": "https://i.imgur.com/t1XUS1Kb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks. I was using the colour over the text, not the long text. I'm not sure why that wouldn't work. Maybe it was a typo which I copied and pasted several hundred times but the print was small so I can have missed something. I also agree I should have tested a stronger colour before deleting all that work. \r\nSo I tested a sample within the popup on the start svreen\r\n'''{colour:Red:{popup:red:hello}}'''\r\nand all that shows up is the word red in the original grey.\r\nHow do I change the colour of the word \"spade\"?\r\n\r\nHowever, I can change the colour of the actual long text, so I can change each piece of text that isn't a popup, inside the popup long text, and that is a lot more work, but usefull.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks. I was using the colour over the text, not the long text. I'm not sure why that wouldn't work. Maybe it was a typo which I copied and pasted several hundred times but the print was small so I can have missed something. I also agree I should have tested a stronger colour before deleting all that work.<br>\nSo I tested a sample within the popup on the start svreen<br>\n'''{colour:Red:{popup:red:hello}}'''<br>\nand all that shows up is the word red in the original grey.<br>\nHow do I change the colour of the word \"spade\"?</p>\n<p>However, I can change the colour of the actual long text, so I can change each piece of text that isn't a popup, inside the popup long text, and that is a lot more work, but usefull.</p>\n\n",
      "PostDate": "2024-01-31T16:35:48.2240617Z",
      "LastEditDate": "2024-01-31T16:56:26.8476489Z",
      "link": null
    },
    {
      "PostId": "efaefdf8-7b20-4628-a05b-0009c149321d",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> `{colour:Red:{popup:red:hello}}`\r\n\r\nThe contents of the popup are a separate div, not contained within the same output div; and the clickable link is set to the colour defined as `game.altlinkforeground` if it exists, and `game.defaultlinkforeground` otherwise.\r\n\r\nWhen you put two colours inside each other, the innermost one overrides the outer. That's why you can put a red word in the middle of a blue sentence, or stuff like that.\r\n\r\nSo, if you want to have red text inside a link that's automatically coloured whatever colour altlinkforeground is, you would need to use:\r\n```\r\n{popup:{colour:red:red}:hello}\r\n```\r\nOr if that doesn't work (I think it should, but…) you could try:\r\n```\r\n{popup:{colour:red !important:red}:hello}\r\n```\r\n(the `!important` CSS keyword is useful for changing which rule wins when there's a conflict)",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p><code>{colour:Red:{popup:red:hello}}</code></p>\n</blockquote>\n<p>The contents of the popup are a separate div, not contained within the same output div; and the clickable link is set to the colour defined as <code>game.altlinkforeground</code> if it exists, and <code>game.defaultlinkforeground</code> otherwise.</p>\n<p>When you put two colours inside each other, the innermost one overrides the outer. That's why you can put a red word in the middle of a blue sentence, or stuff like that.</p>\n<p>So, if you want to have red text inside a link that's automatically coloured whatever colour altlinkforeground is, you would need to use:</p>\n<pre><code>{popup:{colour:red:red}:hello}\n</code></pre>\n<p>Or if that doesn't work (I think it should, but…) you could try:</p>\n<pre><code>{popup:{colour:red !important:red}:hello}\n</code></pre>\n<p>(the <code>!important</code> CSS keyword is useful for changing which rule wins when there's a conflict)</p>\n\n",
      "PostDate": "2024-01-31T18:50:33.8604606Z",
      "LastEditDate": "2024-01-31T18:52:29.7677724Z",
      "link": null
    },
    {
      "PostId": "217b227e-267f-4baf-8892-bff1e0ec889f",
      "UserId": 579655,
      "Username": "Jennifer Wren",
      "AvatarUrl": "https://i.imgur.com/t1XUS1Kb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel\r\nNeither the first sample nor the second worked. Instead, I git \r\ncolour:\r\nfollowed by a lot of spaces\r\nin the same colour as the rest of the long text in that larger popup, grey, not red. I can colour long text, but not \"text\" before the \"longtext\", within a popup or otherwise.",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel<br>\nNeither the first sample nor the second worked. Instead, I git<br>\ncolour:<br>\nfollowed by a lot of spaces<br>\nin the same colour as the rest of the long text in that larger popup, grey, not red. I can colour long text, but not \"text\" before the \"longtext\", within a popup or otherwise.</p>\n\n",
      "PostDate": "2024-02-01T00:07:50.6466065Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "338be3df-fb9e-4770-b97e-cb86d87e279d",
      "UserId": 31991,
      "Username": "daeun",
      "AvatarUrl": "https://i.imgur.com/a59YNl7b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you are trying to change the hyperlink colour:\r\n\r\ngame.defaultlinkforeground = \"red\"\r\nmsg (\"{popup:spade:A spade is a tool commonly used for digging holes.}\")\r\ngame.defaultlinkforeground = \"black\"\r\n\r\nMore possible help:\r\nhttps://textadventures.co.uk/forum/quest/topic/3128/link-foreground\r\nhttps://textadventures.co.uk/forum/quest/topic/rwulivlvskyvtd3d0sklsg/change-colors-mid-game",
      "EditableFormat": "markdown",
      "HTML": "<p>If you are trying to change the hyperlink colour:</p>\n<p>game.defaultlinkforeground = \"red\"<br>\nmsg (\"{popup:spade:A spade is a tool commonly used for digging holes.}\")<br>\ngame.defaultlinkforeground = \"black\"</p>\n<p>More possible help:<br>\nhttps://textadventures.co.uk/forum/quest/topic/3128/link-foreground<br>\nhttps://textadventures.co.uk/forum/quest/topic/rwulivlvskyvtd3d0sklsg/change-colors-mid-game</p>\n\n",
      "PostDate": "2024-02-01T00:57:45.9813317Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9b4d2a78-9520-4b6b-9a8b-cc3f4b9926d3",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Bah… I know that bug. It's already been fixed (as of Quest 5.8 I think) for `{random` and `{either`, but apparently we missed `{popup`.\r\n\r\nTo make it work as intended, you'd need to change `Split` to `Tsplit` in one of the core functions:\r\n<pre><code>&lt;function name=\"ProcessTextCommand_Popup\" parameters=\"section, data\" type=\"string\">&lt;![CDATA[\r\n  section = Mid(section, 7)\r\n  ary = <b style=\"color:blue\">Tsplit</b>(section)\r\n  s1 = StringListItem(ary, 0)\r\n  list remove(ary, s1)\r\n  s2 = Join (ary, \":\")\r\n  id = JSSafe(s1) + GetRandomInt(0, 999999999)\r\n  link = game.defaultlinkforeground\r\n  if (HasString(game, \"altlinkforeground\")) link = game.altlinkforeground\r\n  s = \"&lt;span  style=\\\"cursor:pointer;color:\" + link + \";\\\" onclick=\\\"$('#\" + id + \"').css('display', 'block');\\\">\" + s1 + \"&lt;/span>&lt;div id=\\\"\" + id + \"\\\" class=\\\"w3-theme-border\\\" style=\\\"position:fixed;z-index:9999;display:none;cursor:pointer;left:50px;top:40%;width:40%;background-color:\" + game.defaultbackground + \";border:2px solid \" + game.defaultforeground + \";color:\" + link + \";border-radius:5px;padding:5px;\\\" onclick=\\\"$('#\" + id + \"').css('display', 'none');\\\">&lt;p>\"\r\n  s = s + s2 + \"&lt;/p>&lt;/div>\"\r\n  return(ProcessTextSection(s, data))\r\n]]>&lt;/function></code></pre>\r\n\r\n<hr/>\r\n\r\nExplanation: `Split (section, \":\")` cuts the text inside the command up where the colons are. The function then assumes that everything before the first colon is the short text, and everything after the first colon is the popup contents. It's better to use `TSplit`, which finds the first colon that isn't between `{` and `}` - meaning that the colons inside the nested `{colour` directive can do their job.\r\n\r\n<hr/>\r\n\r\n@daeun\r\n> If you are trying to change the hyperlink colour:\r\n\r\nGood workaround :) I was going to suggest that, but thought it would be more complex than necessary.\r\nThat's probably the simplest way to do it if you're on the web version.\r\n\r\nAnother alternative would be something like:\r\n```\r\n{popup:<font color=\"red\">red</font>:hello}\r\n```\r\nwhich is deprecated, but doesn't have a colon in to cause problems.",
      "EditableFormat": "markdown",
      "HTML": "<p>Bah… I know that bug. It's already been fixed (as of Quest 5.8 I think) for <code>{random</code> and <code>{either</code>, but apparently we missed <code>{popup</code>.</p>\n<p>To make it work as intended, you'd need to change <code>Split</code> to <code>Tsplit</code> in one of the core functions:</p>\n<pre><code>&lt;function name=\"ProcessTextCommand_Popup\" parameters=\"section, data\" type=\"string\"&gt;&lt;![CDATA[\n  section = Mid(section, 7)\n  ary = <b style=\"color: blue\">Tsplit</b>(section)\n  s1 = StringListItem(ary, 0)\n  list remove(ary, s1)\n  s2 = Join (ary, \":\")\n  id = JSSafe(s1) + GetRandomInt(0, 999999999)\n  link = game.defaultlinkforeground\n  if (HasString(game, \"altlinkforeground\")) link = game.altlinkforeground\n  s = \"&lt;span  style=\\\"cursor:pointer;color:\" + link + \";\\\" onclick=\\\"$('#\" + id + \"').css('display', 'block');\\\"&gt;\" + s1 + \"&lt;/span&gt;&lt;div id=\\\"\" + id + \"\\\" class=\\\"w3-theme-border\\\" style=\\\"position:fixed;z-index:9999;display:none;cursor:pointer;left:50px;top:40%;width:40%;background-color:\" + game.defaultbackground + \";border:2px solid \" + game.defaultforeground + \";color:\" + link + \";border-radius:5px;padding:5px;\\\" onclick=\\\"$('#\" + id + \"').css('display', 'none');\\\"&gt;&lt;p&gt;\"\n  s = s + s2 + \"&lt;/p&gt;&lt;/div&gt;\"\n  return(ProcessTextSection(s, data))\n]]&gt;&lt;/function&gt;</code></pre>\n<hr>\n<p>Explanation: <code>Split (section, \":\")</code> cuts the text inside the command up where the colons are. The function then assumes that everything before the first colon is the short text, and everything after the first colon is the popup contents. It's better to use <code>TSplit</code>, which finds the first colon that isn't between <code>{</code> and <code>}</code> - meaning that the colons inside the nested <code>{colour</code> directive can do their job.</p>\n<hr>\n<p>@daeun</p>\n<blockquote>\n<p>If you are trying to change the hyperlink colour:</p>\n</blockquote>\n<p>Good workaround :) I was going to suggest that, but thought it would be more complex than necessary.<br>\nThat's probably the simplest way to do it if you're on the web version.</p>\n<p>Another alternative would be something like:</p>\n<pre><code>{popup:&lt;font color=\"red\"&gt;red&lt;/font&gt;:hello}\n</code></pre>\n<p>which is deprecated, but doesn't have a colon in to cause problems.</p>\n\n",
      "PostDate": "2024-02-01T11:03:04.4185438Z",
      "LastEditDate": "2024-02-01T11:06:07.2747647Z",
      "link": null
    },
    {
      "PostId": "9156ca56-f12e-41b1-bd57-ed99bee74c33",
      "UserId": 579655,
      "Username": "Jennifer Wren",
      "AvatarUrl": "https://i.imgur.com/t1XUS1Kb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks, you two, for all this information. I have already filled my first layer popups with long text in a different colour from the links and it was trouble to change so much but it works now. However, the more I know the more I can try things I've learned and see what gets the best results (with the least amount of effort - always watching out for typos). I should have thought of the span style system but  had been told not to use it. Even if it could ever be completely phased out, though, I don't see why anyone would. It is still handy right now at least. This proves it, right?",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks, you two, for all this information. I have already filled my first layer popups with long text in a different colour from the links and it was trouble to change so much but it works now. However, the more I know the more I can try things I've learned and see what gets the best results (with the least amount of effort - always watching out for typos). I should have thought of the span style system but  had been told not to use it. Even if it could ever be completely phased out, though, I don't see why anyone would. It is still handy right now at least. This proves it, right?</p>\n\n",
      "PostDate": "2024-02-05T20:03:34.0428325Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
