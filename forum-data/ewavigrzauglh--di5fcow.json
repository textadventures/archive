{
  "Topic": {
    "TopicId": "ewavigrzauglh--di5fcow",
    "ForumId": "24",
    "Title": "Newbie to Squiffy - Trouble with IF",
    "LastUpdated": "2017-08-30T16:22:14.8821033Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "fc45cbb2-d6eb-4357-9111-251df58e55bf",
      "UserId": 32552,
      "Username": "CypherHyena",
      "AvatarUrl": "http://i.imgur.com/abkzTcfb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This should be so simple.. But I'm having trouble getting my IF formatting to work.\r\n\r\n```\r\n[[Cave]]:\r\n{if CaveVisited=false:You duck down and enter the cave.}\r\n@set CaveVisited=true;\r\n\r\nThis cave is a natural limestone structure, carved out over centuries by water erosion...\r\n```\r\n\r\nOn first visit, the \"You duck down and enter the cave\" part is not working.\r\nCaveVisited does get set to true after entering the cave.\r\n\r\nWhat am I doing wrong here?\r\n\r\nMy real goal is to have that top line displayed when you come from outside and enter the cave. But NOT when you come from deep within the cave to the cave entrance. Is there a way to key off of the last room visited before this room?\r\n\r\nThanks!\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>This should be so simple.. But I'm having trouble getting my IF formatting to work.</p>\n<pre><code>[[Cave]]:\n{if CaveVisited=false:You duck down and enter the cave.}\n@set CaveVisited=true;\n\nThis cave is a natural limestone structure, carved out over centuries by water erosion...\n</code></pre>\n<p>On first visit, the \"You duck down and enter the cave\" part is not working.<br>\nCaveVisited does get set to true after entering the cave.</p>\n<p>What am I doing wrong here?</p>\n<p>My real goal is to have that top line displayed when you come from outside and enter the cave. But NOT when you come from deep within the cave to the cave entrance. Is there a way to key off of the last room visited before this room?</p>\n<p>Thanks!</p>\n\n",
      "PostDate": "2017-08-30T16:22:14.8821033Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f965abf8-a0d5-4717-81b7-f77ac5b93e31",
      "UserId": 286504,
      "Username": "manowar",
      "AvatarUrl": "http://i.imgur.com/mpaalk0b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello Cypher, can you post here the sections that changed the CaveVisited attribute?",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello Cypher, can you post here the sections that changed the CaveVisited attribute?</p>\n\n",
      "PostDate": "2017-08-30T18:01:22.4464593Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b7b7538d-dec1-4461-a462-19bc176269bc",
      "UserId": 32552,
      "Username": "CypherHyena",
      "AvatarUrl": "http://i.imgur.com/abkzTcfb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello manowar.\r\n\r\nCurrently, no section changes it until it is checked in the Cave section. the attribute doesn't exist before it's checked. I'm assuming all attributes, uncreated, start off false?\r\n\r\nThe only spot it is changed, currently, is the one displayed where it's set to true.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello manowar.</p>\n<p>Currently, no section changes it until it is checked in the Cave section. the attribute doesn't exist before it's checked. I'm assuming all attributes, uncreated, start off false?</p>\n<p>The only spot it is changed, currently, is the one displayed where it's set to true.</p>\n\n",
      "PostDate": "2017-08-30T20:22:16.2786043Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6cfb8c9e-283e-4c98-ae29-e1a1fd1a21d7",
      "UserId": 32552,
      "Username": "CypherHyena",
      "AvatarUrl": "http://i.imgur.com/abkzTcfb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here's a shortened version of my full program. None of my IF's are working. The If Not Seen's are not working. and the If attribute check is not working. I'm using the Desktop Version.\r\n\r\n```\r\n@title Test\r\n@start Login\r\n\r\n\r\n[[Login]]:\r\n@set CaveVisited = false;\r\n\r\nWhen you are Ready... [[Start Here]](Start)\r\n\r\n[[Start]]:\r\n{if not seen Start:@clear}\r\n{if not seen Start:You Awake... You aren't sure how you got here... }\r\nYou find yourself in the middle of a leafy deciduous forest in early fall. It's a warm day...\r\n[[SouthForest]] [[NorthForest]]\r\n\r\n[[NorthForest]]:\r\nYou travel through the forest, each step crunching lightly on the crisp, fallen leaves...\r\n[[SouthForest]] [[Cave]]\r\n\r\n[[SouthForest]]:\r\nHead Back to the [[North]](Start).\r\n\r\n[[Cave]]:\r\n{if CaveVisited=false:You duck down and enter the cave.}\r\n@set CaveVisited=true;\r\n\r\nThis cave is a natural limestone structure, carved out over centuries by water erosion...\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Here's a shortened version of my full program. None of my IF's are working. The If Not Seen's are not working. and the If attribute check is not working. I'm using the Desktop Version.</p>\n<pre><code>@title Test\n@start Login\n\n\n[[Login]]:\n@set CaveVisited = false;\n\nWhen you are Ready... [[Start Here]](Start)\n\n[[Start]]:\n{if not seen Start:@clear}\n{if not seen Start:You Awake... You aren't sure how you got here... }\nYou find yourself in the middle of a leafy deciduous forest in early fall. It's a warm day...\n[[SouthForest]] [[NorthForest]]\n\n[[NorthForest]]:\nYou travel through the forest, each step crunching lightly on the crisp, fallen leaves...\n[[SouthForest]] [[Cave]]\n\n[[SouthForest]]:\nHead Back to the [[North]](Start).\n\n[[Cave]]:\n{if CaveVisited=false:You duck down and enter the cave.}\n@set CaveVisited=true;\n\nThis cave is a natural limestone structure, carved out over centuries by water erosion...\n</code></pre>\n\n",
      "PostDate": "2017-08-30T20:32:47.2412486Z",
      "LastEditDate": "2017-08-30T20:33:15.4775553Z",
      "link": null
    },
    {
      "PostId": "07acc88a-2f50-4db8-ba32-e8a1eb0e9234",
      "UserId": 286504,
      "Username": "manowar",
      "AvatarUrl": "http://i.imgur.com/mpaalk0b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Try this code:\r\n\r\n    @start other\r\n\r\n    [[other]]:\r\n    @set CaveVisited=false\r\n    go to the [[Cave]]\r\n\r\n    [[Cave]]:\r\n          window.setTimeout(function(){ squiffy.set(\"CaveVisited\", \"true\"); }, 500);\r\n    {if CaveVisited=false:You duck down and enter the cave.}\r\n        \r\n\r\n    This cave is a natural limestone structure, carved out over centuries by water erosion... go to the [[deep]] or [[exit]](other)\r\n\r\n    [[deep]]:\r\n    go to the [[Cave]]",
      "EditableFormat": "markdown",
      "HTML": "<p>Try this code:</p>\n<pre><code>@start other\n\n[[other]]:\n@set CaveVisited=false\ngo to the [[Cave]]\n\n[[Cave]]:\n      window.setTimeout(function(){ squiffy.set(\"CaveVisited\", \"true\"); }, 500);\n{if CaveVisited=false:You duck down and enter the cave.}\n    \n\nThis cave is a natural limestone structure, carved out over centuries by water erosion... go to the [[deep]] or [[exit]](other)\n\n[[deep]]:\ngo to the [[Cave]]\n</code></pre>\n\n",
      "PostDate": "2017-08-30T20:47:19.0663906Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "663b7f0f-b112-4acf-bff4-3dfb06d4dfd7",
      "UserId": 32552,
      "Username": "CypherHyena",
      "AvatarUrl": "http://i.imgur.com/abkzTcfb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I did a little testing. If I set CaveVisited to true in the NEXT section. It works as intended. But if I set CaveVisited to true in the Cave Section.. even if it's set AFTER the If Attribute check.. it fails. The check thinks CaveVisited is true.",
      "EditableFormat": "markdown",
      "HTML": "<p>I did a little testing. If I set CaveVisited to true in the NEXT section. It works as intended. But if I set CaveVisited to true in the Cave Section.. even if it's set AFTER the If Attribute check.. it fails. The check thinks CaveVisited is true.</p>\n\n",
      "PostDate": "2017-08-30T20:47:32.0972046Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b9dff330-7daa-499b-a2fe-50710ce28313",
      "UserId": 32552,
      "Username": "CypherHyena",
      "AvatarUrl": "http://i.imgur.com/abkzTcfb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks manowar. I bet that will work... But I wonder why I'd have to put the delay in there? I thought it would parse things linearly, but maybe not? Will it really change a variable after an IF statement even if the If Statement hasn't been evaluated yet?\r\n\r\nWeird...",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks manowar. I bet that will work... But I wonder why I'd have to put the delay in there? I thought it would parse things linearly, but maybe not? Will it really change a variable after an IF statement even if the If Statement hasn't been evaluated yet?</p>\n<p>Weird...</p>\n\n",
      "PostDate": "2017-08-30T20:49:03.8537246Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1bd0c2c7-b18e-4fca-a538-1ac01ea7ecbe",
      "UserId": 286504,
      "Username": "manowar",
      "AvatarUrl": "http://i.imgur.com/mpaalk0b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The assignment of the attribute (@set) is being done before it evaluates if so it is never fulfilled, hence we give a delay to the assignment so that just when entering even has its correct value.",
      "EditableFormat": "markdown",
      "HTML": "<p>The assignment of the attribute (@set) is being done before it evaluates if so it is never fulfilled, hence we give a delay to the assignment so that just when entering even has its correct value.</p>\n\n",
      "PostDate": "2017-08-30T21:00:29.9095949Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cacc8140-9c76-4bbc-a4a4-4d3cd8251dab",
      "UserId": 32552,
      "Username": "CypherHyena",
      "AvatarUrl": "http://i.imgur.com/abkzTcfb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Gotcha, thanks. So.. I guess a whole section is read at once, and variable assignments are done instantly, and then the logic and display happens?\r\n\r\njust want to make sure I understand it for the future. Coming from a C# background, that's way different than what I'm used to :)",
      "EditableFormat": "markdown",
      "HTML": "<p>Gotcha, thanks. So.. I guess a whole section is read at once, and variable assignments are done instantly, and then the logic and display happens?</p>\n<p>just want to make sure I understand it for the future. Coming from a C# background, that's way different than what I'm used to :)</p>\n\n",
      "PostDate": "2017-08-30T21:07:44.4557216Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
