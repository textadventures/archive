{
  "Topic": {
    "TopicId": "v_jcp44jyk2befkakgb1pq",
    "ForumId": "18",
    "Title": "Printing a Transcript (Part 2)",
    "LastUpdated": "2018-02-05T23:28:47.2878179Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "e7bf915e-7407-4cb8-a1ee-fe9788787b40",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is the best method for transcripts I've pieced together as of yet, I believe.\r\n\r\nYeah...  I sort of think it's the best way to go.  \r\n\r\nIt should work the same on the web player as it does on the desktop player, too.\r\n\r\n(Somebody poke some holes in it, please.)\r\n\r\n---\r\nThis depends on this modified ```clearScreen()``` function:\r\n```\r\nvar clearedOnce = false;\r\nclearScreen = function () {\r\n    $('#divOutput').append('<hr class=\\\"clearedAbove\\\" />');\r\n    if (!clearedOnce) {\r\n        addText('<style>#divOutput > .clearedScreen { display: none; }</style>');\r\n    }\r\n    clearedOnce = true;\r\n    $('#divOutput').children().addClass('clearedScreen');\r\n    $('#divOutput').css('min-height', 0);\r\n    createNewDiv('left');\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $('html,body').scrollTop(0);\r\n    }, 100);\r\n}\r\n```\r\n\r\n---\r\nThe transcript stuff:\r\n\r\n```\r\nvar transcriptVar = \"\";\r\nfunction addTranscriptEntry(text) {\r\n    transcriptVar += text;\r\n};\r\n\r\n\r\nfunction showTranscript() {\r\n    var transcriptDivString = \"\";\r\n    transcriptDivString += \"<div \";\r\n    transcriptDivString += \"id='transcript-dialog' \";\r\n    transcriptDivString += \"style='display:none;'>\";\r\n    transcriptDivString += \"<div id='transcriptdata'></div></div>\";\r\n    addText(transcriptDivString);\r\n    var transcriptDialog = $(\"#transcript-dialog\").dialog({\r\n        autoOpen: false,\r\n        width: 600,\r\n        height: 500,\r\n        title: \"Transcript\",\r\n        buttons: {\r\n            Ok: function () {\r\n                $(this).dialog(\"close\");\r\n                $(this).remove();\r\n            },\r\n            Print: function () {\r\n                printTranscriptDiv();\r\n            },\r\n        },\r\n        show: { effect: \"fadeIn\", duration: 500 },\r\n        modal: true,\r\n    });\r\n    $('#transcriptdata').html($('#divOutput').html()); $(\"#transcriptdata *\").attr('style', '').attr('color', '');\r\n    transcriptDialog.dialog(\"open\");\r\n\r\n};\r\n\r\n\r\n\r\nfunction printTranscriptDiv() {\r\n    var iframe = document.createElement('iframe');\r\n    document.body.appendChild(iframe);\r\n    iframe.contentWindow.document.write($(\"#transcriptdata\").html());\r\n    iframe.contentWindow.print();\r\n    document.body.removeChild(iframe);\r\n    $(\"#transcript-dialog\").dialog(\"close\");\r\n    $(\"#transcript-dialog\").remove();\r\n};\r\n```\r\n\r\n---\r\nThe Quest command:\r\n```\r\n  <command name=\"view_transcript_cmd\">\r\n    <pattern>transcript;script;view script;view transcript;display transcript;view the transcript;display the transcript</pattern>\r\n    <script>\r\n      game.notarealturn = true\r\n      JS.showTranscript ()\r\n    </script>\r\n  </command> \r\n```\r\n\r\n\r\n---\r\nNOTE:\r\n\r\nI'm just piecing different bits of code together until things behave like I want them to.\r\n\r\nIf this works, thank mrangel and Pixie.  They provided the good bits of code.\r\n\r\nIf it doesn't work, blame me.\r\n\r\n<span style=\"color:white;background:white;\">CAN I PRINT THIS NOW???</span>",
      "EditableFormat": "markdown",
      "HTML": "<p>This is the best method for transcripts I've pieced together as of yet, I believe.</p>\n<p>Yeah...  I sort of think it's the best way to go.</p>\n<p>It should work the same on the web player as it does on the desktop player, too.</p>\n<p>(Somebody poke some holes in it, please.)</p>\n<hr>\n<p>This depends on this modified <code>clearScreen()</code> function:</p>\n<pre><code>var clearedOnce = false;\nclearScreen = function () {\n    $('#divOutput').append('&lt;hr class=\\\"clearedAbove\\\" /&gt;');\n    if (!clearedOnce) {\n        addText('&lt;style&gt;#divOutput &gt; .clearedScreen { display: none; }&lt;/style&gt;');\n    }\n    clearedOnce = true;\n    $('#divOutput').children().addClass('clearedScreen');\n    $('#divOutput').css('min-height', 0);\n    createNewDiv('left');\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $('html,body').scrollTop(0);\n    }, 100);\n}\n</code></pre>\n<hr>\n<p>The transcript stuff:</p>\n<pre><code>var transcriptVar = \"\";\nfunction addTranscriptEntry(text) {\n    transcriptVar += text;\n};\n\n\nfunction showTranscript() {\n    var transcriptDivString = \"\";\n    transcriptDivString += \"&lt;div \";\n    transcriptDivString += \"id='transcript-dialog' \";\n    transcriptDivString += \"style='display:none;'&gt;\";\n    transcriptDivString += \"&lt;div id='transcriptdata'&gt;&lt;/div&gt;&lt;/div&gt;\";\n    addText(transcriptDivString);\n    var transcriptDialog = $(\"#transcript-dialog\").dialog({\n        autoOpen: false,\n        width: 600,\n        height: 500,\n        title: \"Transcript\",\n        buttons: {\n            Ok: function () {\n                $(this).dialog(\"close\");\n                $(this).remove();\n            },\n            Print: function () {\n                printTranscriptDiv();\n            },\n        },\n        show: { effect: \"fadeIn\", duration: 500 },\n        modal: true,\n    });\n    $('#transcriptdata').html($('#divOutput').html()); $(\"#transcriptdata *\").attr('style', '').attr('color', '');\n    transcriptDialog.dialog(\"open\");\n\n};\n\n\n\nfunction printTranscriptDiv() {\n    var iframe = document.createElement('iframe');\n    document.body.appendChild(iframe);\n    iframe.contentWindow.document.write($(\"#transcriptdata\").html());\n    iframe.contentWindow.print();\n    document.body.removeChild(iframe);\n    $(\"#transcript-dialog\").dialog(\"close\");\n    $(\"#transcript-dialog\").remove();\n};\n</code></pre>\n<hr>\n<p>The Quest command:</p>\n<pre><code>  &lt;command name=\"view_transcript_cmd\"&gt;\n    &lt;pattern&gt;transcript;script;view script;view transcript;display transcript;view the transcript;display the transcript&lt;/pattern&gt;\n    &lt;script&gt;\n      game.notarealturn = true\n      JS.showTranscript ()\n    &lt;/script&gt;\n  &lt;/command&gt; \n</code></pre>\n<hr>\n<p>NOTE:</p>\n<p>I'm just piecing different bits of code together until things behave like I want them to.</p>\n<p>If this works, thank mrangel and Pixie.  They provided the good bits of code.</p>\n<p>If it doesn't work, blame me.</p>\n<p><span style=\"color: white; background: white\">CAN I PRINT THIS NOW???</span></p>\n\n",
      "PostDate": "2018-02-05T23:28:47.2878179Z",
      "LastEditDate": "2018-02-06T13:25:40.6105761Z",
      "link": null
    }
  ]
}
