{
  "Topic": {
    "TopicId": "3483",
    "ForumId": "10",
    "Title": "conditional look descriptions and scripts",
    "LastUpdated": "2013-03-13T13:08:24+00:00",
    "ReplyCount": 9
  },
  "Posts": [
    {
      "PostId": "22882",
      "UserId": 0,
      "Username": "djbriandamage",
      "UserAvatar": null,
      "UserGravatar": "5f02a90290adf8814ab583f311c12a32",
      "EditableText": "This is my first Quest game (I'm using the web version) so please pardon a noobish question.\n\nMy game involves a ride in a limousine.  Here's a basic pseudocode description of what I want.\n\n[list:ahctvyrj]\n[*:ahctvyrj]The privacy window is open by default.  (this is a window that separates the driver from the passenger)[/*:ahctvyrj]\n[*:ahctvyrj]Every turn that the player is inside the limo and the privacy window is open, the driver says something to the player.[/*:ahctvyrj]\n[*:ahctvyrj]When the player closes the privacy window the exit is unlocked and the player may proceed.[/*:ahctvyrj]\n[/list:u:ahctvyrj]\n\nI tried setting the privacy window as a container because the UI lets me set it as open is closeable.  I then made a turn script saying &quot;if object is open 'privacy window' then print message 'The driver talks to you'&quot;.  I also tried a conditional statement when you look out the door window saying &quot;if privacy window is open then print 'you watch the world go by.' else 'The world is still because the car is stopped.'&quot;\n\nMy problem is that the game acts as if the privacy window is open even when it is closed.  I close the privacy window but the driver still talks to me every turn and when I look out the door window the scenery is still moving.\n\nCan anyone please advise me?  Did I make a mistake in configuring the privacy window as a container?\n\nThanks!  Please let me know if I've neglected to share any important information.",
      "EditableFormat": "bbcode",
      "HTML": "This is my first Quest game (I'm using the web version) so please pardon a noobish question.<br/><br/>My game involves a ride in a limousine.  Here's a basic pseudocode description of what I want.<br/><br/>[list]<br/>[*]The privacy window is open by default.  (this is a window that separates the driver from the passenger)[/*]<br/>[*]Every turn that the player is inside the limo and the privacy window is open, the driver says something to the player.[/*]<br/>[*]When the player closes the privacy window the exit is unlocked and the player may proceed.[/*]<br/>[/list:u]<br/><br/>I tried setting the privacy window as a container because the UI lets me set it as open is closeable.  I then made a turn script saying &quot;if object is open 'privacy window' then print message 'The driver talks to you'&quot;.  I also tried a conditional statement when you look out the door window saying &quot;if privacy window is open then print 'you watch the world go by.' else 'The world is still because the car is stopped.'&quot;<br/><br/>My problem is that the game acts as if the privacy window is open even when it is closed.  I close the privacy window but the driver still talks to me every turn and when I look out the door window the scenery is still moving.<br/><br/>Can anyone please advise me?  Did I make a mistake in configuring the privacy window as a container?<br/><br/>Thanks!  Please let me know if I've neglected to share any important information.",
      "PostDate": "2013-02-22T18:20:33+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "22886",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "What would be most helpful is if you could post your file so far. Then we can get down to the nitty gritty details.",
      "EditableFormat": "bbcode",
      "HTML": "What would be most helpful is if you could post your file so far. Then we can get down to the nitty gritty details.",
      "PostDate": "2013-02-22T20:49:12+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "22887",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Sorry, you did say the web version... Is there a way we can see your code?",
      "EditableFormat": "bbcode",
      "HTML": "Sorry, you did say the web version... Is there a way we can see your code?",
      "PostDate": "2013-02-22T20:53:19+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "22895",
      "UserId": 0,
      "Username": "djbriandamage",
      "UserAvatar": null,
      "UserGravatar": "5f02a90290adf8814ab583f311c12a32",
      "EditableText": "I don't see a way to export or save my code from the web version.  Maybe I'll redo what I have in the local client and see if I have any luck.  \n\nThanks for your reply.",
      "EditableFormat": "bbcode",
      "HTML": "I don't see a way to export or save my code from the web version.  Maybe I'll redo what I have in the local client and see if I have any luck.  <br/><br/>Thanks for your reply.",
      "PostDate": "2013-02-23T05:32:44+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "22898",
      "UserId": 0,
      "Username": "sonic102",
      "UserAvatar": null,
      "UserGravatar": "fd0d4fb0d4f66001ed8c262e48930d07",
      "EditableText": "-Is the container closable?\n-Are you sure it is a container?\n-Are there any close scripts that open it again?\n-Is it in the limo?\n-Is it visible?\n\nThese tiny mistakes everyone makes may contain the problem. It happens to everyone.",
      "EditableFormat": "bbcode",
      "HTML": "-Is the container closable?<br/>-Are you sure it is a container?<br/>-Are there any close scripts that open it again?<br/>-Is it in the limo?<br/>-Is it visible?<br/><br/>These tiny mistakes everyone makes may contain the problem. It happens to everyone.",
      "PostDate": "2013-02-23T07:09:54+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "23342",
      "UserId": 0,
      "Username": "djbriandamage",
      "UserAvatar": null,
      "UserGravatar": "5f02a90290adf8814ab583f311c12a32",
      "EditableText": "Sorry for my delayed reply.  I saw your answer right away, sonic102, but was busy testing.\n\nI've tried setting the object as a container, limited container, closed container, and openable/closeable container.  There are no other scripts that open it again.  It is in the limo and is visible.  It can be closed but not opened, and it starts open.\n\nHere's how I have it configured now: [img:595ujndz]http&#58;//d&#46;demodulated&#46;com/window&#46;png[/img:595ujndz]\n\nI have two scripts.  One runs when the window is closed, unlocking the room's only exit.  That script works.  The other is a turn script that says &quot;if the window is open the chauffeur talks to you every turn, else he is silent&quot; but the chauffeur talks every turn regardless of whether the window is open.\n\nLooks like code view has been added to the web interface so here goes!\n\nThe first time you close the window (which is currently an openable/closeable container that starts open, cannot be opened, and can be closed) this script runs.  I know it succeeds because it displays the message and unlocks the room's only exit:\n\n[code:595ujndz]firsttime {\n  UnlockExit (limodoor)\n  msg (&quot;You have closed the privacy window&#46;&quot;)\n}\notherwise {\n}[/code:595ujndz]\n\nThe turn script evaluates whether the window is open and should display a message accordingly, but only the &quot;window open&quot; message displays, even after the script above succeeds.  It's as if the game knows when the window &quot;is now being closed&quot; but doesn't recognize it in subsequent turns as &quot;is closed&quot;.\n\n[code:595ujndz]if (not privacy window&#46;isopen) {\n  msg (&quot;window closed, driver is silent&quot;)\n}\nelse {\n  msg (&quot;window open, driver yammers&quot;)\n}[/code:595ujndz]\n\nHere is the output of a test run:\n\n[quote:595ujndz]You are in a limousine.\nYou can see a privacy window, a door and a chauffeur.\nYou can go north.\nIt's fancy.\nwindow open, driver yammers\n\n&gt; look at privacy window\nThe window is open.\nwindow open, driver yammers\n\n&gt; open privacy window\nYou can't open it.\nwindow open, driver yammers\n\n&gt; n\nThat way is locked.\nwindow open, driver yammers\n\n&gt; close privacy window\nYou have closed the privacy window.\nwindow open, driver yammers\n\n&gt; look at privacy window\nThe window is open.\nwindow open, driver yammers\n\n&gt; n\nYou swipe your platinum American Excess through the reader recessed in the car door (no tip) and exit without acknowledging the overfriendly driver. The limo pulls away and you face the restaurant.\n\nYou are outside a fancy restaurant.[/quote:595ujndz]",
      "EditableFormat": "bbcode",
      "HTML": "Sorry for my delayed reply.  I saw your answer right away, sonic102, but was busy testing.<br/><br/>I've tried setting the object as a container, limited container, closed container, and openable/closeable container.  There are no other scripts that open it again.  It is in the limo and is visible.  It can be closed but not opened, and it starts open.<br/><br/>Here's how I have it configured now: <img src=\"http&#58;//d&#46;demodulated&#46;com/window&#46;png\" alt=\"\" /><br/><br/>I have two scripts.  One runs when the window is closed, unlocking the room's only exit.  That script works.  The other is a turn script that says &quot;if the window is open the chauffeur talks to you every turn, else he is silent&quot; but the chauffeur talks every turn regardless of whether the window is open.<br/><br/>Looks like code view has been added to the web interface so here goes!<br/><br/>The first time you close the window (which is currently an openable/closeable container that starts open, cannot be opened, and can be closed) this script runs.  I know it succeeds because it displays the message and unlocks the room's only exit:<br/><br/><pre><code>firsttime {<br/>  UnlockExit (limodoor)<br/>  msg (&quot;You have closed the privacy window&#46;&quot;)<br/>}<br/>otherwise {<br/>}</code></pre><br/><br/>The turn script evaluates whether the window is open and should display a message accordingly, but only the &quot;window open&quot; message displays, even after the script above succeeds.  It's as if the game knows when the window &quot;is now being closed&quot; but doesn't recognize it in subsequent turns as &quot;is closed&quot;.<br/><br/><pre><code>if (not privacy window&#46;isopen) {<br/>  msg (&quot;window closed, driver is silent&quot;)<br/>}<br/>else {<br/>  msg (&quot;window open, driver yammers&quot;)<br/>}</code></pre><br/><br/>Here is the output of a test run:<br/><br/><blockquote><p>You are in a limousine.<br/>You can see a privacy window, a door and a chauffeur.<br/>You can go north.<br/>It's fancy.<br/>window open, driver yammers<br/><br/>&gt; look at privacy window<br/>The window is open.<br/>window open, driver yammers<br/><br/>&gt; open privacy window<br/>You can't open it.<br/>window open, driver yammers<br/><br/>&gt; n<br/>That way is locked.<br/>window open, driver yammers<br/><br/>&gt; close privacy window<br/>You have closed the privacy window.<br/>window open, driver yammers<br/><br/>&gt; look at privacy window<br/>The window is open.<br/>window open, driver yammers<br/><br/>&gt; n<br/>You swipe your platinum American Excess through the reader recessed in the car door (no tip) and exit without acknowledging the overfriendly driver. The limo pulls away and you face the restaurant.<br/><br/>You are outside a fancy restaurant.</p></blockquote>",
      "PostDate": "2013-03-12T18:39:06+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "23343",
      "UserId": 0,
      "Username": "TriangleGames",
      "UserAvatar": null,
      "UserGravatar": "134d9e995777da65c5cf8efda551d579",
      "EditableText": "I believe setting your own script for &quot;when closing object&quot; overrides the default, so you need to &quot;manually&quot; close the window as a part of the script.",
      "EditableFormat": "bbcode",
      "HTML": "I believe setting your own script for &quot;when closing object&quot; overrides the default, so you need to &quot;manually&quot; close the window as a part of the script.",
      "PostDate": "2013-03-12T18:55:26+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "23344",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "It seems the close script replaces the default behavior. In other words, if you supply a close script, then you are responsible for doing the actual closing. Just add this line to your script&#058;\n\n    this.isopen = false\n\nand it should work.\n\n(Edit: Basically, what TriangleGames said. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> )",
      "EditableFormat": "bbcode",
      "HTML": "It seems the close script replaces the default behavior. In other words, if you supply a close script, then you are responsible for doing the actual closing. Just add this line to your script&#058;<br/><br/>    this.isopen = false<br/><br/>and it should work.<br/><br/>(Edit: Basically, what TriangleGames said. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> )",
      "PostDate": "2013-03-12T18:56:56+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "23353",
      "UserId": 0,
      "Username": "djbriandamage",
      "UserAvatar": null,
      "UserGravatar": "5f02a90290adf8814ab583f311c12a32",
      "EditableText": "Ah, thanks.  That's kind of unexpected.  Now the question is whether I can customize a script in this fashion using the web UI.",
      "EditableFormat": "bbcode",
      "HTML": "Ah, thanks.  That's kind of unexpected.  Now the question is whether I can customize a script in this fashion using the web UI.",
      "PostDate": "2013-03-13T12:50:18+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "23356",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "I slipped back into &quot;script mode&quot; and said &quot;this&quot;, but you can easily use &quot;privacy window&quot; in the script just as well to set the attribute, with the &quot;Set object flag&quot; command.",
      "EditableFormat": "bbcode",
      "HTML": "I slipped back into &quot;script mode&quot; and said &quot;this&quot;, but you can easily use &quot;privacy window&quot; in the script just as well to set the attribute, with the &quot;Set object flag&quot; command.",
      "PostDate": "2013-03-13T13:08:24+00:00",
      "LastEditDate": null
    }
  ]
}
