{
  "Topic": {
    "TopicId": "980",
    "ForumId": "10",
    "Title": "I want to make a shop",
    "LastUpdated": "2006-02-02T09:03:18+00:00",
    "ReplyCount": 6
  },
  "Posts": [
    {
      "PostId": "7329",
      "UserId": 0,
      "Username": "ramtha",
      "UserAvatar": null,
      "UserGravatar": "c19cfa838fae3f800fd5859417259a81",
      "EditableText": "I'm trying to figure out how to create a shop where, oddly enough, you can buy items. I wanted to make a menu with the list of items so you could just select the one you wanted and get it, But when i did this, and you chose the item again, i would get an error message and the game would shut off. Any suggestions.\nI would have just said if you have the item then dont give it, but for items you can have more than one of,such as potions, I'm having problems.",
      "EditableFormat": "bbcode",
      "HTML": "I'm trying to figure out how to create a shop where, oddly enough, you can buy items. I wanted to make a menu with the list of items so you could just select the one you wanted and get it, But when i did this, and you chose the item again, i would get an error message and the game would shut off. Any suggestions.<br/>I would have just said if you have the item then dont give it, but for items you can have more than one of,such as potions, I'm having problems.",
      "PostDate": "2006-01-28T21:31:07+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7331",
      "UserId": 0,
      "Username": "Elexxorine",
      "UserAvatar": null,
      "UserGravatar": "a220ee44d8fe2f07029cf1f61b98bf40",
      "EditableText": "i've created a working shop system for my game 'neverquest'. i'll prolly be able to make a demo version for you soon...",
      "EditableFormat": "bbcode",
      "HTML": "i've created a working shop system for my game 'neverquest'. i'll prolly be able to make a demo version for you soon...",
      "PostDate": "2006-01-30T09:10:35+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7332",
      "UserId": 0,
      "Username": "ramtha",
      "UserAvatar": null,
      "UserGravatar": "c19cfa838fae3f800fd5859417259a81",
      "EditableText": "sweet ^_^",
      "EditableFormat": "bbcode",
      "HTML": "sweet ^_^",
      "PostDate": "2006-01-30T18:53:24+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7333",
      "UserId": 0,
      "Username": "Elexxorine",
      "UserAvatar": null,
      "UserGravatar": "a220ee44d8fe2f07029cf1f61b98bf40",
      "EditableText": "here's some codes grabbed from 'neverquest', but you can use them.\n[code:156ywnkw]\tcommand &lt;/shop list&gt; &#123;\n\t\tif property &lt;#quest&#46;currentroom&#91;userid&#93;#; shop&gt; then do &lt;shop_list&gt; else msg &lt;This is not a shop&#46;&gt;\t\t&#125;\n\n\tcommand &lt;/buy #num# #shopitem#; buy #num# #shopitem#&gt; do &lt;shop_buy&gt;\n\n\tcommand &lt;inventory; /inventory; inv; /inv; i; /i&gt; &#123;\n\t\tmsg &lt;|cyYou have $objectproperty&#40;#name&#91;userid&#93;#;gold&#41;$ Gold&#46;|cb&gt;\n\t\tset numeric &lt;count1; 0&gt;\n\t\tset numeric &lt;count2; 0&gt;\n\t\tfor each object in &lt;item_storage&gt; &#123;\n\t\t\tinc &lt;count1&gt;\n\t\t\tset numeric &lt;own; $objectproperty&#40;#name&#91;userid&#93;#; item_#quest&#46;thing#&#41;$&gt;\n\t\t\tif &#40; %own% &gt; 0 &#41; then msg &lt;|b$displayname&#40;#quest&#46;thing#&#41;$&#58;|xb %own%&#46;&gt; else inc &lt;count2&gt;\n\t\t&#125; \n\t\tif &#40; %count2% = %count1% &#41; then msg &lt;You aren't carrying anything&#46;&gt;\n\t&#125;\n\n\tdefine variable &lt;gold&gt;\n\t\tscope local\n\t\ttype numeric\n\t\tvalue &lt;o&gt;\n\t\tdisplay &lt;Gold&#58; $objectproperty&#40;#name&#91;userid&#93;#;gold&#41;$&#46;&gt;\n\tend define[/code:156ywnkw]These are global commands and should go in the game define block.[code:156ywnkw]define room &lt;shop room&gt;\n\talias &lt;Weapon smith's, Xelenq&gt;\n\tlook &lt;Bast is sitting by the counter, waiting for a customer&#46; There's an anvil near the wall and many tools and bits of metal hanging on the walls&#46;|n|nType '|cr/shop list|cb' to see what's for sale&#46;&gt;\n\tout &lt;town1, street2&gt;\n\tproperties &lt;shop; name=xel&gt;\n\n\tdefine object &lt;bast&gt;\n\t\talt &lt;Bast; owner; shopowner; shop owner&gt;\n\t\tlook &lt;Bast is sitting by the counter, looking bored&#46;&gt;\n\t\tproperties &lt;normal; living; person; not attackable&gt;\n\t\tdisplaytype &lt;shop owner&gt;\n\t\tspeak choose &lt;shop_menu&gt;\n\tend define\n\n\tdefine object &lt;xelsi_knife&gt;\n\t\talias &lt;knife&gt;\n\t\tlook &lt;A basic weapon&#46; There are $objectproperty&#40;knife;number&#41;$ for sale&#46;&gt;\n\t\tproperties &lt;invisible; shopitem; number=5; m_price=15; s_price=0; b_price=0&gt;\n\tend define\n\n\tdefine object &lt;xelsi_staff&gt;\n\t\talias &lt;staff&gt;\n\t\tproperties &lt;invisible; shopitem; number=2; m_price=16; s_price=0; b_price=0&gt;\n\tend define\n\nend define\n\n\ndefine room &lt;player_storage&gt;\n\n\n\tdefine object &lt;Elexxorine&gt;\n\t\tlook &lt;Elexxorine is the creator of NeverQuest&#46;&gt;\n\t\tdisplaytype &lt;Admin&gt;\n\t\tproperties &lt;gold=30000; item_knife=0; item_staff=0; item_banesword=0; item_fclothtop=0; item_fclothleg=0; item_fleathboot=0; item_furcloak=0; item_mithpauld=0; item_mithcuirass=0; item_mithgreave=0&gt;\n\tend define\n\nend define\n\n\ndefine room &lt;item_storage&gt;\n\n\tdefine object &lt;knife&gt;\n\t\tproperties &lt;pos=equip_weapon; equipable; name=knife&gt;\n\tend define\n\n\tdefine object &lt;staff&gt;\n\t\tproperties &lt;pos=equip_weapon; equipable; name=staff&gt;\n\tend define\n\n\tdefine object &lt;banesword&gt;\n\t\talias &lt;bane sword&gt;\n\t\tproperties &lt;pos=equip_weapon; equipable; name=banesword&gt;\n\tend define\n\tdefine object &lt;fclothtop&gt;\n\t\talias &lt;fine cloth shirt&gt;\n\t\tproperties &lt;pos=wear_body; equipable; name=fclothtop&gt;\n\tend define\n\tdefine object &lt;fclothleg&gt;\n\t\talias &lt;fine cloth legs&gt;\n\t\tproperties &lt;pos=wear_legs; equipable; name=fclothleg&gt;\n\tend define\n\tdefine object &lt;fleathboot&gt;\n\t\talias &lt;fine leather boots&gt;\n\t\tproperties &lt;pos=wear_boots; equipable; name=fleathboot&gt;\n\tend define\n\tdefine object &lt;furcloak&gt;\n\t\talias &lt;fur cloak&gt;\n\t\tproperties &lt;pos=wear_back; equipable; name=furcloak&gt;\n\tend define\n\tdefine object &lt;mithpauld&gt;\n\t\talias &lt;mithrel pauldrons&gt;\n\t\tproperties &lt;pos=equip_shoulders; equipable; name=mithpauld&gt;\n\tend define\n\tdefine object &lt;mithcuirass&gt;\n\t\talias &lt;mithrel cuirass&gt;\n\t\tproperties &lt;pos=equip_weapon; equipable; name=mithcuirass&gt;\n\tend define\n\tdefine object &lt;mithgreave&gt;\n\t\talias &lt;mithrel greaves&gt;\n\t\tproperties &lt;pos=equip_legs; equipable; name=mithgreave&gt;\n\tend define\n\nend define\n\n\ndefine procedure &lt;shop_list&gt;\n\tfor each object in &lt;#quest&#46;currentroom&#91;userid&#93;#&gt; &#123;\n\t\tif property &lt;#quest&#46;thing#; shopitem&gt; then &#123;\n\t\t\tset numeric &lt;number; $objectproperty&#40;#quest&#46;thing#;number&#41;$&gt;\n\t\t\tset string &lt;obname; $displayname&#40;#quest&#46;thing#&#41;$&gt;\n\t\t\tif &#40; %number% &gt; 0 &#41; then &#123;\n\t\t\t\tdo &lt;price_calc&gt;\n\t\t\t\tmsg &lt;|b|cr$capfirst&#40;#obname#&#41;$&#58;|xb|n|cgBuy for&#58; |cy$objectproperty&#40;#quest&#46;thing#;s_price&#41;$|cb&#46;|n|cgSell for&#58; |cy$objectproperty&#40;#quest&#46;thing#;b_price&#41;$|cb&#46;&gt;\n\t\t\t&#125;\n\t\t\telse &#123;\n\t\t\t\tproperty &lt;#quest&#46;thing#; b_price=$objectproperty&#40;#quest&#46;thing#; m_price&#41;$&gt;\n\t\t\t\tmsg &lt;|b|cr$capfirst&#40;#obname#&#41;$&#58;|cy|xbSOLD OUT!|n|cgBuying for&#58; |cy$objectproperty&#40;#quest&#46;thing#;b_price&#41;$|cb&#46;&gt;\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;\n\tmsg &lt;|crTo buy something type '/buy NUMBER ITEM', eg&#58; '/buy 4 staff'&#46;|cb&gt;\n\nend define\n\n\ndefine procedure &lt;price_calc&gt;\n\tset numeric &lt;maxprice; $objectproperty&#40;#quest&#46;thing#;m_price&#41;$&gt;\n\tset numeric &lt;sellprice; %maxprice% / %number%&gt;\n\tif &#40; %sellprice% = 0 &#41; then set numeric &lt;sellprice; %maxprice%&gt;\n\tproperty &lt;#quest&#46;thing#; s_price=%sellprice%&gt;\n\tset numeric &lt;buyprice; %number% * 2&gt;\n\tset numeric &lt;buyprice; %maxprice% / %buyprice%&gt;\n\tif &#40; %buyprice% = 0 &#41; then set numeric &lt;buyprice; %maxprice%&gt;\n\tproperty &lt;#quest&#46;thing#; b_price=%buyprice%&gt;\n\t\nend define\n\n\ndefine procedure &lt;shop_buy&gt;\n\tif property &lt;#quest&#46;currentroom&#91;userid&#93;#; shop&gt; then &#123;\n\t\tset stirng &lt;shopitem; $getobjectname&#40;#shopitem#&#41;$&gt;\n\t\tset string &lt;alias; $displayname&#40;#shopitem#&#41;$&gt;\n\t\tset numeric &lt;num; #num#&gt;\n\t\tif &#40; %num% = 0 &#41; then msg &lt;&quot;Fine&#46;&#46;&#46;&quot;&gt; else  &#123; \n\t\t\tif here &lt;#shopitem#&gt; then if property &lt;#shopitem#; shopitem&gt; then &#123;\n\t\t\t\tset numeric &lt;num2; $objectproperty&#40;#shopitem#; number&#41;$&gt;\n\t\t\t\tif &#40; %num% &gt; %num2% &#41; then msg &lt;&quot;We don't have that many&#46;&#46;&#46;&quot;&gt; else &#123;\n\t\t\t\t\tset numeric &lt;number; $objectproperty&#40;#shopitem#;number&#41;$&gt;\n\t\t\t\t\tset string &lt;quest&#46;thing; #shopitem#&gt;\n\t\t\t\t\tdo &lt;price_calc&gt;\n\t\t\t\t\t' set numeric &lt;moneyi; $objectproperty&#40;#shopitem#;s_price&#41;$&gt;\n\t\t\t\t\tset numeric &lt;moneyi; %sellprice% * %num%&gt;\n\t\t\t\t\tset numeric &lt;moneys; $objectproperty&#40;#name&#91;userid&#93;#; gold&#41;$&gt;\n\t\t\t\t\tif ask &lt;%num% $displayname&#40;#shopitem#&#41;$&#40;s&#41; cost %moneyi%, you have %moneys%&#46; Are you sure you want to buy?&gt; then &#123;\n\t\t\t\t\t\tif &#40; %moneyi% &gt; %moneys% &#41; then &#123;\n\t\t\t\t\t\t\tmsg &lt;&quot;I'm sorry, but you don't seem to have enough money &#46;&#46;&#46;&quot;&gt;\n\t\t\t\t\t\t&#125;\n\t\t\t\t\t\telse &#123;\n\t\t\t\t\t\t\tset numeric &lt;pprice; %moneys% - %moneyi%&gt;\n\t\t\t\t\t\t\tproperty &lt;#name&#91;userid&#93;#; gold=%pprice%&gt;\n\t\t\t\t\t\t\tset &lt;num2; %num2% - %num%&gt;\n\t\t\t\t\t\t\tproperty &lt;#shopitem#; number=%num2%&gt;\n\t\t\t\t\t\t\t' msg &lt;You hand over %moneyi% |cygold|cb and receive %num% $displayname&#40;#shopitem#&#41;$&#40;s&#41;&#46;&gt; \n\t\t\t\t\t\t\tset numeric &lt;ownitem; $objectproperty&#40;#name&#91;userid&#93;#; item_#alias#&#41;$&gt;\n\t\t\t\t\t\t\tinc &lt;ownitem; %num%&gt;\n\t\t\t\t\t\t\tproperty &lt;#name&#91;userid&#93;#; item_#alias#=%ownitem%&gt;\n\n\t\t\t\t\t\t\tset string &lt;talker; #name&#91;userid&#93;#&gt;\n\t\t\t\t\t\t\tfor each object in &lt;#quest&#46;currentroom&#91;userid&#93;#&gt; &#123;\n\t\t\t\t\t\t\t\tset string &lt;name; $displayname&#40;#quest&#46;thing#&#41;$&gt;\n\t\t\t\t\t\t\t\tif property &lt;#name#; real&gt; then &#123;\n\t\t\t\t\t\t\t\t\tif &#40; $displayname&#40;#quest&#46;thing#&#41;$ = #talker# &#41; then &#123;\n\t\t\t\t\t\t\t\t\t\tmsgto &lt;$objectproperty&#40;#quest&#46;thing#;userid&#41;$; You hand over |b|cy%moneyi% gold|cb|xb and receive %num% $displayname&#40;#shopitem#&#41;$&#40;s&#41;&#46;&gt;\n\t\t\t\t\t\t\t\t\t&#125;\n\t\t\t\t\t\t\t\t\telse &#123;\n\t\t\t\t\t\t\t\t\t\t' if property &lt;#quest&#46;thing#; real&gt; then &#123;\n\t\t\t\t\t\t\t\t\t\t msgto &lt;$objectproperty&#40;#quest&#46;thing#;userid&#41;$; |b|cy$capfirst&#40;#talker#&#41;$|xb buys %num% $displayname&#40;#shopitem#&#41;$&#40;s&#41; for %moneyi% gold&#46;|cb&gt;\n\t\t\t\t\t\t\t\t\t&#125;\n\t\t\t\t\t\t\t\t&#125;\n\t\t\t\t\t\t\t&#125;\n\t\t\t\t\t\t&#125;\n\t\t\t\t\t&#125; \n\t\t\t\t\telse msg &lt;&quot;Fine&#46;&#46;&#46;&quot;&gt;\n\t\t\t\t&#125;\n\t\t\t&#125; \n\t\t\telse msg &lt;&quot;I'm sorry, but we don't sell that here&#46;&quot;&gt;\n\t\t&#125;\n\t&#125; \n\telse msg &lt;This isn't a shop&#46;&gt;\n\nend define[/code:156ywnkw]theses are the other stuff. read them over....",
      "EditableFormat": "bbcode",
      "HTML": "here's some codes grabbed from 'neverquest', but you can use them.<br/><pre><code>\tcommand &lt;/shop list&gt; &#123;<br/>\t\tif property &lt;#quest&#46;currentroom&#91;userid&#93;#; shop&gt; then do &lt;shop_list&gt; else msg &lt;This is not a shop&#46;&gt;\t\t&#125;<br/><br/>\tcommand &lt;/buy #num# #shopitem#; buy #num# #shopitem#&gt; do &lt;shop_buy&gt;<br/><br/>\tcommand &lt;inventory; /inventory; inv; /inv; i; /i&gt; &#123;<br/>\t\tmsg &lt;|cyYou have $objectproperty&#40;#name&#91;userid&#93;#;gold&#41;$ Gold&#46;|cb&gt;<br/>\t\tset numeric &lt;count1; 0&gt;<br/>\t\tset numeric &lt;count2; 0&gt;<br/>\t\tfor each object in &lt;item_storage&gt; &#123;<br/>\t\t\tinc &lt;count1&gt;<br/>\t\t\tset numeric &lt;own; $objectproperty&#40;#name&#91;userid&#93;#; item_#quest&#46;thing#&#41;$&gt;<br/>\t\t\tif &#40; %own% &gt; 0 &#41; then msg &lt;|b$displayname&#40;#quest&#46;thing#&#41;$&#58;|xb %own%&#46;&gt; else inc &lt;count2&gt;<br/>\t\t&#125; <br/>\t\tif &#40; %count2% = %count1% &#41; then msg &lt;You aren't carrying anything&#46;&gt;<br/>\t&#125;<br/><br/>\tdefine variable &lt;gold&gt;<br/>\t\tscope local<br/>\t\ttype numeric<br/>\t\tvalue &lt;o&gt;<br/>\t\tdisplay &lt;Gold&#58; $objectproperty&#40;#name&#91;userid&#93;#;gold&#41;$&#46;&gt;<br/>\tend define</code></pre>These are global commands and should go in the game define block.<pre><code>define room &lt;shop room&gt;<br/>\talias &lt;Weapon smith's, Xelenq&gt;<br/>\tlook &lt;Bast is sitting by the counter, waiting for a customer&#46; There's an anvil near the wall and many tools and bits of metal hanging on the walls&#46;|n|nType '|cr/shop list|cb' to see what's for sale&#46;&gt;<br/>\tout &lt;town1, street2&gt;<br/>\tproperties &lt;shop; name=xel&gt;<br/><br/>\tdefine object &lt;bast&gt;<br/>\t\talt &lt;Bast; owner; shopowner; shop owner&gt;<br/>\t\tlook &lt;Bast is sitting by the counter, looking bored&#46;&gt;<br/>\t\tproperties &lt;normal; living; person; not attackable&gt;<br/>\t\tdisplaytype &lt;shop owner&gt;<br/>\t\tspeak choose &lt;shop_menu&gt;<br/>\tend define<br/><br/>\tdefine object &lt;xelsi_knife&gt;<br/>\t\talias &lt;knife&gt;<br/>\t\tlook &lt;A basic weapon&#46; There are $objectproperty&#40;knife;number&#41;$ for sale&#46;&gt;<br/>\t\tproperties &lt;invisible; shopitem; number=5; m_price=15; s_price=0; b_price=0&gt;<br/>\tend define<br/><br/>\tdefine object &lt;xelsi_staff&gt;<br/>\t\talias &lt;staff&gt;<br/>\t\tproperties &lt;invisible; shopitem; number=2; m_price=16; s_price=0; b_price=0&gt;<br/>\tend define<br/><br/>end define<br/><br/><br/>define room &lt;player_storage&gt;<br/><br/><br/>\tdefine object &lt;Elexxorine&gt;<br/>\t\tlook &lt;Elexxorine is the creator of NeverQuest&#46;&gt;<br/>\t\tdisplaytype &lt;Admin&gt;<br/>\t\tproperties &lt;gold=30000; item_knife=0; item_staff=0; item_banesword=0; item_fclothtop=0; item_fclothleg=0; item_fleathboot=0; item_furcloak=0; item_mithpauld=0; item_mithcuirass=0; item_mithgreave=0&gt;<br/>\tend define<br/><br/>end define<br/><br/><br/>define room &lt;item_storage&gt;<br/><br/>\tdefine object &lt;knife&gt;<br/>\t\tproperties &lt;pos=equip_weapon; equipable; name=knife&gt;<br/>\tend define<br/><br/>\tdefine object &lt;staff&gt;<br/>\t\tproperties &lt;pos=equip_weapon; equipable; name=staff&gt;<br/>\tend define<br/><br/>\tdefine object &lt;banesword&gt;<br/>\t\talias &lt;bane sword&gt;<br/>\t\tproperties &lt;pos=equip_weapon; equipable; name=banesword&gt;<br/>\tend define<br/>\tdefine object &lt;fclothtop&gt;<br/>\t\talias &lt;fine cloth shirt&gt;<br/>\t\tproperties &lt;pos=wear_body; equipable; name=fclothtop&gt;<br/>\tend define<br/>\tdefine object &lt;fclothleg&gt;<br/>\t\talias &lt;fine cloth legs&gt;<br/>\t\tproperties &lt;pos=wear_legs; equipable; name=fclothleg&gt;<br/>\tend define<br/>\tdefine object &lt;fleathboot&gt;<br/>\t\talias &lt;fine leather boots&gt;<br/>\t\tproperties &lt;pos=wear_boots; equipable; name=fleathboot&gt;<br/>\tend define<br/>\tdefine object &lt;furcloak&gt;<br/>\t\talias &lt;fur cloak&gt;<br/>\t\tproperties &lt;pos=wear_back; equipable; name=furcloak&gt;<br/>\tend define<br/>\tdefine object &lt;mithpauld&gt;<br/>\t\talias &lt;mithrel pauldrons&gt;<br/>\t\tproperties &lt;pos=equip_shoulders; equipable; name=mithpauld&gt;<br/>\tend define<br/>\tdefine object &lt;mithcuirass&gt;<br/>\t\talias &lt;mithrel cuirass&gt;<br/>\t\tproperties &lt;pos=equip_weapon; equipable; name=mithcuirass&gt;<br/>\tend define<br/>\tdefine object &lt;mithgreave&gt;<br/>\t\talias &lt;mithrel greaves&gt;<br/>\t\tproperties &lt;pos=equip_legs; equipable; name=mithgreave&gt;<br/>\tend define<br/><br/>end define<br/><br/><br/>define procedure &lt;shop_list&gt;<br/>\tfor each object in &lt;#quest&#46;currentroom&#91;userid&#93;#&gt; &#123;<br/>\t\tif property &lt;#quest&#46;thing#; shopitem&gt; then &#123;<br/>\t\t\tset numeric &lt;number; $objectproperty&#40;#quest&#46;thing#;number&#41;$&gt;<br/>\t\t\tset string &lt;obname; $displayname&#40;#quest&#46;thing#&#41;$&gt;<br/>\t\t\tif &#40; %number% &gt; 0 &#41; then &#123;<br/>\t\t\t\tdo &lt;price_calc&gt;<br/>\t\t\t\tmsg &lt;|b|cr$capfirst&#40;#obname#&#41;$&#58;|xb|n|cgBuy for&#58; |cy$objectproperty&#40;#quest&#46;thing#;s_price&#41;$|cb&#46;|n|cgSell for&#58; |cy$objectproperty&#40;#quest&#46;thing#;b_price&#41;$|cb&#46;&gt;<br/>\t\t\t&#125;<br/>\t\t\telse &#123;<br/>\t\t\t\tproperty &lt;#quest&#46;thing#; b_price=$objectproperty&#40;#quest&#46;thing#; m_price&#41;$&gt;<br/>\t\t\t\tmsg &lt;|b|cr$capfirst&#40;#obname#&#41;$&#58;|cy|xbSOLD OUT!|n|cgBuying for&#58; |cy$objectproperty&#40;#quest&#46;thing#;b_price&#41;$|cb&#46;&gt;<br/>\t\t\t&#125;<br/>\t\t&#125;<br/>\t&#125;<br/>\tmsg &lt;|crTo buy something type '/buy NUMBER ITEM', eg&#58; '/buy 4 staff'&#46;|cb&gt;<br/><br/>end define<br/><br/><br/>define procedure &lt;price_calc&gt;<br/>\tset numeric &lt;maxprice; $objectproperty&#40;#quest&#46;thing#;m_price&#41;$&gt;<br/>\tset numeric &lt;sellprice; %maxprice% / %number%&gt;<br/>\tif &#40; %sellprice% = 0 &#41; then set numeric &lt;sellprice; %maxprice%&gt;<br/>\tproperty &lt;#quest&#46;thing#; s_price=%sellprice%&gt;<br/>\tset numeric &lt;buyprice; %number% * 2&gt;<br/>\tset numeric &lt;buyprice; %maxprice% / %buyprice%&gt;<br/>\tif &#40; %buyprice% = 0 &#41; then set numeric &lt;buyprice; %maxprice%&gt;<br/>\tproperty &lt;#quest&#46;thing#; b_price=%buyprice%&gt;<br/>\t<br/>end define<br/><br/><br/>define procedure &lt;shop_buy&gt;<br/>\tif property &lt;#quest&#46;currentroom&#91;userid&#93;#; shop&gt; then &#123;<br/>\t\tset stirng &lt;shopitem; $getobjectname&#40;#shopitem#&#41;$&gt;<br/>\t\tset string &lt;alias; $displayname&#40;#shopitem#&#41;$&gt;<br/>\t\tset numeric &lt;num; #num#&gt;<br/>\t\tif &#40; %num% = 0 &#41; then msg &lt;&quot;Fine&#46;&#46;&#46;&quot;&gt; else  &#123; <br/>\t\t\tif here &lt;#shopitem#&gt; then if property &lt;#shopitem#; shopitem&gt; then &#123;<br/>\t\t\t\tset numeric &lt;num2; $objectproperty&#40;#shopitem#; number&#41;$&gt;<br/>\t\t\t\tif &#40; %num% &gt; %num2% &#41; then msg &lt;&quot;We don't have that many&#46;&#46;&#46;&quot;&gt; else &#123;<br/>\t\t\t\t\tset numeric &lt;number; $objectproperty&#40;#shopitem#;number&#41;$&gt;<br/>\t\t\t\t\tset string &lt;quest&#46;thing; #shopitem#&gt;<br/>\t\t\t\t\tdo &lt;price_calc&gt;<br/>\t\t\t\t\t' set numeric &lt;moneyi; $objectproperty&#40;#shopitem#;s_price&#41;$&gt;<br/>\t\t\t\t\tset numeric &lt;moneyi; %sellprice% * %num%&gt;<br/>\t\t\t\t\tset numeric &lt;moneys; $objectproperty&#40;#name&#91;userid&#93;#; gold&#41;$&gt;<br/>\t\t\t\t\tif ask &lt;%num% $displayname&#40;#shopitem#&#41;$&#40;s&#41; cost %moneyi%, you have %moneys%&#46; Are you sure you want to buy?&gt; then &#123;<br/>\t\t\t\t\t\tif &#40; %moneyi% &gt; %moneys% &#41; then &#123;<br/>\t\t\t\t\t\t\tmsg &lt;&quot;I'm sorry, but you don't seem to have enough money &#46;&#46;&#46;&quot;&gt;<br/>\t\t\t\t\t\t&#125;<br/>\t\t\t\t\t\telse &#123;<br/>\t\t\t\t\t\t\tset numeric &lt;pprice; %moneys% - %moneyi%&gt;<br/>\t\t\t\t\t\t\tproperty &lt;#name&#91;userid&#93;#; gold=%pprice%&gt;<br/>\t\t\t\t\t\t\tset &lt;num2; %num2% - %num%&gt;<br/>\t\t\t\t\t\t\tproperty &lt;#shopitem#; number=%num2%&gt;<br/>\t\t\t\t\t\t\t' msg &lt;You hand over %moneyi% |cygold|cb and receive %num% $displayname&#40;#shopitem#&#41;$&#40;s&#41;&#46;&gt; <br/>\t\t\t\t\t\t\tset numeric &lt;ownitem; $objectproperty&#40;#name&#91;userid&#93;#; item_#alias#&#41;$&gt;<br/>\t\t\t\t\t\t\tinc &lt;ownitem; %num%&gt;<br/>\t\t\t\t\t\t\tproperty &lt;#name&#91;userid&#93;#; item_#alias#=%ownitem%&gt;<br/><br/>\t\t\t\t\t\t\tset string &lt;talker; #name&#91;userid&#93;#&gt;<br/>\t\t\t\t\t\t\tfor each object in &lt;#quest&#46;currentroom&#91;userid&#93;#&gt; &#123;<br/>\t\t\t\t\t\t\t\tset string &lt;name; $displayname&#40;#quest&#46;thing#&#41;$&gt;<br/>\t\t\t\t\t\t\t\tif property &lt;#name#; real&gt; then &#123;<br/>\t\t\t\t\t\t\t\t\tif &#40; $displayname&#40;#quest&#46;thing#&#41;$ = #talker# &#41; then &#123;<br/>\t\t\t\t\t\t\t\t\t\tmsgto &lt;$objectproperty&#40;#quest&#46;thing#;userid&#41;$; You hand over |b|cy%moneyi% gold|cb|xb and receive %num% $displayname&#40;#shopitem#&#41;$&#40;s&#41;&#46;&gt;<br/>\t\t\t\t\t\t\t\t\t&#125;<br/>\t\t\t\t\t\t\t\t\telse &#123;<br/>\t\t\t\t\t\t\t\t\t\t' if property &lt;#quest&#46;thing#; real&gt; then &#123;<br/>\t\t\t\t\t\t\t\t\t\t msgto &lt;$objectproperty&#40;#quest&#46;thing#;userid&#41;$; |b|cy$capfirst&#40;#talker#&#41;$|xb buys %num% $displayname&#40;#shopitem#&#41;$&#40;s&#41; for %moneyi% gold&#46;|cb&gt;<br/>\t\t\t\t\t\t\t\t\t&#125;<br/>\t\t\t\t\t\t\t\t&#125;<br/>\t\t\t\t\t\t\t&#125;<br/>\t\t\t\t\t\t&#125;<br/>\t\t\t\t\t&#125; <br/>\t\t\t\t\telse msg &lt;&quot;Fine&#46;&#46;&#46;&quot;&gt;<br/>\t\t\t\t&#125;<br/>\t\t\t&#125; <br/>\t\t\telse msg &lt;&quot;I'm sorry, but we don't sell that here&#46;&quot;&gt;<br/>\t\t&#125;<br/>\t&#125; <br/>\telse msg &lt;This isn't a shop&#46;&gt;<br/><br/>end define</code></pre>theses are the other stuff. read them over....",
      "PostDate": "2006-02-01T09:09:17+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7334",
      "UserId": 0,
      "Username": "paul_one",
      "UserAvatar": null,
      "UserGravatar": "fef8a1875028f4300bb683f29c432894",
      "EditableText": "Be careful of the wordwrap and that game (neverquest) is for the multiplayer version of Quest.. So if you need single player please say so.\n\nI haven't had chance to read that Elex - formatting looks better than in the email I had.",
      "EditableFormat": "bbcode",
      "HTML": "Be careful of the wordwrap and that game (neverquest) is for the multiplayer version of Quest.. So if you need single player please say so.<br/><br/>I haven't had chance to read that Elex - formatting looks better than in the email I had.",
      "PostDate": "2006-02-01T13:40:38+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7335",
      "UserId": 0,
      "Username": "ramtha",
      "UserAvatar": null,
      "UserGravatar": "c19cfa838fae3f800fd5859417259a81",
      "EditableText": "I do need a single player... hee hee...",
      "EditableFormat": "bbcode",
      "HTML": "I do need a single player... hee hee...",
      "PostDate": "2006-02-01T18:38:15+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "7336",
      "UserId": 0,
      "Username": "Elexxorine",
      "UserAvatar": null,
      "UserGravatar": "a220ee44d8fe2f07029cf1f61b98bf40",
      "EditableText": "simple conversion.... just delete all the [userid]'s and change the properties to variables too...",
      "EditableFormat": "bbcode",
      "HTML": "simple conversion.... just delete all the [userid]'s and change the properties to variables too...",
      "PostDate": "2006-02-02T09:03:18+00:00",
      "LastEditDate": null
    }
  ]
}
