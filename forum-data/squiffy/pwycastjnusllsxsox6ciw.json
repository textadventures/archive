{
  "Topic": {
    "TopicId": "pwycastjnusllsxsox6ciw",
    "ForumId": "24",
    "Title": "Validation on textfield",
    "LastUpdated": "2020-03-27T17:02:11.7495884Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "4f850921-e854-46b4-9c6d-ce7b004c7efe",
      "UserId": 471394,
      "Username": "fvu109",
      "AvatarUrl": "https://secure.gravatar.com/avatar/b895f3cf2b427a32e38299edd44559a5?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have a simple textfield to capture the player character's name as ```{charname}```:\r\n\r\n```\r\n[[Character name]]:\r\nWhat is your character's name? \r\n\r\n<label>Character name</label>\r\n<input type=\"text\" id=\"character_name\">\r\n[[Select]](page2)\r\n\r\n[[page2]]:\r\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val());\r\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val().replace(/(^|\\W)\\w/, function(t) { return t.toUpperCase() })); \r\n\r\nHi, {charname}.\r\n```\r\n\r\nThere's no validation to force a user to complete the field, so they can go through the whole story with ```{charname}``` set to nothing. I'd like to detect if no value's been entered and send the user back to ```[[Character name]]```, but I can't find a way of doing it.  ```{if charname=:} ``` doesn't work, nor ```{if charname=null:}```\r\n\r\nCan anyone advise on how best to validate?",
      "EditableFormat": "markdown",
      "HTML": "<p>I have a simple textfield to capture the player character's name as <code>{charname}</code>:</p>\n<pre><code>[[Character name]]:\nWhat is your character's name? \n\n&lt;label&gt;Character name&lt;/label&gt;\n&lt;input type=\"text\" id=\"character_name\"&gt;\n[[Select]](page2)\n\n[[page2]]:\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val());\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val().replace(/(^|\\W)\\w/, function(t) { return t.toUpperCase() })); \n\nHi, {charname}.\n</code></pre>\n<p>There's no validation to force a user to complete the field, so they can go through the whole story with <code>{charname}</code> set to nothing. I'd like to detect if no value's been entered and send the user back to <code>[[Character name]]</code>, but I can't find a way of doing it.  <code>{if charname=:}</code> doesn't work, nor <code>{if charname=null:}</code></p>\n<p>Can anyone advise on how best to validate?</p>\n\n",
      "PostDate": "2020-03-27T17:02:11.7495884Z",
      "LastEditDate": "2020-03-27T17:02:41.4240167Z",
      "link": null
    },
    {
      "PostId": "99fb63e1-2483-4b80-bc59-ce50db32b709",
      "UserId": 245197,
      "Username": "Rohana",
      "AvatarUrl": "https://secure.gravatar.com/avatar/004f7a29d88ef9a52009bab31eed6a96?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "What about...\r\n\r\n```\r\n{if charname=\"\":}\r\n```\r\nJust guessing this one.",
      "EditableFormat": "markdown",
      "HTML": "<p>What about...</p>\n<pre><code>{if charname=\"\":}\n</code></pre>\n<p>Just guessing this one.</p>\n\n",
      "PostDate": "2020-03-29T04:16:25.8093498Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e130e4f0-5e29-4fca-a3b7-7371df46f0b7",
      "UserId": 471394,
      "Username": "fvu109",
      "AvatarUrl": "https://secure.gravatar.com/avatar/b895f3cf2b427a32e38299edd44559a5?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks Rohana - that doesn't work for me either :(",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks Rohana - that doesn't work for me either :(</p>\n\n",
      "PostDate": "2020-03-29T08:08:03.7664324Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1c893fc5-82b8-4e8d-9c4f-2e4adfb21fac",
      "UserId": 251768,
      "Username": "Bluevoss",
      "AvatarUrl": "https://i.imgur.com/6mfIIbhb.gif",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This will...\r\n\r\n```\r\n[[Character name]]:\r\nWhat is your character's name? \r\n\r\n<label>Character name</label>\r\n<input type=\"text\" id=\"character_name\">\r\n\r\n[[Select]](page2)\r\n\r\n[[page2]]:\r\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val());\r\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val().replace(/(^|\\W)\\w/, function(t) { return t.toUpperCase() })); \r\n\r\n    //added section\r\n    set(\"charFlg\",true);\r\n    if (jQuery(\"#character_name\").val()==\"\"){set(\"charFlg\",false);}\r\n\r\n\r\nHi, {charname}.\r\n\r\n{charFlg}\r\n```\r\n\r\nGive it a shot.",
      "EditableFormat": "markdown",
      "HTML": "<p>This will...</p>\n<pre><code>[[Character name]]:\nWhat is your character's name? \n\n&lt;label&gt;Character name&lt;/label&gt;\n&lt;input type=\"text\" id=\"character_name\"&gt;\n\n[[Select]](page2)\n\n[[page2]]:\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val());\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val().replace(/(^|\\W)\\w/, function(t) { return t.toUpperCase() })); \n\n    //added section\n    set(\"charFlg\",true);\n    if (jQuery(\"#character_name\").val()==\"\"){set(\"charFlg\",false);}\n\n\nHi, {charname}.\n\n{charFlg}\n</code></pre>\n<p>Give it a shot.</p>\n\n",
      "PostDate": "2020-03-29T12:40:36.3294652Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0ca2f0a9-62eb-4264-ae71-3e459273b4d4",
      "UserId": 251768,
      "Username": "Bluevoss",
      "AvatarUrl": "https://i.imgur.com/6mfIIbhb.gif",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "With this, you should be able to test for empty fields via the boolean charFlg.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>With this, you should be able to test for empty fields via the boolean charFlg.</p>\n\n",
      "PostDate": "2020-03-29T12:41:56.1081222Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "12424fe0-b89e-4d28-b3cb-fe62f8fd5d39",
      "UserId": 471394,
      "Username": "fvu109",
      "AvatarUrl": "https://secure.gravatar.com/avatar/b895f3cf2b427a32e38299edd44559a5?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "His Bluevoss - thanks so much for this!\r\n\r\nIt nearly gets me there! If the user fails to enter a name the first time, they're sent back to ```[[Character name]]:``` to try again - however, even if they enter a name this second time, the ``` {if charFlg:}```check still finds ```{charFlg}``` false so they just loop round and round, unable to successfully enter a name on any but the first try. Can you advise what I'm getting wrong?",
      "EditableFormat": "markdown",
      "HTML": "<p>His Bluevoss - thanks so much for this!</p>\n<p>It nearly gets me there! If the user fails to enter a name the first time, they're sent back to <code>[[Character name]]:</code> to try again - however, even if they enter a name this second time, the <code>{if charFlg:}</code>check still finds <code>{charFlg}</code> false so they just loop round and round, unable to successfully enter a name on any but the first try. Can you advise what I'm getting wrong?</p>\n\n",
      "PostDate": "2020-03-29T13:44:15.1504464Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7dbedd6a-4b54-4553-8f85-b6c3f32f2c1b",
      "UserId": 251768,
      "Username": "Bluevoss",
      "AvatarUrl": "https://i.imgur.com/6mfIIbhb.gif",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Lucky you. I actually fussed with this a while back and remembered the trick. So here's a working copy.\r\n```\r\n[[Character name]]:\r\n@clear\r\nWhat is your character's name? \r\n\r\n<label>Character name</label>\r\n<input type=\"text\" id=\"character_name\">\r\n\r\n[[Select]](page2)\r\n\r\n[[page2]]:\r\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val());\r\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val().replace(/(^|\\W)\\w/, function(t) { return t.toUpperCase() })); \r\n\r\n    //added section\r\n    set(\"charFlg\",true);\r\n    if (jQuery(\"#character_name\").val()==\"\"){set(\"charFlg\",false);}\r\n\r\n\r\n{if not charFlg: \r\n\r\nWoops. I didn't quite hear that. Can you [[try again?]](Character name)\r\n\r\n}\r\n\r\n{else:\r\nHi, {charname}.\r\n\r\n}\r\n```\r\nNow, a critical deal - when you loop back, you need to clear the page (specifically, right when [[Character name]] is called. This resets the box totally and makes it available for entry. I found this after I took out my clear statement (I generally always use them) and suddenly my name entry DIDN'T work.\r\n\r\nMy other earlier option was that if charFlg was false, set the character name to \"Nameless Stranger\" but I think this is better :)",
      "EditableFormat": "markdown",
      "HTML": "<p>Lucky you. I actually fussed with this a while back and remembered the trick. So here's a working copy.</p>\n<pre><code>[[Character name]]:\n@clear\nWhat is your character's name? \n\n&lt;label&gt;Character name&lt;/label&gt;\n&lt;input type=\"text\" id=\"character_name\"&gt;\n\n[[Select]](page2)\n\n[[page2]]:\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val());\n    squiffy.set(\"charname\", jQuery(\"#character_name\").val().replace(/(^|\\W)\\w/, function(t) { return t.toUpperCase() })); \n\n    //added section\n    set(\"charFlg\",true);\n    if (jQuery(\"#character_name\").val()==\"\"){set(\"charFlg\",false);}\n\n\n{if not charFlg: \n\nWoops. I didn't quite hear that. Can you [[try again?]](Character name)\n\n}\n\n{else:\nHi, {charname}.\n\n}\n</code></pre>\n<p>Now, a critical deal - when you loop back, you need to clear the page (specifically, right when [[Character name]] is called. This resets the box totally and makes it available for entry. I found this after I took out my clear statement (I generally always use them) and suddenly my name entry DIDN'T work.</p>\n<p>My other earlier option was that if charFlg was false, set the character name to \"Nameless Stranger\" but I think this is better :)</p>\n\n",
      "PostDate": "2020-03-29T14:43:42.3103235Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "561db7be-e3ff-4e82-a781-2abd2a9f335b",
      "UserId": 471394,
      "Username": "fvu109",
      "AvatarUrl": "https://secure.gravatar.com/avatar/b895f3cf2b427a32e38299edd44559a5?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Absolutely spot on now. Thank you so much - I've only been messing with Squiffy for a couple of days, and I've worked out some stuff by trial and error, but it's invaluable having a forum with experts to come running to! I'll probably have more questions in due course :)) Thanks again!",
      "EditableFormat": "markdown",
      "HTML": "<p>Absolutely spot on now. Thank you so much - I've only been messing with Squiffy for a couple of days, and I've worked out some stuff by trial and error, but it's invaluable having a forum with experts to come running to! I'll probably have more questions in due course :)) Thanks again!</p>\n\n",
      "PostDate": "2020-03-29T16:17:06.8141565Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b9c2b5da-40b8-4af8-acf7-dd6dd85da525",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I should point out that:\r\n```\r\n    set(\"charFlg\",true);\r\n    if (jQuery(\"#character_name\").val()==\"\"){set(\"charFlg\",false);}\r\n```\r\n\r\nis the same as \r\n```\r\n    set(\"charFlg\", jQuery(\"#character_name\").val() != \"\");\r\n```\r\nand almost the same as\r\n```\r\n    set(\"charFlg\", !!jQuery(\"#character_name\").val());\r\n```\r\n(the latter version is faster, using the `!!` convert-to-boolean shortcut, but I think it will also exclude the name \"0\")",
      "EditableFormat": "markdown",
      "HTML": "<p>I should point out that:</p>\n<pre><code>    set(\"charFlg\",true);\n    if (jQuery(\"#character_name\").val()==\"\"){set(\"charFlg\",false);}\n</code></pre>\n<p>is the same as</p>\n<pre><code>    set(\"charFlg\", jQuery(\"#character_name\").val() != \"\");\n</code></pre>\n<p>and almost the same as</p>\n<pre><code>    set(\"charFlg\", !!jQuery(\"#character_name\").val());\n</code></pre>\n<p>(the latter version is faster, using the <code>!!</code> convert-to-boolean shortcut, but I think it will also exclude the name \"0\")</p>\n\n",
      "PostDate": "2020-03-29T16:25:39.9579105Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dc01d0c6-a354-4db9-953e-6f738206ba50",
      "UserId": 251768,
      "Username": "Bluevoss",
      "AvatarUrl": "https://i.imgur.com/6mfIIbhb.gif",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "For the record, my java scripting is pretty much \"lifeboat coding\". I'm not very comfortable with it and pretty much monkey-see, monkey-do it. But those solutions were pretty slick.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>For the record, my java scripting is pretty much \"lifeboat coding\". I'm not very comfortable with it and pretty much monkey-see, monkey-do it. But those solutions were pretty slick.</p>\n\n",
      "PostDate": "2020-03-29T17:58:04.237808Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
