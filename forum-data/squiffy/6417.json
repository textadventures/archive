{
  "Topic": {
    "TopicId": "6417",
    "ForumId": "24",
    "Title": "Stumped with the flip of a card",
    "LastUpdated": "2016-06-20T17:36:41+00:00",
    "ReplyCount": 4
  },
  "Posts": [
    {
      "PostId": "43416",
      "UserId": 0,
      "Username": "Bluevoss",
      "AvatarUrl": null,
      "UserAvatar": null,
      "UserGravatar": "3162fe2e57e4cae90adf321de975a9da",
      "EditableText": "Okay, imagine there is a card game where you only have one suit of cards (so there are 13 of them). We will represent them with a simple number, so ace is 1, and so on, up to the king, 13.\n\nI need to be able to have a function that will be able to pull a card and return it as the integer of what you pulled. Yet I can't pull the same card twice.\n\nThe game mechanics won't let this run more than 13 times (it is only for tension in the game, I don't want it to always be the same, etc. I just need some way of not getting the same card.\n\nI tried to do it recursively using the code below but couldn't get it to work. All sorts of problems getting the output to print right.\n\nCouple of points - this test was only with four cards (I wanted to get the basics working before replication) and two, I'm using integers as booleans because I don't know how to test a &quot;not&quot; value - anyone know that one? Here, card1, card2 etc refer to flagging a drawn card, 0=not pulled, 1=pulled.\n\n[code:3fe2mux3]@set card1=0\n@set card2=0\n@set card3=0\n@set card4=0\n@set print\n\n&#91;&#91;four card montey&#93;&#93;\n\n&#91;&#91;four card montey&#93;&#93;&#58;\n\n    var rnd = Math&#46;ceil(Math&#46;random() * 4);  \n    squiffy&#46;set(&quot;rnd&quot;,rnd)\n\n@set print=1\n\n&#91;&#91;Draw a card&#93;&#93;\n\n&#91;&#91;Draw a card&#93;&#93;&#58;\n\n    if (squiffy&#46;get(&quot;rnd&quot;)==1){\n            if (squiffy&#46;get(&quot;card1&quot;)==0){\n                    squiffy&#46;set(&quot;card1&quot;,1);\n                    squiffy&#46;set(&quot;print&quot;,1);\n            }\n            else{\n                    squiffy&#46;set(&quot;rnd&quot;,2);\n                    squiffy&#46;set(&quot;print&quot;,0);\n                    squiffy&#46;story&#46;go(&quot;Draw a card&quot;);\n            }\n    }\n    \n    if (squiffy&#46;get(&quot;rnd&quot;)==2){\n            if (squiffy&#46;get(&quot;card2&quot;)==0){\n                    squiffy&#46;set(&quot;card2&quot;,1);\n                    squiffy&#46;set(&quot;print&quot;,1);\n            }\n            else{\n                    squiffy&#46;set(&quot;rnd&quot;,3);\n                    squiffy&#46;set(&quot;print&quot;,0);\n                    squiffy&#46;story&#46;go(&quot;Draw a card&quot;);\n            }\n    }\n    \n    if (squiffy&#46;get(&quot;rnd&quot;)==3){\n            if (squiffy&#46;get(&quot;card3&quot;)==0){\n                    squiffy&#46;set(&quot;card3&quot;,1);\n                    squiffy&#46;set(&quot;print&quot;,1);\n            }\n           else{\n                    squiffy&#46;set(&quot;rnd&quot;,4);\n                    squiffy&#46;set(&quot;print&quot;,0);\n                    squiffy&#46;story&#46;go(&quot;Draw a card&quot;);\n            }\n    }\n    \n    if (squiffy&#46;get(&quot;rnd&quot;)==4){\n            if (squiffy&#46;get(&quot;card4&quot;)==0){\n                    squiffy&#46;set(&quot;card4&quot;,1);\n                    squiffy&#46;set(&quot;print&quot;,1);\n            }\n            else{\n                    squiffy&#46;set(&quot;rnd&quot;,1);\n                    squiffy&#46;set(&quot;print&quot;,0);\n                    squiffy&#46;story&#46;go(&quot;Draw a card&quot;);\n            }\n    }\n\n{if print=1&#58;    \nYour card is {rnd}\n&#91;&#91;Draw a card&#93;&#93;\n}[/code:3fe2mux3]",
      "EditableFormat": "bbcode",
      "HTML": "Okay, imagine there is a card game where you only have one suit of cards (so there are 13 of them). We will represent them with a simple number, so ace is 1, and so on, up to the king, 13.<br/><br/>I need to be able to have a function that will be able to pull a card and return it as the integer of what you pulled. Yet I can't pull the same card twice.<br/><br/>The game mechanics won't let this run more than 13 times (it is only for tension in the game, I don't want it to always be the same, etc. I just need some way of not getting the same card.<br/><br/>I tried to do it recursively using the code below but couldn't get it to work. All sorts of problems getting the output to print right.<br/><br/>Couple of points - this test was only with four cards (I wanted to get the basics working before replication) and two, I'm using integers as booleans because I don't know how to test a &quot;not&quot; value - anyone know that one? Here, card1, card2 etc refer to flagging a drawn card, 0=not pulled, 1=pulled.<br/><br/><pre><code>@set card1=0<br/>@set card2=0<br/>@set card3=0<br/>@set card4=0<br/>@set print<br/><br/>&#91;&#91;four card montey&#93;&#93;<br/><br/>&#91;&#91;four card montey&#93;&#93;&#58;<br/><br/>    var rnd = Math&#46;ceil(Math&#46;random() * 4);  <br/>    squiffy&#46;set(&quot;rnd&quot;,rnd)<br/><br/>@set print=1<br/><br/>&#91;&#91;Draw a card&#93;&#93;<br/><br/>&#91;&#91;Draw a card&#93;&#93;&#58;<br/><br/>    if (squiffy&#46;get(&quot;rnd&quot;)==1){<br/>            if (squiffy&#46;get(&quot;card1&quot;)==0){<br/>                    squiffy&#46;set(&quot;card1&quot;,1);<br/>                    squiffy&#46;set(&quot;print&quot;,1);<br/>            }<br/>            else{<br/>                    squiffy&#46;set(&quot;rnd&quot;,2);<br/>                    squiffy&#46;set(&quot;print&quot;,0);<br/>                    squiffy&#46;story&#46;go(&quot;Draw a card&quot;);<br/>            }<br/>    }<br/>    <br/>    if (squiffy&#46;get(&quot;rnd&quot;)==2){<br/>            if (squiffy&#46;get(&quot;card2&quot;)==0){<br/>                    squiffy&#46;set(&quot;card2&quot;,1);<br/>                    squiffy&#46;set(&quot;print&quot;,1);<br/>            }<br/>            else{<br/>                    squiffy&#46;set(&quot;rnd&quot;,3);<br/>                    squiffy&#46;set(&quot;print&quot;,0);<br/>                    squiffy&#46;story&#46;go(&quot;Draw a card&quot;);<br/>            }<br/>    }<br/>    <br/>    if (squiffy&#46;get(&quot;rnd&quot;)==3){<br/>            if (squiffy&#46;get(&quot;card3&quot;)==0){<br/>                    squiffy&#46;set(&quot;card3&quot;,1);<br/>                    squiffy&#46;set(&quot;print&quot;,1);<br/>            }<br/>           else{<br/>                    squiffy&#46;set(&quot;rnd&quot;,4);<br/>                    squiffy&#46;set(&quot;print&quot;,0);<br/>                    squiffy&#46;story&#46;go(&quot;Draw a card&quot;);<br/>            }<br/>    }<br/>    <br/>    if (squiffy&#46;get(&quot;rnd&quot;)==4){<br/>            if (squiffy&#46;get(&quot;card4&quot;)==0){<br/>                    squiffy&#46;set(&quot;card4&quot;,1);<br/>                    squiffy&#46;set(&quot;print&quot;,1);<br/>            }<br/>            else{<br/>                    squiffy&#46;set(&quot;rnd&quot;,1);<br/>                    squiffy&#46;set(&quot;print&quot;,0);<br/>                    squiffy&#46;story&#46;go(&quot;Draw a card&quot;);<br/>            }<br/>    }<br/><br/>{if print=1&#58;    <br/>Your card is {rnd}<br/>&#91;&#91;Draw a card&#93;&#93;<br/>}</code></pre>",
      "PostDate": "2016-06-12T12:50:09+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "43632",
      "UserId": 0,
      "Username": "Bluevoss",
      "AvatarUrl": null,
      "UserAvatar": null,
      "UserGravatar": "3162fe2e57e4cae90adf321de975a9da",
      "EditableText": "Okay, after a couple of days of pondering this, I got it to work. This is the abbreviated version - four cards. Once it runs, each of the variables (card1, card2, card3...) will have the associated card number in it.\n\n[code:14t5qdye]&#91;&#91;setup&#93;&#93;&#58;\n\n    squiffy&#46;story&#46;go(&quot;deal&quot;);\n\n@set card1=0\n@set card2=0\n@set card3=0\n@set card4=0\n\n@set cardNum = 1\n\n&#91;&#91;deal&#93;&#93;&#58;\n\n    var rnd = Math&#46;ceil(Math&#46;random() * 4);  \n    squiffy&#46;set(&quot;rnd&quot;,rnd);\n\n    if (squiffy&#46;get(&quot;rnd&quot;)==1){\n        if (squiffy&#46;get(&quot;card1&quot;)==0){\n            squiffy&#46;set(&quot;card1&quot;,(squiffy&#46;get(&quot;cardNum&quot;)));\n            squiffy&#46;set(&quot;cardNum&quot;,(squiffy&#46;get(&quot;cardNum&quot;)+1));\n        }\n    }\n\n    if (squiffy&#46;get(&quot;rnd&quot;)==2){\n        if (squiffy&#46;get(&quot;card2&quot;)==0){\n            squiffy&#46;set(&quot;card2&quot;,(squiffy&#46;get(&quot;cardNum&quot;)));\n            squiffy&#46;set(&quot;cardNum&quot;,(squiffy&#46;get(&quot;cardNum&quot;)+1));\n        }\n    }\n\n    if (squiffy&#46;get(&quot;rnd&quot;)==3){\n        if (squiffy&#46;get(&quot;card3&quot;)==0){\n            squiffy&#46;set(&quot;card3&quot;,(squiffy&#46;get(&quot;cardNum&quot;)));\n            squiffy&#46;set(&quot;cardNum&quot;,(squiffy&#46;get(&quot;cardNum&quot;)+1));\n        }\n    }\n    \n    if (squiffy&#46;get(&quot;rnd&quot;)==4){\n        if (squiffy&#46;get(&quot;card4&quot;)==0){\n            squiffy&#46;set(&quot;card4&quot;,(squiffy&#46;get(&quot;cardNum&quot;)));\n            squiffy&#46;set(&quot;cardNum&quot;,(squiffy&#46;get(&quot;cardNum&quot;)+1));\n        }\n    }\n    \n    if (squiffy&#46;get(&quot;cardNum&quot;)&gt;4){\n        squiffy&#46;story&#46;go(&quot;exit&quot;);\n    }\n    else{\n        squiffy&#46;story&#46;go(&quot;deal&quot;);\n    }\n            \n&#91;&#91;exit&#93;&#93;&#58;\n\nIn exit\n\n{card1}\n{card2}\n{card3}\n{card4}[/code:14t5qdye]",
      "EditableFormat": "bbcode",
      "HTML": "Okay, after a couple of days of pondering this, I got it to work. This is the abbreviated version - four cards. Once it runs, each of the variables (card1, card2, card3...) will have the associated card number in it.<br/><br/><pre><code>&#91;&#91;setup&#93;&#93;&#58;<br/><br/>    squiffy&#46;story&#46;go(&quot;deal&quot;);<br/><br/>@set card1=0<br/>@set card2=0<br/>@set card3=0<br/>@set card4=0<br/><br/>@set cardNum = 1<br/><br/>&#91;&#91;deal&#93;&#93;&#58;<br/><br/>    var rnd = Math&#46;ceil(Math&#46;random() * 4);  <br/>    squiffy&#46;set(&quot;rnd&quot;,rnd);<br/><br/>    if (squiffy&#46;get(&quot;rnd&quot;)==1){<br/>        if (squiffy&#46;get(&quot;card1&quot;)==0){<br/>            squiffy&#46;set(&quot;card1&quot;,(squiffy&#46;get(&quot;cardNum&quot;)));<br/>            squiffy&#46;set(&quot;cardNum&quot;,(squiffy&#46;get(&quot;cardNum&quot;)+1));<br/>        }<br/>    }<br/><br/>    if (squiffy&#46;get(&quot;rnd&quot;)==2){<br/>        if (squiffy&#46;get(&quot;card2&quot;)==0){<br/>            squiffy&#46;set(&quot;card2&quot;,(squiffy&#46;get(&quot;cardNum&quot;)));<br/>            squiffy&#46;set(&quot;cardNum&quot;,(squiffy&#46;get(&quot;cardNum&quot;)+1));<br/>        }<br/>    }<br/><br/>    if (squiffy&#46;get(&quot;rnd&quot;)==3){<br/>        if (squiffy&#46;get(&quot;card3&quot;)==0){<br/>            squiffy&#46;set(&quot;card3&quot;,(squiffy&#46;get(&quot;cardNum&quot;)));<br/>            squiffy&#46;set(&quot;cardNum&quot;,(squiffy&#46;get(&quot;cardNum&quot;)+1));<br/>        }<br/>    }<br/>    <br/>    if (squiffy&#46;get(&quot;rnd&quot;)==4){<br/>        if (squiffy&#46;get(&quot;card4&quot;)==0){<br/>            squiffy&#46;set(&quot;card4&quot;,(squiffy&#46;get(&quot;cardNum&quot;)));<br/>            squiffy&#46;set(&quot;cardNum&quot;,(squiffy&#46;get(&quot;cardNum&quot;)+1));<br/>        }<br/>    }<br/>    <br/>    if (squiffy&#46;get(&quot;cardNum&quot;)&gt;4){<br/>        squiffy&#46;story&#46;go(&quot;exit&quot;);<br/>    }<br/>    else{<br/>        squiffy&#46;story&#46;go(&quot;deal&quot;);<br/>    }<br/>            <br/>&#91;&#91;exit&#93;&#93;&#58;<br/><br/>In exit<br/><br/>{card1}<br/>{card2}<br/>{card3}<br/>{card4}</code></pre>",
      "PostDate": "2016-06-20T14:58:12+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "43633",
      "UserId": 0,
      "Username": "Bluevoss",
      "AvatarUrl": null,
      "UserAvatar": null,
      "UserGravatar": "3162fe2e57e4cae90adf321de975a9da",
      "EditableText": "The odd thing I'll add was the used of squiffy.story.go, which doesn't work as I would have expected. I had the devil of a time getting the recursion to work. When I put the loop-back to &quot;deal&quot; in various ways, it would lock the code up. I think the go command is interpreted in a non-linear fashion - things that should have worked did not.\n\nOnce I centralized it in one command at the end of the code, it worked fine.",
      "EditableFormat": "bbcode",
      "HTML": "The odd thing I'll add was the used of squiffy.story.go, which doesn't work as I would have expected. I had the devil of a time getting the recursion to work. When I put the loop-back to &quot;deal&quot; in various ways, it would lock the code up. I think the go command is interpreted in a non-linear fashion - things that should have worked did not.<br/><br/>Once I centralized it in one command at the end of the code, it worked fine.",
      "PostDate": "2016-06-20T15:01:49+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "43638",
      "UserId": 0,
      "Username": "Bluevoss",
      "AvatarUrl": null,
      "UserAvatar": null,
      "UserGravatar": "3162fe2e57e4cae90adf321de975a9da",
      "EditableText": "So, having done this, I'll now have a card number in a squiffy variable (say I move it into {card}).\n\nIs there some way I can look this up so every time I reference the card, I don't get a number but rather a name (i.e. &quot;Ace of spades&quot;, &quot;two of spades&quot;, &quot;three of spades&quot;...)\n\nI'm thinking this could have applications in other games (i.e. using this random generator to work through a list of characters). However, I don't want to do a big...\n\n{if card=1:\nAce of spades}\n{if card=2:\ntwo of spades}...\n\nSome sort of function or lookup array would work nice but I'm not sure how to do it. Any suggestions?",
      "EditableFormat": "bbcode",
      "HTML": "So, having done this, I'll now have a card number in a squiffy variable (say I move it into {card}).<br/><br/>Is there some way I can look this up so every time I reference the card, I don't get a number but rather a name (i.e. &quot;Ace of spades&quot;, &quot;two of spades&quot;, &quot;three of spades&quot;...)<br/><br/>I'm thinking this could have applications in other games (i.e. using this random generator to work through a list of characters). However, I don't want to do a big...<br/><br/>{if card=1:<br/>Ace of spades}<br/>{if card=2:<br/>two of spades}...<br/><br/>Some sort of function or lookup array would work nice but I'm not sure how to do it. Any suggestions?",
      "PostDate": "2016-06-20T17:10:17+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "43639",
      "UserId": 0,
      "Username": "Bluevoss",
      "AvatarUrl": null,
      "UserAvatar": null,
      "UserGravatar": "3162fe2e57e4cae90adf321de975a9da",
      "EditableText": "Got it. Remember this being a misconception I had some time ago. Looks like that came in handy after all...\n\n[code:2op7uurg]\n&#91;&#91;first section&#93;&#93;&#58;\n\n@set name=3\n\n{varName}\n\n&#91;&#91;second section&#93;&#93;&#58;\n\nThis is the second section\n\n&#91;&#91;varName&#93;&#93;&#58;\n\n{if name=1&#58;Ace of spades}\n{if name=2&#58;Two of spades}\n{if name=3&#58;Three of spades}\n[/code:2op7uurg]",
      "EditableFormat": "bbcode",
      "HTML": "Got it. Remember this being a misconception I had some time ago. Looks like that came in handy after all...<br/><br/><pre><code><br/>&#91;&#91;first section&#93;&#93;&#58;<br/><br/>@set name=3<br/><br/>{varName}<br/><br/>&#91;&#91;second section&#93;&#93;&#58;<br/><br/>This is the second section<br/><br/>&#91;&#91;varName&#93;&#93;&#58;<br/><br/>{if name=1&#58;Ace of spades}<br/>{if name=2&#58;Two of spades}<br/>{if name=3&#58;Three of spades}<br/></code></pre>",
      "PostDate": "2016-06-20T17:36:41+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "b5c65845-fce9-4b1e-acc6-8e2fe74e94fc",
      "UserId": 150599,
      "Username": "Tylian",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4e83f3a31a6a9bcc521fc9a014f404e9?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I feel compelled to post this here, maybe for future people showing up here via Google? Not sure.\r\n\r\n```\r\n[[setup]]:\r\n    var cards = [1, 2, 3, 4].sort(function() { return 0.5 - Math.random(); });\r\n    for(var i = 0; i < cards.length; i++) {\r\n        squiffy.set(\"card\" + (i + 1), cards[i]);\r\n    }\r\n    \r\n{exit}\r\n\r\n[[exit]]:\r\n\r\nIn exit\r\n\r\n{card1}\r\n{card2}\r\n{card3}\r\n{card4}\r\n```\r\n\r\nPlease do note though that the random is not unbaised. If you want it to be completely unbiased use a shuffle like <a href=\"http://stackoverflow.com/a/6274381/1347719\">this.</a>",
      "EditableFormat": "markdown",
      "HTML": "<p>I feel compelled to post this here, maybe for future people showing up here via Google? Not sure.</p>\n<pre><code>[[setup]]:\n    var cards = [1, 2, 3, 4].sort(function() { return 0.5 - Math.random(); });\n    for(var i = 0; i &lt; cards.length; i++) {\n        squiffy.set(\"card\" + (i + 1), cards[i]);\n    }\n    \n{exit}\n\n[[exit]]:\n\nIn exit\n\n{card1}\n{card2}\n{card3}\n{card4}\n</code></pre>\n<p>Please do note though that the random is not unbaised. If you want it to be completely unbiased use a shuffle like <a href=\"http://stackoverflow.com/a/6274381/1347719\">this.</a></p>\n\n",
      "PostDate": "2016-08-19T07:44:06.4694058Z",
      "LastEditDate": "2016-08-19T18:50:30.0046218Z"
    }
  ]
}
