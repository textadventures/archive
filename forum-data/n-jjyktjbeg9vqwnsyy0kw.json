{
  "Topic": {
    "TopicId": "n-jjyktjbeg9vqwnsyy0kw",
    "ForumId": "10",
    "Title": "Stackable transparent images + preloading stuff.",
    "LastUpdated": "2018-05-20T10:30:44.4861521Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "6100c587-9257-4486-af2d-ddad218d2b3a",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm curious about 2 things.\r\n\r\n<h3>1. Stacking pictures</h3>\r\nUsing ```SetFloatingImage ()```, is it possible to stack pictures?\r\n\r\nI have a map which the player can show/hide by typing map. I wonder if it's possible to add a transparent PNG <b>on top of it</b> containing only a marker so that the player can keep track of his/her whereabout?\r\n\r\nAnd since this would involve a whole lot of pictures (one transparent picture / room) I wonder...\r\n\r\n<h3>2. Preloading</h3>\r\n... if it's possible to preload all said pictures at the start of the game to prevent annoying delays when showing the map (especially if the player decide to have the map open while switching rooms)?\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm curious about 2 things.</p>\n<p></p><h3>1. Stacking pictures</h3><br>\nUsing <code>SetFloatingImage ()</code>, is it possible to stack pictures?<p></p>\n<p>I have a map which the player can show/hide by typing map. I wonder if it's possible to add a transparent PNG <b>on top of it</b> containing only a marker so that the player can keep track of his/her whereabout?</p>\n<p>And since this would involve a whole lot of pictures (one transparent picture / room) I wonder...</p>\n<p></p><h3>2. Preloading</h3><br>\n... if it's possible to preload all said pictures at the start of the game to prevent annoying delays when showing the map (especially if the player decide to have the map open while switching rooms)?<p></p>\n\n",
      "PostDate": "2018-05-20T10:30:44.4861521Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7cf71a05-9d3d-4867-a6fa-680c01e801a5",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You can certainly stack images. I have experimented with that for a different approach to maps. See \"One Image On Top of Another\" here:\r\nhttp://docs.textadventures.co.uk/quest/images.html",
      "EditableFormat": "markdown",
      "HTML": "<p>You can certainly stack images. I have experimented with that for a different approach to maps. See \"One Image On Top of Another\" here:<br>\nhttp://docs.textadventures.co.uk/quest/images.html</p>\n\n",
      "PostDate": "2018-05-20T11:17:50.3888472Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2985bf85-6b0f-465f-8a10-8097c3254c2c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think having that many transparent images would be a little inefficient. Maybe better to have a single (small) image of the \"you are here\" dot, and give each room a parameter specifying the coordinates (in pixels from the corner of the map image) where the marker should be placed.",
      "EditableFormat": "markdown",
      "HTML": "<p>I think having that many transparent images would be a little inefficient. Maybe better to have a single (small) image of the \"you are here\" dot, and give each room a parameter specifying the coordinates (in pixels from the corner of the map image) where the marker should be placed.</p>\n\n",
      "PostDate": "2018-05-20T11:35:48.217291Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fdad5d04-49e8-47a2-8036-c2689e752f78",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks Pix & mra!\r\n\r\n <b>@pix</b>\r\n I would like to, if possible, avoid using css for this. <a href=\"http://rockstrom.com/bro/gameinterface.png\" target=\"_blank\">I've changed the UI a lot</a> and I'm afraid I'll break it. Hence my original question if it's stackable using ```SetFloatingImage () ```?\r\n\r\n <b>@mra</b>\r\nI was thinking along those lines at first too. And it's, just like you're saying, the most efficient way to do it. The thing is.. I don't know how to. =)\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks Pix &amp; mra!</p>\n<p><b>@pix</b><br>\nI would like to, if possible, avoid using css for this. <a href=\"http://rockstrom.com/bro/gameinterface.png\" target=\"_blank\">I've changed the UI a lot</a> and I'm afraid I'll break it. Hence my original question if it's stackable using <code>SetFloatingImage ()</code>?</p>\n<p><b>@mra</b><br>\nI was thinking along those lines at first too. And it's, just like you're saying, the most efficient way to do it. The thing is.. I don't know how to. =)</p>\n\n",
      "PostDate": "2018-05-20T12:42:39.0889941Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dcd493eb-3e4c-45a0-bdf1-d6ab2cbcd645",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hmm ... some javascript:\r\n```\r\nfunction movePlayerPointer(x, y, url) {\r\n  var map = $(\"#gameMap\");\r\n  var pointer = $(\"#gameMapPointer\");\r\n  if (url) {\r\n    map.attr(\"src\", url);\r\n  }\r\n  if (pointer.length = 0) {\r\n    pointer = $(\"<img>\", {id: \"gameMapPointer\", src: you_are_here}).insertAfter(map).hide();\r\n  }\r\n  var target_coords = map.offset();\r\n  target_coords[\"left\"] += x;\r\n  target_coords[\"top\"] += y;\r\n  if (pointer.is(\":hidden\") && !pointer.parent().is(\":hidden\")) {\r\n    pointer.css(\"position\", map.css(\"position\"));\r\n    pointer.show();\r\n    pointer.offset(target_coords);\r\n  } else {\r\n    pointer.animate(target_coords, 300);\r\n  }\r\n}\r\n```\r\n(Assuming that you already have an image whose id is \"gameMap\". You might have to change that depending on how you're loading the map image in the first place)\r\nIn this example I've used a JS variable for the \"you are here\" pointer. You'd want to put something like `JS.eval(\"you_are_here = '\"+GetFileURL(\"YouAreHere.png\")+\"';\")` in your UI initialisation script; or replace the variable `you_are_here` with a string URI if the file is hosted externally.\r\n\r\nThe function should be able to be called with `JS.movePlayerPointer(room.xcoord, room.ycoord, room.mapimage)` (or whatever the attributes are called); probably in a roomenter script or similar.\r\n\r\nI added the optional 3rd parameter in case you have different map images (for different floors of the dungeon or whatever). That way, it will replace the map with the right one as well as moving the pointer.\r\nThe code is a little more complex than it needs to be, in the hope that it would not be broken by any odd CSS in your game. (It forces the pointer to have the same positioning model and parent as the map image itself)\r\n\r\nJust off the top of my head, so a rough approximation, but maybe you can start with something like this.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hmm ... some javascript:</p>\n<pre><code>function movePlayerPointer(x, y, url) {\n  var map = $(\"#gameMap\");\n  var pointer = $(\"#gameMapPointer\");\n  if (url) {\n    map.attr(\"src\", url);\n  }\n  if (pointer.length = 0) {\n    pointer = $(\"&lt;img&gt;\", {id: \"gameMapPointer\", src: you_are_here}).insertAfter(map).hide();\n  }\n  var target_coords = map.offset();\n  target_coords[\"left\"] += x;\n  target_coords[\"top\"] += y;\n  if (pointer.is(\":hidden\") &amp;&amp; !pointer.parent().is(\":hidden\")) {\n    pointer.css(\"position\", map.css(\"position\"));\n    pointer.show();\n    pointer.offset(target_coords);\n  } else {\n    pointer.animate(target_coords, 300);\n  }\n}\n</code></pre>\n<p>(Assuming that you already have an image whose id is \"gameMap\". You might have to change that depending on how you're loading the map image in the first place)<br>\nIn this example I've used a JS variable for the \"you are here\" pointer. You'd want to put something like <code>JS.eval(\"you_are_here = '\"+GetFileURL(\"YouAreHere.png\")+\"';\")</code> in your UI initialisation script; or replace the variable <code>you_are_here</code> with a string URI if the file is hosted externally.</p>\n<p>The function should be able to be called with <code>JS.movePlayerPointer(room.xcoord, room.ycoord, room.mapimage)</code> (or whatever the attributes are called); probably in a roomenter script or similar.</p>\n<p>I added the optional 3rd parameter in case you have different map images (for different floors of the dungeon or whatever). That way, it will replace the map with the right one as well as moving the pointer.<br>\nThe code is a little more complex than it needs to be, in the hope that it would not be broken by any odd CSS in your game. (It forces the pointer to have the same positioning model and parent as the map image itself)</p>\n<p>Just off the top of my head, so a rough approximation, but maybe you can start with something like this.</p>\n\n",
      "PostDate": "2018-05-20T14:03:35.6877518Z",
      "LastEditDate": "2018-05-21T14:13:52.9827225Z",
      "link": null
    },
    {
      "PostId": "b9bd65c6-4c6f-4e45-828e-7c6f7b0b1406",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you MrA! I have it all set up except for this line right here...\r\n```JS.movePlayerPointer(room.xcoord, room.ycoord, room.mapimage)```\r\n\r\nI'm not entirely sure what to do. Should I give each room 2 attributes? (```xcoord```and ```ycoord```)?\r\nIf so, I guess it should be an Int attribute where the number stated is the number of pixels?\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you MrA! I have it all set up except for this line right here...<br>\n<code>JS.movePlayerPointer(room.xcoord, room.ycoord, room.mapimage)</code></p>\n<p>I'm not entirely sure what to do. Should I give each room 2 attributes? (<code>xcoord</code>and <code>ycoord</code>)?<br>\nIf so, I guess it should be an Int attribute where the number stated is the number of pixels?</p>\n\n",
      "PostDate": "2018-05-20T18:19:50.9718321Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c7f2e46a-b0fd-4732-b329-76695d432579",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That was the idea :)\r\nI figured you probably know Quest code well enough to figure out what to do with it. The function just takes 3 arguments; an X, a Y, and the map URL. If you omit the last one, it should leave the current image in the map.\r\n\r\nI'm assuming that you already have a `<img id=\"gameMap\" src=\"whatever your URI is\" />` somewhere onscreen, however you're choosing to display it. If the ID is different, just change it in the first line.\r\n\r\n(Note: I have no idea if this will work if the map is sticky. I'd hope so, but don't count on it)\r\n\r\n(Note2: The X coordinate is the distance between the left edge of the map image and the left edge of the pointer image; so when picking the coordinates it might be necessary to allow for the width of the pointer. Same for Y.)\r\n\r\n(Note3: If you want to hide the map, it's best to put it inside a div and then hide that, so the pointer is hidden too. When it becomes visible again, the pointer might end up positioned relative to the containing div rather than the map, because `offset()` returns nothing for hidden elements, but it'll go back to the right place as soon as it's moved)",
      "EditableFormat": "markdown",
      "HTML": "<p>That was the idea :)<br>\nI figured you probably know Quest code well enough to figure out what to do with it. The function just takes 3 arguments; an X, a Y, and the map URL. If you omit the last one, it should leave the current image in the map.</p>\n<p>I'm assuming that you already have a <code>&lt;img id=\"gameMap\" src=\"whatever your URI is\" /&gt;</code> somewhere onscreen, however you're choosing to display it. If the ID is different, just change it in the first line.</p>\n<p>(Note: I have no idea if this will work if the map is sticky. I'd hope so, but don't count on it)</p>\n<p>(Note2: The X coordinate is the distance between the left edge of the map image and the left edge of the pointer image; so when picking the coordinates it might be necessary to allow for the width of the pointer. Same for Y.)</p>\n<p>(Note3: If you want to hide the map, it's best to put it inside a div and then hide that, so the pointer is hidden too. When it becomes visible again, the pointer might end up positioned relative to the containing div rather than the map, because <code>offset()</code> returns nothing for hidden elements, but it'll go back to the right place as soon as it's moved)</p>\n\n",
      "PostDate": "2018-05-20T20:02:03.5185196Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7a3e072a-7264-4a76-b8b3-c7511270c53c",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I figured you probably know Quest code well enough to figure out what to do with it\r\n<br>\r\nYou obviously think way too highly of me! =)\r\n<br><br>\r\n<h3>The current set up is this:</h3>\r\nI have a commando called <i>map</i>. When the player enters it this happens: \r\n\r\n```JS.SetFloatingImage (\"http://www.rockstrom.com/tgs/act2/mapnml.png\")```\r\n\r\n\r\n, unless it's already out, if so, this happens: \r\n```JS.eval (\"$('#gameMap').remove();\")```\r\n\r\nAnd the script :\r\n```\r\nSetFloatingImage = function (image) {\r\n  var pane = $(\"#gameMap\");\r\n\r\n \r\n  if (!pane.length) {\r\n    pane = $(\"<img>\", {id: \"gameMap\"}).appendTo(\"#divOutput\").css({position: \"fixed\", right: 20, top: 50});\r\n  }\r\n  pane.attr(\"src\", image);\r\n};\r\n```\r\n\r\n\r\nI added the 'coordinates' (room attributes  ```xcoord```and ```ycoord``` but wasn't able to get it to work.\r\nThe map pops up but not the little \"you are here-image\".\r\nI'll try again tomorrow, a bit too tired atm.\r\n\r\nThanks for everything!\r\n\r\nEdit: I got the java script from K.V.... I added it but can't say I understand it.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I figured you probably know Quest code well enough to figure out what to do with it</p>\n</blockquote>\n<br>\nYou obviously think way too highly of me! =)\n<br><br>\n<h3>The current set up is this:</h3>\nI have a commando called <i>map</i>. When the player enters it this happens: \n<p><code>JS.SetFloatingImage (\"http://www.rockstrom.com/tgs/act2/mapnml.png\")</code></p>\n<p>, unless it's already out, if so, this happens:<br>\n<code>JS.eval (\"$('#gameMap').remove();\")</code></p>\n<p>And the script :</p>\n<pre><code>SetFloatingImage = function (image) {\n  var pane = $(\"#gameMap\");\n\n \n  if (!pane.length) {\n    pane = $(\"&lt;img&gt;\", {id: \"gameMap\"}).appendTo(\"#divOutput\").css({position: \"fixed\", right: 20, top: 50});\n  }\n  pane.attr(\"src\", image);\n};\n</code></pre>\n<p>I added the 'coordinates' (room attributes  <code>xcoord</code>and <code>ycoord</code> but wasn't able to get it to work.<br>\nThe map pops up but not the little \"you are here-image\".<br>\nI'll try again tomorrow, a bit too tired atm.</p>\n<p>Thanks for everything!</p>\n<p>Edit: I got the java script from K.V.... I added it but can't say I understand it.</p>\n\n",
      "PostDate": "2018-05-20T20:47:27.7486035Z",
      "LastEditDate": "2018-05-20T20:49:18.4358086Z",
      "link": null
    },
    {
      "PostId": "522f37d4-bf1e-40af-82cc-fa96a80f7787",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I don't remember this, and it doesn't look like my dialect:\r\n\r\n\r\n<details>\r\n\r\n\r\n```\r\nSetFloatingImage = function (image) {\r\n  var pane = $(\"#gameMap\");\r\n\r\n \r\n  if (!pane.length) {\r\n    pane = $(\"<img>\", {id: \"gameMap\"}).appendTo(\"#divOutput\").css({position: \"fixed\", right: 20, top: 50});\r\n  }\r\n  pane.attr(\"src\", image);\r\n};\r\n```\r\n\r\n---\r\n\r\n\r\n---\r\nI probably would have written that more like this:\r\n```\r\npane = $(\"<img id='gameMap'/>).appendTo('#divOutput').css({position: 'fixed', right: 20, top: 50});\r\n```\r\n\r\n---\r\n...but that is changing what ```pane``` is pointing to...\r\n\r\nFirst it's the element with the id \"gameMap\", then it....\r\n\r\nWhat is that code doing?\r\n\r\nThe gameMap element should always have a length, even if it is 0.  (I think.)\r\n\r\n---\r\nTry this (untested; don't lose your current code!):\r\n\r\n```\r\nSetFloatingImage = function (image) {\r\n  $('#gameMap').remove();\r\n  var  pane = $('<img id=\\'gameMap\\' src=\\''+image+'\\' />');\r\n  pane.appendTo('#divOutput');\r\n  pane.css({position: 'fixed', right: 20, top: 50});\r\n}; \r\n```\r\n\r\n</details>\r\n\r\n<div style=\"color:white\">I HATE WHEN IT SAYS I CAN'T POST STUFF!!!</div>",
      "EditableFormat": "markdown",
      "HTML": "<p>I don't remember this, and it doesn't look like my dialect:</p>\n<details>\n<pre><code>SetFloatingImage = function (image) {\n  var pane = $(\"#gameMap\");\n\n \n  if (!pane.length) {\n    pane = $(\"&lt;img&gt;\", {id: \"gameMap\"}).appendTo(\"#divOutput\").css({position: \"fixed\", right: 20, top: 50});\n  }\n  pane.attr(\"src\", image);\n};\n</code></pre>\n<hr>\n<hr>\n<p>I probably would have written that more like this:</p>\n<pre><code>pane = $(\"&lt;img id='gameMap'/&gt;).appendTo('#divOutput').css({position: 'fixed', right: 20, top: 50});\n</code></pre>\n<hr>\n<p>...but that is changing what <code>pane</code> is pointing to...</p>\n<p>First it's the element with the id \"gameMap\", then it....</p>\n<p>What is that code doing?</p>\n<p>The gameMap element should always have a length, even if it is 0.  (I think.)</p>\n<hr>\n<p>Try this (untested; don't lose your current code!):</p>\n<pre><code>SetFloatingImage = function (image) {\n  $('#gameMap').remove();\n  var  pane = $('&lt;img id=\\'gameMap\\' src=\\''+image+'\\' /&gt;');\n  pane.appendTo('#divOutput');\n  pane.css({position: 'fixed', right: 20, top: 50});\n}; \n</code></pre>\n</details>\n<div style=\"color: white\">I HATE WHEN IT SAYS I CAN'T POST STUFF!!!</div>\n\n",
      "PostDate": "2018-05-20T21:08:37.8623601Z",
      "LastEditDate": "2018-05-20T21:44:40.3660806Z",
      "link": null
    },
    {
      "PostId": "d708d9c0-8176-4771-828b-1337b6086344",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "There could be errors in my code. I've been in a panic all day, mostly posting untested stuff, trying to escape anxiety over other things (<span style=\"color: white\">no sales this month; only a week left to edit an entire novel; toothache; and heard that my grandma died this morning</span>) so might be a little sloppy.\r\n\r\nAre there any errors on the javascript console? Or do you have an online version of the game so I can try poking it with a debugger?",
      "EditableFormat": "markdown",
      "HTML": "<p>There could be errors in my code. I've been in a panic all day, mostly posting untested stuff, trying to escape anxiety over other things (<span style=\"color: white\">no sales this month; only a week left to edit an entire novel; toothache; and heard that my grandma died this morning</span>) so might be a little sloppy.</p>\n<p>Are there any errors on the javascript console? Or do you have an online version of the game so I can try poking it with a debugger?</p>\n\n",
      "PostDate": "2018-05-20T21:31:57.5482947Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "58c78537-ccf9-4f6b-a0fd-c0600b8ea319",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This works for me:\r\n\r\n\r\n**(in \"User Interface Initialisation\"):**\r\n```\r\nJS.eval (\"setFloatingImage = function (image) {  $('#gameMap').remove();  var  pane = $(\\\"<img id='gameMap' src='\\\"+image+\\\"' />\\\");  pane.appendTo('#divOutput');  pane.css({position: 'fixed', right: 20, top: 50});};\")\r\n```\r\n\r\n---\r\nExample game:\r\n\r\n```\r\n\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Help Cheese\">\r\n    <gameid>964dd7f0-f72a-4f7b-969d-d8054a75d95b</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <cover>back.png</cover>\r\n    <feature_advancedscripts />\r\n    <inituserinterface type=\"script\"><![CDATA[\r\n      JS.eval (\"setFloatingImage = function (image) {  $('#gameMap').remove();  var  pane = $(\\\"<img id='gameMap' src='\\\"+image+\\\"' />\\\");  pane.appendTo('#divOutput');  pane.css({position: 'fixed', right: 20, top: 50});};\")\r\n    ]]></inituserinterface>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <beforeenter type=\"script\">\r\n      JS.setFloatingImage (GetFileURL(\"back.png\"))\r\n    </beforeenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <exit alias=\"north\" to=\"second room\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"second room\">\r\n    <inherit name=\"editor_room\" />\r\n    <beforeenter type=\"script\">\r\n      JS.setFloatingImage (GetFileURL(\"back2.png\"))\r\n    </beforeenter>\r\n    <exit alias=\"south\" to=\"room\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n  <javascript src=\"javascript.js\" />\r\n</asl>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>This works for me:</p>\n<p><strong>(in \"User Interface Initialisation\"):</strong></p>\n<pre><code>JS.eval (\"setFloatingImage = function (image) {  $('#gameMap').remove();  var  pane = $(\\\"&lt;img id='gameMap' src='\\\"+image+\\\"' /&gt;\\\");  pane.appendTo('#divOutput');  pane.css({position: 'fixed', right: 20, top: 50});};\")\n</code></pre>\n<hr>\n<p>Example game:</p>\n<pre><code>\n&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Help Cheese\"&gt;\n    &lt;gameid&gt;964dd7f0-f72a-4f7b-969d-d8054a75d95b&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;cover&gt;back.png&lt;/cover&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;inituserinterface type=\"script\"&gt;&lt;![CDATA[\n      JS.eval (\"setFloatingImage = function (image) {  $('#gameMap').remove();  var  pane = $(\\\"&lt;img id='gameMap' src='\\\"+image+\\\"' /&gt;\\\");  pane.appendTo('#divOutput');  pane.css({position: 'fixed', right: 20, top: 50});};\")\n    ]]&gt;&lt;/inituserinterface&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;beforeenter type=\"script\"&gt;\n      JS.setFloatingImage (GetFileURL(\"back.png\"))\n    &lt;/beforeenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"north\" to=\"second room\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"second room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;beforeenter type=\"script\"&gt;\n      JS.setFloatingImage (GetFileURL(\"back2.png\"))\n    &lt;/beforeenter&gt;\n    &lt;exit alias=\"south\" to=\"room\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;javascript src=\"javascript.js\" /&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2018-05-20T21:43:10.3201031Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "08232e17-bfbc-427d-bc45-003681b88716",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I don't remember this, and it doesn't look like my dialect:\r\n\r\nIt looks like 'standard' jQuery code; following the style guides in the manuals. I don't see any errors in it.\r\n\r\n<details>\r\n<summary>Answering what looks like some confusion</summary>\r\n\r\n> ...but that is changing what pane is pointing to...\r\nFirst it's the element with the id \"gameMap\", then it....\r\n\r\nFirst it does `var pane = $(\"#gameMap\");`, which creates a selector object (essentially a list with some extra functions) containing all elements with the id \"gameMap\". If that list has length 0 (the image doesn't already exist) it creates it, and assigns `pane` to be a selector containing the newly created image element. So either way, `pane` is now an element with that ID, which the code can then set the 'src' attribute of.\r\n\r\n> The gameMap element should always have a length, even if it is 0. (I think.)\r\n\r\n`$(\"#someId\")` gives a selector object, not actually an element. Because id's are supposed to be unique, in this case the selector probably gives a list with 0 or 1 elements. `if (!pane.length) {` <- remember that in javascript, 0 counts as false. And `!` is the \"not\" operator. So that if statement executes if the length is zero; if there is no element with the specified ID.\r\n\r\nThat code should do exactly the same as the version you have; except that when the element already exists, it doesn't delete and recreate it.\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I don't remember this, and it doesn't look like my dialect:</p>\n</blockquote>\n<p>It looks like 'standard' jQuery code; following the style guides in the manuals. I don't see any errors in it.</p>\n<details>\n<summary>Answering what looks like some confusion</summary>\n<blockquote>\n<p>...but that is changing what pane is pointing to...<br>\nFirst it's the element with the id \"gameMap\", then it....</p>\n</blockquote>\n<p>First it does <code>var pane = $(\"#gameMap\");</code>, which creates a selector object (essentially a list with some extra functions) containing all elements with the id \"gameMap\". If that list has length 0 (the image doesn't already exist) it creates it, and assigns <code>pane</code> to be a selector containing the newly created image element. So either way, <code>pane</code> is now an element with that ID, which the code can then set the 'src' attribute of.</p>\n<blockquote>\n<p>The gameMap element should always have a length, even if it is 0. (I think.)</p>\n</blockquote>\n<p><code>$(\"#someId\")</code> gives a selector object, not actually an element. Because id's are supposed to be unique, in this case the selector probably gives a list with 0 or 1 elements. <code>if (!pane.length) {</code> &lt;- remember that in javascript, 0 counts as false. And <code>!</code> is the \"not\" operator. So that if statement executes if the length is zero; if there is no element with the specified ID.</p>\n<p>That code should do exactly the same as the version you have; except that when the element already exists, it doesn't delete and recreate it.</p>\n</details>\n\n",
      "PostDate": "2018-05-20T22:19:26.4044193Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "124fe79f-aab5-4711-9fbb-19204da5cb49",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> It looks like 'standard' jQuery code; following the style guides in the manuals. I don't see any errors in it.\r\n\r\nExactly!\r\n\r\nThat is proof that I didn't do it!\r\n\r\nBwahahahaha!\r\n\r\nIt's funny to me, but it is true.\r\n\r\nI do it like this:\r\n\r\n```$('<img id=\\'gameMap\\' src=\\''+image+ '\\' />')```\r\n\r\n...not like this: \r\n\r\n```$(\"<img>\", {id: \"gameMap\"})```\r\n\r\n---\r\nI don't know the fundamentals.  I just use things that I've picked up here and there which work during testing.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>It looks like 'standard' jQuery code; following the style guides in the manuals. I don't see any errors in it.</p>\n</blockquote>\n<p>Exactly!</p>\n<p>That is proof that I didn't do it!</p>\n<p>Bwahahahaha!</p>\n<p>It's funny to me, but it is true.</p>\n<p>I do it like this:</p>\n<p><code>$('&lt;img id=\\'gameMap\\' src=\\''+image+ '\\' /&gt;')</code></p>\n<p>...not like this:</p>\n<p><code>$(\"&lt;img&gt;\", {id: \"gameMap\"})</code></p>\n<hr>\n<p>I don't know the fundamentals.  I just use things that I've picked up here and there which work during testing.</p>\n\n",
      "PostDate": "2018-05-20T22:30:21.207465Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "912d6223-34b7-436c-9a07-044825011f40",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry guys, my mistake. Seems I got the code <a href=“http://textadventures.co.uk/forum/quest/topic/9-3xus0nt0yfsuyykyhlfg/external-popup-picture-over-the-gamewindow”>from you MrA </a> :)\r\n\r\nOn my way to work now so I can’t test anything. I’ll try your stuff later. Thanks both of you!\r\n\r\n(<font color=white>I hear you MrA. Very sorry to hear about your grandmother. Hang in there!</font>)",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry guys, my mistake. Seems I got the code <a>from you MrA </a> :)</p>\n<p>On my way to work now so I can’t test anything. I’ll try your stuff later. Thanks both of you!</p>\n<p>(<font color=\"white\">I hear you MrA. Very sorry to hear about your grandmother. Hang in there!</font>)</p>\n\n",
      "PostDate": "2018-05-21T06:14:00.7869914Z",
      "LastEditDate": "2018-05-21T07:52:27.8642574Z",
      "link": null
    },
    {
      "PostId": "7e143796-e6a7-420e-a570-6af5bb4167e7",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(I could PM; but I'll post here in case someone else finds this post in a search and has the same problems with my code)\r\n\r\nOK, 2 dumb errors in my code I spotted so far.\r\n\r\nFirst, I missed `function` at the beginning. Second, I had `=` instead of `==`.\r\nA few more tweaks, to make it work dynamically.\r\n\r\nChanged:\r\n```\r\nmovePlayerPointer = function(x, y, url) {\r\n  var map = $(\"#gameMap\");\r\n  if (map.length && map.is(\":visible\")) {\r\n    if (url) {\r\n      map.attr(\"src\", url);\r\n    }\r\n    var pointer = $(\"#gameMapPointer\");\r\n    if (pointer.length == 0) {\r\n      pointer = $(\"<img>\", {id: \"gameMapPointer\", src: \"http://www.rockstrom.com/tgs/act2/urh.png\"}).insertAfter(map).hide();\r\n    }\r\n    var target_coords = map.offset();\r\n    target_coords[\"left\"] += x;\r\n    target_coords[\"top\"] += y;\r\n    if (pointer.is(\":hidden\")) {\r\n      pointer.css(\"position\", map.css(\"position\"));\r\n      pointer.show();\r\n      pointer.offset(target_coords);\r\n    } else {\r\n      pointer.animate(target_coords, 250);\r\n    }\r\n  } else {\r\n    // map is hidden\r\n    mapPointerArgs = [...arguments];\r\n  }\r\n};\r\n\r\nhideGameMap = function() {\r\n  $(\"#gameMap,#gameMapPointer\").hide();\r\n};\r\nshowGameMap = function() {\r\n  if ($(\"#gameMap\").length) {\r\n    $(\"#gameMap\").show();\r\n  } else {\r\n    SetFloatingImage (\"http://default.url.here/map.png\");\r\n  }\r\n  if (mapPointerArgs) {\r\n    movePlayerPointer.apply(null, mapPointerArgs);\r\n  }\r\n};\r\n```\r\n\r\nI loaded your game and entered this function in the Javascript console, and it seems to work.\r\n\r\nCouple of other things:\r\nThe suggestion to use `GetFileURL` in your UI initialisation script was just for handling the address of files included in your published game. If the image is hosted externally, you can just put the URL in the script (like I did above).\r\n\r\nThe example I gave for how to call this function wasn't supposed to be real code; just an example. (`room` should be replaced with the appropriate room).\r\n\r\nIf there's only a few rooms, then you could just put in the room enter script for each something like:\r\n`movePlayerPointer(120, 210, \"http://www.rockstrom.com/tgs/act2/mapnml.png\")`\r\nwith the right numbers for the coordinates\r\n\r\nOr if many rooms have a map, you could put in your roomenter script (the one on the game object, that runs whenever you enter a room):\r\n```\r\nroom = game.pov.parent\r\nif (HasInt(room, \"xcoord\") and HasInt(room, \"ycoord\")) {\r\n  if (HasString (room, \"mapimage\")) {\r\n    if (IsRegexMatch(\"^(\\w+:|//)\", room.mapimage)) {\r\n      JS.movePlayerPointer (room.xcoord, room.ycoord, room.mapimage)\r\n    }\r\n    else {\r\n      JS.movePlayerPointer (room.xcoord, room.ycoord, GetFileURL(room.mapimage))\r\n    }\r\n  }\r\n  else {\r\n    JS.movePlayerPointer (room.xcoord, room.ycoord)\r\n  }\r\n}\r\n```\r\nWhich will move the pointer to the right position for any room with xcoord and ycoord (and change the map to the right one if the room also has a \"mapimage\" attribute containing a URL)\r\n\r\nI've also added functions you can call as `JS.showGameMap()` and `JS.hideGameMap()` - these *should* make the pointer appear in the right place if you move around before using it; but I haven't fully tested them.",
      "EditableFormat": "markdown",
      "HTML": "<p>(I could PM; but I'll post here in case someone else finds this post in a search and has the same problems with my code)</p>\n<p>OK, 2 dumb errors in my code I spotted so far.</p>\n<p>First, I missed <code>function</code> at the beginning. Second, I had <code>=</code> instead of <code>==</code>.<br>\nA few more tweaks, to make it work dynamically.</p>\n<p>Changed:</p>\n<pre><code>movePlayerPointer = function(x, y, url) {\n  var map = $(\"#gameMap\");\n  if (map.length &amp;&amp; map.is(\":visible\")) {\n    if (url) {\n      map.attr(\"src\", url);\n    }\n    var pointer = $(\"#gameMapPointer\");\n    if (pointer.length == 0) {\n      pointer = $(\"&lt;img&gt;\", {id: \"gameMapPointer\", src: \"http://www.rockstrom.com/tgs/act2/urh.png\"}).insertAfter(map).hide();\n    }\n    var target_coords = map.offset();\n    target_coords[\"left\"] += x;\n    target_coords[\"top\"] += y;\n    if (pointer.is(\":hidden\")) {\n      pointer.css(\"position\", map.css(\"position\"));\n      pointer.show();\n      pointer.offset(target_coords);\n    } else {\n      pointer.animate(target_coords, 250);\n    }\n  } else {\n    // map is hidden\n    mapPointerArgs = [...arguments];\n  }\n};\n\nhideGameMap = function() {\n  $(\"#gameMap,#gameMapPointer\").hide();\n};\nshowGameMap = function() {\n  if ($(\"#gameMap\").length) {\n    $(\"#gameMap\").show();\n  } else {\n    SetFloatingImage (\"http://default.url.here/map.png\");\n  }\n  if (mapPointerArgs) {\n    movePlayerPointer.apply(null, mapPointerArgs);\n  }\n};\n</code></pre>\n<p>I loaded your game and entered this function in the Javascript console, and it seems to work.</p>\n<p>Couple of other things:<br>\nThe suggestion to use <code>GetFileURL</code> in your UI initialisation script was just for handling the address of files included in your published game. If the image is hosted externally, you can just put the URL in the script (like I did above).</p>\n<p>The example I gave for how to call this function wasn't supposed to be real code; just an example. (<code>room</code> should be replaced with the appropriate room).</p>\n<p>If there's only a few rooms, then you could just put in the room enter script for each something like:<br>\n<code>movePlayerPointer(120, 210, \"http://www.rockstrom.com/tgs/act2/mapnml.png\")</code><br>\nwith the right numbers for the coordinates</p>\n<p>Or if many rooms have a map, you could put in your roomenter script (the one on the game object, that runs whenever you enter a room):</p>\n<pre><code>room = game.pov.parent\nif (HasInt(room, \"xcoord\") and HasInt(room, \"ycoord\")) {\n  if (HasString (room, \"mapimage\")) {\n    if (IsRegexMatch(\"^(\\w+:|//)\", room.mapimage)) {\n      JS.movePlayerPointer (room.xcoord, room.ycoord, room.mapimage)\n    }\n    else {\n      JS.movePlayerPointer (room.xcoord, room.ycoord, GetFileURL(room.mapimage))\n    }\n  }\n  else {\n    JS.movePlayerPointer (room.xcoord, room.ycoord)\n  }\n}\n</code></pre>\n<p>Which will move the pointer to the right position for any room with xcoord and ycoord (and change the map to the right one if the room also has a \"mapimage\" attribute containing a URL)</p>\n<p>I've also added functions you can call as <code>JS.showGameMap()</code> and <code>JS.hideGameMap()</code> - these <em>should</em> make the pointer appear in the right place if you move around before using it; but I haven't fully tested them.</p>\n\n",
      "PostDate": "2018-05-21T14:46:58.4955229Z",
      "LastEditDate": "2018-05-21T15:10:41.8435121Z",
      "link": null
    },
    {
      "PostId": "b34e2da7-bc71-435c-a9d2-d9c9766a84a9",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "No need to apologize, Cheese.  I was just putting the facts out there.  (You never know when the facts might save the day!)\r\n\r\n---\r\nI just now saw the Invisiclues...  (I was reading those posts on my phone, and I didn't even recognize the pattern that way.\r\n\r\n[<span style='color:white;'>My condolences, mrangel.</span>]",
      "EditableFormat": "markdown",
      "HTML": "<p>No need to apologize, Cheese.  I was just putting the facts out there.  (You never know when the facts might save the day!)</p>\n<hr>\n<p>I just now saw the Invisiclues...  (I was reading those posts on my phone, and I didn't even recognize the pattern that way.</p>\n<p>[<span style=\"color: white\">My condolences, mrangel.</span>]</p>\n\n",
      "PostDate": "2018-05-21T15:27:15.6507239Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f12107fe-81d2-4f9b-97ef-5076b33f8811",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(now you've got me thinking… rather than storing the arguments in a global variable so that the map can be displayed correctly, would it be better to put them as attributes on an invisible element in the output? That way, when reloading a saved game, the script would be able to redraw the map correctly. Maybe even stick a `<script id=\"mapScript\" mapDisplayed=\"1\" xcoord=\"99\" ycoord=\"104\" mapimage=\"http://some_url\">var data = $(\"#mapScript\"); if (data.attr(\"mapDisplayed\")) { movePlayerPointer( data.attr(\"xcoord\"), data.attr(\"ycoord\"), data.attr(\"mapimage\")); }</script>` in the output div and modify its attributes each time movePlayerPointer is called. That way, the map should appear in the same state it was in before when you load a saved game.\r\n\r\n(what's the order of execution for loading javascripts included in the Quest file, restoring the saved output, and running UI initialisation scripts? I don't remember)",
      "EditableFormat": "markdown",
      "HTML": "<p>(now you've got me thinking… rather than storing the arguments in a global variable so that the map can be displayed correctly, would it be better to put them as attributes on an invisible element in the output? That way, when reloading a saved game, the script would be able to redraw the map correctly. Maybe even stick a <code>&lt;script id=\"mapScript\" mapDisplayed=\"1\" xcoord=\"99\" ycoord=\"104\" mapimage=\"http://some_url\"&gt;var data = $(\"#mapScript\"); if (data.attr(\"mapDisplayed\")) { movePlayerPointer( data.attr(\"xcoord\"), data.attr(\"ycoord\"), data.attr(\"mapimage\")); }&lt;/script&gt;</code> in the output div and modify its attributes each time movePlayerPointer is called. That way, the map should appear in the same state it was in before when you load a saved game.</p>\n<p>(what's the order of execution for loading javascripts included in the Quest file, restoring the saved output, and running UI initialisation scripts? I don't remember)</p>\n\n",
      "PostDate": "2018-05-21T15:46:16.3049024Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "58984539-50e5-4526-923c-599e9c3ad804",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That looks amazing MRA!\r\nI’m putting my daughter to bed now but I’ll give it a run after. Thank you so much!!!",
      "EditableFormat": "markdown",
      "HTML": "<p>That looks amazing MRA!<br>\nI’m putting my daughter to bed now but I’ll give it a run after. Thank you so much!!!</p>\n\n",
      "PostDate": "2018-05-21T18:04:06.6936105Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c9fba400-6c15-4c02-b32e-a4b2f1a48f68",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> what's the order of execution for loading javascripts included in the Quest file, restoring the saved output, and running UI initialisation scripts? \r\n\r\nThis is the order in which things fire in the desktop player:\r\n\r\n1: LOADING PLAYERCORE.JS\r\n\r\n2: LOADING DESKTOPPLAYER.JS\r\n\r\n3: javascript.js function\r\n\r\n4: User interface initialisation.\r\n\r\n5: Start script.\r\n\r\n6: script ELEMENT IN divOutput\r\n\r\n7: library_object initialisation\r\n\r\n8: library_object js string attribute\r\n\r\n9: in-game_object initialisation\r\n\r\n10: in-game_object js string attribute\r\n\r\n11: before entering room first time\r\n\r\n12: before entering room\r\n\r\n13: after entering room first time\r\n\r\n14: after entering room\r\n\r\n\r\n---\r\n...and this is loading a saved game:\r\n\r\n1: LOADING PLAYERCORE.JS\r\n\r\n2: LOADING DESKTOPPLAYER.JS\r\n\r\n3: javascript.js function\r\n\r\n4: User interface initialisation.\r\n\r\n5: script ELEMENT IN divOutput",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>what's the order of execution for loading javascripts included in the Quest file, restoring the saved output, and running UI initialisation scripts?</p>\n</blockquote>\n<p>This is the order in which things fire in the desktop player:</p>\n<p>1: LOADING PLAYERCORE.JS</p>\n<p>2: LOADING DESKTOPPLAYER.JS</p>\n<p>3: javascript.js function</p>\n<p>4: User interface initialisation.</p>\n<p>5: Start script.</p>\n<p>6: script ELEMENT IN divOutput</p>\n<p>7: library_object initialisation</p>\n<p>8: library_object js string attribute</p>\n<p>9: in-game_object initialisation</p>\n<p>10: in-game_object js string attribute</p>\n<p>11: before entering room first time</p>\n<p>12: before entering room</p>\n<p>13: after entering room first time</p>\n<p>14: after entering room</p>\n<hr>\n<p>...and this is loading a saved game:</p>\n<p>1: LOADING PLAYERCORE.JS</p>\n<p>2: LOADING DESKTOPPLAYER.JS</p>\n<p>3: javascript.js function</p>\n<p>4: User interface initialisation.</p>\n<p>5: script ELEMENT IN divOutput</p>\n\n",
      "PostDate": "2018-05-21T18:07:52.330716Z",
      "LastEditDate": "2018-05-21T18:08:40.7816546Z",
      "link": null
    },
    {
      "PostId": "fd2ac7b1-fa6c-43af-9c4e-61312e343600",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hmm, can't quite get that marker to show up. I'm confuzzled.\r\nEither way; thanks a lot for all the help mrA!\r\n(from here on out it's just me and my inabilities :))\r\n((I shall try to make it work!))",
      "EditableFormat": "markdown",
      "HTML": "<p>Hmm, can't quite get that marker to show up. I'm confuzzled.<br>\nEither way; thanks a lot for all the help mrA!<br>\n(from here on out it's just me and my inabilities :))<br>\n((I shall try to make it work!))</p>\n\n",
      "PostDate": "2018-05-21T19:26:24.7344464Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5ed1c386-ec21-430e-ad9a-65f391bd28ec",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I posted, then edited to make it more stable… just my luck if I added another error.\r\nIf you want republish the game, I could try debugging.",
      "EditableFormat": "markdown",
      "HTML": "<p>I posted, then edited to make it more stable… just my luck if I added another error.<br>\nIf you want republish the game, I could try debugging.</p>\n\n",
      "PostDate": "2018-05-21T20:16:32.1101968Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6f2c2e89-0795-436f-83af-52505c22f33e",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It's republished!\r\n(type, \"open plate\", then \"u\" to go up to no man's land. I moved the game.pov so you don't have to look at the intro again)\r\n\r\n((Oh, only the first two rooms in NML have coordinates. The one you end up in when leaving the hole, and the one directly north of that one))",
      "EditableFormat": "markdown",
      "HTML": "<p>It's republished!<br>\n(type, \"open plate\", then \"u\" to go up to no man's land. I moved the game.pov so you don't have to look at the intro again)</p>\n<p>((Oh, only the first two rooms in NML have coordinates. The one you end up in when leaving the hole, and the one directly north of that one))</p>\n\n",
      "PostDate": "2018-05-21T20:34:57.9590112Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3945018f-0631-45c7-8698-50b0222bfbb0",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "In the \"map\" command, you have `JS.JS.showGameMap()` and `JS.JS.hideGameMap()`. The repeated JS is the only issue I can see in a quick scan. I guess you're editing in GUI mode :)\r\n\r\n(sorry I'm having to throw suggestions back and forth; I don't have the desktop version of Quest, and the web version means I can't actually edit a game file to test it. So if there's still an error, let me know and I'll see if I can track it down)",
      "EditableFormat": "markdown",
      "HTML": "<p>In the \"map\" command, you have <code>JS.JS.showGameMap()</code> and <code>JS.JS.hideGameMap()</code>. The repeated JS is the only issue I can see in a quick scan. I guess you're editing in GUI mode :)</p>\n<p>(sorry I'm having to throw suggestions back and forth; I don't have the desktop version of Quest, and the web version means I can't actually edit a game file to test it. So if there's still an error, let me know and I'll see if I can track it down)</p>\n\n",
      "PostDate": "2018-05-21T21:55:59.9589007Z",
      "LastEditDate": "2018-05-21T21:57:48.5998559Z",
      "link": null
    },
    {
      "PostId": "2b3c3830-91bf-4bfc-adf2-bbe068f0acbd",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you guys need help, I can open the game in the desktop editor and apply mrangel's suggested fixes.  Just say the word.",
      "EditableFormat": "markdown",
      "HTML": "<p>If you guys need help, I can open the game in the desktop editor and apply mrangel's suggested fixes.  Just say the word.</p>\n\n",
      "PostDate": "2018-05-21T22:17:32.2469303Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "40085706-d397-43be-967b-16623a10b1cb",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "oh, and the coordinates for those two rooms should probably be closer to [270,275] and [270,245]\r\n\r\nIf you're playing around to find the right place, you can enter \"javascript:movePlayerPointer(270,275)\" or similar in the address bar to move the pointer around while you're playing the game :p\r\n\r\nI'm finding that if I use the javascript console to enable the map, the pointer appears in the right place for the last room with coords I was in; but if I move between the two rooms while it's open, the pointer is hidden again, and I have no idea why.",
      "EditableFormat": "markdown",
      "HTML": "<p>oh, and the coordinates for those two rooms should probably be closer to [270,275] and [270,245]</p>\n<p>If you're playing around to find the right place, you can enter \"javascript:movePlayerPointer(270,275)\" or similar in the address bar to move the pointer around while you're playing the game :p</p>\n<p>I'm finding that if I use the javascript console to enable the map, the pointer appears in the right place for the last room with coords I was in; but if I move between the two rooms while it's open, the pointer is hidden again, and I have no idea why.</p>\n\n",
      "PostDate": "2018-05-21T22:34:14.8119732Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ad0c438a-6d74-48ef-bd83-150b475f73ae",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh. *facepalm*\r\n\r\nClearScreen removes the pointer.\r\nIn the SetFloatingImage script, you might want to change `appendTo(` to `insertAfter(` … but that would result in your map not appearing when you load a saved game.\r\n\r\nOr, immediately after clearing the screen, you could add\r\n```\r\nif (GetBoolean(player, \"mapout\")) {\r\n  JS.showGameMap()\r\n}\r\n```\r\n(are you clearing the screen when entering a new room? In that case, you could put those lines at the start of the `roomenter` script ... not sure if that would cause the pointer to jerk or flicker, though)",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh. <em>facepalm</em></p>\n<p>ClearScreen removes the pointer.<br>\nIn the SetFloatingImage script, you might want to change <code>appendTo(</code> to <code>insertAfter(</code> … but that would result in your map not appearing when you load a saved game.</p>\n<p>Or, immediately after clearing the screen, you could add</p>\n<pre><code>if (GetBoolean(player, \"mapout\")) {\n  JS.showGameMap()\n}\n</code></pre>\n<p>(are you clearing the screen when entering a new room? In that case, you could put those lines at the start of the <code>roomenter</code> script ... not sure if that would cause the pointer to jerk or flicker, though)</p>\n\n",
      "PostDate": "2018-05-21T22:41:08.4568745Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bf1d7d8c-0f27-412c-b588-efb5ce7344a6",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Good morning!\r\nI applied all the changes but I just won't see the \"pointer img\" (this-> <img src=\"http://www.rockstrom.com/tgs/act2/urh.png\">) over the main map.\r\nI've removed everything and started over but.. that little blue dot obviously hates my guts!",
      "EditableFormat": "markdown",
      "HTML": "<p>Good morning!<br>\nI applied all the changes but I just won't see the \"pointer img\" (this-&gt; <img src=\"http://www.rockstrom.com/tgs/act2/urh.png\">) over the main map.<br>\nI've removed everything and started over but.. that little blue dot obviously hates my guts!</p>\n\n",
      "PostDate": "2018-05-22T06:58:50.4281312Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9d815dee-4d0d-47d7-a62e-0b3a1bae294c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yep, I added more errors ):\r\n\r\n**EDIT**: modified clearScreen function so it removes everything *except* the map\r\n```\r\nmovePlayerPointer = function(x, y, url) {\r\n  var map = $(\"#gameMap\");\r\n  if (map.length && map.is(\":visible\")) {\r\n    if (url) {\r\n      map.attr(\"src\", url);\r\n    }\r\n    var pointer = $(\"#gameMapPointer\");\r\n    if (pointer.length == 0) {\r\n      pointer = $(\"<img>\", {id: \"gameMapPointer\", src: \"http://www.rockstrom.com/tgs/act2/urh.png\"}).insertAfter(map).hide();\r\n    }\r\n    var target_coords = map.offset();\r\n    target_coords[\"left\"] += x;\r\n    target_coords[\"top\"] += y;\r\n    if (pointer.is(\":hidden\")) {\r\n      pointer.css(\"position\", map.css(\"position\"));\r\n      pointer.show();\r\n      pointer.offset(target_coords);\r\n    } else {\r\n      pointer.animate(target_coords, 250);\r\n    }\r\n  } else {\r\n    // map is hidden\r\n    mapPointerArgs = [...arguments];\r\n  }\r\n};\r\n\r\nhideGameMap = function() {\r\n  $(\"#gameMap,#gameMapPointer\").hide();\r\n};\r\nshowGameMap = function() {\r\n  if ($(\"#gameMap\").length) {\r\n    $(\"#gameMap\").show();\r\n  } else {\r\n    SetFloatingImage (\"http://www.rockstrom.com/tgs/act2/map.png\");\r\n  }\r\n  if (window.mapPointerArgs) {\r\n    movePlayerPointer.apply(null, mapPointerArgs);\r\n  }\r\n};\r\n\r\nfunction clearScreen() {\r\n  var map = $(\"#gameMap,#gameMapPointer\").appendTo(\"body\");\r\n  $(\"#divOutput\").css(\"min-height\", 0);\r\n  $(\"#divOutput\").html(\"\");\r\n  createNewDiv(\"left\");\r\n  beginningOfCurrentTurnScrollPosition = 0;\r\n  setTimeout(function () {\r\n    $(\"html,body\").scrollTop(0);\r\n  }, 100);\r\n  map.appendTo(\"#divOutput\");\r\n};\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Yep, I added more errors ):</p>\n<p><strong>EDIT</strong>: modified clearScreen function so it removes everything <em>except</em> the map</p>\n<pre><code>movePlayerPointer = function(x, y, url) {\n  var map = $(\"#gameMap\");\n  if (map.length &amp;&amp; map.is(\":visible\")) {\n    if (url) {\n      map.attr(\"src\", url);\n    }\n    var pointer = $(\"#gameMapPointer\");\n    if (pointer.length == 0) {\n      pointer = $(\"&lt;img&gt;\", {id: \"gameMapPointer\", src: \"http://www.rockstrom.com/tgs/act2/urh.png\"}).insertAfter(map).hide();\n    }\n    var target_coords = map.offset();\n    target_coords[\"left\"] += x;\n    target_coords[\"top\"] += y;\n    if (pointer.is(\":hidden\")) {\n      pointer.css(\"position\", map.css(\"position\"));\n      pointer.show();\n      pointer.offset(target_coords);\n    } else {\n      pointer.animate(target_coords, 250);\n    }\n  } else {\n    // map is hidden\n    mapPointerArgs = [...arguments];\n  }\n};\n\nhideGameMap = function() {\n  $(\"#gameMap,#gameMapPointer\").hide();\n};\nshowGameMap = function() {\n  if ($(\"#gameMap\").length) {\n    $(\"#gameMap\").show();\n  } else {\n    SetFloatingImage (\"http://www.rockstrom.com/tgs/act2/map.png\");\n  }\n  if (window.mapPointerArgs) {\n    movePlayerPointer.apply(null, mapPointerArgs);\n  }\n};\n\nfunction clearScreen() {\n  var map = $(\"#gameMap,#gameMapPointer\").appendTo(\"body\");\n  $(\"#divOutput\").css(\"min-height\", 0);\n  $(\"#divOutput\").html(\"\");\n  createNewDiv(\"left\");\n  beginningOfCurrentTurnScrollPosition = 0;\n  setTimeout(function () {\n    $(\"html,body\").scrollTop(0);\n  }, 100);\n  map.appendTo(\"#divOutput\");\n};\n</code></pre>\n\n",
      "PostDate": "2018-05-22T10:21:29.7672408Z",
      "LastEditDate": "2018-05-22T10:31:32.3657172Z",
      "link": null
    },
    {
      "PostId": "30cbb6ac-8840-44eb-8205-2a1ed4e05c98",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Just so your game isn't lacking a feature in Quest 5.8, you *might* want to change that ```clearScreen()``` to this (which has mrangel's changes added to the recently modified function):\r\n\r\n```\r\n function clearScreen() {\r\n    var map = $(\"#gameMap,#gameMapPointer\").appendTo(\"body\");\r\n    if (!saveClearedText) {\r\n        $(\"#divOutput\").css(\"min-height\", 0);\r\n        $(\"#divOutput\").html(\"\");\r\n        createNewDiv(\"left\");\r\n        beginningOfCurrentTurnScrollPosition = 0;\r\n        setTimeout(function () {\r\n            $(\"html,body\").scrollTop(0);\r\n        }, 100);\r\n    } else {\r\n        $(\"#divOutput\").append(\"<hr class='clearedAbove' />\");\r\n        if (!clearedOnce) {\r\n            addText('<style>#divOutput > .clearedScreen { display: none; }</style>');\r\n        }\r\n        clearedOnce = true;\r\n        $('#divOutput').children().addClass('clearedScreen');\r\n        $('#divOutput').css('min-height', 0);\r\n        createNewDiv('left');\r\n        beginningOfCurrentTurnScrollPosition = 0;\r\n        setTimeout(function () {\r\n            $('html,body').scrollTop(0);\r\n        }, 100);\r\n    }\r\n    map.appendTo(\"#divOutput\");\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Just so your game isn't lacking a feature in Quest 5.8, you <em>might</em> want to change that <code>clearScreen()</code> to this (which has mrangel's changes added to the recently modified function):</p>\n<pre><code> function clearScreen() {\n    var map = $(\"#gameMap,#gameMapPointer\").appendTo(\"body\");\n    if (!saveClearedText) {\n        $(\"#divOutput\").css(\"min-height\", 0);\n        $(\"#divOutput\").html(\"\");\n        createNewDiv(\"left\");\n        beginningOfCurrentTurnScrollPosition = 0;\n        setTimeout(function () {\n            $(\"html,body\").scrollTop(0);\n        }, 100);\n    } else {\n        $(\"#divOutput\").append(\"&lt;hr class='clearedAbove' /&gt;\");\n        if (!clearedOnce) {\n            addText('&lt;style&gt;#divOutput &gt; .clearedScreen { display: none; }&lt;/style&gt;');\n        }\n        clearedOnce = true;\n        $('#divOutput').children().addClass('clearedScreen');\n        $('#divOutput').css('min-height', 0);\n        createNewDiv('left');\n        beginningOfCurrentTurnScrollPosition = 0;\n        setTimeout(function () {\n            $('html,body').scrollTop(0);\n        }, 100);\n    }\n    map.appendTo(\"#divOutput\");\n}\n</code></pre>\n\n",
      "PostDate": "2018-05-22T10:56:33.7792534Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "85f75ce1-f62f-4cf5-ab7b-247bac6e1f2e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@KV\r\nThanks, I hadn't seen that yet. But shouldn't most of that code be outside the 'if' block?\r\n(Didn't we previously prevent #outputData from being cleared, in the same way I'm protecting the map?)",
      "EditableFormat": "markdown",
      "HTML": "<p>@KV<br>\nThanks, I hadn't seen that yet. But shouldn't most of that code be outside the 'if' block?<br>\n(Didn't we previously prevent #outputData from being cleared, in the same way I'm protecting the map?)</p>\n\n",
      "PostDate": "2018-05-22T11:25:32.10278Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "24ec0d44-11ba-4475-a753-cbfc9c2daeef",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(Actually, I'm thinking there's quite a lot of situations where you might want some part of the output to survive a ClearScreen. Might be possible to put something in core, something like:\r\n```\r\nfunction clearScreen() {\r\n    if (!saveClearedText) {\r\n        $(\"#divOutput\").children(\":not(.donotclear)\").remove();\r\n    } else {\r\n        $(\"#divOutput\").append(\"<hr class='clearedAbove' />\");\r\n        if (!clearedOnce) {\r\n            addText('<style>#divOutput > .clearedScreen { display: none; }</style>');\r\n        }\r\n        clearedOnce = true;\r\n        $('#divOutput').children(\":not(.donotclear)\").addClass('clearedScreen');\r\n    }\r\n    $('#divOutput').css('min-height', 0);\r\n    createNewDiv('left');\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $('html,body').scrollTop(0);\r\n    }, 100);\r\n}\r\n```\r\nThen we could just do `$(\"#gameMap,#gameMapPointer\").addClass(\"donotclear\");` or similar, and not have to modify `clearScreen` for each specific case.",
      "EditableFormat": "markdown",
      "HTML": "<p>(Actually, I'm thinking there's quite a lot of situations where you might want some part of the output to survive a ClearScreen. Might be possible to put something in core, something like:</p>\n<pre><code>function clearScreen() {\n    if (!saveClearedText) {\n        $(\"#divOutput\").children(\":not(.donotclear)\").remove();\n    } else {\n        $(\"#divOutput\").append(\"&lt;hr class='clearedAbove' /&gt;\");\n        if (!clearedOnce) {\n            addText('&lt;style&gt;#divOutput &gt; .clearedScreen { display: none; }&lt;/style&gt;');\n        }\n        clearedOnce = true;\n        $('#divOutput').children(\":not(.donotclear)\").addClass('clearedScreen');\n    }\n    $('#divOutput').css('min-height', 0);\n    createNewDiv('left');\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $('html,body').scrollTop(0);\n    }, 100);\n}\n</code></pre>\n<p>Then we could just do <code>$(\"#gameMap,#gameMapPointer\").addClass(\"donotclear\");</code> or similar, and not have to modify <code>clearScreen</code> for each specific case.</p>\n\n",
      "PostDate": "2018-05-22T11:30:51.2001784Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8b6555bd-14f9-4abd-8459-ee1c68d8dd49",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sold!\r\n\r\nHey...\r\n\r\nThere's that pesky min-height again... \r\n\r\n```$('#divOutput').css('min-height', 0);```\r\n\r\nCan we do away with that here and in ```addText()```?  (I did in my most recent build.  I see no problems, but you think of things I don't think of quite frequently.)\r\n\r\n\r\n\r\n---\r\nPixie!  You want this in a pull request?",
      "EditableFormat": "markdown",
      "HTML": "<p>Sold!</p>\n<p>Hey...</p>\n<p>There's that pesky min-height again...</p>\n<p><code>$('#divOutput').css('min-height', 0);</code></p>\n<p>Can we do away with that here and in <code>addText()</code>?  (I did in my most recent build.  I see no problems, but you think of things I don't think of quite frequently.)</p>\n<hr>\n<p>Pixie!  You want this in a pull request?</p>\n\n",
      "PostDate": "2018-05-22T12:14:57.4039455Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c8c09a14-9558-40fe-8a98-324107af6f0b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Can we do away with that here and in addText()?\r\n\r\nI've suggested that a few times; but still don't know why it's there at all.\r\n\r\nI would suggest removing it from addText(), but leave it here and in HideOutputSection().\r\n\r\nMy reasoning: If a user has overridden addText, or created some function that sets min-height, they might rely on it being zeroed in clearScreen because that's the existing behaviour. If they haven't then it will always be set to zero (its default value), so explicitly zeroing it has no adverse effects.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Can we do away with that here and in addText()?</p>\n</blockquote>\n<p>I've suggested that a few times; but still don't know why it's there at all.</p>\n<p>I would suggest removing it from addText(), but leave it here and in HideOutputSection().</p>\n<p>My reasoning: If a user has overridden addText, or created some function that sets min-height, they might rely on it being zeroed in clearScreen because that's the existing behaviour. If they haven't then it will always be set to zero (its default value), so explicitly zeroing it has no adverse effects.</p>\n\n",
      "PostDate": "2018-05-22T12:43:39.6318744Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "44b81968-da6a-4b97-8b60-43df97eb82a8",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hey, got a lot on my plate atm. I've seen your updates but haven't had the time to actually try it out.\r\nEither way: I appreciate all the help you've guys has supplied me with. I appreciate it like hell!!\r\n<h3>Thanks!</h3>",
      "EditableFormat": "markdown",
      "HTML": "<p>Hey, got a lot on my plate atm. I've seen your updates but haven't had the time to actually try it out.<br>\nEither way: I appreciate all the help you've guys has supplied me with. I appreciate it like hell!!<br>\n</p><h3>Thanks!</h3><p></p>\n\n",
      "PostDate": "2018-05-23T08:08:34.1607613Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9bb073b6-d080-4999-a562-d1e7ab2de12c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@KV\r\nI'm thinking that it might be nice to have a function in playercore like:\r\n```\r\nfunction addUIElement (id, html) {\r\n  if ($(\"#\"+id).show().length) {\r\n    return false;\r\n  }\r\n  var element;\r\n  if (!html.match(/^<.+>$/)) {\r\n    element = $(\"<div>\", {id: id}).html(html);\r\n  } else {\r\n    element = $(html);\r\n    if (element.length > 1) {\r\n      element = $(\"<div>\", {id: id}).append(element);\r\n    } else {\r\n      element.attr(\"id\", id);\r\n    }\r\n  }\r\n  element.addClass(\"donotclear\").css({position: \"fixed\"});\r\n  return id;\r\n}\r\n```\r\nThen anyone who's adding their own UI elements can use it rather than addText() for spitting out elements which are fixed position, and it sets \"donotclear\" automatically. Just makes it a little easier (assuming the function gets mentioned in the docs somewhere).\r\n\r\nA user making their own UI stuff could do something like:\r\n```\r\nif (addUIElement('floatingImage', '<img src=\"loads_of_porn.png\" />')) {\r\n  // any initial code which doesn't need to be done if the element exists\r\n} else {\r\n  // modify the element's contents if it already exists\r\n}\r\n```\r\n\r\nIn that case, there should probably be `positionUIElement` and `removeUIElement` helper functions too.",
      "EditableFormat": "markdown",
      "HTML": "<p>@KV<br>\nI'm thinking that it might be nice to have a function in playercore like:</p>\n<pre><code>function addUIElement (id, html) {\n  if ($(\"#\"+id).show().length) {\n    return false;\n  }\n  var element;\n  if (!html.match(/^&lt;.+&gt;$/)) {\n    element = $(\"&lt;div&gt;\", {id: id}).html(html);\n  } else {\n    element = $(html);\n    if (element.length &gt; 1) {\n      element = $(\"&lt;div&gt;\", {id: id}).append(element);\n    } else {\n      element.attr(\"id\", id);\n    }\n  }\n  element.addClass(\"donotclear\").css({position: \"fixed\"});\n  return id;\n}\n</code></pre>\n<p>Then anyone who's adding their own UI elements can use it rather than addText() for spitting out elements which are fixed position, and it sets \"donotclear\" automatically. Just makes it a little easier (assuming the function gets mentioned in the docs somewhere).</p>\n<p>A user making their own UI stuff could do something like:</p>\n<pre><code>if (addUIElement('floatingImage', '&lt;img src=\"loads_of_porn.png\" /&gt;')) {\n  // any initial code which doesn't need to be done if the element exists\n} else {\n  // modify the element's contents if it already exists\n}\n</code></pre>\n<p>In that case, there should probably be <code>positionUIElement</code> and <code>removeUIElement</code> helper functions too.</p>\n\n",
      "PostDate": "2018-05-23T09:28:44.6521107Z",
      "LastEditDate": "2018-05-23T10:11:43.8495555Z",
      "link": null
    },
    {
      "PostId": "3c900b0f-ae5a-48b1-8827-ee2816f31a9f",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "<details>\r\n<summary>Warning; huge digression</summary>\r\n\r\n(And now that's got me thinking: can Quest code not get the return value from a JS function? I remember somebody saying something like that, and now I wonder why)\r\n\r\nI'm thinking of something like:\r\n```\r\nCallJavascript(\"someFunction(foo)\") {\r\n  player.fooness = result\r\n}\r\n```\r\nThat shouldn't be hard to implement. I could do it in Quest code, but it's inelegant:\r\n```\r\n<function name=\"CallJavascript\" parameters=\"script,callback\">\r\n  if (not HasAttribute(game, \"javascriptcallbacks\")) {\r\n    game.javascriptcallbacks = NewScriptDictionary()\r\n  }\r\n  id = GetRandomLetter()\r\n  while (DictionaryContains (game.javascriptcallbacks, id)) {\r\n    id = id + GetRandomLetter()\r\n  }\r\n  dictionary add (game.javascriptcallbacks, id, callback)\r\n  JS.eval (\"ASLEvent('HandleJSFunctionReturn', id+\"/\"+eval('(\"+script+\")'));\")\r\n</function>\r\n\r\n<function name=\"HandleJSFunctionReturn\" parameters=\"data\">\r\n  results = Split(data, \"/\")\r\n  id = ListItem (results, 0)\r\n  list remove (results, id)\r\n  if (not DictionaryContains (game.javascriptcallbacks, id)) {\r\n    error (\"Unexpected JS callback: (\"+data+\").\")\r\n  }\r\n  else {\r\n    script = DictionaryItem (game.javascriptcallbacks, id)\r\n    params = NewDictionary()\r\n    dictionary add (params, \"result\", Join(results, \"/\"))\r\n    invoke (script, params)\r\n    dictionary remove (game.javascriptcallbacks, id)\r\n  }\r\n</function>\r\n```\r\n\r\nIf this was done in C#, it should be possible to make it use the `JS.someFunction(\"foo\") { …` syntax, which would be much better. And also, could use the existing JSON code so that the parameters and return value can be JSONed so you can pass and return lists and dictionaries more easily.\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<details>\n<summary>Warning; huge digression</summary>\n<p>(And now that's got me thinking: can Quest code not get the return value from a JS function? I remember somebody saying something like that, and now I wonder why)</p>\n<p>I'm thinking of something like:</p>\n<pre><code>CallJavascript(\"someFunction(foo)\") {\n  player.fooness = result\n}\n</code></pre>\n<p>That shouldn't be hard to implement. I could do it in Quest code, but it's inelegant:</p>\n<pre><code>&lt;function name=\"CallJavascript\" parameters=\"script,callback\"&gt;\n  if (not HasAttribute(game, \"javascriptcallbacks\")) {\n    game.javascriptcallbacks = NewScriptDictionary()\n  }\n  id = GetRandomLetter()\n  while (DictionaryContains (game.javascriptcallbacks, id)) {\n    id = id + GetRandomLetter()\n  }\n  dictionary add (game.javascriptcallbacks, id, callback)\n  JS.eval (\"ASLEvent('HandleJSFunctionReturn', id+\"/\"+eval('(\"+script+\")'));\")\n&lt;/function&gt;\n\n&lt;function name=\"HandleJSFunctionReturn\" parameters=\"data\"&gt;\n  results = Split(data, \"/\")\n  id = ListItem (results, 0)\n  list remove (results, id)\n  if (not DictionaryContains (game.javascriptcallbacks, id)) {\n    error (\"Unexpected JS callback: (\"+data+\").\")\n  }\n  else {\n    script = DictionaryItem (game.javascriptcallbacks, id)\n    params = NewDictionary()\n    dictionary add (params, \"result\", Join(results, \"/\"))\n    invoke (script, params)\n    dictionary remove (game.javascriptcallbacks, id)\n  }\n&lt;/function&gt;\n</code></pre>\n<p>If this was done in C#, it should be possible to make it use the <code>JS.someFunction(\"foo\") { …</code> syntax, which would be much better. And also, could use the existing JSON code so that the parameters and return value can be JSONed so you can pass and return lists and dictionaries more easily.</p>\n</details>\n\n",
      "PostDate": "2018-05-23T10:11:57.055309Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "03992701-c3c7-4769-9ca6-6cb7eae7025a",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "**EDITED**\r\n\r\nI like the function that elements.\r\n\r\n---\r\nThat digression looks similar to this:\r\n\r\nhttps://github.com/KVonGit/QuestStuff/wiki/AslSet--(Set-a-Quest-attribute-from-JS-without-firing-any-turn-scripts)\r\n\r\nShould we keep the best from both?\r\n\r\n...or does yours already cover everything mine does?  (I don't have my eyes all the way open yet, and I haven't tested it.  It looks good, though!)",
      "EditableFormat": "markdown",
      "HTML": "<p><strong>EDITED</strong></p>\n<p>I like the function that elements.</p>\n<hr>\n<p>That digression looks similar to this:</p>\n<p>https://github.com/KVonGit/QuestStuff/wiki/AslSet--(Set-a-Quest-attribute-from-JS-without-firing-any-turn-scripts)</p>\n<p>Should we keep the best from both?</p>\n<p>...or does yours already cover everything mine does?  (I don't have my eyes all the way open yet, and I haven't tested it.  It looks good, though!)</p>\n\n",
      "PostDate": "2018-05-23T10:18:28.8732391Z",
      "LastEditDate": "2018-05-23T10:36:03.8076277Z",
      "link": null
    },
    {
      "PostId": "8e8483a1-539c-4f19-a35c-4907c39e0ca6",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> That digression looks similar to this:\r\n\r\nNot really. I think you're missing the point of what I was trying to do.\r\n\r\nThe point of the digression was \"do something like `JS.someFunction()`, but the Quest script that calls it gets the return value\". The example I gave was using it to set a Quest attribute, but that's just the simplest thing I could imagine using it for.\r\n\r\nAnother (silly) example:\r\n```\r\nCallJavascript (\"window.innerWidth\") {\r\n  if (result > 2000) {\r\n    msg (\"James says: “Wow, what a huge screen you've got!”\")\r\n  }\r\n}\r\n```\r\n\r\n> Should we keep the best from both?\r\n\r\nI think they're like opposite sides of a coin. One is allowing Quest code to access JS variables and functions; the other is allowing JS code to set Quest attributes.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>That digression looks similar to this:</p>\n</blockquote>\n<p>Not really. I think you're missing the point of what I was trying to do.</p>\n<p>The point of the digression was \"do something like <code>JS.someFunction()</code>, but the Quest script that calls it gets the return value\". The example I gave was using it to set a Quest attribute, but that's just the simplest thing I could imagine using it for.</p>\n<p>Another (silly) example:</p>\n<pre><code>CallJavascript (\"window.innerWidth\") {\n  if (result &gt; 2000) {\n    msg (\"James says: “Wow, what a huge screen you've got!”\")\n  }\n}\n</code></pre>\n<blockquote>\n<p>Should we keep the best from both?</p>\n</blockquote>\n<p>I think they're like opposite sides of a coin. One is allowing Quest code to access JS variables and functions; the other is allowing JS code to set Quest attributes.</p>\n\n",
      "PostDate": "2018-05-23T10:37:46.3620738Z",
      "LastEditDate": "2018-05-23T10:38:12.8266243Z",
      "link": null
    },
    {
      "PostId": "1d100d11-5bee-4b22-a261-c45882f2efc8",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> The point of the digression was \"do something like ```JS.someFunction()```, but the Quest script that calls it gets the return value\".\r\n\r\nI was trying to do that when I gave up and made ```ASLSet```.\r\n\r\n...but I've learned a little C# since then.   I shall revisit this.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>The point of the digression was \"do something like <code>JS.someFunction()</code>, but the Quest script that calls it gets the return value\".</p>\n</blockquote>\n<p>I was trying to do that when I gave up and made <code>ASLSet</code>.</p>\n<p>...but I've learned a little C# since then.   I shall revisit this.</p>\n\n",
      "PostDate": "2018-05-23T10:40:17.6370826Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8ec20779-b879-489e-a10e-654ae4170457",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yeah, I still have no clue how to make JS talk to C#.",
      "EditableFormat": "markdown",
      "HTML": "<p>Yeah, I still have no clue how to make JS talk to C#.</p>\n\n",
      "PostDate": "2018-05-23T12:09:37.9417879Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "be1889be-c9b4-485b-a48d-f268d7c77bef",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ok, I've changed it again. And again. And again. xD\r\nI'm probably making some stupid mistake but I just can't get the pointer to show up on the map.\r\nI'm thinking about giving up... although that feels kind of sh***y when you guys has put in this much work to help me.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ok, I've changed it again. And again. And again. xD<br>\nI'm probably making some stupid mistake but I just can't get the pointer to show up on the map.<br>\nI'm thinking about giving up... although that feels kind of sh***y when you guys has put in this much work to help me.</p>\n\n",
      "PostDate": "2018-05-23T18:37:11.2405752Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b1006bef-4f78-41c8-8790-173a54f4b794",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Holy snap Batman!\r\nI checked the online version and get this:\r\n<img src=\"http://www.rockstrom.com/tgs/act2/pointer.png\">\r\n\r\nThe thing is, this is the first time I can even see the pointer (image). When trying it in desktop mode it just wont show (which makes it really difficult to find the right coordinates cause... you know... I can't see it =))\r\n\r\nNow that I've seen it once... I might not give it up. (even though it's way below the actual map, hee hee)",
      "EditableFormat": "markdown",
      "HTML": "<p>Holy snap Batman!<br>\nI checked the online version and get this:<br>\n<img src=\"http://www.rockstrom.com/tgs/act2/pointer.png\"></p>\n<p>The thing is, this is the first time I can even see the pointer (image). When trying it in desktop mode it just wont show (which makes it really difficult to find the right coordinates cause... you know... I can't see it =))</p>\n<p>Now that I've seen it once... I might not give it up. (even though it's way below the actual map, hee hee)</p>\n\n",
      "PostDate": "2018-05-23T18:42:53.5725409Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0aea34bb-6991-4417-8212-cb52106e12c2",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Did you see the one where I suggested some coordinates?\r\n\r\nIf you want to experiment (online), you can type `javascript:movePlayerPointer(270,270)` into your browser's address bar to manually move the pointer. This works in Chrome, and I think other browsers too. (Those coords are near the room with the hole)",
      "EditableFormat": "markdown",
      "HTML": "<p>Did you see the one where I suggested some coordinates?</p>\n<p>If you want to experiment (online), you can type <code>javascript:movePlayerPointer(270,270)</code> into your browser's address bar to manually move the pointer. This works in Chrome, and I think other browsers too. (Those coords are near the room with the hole)</p>\n\n",
      "PostDate": "2018-05-23T19:09:42.226896Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "95f76b1d-5a11-47e3-964b-af7db85a72c4",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "And don't worry about the amount of time we're spending on it... the last batch of posts have been looking into changes that we could make to the Quest core so that stuff like this is easier to do. (basically, a command like your SetFloatingImage, but modified so that it survives ClearScreen and save/load. Because that would be useful to a lot of game designers)",
      "EditableFormat": "markdown",
      "HTML": "<p>And don't worry about the amount of time we're spending on it... the last batch of posts have been looking into changes that we could make to the Quest core so that stuff like this is easier to do. (basically, a command like your SetFloatingImage, but modified so that it survives ClearScreen and save/load. Because that would be useful to a lot of game designers)</p>\n\n",
      "PostDate": "2018-05-23T19:13:25.5478618Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "74f8bfc0-b4bd-4828-b348-f0099892a583",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh yes, I've read everything in detail (although I can't understand most of it heehee). I've applied all the changes you've suggested and I still can't get it to work. Not at all while working on it in desktop mode. I can see the pointer when I play in online mode but once I switch rooms is disappear (animated, downwards on the screen... it's quite funny actually.)\r\n\r\nI tried ``` javascript:movePlayerPointer(270,270) ```in both firefox and chrome but must've made some mistake since it get stuck on a loading screen.\r\n\r\n> the last batch of posts have been looking into changes that we could make to the Quest core so that stuff like this is easier to do. \r\n\r\nThat is very cool. Then I don't have to feel so bad for stealing your time =)\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh yes, I've read everything in detail (although I can't understand most of it heehee). I've applied all the changes you've suggested and I still can't get it to work. Not at all while working on it in desktop mode. I can see the pointer when I play in online mode but once I switch rooms is disappear (animated, downwards on the screen... it's quite funny actually.)</p>\n<p>I tried <code>javascript:movePlayerPointer(270,270)</code>in both firefox and chrome but must've made some mistake since it get stuck on a loading screen.</p>\n<blockquote>\n<p>the last batch of posts have been looking into changes that we could make to the Quest core so that stuff like this is easier to do.</p>\n</blockquote>\n<p>That is very cool. Then I don't have to feel so bad for stealing your time =)</p>\n\n",
      "PostDate": "2018-05-23T19:26:03.5249917Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "07ebb088-2a03-4d75-b122-246cf1d1cd7e",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Cheese,\r\n\r\nSend it to me.  I'll see what I can find with it loaded in the desktop editor.",
      "EditableFormat": "markdown",
      "HTML": "<p>Cheese,</p>\n<p>Send it to me.  I'll see what I can find with it loaded in the desktop editor.</p>\n\n",
      "PostDate": "2018-05-23T19:38:26.4881452Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0f39b46e-dbf2-4662-83df-9b2d1819a3bf",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Will do K.V.! Thanks!\r\n(check your mail in 5 minutes)",
      "EditableFormat": "markdown",
      "HTML": "<p>Will do K.V.! Thanks!<br>\n(check your mail in 5 minutes)</p>\n\n",
      "PostDate": "2018-05-23T20:05:11.8280244Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "86e9b665-cd0d-4bcf-8898-b3cfbfae7159",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\n function clearScreen() {\r\n    if (!saveClearedText) {\r\n        $(\"#divOutput\").children(\":not(.donotclear)\").remove();\r\n    } else {\r\n        $(\"#divOutput\").append(\"<hr class='clearedAbove' />\");\r\n        if (!clearedOnce) {\r\n            addText('<style>#divOutput > .clearedScreen { display: none; }</style>');\r\n        }\r\n        clearedOnce = true;\r\n        $('#divOutput').children(\":not(.donotclear)\").addClass('clearedScreen');\r\n    }\r\n    $('#divOutput').css('min-height', 0);\r\n    createNewDiv('left');\r\n    beginningOfCurrentTurnScrollPosition = 0;\r\n    setTimeout(function () {\r\n        $('html,body').scrollTop(0);\r\n    }, 100);\r\n}\r\n```\r\n\r\n```\r\n  <function name=\"msgNoClear\" parameters=\"txt\"><![CDATA[\r\n    JS.eval (\"$('#divOutput').append(\\\"<span class='donotclear'>\"+txt+\"</span>\\\");\")\r\n  ]]></function>\r\n```\r\n\r\n```\r\nmsgNoClear (\"I DO NOT CLEAR\")\r\nClearScreen\r\nmsg (\"AFTER CLEARING\")\r\n```\r\n\r\n---\r\n![image](https://user-images.githubusercontent.com/30656341/40449683-da1abb40-5e9e-11e8-8f65-98ad2ea7184d.png)",
      "EditableFormat": "markdown",
      "HTML": "<pre><code> function clearScreen() {\n    if (!saveClearedText) {\n        $(\"#divOutput\").children(\":not(.donotclear)\").remove();\n    } else {\n        $(\"#divOutput\").append(\"&lt;hr class='clearedAbove' /&gt;\");\n        if (!clearedOnce) {\n            addText('&lt;style&gt;#divOutput &gt; .clearedScreen { display: none; }&lt;/style&gt;');\n        }\n        clearedOnce = true;\n        $('#divOutput').children(\":not(.donotclear)\").addClass('clearedScreen');\n    }\n    $('#divOutput').css('min-height', 0);\n    createNewDiv('left');\n    beginningOfCurrentTurnScrollPosition = 0;\n    setTimeout(function () {\n        $('html,body').scrollTop(0);\n    }, 100);\n}\n</code></pre>\n<pre><code>  &lt;function name=\"msgNoClear\" parameters=\"txt\"&gt;&lt;![CDATA[\n    JS.eval (\"$('#divOutput').append(\\\"&lt;span class='donotclear'&gt;\"+txt+\"&lt;/span&gt;\\\");\")\n  ]]&gt;&lt;/function&gt;\n</code></pre>\n<pre><code>msgNoClear (\"I DO NOT CLEAR\")\nClearScreen\nmsg (\"AFTER CLEARING\")\n</code></pre>\n<hr>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/40449683-da1abb40-5e9e-11e8-8f65-98ad2ea7184d.png\" alt=\"image\"></p>\n\n",
      "PostDate": "2018-05-23T20:35:19.9350384Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b1939905-04e4-4bae-979b-64629d10f7cb",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I just created a pull request to update ```clearScreen()```.\r\n\r\n---\r\nI did not, however, include ```msgNoClear```.  There are many ways to handle that, and it is easy to add to a game.\r\n\r\nPlus, I feel bad because Pixie has merged like 100 commits to this build, and I'm pretty sure he'd rather not make any more changes.",
      "EditableFormat": "markdown",
      "HTML": "<p>I just created a pull request to update <code>clearScreen()</code>.</p>\n<hr>\n<p>I did not, however, include <code>msgNoClear</code>.  There are many ways to handle that, and it is easy to add to a game.</p>\n<p>Plus, I feel bad because Pixie has merged like 100 commits to this build, and I'm pretty sure he'd rather not make any more changes.</p>\n\n",
      "PostDate": "2018-05-23T21:24:53.2299424Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c0a4f8d0-6609-4765-b2ce-c2701497cf4d",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Is that something I can utilize for the map system KV?\r\nOr does it \"only\" work with text?",
      "EditableFormat": "markdown",
      "HTML": "<p>Is that something I can utilize for the map system KV?<br>\nOr does it \"only\" work with text?</p>\n\n",
      "PostDate": "2018-05-24T11:03:15.8541838Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
