{
  "Topic": {
    "TopicId": "uhptfltxtumufrnrwsacpw",
    "ForumId": "24",
    "Title": "iframe onload event AGAIN! (Noooooo!)",
    "LastUpdated": "2021-08-23T00:02:30.015926Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "ffbfba2a-9050-4dff-af1d-9ee9c6bb579f",
      "UserId": 208122,
      "Username": "IFforClassroom",
      "AvatarUrl": "https://secure.gravatar.com/avatar/9683526b9b2547bc86419ed8a2454df1?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This code <u>does</u> work in the Squiffy app but <u>not</u> in Chrome or Edge browsers after I press \"Build.\"\r\n```\r\n    window.myFunction = function() {\r\n      var weather = document.getElementById(\"weather\").contentWindow.document.body.innerHTML;\r\n      var Temp = weather.split(\"temp\")[1];\r\n      var humid = weather.split(\"humidity\")[1];\r\n      var speed = weather.split(\"speed\")[1];\r\n      var pop = weather.split(\"pop\")[1];\r\n      var all = weather.split(\"all\")[1];\r\n      var TempK = Temp.substring(2,5);\r\n      var humidity = humid.substring(2,4);\r\n      var wind = speed.substring(2,5);\r\n      var chance = pop.substring(4,6);\r\n      var sky99 = all.substring(2,4);\r\n      var sky100 = all.substring(2,5);\r\n      squiffy.set(\"TempK\", TempK);\r\n      squiffy.set(\"humidity\", humidity);\r\n      squiffy.set(\"wind\", wind);\r\n      squiffy.set(\"chance\", chance);\r\n      squiffy.set(\"sky99\", sky99);\r\n      squiffy.set(\"sky100\", sky100);\r\n      };\r\n\r\n\r\n**How's the weather?**\r\n<iframe id=\"weather\" onload=\"myFunction()\" src=\"https://api.openweathermap.org/data/2.5/forecast?q=Chiayi%20City,%20TW&cnt=1&appid={I have a personal ID that I put here}\" width=\"100%\" height=\"180\" style=\"border:0\"></iframe>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>This code <u>does</u> work in the Squiffy app but <u>not</u> in Chrome or Edge browsers after I press \"Build.\"</p>\n<pre><code>    window.myFunction = function() {\n      var weather = document.getElementById(\"weather\").contentWindow.document.body.innerHTML;\n      var Temp = weather.split(\"temp\")[1];\n      var humid = weather.split(\"humidity\")[1];\n      var speed = weather.split(\"speed\")[1];\n      var pop = weather.split(\"pop\")[1];\n      var all = weather.split(\"all\")[1];\n      var TempK = Temp.substring(2,5);\n      var humidity = humid.substring(2,4);\n      var wind = speed.substring(2,5);\n      var chance = pop.substring(4,6);\n      var sky99 = all.substring(2,4);\n      var sky100 = all.substring(2,5);\n      squiffy.set(\"TempK\", TempK);\n      squiffy.set(\"humidity\", humidity);\n      squiffy.set(\"wind\", wind);\n      squiffy.set(\"chance\", chance);\n      squiffy.set(\"sky99\", sky99);\n      squiffy.set(\"sky100\", sky100);\n      };\n\n\n**How's the weather?**\n&lt;iframe id=\"weather\" onload=\"myFunction()\" src=\"https://api.openweathermap.org/data/2.5/forecast?q=Chiayi%20City,%20TW&amp;cnt=1&amp;appid={I have a personal ID that I put here}\" width=\"100%\" height=\"180\" style=\"border:0\"&gt;&lt;/iframe&gt;\n</code></pre>\n\n",
      "PostDate": "2021-08-23T00:02:30.015926Z",
      "LastEditDate": "2021-08-23T01:14:35.7444221Z",
      "link": null
    },
    {
      "PostId": "e300b583-18c9-4ccd-b4b2-5244363ca565",
      "UserId": 518866,
      "Username": "K.V.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a97688aadc8152436180b511021e94a7?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello.\r\n\r\nIt might be a CORS thing. (The iframe source is on a different domain than the main page.) Not sure, though.\r\n\r\nCan you press F12 to open your browser's dev tools, then look at the console to see what the error is (if there is an error)?\r\n\r\n...or, if you post a link to the example game, I could check it out that way.\r\n\r\nI tried to test it by copying and pasting your code, but I have no API key; so, I just get this: ```{\"cod\":401, \"message\": \"Invalid API key. Please see http://openweathermap.org/faq#error401 for more info.\"}```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello.</p>\n<p>It might be a CORS thing. (The iframe source is on a different domain than the main page.) Not sure, though.</p>\n<p>Can you press F12 to open your browser's dev tools, then look at the console to see what the error is (if there is an error)?</p>\n<p>...or, if you post a link to the example game, I could check it out that way.</p>\n<p>I tried to test it by copying and pasting your code, but I have no API key; so, I just get this: <code>{\"cod\":401, \"message\": \"Invalid API key. Please see http://openweathermap.org/faq#error401 for more info.\"}</code></p>\n\n",
      "PostDate": "2021-08-23T14:51:47.3343411Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "79aff2e6-5e48-4e27-88ff-4927bfdad2c6",
      "UserId": 208122,
      "Username": "IFforClassroom",
      "AvatarUrl": "https://secure.gravatar.com/avatar/9683526b9b2547bc86419ed8a2454df1?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks again, K.V. I think it must be as you said in the other thread. I'll PM you my game and API key in the morning. It's midnight over here.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks again, K.V. I think it must be as you said in the other thread. I'll PM you my game and API key in the morning. It's midnight over here.</p>\n\n",
      "PostDate": "2021-08-23T15:13:23.0821016Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
