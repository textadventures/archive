{
  "Topic": {
    "TopicId": "6341",
    "ForumId": "24",
    "Title": "trouble with maths in squiffy",
    "LastUpdated": "2016-05-22T18:35:57+01:00",
    "ReplyCount": 11
  },
  "Posts": [
    {
      "PostId": "42874",
      "UserId": 0,
      "Username": "TyCamden",
      "UserAvatar": null,
      "UserGravatar": "ff398cb6356c99be5c3547c4a683a2f8",
      "EditableText": "Why does this not work, and how do I get it to work ?\n\n[code:co9sv2iz]@set coffee=100\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );\n\ncoffee = {coffee}\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );\n\ncoffee = {coffee}\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );\n\ncoffee = {coffee}[/code:co9sv2iz]",
      "EditableFormat": "bbcode",
      "HTML": "Why does this not work, and how do I get it to work ?<br/><br/><pre><code>@set coffee=100<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );<br/><br/>coffee = {coffee}<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );<br/><br/>coffee = {coffee}<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );<br/><br/>coffee = {coffee}</code></pre>",
      "PostDate": "2016-05-17T00:52:43+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42877",
      "UserId": 0,
      "Username": "Dennis Carlyle",
      "UserAvatar": null,
      "UserGravatar": "85ebb8105680cf9551a4943b3c2c28c8",
      "EditableText": "[quote=&quot;TyCamden&quot;:vkan44qh]Why does this not work, and how do I get it to work ?\n\n[code:vkan44qh]@set coffee=100\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );\n\ncoffee = {coffee}\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );\n\ncoffee = {coffee}\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );\n\ncoffee = {coffee}[/code:vkan44qh][/quote:vkan44qh]\n\nFirst, I think it's a good idea to always set your code in sections and/or passages. So when you use &quot;@start&quot; at the beginning, it kicks off the parsing of code in ways you control. \n\nSecond -- any Javascript code in a section/passage must be the first thing in it. You can have Squiffy stuff *after* the JS in a passage, but if you do, then any JS after that Squiffy stuff will not work.  So, the rule I use is: \n- JS first, if needed. \n- Squiffy stuff after that, if needed. \n- No more JS is possible after Squiffy stuff in a section/passage.\n\nHere's one way to do the stuff you're trying above:\n\n[code:vkan44qh]\n@start start\n\n&#91;&#91;start&#93;&#93;&#58;\n@set coffee = 100\n\n'Coffee' = {coffee}\n\n&#91;divide by 2&#93;(div)\n\n&#91;div&#93;&#58;\n    squiffy&#46;set(&quot;coffee&quot;, (squiffy&#46;get(&quot;coffee&quot;)/2));\n    \nThe value of 'coffee' is now&#58; {coffee}\n\n&#91;subtract 20&#93;(sub)\n\n&#91;sub&#93;&#58;\n    squiffy&#46;set(&quot;coffee&quot;, (squiffy&#46;get(&quot;coffee&quot;)-20));\n\nThe value of 'coffee' is now {coffee}&#46;\n[/code:vkan44qh]",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>TyCamden wrote:</cite>Why does this not work, and how do I get it to work ?<br/><br/><pre><code>@set coffee=100<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );<br/><br/>coffee = {coffee}<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );<br/><br/>coffee = {coffee}<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );<br/><br/>coffee = {coffee}</code></pre></blockquote><br/><br/>First, I think it's a good idea to always set your code in sections and/or passages. So when you use &quot;@start&quot; at the beginning, it kicks off the parsing of code in ways you control. <br/><br/>Second -- any Javascript code in a section/passage must be the first thing in it. You can have Squiffy stuff *after* the JS in a passage, but if you do, then any JS after that Squiffy stuff will not work.  So, the rule I use is: <br/>- JS first, if needed. <br/>- Squiffy stuff after that, if needed. <br/>- No more JS is possible after Squiffy stuff in a section/passage.<br/><br/>Here's one way to do the stuff you're trying above:<br/><br/><pre><code><br/>@start start<br/><br/>&#91;&#91;start&#93;&#93;&#58;<br/>@set coffee = 100<br/><br/>'Coffee' = {coffee}<br/><br/>&#91;divide by 2&#93;(div)<br/><br/>&#91;div&#93;&#58;<br/>    squiffy&#46;set(&quot;coffee&quot;, (squiffy&#46;get(&quot;coffee&quot;)/2));<br/>    <br/>The value of 'coffee' is now&#58; {coffee}<br/><br/>&#91;subtract 20&#93;(sub)<br/><br/>&#91;sub&#93;&#58;<br/>    squiffy&#46;set(&quot;coffee&quot;, (squiffy&#46;get(&quot;coffee&quot;)-20));<br/><br/>The value of 'coffee' is now {coffee}&#46;<br/></code></pre>",
      "PostDate": "2016-05-17T02:18:11+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42892",
      "UserId": 0,
      "Username": "TyCamden",
      "UserAvatar": null,
      "UserGravatar": "ff398cb6356c99be5c3547c4a683a2f8",
      "EditableText": "Is there a way that you could have it go from one section to another without the user clicking on things?\n\nNot just in this example program, but in general as well.",
      "EditableFormat": "bbcode",
      "HTML": "Is there a way that you could have it go from one section to another without the user clicking on things?<br/><br/>Not just in this example program, but in general as well.",
      "PostDate": "2016-05-18T00:24:00+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42894",
      "UserId": 0,
      "Username": "Dennis Carlyle",
      "UserAvatar": null,
      "UserGravatar": "85ebb8105680cf9551a4943b3c2c28c8",
      "EditableText": "[quote=&quot;TyCamden&quot;:3sykavqn]Is there a way that you could have it go from one section to another without the user clicking on things?\n\nNot just in this example program, but in general as well.[/quote:3sykavqn]\n\nThis Javascript will do it.\n[quote:3sykavqn]squiffy.story.go(&quot;section_name&quot;);[/quote:3sykavqn]\nIt doesn't, apparently, work with passage names -- only sections.\n\nSo you could, for example, revise/add to the code above with this:\n\n\n[code:3sykavqn]\n&#91;sub&#93;&#58;\n    squiffy&#46;set(&quot;coffee&quot;, (squiffy&#46;get(&quot;coffee&quot;)-20));\n\n    var coff = squiffy&#46;get(&quot;coffee&quot;);\n    if (coff &lt; 40) { squiffy&#46;story&#46;go(&quot;cheap&quot;); }\n    \nThe value of 'coffee' is now {coffee}&#46;\n\n&#91;&#91;cheap&#93;&#93;&#58;\n\nWow&#46; Coffee has really dived!\n[/code:3sykavqn]",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>TyCamden wrote:</cite>Is there a way that you could have it go from one section to another without the user clicking on things?<br/><br/>Not just in this example program, but in general as well.</blockquote><br/><br/>This Javascript will do it.<br/><blockquote><p>squiffy.story.go(&quot;section_name&quot;);</p></blockquote><br/>It doesn't, apparently, work with passage names -- only sections.<br/><br/>So you could, for example, revise/add to the code above with this:<br/><br/><br/><pre><code><br/>&#91;sub&#93;&#58;<br/>    squiffy&#46;set(&quot;coffee&quot;, (squiffy&#46;get(&quot;coffee&quot;)-20));<br/><br/>    var coff = squiffy&#46;get(&quot;coffee&quot;);<br/>    if (coff &lt; 40) { squiffy&#46;story&#46;go(&quot;cheap&quot;); }<br/>    <br/>The value of 'coffee' is now {coffee}&#46;<br/><br/>&#91;&#91;cheap&#93;&#93;&#58;<br/><br/>Wow&#46; Coffee has really dived!<br/></code></pre>",
      "PostDate": "2016-05-18T02:57:59+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42913",
      "UserId": 0,
      "Username": "Bluevoss",
      "UserAvatar": null,
      "UserGravatar": "3162fe2e57e4cae90adf321de975a9da",
      "EditableText": "I'm a newbie here - first post. Been putzing with this for a day or so now. But in answer to your question, it looks like you can jump to another section using a label in {}. For example.\n===\n[[start]]:\n\nRun down the street to the door.\n\n{door}\n\n[[door]]\n\nYou are at a door.\n===\n(I think this works...)",
      "EditableFormat": "bbcode",
      "HTML": "I'm a newbie here - first post. Been putzing with this for a day or so now. But in answer to your question, it looks like you can jump to another section using a label in {}. For example.<br/>===<br/>[[start]]:<br/><br/>Run down the street to the door.<br/><br/>{door}<br/><br/>[[door]]<br/><br/>You are at a door.<br/>===<br/>(I think this works...)",
      "PostDate": "2016-05-18T13:06:14+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42927",
      "UserId": 0,
      "Username": "Dennis Carlyle",
      "UserAvatar": null,
      "UserGravatar": "85ebb8105680cf9551a4943b3c2c28c8",
      "EditableText": "@Bluevoss -\n\nI think there's an oversight here. The example needs to add &quot;:&quot; after &quot;[[door]] to make it work.  Without the colon, it's a link, not a section header. \n\nFrom what I can gather, looking at the code example in your other new thread, it may be 'misleading' to say you can &quot;jump&quot; to a section by using {door}.  Under &quot;Embedding Text&quot;, the docs say ...\n[quote:1dm3kgow]\nYou can embed [b:1dm3kgow]text from another section, or from a passage in the current section[/b:1dm3kgow], by surrounding its name with curly brackets.\n[/quote:1dm3kgow]\n\nOften, this will be all you need.  But you are not actually re-routing the script to a new section, the way a hyperlink does.",
      "EditableFormat": "bbcode",
      "HTML": "@Bluevoss -<br/><br/>I think there's an oversight here. The example needs to add &quot;:&quot; after &quot;[[door]] to make it work.  Without the colon, it's a link, not a section header. <br/><br/>From what I can gather, looking at the code example in your other new thread, it may be 'misleading' to say you can &quot;jump&quot; to a section by using {door}.  Under &quot;Embedding Text&quot;, the docs say ...<br/><blockquote><p><br/>You can embed <span style=\"font-weight:bold;\">text from another section, or from a passage in the current section</span>, by surrounding its name with curly brackets.<br/></p></blockquote><br/><br/>Often, this will be all you need.  But you are not actually re-routing the script to a new section, the way a hyperlink does.",
      "PostDate": "2016-05-18T15:40:24+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42929",
      "UserId": 0,
      "Username": "Bluevoss",
      "UserAvatar": null,
      "UserGravatar": "3162fe2e57e4cae90adf321de975a9da",
      "EditableText": "<!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> That's what I get for typing code without running it through the tool. Oops. Thanks for catching that.\n\nStill, it seems that {section} will work to move you to a section without a user click.",
      "EditableFormat": "bbcode",
      "HTML": "<!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> That's what I get for typing code without running it through the tool. Oops. Thanks for catching that.<br/><br/>Still, it seems that {section} will work to move you to a section without a user click.",
      "PostDate": "2016-05-18T16:03:53+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42930",
      "UserId": 0,
      "Username": "TyCamden",
      "UserAvatar": null,
      "UserGravatar": "ff398cb6356c99be5c3547c4a683a2f8",
      "EditableText": "Getting close, but there is still a problem.\n\nThere are still no hyperlinks (which is good), but it is not performing the second two maths (bad)...\n\nRevised code:\n\n[code:313lif7d]@set coffee=100\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );\n\ncoffee = {coffee}\n\n{nextSection1}\n\n&#91;&#91;nextSection1&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );\n\ncoffee = {coffee}\n\n{nextSection2}\n\n&#91;&#91;nextSection2&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );\n\ncoffee = {coffee}[/code:313lif7d]\n\nOutput:\n\n[code:313lif7d]coffee = 50\n\ncoffee = 50\n\ncoffee = 50[/code:313lif7d]",
      "EditableFormat": "bbcode",
      "HTML": "Getting close, but there is still a problem.<br/><br/>There are still no hyperlinks (which is good), but it is not performing the second two maths (bad)...<br/><br/>Revised code:<br/><br/><pre><code>@set coffee=100<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );<br/><br/>coffee = {coffee}<br/><br/>{nextSection1}<br/><br/>&#91;&#91;nextSection1&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );<br/><br/>coffee = {coffee}<br/><br/>{nextSection2}<br/><br/>&#91;&#91;nextSection2&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );<br/><br/>coffee = {coffee}</code></pre><br/><br/>Output:<br/><br/><pre><code>coffee = 50<br/><br/>coffee = 50<br/><br/>coffee = 50</code></pre>",
      "PostDate": "2016-05-18T16:06:37+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42935",
      "UserId": 0,
      "Username": "Dennis Carlyle",
      "UserAvatar": null,
      "UserGravatar": "85ebb8105680cf9551a4943b3c2c28c8",
      "EditableText": "[quote=&quot;TyCamden&quot;:tp8yn8a7]Getting close, but there is still a problem.\n\nThere are still no hyperlinks (which is good), but it is not performing the second two maths (bad)...\n\nRevised code:\n\n[code:tp8yn8a7]@set coffee=100\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );\n\ncoffee = {coffee}\n\n{nextSection1}\n\n&#91;&#91;nextSection1&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );\n\ncoffee = {coffee}\n\n{nextSection2}\n\n&#91;&#91;nextSection2&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );\n\ncoffee = {coffee}[/code:tp8yn8a7]\n\nOutput:\n\n[code:tp8yn8a7]coffee = 50\n\ncoffee = 50\n\ncoffee = 50[/code:tp8yn8a7][/quote:tp8yn8a7]\n\n\nIt's not performing the second two Javascript commands because {nextSection1} does not actually &quot;jump&quot; to [[nextSection1]], the way a hyperlink would.  ( I disagree with Bluevoss on this. )  It will insert (&quot;embed&quot;) text content from the section ( including links and more { }'s ), but will not perform Squiffy or Javascript commands within the section.\n\nIt's not clear to me what you're trying to accomplish within a game setting.  If you want to do math [u:tp8yn8a7]without[/u:tp8yn8a7] user clicks, why not just do the math all in one go, then display the final result?",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>TyCamden wrote:</cite>Getting close, but there is still a problem.<br/><br/>There are still no hyperlinks (which is good), but it is not performing the second two maths (bad)...<br/><br/>Revised code:<br/><br/><pre><code>@set coffee=100<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );<br/><br/>coffee = {coffee}<br/><br/>{nextSection1}<br/><br/>&#91;&#91;nextSection1&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );<br/><br/>coffee = {coffee}<br/><br/>{nextSection2}<br/><br/>&#91;&#91;nextSection2&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );<br/><br/>coffee = {coffee}</code></pre><br/><br/>Output:<br/><br/><pre><code>coffee = 50<br/><br/>coffee = 50<br/><br/>coffee = 50</code></pre></blockquote><br/><br/><br/>It's not performing the second two Javascript commands because {nextSection1} does not actually &quot;jump&quot; to [[nextSection1]], the way a hyperlink would.  ( I disagree with Bluevoss on this. )  It will insert (&quot;embed&quot;) text content from the section ( including links and more { }'s ), but will not perform Squiffy or Javascript commands within the section.<br/><br/>It's not clear to me what you're trying to accomplish within a game setting.  If you want to do math <span style=\"text-decoration:underline;\">without</span> user clicks, why not just do the math all in one go, then display the final result?",
      "PostDate": "2016-05-18T17:27:18+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42938",
      "UserId": 0,
      "Username": "Bluevoss",
      "UserAvatar": null,
      "UserGravatar": "3162fe2e57e4cae90adf321de975a9da",
      "EditableText": "I don't know enough to hold a position on this. I put the &quot;iffy&quot; into Squiffy.\n\nI think he's just trying to find out how it works in case he's got to thread through conditional logic. \n\nStill, there might be better ways to do this.",
      "EditableFormat": "bbcode",
      "HTML": "I don't know enough to hold a position on this. I put the &quot;iffy&quot; into Squiffy.<br/><br/>I think he's just trying to find out how it works in case he's got to thread through conditional logic. <br/><br/>Still, there might be better ways to do this.",
      "PostDate": "2016-05-18T17:50:02+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42946",
      "UserId": 0,
      "Username": "TyCamden",
      "UserAvatar": null,
      "UserGravatar": "ff398cb6356c99be5c3547c4a683a2f8",
      "EditableText": "Still a problem.\n\nFirst, thanks for your replies. I got part of my problem solved. Here is the new working example code:\n\n[code:3hg070n3]@start Refill coffee\n\n&#91;&#91;Refill coffee&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, 100 );\n\ncoffee = {coffee}\n\n&#91;&#91;Spill 2/3 coffee&#93;&#93;\n\n&#91;&#91;Spill 1/2 coffee&#93;&#93;\n\n&#91;&#91;Spill 2/3 coffee&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 3 );\n\ncoffee = {coffee}\n\n&#91;&#91;Spill 2/3 coffee&#93;&#93;\n\n&#91;&#91;Spill 1/2 coffee&#93;&#93;\n\n&#91;&#91;Refill coffee&#93;&#93;\n\n&#91;&#91;Spill 1/2 coffee&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );\n\ncoffee = {coffee}\n\n&#91;&#91;Spill 2/3 coffee&#93;&#93;\n\n&#91;&#91;Spill 1/2 coffee&#93;&#93;\n\n&#91;&#91;Refill coffee&#93;&#93;[/code:3hg070n3]\n\nIn my actual program (a work in progress), I still have a problem. It is hard to explain. The code is below. Run it and choose:\n1.) The man goes to work ;\n2.) The man falls on the icy sidewalk ;\n3.) Head to work * ;\n4.) The man stops at 7-11...\nYou will see that instead of running the IF code, it just shows it on screen and stops the gamebook.\nI want it so that if you saw this one earlier choice it will go to one section of code, and if you did not see the choice it will go to another.\n\nproblem code:\n[code:3hg070n3]@start intro\n\n&#91;&#91;intro&#93;&#93;&#58;\n@set coffee=100\n\n@title The Coffee Cup\n\nA man takes his plastic coffee cup from the cupboard&#46; His favorite one&#46; It is insulated to keep his coffee warmer, longer&#46; It is black, and without design, serious and businesslike&#46; And a handle with a comfortable grip&#46;\n\nHe fills his coffee cup&#46; It is pleased&#46;\n\n&quot;Man, do I feel good&#46; But, where am I? What am I? I appear to be a coffee cup&#46; But&#46;&#46;&#46; I have no memory before this one&#46; Well&#46;&#46;&#46; what happens now?&quot;\n\n&#91;&#91;The man heads to work&#93;&#93;\n\n&#91;&#91;The man likes sugar in his coffee&#93;&#93;\n\n&#91;&#91;The man decides to drink tea&#93;&#93;\n\n&#91;&#91;The man likes sugar in his coffee&#93;&#93;&#58;\n\nThe man likes sugar in his coffee&#46; He opens a pack, and dumps it in&#46;\n\n&quot;What is this powder that is being poured into me? It is so sweet&#46; But&#46;&#46;&#46; how am I tasting it? Or seeing anything? I don't have facial features&#46; Not even a mouth&#46; So, I cannot he heard or understood&#46; HEY! MAN WITH THE POWDER! Nothing&#46;&quot;\n\n&#91;&#91;The man heads to work&#93;&#93;\n\n&#91;&#91;The man likes cream in his coffee&#93;&#93;\n\n&#91;&#91;The man decides to drink tea&#93;&#93;&#58;\n\nThe man says aloud, &quot;I'm tired of coffee today&#46; I think I'll have some tea&#46;&quot;\n\nHis wife replies, &quot;I just made some&#46; It's still on the stove&#46;&quot;\n\nThe coffee cup screams&#58; NO ! I AM A COFFEE CUP ! NOT A TEA CUP ! DON'T DO IT !\n\nBut noone can hear him&#46;\n\n&#91;&#91;Tea it is&#93;&#93;\n\n&#91;&#91;The man changes his mind again and has coffee&#93;&#93;\n\n&#91;&#91;Tea it is&#93;&#93;&#58;\n\nHe pours the coffee down the sink and rinses out the cup&#46; He pours in some hot tea instead&#46;\n\nWhat does the coffee cup think about this? It does not&#46; It no longer thinks at all&#46; It is back to being just&#46;&#46;&#46; a coffee cup&#46;\n\nThe End&#46;\n\n&#91;&#91;The man changes his mind again and has coffee&#93;&#93;&#58;\n\nThe man says aloud, &quot;Nevermind&#46; I'm running late&#46;&quot;\n\n&quot;Whew, that was a close one&#46; I don't think it be right, carrying tea&#46; It's just&#46;&#46;&#46; not in my nature&#46;&quot;\n\n&#91;&#91;The man heads to work&#93;&#93;\n\n&#91;&#91;The man likes cream in his coffee&#93;&#93;&#58;\n\nThe man likes cream in his coffee, so he pours some in&#46;\n\n&quot;I'm being diluted by a white liquid!? It's not bad though&#46;&quot;\n\nThe man stirs the drink&#46;\n\nThe coffee cup laughs with delight&#46; Oh&#46; He is ticklish !\n\n&#91;&#91;The man heads to work&#93;&#93;\n\n&#91;&#91;The man heads to work&#93;&#93;&#58;\n\nThe man grabs his keys, celphone, and coffee cup, and heads out the door to work&#46;\n\nThe coffee cup is momentarily blinded by the sun&#46; It is so bright outside, much brighter than indoors&#46; And it is relecting off of the snow covering the man's yard&#46; But it knows it is well insulated for his trip, and his contents well protected from the frigid winds&#46;\n\n&#91;&#91;The man falls on the icy sidewalk&#93;&#93;\n\n&#91;&#91;The man gets into his car and heads to work&#93;&#93;\n\n&#91;&#91;The man falls on the icy sidewalk&#93;&#93;&#58;\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );\n{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}\n\nThe man's shoes lose grip on the ice and he topples down&#46; His coffee cup goes flying, and the lid pops off when it hits the sidewalk&#46; Half of it is spilled, forever lost&#46;\n\nThe coffee cup cries in pain, and feels dizzy, but it survives&#46; It begins to question it's own mortality&#46;\n\n&#91;&#91;Head to work&#93;&#93;(The man gets into his car and heads to work)\n\n&#91;&#91;The man gets into his car and heads to work&#93;&#93;&#58;\n\nThe man gets to his car, and into it as well&#46; He places the coffee cup in the cup-holder of the car&#46;\n\n&quot;I feel very safe here&#46; Very secure indeed&#46; Looks like we are going a bit on an adventure&#46;&quot;\n\n&#91;&#91;The man arrives at work&#93;&#93;\n\n&#91;&#91;The man stops at 7-11&#93;&#93;\n\n&#91;&#91;The man has a car accident&#93;&#93;\n\n&#91;&#91;The man stops at 7-11&#93;&#93;&#58;\n\nThe man stops at the 7-11&#46;\n\n    if (squiffy&#46;story&#46;seen(&quot;The man falls on the icy sidewalk&quot;)) {\n        &#91;&#91;711hefellearlier&#93;&#93;\n    } else {\n        &#91;&#91;711nofallearlier&#93;&#93;\n    }\n\n&#91;&#91;711hefellearlier&#93;&#93;&#58;\n\n@set coffee=100\n\nHe tops-off his coffee&#46;\n\n&quot; I feel rejuvinated ! &quot;\n\n&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)\n\n&#91;&#91;711nofallearlier&#93;&#93;&#58;\n\nHe grabs a donut to eat at work&#46;\n\n&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)\n\n&#91;&#91;The man arrives at work&#93;&#93;&#58;\n\ncoffee = {coffee}\n\n{if seen The man stops at 7-11&#58;{manLate}}{else&#58;{manOnTime}}\n\n&#91;&#91;manLate&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );\n\nThe man arrives at work&#46; He is late&#46;\n\nHis boss warns him not to be late again&#46;\n\nHe walks over to his desk and sits down&#46; As he eats his donut, he drinks the coffee&#46;\n\n\n{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}\n\n&#91;&#91;He has to use the bathroom&#93;&#93;\n\n&#91;&#91;manOnTime&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );\n\nThe man arrives at work&#46; He is almost late, but made it just in time&#46;\n\nHe walks over to his desk and sits down&#46; He drinks some of the coffee&#46;\n\n{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}\n\n&#91;&#91;He has to use the bathroom&#93;&#93;\n\n&#91;&#91;The man has a car accident&#93;&#93;&#58;\n\nx\n\n&#91;&#91;He has to use the bathroom&#93;&#93;&#58;\n\nx\n[/code:3hg070n3]",
      "EditableFormat": "bbcode",
      "HTML": "Still a problem.<br/><br/>First, thanks for your replies. I got part of my problem solved. Here is the new working example code:<br/><br/><pre><code>@start Refill coffee<br/><br/>&#91;&#91;Refill coffee&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, 100 );<br/><br/>coffee = {coffee}<br/><br/>&#91;&#91;Spill 2/3 coffee&#93;&#93;<br/><br/>&#91;&#91;Spill 1/2 coffee&#93;&#93;<br/><br/>&#91;&#91;Spill 2/3 coffee&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 3 );<br/><br/>coffee = {coffee}<br/><br/>&#91;&#91;Spill 2/3 coffee&#93;&#93;<br/><br/>&#91;&#91;Spill 1/2 coffee&#93;&#93;<br/><br/>&#91;&#91;Refill coffee&#93;&#93;<br/><br/>&#91;&#91;Spill 1/2 coffee&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );<br/><br/>coffee = {coffee}<br/><br/>&#91;&#91;Spill 2/3 coffee&#93;&#93;<br/><br/>&#91;&#91;Spill 1/2 coffee&#93;&#93;<br/><br/>&#91;&#91;Refill coffee&#93;&#93;</code></pre><br/><br/>In my actual program (a work in progress), I still have a problem. It is hard to explain. The code is below. Run it and choose:<br/>1.) The man goes to work ;<br/>2.) The man falls on the icy sidewalk ;<br/>3.) Head to work * ;<br/>4.) The man stops at 7-11...<br/>You will see that instead of running the IF code, it just shows it on screen and stops the gamebook.<br/>I want it so that if you saw this one earlier choice it will go to one section of code, and if you did not see the choice it will go to another.<br/><br/>problem code:<br/><pre><code>@start intro<br/><br/>&#91;&#91;intro&#93;&#93;&#58;<br/>@set coffee=100<br/><br/>@title The Coffee Cup<br/><br/>A man takes his plastic coffee cup from the cupboard&#46; His favorite one&#46; It is insulated to keep his coffee warmer, longer&#46; It is black, and without design, serious and businesslike&#46; And a handle with a comfortable grip&#46;<br/><br/>He fills his coffee cup&#46; It is pleased&#46;<br/><br/>&quot;Man, do I feel good&#46; But, where am I? What am I? I appear to be a coffee cup&#46; But&#46;&#46;&#46; I have no memory before this one&#46; Well&#46;&#46;&#46; what happens now?&quot;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;<br/><br/>&#91;&#91;The man likes sugar in his coffee&#93;&#93;<br/><br/>&#91;&#91;The man decides to drink tea&#93;&#93;<br/><br/>&#91;&#91;The man likes sugar in his coffee&#93;&#93;&#58;<br/><br/>The man likes sugar in his coffee&#46; He opens a pack, and dumps it in&#46;<br/><br/>&quot;What is this powder that is being poured into me? It is so sweet&#46; But&#46;&#46;&#46; how am I tasting it? Or seeing anything? I don't have facial features&#46; Not even a mouth&#46; So, I cannot he heard or understood&#46; HEY! MAN WITH THE POWDER! Nothing&#46;&quot;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;<br/><br/>&#91;&#91;The man likes cream in his coffee&#93;&#93;<br/><br/>&#91;&#91;The man decides to drink tea&#93;&#93;&#58;<br/><br/>The man says aloud, &quot;I'm tired of coffee today&#46; I think I'll have some tea&#46;&quot;<br/><br/>His wife replies, &quot;I just made some&#46; It's still on the stove&#46;&quot;<br/><br/>The coffee cup screams&#58; NO ! I AM A COFFEE CUP ! NOT A TEA CUP ! DON'T DO IT !<br/><br/>But noone can hear him&#46;<br/><br/>&#91;&#91;Tea it is&#93;&#93;<br/><br/>&#91;&#91;The man changes his mind again and has coffee&#93;&#93;<br/><br/>&#91;&#91;Tea it is&#93;&#93;&#58;<br/><br/>He pours the coffee down the sink and rinses out the cup&#46; He pours in some hot tea instead&#46;<br/><br/>What does the coffee cup think about this? It does not&#46; It no longer thinks at all&#46; It is back to being just&#46;&#46;&#46; a coffee cup&#46;<br/><br/>The End&#46;<br/><br/>&#91;&#91;The man changes his mind again and has coffee&#93;&#93;&#58;<br/><br/>The man says aloud, &quot;Nevermind&#46; I'm running late&#46;&quot;<br/><br/>&quot;Whew, that was a close one&#46; I don't think it be right, carrying tea&#46; It's just&#46;&#46;&#46; not in my nature&#46;&quot;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;<br/><br/>&#91;&#91;The man likes cream in his coffee&#93;&#93;&#58;<br/><br/>The man likes cream in his coffee, so he pours some in&#46;<br/><br/>&quot;I'm being diluted by a white liquid!? It's not bad though&#46;&quot;<br/><br/>The man stirs the drink&#46;<br/><br/>The coffee cup laughs with delight&#46; Oh&#46; He is ticklish !<br/><br/>&#91;&#91;The man heads to work&#93;&#93;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;&#58;<br/><br/>The man grabs his keys, celphone, and coffee cup, and heads out the door to work&#46;<br/><br/>The coffee cup is momentarily blinded by the sun&#46; It is so bright outside, much brighter than indoors&#46; And it is relecting off of the snow covering the man's yard&#46; But it knows it is well insulated for his trip, and his contents well protected from the frigid winds&#46;<br/><br/>&#91;&#91;The man falls on the icy sidewalk&#93;&#93;<br/><br/>&#91;&#91;The man gets into his car and heads to work&#93;&#93;<br/><br/>&#91;&#91;The man falls on the icy sidewalk&#93;&#93;&#58;<br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );<br/>{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}<br/><br/>The man's shoes lose grip on the ice and he topples down&#46; His coffee cup goes flying, and the lid pops off when it hits the sidewalk&#46; Half of it is spilled, forever lost&#46;<br/><br/>The coffee cup cries in pain, and feels dizzy, but it survives&#46; It begins to question it's own mortality&#46;<br/><br/>&#91;&#91;Head to work&#93;&#93;(The man gets into his car and heads to work)<br/><br/>&#91;&#91;The man gets into his car and heads to work&#93;&#93;&#58;<br/><br/>The man gets to his car, and into it as well&#46; He places the coffee cup in the cup-holder of the car&#46;<br/><br/>&quot;I feel very safe here&#46; Very secure indeed&#46; Looks like we are going a bit on an adventure&#46;&quot;<br/><br/>&#91;&#91;The man arrives at work&#93;&#93;<br/><br/>&#91;&#91;The man stops at 7-11&#93;&#93;<br/><br/>&#91;&#91;The man has a car accident&#93;&#93;<br/><br/>&#91;&#91;The man stops at 7-11&#93;&#93;&#58;<br/><br/>The man stops at the 7-11&#46;<br/><br/>    if (squiffy&#46;story&#46;seen(&quot;The man falls on the icy sidewalk&quot;)) {<br/>        &#91;&#91;711hefellearlier&#93;&#93;<br/>    } else {<br/>        &#91;&#91;711nofallearlier&#93;&#93;<br/>    }<br/><br/>&#91;&#91;711hefellearlier&#93;&#93;&#58;<br/><br/>@set coffee=100<br/><br/>He tops-off his coffee&#46;<br/><br/>&quot; I feel rejuvinated ! &quot;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)<br/><br/>&#91;&#91;711nofallearlier&#93;&#93;&#58;<br/><br/>He grabs a donut to eat at work&#46;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)<br/><br/>&#91;&#91;The man arrives at work&#93;&#93;&#58;<br/><br/>coffee = {coffee}<br/><br/>{if seen The man stops at 7-11&#58;{manLate}}{else&#58;{manOnTime}}<br/><br/>&#91;&#91;manLate&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );<br/><br/>The man arrives at work&#46; He is late&#46;<br/><br/>His boss warns him not to be late again&#46;<br/><br/>He walks over to his desk and sits down&#46; As he eats his donut, he drinks the coffee&#46;<br/><br/><br/>{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}<br/><br/>&#91;&#91;He has to use the bathroom&#93;&#93;<br/><br/>&#91;&#91;manOnTime&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );<br/><br/>The man arrives at work&#46; He is almost late, but made it just in time&#46;<br/><br/>He walks over to his desk and sits down&#46; He drinks some of the coffee&#46;<br/><br/>{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}<br/><br/>&#91;&#91;He has to use the bathroom&#93;&#93;<br/><br/>&#91;&#91;The man has a car accident&#93;&#93;&#58;<br/><br/>x<br/><br/>&#91;&#91;He has to use the bathroom&#93;&#93;&#58;<br/><br/>x<br/></code></pre>",
      "PostDate": "2016-05-18T21:12:53+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "43024",
      "UserId": 0,
      "Username": "TyCamden",
      "UserAvatar": null,
      "UserGravatar": "ff398cb6356c99be5c3547c4a683a2f8",
      "EditableText": "EDIT. The latest problem is fixed. For details, see: <!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=24&amp;t=6356\">viewtopic.php?f=24&amp;t=6356</a><!-- l -->",
      "EditableFormat": "bbcode",
      "HTML": "EDIT. The latest problem is fixed. For details, see: <!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=24&amp;t=6356\">viewtopic.php?f=24&amp;t=6356</a><!-- l -->",
      "PostDate": "2016-05-22T18:35:57+01:00",
      "LastEditDate": null
    }
  ]
}
