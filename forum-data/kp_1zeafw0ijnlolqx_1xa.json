{
  "Topic": {
    "TopicId": "kp_1zeafw0ijnlolqx_1xa",
    "ForumId": "10",
    "Title": "If object has attribute",
    "LastUpdated": "2018-07-27T00:01:11.5988796Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "3b6985e4-1a72-47fc-8e88-d990f993ea51",
      "UserId": 313553,
      "Username": "UnclearImage86",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm trying to make an object, specifically a sealed medical container. The player can use any item they have in their inventory that has the attribute 'isSharp' that I added to the game attributes.\r\n\r\nThat way I can define a knife, a shard of glass, or a pair of scissors as 'sharp' using that attribute. \r\n\r\nSo what I TRIED to do was make the medical container a container, then run a script on \"open\" that checks if object has attribute 'isSharp' but the object box is blank. How do I tell Quest I don't care what the object is, as long as the user has it and is using it to try and open the case, AND the object isSharp.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm trying to make an object, specifically a sealed medical container. The player can use any item they have in their inventory that has the attribute 'isSharp' that I added to the game attributes.</p>\n<p>That way I can define a knife, a shard of glass, or a pair of scissors as 'sharp' using that attribute.</p>\n<p>So what I TRIED to do was make the medical container a container, then run a script on \"open\" that checks if object has attribute 'isSharp' but the object box is blank. How do I tell Quest I don't care what the object is, as long as the user has it and is using it to try and open the case, AND the object isSharp.</p>\n\n",
      "PostDate": "2018-07-27T00:01:11.5988796Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dc7f03c6-f4ae-451f-8780-17f09fade90a",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Are you running your checking script in the ```open``` command, or in the object's ```container``` tab?",
      "EditableFormat": "markdown",
      "HTML": "<p>Are you running your checking script in the <code>open</code> command, or in the object's <code>container</code> tab?</p>\n\n",
      "PostDate": "2018-07-27T00:30:32.4827097Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "30479793-96dc-4ca5-96d8-9b638cc24117",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think you'd have the container's \"openscript\" something like:\r\n```\r\nsharpthing = PickOneObject (FilterByAttribute (ScopeInventory(), \"isSharp\", true))\r\nif (sharpthing = null) {\r\n  msg (\"You need something sharp to open it with.\")\r\n}\r\nelse {\r\n  msg (\"You cut it open with \" + GetDisplayName(sharpthing) + \".\")\r\n  this.isopen = true\r\n  this.openscript = null\r\n}\r\n```\r\n(I included the line `this.openscript = null` because I assume that once you've cut the seal on the container, you can close it and open it again without needing something sharp; so it disables the script once you've successfully opened the container)",
      "EditableFormat": "markdown",
      "HTML": "<p>I think you'd have the container's \"openscript\" something like:</p>\n<pre><code>sharpthing = PickOneObject (FilterByAttribute (ScopeInventory(), \"isSharp\", true))\nif (sharpthing = null) {\n  msg (\"You need something sharp to open it with.\")\n}\nelse {\n  msg (\"You cut it open with \" + GetDisplayName(sharpthing) + \".\")\n  this.isopen = true\n  this.openscript = null\n}\n</code></pre>\n<p>(I included the line <code>this.openscript = null</code> because I assume that once you've cut the seal on the container, you can close it and open it again without needing something sharp; so it disables the script once you've successfully opened the container)</p>\n\n",
      "PostDate": "2018-07-27T01:37:35.0039988Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9c80ae85-3377-4051-bc0a-c72ac7f9e80b",
      "UserId": 313553,
      "Username": "UnclearImage86",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I added your code to the \"After opening the object\" Section of the container tab. \r\n\r\nIt opens and says \"You need something sharp to open it with.\"\r\n\r\nI made the 'knife' and added the attribute isSharp (from my game attribute) but it's not recognizing it.",
      "EditableFormat": "markdown",
      "HTML": "<p>I added your code to the \"After opening the object\" Section of the container tab.</p>\n<p>It opens and says \"You need something sharp to open it with.\"</p>\n<p>I made the 'knife' and added the attribute isSharp (from my game attribute) but it's not recognizing it.</p>\n\n",
      "PostDate": "2018-07-27T02:39:07.9158763Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6a01bd0c-a293-4595-a4b7-f07e3d4bd477",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "add/create Object (to where ever you want it) -> Name: knife\r\n\r\nleft side's \"tree of stuff\" -> 'knife' Object -> 'Attributes' Tab -> Attributes (the box at the bottom) -> add -> (see below)\r\n\r\n(Object: knife)\r\nAttribute Name: isSharp\r\nAttribute Type: boolean\r\nAttribute Value: true\r\n\r\n// VS:\r\n\r\nadd/create Object (to where ever you want it) -> Name: hammer\r\n\r\nleft side's \"tree of stuff\" -> 'hammer' Object -> 'Attributes' Tab -> Attributes (the box at the bottom) -> add -> (see below)\r\n\r\n(Object: hammer)\r\nAttribute Name: isSharp\r\nAttribute Type: boolean\r\nAttribute Value: false\r\n\r\n```\r\n<object name=\"knife\">\r\n  <attr name=\"isSharp\" type=\"boolean\">true</attr>\r\n</object>\r\n\r\n// vs:\r\n\r\n<object name=\"hammer\">\r\n  <attr name=\"isSharp\" type=\"boolean\">false</attr>\r\n</object>\r\n\r\n// -----------------\r\n\r\n// and essentially what mrangel's code is doing:\r\n\r\nif (OBJECT.isSharp = true) {\r\n  // (cut) open the container object\r\n} else if (OBJECT.isSharp = false) {\r\n  msg (\"You need a sharp Object  to cut open the container object, silly\")\r\n}\r\n\r\n// the 'knife' Object is sharp: knife.isSharp = true\r\n// whereas, the 'hammer' Object is blunt: hammer.isSharp = false\r\n```\r\n\r\n--------\r\n\r\nnow, mrangel's code should work, assuming you got it all set up correctly and in proper placement and all that... lol\r\n\r\n----------------\r\n\r\nyou may want to try to understand Attribute usage better... as this is really advanced/confusing stuff if you're new to coding.....\r\n\r\nI got some links/guides to help you get started:\r\n\r\nhttp://textadventures.co.uk/forum/general/topic/ljjm32av4e2t9ot49k478g/help#710be61e-eae1-4af1-8363-520cc718ba1c\r\n\r\n(see the 'Attributes and if script' link specifically, but you may want to look at the 'quest code structure and coding basics' link first)",
      "EditableFormat": "markdown",
      "HTML": "<p>add/create Object (to where ever you want it) -&gt; Name: knife</p>\n<p>left side's \"tree of stuff\" -&gt; 'knife' Object -&gt; 'Attributes' Tab -&gt; Attributes (the box at the bottom) -&gt; add -&gt; (see below)</p>\n<p>(Object: knife)<br>\nAttribute Name: isSharp<br>\nAttribute Type: boolean<br>\nAttribute Value: true</p>\n<p>// VS:</p>\n<p>add/create Object (to where ever you want it) -&gt; Name: hammer</p>\n<p>left side's \"tree of stuff\" -&gt; 'hammer' Object -&gt; 'Attributes' Tab -&gt; Attributes (the box at the bottom) -&gt; add -&gt; (see below)</p>\n<p>(Object: hammer)<br>\nAttribute Name: isSharp<br>\nAttribute Type: boolean<br>\nAttribute Value: false</p>\n<pre><code>&lt;object name=\"knife\"&gt;\n  &lt;attr name=\"isSharp\" type=\"boolean\"&gt;true&lt;/attr&gt;\n&lt;/object&gt;\n\n// vs:\n\n&lt;object name=\"hammer\"&gt;\n  &lt;attr name=\"isSharp\" type=\"boolean\"&gt;false&lt;/attr&gt;\n&lt;/object&gt;\n\n// -----------------\n\n// and essentially what mrangel's code is doing:\n\nif (OBJECT.isSharp = true) {\n  // (cut) open the container object\n} else if (OBJECT.isSharp = false) {\n  msg (\"You need a sharp Object  to cut open the container object, silly\")\n}\n\n// the 'knife' Object is sharp: knife.isSharp = true\n// whereas, the 'hammer' Object is blunt: hammer.isSharp = false\n</code></pre>\n<hr>\n<p>now, mrangel's code should work, assuming you got it all set up correctly and in proper placement and all that... lol</p>\n<hr>\n<p>you may want to try to understand Attribute usage better... as this is really advanced/confusing stuff if you're new to coding.....</p>\n<p>I got some links/guides to help you get started:</p>\n<p>http://textadventures.co.uk/forum/general/topic/ljjm32av4e2t9ot49k478g/help#710be61e-eae1-4af1-8363-520cc718ba1c</p>\n<p>(see the 'Attributes and if script' link specifically, but you may want to look at the 'quest code structure and coding basics' link first)</p>\n\n",
      "PostDate": "2018-07-27T06:11:56.0077868Z",
      "LastEditDate": "2018-07-27T06:14:54.1128382Z",
      "link": null
    },
    {
      "PostId": "32ca2688-c620-4e6f-abe8-6f54bb447e1c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I added your code to the \"After opening the object\" Section of the container tab.\r\n>\r\n> It opens and says \"You need something sharp to open it with.\"\r\n\r\nIt should be in the \"Script to run when opening object\" section.\r\nIf this doesn't appear (the editor confuses me, hiding some attributes sometimes), you can either:\r\n\r\n* add `this.isopen = false` next to the \"You need something sharp\" message (this will close the box again after displaying its contents, so not ideal)\r\n\r\n* **or** you could give the container a script attribute named `openscript` and put the script there.\r\n\r\n> I made the 'knife' and added the attribute isSharp (from my game attribute) but it's not recognizing it.\r\n\r\nNot sure what you mean by \"(from my game attribute)\".\r\n\r\nI assumed that `isSharp` is a boolean attribute with the value `true`. Is that right?\r\nIf not, you'll need to show us what the value of that attribute is.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I added your code to the \"After opening the object\" Section of the container tab.</p>\n<p>It opens and says \"You need something sharp to open it with.\"</p>\n</blockquote>\n<p>It should be in the \"Script to run when opening object\" section.<br>\nIf this doesn't appear (the editor confuses me, hiding some attributes sometimes), you can either:</p>\n<ul>\n<li>\n<p>add <code>this.isopen = false</code> next to the \"You need something sharp\" message (this will close the box again after displaying its contents, so not ideal)</p>\n</li>\n<li>\n<p><strong>or</strong> you could give the container a script attribute named <code>openscript</code> and put the script there.</p>\n</li>\n</ul>\n<blockquote>\n<p>I made the 'knife' and added the attribute isSharp (from my game attribute) but it's not recognizing it.</p>\n</blockquote>\n<p>Not sure what you mean by \"(from my game attribute)\".</p>\n<p>I assumed that <code>isSharp</code> is a boolean attribute with the value <code>true</code>. Is that right?<br>\nIf not, you'll need to show us what the value of that attribute is.</p>\n\n",
      "PostDate": "2018-07-27T10:49:07.8867972Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "10591898-84f9-4680-aced-96ce361be02f",
      "UserId": 313553,
      "Username": "UnclearImage86",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well the \"before you open or close\" only appears when you choose 'Openable/Closable' on the container type.  Other options don't show it. I entered in the code and it's still not working. \r\n\r\nif (OBJECT.isSharp = true) {\r\n  msg (\"You use the #OBJECT# to cut open the container \")\r\n}\r\nelse if (OBJECT.isSharp = false) {\r\n  msg (\"You need something sharp in order to cut this open!\")\r\n}\r\n\r\n\"(from my game attribute)\" when I added verbs they appeared under GAME, so I thought all attributes have to be applied to the game before I can use them on an object, I've figured out this isn't necessary.\r\n\r\nI got this rigged up, the knife has .isSharp added as an attribute, and I can use the knife. I've tried 'use knife on container' (container is a legal alias for the medical container, I added it under 'Other Names') I've tried 'cut open container with knife' and all kinds of things. \r\n\r\nOpen throws an error (because there's no OBJECT to check an attribute for I assume) Close just states it's already closed.",
      "EditableFormat": "markdown",
      "HTML": "<p>Well the \"before you open or close\" only appears when you choose 'Openable/Closable' on the container type.  Other options don't show it. I entered in the code and it's still not working.</p>\n<p>if (OBJECT.isSharp = true) {<br>\nmsg (\"You use the #OBJECT# to cut open the container \")<br>\n}<br>\nelse if (OBJECT.isSharp = false) {<br>\nmsg (\"You need something sharp in order to cut this open!\")<br>\n}</p>\n<p>\"(from my game attribute)\" when I added verbs they appeared under GAME, so I thought all attributes have to be applied to the game before I can use them on an object, I've figured out this isn't necessary.</p>\n<p>I got this rigged up, the knife has .isSharp added as an attribute, and I can use the knife. I've tried 'use knife on container' (container is a legal alias for the medical container, I added it under 'Other Names') I've tried 'cut open container with knife' and all kinds of things.</p>\n<p>Open throws an error (because there's no OBJECT to check an attribute for I assume) Close just states it's already closed.</p>\n\n",
      "PostDate": "2018-07-27T11:07:08.8139138Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d7ad5769-1f06-4b15-b2c3-d78c9883b7c0",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK... so you want it to do nothing if the player types \"open container\", so they have to enter \"use knife on container\"?\r\n\r\nMy previous code was designed so that if the player is holding a sharp object, they will use that to open the container when they type \"open container\".\r\n\r\nFor the \"Use knife on container\" command, you'll need to do it a bit differently. In the container's \"use/give\" tab, where it says \"Use (other object) on this:\", choose \"Handle objects individually\" from the drop down. There's space to add any specific objects that have special effects, but you don't need to use that. In the default script (under \"Use any other object on this:\") you can put:\r\n```\r\nif (this.isopen) {\r\n  msg (\"The container is already open.\")\r\n}\r\nelse if (object.isSharp) {\r\n  msg (\"You use the \" + GetDisplayAlias(object) + \" to cut open the container \")\r\n  this.open = true\r\n  this.openscript = null\r\n  OpenObject (this)\r\n}\r\nelse {\r\n  msg (\"You need something sharp in order to cut this open!\")\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>OK... so you want it to do nothing if the player types \"open container\", so they have to enter \"use knife on container\"?</p>\n<p>My previous code was designed so that if the player is holding a sharp object, they will use that to open the container when they type \"open container\".</p>\n<p>For the \"Use knife on container\" command, you'll need to do it a bit differently. In the container's \"use/give\" tab, where it says \"Use (other object) on this:\", choose \"Handle objects individually\" from the drop down. There's space to add any specific objects that have special effects, but you don't need to use that. In the default script (under \"Use any other object on this:\") you can put:</p>\n<pre><code>if (this.isopen) {\n  msg (\"The container is already open.\")\n}\nelse if (object.isSharp) {\n  msg (\"You use the \" + GetDisplayAlias(object) + \" to cut open the container \")\n  this.open = true\n  this.openscript = null\n  OpenObject (this)\n}\nelse {\n  msg (\"You need something sharp in order to cut this open!\")\n}\n</code></pre>\n\n",
      "PostDate": "2018-07-27T15:13:26.2004873Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9a5eeca0-1a81-4068-9613-19a87b4e3be9",
      "UserId": 326173,
      "Username": "Curt A. P.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/bc1d5d57408cf4d13f9d9f23c1e3dc56?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Not exactly what you asked for but you could request a menu, listing all sharp objects as an option to cut the obstacle. Then just click the item you want to use. Maybe it doesn't care which Item is used to cut a seal at all ^^\r\n```\r\ncutWith = FilterByAttribute(ScopeInventory(), \"isSharp\", true)\r\nShowMenu(\"Cut the seal with which Item?\", cutWith, true) {",
      "EditableFormat": "markdown",
      "HTML": "<p>Not exactly what you asked for but you could request a menu, listing all sharp objects as an option to cut the obstacle. Then just click the item you want to use. Maybe it doesn't care which Item is used to cut a seal at all ^^</p>\n<pre><code>cutWith = FilterByAttribute(ScopeInventory(), \"isSharp\", true)\nShowMenu(\"Cut the seal with which Item?\", cutWith, true) {\n</code></pre>\n\n",
      "PostDate": "2018-07-30T20:28:16.5826361Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
