{
  "Topic": {
    "TopicId": "e5plxfliwe_qgr8fh8kcgq",
    "ForumId": "10",
    "Title": "Altering the colour of the map canvas, or additional/self-added UI panes.",
    "LastUpdated": "2019-07-29T20:12:26.5470605Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "cdc19007-ac62-43bb-97a0-4353b59cdbb5",
      "UserId": 207026,
      "Username": "Pykrete",
      "AvatarUrl": "http://i.imgur.com/F7PNLN5b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Another question! I've been making use of the code found here (I think- it's been a long time!) - http://textadventures.co.uk/forum/samples/topic/q5zedoe560au_ii73oamoq/adding-graphics-in-a-specific-location-gui-solved - in order to make my map a collapsible part of my game's UI, given that its default location and lack of interactivity leaves a lot to be desired. It's pretty much perfect, though I have run into one issue; because it's injected on top of existing UI, it doesn't seem to get caught by the engine's general UI changes. That is, if I change the theme, or certain colours of background, font, window lines, etc, nothing changes on the map.\r\n\r\nI don't suppose anyone has any ideas on where that needs to be slotted in, do they? As it stands, going for a more eye-pleasing dark theme is getting slightly undermined by having a big white block of map surging into view whenever the collapse is clicked. grid, canvas, I know the parts, I just don't know what javascript wants me to call them so I can properly point my changes at it.",
      "EditableFormat": "markdown",
      "HTML": "<p>Another question! I've been making use of the code found here (I think- it's been a long time!) - http://textadventures.co.uk/forum/samples/topic/q5zedoe560au_ii73oamoq/adding-graphics-in-a-specific-location-gui-solved - in order to make my map a collapsible part of my game's UI, given that its default location and lack of interactivity leaves a lot to be desired. It's pretty much perfect, though I have run into one issue; because it's injected on top of existing UI, it doesn't seem to get caught by the engine's general UI changes. That is, if I change the theme, or certain colours of background, font, window lines, etc, nothing changes on the map.</p>\n<p>I don't suppose anyone has any ideas on where that needs to be slotted in, do they? As it stands, going for a more eye-pleasing dark theme is getting slightly undermined by having a big white block of map surging into view whenever the collapse is clicked. grid, canvas, I know the parts, I just don't know what javascript wants me to call them so I can properly point my changes at it.</p>\n\n",
      "PostDate": "2019-07-29T20:12:26.5470605Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b77586b3-6998-4f1f-83dd-56c95d56305f",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Use this code to change the background colour, in this instance to red:\r\n```\r\nJS.setCss (\"#gridPanel\", \"background-color:red\")\r\n```\r\nThis is best put in the \"User initialisation script...\", found on the _Advanced Scripts_ tab of the game object (you may need to activate the tab on the _Features_ tab).",
      "EditableFormat": "markdown",
      "HTML": "<p>Use this code to change the background colour, in this instance to red:</p>\n<pre><code>JS.setCss (\"#gridPanel\", \"background-color:red\")\n</code></pre>\n<p>This is best put in the \"User initialisation script...\", found on the <em>Advanced Scripts</em> tab of the game object (you may need to activate the tab on the <em>Features</em> tab).</p>\n\n",
      "PostDate": "2019-07-30T07:35:29.4579179Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6dc481d4-9094-46ce-8ce9-869c5b40220b",
      "UserId": 207026,
      "Username": "Pykrete",
      "AvatarUrl": "http://i.imgur.com/F7PNLN5b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "No dice! Tossed it in my User Init Script and it's done nothing.\r\n\r\nhttps://i.gyazo.com/205a5378290e708edc44548280c0a19c.png\r\n\r\nIf I remove the code to place the map in its own little collapsible pane, then it works. As I suspected, the code must be obfuscating that, or making an entirely new map to begin with... hrmm. So I probably have to find a space within the code block to add it.\r\n\r\n```\r\neval (\"$('<h3 id=\\\"mapLabel\\\" class=\\\"ui-accordion-header ui-helper-reset ui-state-active ui-corner-top\\\"><span class=\\\"ui-icon ui-icon-triangle-1-s\\\"></span><span class=\\\"accordion-header-text\\\">Map</span></h3><div id=\\\"mapAccordion\\\" class=\\\"ui-accordion-content-active ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom\\\"></div>').insertBefore(\\\"#inventoryLabel\\\");$('#gridPanel').hide();$('#gamePanelSpacer').height('0');var size = $(\\\"#mapAccordion\\\").innerWidth();$('#gridCanvas').width(size).height(size).appendTo($('#mapAccordion'));paper.view.viewSize.width = size;paper.view.viewSize.height = size;$(\\\"#gridPanel\\\").hide();$(\\\"#mapLabel\\\").bind(\\\"click\\\", $._data($(\\\"#inventoryLabel\\\")[0]).events['click'][0]['handler']);$(\\\"#mapLabel\\\").bind(\\\"mouseover\\\", $._data($(\\\"#inventoryLabel\\\")[0]).events['mouseover'][0]['handler']);$(\\\"#mapLabel\\\").bind(\\\"mouseout\\\", $._data($(\\\"#inventoryLabel\\\")[0]).events['mouseout'][0]['handler']);\")\r\n```\r\n\r\n(My understanding of this code goes as far as 'it works and does what I want it to do, eheh.)",
      "EditableFormat": "markdown",
      "HTML": "<p>No dice! Tossed it in my User Init Script and it's done nothing.</p>\n<p>https://i.gyazo.com/205a5378290e708edc44548280c0a19c.png</p>\n<p>If I remove the code to place the map in its own little collapsible pane, then it works. As I suspected, the code must be obfuscating that, or making an entirely new map to begin with... hrmm. So I probably have to find a space within the code block to add it.</p>\n<pre><code>eval (\"$('&lt;h3 id=\\\"mapLabel\\\" class=\\\"ui-accordion-header ui-helper-reset ui-state-active ui-corner-top\\\"&gt;&lt;span class=\\\"ui-icon ui-icon-triangle-1-s\\\"&gt;&lt;/span&gt;&lt;span class=\\\"accordion-header-text\\\"&gt;Map&lt;/span&gt;&lt;/h3&gt;&lt;div id=\\\"mapAccordion\\\" class=\\\"ui-accordion-content-active ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom\\\"&gt;&lt;/div&gt;').insertBefore(\\\"#inventoryLabel\\\");$('#gridPanel').hide();$('#gamePanelSpacer').height('0');var size = $(\\\"#mapAccordion\\\").innerWidth();$('#gridCanvas').width(size).height(size).appendTo($('#mapAccordion'));paper.view.viewSize.width = size;paper.view.viewSize.height = size;$(\\\"#gridPanel\\\").hide();$(\\\"#mapLabel\\\").bind(\\\"click\\\", $._data($(\\\"#inventoryLabel\\\")[0]).events['click'][0]['handler']);$(\\\"#mapLabel\\\").bind(\\\"mouseover\\\", $._data($(\\\"#inventoryLabel\\\")[0]).events['mouseover'][0]['handler']);$(\\\"#mapLabel\\\").bind(\\\"mouseout\\\", $._data($(\\\"#inventoryLabel\\\")[0]).events['mouseout'][0]['handler']);\")\n</code></pre>\n<p>(My understanding of this code goes as far as 'it works and does what I want it to do, eheh.)</p>\n\n",
      "PostDate": "2019-07-30T14:06:26.2758859Z",
      "LastEditDate": "2019-07-30T14:16:11.7438773Z",
      "link": null
    },
    {
      "PostId": "50473d03-35f6-4928-aea5-4a1d126f3d6d",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It worked for me. But if you have something working, then great,",
      "EditableFormat": "markdown",
      "HTML": "<p>It worked for me. But if you have something working, then great,</p>\n\n",
      "PostDate": "2019-07-30T14:30:45.7265289Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f71ffc4e-8d87-4d29-8098-2eff565378b1",
      "UserId": 207026,
      "Username": "Pykrete",
      "AvatarUrl": "http://i.imgur.com/F7PNLN5b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Nonono- what you supplied doesn't work unless I remove something I consider to be a vital UI element, that is, moving the map from taking up half of the top of the screen to instead occupying a collapsible accordion pane. The code for which is above. I'm going over it now to see if I can insert the setCss inside of it, or if I can find out what it's generated as to point it at it, but no dice.\r\n\r\nhttps://i.gyazo.com/beaa290a21e182eaff85c2a510c8ae40.png\r\n\r\nMaking changes within the usual Display tab catches everything else, including the generated Status pane, but doesn't change the map. I wonder if there's something in that code that's just generating default, rather than following the selected prefs?...",
      "EditableFormat": "markdown",
      "HTML": "<p>Nonono- what you supplied doesn't work unless I remove something I consider to be a vital UI element, that is, moving the map from taking up half of the top of the screen to instead occupying a collapsible accordion pane. The code for which is above. I'm going over it now to see if I can insert the setCss inside of it, or if I can find out what it's generated as to point it at it, but no dice.</p>\n<p>https://i.gyazo.com/beaa290a21e182eaff85c2a510c8ae40.png</p>\n<p>Making changes within the usual Display tab catches everything else, including the generated Status pane, but doesn't change the map. I wonder if there's something in that code that's just generating default, rather than following the selected prefs?...</p>\n\n",
      "PostDate": "2019-07-30T14:47:56.4652889Z",
      "LastEditDate": "2019-07-30T14:53:52.945178Z",
      "link": null
    },
    {
      "PostId": "228732b5-d88a-4970-a7b7-f0173c9ae16b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "<code style=\"color: inherit; border: solid grey 1px\">JS.setCss (\"#mapAccordion\", \"background-color:red\")</code> ?",
      "EditableFormat": "markdown",
      "HTML": "<p><code style=\"color: inherit; border: solid grey 1px\">JS.setCss (\"#mapAccordion\", \"background-color:red\")</code> ?</p>\n\n",
      "PostDate": "2019-07-30T16:04:25.4720041Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "15fa5557-d012-4139-a711-ff09ab0f31d8",
      "UserId": 207026,
      "Username": "Pykrete",
      "AvatarUrl": "http://i.imgur.com/F7PNLN5b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "... Well it half worked!\r\n\r\nhttps://i.gyazo.com/ea4c61d1459810a6aee0ac86dc84305b.png\r\n\r\nAnd I do quite literally mean half! At least we've made a fashionable pokéball? Pokésquare?\r\n\r\nEdit; AHAH! \r\n```\r\nJS.setCss (\"#gridCanvas\", \"background-color:red\")\r\n```\r\n\r\nThat's done the trick for the background colour! Now, to see if I can replicate it for the label, and the colour of the font in said label.",
      "EditableFormat": "markdown",
      "HTML": "<p>... Well it half worked!</p>\n<p>https://i.gyazo.com/ea4c61d1459810a6aee0ac86dc84305b.png</p>\n<p>And I do quite literally mean half! At least we've made a fashionable pokéball? Pokésquare?</p>\n<p>Edit; AHAH!</p>\n<pre><code>JS.setCss (\"#gridCanvas\", \"background-color:red\")\n</code></pre>\n<p>That's done the trick for the background colour! Now, to see if I can replicate it for the label, and the colour of the font in said label.</p>\n\n",
      "PostDate": "2019-07-30T16:09:12.2575695Z",
      "LastEditDate": "2019-07-30T16:11:40.6009867Z",
      "link": null
    },
    {
      "PostId": "3aa06148-23b5-4e64-bee0-0a8ec60a9c2f",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You should be able to recolour `#mapLabel` and `#mapLabel .accordion-header-text` normally.\r\n\r\nHowever, if you're changing the style of sidebar panels, you'd be better changing the styling of the CSS classes:\r\n* `.ui-accordion-header` - the header of each pane in the sidebar\r\n* `.accordion-header-text` - the text in the title of each pane\r\n* `.ui-accordion-header.ui-state-active` - the header of any panes which aren't hidden\r\n* `.ui-accordion-content` - the body of each pane in the sidebar",
      "EditableFormat": "markdown",
      "HTML": "<p>You should be able to recolour <code>#mapLabel</code> and <code>#mapLabel .accordion-header-text</code> normally.</p>\n<p>However, if you're changing the style of sidebar panels, you'd be better changing the styling of the CSS classes:</p>\n<ul>\n<li><code>.ui-accordion-header</code> - the header of each pane in the sidebar</li>\n<li><code>.accordion-header-text</code> - the text in the title of each pane</li>\n<li><code>.ui-accordion-header.ui-state-active</code> - the header of any panes which aren't hidden</li>\n<li><code>.ui-accordion-content</code> - the body of each pane in the sidebar</li>\n</ul>\n\n",
      "PostDate": "2019-07-30T16:18:37.2348497Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e1d860a7-75de-4c8c-b5da-3f0d17cf1df8",
      "UserId": 207026,
      "Username": "Pykrete",
      "AvatarUrl": "http://i.imgur.com/F7PNLN5b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm afraid my brain is staticking too hard to figure out the exact language to use, here.\r\n\r\nI worked out before your post, \r\n```\r\nJS.setCss (\"#mapLabel\", \"color:white\")\r\n```\r\n, changed the colour of the title text; .accordion-header-text, I guess? Now I just need .ui-accordion-header, assuming that's the background colour of the title/top of the pane. Just... not quite sure how to type that out.\r\n\r\nEdit;\r\nFurther confusion, as none of those alter the colour of the pane header, but 2 of them alter the colour of the text.\r\n\r\n.ui-accordion-header - Changes text.\r\n.accordion-header-text - DOESN'T change text. Headscratcher.\r\n.ui-accordion-header.ui-state-active - Changes text. Makes sense, that's an active version of the first one.\r\n.ui-accordion-content - Does nothing.\r\n\r\nEdit Edit; RESULT.\r\n```\r\nJS.setCss (\"#gridCanvas\", \"background-color:#2E2D2D\")\r\nJS.setCss (\"#mapLabel\", \"color:white\")\r\nJS.setCss (\"#mapAccordion\", \"border-color:white\")\r\nJS.setCss (\"#mapLabel\", \"background:#2E2D2D\")\r\nJS.setCss (\"#mapLabel\", \"border-color:white\")\r\n```\r\nWhich comes out looking like this. https://i.gyazo.com/ae8731698af2338124aca13e673f69da.png\r\n\r\nFor some odd reason, doing background-color was what was breaking everything. I inspected the html elements, and noticed that it was specified background, not background-color. Tried with just background, and it worked. But then more confusingly, other pieces; Border in particular, and then bafflingly background for the canvas, DID need -color specified.\r\n\r\nWell, whatever! The map now matches the rest of the UI and looks the same when inactive/closed. I'm satisfied! The code for the map pane can be used in conjunction with the code I've added above to alter all the colour sections of it that spring to mind, though mine is tweaked to insertAfter the compassAccordion, whereas I think the one above is insertBefore InventoryLabel.\r\n\r\nThanks for the guidance!",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm afraid my brain is staticking too hard to figure out the exact language to use, here.</p>\n<p>I worked out before your post,</p>\n<pre><code>JS.setCss (\"#mapLabel\", \"color:white\")\n</code></pre>\n<p>, changed the colour of the title text; .accordion-header-text, I guess? Now I just need .ui-accordion-header, assuming that's the background colour of the title/top of the pane. Just... not quite sure how to type that out.</p>\n<p>Edit;<br>\nFurther confusion, as none of those alter the colour of the pane header, but 2 of them alter the colour of the text.</p>\n<p>.ui-accordion-header - Changes text.<br>\n.accordion-header-text - DOESN'T change text. Headscratcher.<br>\n.ui-accordion-header.ui-state-active - Changes text. Makes sense, that's an active version of the first one.<br>\n.ui-accordion-content - Does nothing.</p>\n<p>Edit Edit; RESULT.</p>\n<pre><code>JS.setCss (\"#gridCanvas\", \"background-color:#2E2D2D\")\nJS.setCss (\"#mapLabel\", \"color:white\")\nJS.setCss (\"#mapAccordion\", \"border-color:white\")\nJS.setCss (\"#mapLabel\", \"background:#2E2D2D\")\nJS.setCss (\"#mapLabel\", \"border-color:white\")\n</code></pre>\n<p>Which comes out looking like this. https://i.gyazo.com/ae8731698af2338124aca13e673f69da.png</p>\n<p>For some odd reason, doing background-color was what was breaking everything. I inspected the html elements, and noticed that it was specified background, not background-color. Tried with just background, and it worked. But then more confusingly, other pieces; Border in particular, and then bafflingly background for the canvas, DID need -color specified.</p>\n<p>Well, whatever! The map now matches the rest of the UI and looks the same when inactive/closed. I'm satisfied! The code for the map pane can be used in conjunction with the code I've added above to alter all the colour sections of it that spring to mind, though mine is tweaked to insertAfter the compassAccordion, whereas I think the one above is insertBefore InventoryLabel.</p>\n<p>Thanks for the guidance!</p>\n\n",
      "PostDate": "2019-07-30T16:25:47.4740793Z",
      "LastEditDate": "2019-07-30T17:25:27.9493144Z",
      "link": null
    },
    {
      "PostId": "99330ad5-a1a7-4ecc-9cd3-6e657235ddb6",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> For some odd reason, doing background-color was what was breaking everything. \r\n\r\nSpecifying `background-color` just changes the background color. If there's already a background image set, the color will only affect the areas not covered by the image.\r\n\r\nWhen you specify just `background`, it assumes you're setting a whole list of properties, with spaces between them. In order, those properties are: background-color, background-image, background-position, background-size, background-repeat, background-origin, background-clip, background-attachment.\r\n\r\nSo by specifying `background:#2E2D2D`, that's equivalent to `background-color:#2E2D2D; background-image: none`.\r\n\r\n> But then more confusingly, other pieces; Border in particular, \r\n\r\nThe same applies for `border`, it specifies a bunch of properties at once. But the properties are border-width, border-style, and border-color, in that order.\r\nSo you'd specify something like: `border: 1px solid white`.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>For some odd reason, doing background-color was what was breaking everything.</p>\n</blockquote>\n<p>Specifying <code>background-color</code> just changes the background color. If there's already a background image set, the color will only affect the areas not covered by the image.</p>\n<p>When you specify just <code>background</code>, it assumes you're setting a whole list of properties, with spaces between them. In order, those properties are: background-color, background-image, background-position, background-size, background-repeat, background-origin, background-clip, background-attachment.</p>\n<p>So by specifying <code>background:#2E2D2D</code>, that's equivalent to <code>background-color:#2E2D2D; background-image: none</code>.</p>\n<blockquote>\n<p>But then more confusingly, other pieces; Border in particular,</p>\n</blockquote>\n<p>The same applies for <code>border</code>, it specifies a bunch of properties at once. But the properties are border-width, border-style, and border-color, in that order.<br>\nSo you'd specify something like: <code>border: 1px solid white</code>.</p>\n\n",
      "PostDate": "2019-07-30T22:09:57.1080647Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0ad96b75-f997-4e8b-9d06-ae4365014288",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@mrangel -\r\n\r\n> You should be able to recolour ```#mapLabel``` and ```#mapLabel .accordion-header-text``` normally.\r\n\r\nIs ```#mapLabel .accordion-header-text``` a way to apply a class only to a specific element?",
      "EditableFormat": "markdown",
      "HTML": "<p>@mrangel -</p>\n<blockquote>\n<p>You should be able to recolour <code>#mapLabel</code> and <code>#mapLabel .accordion-header-text</code> normally.</p>\n</blockquote>\n<p>Is <code>#mapLabel .accordion-header-text</code> a way to apply a class only to a specific element?</p>\n\n",
      "PostDate": "2019-07-31T12:59:32.3870851Z",
      "LastEditDate": "2019-07-31T13:00:22.8271966Z",
      "link": null
    },
    {
      "PostId": "e4f9f49b-c110-42e2-a75e-4bb54aee3365",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Is `#mapLabel .accordion-header-text` a way to apply a class only to a specific element?\r\n\r\nThe space lets you match elements contained in other elements. So this particular selector finds any element with `class=\"accordion-header-text\"` *inside* an element with `id=\"mapLabel\"`.\r\n\r\nIf you take out the space in the middle, it would be searching for an element with both the specified ID and the specified class.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Is <code>#mapLabel .accordion-header-text</code> a way to apply a class only to a specific element?</p>\n</blockquote>\n<p>The space lets you match elements contained in other elements. So this particular selector finds any element with <code>class=\"accordion-header-text\"</code> <em>inside</em> an element with <code>id=\"mapLabel\"</code>.</p>\n<p>If you take out the space in the middle, it would be searching for an element with both the specified ID and the specified class.</p>\n\n",
      "PostDate": "2019-07-31T15:57:20.8432176Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f299a8eb-3236-479c-bec7-3ca3ce80f36a",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, this sounds like a very useful way to precisely target elements.  Thank you!",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, this sounds like a very useful way to precisely target elements.  Thank you!</p>\n\n",
      "PostDate": "2019-07-31T16:42:56.6292229Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
