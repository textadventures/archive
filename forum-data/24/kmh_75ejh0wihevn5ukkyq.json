{
  "Topic": {
    "TopicId": "kmh_75ejh0wihevn5ukkyq",
    "ForumId": "24",
    "Title": "Questions about {if",
    "LastUpdated": "2021-08-30T03:56:22.4255182Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "2f99841a-a60d-40a2-b6a8-0dae009b89ec",
      "UserId": 208122,
      "Username": "IFforClassroom",
      "AvatarUrl": "https://secure.gravatar.com/avatar/9683526b9b2547bc86419ed8a2454df1?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I always find Squiffy's ```{if ```to be very weird. First here are all the comparison symbols that ```{if``` understands, as far as I'm aware:\r\n\r\n```\r\n@set x=1\r\n\r\n{if seen section_title:The player has visited this section.}\r\n{if x:x is either boolean true or equal to 1} \r\n\r\n{if x=1:x is either boolean true or equal to 1}\r\n\r\n{if x:}{else:x could be any value except for 1 or boolean true}\r\n\r\n{if x=1:}{else:x could be any value except for 1 or boolean true}\r\n\r\n{if not x:x could be non-existent or boolean false or 'null' or 'NaN' or equal to 0 or equal to Infinity}\r\n\r\n{if x=@x:x is x even if x doesn't actually exist}\r\n\r\n{if x<>2:x is not equal to 2}\r\n\r\n{if x>0:{if x<1:x has a decimal value between 0 and 1}}\r\n\r\n{if x>0:x is greater than 0}\r\n\r\n{if x<2:x is less than 2}\r\n\r\n{if x>=0:x is greater than or equal to 0}\r\n\r\n{if x<=2:x is less than or equal to 2}\r\n```\r\n\r\nDoes anybody know of any other symbol that can be used after ```{if x```?",
      "EditableFormat": "markdown",
      "HTML": "<p>I always find Squiffy's <code>{if</code>to be very weird. First here are all the comparison symbols that <code>{if</code> understands, as far as I'm aware:</p>\n<pre><code>@set x=1\n\n{if seen section_title:The player has visited this section.}\n{if x:x is either boolean true or equal to 1} \n\n{if x=1:x is either boolean true or equal to 1}\n\n{if x:}{else:x could be any value except for 1 or boolean true}\n\n{if x=1:}{else:x could be any value except for 1 or boolean true}\n\n{if not x:x could be non-existent or boolean false or 'null' or 'NaN' or equal to 0 or equal to Infinity}\n\n{if x=@x:x is x even if x doesn't actually exist}\n\n{if x&lt;&gt;2:x is not equal to 2}\n\n{if x&gt;0:{if x&lt;1:x has a decimal value between 0 and 1}}\n\n{if x&gt;0:x is greater than 0}\n\n{if x&lt;2:x is less than 2}\n\n{if x&gt;=0:x is greater than or equal to 0}\n\n{if x&lt;=2:x is less than or equal to 2}\n</code></pre>\n<p>Does anybody know of any other symbol that can be used after <code>{if x</code>?</p>\n\n",
      "PostDate": "2021-08-30T03:56:22.4255182Z",
      "LastEditDate": "2021-08-30T11:57:12.6970539Z",
      "link": null
    },
    {
      "PostId": "ea6cbbc6-9fc9-46e8-9993-a3fe2b459d22",
      "UserId": 208122,
      "Username": "IFforClassroom",
      "AvatarUrl": "https://secure.gravatar.com/avatar/9683526b9b2547bc86419ed8a2454df1?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This isn't a symbol, but it's an operation that meants two values are not comparable.\r\n```\r\n@set x = 1\r\n@set y = a\r\n\r\n{x} {if x>@y:}{else:{if x<@y:}}{else:{if x<>@y:�}}  {y}",
      "EditableFormat": "markdown",
      "HTML": "<p>This isn't a symbol, but it's an operation that meants two values are not comparable.</p>\n<pre><code>@set x = 1\n@set y = a\n\n{x} {if x&gt;@y:}{else:{if x&lt;@y:}}{else:{if x&lt;&gt;@y:�}}  {y}\n</code></pre>\n\n",
      "PostDate": "2021-08-30T08:28:09.4779478Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "59587cbf-e35b-44a8-abda-d6bdacc17ecf",
      "UserId": 251768,
      "Username": "Bluevoss",
      "AvatarUrl": "https://i.imgur.com/6mfIIbhb.gif",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think you covered them all here. One has to be careful since there was an issue on if where a space could throw off some of the operations.\r\n\r\nThere was a discussion a while back about how to do logical ands and ors. It was kinda cheating but ,as I recall...\r\n\r\n```\r\n{@a}\r\n{@b}\r\n\r\n{if a:{if b: AND}}\r\n\r\n{if not a:{if not b:}}\r\n{else: OR}\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I think you covered them all here. One has to be careful since there was an issue on if where a space could throw off some of the operations.</p>\n<p>There was a discussion a while back about how to do logical ands and ors. It was kinda cheating but ,as I recall...</p>\n<pre><code>{@a}\n{@b}\n\n{if a:{if b: AND}}\n\n{if not a:{if not b:}}\n{else: OR}\n</code></pre>\n\n",
      "PostDate": "2021-08-30T17:25:42.4839117Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e3d72329-0fd6-4ac9-8844-478a54689d56",
      "UserId": 208122,
      "Username": "IFforClassroom",
      "AvatarUrl": "https://secure.gravatar.com/avatar/9683526b9b2547bc86419ed8a2454df1?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Unfortunately that doesn't work in my copy of Squiffy. I *think* I have the most update version.\r\n\r\n```\r\n{@b}\r\n{if not a:{if not b:}}{else: OR} <!---OR does not display.--->\r\n```\r\n\r\n```\r\n{@a}\r\n{if not a:{if not b:}}{else: OR}  <!---OR does display.--->\r\n```\r\n\r\nThis takes a little less space:\r\n```\r\n{if a:{@OR}} {if b:{@OR}}",
      "EditableFormat": "markdown",
      "HTML": "<p>Unfortunately that doesn't work in my copy of Squiffy. I <em>think</em> I have the most update version.</p>\n<pre><code>{@b}\n{if not a:{if not b:}}{else: OR} &lt;!---OR does not display.---&gt;\n</code></pre>\n<pre><code>{@a}\n{if not a:{if not b:}}{else: OR}  &lt;!---OR does display.---&gt;\n</code></pre>\n<p>This takes a little less space:</p>\n<pre><code>{if a:{@OR}} {if b:{@OR}}\n</code></pre>\n\n",
      "PostDate": "2021-08-31T00:22:36.5301118Z",
      "LastEditDate": "2021-08-31T02:53:10.7089884Z",
      "link": null
    },
    {
      "PostId": "6dd3c41c-9085-4451-9089-6674ce4a5ccc",
      "UserId": 251768,
      "Username": "Bluevoss",
      "AvatarUrl": "https://i.imgur.com/6mfIIbhb.gif",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm using this: \r\nSquiffy 5.1.1\r\nBuild 5.1.2\r\n\r\nI'm not sure why it wouldn't work - can someone else confirm this (I'm pretty screwed if it dosn't work - works for me). **Can someone confirm this?**\r\n\r\nYou cut and pasted _everything_ in, right?\r\n\r\nThe reason I do the longer OR is if the OR section is lengthy - I don't want to do it twice. ",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm using this:<br>\nSquiffy 5.1.1<br>\nBuild 5.1.2</p>\n<p>I'm not sure why it wouldn't work - can someone else confirm this (I'm pretty screwed if it dosn't work - works for me). <strong>Can someone confirm this?</strong></p>\n<p>You cut and pasted <em>everything</em> in, right?</p>\n<p>The reason I do the longer OR is if the OR section is lengthy - I don't want to do it twice.</p>\n\n",
      "PostDate": "2021-08-31T10:45:00.6417879Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d8eb27a7-a696-470b-8850-37372668d23c",
      "UserId": 251768,
      "Username": "Bluevoss",
      "AvatarUrl": "https://i.imgur.com/6mfIIbhb.gif",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "BTW, you need to define BOTH variables. A and B must both be set.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>BTW, you need to define BOTH variables. A and B must both be set.</p>\n\n",
      "PostDate": "2021-08-31T10:45:49.808213Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3b889bd5-9e5d-4e19-beea-eb35f3b91bcd",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">      {if not a:{if not b:}}\r\n>      {else: OR}\r\n\r\nThis should not work. The `{else: OR}` will run if the most recent `if` to return didn't, based on the value of the internal `data.lastIf`  flag. In this case, that's the `{if not a:` section. The 'else' clause here doesn't care about the second if statement.\r\n\r\nThe relevant piece of code is:\r\n```\r\n\t\t\t\tvar textResult = result ? process(text, data) : \"\";\r\n\r\n\t\t\t\tdata.lastIf = result;\r\n\t\t\t\treturn textResult;\r\n```\r\n\r\nWhen the first 'if' statement is run, if figures out whether `not a` is true. If so, it runs the second `if` block to check if `not b` is true. However, even if b is true so it sets `data.lastIf` to false, that happens *before* the line `data.lastIf = result`, which sets lastIf back to the result of the `not a` test.\r\n\r\nI've seen people writing scripting languages before where it looks like:\r\n```\r\n\t\t\t\tdata.lastIf = result;\r\n\t\t\t\treturn result ? process(text, data) : \"\";\r\n```\r\nbut this is often a bug.\r\n\r\nIn both cases, whether `{else` displays output is based on whether the closest `{if` did anything. The difference is that the buggy one picks the closest `{if` block; while the one Squiffy actually uses looks at the closest `}` which belongs to an if block.\r\n\r\nUnfortunately, your 'or' construct will only work with the buggy version of the 'if' function.\r\n\r\nI checked on git, and it seems that this has been the same ever since `{else` was added.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<pre><code> {if not a:{if not b:}}\n {else: OR}\n</code></pre>\n</blockquote>\n<p>This should not work. The <code>{else: OR}</code> will run if the most recent <code>if</code> to return didn't, based on the value of the internal <code>data.lastIf</code>  flag. In this case, that's the <code>{if not a:</code> section. The 'else' clause here doesn't care about the second if statement.</p>\n<p>The relevant piece of code is:</p>\n<pre><code>\t\t\t\tvar textResult = result ? process(text, data) : \"\";\n\n\t\t\t\tdata.lastIf = result;\n\t\t\t\treturn textResult;\n</code></pre>\n<p>When the first 'if' statement is run, if figures out whether <code>not a</code> is true. If so, it runs the second <code>if</code> block to check if <code>not b</code> is true. However, even if b is true so it sets <code>data.lastIf</code> to false, that happens <em>before</em> the line <code>data.lastIf = result</code>, which sets lastIf back to the result of the <code>not a</code> test.</p>\n<p>I've seen people writing scripting languages before where it looks like:</p>\n<pre><code>\t\t\t\tdata.lastIf = result;\n\t\t\t\treturn result ? process(text, data) : \"\";\n</code></pre>\n<p>but this is often a bug.</p>\n<p>In both cases, whether <code>{else</code> displays output is based on whether the closest <code>{if</code> did anything. The difference is that the buggy one picks the closest <code>{if</code> block; while the one Squiffy actually uses looks at the closest <code>}</code> which belongs to an if block.</p>\n<p>Unfortunately, your 'or' construct will only work with the buggy version of the 'if' function.</p>\n<p>I checked on git, and it seems that this has been the same ever since <code>{else</code> was added.</p>\n\n",
      "PostDate": "2021-08-31T11:42:03.2366461Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5036ca93-64ae-436e-aea0-5ef40d84e291",
      "UserId": 208122,
      "Username": "IFforClassroom",
      "AvatarUrl": "https://secure.gravatar.com/avatar/9683526b9b2547bc86419ed8a2454df1?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Instead of using {else:, you could define NOR first, and then say {if not NOR:OR}.\r\n\r\nIt really sucks to suddenly find a game or tool not working. I feel for you, Bluevoss.\r\n\r\n    {if not a:{if not b:{@NOR}}}\r\n    {if not NOR:{@OR}}",
      "EditableFormat": "markdown",
      "HTML": "<p>Instead of using {else:, you could define NOR first, and then say {if not NOR:OR}.</p>\n<p>It really sucks to suddenly find a game or tool not working. I feel for you, Bluevoss.</p>\n<pre><code>{if not a:{if not b:{@NOR}}}\n{if not NOR:{@OR}}\n</code></pre>\n\n",
      "PostDate": "2021-08-31T13:04:32.921399Z",
      "LastEditDate": "2021-08-31T13:16:30.5776349Z",
      "link": null
    },
    {
      "PostId": "44aab2df-cae5-4a18-84e0-9de1c96011b9",
      "UserId": 251768,
      "Username": "Bluevoss",
      "AvatarUrl": "https://i.imgur.com/6mfIIbhb.gif",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Fortunately I didn't use it anywhere - just was trying to get the AND to work. But I see the problem now. I will now slink off to my dark hole and think about this for a bit.\r\n\r\nIt's doable - but it should be simple.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Fortunately I didn't use it anywhere - just was trying to get the AND to work. But I see the problem now. I will now slink off to my dark hole and think about this for a bit.</p>\n<p>It's doable - but it should be simple.</p>\n\n",
      "PostDate": "2021-09-02T17:38:57.5691683Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f7de304a-3103-4228-a63b-36e83c7d74fb",
      "UserId": 208122,
      "Username": "IFforClassroom",
      "AvatarUrl": "https://secure.gravatar.com/avatar/9683526b9b2547bc86419ed8a2454df1?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">It's doable - but it should be simple.\r\n\r\nPREACH!",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>It's doable - but it should be simple.</p>\n</blockquote>\n<p>PREACH!</p>\n\n",
      "PostDate": "2021-09-03T00:11:46.6806872Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
