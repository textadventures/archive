{
  "Topic": {
    "TopicId": "q7ms8j7th0abymd64mnmbw",
    "ForumId": "24",
    "Title": "Trying to assign random number to a variable/attribute",
    "LastUpdated": "2018-04-02T03:03:58.1961504Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "ebfee2ed-632c-4161-acf6-f0999d8b775d",
      "UserId": 34566,
      "Username": "loopernow",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm very very new to programming and Javascript. I have a problem.\r\n\r\nI'm writing a story in which time will pass with each player turn and certain events will occur if a particular random number is \"rolled\" at various points in the story.\r\n\r\nSo I am at the point now where I am just starting to play with this idea. I know that I can have a master section that can increment an attribute that represents passage of time (or amount of player clicks between sections, basically). My thought is that I want to generate a random number at certain points and assign it to a variable so that I can test it in if/then statements.\r\n\r\nI took a look online and see that I can generate a random number in a specified range using a Javascript function:\r\n\r\n```\r\n            function getRndInteger(min, max) {\r\n                 return Math.floor(Math.random() * (max - min + 1) ) + min;\r\n            }\r\n```\r\n\r\nMy thought was that, since a Master section runs every turn, it would be very inefficient to put the function in a Master section. So I just put the function getRndInteger at the top of my squiffy file, right after @title and @start and before any sections or passages.\r\n\r\nThen, to test it out, I put the following code in one of my sections:\r\n\r\n```\r\n    var result = getRndInteger(1, 10)\r\n\r\nresult is: {result}\r\n```\r\n\r\nBut I'm not getting my desired outcome. The call doesn't seem to be working. It doesn't work if I put the function in a master section either.\r\n\r\nIs my thought about keeping the function out of a master section to increase efficiency correct? Why can't I call the function, get a number, and assign it to variable/attribute \"result\"? Are Javascript variables and Squiffy attributes one and the same? Are any of my other assumptions incorrect or misguided?",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm very very new to programming and Javascript. I have a problem.</p>\n<p>I'm writing a story in which time will pass with each player turn and certain events will occur if a particular random number is \"rolled\" at various points in the story.</p>\n<p>So I am at the point now where I am just starting to play with this idea. I know that I can have a master section that can increment an attribute that represents passage of time (or amount of player clicks between sections, basically). My thought is that I want to generate a random number at certain points and assign it to a variable so that I can test it in if/then statements.</p>\n<p>I took a look online and see that I can generate a random number in a specified range using a Javascript function:</p>\n<pre><code>            function getRndInteger(min, max) {\n                 return Math.floor(Math.random() * (max - min + 1) ) + min;\n            }\n</code></pre>\n<p>My thought was that, since a Master section runs every turn, it would be very inefficient to put the function in a Master section. So I just put the function getRndInteger at the top of my squiffy file, right after @title and @start and before any sections or passages.</p>\n<p>Then, to test it out, I put the following code in one of my sections:</p>\n<pre><code>    var result = getRndInteger(1, 10)\n\nresult is: {result}\n</code></pre>\n<p>But I'm not getting my desired outcome. The call doesn't seem to be working. It doesn't work if I put the function in a master section either.</p>\n<p>Is my thought about keeping the function out of a master section to increase efficiency correct? Why can't I call the function, get a number, and assign it to variable/attribute \"result\"? Are Javascript variables and Squiffy attributes one and the same? Are any of my other assumptions incorrect or misguided?</p>\n\n",
      "PostDate": "2018-04-02T03:03:58.1961504Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4b3ce75a-0a46-4bb3-8881-33222484c75a",
      "UserId": 260569,
      "Username": "DarkLizerd",
      "AvatarUrl": "https://i.imgur.com/vjdH3t6b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "What numbers are you getting??? are they outside the 1 to 10 range?\r\nAn easy way to test this is to call the GetRndInteger several times in a roll and watch the results.\r\nIn Quest, GetRndInteger  is a function that you do not need to create...\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>What numbers are you getting??? are they outside the 1 to 10 range?<br>\nAn easy way to test this is to call the GetRndInteger several times in a roll and watch the results.<br>\nIn Quest, GetRndInteger  is a function that you do not need to create...</p>\n\n",
      "PostDate": "2018-04-02T06:28:59.3154134Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "114cf1d8-f2fb-4bec-b9b7-94f4d473bede",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Try this (changing 0 and 10 to whatever you please):\r\n\r\n```\r\n[[start]]:\r\n    getRndInteger = function(min,max){\r\n        return Math.floor(Math.random()*max)+min;\r\n    };\r\nHello.\r\n\r\n[get a random integer]\r\n\r\n\r\n[get a random integer]:\r\n    var rndInt = getRndInteger(0,10);\r\n    set(\"int\",rndInt);\r\nYour random integer is: {int}.\r\n\r\n[get a random integer]\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Try this (changing 0 and 10 to whatever you please):</p>\n<pre><code>[[start]]:\n    getRndInteger = function(min,max){\n        return Math.floor(Math.random()*max)+min;\n    };\nHello.\n\n[get a random integer]\n\n\n[get a random integer]:\n    var rndInt = getRndInteger(0,10);\n    set(\"int\",rndInt);\nYour random integer is: {int}.\n\n[get a random integer]\n</code></pre>\n\n",
      "PostDate": "2018-04-02T06:36:02.8307967Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d3dba000-483f-4d32-96b6-a5402fc29003",
      "UserId": 34566,
      "Username": "loopernow",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Awesome! Thank you K.V.; I will try that ASAP.",
      "EditableFormat": "markdown",
      "HTML": "<p>Awesome! Thank you K.V.; I will try that ASAP.</p>\n\n",
      "PostDate": "2018-04-04T03:32:11.526945Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2d652284-3fcf-44c0-afbb-bd4d5ad879e5",
      "UserId": 34566,
      "Username": "loopernow",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "K.V., unfortunately your code doesn't seem to work as a standalone game or in my game. A blank screen is shown when the game is run.\r\n\r\nMy code, it \"gets past\" the first part but calling the function doesn't work: it returns null.",
      "EditableFormat": "markdown",
      "HTML": "<p>K.V., unfortunately your code doesn't seem to work as a standalone game or in my game. A blank screen is shown when the game is run.</p>\n<p>My code, it \"gets past\" the first part but calling the function doesn't work: it returns null.</p>\n\n",
      "PostDate": "2018-04-07T02:26:31.7155143Z",
      "LastEditDate": "2018-04-07T02:27:05.5807867Z",
      "link": null
    },
    {
      "PostId": "2062ee12-46ce-44a2-9dfe-817f37d3f851",
      "UserId": 34566,
      "Username": "loopernow",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Update--It's late and I'm tired but I can only seem to get it to work like this:\r\n\r\n```\r\n[[This-is-a-section]]\r\n\r\n[[This-is-a-section]]:\r\n    function getRndInteger(min, max) {\r\n        return Math.floor(Math.random() * (max - min + 1) ) + min;\r\n        };\r\n\r\n        set(\"result\",getRndInteger(1, 10))\r\n\r\nresult is: {result}\r\n```\r\n\r\nHowever, I can't then put:\r\n\r\n```\r\n        set(\"result2\",getRndInteger(1, 10))\r\n\r\nresult is: {result2}\r\n```\r\n\r\nin a passage within the same section and get a 2nd variable. \r\n\r\nI can only get it to work if I repeat the function in every section or passage I want to get a random number in, as above.\r\n\r\nHow can I define the function in one section and call it in a different passage?\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Update--It's late and I'm tired but I can only seem to get it to work like this:</p>\n<pre><code>[[This-is-a-section]]\n\n[[This-is-a-section]]:\n    function getRndInteger(min, max) {\n        return Math.floor(Math.random() * (max - min + 1) ) + min;\n        };\n\n        set(\"result\",getRndInteger(1, 10))\n\nresult is: {result}\n</code></pre>\n<p>However, I can't then put:</p>\n<pre><code>        set(\"result2\",getRndInteger(1, 10))\n\nresult is: {result2}\n</code></pre>\n<p>in a passage within the same section and get a 2nd variable.</p>\n<p>I can only get it to work if I repeat the function in every section or passage I want to get a random number in, as above.</p>\n<p>How can I define the function in one section and call it in a different passage?</p>\n\n",
      "PostDate": "2018-04-07T04:17:50.0188183Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f957a9f7-bfb0-4985-93de-f0a1b29ceca4",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Really?  Is that in a browser or in a build of Squiffy?\r\n\r\nI was doing that in Scratchpad:\r\n\r\n<a href=\"https://user-images.githubusercontent.com/30656341/38451116-74f13808-39ef-11e8-95e5-b63c8aee6cb5.png\"><img src=\"https://user-images.githubusercontent.com/30656341/38451116-74f13808-39ef-11e8-95e5-b63c8aee6cb5.png\" width=\"50%\"/></a>\r\n\r\n---\r\n...but that does not work elsewhere.\r\n\r\nThis seems to work quite well everywhere, though:\r\n```\r\n[[start]]:\r\n    squiffy.getRndInteger = function(min,max){\r\n        return Math.floor(Math.random()*max)+min;\r\n    };\r\nHello.\r\n\r\n[get a random integer]\r\n\r\n\r\n[get a random integer]:\r\n    set(\"int\", squiffy.getRndInteger(0,10));\r\nYour random integer is: {int}.\r\n\r\n[get a random integer]\r\n```\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/38451239-216793dc-39f2-11e8-815c-1aae1166add0.png)\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/38451253-6ec9f1ba-39f2-11e8-8d28-6b772e8a9373.png)\r\n\r\n![image](https://user-images.githubusercontent.com/30656341/38451260-7f913ddc-39f2-11e8-807b-ea8cf4aac372.png)",
      "EditableFormat": "markdown",
      "HTML": "<p>Really?  Is that in a browser or in a build of Squiffy?</p>\n<p>I was doing that in Scratchpad:</p>\n<p><a href=\"https://user-images.githubusercontent.com/30656341/38451116-74f13808-39ef-11e8-95e5-b63c8aee6cb5.png\"><img src=\"https://user-images.githubusercontent.com/30656341/38451116-74f13808-39ef-11e8-95e5-b63c8aee6cb5.png\" width=\"50%\"></a></p>\n<hr>\n<p>...but that does not work elsewhere.</p>\n<p>This seems to work quite well everywhere, though:</p>\n<pre><code>[[start]]:\n    squiffy.getRndInteger = function(min,max){\n        return Math.floor(Math.random()*max)+min;\n    };\nHello.\n\n[get a random integer]\n\n\n[get a random integer]:\n    set(\"int\", squiffy.getRndInteger(0,10));\nYour random integer is: {int}.\n\n[get a random integer]\n</code></pre>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/38451239-216793dc-39f2-11e8-815c-1aae1166add0.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/38451253-6ec9f1ba-39f2-11e8-8d28-6b772e8a9373.png\" alt=\"image\"></p>\n<p><img src=\"https://user-images.githubusercontent.com/30656341/38451260-7f913ddc-39f2-11e8-807b-ea8cf4aac372.png\" alt=\"image\"></p>\n\n",
      "PostDate": "2018-04-07T04:29:15.7749522Z",
      "LastEditDate": "2018-04-07T04:31:28.98141Z",
      "link": null
    },
    {
      "PostId": "118fa564-7bdf-44b4-9371-5182b987732a",
      "UserId": 34566,
      "Username": "loopernow",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That does it! In your example, the function is defined in the section and then called in a sub-passage, and if that was as far as it would go, I would have been happy with that, but I tested it and you can also define the function in one section and call it in a completely different section and it still works. So that's very sweet! ;)\r\n\r\nLike this (just adding extra brackets around your passage to make it a separate section):\r\n\r\n```\r\n[[start]]:\r\n    squiffy.getRndInteger = function(min,max){\r\n        return Math.floor(Math.random()*max)+min;\r\n    };\r\nHello.\r\n\r\n[[get a random integer]]\r\n\r\n\r\n[[get a random integer]]:\r\n    set(\"int\", squiffy.getRndInteger(0,10));\r\nYour random integer is: {int}.\r\n\r\n[[get a random integer]]\r\n```\r\n\r\nThanks K.V.!",
      "EditableFormat": "markdown",
      "HTML": "<p>That does it! In your example, the function is defined in the section and then called in a sub-passage, and if that was as far as it would go, I would have been happy with that, but I tested it and you can also define the function in one section and call it in a completely different section and it still works. So that's very sweet! ;)</p>\n<p>Like this (just adding extra brackets around your passage to make it a separate section):</p>\n<pre><code>[[start]]:\n    squiffy.getRndInteger = function(min,max){\n        return Math.floor(Math.random()*max)+min;\n    };\nHello.\n\n[[get a random integer]]\n\n\n[[get a random integer]]:\n    set(\"int\", squiffy.getRndInteger(0,10));\nYour random integer is: {int}.\n\n[[get a random integer]]\n</code></pre>\n<p>Thanks K.V.!</p>\n\n",
      "PostDate": "2018-04-07T14:41:00.0662836Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
