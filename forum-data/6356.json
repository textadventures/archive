{
  "Topic": {
    "TopicId": "6356",
    "ForumId": "24",
    "Title": "How to make storybook using IF to send to two places?",
    "LastUpdated": "2016-05-22T18:34:49+01:00",
    "ReplyCount": 2
  },
  "Posts": [
    {
      "PostId": "42995",
      "UserId": 0,
      "Username": "TyCamden",
      "UserAvatar": null,
      "UserGravatar": "ff398cb6356c99be5c3547c4a683a2f8",
      "EditableText": "In my actual program (a work in progress), I still have a problem. It is hard to explain. The code is below. Run it and choose:\n1.) The man goes to work ;\n2.) The man falls on the icy sidewalk ;\n3.) Head to work * ;\n4.) The man stops at 7-11...\nYou will see that instead of running the IF code, it just shows it on screen and stops the gamebook.\nI want it so that if you saw this one earlier choice it will go to one section of code, and if you did not see the choice it will go to another.\n\nproblem &quot;code&quot;:\n\n[code:1wtwljzx]@start intro\n\n&#91;&#91;intro&#93;&#93;&#58;\n@set coffee=100\n\n@title The Coffee Cup\n\nA man takes his plastic coffee cup from the cupboard&#46; His favorite one&#46; It is insulated to keep his coffee warmer, longer&#46; It is black, and without design, serious and businesslike&#46; And a handle with a comfortable grip&#46;\n\nHe fills his coffee cup&#46; It is pleased&#46;\n\n&quot;Man, do I feel good&#46; But, where am I? What am I? I appear to be a coffee cup&#46; But&#46;&#46;&#46; I have no memory before this one&#46; Well&#46;&#46;&#46; what happens now?&quot;\n\n&#91;&#91;The man heads to work&#93;&#93;\n\n&#91;&#91;The man likes sugar in his coffee&#93;&#93;\n\n&#91;&#91;The man decides to drink tea&#93;&#93;\n\n&#91;&#91;The man likes sugar in his coffee&#93;&#93;&#58;\n\nThe man likes sugar in his coffee&#46; He opens a pack, and dumps it in&#46;\n\n&quot;What is this powder that is being poured into me? It is so sweet&#46; But&#46;&#46;&#46; how am I tasting it? Or seeing anything? I don't have facial features&#46; Not even a mouth&#46; So, I cannot he heard or understood&#46; HEY! MAN WITH THE POWDER! Nothing&#46;&quot;\n\n&#91;&#91;The man heads to work&#93;&#93;\n\n&#91;&#91;The man likes cream in his coffee&#93;&#93;\n\n&#91;&#91;The man decides to drink tea&#93;&#93;&#58;\n\nThe man says aloud, &quot;I'm tired of coffee today&#46; I think I'll have some tea&#46;&quot;\n\nHis wife replies, &quot;I just made some&#46; It's still on the stove&#46;&quot;\n\nThe coffee cup screams&#58; NO ! I AM A COFFEE CUP ! NOT A TEA CUP ! DON'T DO IT !\n\nBut noone can hear him&#46;\n\n&#91;&#91;Tea it is&#93;&#93;\n\n&#91;&#91;The man changes his mind again and has coffee&#93;&#93;\n\n&#91;&#91;Tea it is&#93;&#93;&#58;\n\nHe pours the coffee down the sink and rinses out the cup&#46; He pours in some hot tea instead&#46;\n\nWhat does the coffee cup think about this? It does not&#46; It no longer thinks at all&#46; It is back to being just&#46;&#46;&#46; a coffee cup&#46;\n\nThe End&#46;\n\n&#91;&#91;The man changes his mind again and has coffee&#93;&#93;&#58;\n\nThe man says aloud, &quot;Nevermind&#46; I'm running late&#46;&quot;\n\n&quot;Whew, that was a close one&#46; I don't think it be right, carrying tea&#46; It's just&#46;&#46;&#46; not in my nature&#46;&quot;\n\n&#91;&#91;The man heads to work&#93;&#93;\n\n&#91;&#91;The man likes cream in his coffee&#93;&#93;&#58;\n\nThe man likes cream in his coffee, so he pours some in&#46;\n\n&quot;I'm being diluted by a white liquid!? It's not bad though&#46;&quot;\n\nThe man stirs the drink&#46;\n\nThe coffee cup laughs with delight&#46; Oh&#46; He is ticklish !\n\n&#91;&#91;The man heads to work&#93;&#93;\n\n&#91;&#91;The man heads to work&#93;&#93;&#58;\n\nThe man grabs his keys, celphone, and coffee cup, and heads out the door to work&#46;\n\nThe coffee cup is momentarily blinded by the sun&#46; It is so bright outside, much brighter than indoors&#46; And it is relecting off of the snow covering the man's yard&#46; But it knows it is well insulated for his trip, and his contents well protected from the frigid winds&#46;\n\n&#91;&#91;The man falls on the icy sidewalk&#93;&#93;\n\n&#91;&#91;The man gets into his car and heads to work&#93;&#93;\n\n&#91;&#91;The man falls on the icy sidewalk&#93;&#93;&#58;\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );\n{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}\n\nThe man's shoes lose grip on the ice and he topples down&#46; His coffee cup goes flying, and the lid pops off when it hits the sidewalk&#46; Half of it is spilled, forever lost&#46;\n\nThe coffee cup cries in pain, and feels dizzy, but it survives&#46; It begins to question it's own mortality&#46;\n\n&#91;&#91;Head to work&#93;&#93;(The man gets into his car and heads to work)\n\n&#91;&#91;The man gets into his car and heads to work&#93;&#93;&#58;\n\nThe man gets to his car, and into it as well&#46; He places the coffee cup in the cup-holder of the car&#46;\n\n&quot;I feel very safe here&#46; Very secure indeed&#46; Looks like we are going a bit on an adventure&#46;&quot;\n\n&#91;&#91;The man arrives at work&#93;&#93;\n\n&#91;&#91;The man stops at 7-11&#93;&#93;\n\n&#91;&#91;The man has a car accident&#93;&#93;\n\n&#91;&#91;The man stops at 7-11&#93;&#93;&#58;\n\nThe man stops at the 7-11&#46;\n\n    if (squiffy&#46;story&#46;seen(&quot;The man falls on the icy sidewalk&quot;)) {\n        &#91;&#91;711hefellearlier&#93;&#93;\n    } else {\n        &#91;&#91;711nofallearlier&#93;&#93;\n    }\n\n&#91;&#91;711hefellearlier&#93;&#93;&#58;\n\n@set coffee=100\n\nHe tops-off his coffee&#46;\n\n&quot; I feel rejuvinated ! &quot;\n\n&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)\n\n&#91;&#91;711nofallearlier&#93;&#93;&#58;\n\nHe grabs a donut to eat at work&#46;\n\n&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)\n\n&#91;&#91;The man arrives at work&#93;&#93;&#58;\n\ncoffee = {coffee}\n\n{if seen The man stops at 7-11&#58;{manLate}}{else&#58;{manOnTime}}\n\n&#91;&#91;manLate&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );\n\nThe man arrives at work&#46; He is late&#46;\n\nHis boss warns him not to be late again&#46;\n\nHe walks over to his desk and sits down&#46; As he eats his donut, he drinks the coffee&#46;\n\n\n{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}\n\n&#91;&#91;He has to use the bathroom&#93;&#93;\n\n&#91;&#91;manOnTime&#93;&#93;&#58;\n\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );\n\nThe man arrives at work&#46; He is almost late, but made it just in time&#46;\n\nHe walks over to his desk and sits down&#46; He drinks some of the coffee&#46;\n\n{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}\n\n&#91;&#91;He has to use the bathroom&#93;&#93;\n\n&#91;&#91;The man has a car accident&#93;&#93;&#58;\n\nx\n\n&#91;&#91;He has to use the bathroom&#93;&#93;&#58;\n\nx[/code:1wtwljzx]",
      "EditableFormat": "bbcode",
      "HTML": "In my actual program (a work in progress), I still have a problem. It is hard to explain. The code is below. Run it and choose:<br/>1.) The man goes to work ;<br/>2.) The man falls on the icy sidewalk ;<br/>3.) Head to work * ;<br/>4.) The man stops at 7-11...<br/>You will see that instead of running the IF code, it just shows it on screen and stops the gamebook.<br/>I want it so that if you saw this one earlier choice it will go to one section of code, and if you did not see the choice it will go to another.<br/><br/>problem &quot;code&quot;:<br/><br/><pre><code>@start intro<br/><br/>&#91;&#91;intro&#93;&#93;&#58;<br/>@set coffee=100<br/><br/>@title The Coffee Cup<br/><br/>A man takes his plastic coffee cup from the cupboard&#46; His favorite one&#46; It is insulated to keep his coffee warmer, longer&#46; It is black, and without design, serious and businesslike&#46; And a handle with a comfortable grip&#46;<br/><br/>He fills his coffee cup&#46; It is pleased&#46;<br/><br/>&quot;Man, do I feel good&#46; But, where am I? What am I? I appear to be a coffee cup&#46; But&#46;&#46;&#46; I have no memory before this one&#46; Well&#46;&#46;&#46; what happens now?&quot;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;<br/><br/>&#91;&#91;The man likes sugar in his coffee&#93;&#93;<br/><br/>&#91;&#91;The man decides to drink tea&#93;&#93;<br/><br/>&#91;&#91;The man likes sugar in his coffee&#93;&#93;&#58;<br/><br/>The man likes sugar in his coffee&#46; He opens a pack, and dumps it in&#46;<br/><br/>&quot;What is this powder that is being poured into me? It is so sweet&#46; But&#46;&#46;&#46; how am I tasting it? Or seeing anything? I don't have facial features&#46; Not even a mouth&#46; So, I cannot he heard or understood&#46; HEY! MAN WITH THE POWDER! Nothing&#46;&quot;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;<br/><br/>&#91;&#91;The man likes cream in his coffee&#93;&#93;<br/><br/>&#91;&#91;The man decides to drink tea&#93;&#93;&#58;<br/><br/>The man says aloud, &quot;I'm tired of coffee today&#46; I think I'll have some tea&#46;&quot;<br/><br/>His wife replies, &quot;I just made some&#46; It's still on the stove&#46;&quot;<br/><br/>The coffee cup screams&#58; NO ! I AM A COFFEE CUP ! NOT A TEA CUP ! DON'T DO IT !<br/><br/>But noone can hear him&#46;<br/><br/>&#91;&#91;Tea it is&#93;&#93;<br/><br/>&#91;&#91;The man changes his mind again and has coffee&#93;&#93;<br/><br/>&#91;&#91;Tea it is&#93;&#93;&#58;<br/><br/>He pours the coffee down the sink and rinses out the cup&#46; He pours in some hot tea instead&#46;<br/><br/>What does the coffee cup think about this? It does not&#46; It no longer thinks at all&#46; It is back to being just&#46;&#46;&#46; a coffee cup&#46;<br/><br/>The End&#46;<br/><br/>&#91;&#91;The man changes his mind again and has coffee&#93;&#93;&#58;<br/><br/>The man says aloud, &quot;Nevermind&#46; I'm running late&#46;&quot;<br/><br/>&quot;Whew, that was a close one&#46; I don't think it be right, carrying tea&#46; It's just&#46;&#46;&#46; not in my nature&#46;&quot;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;<br/><br/>&#91;&#91;The man likes cream in his coffee&#93;&#93;&#58;<br/><br/>The man likes cream in his coffee, so he pours some in&#46;<br/><br/>&quot;I'm being diluted by a white liquid!? It's not bad though&#46;&quot;<br/><br/>The man stirs the drink&#46;<br/><br/>The coffee cup laughs with delight&#46; Oh&#46; He is ticklish !<br/><br/>&#91;&#91;The man heads to work&#93;&#93;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;&#58;<br/><br/>The man grabs his keys, celphone, and coffee cup, and heads out the door to work&#46;<br/><br/>The coffee cup is momentarily blinded by the sun&#46; It is so bright outside, much brighter than indoors&#46; And it is relecting off of the snow covering the man's yard&#46; But it knows it is well insulated for his trip, and his contents well protected from the frigid winds&#46;<br/><br/>&#91;&#91;The man falls on the icy sidewalk&#93;&#93;<br/><br/>&#91;&#91;The man gets into his car and heads to work&#93;&#93;<br/><br/>&#91;&#91;The man falls on the icy sidewalk&#93;&#93;&#58;<br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );<br/>{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}<br/><br/>The man's shoes lose grip on the ice and he topples down&#46; His coffee cup goes flying, and the lid pops off when it hits the sidewalk&#46; Half of it is spilled, forever lost&#46;<br/><br/>The coffee cup cries in pain, and feels dizzy, but it survives&#46; It begins to question it's own mortality&#46;<br/><br/>&#91;&#91;Head to work&#93;&#93;(The man gets into his car and heads to work)<br/><br/>&#91;&#91;The man gets into his car and heads to work&#93;&#93;&#58;<br/><br/>The man gets to his car, and into it as well&#46; He places the coffee cup in the cup-holder of the car&#46;<br/><br/>&quot;I feel very safe here&#46; Very secure indeed&#46; Looks like we are going a bit on an adventure&#46;&quot;<br/><br/>&#91;&#91;The man arrives at work&#93;&#93;<br/><br/>&#91;&#91;The man stops at 7-11&#93;&#93;<br/><br/>&#91;&#91;The man has a car accident&#93;&#93;<br/><br/>&#91;&#91;The man stops at 7-11&#93;&#93;&#58;<br/><br/>The man stops at the 7-11&#46;<br/><br/>    if (squiffy&#46;story&#46;seen(&quot;The man falls on the icy sidewalk&quot;)) {<br/>        &#91;&#91;711hefellearlier&#93;&#93;<br/>    } else {<br/>        &#91;&#91;711nofallearlier&#93;&#93;<br/>    }<br/><br/>&#91;&#91;711hefellearlier&#93;&#93;&#58;<br/><br/>@set coffee=100<br/><br/>He tops-off his coffee&#46;<br/><br/>&quot; I feel rejuvinated ! &quot;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)<br/><br/>&#91;&#91;711nofallearlier&#93;&#93;&#58;<br/><br/>He grabs a donut to eat at work&#46;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)<br/><br/>&#91;&#91;The man arrives at work&#93;&#93;&#58;<br/><br/>coffee = {coffee}<br/><br/>{if seen The man stops at 7-11&#58;{manLate}}{else&#58;{manOnTime}}<br/><br/>&#91;&#91;manLate&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-20 );<br/><br/>The man arrives at work&#46; He is late&#46;<br/><br/>His boss warns him not to be late again&#46;<br/><br/>He walks over to his desk and sits down&#46; As he eats his donut, he drinks the coffee&#46;<br/><br/><br/>{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}<br/><br/>&#91;&#91;He has to use the bathroom&#93;&#93;<br/><br/>&#91;&#91;manOnTime&#93;&#93;&#58;<br/><br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;)-10 );<br/><br/>The man arrives at work&#46; He is almost late, but made it just in time&#46;<br/><br/>He walks over to his desk and sits down&#46; He drinks some of the coffee&#46;<br/><br/>{if coffee&lt;1&#58; &#91;&#91;Finish&#93;&#93;(YouLose)}<br/><br/>&#91;&#91;He has to use the bathroom&#93;&#93;<br/><br/>&#91;&#91;The man has a car accident&#93;&#93;&#58;<br/><br/>x<br/><br/>&#91;&#91;He has to use the bathroom&#93;&#93;&#58;<br/><br/>x</code></pre>",
      "PostDate": "2016-05-21T17:06:00+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "43011",
      "UserId": 0,
      "Username": "Dennis Carlyle",
      "UserAvatar": null,
      "UserGravatar": "85ebb8105680cf9551a4943b3c2c28c8",
      "EditableText": "[quote=&quot;TyCamden&quot;:2nmqlw5y]In my actual program (a work in progress), I still have a problem. It is hard to explain. The code is below. Run it and choose:\n1.) The man goes to work ;\n2.) The man falls on the icy sidewalk ;\n3.) Head to work * ;\n4.) The man stops at 7-11...\nYou will see that instead of running the IF code, it just shows it on screen and stops the gamebook.\nI want it so that if you saw this one earlier choice it will go to one section of code, and if you did not see the choice it will go to another.\n\n[/quote:2nmqlw5y]\n\nI'm more comfortable just setting a 'flag' of my own, so I don't, so far, use the &quot;has seen&quot; thing in Squiffy.  As far as the problem above goes, I did this to get it working:\n\n------------------------------------------------\n[[The man falls on the icy sidewalk]]:\n    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );\n\n&lt;!-- comment:  this sets a flag you check later. --&gt;\n@set manFalls = 1\n\n{if coffee&lt;1: [[Finish]](YouLose)}\n------------------------------------------------\n\n\n[[The man stops at 7-11]]:  ---&gt;&gt;\n\n(1)   Delete  &quot;The man stops at the 7-11.&quot;  text line you have at the beginning of the section.  You have Javascript code in this section, and JS will *not* work in Squiffy unless it's the *first* thing in a section or passage.  You can just add the &quot;...stops at 7-11&quot; line to the beginning of both the other sections -- fell earlier / did not fall earlier.\n--&gt;\n\n(2) Use the &quot;story.go&quot; command.  I don't know if &quot;story.seen&quot; works in JS, but I didn't use it. I used the flag &quot;manFalls&quot; that I set in the icy sidewalk section.\n\nSo the code ends up looking like this:\n[code:2nmqlw5y]\n&#91;&#91;The man stops at 7-11&#93;&#93;&#58;\n    if (squiffy&#46;get(&quot;manFalls&quot;) == 1) {\n        squiffy&#46;story&#46;go(&quot;711hefellearlier&quot;);\n    } \n    else {\n        squiffy&#46;story&#46;go(&quot;711nofallearlier&quot;);\n    }\n[/code:2nmqlw5y]",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>TyCamden wrote:</cite>In my actual program (a work in progress), I still have a problem. It is hard to explain. The code is below. Run it and choose:<br/>1.) The man goes to work ;<br/>2.) The man falls on the icy sidewalk ;<br/>3.) Head to work * ;<br/>4.) The man stops at 7-11...<br/>You will see that instead of running the IF code, it just shows it on screen and stops the gamebook.<br/>I want it so that if you saw this one earlier choice it will go to one section of code, and if you did not see the choice it will go to another.<br/><br/></blockquote><br/><br/>I'm more comfortable just setting a 'flag' of my own, so I don't, so far, use the &quot;has seen&quot; thing in Squiffy.  As far as the problem above goes, I did this to get it working:<br/><br/>------------------------------------------------<br/>[[The man falls on the icy sidewalk]]:<br/>    set (&quot;coffee&quot;, get(&quot;coffee&quot;) / 2 );<br/><br/>&lt;!-- comment:  this sets a flag you check later. --&gt;<br/>@set manFalls = 1<br/><br/>{if coffee&lt;1: [[Finish]](YouLose)}<br/>------------------------------------------------<br/><br/><br/>[[The man stops at 7-11]]:  ---&gt;&gt;<br/><br/>(1)   Delete  &quot;The man stops at the 7-11.&quot;  text line you have at the beginning of the section.  You have Javascript code in this section, and JS will *not* work in Squiffy unless it's the *first* thing in a section or passage.  You can just add the &quot;...stops at 7-11&quot; line to the beginning of both the other sections -- fell earlier / did not fall earlier.<br/>--&gt;<br/><br/>(2) Use the &quot;story.go&quot; command.  I don't know if &quot;story.seen&quot; works in JS, but I didn't use it. I used the flag &quot;manFalls&quot; that I set in the icy sidewalk section.<br/><br/>So the code ends up looking like this:<br/><pre><code><br/>&#91;&#91;The man stops at 7-11&#93;&#93;&#58;<br/>    if (squiffy&#46;get(&quot;manFalls&quot;) == 1) {<br/>        squiffy&#46;story&#46;go(&quot;711hefellearlier&quot;);<br/>    } <br/>    else {<br/>        squiffy&#46;story&#46;go(&quot;711nofallearlier&quot;);<br/>    }<br/></code></pre>",
      "PostDate": "2016-05-22T04:43:27+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "43023",
      "UserId": 0,
      "Username": "TyCamden",
      "UserAvatar": null,
      "UserGravatar": "ff398cb6356c99be5c3547c4a683a2f8",
      "EditableText": "Thanks for the advice. Works GREAT now !\n\nI used the flag idea (to be safe).\n\nI also moved that text, to get the IF working properly, like you said. As follows:\n\n[code:gcflwnhz]&#91;&#91;711hefellearlier&#93;&#93;&#58;\n\n@set coffee=100\n\nThe man stops at the 7-11&#46;\n\nHe tops-off his coffee&#46;\n\n&quot; I feel rejuvinated ! &quot;\n\n&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)\n\n&#91;&#91;711nofallearlier&#93;&#93;&#58;\n\nThe man stops at the 7-11&#46;\n\nHe grabs a donut to eat at work&#46;\n\n&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)[/code:gcflwnhz]\n\nThanks again!",
      "EditableFormat": "bbcode",
      "HTML": "Thanks for the advice. Works GREAT now !<br/><br/>I used the flag idea (to be safe).<br/><br/>I also moved that text, to get the IF working properly, like you said. As follows:<br/><br/><pre><code>&#91;&#91;711hefellearlier&#93;&#93;&#58;<br/><br/>@set coffee=100<br/><br/>The man stops at the 7-11&#46;<br/><br/>He tops-off his coffee&#46;<br/><br/>&quot; I feel rejuvinated ! &quot;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)<br/><br/>&#91;&#91;711nofallearlier&#93;&#93;&#58;<br/><br/>The man stops at the 7-11&#46;<br/><br/>He grabs a donut to eat at work&#46;<br/><br/>&#91;&#91;The man heads to work&#93;&#93;(The man arrives at work)</code></pre><br/><br/>Thanks again!",
      "PostDate": "2016-05-22T18:34:49+01:00",
      "LastEditDate": null
    }
  ]
}
