{
  "Topic": {
    "TopicId": "870",
    "ForumId": "10",
    "Title": "Advice, please.",
    "LastUpdated": "2005-07-29T23:02:29+01:00",
    "ReplyCount": 2
  },
  "Posts": [
    {
      "PostId": "6780",
      "UserId": 0,
      "Username": "Starzie",
      "UserAvatar": null,
      "UserGravatar": "c20ce62fd6f06266df49d05867b620b8",
      "EditableText": "Okay, so I've worked out a simple skeleton of a battle system I'd like to use in my game. It all starts when the player enters the attack command:\n\n[code:1sulircx]\ncommand &lt;attack #@enemy#&gt; &#123;\n\t\tif type &lt;#enemy#; enemy&gt; then &#123;\n\t\t\tflag off &lt;battleOver&gt;\n\t\t\tdo &lt;battle&gt;\n\t\t&#125;\n\t\tif type &lt;#enemy#; ally&gt; then msg &lt;Attacking is not one of your brighter ideas&#46;&gt;\n\t&#125;\n[/code:1sulircx]\n\nThat starts off the procedure...\n\n[code:1sulircx]\ndefine procedure &lt;battle&gt;\n\trepeat while not flag &lt;battleOver&gt; for each object in &lt;#quest&#46;currentroom#&gt; &#123;\n\t\tif flag &lt;playerGone&gt; and flag &lt;monsterGone&gt; then &#123;\n\t\t\tflag off &lt;playerGone&gt;\n\t\t\tflag off &lt;monsterGone&gt;\n\t\t&#125;\n\t\tif type &lt;#enemy#; enemy&gt; and &#40; #player&#58;spd# &lt; #enemy&#58;spd# &#41; or flag &lt;playerGone&gt; then &#123;\n\t\t\tdo &lt;monsterAttack&gt;\n\t\t\twait &lt;Press any key to continue&#46;&#46;&#46;&gt;\n\t\t\tflag on &lt;monsterGone&gt;\n\t\t&#125;\n\t\telse &#123;\n\t\t\tdo &lt;playerAttack&gt;\n\t\t\twait &lt;Press any key to continue&#46;&#46;&#46;&gt;\n\t\t\tflag on &lt;playerGone&gt;\n\t\t&#125;\n\t&#125;\n\t\nend define\n[/code:1sulircx]\n\nNow, it works like dream... against one enemy at a time. I want to be able to have the player be able to battle up to five different enemies at once, and have the option of choosing which enemy to attack. How the heck would I go about adapting my current code to handle that?\n\nHere are the playerAttack and monsterAttack procedures if you want to see them for whatever reason.\n\n[code:1sulircx]\ndefine procedure &lt;monsterAttack&gt;\n\tif &#40; $objectproperty&#40;#enemy#; hp&#41;$ &lt;= 0 &#41; then &#123;\n\t\tdoaction &lt;#enemy#; die&gt;\n\t\tflag on &lt;battleOver&gt;\n\t\thide &lt;#enemy#&gt;\n\t&#125;\n\telse &#123;\n\t\tset numeric &lt;dam; $objectproperty&#40;#enemy#; str&#41;$ - #player&#58;def#&gt;\n\t\tif &#40; %dam% &lt; 0 &#41; then set numeric &lt;dam; 1&gt;\n\t\tset numeric &lt;newPlayerHp; #player&#58;hp# - %dam%&gt;\n\t\tproperty &lt;player; hp=%newPlayerHp%&gt;\n\t\tdoaction &lt;#enemy#; flavortext&gt;\n\t&#125;\nend define\n[/code:1sulircx]\n\n[code:1sulircx]\ndefine procedure &lt;playerAttack&gt;\n\tset numeric &lt;dam; #player&#58;str# - $objectproperty&#40;#enemy#; def&#41;$&gt;\n\tif &#40; %dam% &lt;= 0 &#41; then set numeric &lt;dam; 1&gt;\n\tset numeric &lt;newEnemyHp; $objectproperty&#40;#enemy#; hp&#41;$ - %dam%&gt;\n\tproperty &lt;#enemy#; hp=%newEnemyHp%&gt;\n\tdoaction &lt;player; flavortext&gt;\nend define\n[/code:1sulircx]",
      "EditableFormat": "bbcode",
      "HTML": "Okay, so I've worked out a simple skeleton of a battle system I'd like to use in my game. It all starts when the player enters the attack command:<br/><br/><pre><code><br/>command &lt;attack #@enemy#&gt; &#123;<br/>\t\tif type &lt;#enemy#; enemy&gt; then &#123;<br/>\t\t\tflag off &lt;battleOver&gt;<br/>\t\t\tdo &lt;battle&gt;<br/>\t\t&#125;<br/>\t\tif type &lt;#enemy#; ally&gt; then msg &lt;Attacking is not one of your brighter ideas&#46;&gt;<br/>\t&#125;<br/></code></pre><br/><br/>That starts off the procedure...<br/><br/><pre><code><br/>define procedure &lt;battle&gt;<br/>\trepeat while not flag &lt;battleOver&gt; for each object in &lt;#quest&#46;currentroom#&gt; &#123;<br/>\t\tif flag &lt;playerGone&gt; and flag &lt;monsterGone&gt; then &#123;<br/>\t\t\tflag off &lt;playerGone&gt;<br/>\t\t\tflag off &lt;monsterGone&gt;<br/>\t\t&#125;<br/>\t\tif type &lt;#enemy#; enemy&gt; and &#40; #player&#58;spd# &lt; #enemy&#58;spd# &#41; or flag &lt;playerGone&gt; then &#123;<br/>\t\t\tdo &lt;monsterAttack&gt;<br/>\t\t\twait &lt;Press any key to continue&#46;&#46;&#46;&gt;<br/>\t\t\tflag on &lt;monsterGone&gt;<br/>\t\t&#125;<br/>\t\telse &#123;<br/>\t\t\tdo &lt;playerAttack&gt;<br/>\t\t\twait &lt;Press any key to continue&#46;&#46;&#46;&gt;<br/>\t\t\tflag on &lt;playerGone&gt;<br/>\t\t&#125;<br/>\t&#125;<br/>\t<br/>end define<br/></code></pre><br/><br/>Now, it works like dream... against one enemy at a time. I want to be able to have the player be able to battle up to five different enemies at once, and have the option of choosing which enemy to attack. How the heck would I go about adapting my current code to handle that?<br/><br/>Here are the playerAttack and monsterAttack procedures if you want to see them for whatever reason.<br/><br/><pre><code><br/>define procedure &lt;monsterAttack&gt;<br/>\tif &#40; $objectproperty&#40;#enemy#; hp&#41;$ &lt;= 0 &#41; then &#123;<br/>\t\tdoaction &lt;#enemy#; die&gt;<br/>\t\tflag on &lt;battleOver&gt;<br/>\t\thide &lt;#enemy#&gt;<br/>\t&#125;<br/>\telse &#123;<br/>\t\tset numeric &lt;dam; $objectproperty&#40;#enemy#; str&#41;$ - #player&#58;def#&gt;<br/>\t\tif &#40; %dam% &lt; 0 &#41; then set numeric &lt;dam; 1&gt;<br/>\t\tset numeric &lt;newPlayerHp; #player&#58;hp# - %dam%&gt;<br/>\t\tproperty &lt;player; hp=%newPlayerHp%&gt;<br/>\t\tdoaction &lt;#enemy#; flavortext&gt;<br/>\t&#125;<br/>end define<br/></code></pre><br/><br/><pre><code><br/>define procedure &lt;playerAttack&gt;<br/>\tset numeric &lt;dam; #player&#58;str# - $objectproperty&#40;#enemy#; def&#41;$&gt;<br/>\tif &#40; %dam% &lt;= 0 &#41; then set numeric &lt;dam; 1&gt;<br/>\tset numeric &lt;newEnemyHp; $objectproperty&#40;#enemy#; hp&#41;$ - %dam%&gt;<br/>\tproperty &lt;#enemy#; hp=%newEnemyHp%&gt;<br/>\tdoaction &lt;player; flavortext&gt;<br/>end define<br/></code></pre>",
      "PostDate": "2005-07-29T16:55:59+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "6783",
      "UserId": 0,
      "Username": "GameBoy",
      "UserAvatar": null,
      "UserGravatar": "554e89a053350b96f686f324a6049e9d",
      "EditableText": "I haven't used ASL in a long time so this could be completely wrong, but you could try using an if statement if there is more than one #@enemy# in the room.  Then use a dialog box to select which enemy you want to battle against.\n\nYou will probably need to add something which counts how many attackable enemies are in the same room also.",
      "EditableFormat": "bbcode",
      "HTML": "I haven't used ASL in a long time so this could be completely wrong, but you could try using an if statement if there is more than one #@enemy# in the room.  Then use a dialog box to select which enemy you want to battle against.<br/><br/>You will probably need to add something which counts how many attackable enemies are in the same room also.",
      "PostDate": "2005-07-29T19:40:27+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "6786",
      "UserId": 0,
      "Username": "Starzie",
      "UserAvatar": null,
      "UserGravatar": "c20ce62fd6f06266df49d05867b620b8",
      "EditableText": "I suppose to count the enemies in the room I could use some kind of for statement. Like For every object in the room that is of type enemy (my attackables) increment a monsterCount var? Actually, doing that will allow me to get rid of my battle flags, and I can just end the combat when monsterCount hits zero. (I hate using flags because I forget them half-way through coding...  <!-- s:roll: --><img src=\"{SMILIES_PATH}/icon_rolleyes.gif\" alt=\":roll:\" title=\"Rolling Eyes\" /><!-- s:roll: --> )\n\nAnd in my first attempt of a battle system, I used a good deal of if statements to determine order of attack between the player and the monsters based on their spd stat, but there's just so many of them and in that system I had a cap of four attackables at once. I litterally had to check player vs. monster1 vs. monster2 vs. monster3 vs. monster4 every turn. What was frustrating about that, and ultimately made me kick it and start over, was it would either always make the highest spd go continually, or, when it got to the player's turn, it let the player go continually. I just couldn't figure out how to keep track of who had gone and who hadn't.",
      "EditableFormat": "bbcode",
      "HTML": "I suppose to count the enemies in the room I could use some kind of for statement. Like For every object in the room that is of type enemy (my attackables) increment a monsterCount var? Actually, doing that will allow me to get rid of my battle flags, and I can just end the combat when monsterCount hits zero. (I hate using flags because I forget them half-way through coding...  <!-- s:roll: --><img src=\"{SMILIES_PATH}/icon_rolleyes.gif\" alt=\":roll:\" title=\"Rolling Eyes\" /><!-- s:roll: --> )<br/><br/>And in my first attempt of a battle system, I used a good deal of if statements to determine order of attack between the player and the monsters based on their spd stat, but there's just so many of them and in that system I had a cap of four attackables at once. I litterally had to check player vs. monster1 vs. monster2 vs. monster3 vs. monster4 every turn. What was frustrating about that, and ultimately made me kick it and start over, was it would either always make the highest spd go continually, or, when it got to the player's turn, it let the player go continually. I just couldn't figure out how to keep track of who had gone and who hadn't.",
      "PostDate": "2005-07-29T23:02:29+01:00",
      "LastEditDate": null
    }
  ]
}
