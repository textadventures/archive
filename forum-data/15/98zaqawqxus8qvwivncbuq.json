{
  "Topic": {
    "TopicId": "98zaqawqxus8qvwivncbuq",
    "ForumId": "15",
    "Title": "The case of the book..in.. a bookcase",
    "LastUpdated": "2022-05-08T21:05:04.9620367Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "c8235190-9e13-474f-8c48-422b637544d6",
      "UserId": 420406,
      "Username": "Starrigger",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I would like to have a book in a bookcase, but the game automagicly wants to reverence the bookcase instead of the book when I do this whilst the book is still in the bookcase:\r\n```\r\n> Examine book\r\n\r\nThese bookshelves were probably very useful when they were first constructed.\r\n\r\nUnfortunately, the weight of years of unfulfilling and relentless service to their masters, the Readers, has taken its toll, it looks as if the shelves could collapse at any moment, not from just the burden of time but from their own weight. Fortunately they now hold a solitary worn book. To the shelve's relief and embarrassment.\r\n```\r\nor..\r\n```\r\n> Open book\r\n\r\nThe bookshelves can't be opened.\r\n```\r\nI can take the book, and once I do, all is right with the world.\r\n```\r\n> Examine book\r\n\r\nAh! the 'Joys of Four Color Printing' by I. C. Dotts\r\n\r\nI remember this, wasn't it on the best seller list for.. NEVER!?\r\n```\r\nhmmm\r\nSteve\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I would like to have a book in a bookcase, but the game automagicly wants to reverence the bookcase instead of the book when I do this whilst the book is still in the bookcase:</p>\n<pre><code>&gt; Examine book\n\nThese bookshelves were probably very useful when they were first constructed.\n\nUnfortunately, the weight of years of unfulfilling and relentless service to their masters, the Readers, has taken its toll, it looks as if the shelves could collapse at any moment, not from just the burden of time but from their own weight. Fortunately they now hold a solitary worn book. To the shelve's relief and embarrassment.\n</code></pre>\n<p>or..</p>\n<pre><code>&gt; Open book\n\nThe bookshelves can't be opened.\n</code></pre>\n<p>I can take the book, and once I do, all is right with the world.</p>\n<pre><code>&gt; Examine book\n\nAh! the 'Joys of Four Color Printing' by I. C. Dotts\n\nI remember this, wasn't it on the best seller list for.. NEVER!?\n</code></pre>\n<p>hmmm<br>\nSteve</p>\n\n",
      "PostDate": "2022-05-08T21:05:04.9620367Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1b710221-8804-4bd6-b8ca-35f2b12ec92b",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Set parserPriority on one or the other.\r\nhttps://github.com/ThePix/QuestJS/wiki/Attributes-for-items#parserpriority",
      "EditableFormat": "markdown",
      "HTML": "<p>Set parserPriority on one or the other.<br>\nhttps://github.com/ThePix/QuestJS/wiki/Attributes-for-items#parserpriority</p>\n\n",
      "PostDate": "2022-05-09T06:02:15.7145897Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "66bdd357-c0d7-4f1b-a319-cd27f0feeeb0",
      "UserId": 420406,
      "Username": "Starrigger",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "thanks for the point in the right direction.\r\nIt didn't seem to matter what I set it to in \"book\" ( I at one point, set it as high as 200)\r\nIt did work when I set it to -40 in \"bookshelves\"\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>thanks for the point in the right direction.<br>\nIt didn't seem to matter what I set it to in \"book\" ( I at one point, set it as high as 200)<br>\nIt did work when I set it to -40 in \"bookshelves\"</p>\n\n",
      "PostDate": "2022-05-09T09:09:58.9943928Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d682b456-d8a8-4111-bd93-568e9d9203a5",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You can use the PARSER command during play, and it will give you some indication of what is is considering and the scores for both commands and items. I would be interested to know why the book was not getting picked with a high parserPriority.",
      "EditableFormat": "markdown",
      "HTML": "<p>You can use the PARSER command during play, and it will give you some indication of what is is considering and the scores for both commands and items. I would be interested to know why the book was not getting picked with a high parserPriority.</p>\n\n",
      "PostDate": "2022-05-09T09:43:01.576106Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "15d6a212-a1bf-4c5d-94c4-9784dfb48b2a",
      "UserId": 420406,
      "Username": "Starrigger",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Interesting!  Cool tool.\r\n\r\nfor book set to 200:\r\n```\r\nP> Input string: Examine book\r\nP> ---------------------------------------------------------\r\nP> * Looking at candidate: Examine\r\nP> ..Base score: 10\r\nP> Now matching: book\r\nP> ..Looking for a match for: book (scope 1)\r\nP> -> Trying to match: book\r\nP> -> Considering: Columbus\r\nP> -> Considering: Rudy\r\nP> -> Considering: rumpled_trench_coat\r\nP> -> Considering: old_desk\r\nP> -> Considering: curtains\r\nP> -> Considering: detect_o_matic_3000\r\nP> -> Considering: bookshelves\r\nP> the player has used a string that matches the start of the alias, score length + 15\r\nP> bonus 20 as item has attribute examine\r\nP> bookshelves scores 39\r\nP> -> Considering: office\r\nP> ..Going with: bookshelves\r\nP> ...Adding to the score: 0\r\nP> Result score is: 12\r\nP> Candidate accepted!\r\nP> This is the one:Examine\r\nPARSER RESULT:\r\nInput text: undefined\r\nMatched command: Examine\r\nMatched regex: /^(?:examine|exam|ex|x) (.+)$/\r\nMatch score: 12\r\nObjects/texts (1):\r\n    Objects:bookshelves\r\n```\r\nit never drops to scope 2 and never sees 'book'\r\n\r\nwith bookshelves set to -40:\r\n```\r\nP> Input string: Examine book\r\nP> ---------------------------------------------------------\r\nP> * Looking at candidate: Examine\r\nP> ..Base score: 10\r\nP> Now matching: book\r\nP> ..Looking for a match for: book (scope 1)\r\nP> -> Trying to match: book\r\nP> -> Considering: Columbus\r\nP> -> Considering: Rudy\r\nP> -> Considering: rumpled_trench_coat\r\nP> -> Considering: old_desk\r\nP> -> Considering: curtains\r\nP> -> Considering: detect_o_matic_3000\r\nP> -> Considering: bookshelves\r\nP> the player has used a string that matches the start of the alias, score length + 15\r\nP> bonus 20 as item has attribute examine\r\nP> item.parserPriority is -40\r\nP> -> Considering: office\r\nP> Found no suitable objects\r\nP> ..Looking for a match for: book (scope 2)\r\nP> -> Trying to match: book\r\nP> -> Considering: Columbus\r\nP> -> Considering: Rudy\r\nP> -> Considering: rumpled_trench_coat\r\nP> -> Considering: old_desk\r\nP> -> Considering: older_drawer\r\nP> -> Considering: curtains\r\nP> -> Considering: detect_o_matic_3000\r\nP> -> Considering: bookshelves\r\nP> the player has used a string that matches the start of the alias, score length + 15\r\nP> bonus 20 as item has attribute examine\r\nP> item.parserPriority is -40\r\nP> -> Considering: book\r\nP> The player has used the exact alias, score 60\r\nP> bonus 20 as item has attribute examine\r\nP> book scores 80\r\nP> -> Considering: office\r\nP> ..Going with: book\r\nP> ...Adding to the score: 0\r\nP> Result score is: 11\r\nP> Candidate accepted!\r\nP> This is the one:Examine\r\nPARSER RESULT:\r\nInput text: undefined\r\nMatched command: Examine\r\nMatched regex: /^(?:examine|exam|ex|x) (.+)$/\r\nMatch score: 11\r\nObjects/texts (1):\r\n    Objects:book\r\n```\r\nit proceeds to check scope 2 and finds \"book\"",
      "EditableFormat": "markdown",
      "HTML": "<p>Interesting!  Cool tool.</p>\n<p>for book set to 200:</p>\n<pre><code>P&gt; Input string: Examine book\nP&gt; ---------------------------------------------------------\nP&gt; * Looking at candidate: Examine\nP&gt; ..Base score: 10\nP&gt; Now matching: book\nP&gt; ..Looking for a match for: book (scope 1)\nP&gt; -&gt; Trying to match: book\nP&gt; -&gt; Considering: Columbus\nP&gt; -&gt; Considering: Rudy\nP&gt; -&gt; Considering: rumpled_trench_coat\nP&gt; -&gt; Considering: old_desk\nP&gt; -&gt; Considering: curtains\nP&gt; -&gt; Considering: detect_o_matic_3000\nP&gt; -&gt; Considering: bookshelves\nP&gt; the player has used a string that matches the start of the alias, score length + 15\nP&gt; bonus 20 as item has attribute examine\nP&gt; bookshelves scores 39\nP&gt; -&gt; Considering: office\nP&gt; ..Going with: bookshelves\nP&gt; ...Adding to the score: 0\nP&gt; Result score is: 12\nP&gt; Candidate accepted!\nP&gt; This is the one:Examine\nPARSER RESULT:\nInput text: undefined\nMatched command: Examine\nMatched regex: /^(?:examine|exam|ex|x) (.+)$/\nMatch score: 12\nObjects/texts (1):\n    Objects:bookshelves\n</code></pre>\n<p>it never drops to scope 2 and never sees 'book'</p>\n<p>with bookshelves set to -40:</p>\n<pre><code>P&gt; Input string: Examine book\nP&gt; ---------------------------------------------------------\nP&gt; * Looking at candidate: Examine\nP&gt; ..Base score: 10\nP&gt; Now matching: book\nP&gt; ..Looking for a match for: book (scope 1)\nP&gt; -&gt; Trying to match: book\nP&gt; -&gt; Considering: Columbus\nP&gt; -&gt; Considering: Rudy\nP&gt; -&gt; Considering: rumpled_trench_coat\nP&gt; -&gt; Considering: old_desk\nP&gt; -&gt; Considering: curtains\nP&gt; -&gt; Considering: detect_o_matic_3000\nP&gt; -&gt; Considering: bookshelves\nP&gt; the player has used a string that matches the start of the alias, score length + 15\nP&gt; bonus 20 as item has attribute examine\nP&gt; item.parserPriority is -40\nP&gt; -&gt; Considering: office\nP&gt; Found no suitable objects\nP&gt; ..Looking for a match for: book (scope 2)\nP&gt; -&gt; Trying to match: book\nP&gt; -&gt; Considering: Columbus\nP&gt; -&gt; Considering: Rudy\nP&gt; -&gt; Considering: rumpled_trench_coat\nP&gt; -&gt; Considering: old_desk\nP&gt; -&gt; Considering: older_drawer\nP&gt; -&gt; Considering: curtains\nP&gt; -&gt; Considering: detect_o_matic_3000\nP&gt; -&gt; Considering: bookshelves\nP&gt; the player has used a string that matches the start of the alias, score length + 15\nP&gt; bonus 20 as item has attribute examine\nP&gt; item.parserPriority is -40\nP&gt; -&gt; Considering: book\nP&gt; The player has used the exact alias, score 60\nP&gt; bonus 20 as item has attribute examine\nP&gt; book scores 80\nP&gt; -&gt; Considering: office\nP&gt; ..Going with: book\nP&gt; ...Adding to the score: 0\nP&gt; Result score is: 11\nP&gt; Candidate accepted!\nP&gt; This is the one:Examine\nPARSER RESULT:\nInput text: undefined\nMatched command: Examine\nMatched regex: /^(?:examine|exam|ex|x) (.+)$/\nMatch score: 11\nObjects/texts (1):\n    Objects:book\n</code></pre>\n<p>it proceeds to check scope 2 and finds \"book\"</p>\n\n",
      "PostDate": "2022-05-09T14:32:12.3891123Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e166d0cc-5daa-42b8-ac76-d3d96e1b1a91",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The first scope is what is present (`scope.isPresent`), which is items that are held or at the location, but does not include items that are inside something that is here.\r\n\r\nIt may be possible to give the book a custom \"isAtLoc\" function that returns true for the parser if the location is the room, but otherwise only true if the location in the bookcase (unless the book is moved). Not sure what the other implications might be. But if changing parserPriority for the bookcase works okay, stick with that.",
      "EditableFormat": "markdown",
      "HTML": "<p>The first scope is what is present (<code>scope.isPresent</code>), which is items that are held or at the location, but does not include items that are inside something that is here.</p>\n<p>It may be possible to give the book a custom \"isAtLoc\" function that returns true for the parser if the location is the room, but otherwise only true if the location in the bookcase (unless the book is moved). Not sure what the other implications might be. But if changing parserPriority for the bookcase works okay, stick with that.</p>\n\n",
      "PostDate": "2022-05-09T16:04:15.79858Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
