{
  "Topic": {
    "TopicId": "igyq5rjxluyspii4uqvdra",
    "ForumId": "10",
    "Title": "Having trouble creating a message which includes an object link [Solved!]",
    "LastUpdated": "2018-06-20T16:48:07.8805673Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "ceb4506e-5f13-4696-8687-b3df3da0cc39",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I want to print a message where the captain (object) is a clickable hyperlink (with a Look At verb option). I have hyperlinks enabled for the game and they work fine elsewhere, but I can't seem to get this one message to show up correctly. I've tried:\r\n\r\n    msg (\"The vital sign sensors all indicate that {object:captain} is stable.\")\r\n    msg (\"The vital sign sensors all indicate that <object verbs=\\\"Look at/Examine\\\">Captain Picker</object> is stable.\")\r\n    captainObjDesc = FormatObjectList (\"The vital sign sensors all indicate that \", captain.parent, \"and\", \" is stable.\")\r\n    msg (captainObjDesc)\r\n\r\nBut all three approaches yield the same result:\r\n\r\n    The vital sign sensors all indicate that Captain Picker is stable.\r\n    The vital sign sensors all indicate that Captain Picker is stable.\r\n    The vital sign sensors all indicate that Captain Picker is stable.\r\n\r\nWhere Captain Picker is not show as a hyperlink...\r\n\r\nWhat am I doing wrong?",
      "EditableFormat": "markdown",
      "HTML": "<p>I want to print a message where the captain (object) is a clickable hyperlink (with a Look At verb option). I have hyperlinks enabled for the game and they work fine elsewhere, but I can't seem to get this one message to show up correctly. I've tried:</p>\n<pre><code>msg (\"The vital sign sensors all indicate that {object:captain} is stable.\")\nmsg (\"The vital sign sensors all indicate that &lt;object verbs=\\\"Look at/Examine\\\"&gt;Captain Picker&lt;/object&gt; is stable.\")\ncaptainObjDesc = FormatObjectList (\"The vital sign sensors all indicate that \", captain.parent, \"and\", \" is stable.\")\nmsg (captainObjDesc)\n</code></pre>\n<p>But all three approaches yield the same result:</p>\n<pre><code>The vital sign sensors all indicate that Captain Picker is stable.\nThe vital sign sensors all indicate that Captain Picker is stable.\nThe vital sign sensors all indicate that Captain Picker is stable.\n</code></pre>\n<p>Where Captain Picker is not show as a hyperlink...</p>\n<p>What am I doing wrong?</p>\n\n",
      "PostDate": "2018-06-20T16:48:07.8805673Z",
      "LastEditDate": "2018-06-25T00:09:06.3908067Z",
      "link": null
    },
    {
      "PostId": "38b52e0a-242a-4d86-9e0e-4bc98bdeaa04",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Do you have hyperlinks enabled for the game? The `{object:captain}` notation (which FormatObjectList outputs) only works if `game.enablehyperlinks` is true. (In the GUI, I think this is a tickbox on the `Display` tab of the game)\r\n\r\nIf you want to do it without setting the enablehyperlinks flag for some reason, you might be able to use something like:\r\n```\r\nmsg (\"The vital sign sensors all indicate that <a id=\\\"\" + ProcessTextCommand_GetNextLinkId() + \"\\\" class=\\\"cmdlink elementmenu\\\" data-elementid=\\\"captain\\\">Captain Picker</a> is stable.\")\r\n```\r\nI don't know if the link will work properly in this case; but it might.",
      "EditableFormat": "markdown",
      "HTML": "<p>Do you have hyperlinks enabled for the game? The <code>{object:captain}</code> notation (which FormatObjectList outputs) only works if <code>game.enablehyperlinks</code> is true. (In the GUI, I think this is a tickbox on the <code>Display</code> tab of the game)</p>\n<p>If you want to do it without setting the enablehyperlinks flag for some reason, you might be able to use something like:</p>\n<pre><code>msg (\"The vital sign sensors all indicate that &lt;a id=\\\"\" + ProcessTextCommand_GetNextLinkId() + \"\\\" class=\\\"cmdlink elementmenu\\\" data-elementid=\\\"captain\\\"&gt;Captain Picker&lt;/a&gt; is stable.\")\n</code></pre>\n<p>I don't know if the link will work properly in this case; but it might.</p>\n\n",
      "PostDate": "2018-06-20T19:26:54.4411597Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8c49eefe-99d8-4f15-8ef5-0542060c0ca5",
      "UserId": 362613,
      "Username": "Mr. Parser",
      "AvatarUrl": "https://i.imgur.com/Fz7sf1Pb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Is the ```captain``` object in the same room as the <span title=\"Player Character\" style=\"cursor:pointer;text-decoration:underline;\">PC</span> *AND* <a href=\"http://docs.textadventures.co.uk/quest/attributes/visible.html\" title=\"a boolean attribute. If set to false, the object is not displayed - the effect is the same as if the object’s parent is set to null.\">visible</a>?  \r\n\r\nIf not, the \"Captain Picker\" hyperlink(s) will not be active in your first and last ```msg()```.  \r\n\r\n---\r\nYour second ```msg()``` will never create a hyperlink.  You could use <span style=\"cursor:pointer;text-decoration:underline;\" href=\"http://textadventures.co.uk/forum/quest/topic/igyq5rjxluyspii4uqvdra/having-trouble-creating-a-message-which-includes-an-object-link#38b52e0a-242a-4d86-9e0e-4bc98bdeaa04\" title=\"which is VERY similar to the previous post by mrangel\">something like this</span> for the link ```<a style=\"color:Blue\" class=\"cmdlink elementmenu\" data-elementid=\"captain\" data-verbs=\"Look at\">Captain Picker</a>```, but this would still only work if the ```captain``` object were visible and in the same room as the player.",
      "EditableFormat": "markdown",
      "HTML": "<p>Is the <code>captain</code> object in the same room as the <span title=\"Player Character\" style=\"cursor: pointer; text-decoration: underline\">PC</span> <em>AND</em> <a href=\"http://docs.textadventures.co.uk/quest/attributes/visible.html\" title=\"a boolean attribute. If set to false, the object is not displayed - the effect is the same as if the object’s parent is set to null.\">visible</a>?</p>\n<p>If not, the \"Captain Picker\" hyperlink(s) will not be active in your first and last <code>msg()</code>.</p>\n<hr>\n<p>Your second <code>msg()</code> will never create a hyperlink.  You could use <span style=\"cursor: pointer; text-decoration: underline\" href=\"http://textadventures.co.uk/forum/quest/topic/igyq5rjxluyspii4uqvdra/having-trouble-creating-a-message-which-includes-an-object-link#38b52e0a-242a-4d86-9e0e-4bc98bdeaa04\" title=\"which is VERY similar to the previous post by mrangel\">something like this</span> for the link <code>&lt;a style=\"color:Blue\" class=\"cmdlink elementmenu\" data-elementid=\"captain\" data-verbs=\"Look at\"&gt;Captain Picker&lt;/a&gt;</code>, but this would still only work if the <code>captain</code> object were visible and in the same room as the player.</p>\n\n",
      "PostDate": "2018-06-20T20:05:33.8028716Z",
      "LastEditDate": "2018-06-20T20:09:15.6925733Z",
      "link": null
    },
    {
      "PostId": "12bcf50f-87e0-412b-b91e-93603d75225a",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yes, hyperlinks are enabled, I use them all over the place. \r\n\r\nThe object is set to visible, but it is inside an Openable/Closable container. I'm essentially trying to create a 'list children when looked at' script for the container. Maybe the fact that it is in the container and not directly in the room is the problem?\r\n\r\nI'm using Openable/Closable instead of a normal container because it was the only way I found to print a custom message when the player tries to open the container when I don't want them to succeed. I don't want to show \"You can't open it.\" or \"It is locked.\"\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Yes, hyperlinks are enabled, I use them all over the place.</p>\n<p>The object is set to visible, but it is inside an Openable/Closable container. I'm essentially trying to create a 'list children when looked at' script for the container. Maybe the fact that it is in the container and not directly in the room is the problem?</p>\n<p>I'm using Openable/Closable instead of a normal container because it was the only way I found to print a custom message when the player tries to open the container when I don't want them to succeed. I don't want to show \"You can't open it.\" or \"It is locked.\"</p>\n\n",
      "PostDate": "2018-06-21T02:21:14.2605864Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c03d3a54-3b69-4966-b28f-543b54a4988a",
      "UserId": 362613,
      "Username": "Mr. Parser",
      "AvatarUrl": "https://i.imgur.com/Fz7sf1Pb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> The object is set to visible, but it is inside an Openable/Closable container. \r\n\r\nIf that container is closed and not transparent, the ```captain``` object is *technically* visible, but Quest treats it as if it were not visible unless the container is open (or transparent).  \r\n\r\nThe player cannot interact with an object inside of a closed container, unless you add the object to scope (which I advise against).\r\n\r\nhttp://docs.textadventures.co.uk/quest/advanced_scope.html\r\n\r\n---\r\n> I'm using Openable/Closable instead of a normal container because it was the only way I found to print a custom message when the player tries to open the container when I don't want them to succeed. I don't want to show \"You can't open it.\" or \"It is locked.\"\r\n\r\nI advise against this, too (mostly), but you can modify the attribute ```openscript```, printing whatever message you desire.  Just make sure to modify ```isopen``` yourself when applicable!\r\n\r\n...and you can easily change the ```nokeymessage``` attribute from the GUI.\r\n\r\n\r\nHere is an example game:\r\n\r\n\r\n**You are in a room.**\r\nYou can see a captain holder and a key.\r\n\r\n\\> open captain holder\r\nThis is my custom LOCKED message!\r\n\r\n\\> take key\r\nYou pick it up.\r\n\r\n\\> unlock holder\r\nUnlocked.\r\n\r\n\\> l\r\nYou are in a room.\r\nYou can see a captain holder.\r\n\r\n\\> open holder\r\nThis is my custom \"CAN'T OPEN\" message!\r\n\r\n\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"captainholder\">\r\n    <gameid>5aeedd0b-27b3-498d-a2f5-ce461d6726d7</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"captain holder\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"container_closed\" />\r\n      <inherit name=\"container_lockable\" />\r\n      <feature_container />\r\n      <open />\r\n      <openscript type=\"script\">\r\n        if (not this.locked) {\r\n          msg (\"This is my custom \\\"CAN'T OPEN\\\" message!\")\r\n        }\r\n        else {\r\n          msg (\"This is my custom LOCKED message!\")\r\n        }\r\n      </openscript>\r\n      <keycount type=\"int\">1</keycount>\r\n      <nokeymessage>This is my custom \"CAN'T UNLOCK THIS\" message.</nokeymessage>\r\n      <key type=\"object\">key</key>\r\n      <take />\r\n      <autounlock type=\"boolean\">false</autounlock>\r\n      <autoopen type=\"boolean\">false</autoopen>\r\n      <listchildren />\r\n      <object name=\"captain\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"namedmale\" />\r\n        <alias>Captain Picker</alias>\r\n      </object>\r\n    </object>\r\n    <object name=\"key\">\r\n      <inherit name=\"editor_object\" />\r\n      <take />\r\n    </object>\r\n  </object>\r\n</asl>\r\n```\r\n\r\n---\r\nYou can never open the captain holder in this example, but you could add code to the ```openscript``` to handle it, OR change the ```openscript``` when a certain in-game event takes place.\r\n\r\n...and you will still have the issue with the captain's hyperlink when the container is closed and not transparent. \r\n\r\n---\r\nNOTE: If you make the container transparent or add the captain to the advanced scope script, you will be opening yourself up for more default messages which will print during play.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>The object is set to visible, but it is inside an Openable/Closable container.</p>\n</blockquote>\n<p>If that container is closed and not transparent, the <code>captain</code> object is <em>technically</em> visible, but Quest treats it as if it were not visible unless the container is open (or transparent).</p>\n<p>The player cannot interact with an object inside of a closed container, unless you add the object to scope (which I advise against).</p>\n<p>http://docs.textadventures.co.uk/quest/advanced_scope.html</p>\n<hr>\n<blockquote>\n<p>I'm using Openable/Closable instead of a normal container because it was the only way I found to print a custom message when the player tries to open the container when I don't want them to succeed. I don't want to show \"You can't open it.\" or \"It is locked.\"</p>\n</blockquote>\n<p>I advise against this, too (mostly), but you can modify the attribute <code>openscript</code>, printing whatever message you desire.  Just make sure to modify <code>isopen</code> yourself when applicable!</p>\n<p>...and you can easily change the <code>nokeymessage</code> attribute from the GUI.</p>\n<p>Here is an example game:</p>\n<p><strong>You are in a room.</strong><br>\nYou can see a captain holder and a key.</p>\n<p>&gt; open captain holder<br>\nThis is my custom LOCKED message!</p>\n<p>&gt; take key<br>\nYou pick it up.</p>\n<p>&gt; unlock holder<br>\nUnlocked.</p>\n<p>&gt; l<br>\nYou are in a room.<br>\nYou can see a captain holder.</p>\n<p>&gt; open holder<br>\nThis is my custom \"CAN'T OPEN\" message!</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"captainholder\"&gt;\n    &lt;gameid&gt;5aeedd0b-27b3-498d-a2f5-ce461d6726d7&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"captain holder\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"container_closed\" /&gt;\n      &lt;inherit name=\"container_lockable\" /&gt;\n      &lt;feature_container /&gt;\n      &lt;open /&gt;\n      &lt;openscript type=\"script\"&gt;\n        if (not this.locked) {\n          msg (\"This is my custom \\\"CAN'T OPEN\\\" message!\")\n        }\n        else {\n          msg (\"This is my custom LOCKED message!\")\n        }\n      &lt;/openscript&gt;\n      &lt;keycount type=\"int\"&gt;1&lt;/keycount&gt;\n      &lt;nokeymessage&gt;This is my custom \"CAN'T UNLOCK THIS\" message.&lt;/nokeymessage&gt;\n      &lt;key type=\"object\"&gt;key&lt;/key&gt;\n      &lt;take /&gt;\n      &lt;autounlock type=\"boolean\"&gt;false&lt;/autounlock&gt;\n      &lt;autoopen type=\"boolean\"&gt;false&lt;/autoopen&gt;\n      &lt;listchildren /&gt;\n      &lt;object name=\"captain\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"namedmale\" /&gt;\n        &lt;alias&gt;Captain Picker&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"key\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;take /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>You can never open the captain holder in this example, but you could add code to the <code>openscript</code> to handle it, OR change the <code>openscript</code> when a certain in-game event takes place.</p>\n<p>...and you will still have the issue with the captain's hyperlink when the container is closed and not transparent.</p>\n<hr>\n<p>NOTE: If you make the container transparent or add the captain to the advanced scope script, you will be opening yourself up for more default messages which will print during play.</p>\n\n",
      "PostDate": "2018-06-21T08:10:25.2736552Z",
      "LastEditDate": "2018-06-21T08:20:53.4990688Z",
      "link": null
    },
    {
      "PostId": "9da7e854-34c9-43ad-a7a0-9def11aa9985",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I was going to suggest taking the captain out of the container and making him scenery; or making the container transparent.",
      "EditableFormat": "markdown",
      "HTML": "<p>I was going to suggest taking the captain out of the container and making him scenery; or making the container transparent.</p>\n\n",
      "PostDate": "2018-06-21T08:14:48.9329556Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9d0f2ddd-46c9-4c60-9c3a-16ccace5c462",
      "UserId": 362613,
      "Username": "Mr. Parser",
      "AvatarUrl": "https://i.imgur.com/Fz7sf1Pb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I was going to suggest taking the captain out of the container and making him scenery\r\n\r\nThis is the best bet, IMHO.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I was going to suggest taking the captain out of the container and making him scenery</p>\n</blockquote>\n<p>This is the best bet, IMHO.</p>\n\n",
      "PostDate": "2018-06-21T08:21:47.2872831Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a157b211-d887-4693-ae69-e57415989186",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you for your help! \r\n\r\nIs the ```nokeymessage``` attribute for the entire game? I only want to change the message for this one container...\r\n\r\nFrom your example, I think changing ```openscript``` is what I was trying to achieve (the wrong way). It looks like that can be changed for just the one container? But I'm a bit confused as to _where_  I need to put the code. \r\n\r\nI changed the container type back to Closed Container, so that I get \"List children when object is looked at or opened\", which works fine. Now where do I configure the ```openscript``` (I'm using the web editor) to change the \"It is locked.\" message?\r\n\r\nI don't understand what making the captain into scenery would achieve... I want him in the container so that he can be seen inside (when the container is looked at) and then looked at himself, but not otherwise (until he comes out of the container later on). If he is scenery outside the container, he can't be looked at right?\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you for your help!</p>\n<p>Is the <code>nokeymessage</code> attribute for the entire game? I only want to change the message for this one container...</p>\n<p>From your example, I think changing <code>openscript</code> is what I was trying to achieve (the wrong way). It looks like that can be changed for just the one container? But I'm a bit confused as to <em>where</em>  I need to put the code.</p>\n<p>I changed the container type back to Closed Container, so that I get \"List children when object is looked at or opened\", which works fine. Now where do I configure the <code>openscript</code> (I'm using the web editor) to change the \"It is locked.\" message?</p>\n<p>I don't understand what making the captain into scenery would achieve... I want him in the container so that he can be seen inside (when the container is looked at) and then looked at himself, but not otherwise (until he comes out of the container later on). If he is scenery outside the container, he can't be looked at right?</p>\n\n",
      "PostDate": "2018-06-22T13:59:22.7847694Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e84964ed-e6d6-4ff9-892a-0658b1902b2d",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I've added an Initialisation Script for the captain's container (captain_pod), which looks like this:\r\n\r\n    captain_pod.openscript => {\r\n     if (not this.locked) {\r\n        msg (\"This is my custom \\\"CAN'T OPEN\\\" message!\")\r\n      } else {\r\n        msg (\"An error chimes sounds from the ship's computer.<br/>\\\"Life support at critical levels. Restore main power in order to revive additional crew members.\\\"\")\r\n      }\r\n    }\r\n\r\nThis seems to be working, although I have to do some more testing. \r\n\r\nDoes this look right?",
      "EditableFormat": "markdown",
      "HTML": "<p>I've added an Initialisation Script for the captain's container (captain_pod), which looks like this:</p>\n<pre><code>captain_pod.openscript =&gt; {\n if (not this.locked) {\n    msg (\"This is my custom \\\"CAN'T OPEN\\\" message!\")\n  } else {\n    msg (\"An error chimes sounds from the ship's computer.&lt;br/&gt;\\\"Life support at critical levels. Restore main power in order to revive additional crew members.\\\"\")\n  }\n}\n</code></pre>\n<p>This seems to be working, although I have to do some more testing.</p>\n<p>Does this look right?</p>\n\n",
      "PostDate": "2018-06-22T16:53:51.3890855Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d12dffa4-2702-4f88-9802-79b21d64b7da",
      "UserId": 352130,
      "Username": "Gizmodeus",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "After further testing, this is working! Thanks for your help!",
      "EditableFormat": "markdown",
      "HTML": "<p>After further testing, this is working! Thanks for your help!</p>\n\n",
      "PostDate": "2018-06-25T00:09:27.400433Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
