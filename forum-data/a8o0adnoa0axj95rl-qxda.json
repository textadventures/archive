{
  "Topic": {
    "TopicId": "a8o0adnoa0axj95rl-qxda",
    "ForumId": "10",
    "Title": "I Think \"AllRooms()\" Is Bugged!  [SOLVED BUT DEFAULT SETTING SHOULD BE CHANGED]",
    "LastUpdated": "2019-08-11T05:49:44.5559307Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "c068d4ba-5e50-454f-9470-dad98c3a5934",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "[Desktop TA Quest v5.8]\r\n\r\nI have a simple \"places\" command that prints out how many rooms are in the game by using the ```AllRooms()``` function to iterate through each room and tally them up.  There are 3 rooms in this bare-bones game, each denoted by the \"Object is a room\" checkmark.\r\n\r\nWhen the game is run FROM THE EDITOR, the \"places\" command works just fine -- \"3\" is printed.  This works in a new or restored game.\r\n\r\nHowever, when I PUBLISH the game and run it, the \"places\" command always prints \"1\"!  So I think somehow the ```AllRooms()``` function is bugged?!\r\n\r\n```\r\n<!--Saved by Quest 5.8.6809.15141-->\r\n<asl version=\"580\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"AllRoomsTest\">\r\n    <gameid>eb53263c-71d7-45d7-bc4a-83894f256e98</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2019</firstpublished>\r\n  </game>\r\n  <object name=\"room1\">\r\n    <inherit name=\"editor_room\" />\r\n    <isroom />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <exit alias=\"south\" to=\"room2\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"room2\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"north\" to=\"room1\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n    <exit alias=\"south\" to=\"room3\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"room3\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"north\" to=\"room2\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n  </object>\r\n  <command name=\"places\">\r\n    <pattern>p; places</pattern>\r\n    <script>\r\n      total = 0\r\n      foreach (place, AllRooms()) {\r\n        total = total + 1\r\n      }\r\n      msg (total)\r\n    </script>\r\n  </command>\r\n</asl>\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>[Desktop TA Quest v5.8]</p>\n<p>I have a simple \"places\" command that prints out how many rooms are in the game by using the <code>AllRooms()</code> function to iterate through each room and tally them up.  There are 3 rooms in this bare-bones game, each denoted by the \"Object is a room\" checkmark.</p>\n<p>When the game is run FROM THE EDITOR, the \"places\" command works just fine -- \"3\" is printed.  This works in a new or restored game.</p>\n<p>However, when I PUBLISH the game and run it, the \"places\" command always prints \"1\"!  So I think somehow the <code>AllRooms()</code> function is bugged?!</p>\n<pre><code>&lt;!--Saved by Quest 5.8.6809.15141--&gt;\n&lt;asl version=\"580\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"AllRoomsTest\"&gt;\n    &lt;gameid&gt;eb53263c-71d7-45d7-bc4a-83894f256e98&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2019&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room1\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;isroom /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"south\" to=\"room2\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room2\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"north\" to=\"room1\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"south\" to=\"room3\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room3\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"north\" to=\"room2\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;command name=\"places\"&gt;\n    &lt;pattern&gt;p; places&lt;/pattern&gt;\n    &lt;script&gt;\n      total = 0\n      foreach (place, AllRooms()) {\n        total = total + 1\n      }\n      msg (total)\n    &lt;/script&gt;\n  &lt;/command&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2019-08-11T05:49:44.5559307Z",
      "LastEditDate": "2019-08-11T15:58:33.2528218Z",
      "link": null
    },
    {
      "PostId": "86b3d890-c73d-4f3b-ab29-a997f8f572e0",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "UPDATE:\r\n\r\nI know what the problem is -- inheritance.  When I check and uncheck the ```isroom``` attribute for room2 and room3, the attribute is then sourced from the room itself, not from the default source.  Then the \"places\" command works in a published game!  I don't know why this isn't an issue in a non-published game though?\r\n\r\nI would still consider this a \"bug\", because you have to manually set every ```isroom``` attribute to be sourced from its room in order for ```AllRooms()``` to work right.  What if you have a hundred rooms in the game?",
      "EditableFormat": "markdown",
      "HTML": "<p>UPDATE:</p>\n<p>I know what the problem is -- inheritance.  When I check and uncheck the <code>isroom</code> attribute for room2 and room3, the attribute is then sourced from the room itself, not from the default source.  Then the \"places\" command works in a published game!  I don't know why this isn't an issue in a non-published game though?</p>\n<p>I would still consider this a \"bug\", because you have to manually set every <code>isroom</code> attribute to be sourced from its room in order for <code>AllRooms()</code> to work right.  What if you have a hundred rooms in the game?</p>\n\n",
      "PostDate": "2019-08-11T06:25:15.999975Z",
      "LastEditDate": "2019-08-11T06:30:07.0626065Z",
      "link": null
    },
    {
      "PostId": "be550c87-4fe3-4fe2-a45a-4f07a137ea92",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I don't know why this isn't an issue in a non-published game though?\r\n\r\nOh, because the ```editor_object``` type only works in the editor, not in a published game.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I don't know why this isn't an issue in a non-published game though?</p>\n</blockquote>\n<p>Oh, because the <code>editor_object</code> type only works in the editor, not in a published game.</p>\n\n",
      "PostDate": "2019-08-11T07:27:19.3477307Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "14770888-0b1c-403d-8306-0c6fb62e6dab",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "CONCLUSION:\r\n\r\n Whenever you create a new room, the room's ```isroom``` Boolean attribute (default is ```true```) should be inherited from ```defaultobject``` rather than ```editor_room```.  Otherwise the author will have to manually set this attribute to ```true``` for every room to get ```AllRooms()``` to work in a published game -- and how would they know to do that?",
      "EditableFormat": "markdown",
      "HTML": "<p>CONCLUSION:</p>\n<p>Whenever you create a new room, the room's <code>isroom</code> Boolean attribute (default is <code>true</code>) should be inherited from <code>defaultobject</code> rather than <code>editor_room</code>.  Otherwise the author will have to manually set this attribute to <code>true</code> for every room to get <code>AllRooms()</code> to work in a published game -- and how would they know to do that?</p>\n\n",
      "PostDate": "2019-08-11T16:04:36.4349061Z",
      "LastEditDate": "2019-08-11T16:07:16.4687808Z",
      "link": null
    },
    {
      "PostId": "fedac376-7f60-48b0-8214-de6b1548e8bd",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Whoops.\r\n\r\nMy mistake.\r\n\r\nThat is code that I submitted.  Sorry about that.\r\n\r\nI don't currently have a way to fix it, either.\r\n\r\nI wonder if ```isroom``` can be added to ```defaultobject``` with the value set to ```false```, then have ```editor_room``` set to ```true```. . .\r\n\r\nThat would probably have the same issue -- not working once the game is published, but it's the only fix I can theorize (and, again, I currently have no way to run Quest; so, I can't test anything).\r\n\r\nSorry again, everyone!\r\n\r\nIf it's any consolation, I am no longer submitting any Quest code (and I haven't since the last release).  So, the chances of me messing something up next time are nil.",
      "EditableFormat": "markdown",
      "HTML": "<p>Whoops.</p>\n<p>My mistake.</p>\n<p>That is code that I submitted.  Sorry about that.</p>\n<p>I don't currently have a way to fix it, either.</p>\n<p>I wonder if <code>isroom</code> can be added to <code>defaultobject</code> with the value set to <code>false</code>, then have <code>editor_room</code> set to <code>true</code>. . .</p>\n<p>That would probably have the same issue -- not working once the game is published, but it's the only fix I can theorize (and, again, I currently have no way to run Quest; so, I can't test anything).</p>\n<p>Sorry again, everyone!</p>\n<p>If it's any consolation, I am no longer submitting any Quest code (and I haven't since the last release).  So, the chances of me messing something up next time are nil.</p>\n\n",
      "PostDate": "2019-08-11T16:31:35.5884593Z",
      "LastEditDate": "2019-08-11T16:32:23.8462274Z",
      "link": null
    },
    {
      "PostId": "7a57fcfa-5b6d-4bfe-9280-4662b29a2385",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It's good to hear from you, KV!  Thanks for the reply!  You're always welcome to submit code!",
      "EditableFormat": "markdown",
      "HTML": "<p>It's good to hear from you, KV!  Thanks for the reply!  You're always welcome to submit code!</p>\n\n",
      "PostDate": "2019-08-11T16:38:07.1249493Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fba13e78-6708-4ccc-a418-5684b474599c",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello!\r\n\r\nI kind of maybe uninstalled Windows.  (Curse all that blasted, constant updating!)\r\n\r\nI am a Linux man, now.\r\n\r\n(...and I shall remain a Linux man until I can afford a Mac.  Bwahahahaha!)\r\n\r\nI tried to get Quest to successfully run under WINE for quite some time, but Quest simply needs an actual Windows environment.  That sucks because I cannot thrive in such an environment.\r\n\r\nSo, yeah . . .  No Windows means no way to really work with Quest.  I do appreciate the hospitality, though!\r\n\r\n---\r\nPS\r\n\r\nmrangel has no Windows and still really works with Quest, but I think the only reason he can do that is because he is a wizard.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello!</p>\n<p>I kind of maybe uninstalled Windows.  (Curse all that blasted, constant updating!)</p>\n<p>I am a Linux man, now.</p>\n<p>(...and I shall remain a Linux man until I can afford a Mac.  Bwahahahaha!)</p>\n<p>I tried to get Quest to successfully run under WINE for quite some time, but Quest simply needs an actual Windows environment.  That sucks because I cannot thrive in such an environment.</p>\n<p>So, yeah . . .  No Windows means no way to really work with Quest.  I do appreciate the hospitality, though!</p>\n<hr>\n<p>PS</p>\n<p>mrangel has no Windows and still really works with Quest, but I think the only reason he can do that is because he is a wizard.</p>\n\n",
      "PostDate": "2019-08-11T16:50:27.3024995Z",
      "LastEditDate": "2019-08-11T16:51:03.5054438Z",
      "link": null
    },
    {
      "PostId": "75998b96-6499-43bf-8f3d-c6e418c67a50",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "May you thrive unfettered in Linuxland!",
      "EditableFormat": "markdown",
      "HTML": "<p>May you thrive unfettered in Linuxland!</p>\n\n",
      "PostDate": "2019-08-11T17:00:46.5138957Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
