{
  "Topic": {
    "TopicId": "agw4j340ykovbbmmgue2tg",
    "ForumId": "10",
    "Title": "Scope issue for Summon [object] command ",
    "LastUpdated": "2020-04-30T03:57:40.4513737Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "6a4f9d34-8e01-469c-af32-bf32103de796",
      "UserId": 441165,
      "Username": "Durza",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi, so I'm somewhat new to Quest and am having trouble implementing a summon command.  I want the player to be able to summon any object in the game they have visited but am getting stuck when it comes to defining the scope.  If I specify a certain room as the scope I can summon the object (move it to to the room the player is currently in), but if I try ```AllObject()``` or \"world\" or any other scope and I try to summon an object that not in the room the player is in then I get an error because the player can't see the object.  It seems that I need a scope like  ```NotReachable()```, but I don't know how to.  Thanks!",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi, so I'm somewhat new to Quest and am having trouble implementing a summon command.  I want the player to be able to summon any object in the game they have visited but am getting stuck when it comes to defining the scope.  If I specify a certain room as the scope I can summon the object (move it to to the room the player is currently in), but if I try <code>AllObject()</code> or \"world\" or any other scope and I try to summon an object that not in the room the player is in then I get an error because the player can't see the object.  It seems that I need a scope like  <code>NotReachable()</code>, but I don't know how to.  Thanks!</p>\n\n",
      "PostDate": "2020-04-30T03:57:40.4513737Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ee905364-b8b1-4c09-8077-37b767e3f4c4",
      "UserId": 442719,
      "Username": "Phadion",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This may help: https://docs.textadventures.co.uk/quest/advanced_scope.html",
      "EditableFormat": "markdown",
      "HTML": "<p>This may help: https://docs.textadventures.co.uk/quest/advanced_scope.html</p>\n\n",
      "PostDate": "2020-04-30T04:20:33.0231246Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "41030488-4907-4e2b-b100-2281b04c8bd7",
      "UserId": 441165,
      "Username": "Durza",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks, Phaidon!  I already checked out that page first, but it's possible I'm missing something.  What I want is a scope like ```AllRooms()``` but I can't figure out how to do that.  The only way I see it working is manually adding every room.  ",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks, Phaidon!  I already checked out that page first, but it's possible I'm missing something.  What I want is a scope like <code>AllRooms()</code> but I can't figure out how to do that.  The only way I see it working is manually adding every room.</p>\n\n",
      "PostDate": "2020-04-30T04:44:44.4438974Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dbdcae32-3271-40ca-bde6-72196133ea27",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you want the player to be able to summon any object, you could use the scope `world` in a command's basic scope; that includes all objects. But this could lead to problems because that includes rooms and invisible objects.\r\n\r\n> I get an error because the player can't see the object\r\n\r\nWhere is this error coming from? The parser doesn't make any kind of checks like this.\r\n\r\nMost of the built in commands check that the object they're being used on is reachable (the exceptions being \"look at\", which only checks an object is visible, and \"use on\", which expects your own use script to make sure the objects are in sensible places).\r\n\r\nIf your \"summon\" command checks if the object is visible and generates an error message, then you should probably make it not do that.\r\n\r\nOtherwise, you have misunderstood the error message.\r\n\r\nCan you show us the code you are using, and the actual error message you are getting?",
      "EditableFormat": "markdown",
      "HTML": "<p>If you want the player to be able to summon any object, you could use the scope <code>world</code> in a command's basic scope; that includes all objects. But this could lead to problems because that includes rooms and invisible objects.</p>\n<blockquote>\n<p>I get an error because the player can't see the object</p>\n</blockquote>\n<p>Where is this error coming from? The parser doesn't make any kind of checks like this.</p>\n<p>Most of the built in commands check that the object they're being used on is reachable (the exceptions being \"look at\", which only checks an object is visible, and \"use on\", which expects your own use script to make sure the objects are in sensible places).</p>\n<p>If your \"summon\" command checks if the object is visible and generates an error message, then you should probably make it not do that.</p>\n<p>Otherwise, you have misunderstood the error message.</p>\n<p>Can you show us the code you are using, and the actual error message you are getting?</p>\n\n",
      "PostDate": "2020-04-30T10:15:55.8428025Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7b807005-aca1-4b11-af16-464ee7e3fab8",
      "UserId": 441165,
      "Username": "Durza",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi mrangel, I have already tried the world command because I thought that would do the job but it doesn't seem to.  Earlier I got the default game unresolved text \"I can't see that\", but now I am getting nothing unless I add my own unresolved text in which case that shows up.  Either way, the summoned object doesn't show up nor does the text that accompanies it so I'm assuming it's not working.\r\n\r\nHere's my code:\r\n    ```<command name=\"summon\">\r\n            <pattern>summon #object#</pattern>\r\n    <scope>\"world\"</scope>\r\n    <unresolved type=\"string\"></unresolved>\r\n    <script>\r\n      if (game.pov = Magen Player) {\r\n        MoveObjectHere (object)\r\n        msg (\"With a loud crack the object appears in the room\")\r\n      }\r\n    </script>\r\n </command>```\r\n\r\nI'm guessing I'm doing something wrong in the code and the scope is just fine then?\r\n\r\nThanks!",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi mrangel, I have already tried the world command because I thought that would do the job but it doesn't seem to.  Earlier I got the default game unresolved text \"I can't see that\", but now I am getting nothing unless I add my own unresolved text in which case that shows up.  Either way, the summoned object doesn't show up nor does the text that accompanies it so I'm assuming it's not working.</p>\n<p>Here's my code:<br>\n<code>&lt;command name=\"summon\"&gt; &lt;pattern&gt;summon #object#&lt;/pattern&gt; &lt;scope&gt;\"world\"&lt;/scope&gt; &lt;unresolved type=\"string\"&gt;&lt;/unresolved&gt; &lt;script&gt; if (game.pov = Magen Player) { MoveObjectHere (object) msg (\"With a loud crack the object appears in the room\") } &lt;/script&gt; &lt;/command&gt;</code></p>\n<p>I'm guessing I'm doing something wrong in the code and the scope is just fine then?</p>\n<p>Thanks!</p>\n\n",
      "PostDate": "2020-04-30T18:19:58.9802541Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4564af70-47ab-497f-b550-9e79b7b7f29c",
      "UserId": 442719,
      "Username": "Phadion",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Get rid of the quotes around the ``` world ``` scope. That should do it. Like this:\r\n```\r\n<command name=\"summon\"> \r\n     <pattern>summon #object#</pattern> \r\n     <scope>world</scope> \r\n     <unresolved type=\"string\"></unresolved> \r\n     <script> \r\n          if (game.pov = Magen Player) { \r\n             MoveObjectHere (object) \r\n             msg (\"With a loud crack the object appears in the room\") \r\n          }\r\n     </script> \r\n</command>\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Get rid of the quotes around the <code>world</code> scope. That should do it. Like this:</p>\n<pre><code>&lt;command name=\"summon\"&gt; \n     &lt;pattern&gt;summon #object#&lt;/pattern&gt; \n     &lt;scope&gt;world&lt;/scope&gt; \n     &lt;unresolved type=\"string\"&gt;&lt;/unresolved&gt; \n     &lt;script&gt; \n          if (game.pov = Magen Player) { \n             MoveObjectHere (object) \n             msg (\"With a loud crack the object appears in the room\") \n          }\n     &lt;/script&gt; \n&lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2020-04-30T18:44:38.2400891Z",
      "LastEditDate": "2020-04-30T19:04:28.6907019Z",
      "link": null
    },
    {
      "PostId": "b3e89f7c-fef9-4cf7-972e-2a1742adf8d2",
      "UserId": 442719,
      "Username": "Phadion",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Also, if you wanted to, you could specify the object in the message. Like this:\r\n```\r\n<command name=\"summon\"> \r\n     <pattern>summon #object#</pattern>\r\n     <scope>world</scope> <unresolved type=\"string\"></unresolved>\r\n     <script> \r\n          if (game.pov = Magen Player) { \r\n            MoveObjectHere (object) \r\n            msg (\"With a loud crack the \" + object.alias + \" appears in the room\") \r\n          } \r\n    </script> \r\n</command>\r\n```\r\nYou would have to make sure the object has a specified alias though, or else it would print, \"With a loud crack the  appears in the room\" If you're not working with aliases, you could just use ```object.name``` instead.\r\nHope this helps.",
      "EditableFormat": "markdown",
      "HTML": "<p>Also, if you wanted to, you could specify the object in the message. Like this:</p>\n<pre><code>&lt;command name=\"summon\"&gt; \n     &lt;pattern&gt;summon #object#&lt;/pattern&gt;\n     &lt;scope&gt;world&lt;/scope&gt; &lt;unresolved type=\"string\"&gt;&lt;/unresolved&gt;\n     &lt;script&gt; \n          if (game.pov = Magen Player) { \n            MoveObjectHere (object) \n            msg (\"With a loud crack the \" + object.alias + \" appears in the room\") \n          } \n    &lt;/script&gt; \n&lt;/command&gt;\n</code></pre>\n<p>You would have to make sure the object has a specified alias though, or else it would print, \"With a loud crack the  appears in the room\" If you're not working with aliases, you could just use <code>object.name</code> instead.<br>\nHope this helps.</p>\n\n",
      "PostDate": "2020-04-30T18:57:47.185656Z",
      "LastEditDate": "2020-04-30T19:01:36.9948621Z",
      "link": null
    },
    {
      "PostId": "76259ba3-4161-4029-b42b-07307e2da052",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yep, the quotes around \"world\" are the only error I see with that.\r\n\r\n> You would have to make sure the object has a specified alias though\r\n\r\nThat's why it's better to use `GetDisplayAlias (object)` than `object.alias`. GetDisplayAlias returns the alias if it has one, and object name otherwise.",
      "EditableFormat": "markdown",
      "HTML": "<p>Yep, the quotes around \"world\" are the only error I see with that.</p>\n<blockquote>\n<p>You would have to make sure the object has a specified alias though</p>\n</blockquote>\n<p>That's why it's better to use <code>GetDisplayAlias (object)</code> than <code>object.alias</code>. GetDisplayAlias returns the alias if it has one, and object name otherwise.</p>\n\n",
      "PostDate": "2020-04-30T19:18:54.1174795Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "77dad411-8781-42b6-ab7b-e016f2907f62",
      "UserId": 441165,
      "Username": "Durza",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Cool, working perfectly now, thanks a lot!  Syntax is so annoying lol.",
      "EditableFormat": "markdown",
      "HTML": "<p>Cool, working perfectly now, thanks a lot!  Syntax is so annoying lol.</p>\n\n",
      "PostDate": "2020-04-30T23:56:45.2214078Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
