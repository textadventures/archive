{
  "Topic": {
    "TopicId": "6282",
    "ForumId": "10",
    "Title": "Using Quest CombatLib, (The Pixie's)",
    "LastUpdated": "2016-05-08T20:45:01+01:00",
    "ReplyCount": 5
  },
  "Posts": [
    {
      "PostId": "42567",
      "UserId": 0,
      "Username": "Xcrossovers",
      "UserAvatar": null,
      "UserGravatar": "688cc177a0afee8a7496030f80f35817",
      "EditableText": "I have had some problems with the combat libraries i recieved from The Pixie, I will list my problems, and any help with these will be greatly appreciated.\n\n1. Using healing potions.\nWhen using a healing potion in-game hp does not change, i am not sure if i need to input a value for the health given by the potion or if this is just bugged.\n\n2. Leveling the player.\nI would like to allow the player to gain exp after killing a monster, but the library states that it does not track exp, so how could i go about adding an exp tracking, and leveling system?\n\nThese are the only questions i have as of now, any help from the coding pro's on this forum would be great.\n\nHere is a link to the Combat Library i am currently using in case you need to download it: [url:28p3lrsd]http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=18&amp;t=4886[/url:28p3lrsd]",
      "EditableFormat": "bbcode",
      "HTML": "I have had some problems with the combat libraries i recieved from The Pixie, I will list my problems, and any help with these will be greatly appreciated.<br/><br/>1. Using healing potions.<br/>When using a healing potion in-game hp does not change, i am not sure if i need to input a value for the health given by the potion or if this is just bugged.<br/><br/>2. Leveling the player.<br/>I would like to allow the player to gain exp after killing a monster, but the library states that it does not track exp, so how could i go about adding an exp tracking, and leveling system?<br/><br/>These are the only questions i have as of now, any help from the coding pro's on this forum would be great.<br/><br/>Here is a link to the Combat Library i am currently using in case you need to download it: <a href=\"http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=18&amp;t=4886\" rel=\"nofollow\">http&#58;//forum&#46;textadventures&#46;co&#46;uk/viewtopic&#46;php?f=18&amp;t=4886</a>",
      "PostDate": "2016-04-30T20:08:14+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42568",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "I don't know Pixie's Combat Library (haven't had the time to look at it yet), but maybe I can be of some help...\n\nyou can't just add a library file to your game, you need your game to have (and match up the names/labels too) all the required stuff that the library needs, implemented in the game. Think of most library files as just &quot;patches, xpacs, or add-ons&quot; to your own game, adding/building-on/in more stuff to it only, that is why the game has to be set up (and matched up) to work with the library (or vice-versa: the library has to be set up, and matched up, to work with your game). For example: if you created a 'life' Integer Attribute on/for your player in your game, but the library uses a 'hp' Integer Attribute for the player, you got a mismatch of named/labeled Attributes (life =/= hp), when they're suppose to be the same Integer Attribute for the player.\n\n1. if it's not an error with the library, you likely (if you're new to quest and/or programming) need to toggle on the built-in 'health' Attribute/system or create your own 'health/life/hp/whatever' Integer (int) Attribute/ystem (not sure what Pixie's library uses): if your player has no 'health/life/hp' Integer Attribute, thenn the health/life/hp potions and their 'health/life/hp' Integer Attribute can't be adding their value-amounts to your player's 'health/life/hp' value-amount:\n\nthe how the 'health/life/hp' potion (in this example, it's a +50 life potion) Object's Verb's scripting should look (using my own Attribute names/labels), but you can use whatever you want for your names/labels for your Attributes):\n\nplayer.current_life = player.current_life + 50\n\nin code, in ~full, a simple sample example:\n\n[code:362y17p6]&lt;object name=&quot;player&quot;&gt;\n  &lt;attr name=&quot;current_life&quot; type=&quot;int&quot;&gt;500&lt;/attr&gt;\n  &lt;attr name=&quot;maximum_life&quot; type=999&lt;/attr&gt;\n  &lt;attr name=&quot;changedcurrent_life&quot; type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n    if (player&#46;current_life &lt;=0) {\n      msg (&quot;You're dead or you've died or you were killed&#46;&quot;)\n      msg (&quot;GAME OVER&quot;)\n      finish \n    } else if (player&#46;current_life &gt; player&#46;maximum_life) {\n      player&#46;current_life = player&#46;maximum_life\n    }\n  &#93;&#93;&gt;&lt;/attr&gt;\n&lt;/object&gt;\n\n&lt;object name=&quot;life_50_potion&quot;&gt;\n  &lt;attr name=&quot;alias&quot; type=&quot;string&quot;&gt;life potion&lt;/attr&gt;\n  &lt;attr name=&quot;drink&quot; type=&quot;script&quot;&gt;\n    player&#46;current_life = player&#46;current_life + 50\n  &lt;/attr&gt;\n  &lt;attr name=&quot;displayverbs&quot; type=&quot;simplestringlist&quot;&gt;look; take; drink&lt;/attr&gt;\n  &lt;attr name=&quot;inventoryverbs&quot; type=&quot;simplestringlist&quot;&gt;look; drop; drink&lt;/attr&gt;\n&lt;/object&gt;\n\n&lt;verb&gt;\n  &lt;property&gt;drink&lt;/property&gt;\n  &lt;pattern&gt;drink&lt;/pattern&gt;\n  &lt;defaultexpression&gt;You can't drink that&#46;&lt;/defaultexpression&gt;\n&lt;/verb&gt;[/code:362y17p6]\n\nso, if you never either: created/added a 'life/health/hp' Integer Attribute on the player or toggled on the built-in 'health' Attribute:\n\n________ = _________ + 50\n\nobviously, you got an error or no health/life/hp increase, as you're missing most of the script to do it ...\n\n2. aside from creating an 'experience' and 'level' Integer (int) Attributes, here's a formula-code that I like for handling leveling up (this is just for level increasing, not stat choosing/raising):\n\n[code:362y17p6]&lt;function name=&quot;leveling_function&quot;&gt;\n  if (player&#46;current_experience &gt;= player&#46;current_level * 100 + 100) {\n    player&#46;current_experience = player&#46;current_experience - (player&#46;current_level * 100 + 100)\n    player&#46;current_level = player&#46;current_level + 1\n    leveling_function\n  }\n&lt;/function&gt;[/code:362y17p6]\n\nhere's how it does the leveling in game:\n\nyour current level ~ total experience needed for next level\n\n0 ~ 100\n(your experience - 100)\n1 ~ 200\n(your experience - 200)\n2 ~ 300\n(your experience - 300)\n3 ~ 400\n(your experience - 400)\netc etc etc\n\nin other words, each new level requires +100 more experience than the last level did (however, this doesn't mean you'll be leveling up every +100 experience you get, lol, as the amount of experience you needed for that level is subtracted from your experience: so, only your extra/remaining experience carries over for the next level)\n\nso, with the code formula, it works like this:\n\nsay you kill a monster and it gives you 100 experience, that would increase your level from 0 to 1, and it subtracts 100 from your experience (100), thus having you be at 0 experience (100-100), needing +200 experience for level 2\n\n(starting over from level 0, not continued from above example)\nsay you kill a monster and it gives you 400 experience, that would increase your level from 0 to level 2, leaving you with only 100 experience left, requiring +200 experience for level 3: 400 - 100 = 300 experience (you're level 1 now) - 200 experience (you're level 2 now) = 100 experience left (you need +200 more experience to reach level 3)\n\n(starting over from level 0, not continued from above examples)\nsay you kill a monster and it gives you 600 experience, that would increase your level from 0 to level 3, leaving you with only 0 experience left, requiring +400 experience for level 4: 600 - 100 = 500 experience (you're level 1 now) - 200 experience (you're level 2 now) = 300 experience - 300 experience (you're now level 3) = 0 experience (you need +400 experience for level 4)\n\nthis formula works for whatever level you're at, I just used level 0 to explain it\n\nI like this formula, as it's a very reasonable needed experience incrementing for next level, not too much much and not too little, for me, just perfect.\n\n----------------\n\nhere's a link that explains Attributes and the 'if' Script&#058;\n\n<!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=18&amp;t=5559\">viewtopic.php?f=18&amp;t=5559</a><!-- l -->\n\nask if you need any help or explanation of anything.",
      "EditableFormat": "bbcode",
      "HTML": "I don't know Pixie's Combat Library (haven't had the time to look at it yet), but maybe I can be of some help...<br/><br/>you can't just add a library file to your game, you need your game to have (and match up the names/labels too) all the required stuff that the library needs, implemented in the game. Think of most library files as just &quot;patches, xpacs, or add-ons&quot; to your own game, adding/building-on/in more stuff to it only, that is why the game has to be set up (and matched up) to work with the library (or vice-versa: the library has to be set up, and matched up, to work with your game). For example: if you created a 'life' Integer Attribute on/for your player in your game, but the library uses a 'hp' Integer Attribute for the player, you got a mismatch of named/labeled Attributes (life =/= hp), when they're suppose to be the same Integer Attribute for the player.<br/><br/>1. if it's not an error with the library, you likely (if you're new to quest and/or programming) need to toggle on the built-in 'health' Attribute/system or create your own 'health/life/hp/whatever' Integer (int) Attribute/ystem (not sure what Pixie's library uses): if your player has no 'health/life/hp' Integer Attribute, thenn the health/life/hp potions and their 'health/life/hp' Integer Attribute can't be adding their value-amounts to your player's 'health/life/hp' value-amount:<br/><br/>the how the 'health/life/hp' potion (in this example, it's a +50 life potion) Object's Verb's scripting should look (using my own Attribute names/labels), but you can use whatever you want for your names/labels for your Attributes):<br/><br/>player.current_life = player.current_life + 50<br/><br/>in code, in ~full, a simple sample example:<br/><br/><pre><code>&lt;object name=&quot;player&quot;&gt;<br/>  &lt;attr name=&quot;current_life&quot; type=&quot;int&quot;&gt;500&lt;/attr&gt;<br/>  &lt;attr name=&quot;maximum_life&quot; type=999&lt;/attr&gt;<br/>  &lt;attr name=&quot;changedcurrent_life&quot; type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>    if (player&#46;current_life &lt;=0) {<br/>      msg (&quot;You're dead or you've died or you were killed&#46;&quot;)<br/>      msg (&quot;GAME OVER&quot;)<br/>      finish <br/>    } else if (player&#46;current_life &gt; player&#46;maximum_life) {<br/>      player&#46;current_life = player&#46;maximum_life<br/>    }<br/>  &#93;&#93;&gt;&lt;/attr&gt;<br/>&lt;/object&gt;<br/><br/>&lt;object name=&quot;life_50_potion&quot;&gt;<br/>  &lt;attr name=&quot;alias&quot; type=&quot;string&quot;&gt;life potion&lt;/attr&gt;<br/>  &lt;attr name=&quot;drink&quot; type=&quot;script&quot;&gt;<br/>    player&#46;current_life = player&#46;current_life + 50<br/>  &lt;/attr&gt;<br/>  &lt;attr name=&quot;displayverbs&quot; type=&quot;simplestringlist&quot;&gt;look; take; drink&lt;/attr&gt;<br/>  &lt;attr name=&quot;inventoryverbs&quot; type=&quot;simplestringlist&quot;&gt;look; drop; drink&lt;/attr&gt;<br/>&lt;/object&gt;<br/><br/>&lt;verb&gt;<br/>  &lt;property&gt;drink&lt;/property&gt;<br/>  &lt;pattern&gt;drink&lt;/pattern&gt;<br/>  &lt;defaultexpression&gt;You can't drink that&#46;&lt;/defaultexpression&gt;<br/>&lt;/verb&gt;</code></pre><br/><br/>so, if you never either: created/added a 'life/health/hp' Integer Attribute on the player or toggled on the built-in 'health' Attribute:<br/><br/>________ = _________ + 50<br/><br/>obviously, you got an error or no health/life/hp increase, as you're missing most of the script to do it ...<br/><br/>2. aside from creating an 'experience' and 'level' Integer (int) Attributes, here's a formula-code that I like for handling leveling up (this is just for level increasing, not stat choosing/raising):<br/><br/><pre><code>&lt;function name=&quot;leveling_function&quot;&gt;<br/>  if (player&#46;current_experience &gt;= player&#46;current_level * 100 + 100) {<br/>    player&#46;current_experience = player&#46;current_experience - (player&#46;current_level * 100 + 100)<br/>    player&#46;current_level = player&#46;current_level + 1<br/>    leveling_function<br/>  }<br/>&lt;/function&gt;</code></pre><br/><br/>here's how it does the leveling in game:<br/><br/>your current level ~ total experience needed for next level<br/><br/>0 ~ 100<br/>(your experience - 100)<br/>1 ~ 200<br/>(your experience - 200)<br/>2 ~ 300<br/>(your experience - 300)<br/>3 ~ 400<br/>(your experience - 400)<br/>etc etc etc<br/><br/>in other words, each new level requires +100 more experience than the last level did (however, this doesn't mean you'll be leveling up every +100 experience you get, lol, as the amount of experience you needed for that level is subtracted from your experience: so, only your extra/remaining experience carries over for the next level)<br/><br/>so, with the code formula, it works like this:<br/><br/>say you kill a monster and it gives you 100 experience, that would increase your level from 0 to 1, and it subtracts 100 from your experience (100), thus having you be at 0 experience (100-100), needing +200 experience for level 2<br/><br/>(starting over from level 0, not continued from above example)<br/>say you kill a monster and it gives you 400 experience, that would increase your level from 0 to level 2, leaving you with only 100 experience left, requiring +200 experience for level 3: 400 - 100 = 300 experience (you're level 1 now) - 200 experience (you're level 2 now) = 100 experience left (you need +200 more experience to reach level 3)<br/><br/>(starting over from level 0, not continued from above examples)<br/>say you kill a monster and it gives you 600 experience, that would increase your level from 0 to level 3, leaving you with only 0 experience left, requiring +400 experience for level 4: 600 - 100 = 500 experience (you're level 1 now) - 200 experience (you're level 2 now) = 300 experience - 300 experience (you're now level 3) = 0 experience (you need +400 experience for level 4)<br/><br/>this formula works for whatever level you're at, I just used level 0 to explain it<br/><br/>I like this formula, as it's a very reasonable needed experience incrementing for next level, not too much much and not too little, for me, just perfect.<br/><br/>----------------<br/><br/>here's a link that explains Attributes and the 'if' Script&#058;<br/><br/><!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=18&amp;t=5559\">viewtopic.php?f=18&amp;t=5559</a><!-- l --><br/><br/>ask if you need any help or explanation of anything.",
      "PostDate": "2016-04-30T20:49:05+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42569",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "1. I am not aware of any issues with healing potions. It should just heal you up to max. Do you get the message &quot;You drink the healing potion, and suddenly you feel fine.&quot;? Have you set it to be a healing potion rather than a potion? On the combat tab, the only thing to set besides the type should be the cost; is that what you see?\n\n2. Probably the best way to do XP would be to edit the &quot;makedead&quot; script in the file CombatTypes.xml. There is a bit like this:\n[code:1pkm1mnm]    &lt;makedead type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      if (not this&#46;dead) {\n        this&#46;alias = GetDisplayAlias (this) + &quot; (dead)&quot;\n        if (HasString (this, &quot;lookwhendead&quot;)) {[/code:1pkm1mnm]\nInsert a new line it so it looks like this:\n[code:1pkm1mnm]    &lt;makedead type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;\n      if (not this&#46;dead) {\n         player&#46;xp = player&#46;xp + this&#46;xp\n        this&#46;alias = GetDisplayAlias (this) + &quot; (dead)&quot;\n        if (HasString (this, &quot;lookwhendead&quot;)) {[/code:1pkm1mnm]\nGive an attribute called &quot;xp&quot; to the player and every monster.",
      "EditableFormat": "bbcode",
      "HTML": "1. I am not aware of any issues with healing potions. It should just heal you up to max. Do you get the message &quot;You drink the healing potion, and suddenly you feel fine.&quot;? Have you set it to be a healing potion rather than a potion? On the combat tab, the only thing to set besides the type should be the cost; is that what you see?<br/><br/>2. Probably the best way to do XP would be to edit the &quot;makedead&quot; script in the file CombatTypes.xml. There is a bit like this:<br/><pre><code>    &lt;makedead type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      if (not this&#46;dead) {<br/>        this&#46;alias = GetDisplayAlias (this) + &quot; (dead)&quot;<br/>        if (HasString (this, &quot;lookwhendead&quot;)) {</code></pre><br/>Insert a new line it so it looks like this:<br/><pre><code>    &lt;makedead type=&quot;script&quot;&gt;&lt;!&#91;CDATA&#91;<br/>      if (not this&#46;dead) {<br/>         player&#46;xp = player&#46;xp + this&#46;xp<br/>        this&#46;alias = GetDisplayAlias (this) + &quot; (dead)&quot;<br/>        if (HasString (this, &quot;lookwhendead&quot;)) {</code></pre><br/>Give an attribute called &quot;xp&quot; to the player and every monster.",
      "PostDate": "2016-04-30T21:52:04+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42590",
      "UserId": 0,
      "Username": "Xcrossovers",
      "UserAvatar": null,
      "UserGravatar": "688cc177a0afee8a7496030f80f35817",
      "EditableText": "1. Yes they are set to healing potions, and the message does dislplay after drinking them, however the hits do not increase. \nP.S. I have not edited the code for them at all. Edit: After closer inspection i found that the hp does change, but the hits are not updated until i am hit again by another monster ex. I get hit for 2 damage 28/30 hits left, drink healing potion, get hit for 3 damage 27/30 hits, so it is healing me its just not updating the ui till after i get hit again.\n\n2. I inserted the code as you suggested, but as is nothing seems to happen, i have added the attributes, but the experience, and level still do not change after killing a monster, is there more i should add or just this? edit: I have gotten xp to work, but the character will not level up, it got to the point where i had 100198 xp and still had no level. Edit: the game adds the value of the xp behind the previous xp. Ex. 1+1=11.\n\nmaybe im just missing something, but i am pretty sure ive done everything you asked to the letter.",
      "EditableFormat": "bbcode",
      "HTML": "1. Yes they are set to healing potions, and the message does dislplay after drinking them, however the hits do not increase. <br/>P.S. I have not edited the code for them at all. Edit: After closer inspection i found that the hp does change, but the hits are not updated until i am hit again by another monster ex. I get hit for 2 damage 28/30 hits left, drink healing potion, get hit for 3 damage 27/30 hits, so it is healing me its just not updating the ui till after i get hit again.<br/><br/>2. I inserted the code as you suggested, but as is nothing seems to happen, i have added the attributes, but the experience, and level still do not change after killing a monster, is there more i should add or just this? edit: I have gotten xp to work, but the character will not level up, it got to the point where i had 100198 xp and still had no level. Edit: the game adds the value of the xp behind the previous xp. Ex. 1+1=11.<br/><br/>maybe im just missing something, but i am pretty sure ive done everything you asked to the letter.",
      "PostDate": "2016-05-01T22:11:45+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42681",
      "UserId": 0,
      "Username": "Xcrossovers",
      "UserAvatar": null,
      "UserGravatar": "688cc177a0afee8a7496030f80f35817",
      "EditableText": "Nevermind i decided to go with the script you gave in the notes, but i edited the makedead script to go something like this for each individual &quot;Boss monsters&quot;\n\n[code:veada2so] firsttime {\n  CancelSpell\n  player&#46;maxpoints = player&#46;maxpoints + 5\n  LevelUp\n  msg (&quot;YOU LEVELED UP!!!&quot;)\n} [/code:veada2so]\n\nso that if the player faces a higher level monster before killing this monster when they come back they can still gain the &quot;level&quot; from this monster.\nI doubt firsttime was necessary as you can kill a monster only once, but why not amirite? i decided to get rid of xp alltogether, as it was too complicated for my tiny brain.    <!-- s:roll: --><img src=\"{SMILIES_PATH}/icon_rolleyes.gif\" alt=\":roll:\" title=\"Rolling Eyes\" /><!-- s:roll: --> while this means ill have to edit every boss monsters makedead script, at least i can &quot;level&quot; the player without them gaining levels for simply walking around\n\nthanks for the help.",
      "EditableFormat": "bbcode",
      "HTML": "Nevermind i decided to go with the script you gave in the notes, but i edited the makedead script to go something like this for each individual &quot;Boss monsters&quot;<br/><br/><pre><code> firsttime {<br/>  CancelSpell<br/>  player&#46;maxpoints = player&#46;maxpoints + 5<br/>  LevelUp<br/>  msg (&quot;YOU LEVELED UP!!!&quot;)<br/>} </code></pre><br/><br/>so that if the player faces a higher level monster before killing this monster when they come back they can still gain the &quot;level&quot; from this monster.<br/>I doubt firsttime was necessary as you can kill a monster only once, but why not amirite? i decided to get rid of xp alltogether, as it was too complicated for my tiny brain.    <!-- s:roll: --><img src=\"{SMILIES_PATH}/icon_rolleyes.gif\" alt=\":roll:\" title=\"Rolling Eyes\" /><!-- s:roll: --> while this means ill have to edit every boss monsters makedead script, at least i can &quot;level&quot; the player without them gaining levels for simply walking around<br/><br/>thanks for the help.",
      "PostDate": "2016-05-08T19:15:40+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42686",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "Looking good.\n\nYou could make a boss type that inherits from monster, and have the new makedead script there. That is the beauty of types.",
      "EditableFormat": "bbcode",
      "HTML": "Looking good.<br/><br/>You could make a boss type that inherits from monster, and have the new makedead script there. That is the beauty of types.",
      "PostDate": "2016-05-08T20:45:01+01:00",
      "LastEditDate": null
    }
  ]
}
