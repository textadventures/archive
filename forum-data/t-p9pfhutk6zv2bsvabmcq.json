{
  "Topic": {
    "TopicId": "t-p9pfhutk6zv2bsvabmcq",
    "ForumId": "10",
    "Title": "saving the game curiosty",
    "LastUpdated": "2017-11-19T19:49:05.6758923Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "94ccd396-eae1-4cc4-8f3b-7aaa927c5299",
      "UserId": 311632,
      "Username": "Anthony the tiger ",
      "AvatarUrl": "http://i.imgur.com/41t3IZYb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I am curious if there is a command that can detect when the player saves the game. For example, I have an npc I want to tell the player that they have successfully saved the game. Like maybe the command would be like if game.saved = true then print message: Congrats you saved the game.  I am also wondering if I can make an area or specific place where the player can't save the game. I am not quite sure what that code would look like and I would like some help on this. ",
      "EditableFormat": "markdown",
      "HTML": "<p>I am curious if there is a command that can detect when the player saves the game. For example, I have an npc I want to tell the player that they have successfully saved the game. Like maybe the command would be like if game.saved = true then print message: Congrats you saved the game.  I am also wondering if I can make an area or specific place where the player can't save the game. I am not quite sure what that code would look like and I would like some help on this.</p>\n\n",
      "PostDate": "2017-11-19T19:49:05.6758923Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "383fa202-24ef-4ebb-b7f8-290bb833288f",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello,\r\n\r\n(You opened a can of worms!)\r\n\r\nYou can create your own save command.  Here's one of mine:\r\n\r\n```\r\n\r\ngame.notarealturn = true\r\nJS.playerCheck ()\r\nSetTimeout (2) {\r\n  JS.playerCheck ()\r\n  SetTimeout (2) {\r\n    JS.eval (\"addText (\\\"Save time: \\\"+Date()+\\\"<br/>\\\");\")\r\n    if (not game.online) {\r\n      request (RequestSave, \"\")\r\n    }\r\n    else {\r\n      JS.setInterfaceString (\"TypeHereLabel\", \"Save in progress...\")\r\n      msg (\"If you are playing online, your game may behave erratically when you resume play.<br/>This game behaves best when played using the desktop version of Quest 5.7.1.<br/>\")\r\n      JS.scrollToEnd ()\r\n      JS.saveGame ()\r\n      JS.afterSave ()\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n---\r\nThe game saves differently when playing online.\r\n\r\nLooking through Quest's source code, I found the JS that checked whether the player was online, and I used that to make this function:\r\n\r\n```\r\n//This checks for the web player, setting game.online to true or false\r\nvar bool = false;\r\nfunction playerCheck() {\r\n  if (webPlayer) {\r\n    //addText(\"<br/>[Game running in Online player.]\");\r\n    bool = true;\r\n    ASLEvent(\"setOnline\", bool);\r\n  }\r\n  else {\r\n    //addText(\"<br/>[Game running in Desktop player.]\");\r\n    bool = false;\r\n    ASLEvent(\"setOnline\", bool);\r\n  }\r\n}\r\n```\r\n\r\n...and I created a function in the game to handle that ASLEvent:\r\n\r\n```\r\n  <function name=\"setOnline\" parameters=\"bool\">\r\n    game.online = bool\r\n    switch (bool) {\r\n      case (\"true\") {\r\n        game.online = true\r\n      }\r\n      case (\"false\") {\r\n        game.online = false\r\n      }\r\n      default {\r\n        error (\"Error checking for online player.\")\r\n      }\r\n    }\r\n  </function>\r\n```\r\n\r\n---\r\nSee it in action:\r\n\r\nhttp://textadventures.co.uk/games/view/jymfhimg00c5cvrdqna7xa/pixies-quest\r\n\r\n\r\n---\r\nPS\r\n\r\n\r\nI can post a simple way to do it.\r\n\r\nThis is the coolest method I could conjure up while collaborating on the Pixie game.\r\n\r\n**NOTE:**  If you enter the command SAVE (instead of clicking on 'Save') when playing online, Quest doesn't save any of the game's text by default at the moment.  It's like the screen has been cleared when you load a save.  This fixes that, too.  Hence all the extra functions.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello,</p>\n<p>(You opened a can of worms!)</p>\n<p>You can create your own save command.  Here's one of mine:</p>\n<pre><code>\ngame.notarealturn = true\nJS.playerCheck ()\nSetTimeout (2) {\n  JS.playerCheck ()\n  SetTimeout (2) {\n    JS.eval (\"addText (\\\"Save time: \\\"+Date()+\\\"&lt;br/&gt;\\\");\")\n    if (not game.online) {\n      request (RequestSave, \"\")\n    }\n    else {\n      JS.setInterfaceString (\"TypeHereLabel\", \"Save in progress...\")\n      msg (\"If you are playing online, your game may behave erratically when you resume play.&lt;br/&gt;This game behaves best when played using the desktop version of Quest 5.7.1.&lt;br/&gt;\")\n      JS.scrollToEnd ()\n      JS.saveGame ()\n      JS.afterSave ()\n    }\n  }\n}\n</code></pre>\n<hr>\n<p>The game saves differently when playing online.</p>\n<p>Looking through Quest's source code, I found the JS that checked whether the player was online, and I used that to make this function:</p>\n<pre><code>//This checks for the web player, setting game.online to true or false\nvar bool = false;\nfunction playerCheck() {\n  if (webPlayer) {\n    //addText(\"&lt;br/&gt;[Game running in Online player.]\");\n    bool = true;\n    ASLEvent(\"setOnline\", bool);\n  }\n  else {\n    //addText(\"&lt;br/&gt;[Game running in Desktop player.]\");\n    bool = false;\n    ASLEvent(\"setOnline\", bool);\n  }\n}\n</code></pre>\n<p>...and I created a function in the game to handle that ASLEvent:</p>\n<pre><code>  &lt;function name=\"setOnline\" parameters=\"bool\"&gt;\n    game.online = bool\n    switch (bool) {\n      case (\"true\") {\n        game.online = true\n      }\n      case (\"false\") {\n        game.online = false\n      }\n      default {\n        error (\"Error checking for online player.\")\n      }\n    }\n  &lt;/function&gt;\n</code></pre>\n<hr>\n<p>See it in action:</p>\n<p>http://textadventures.co.uk/games/view/jymfhimg00c5cvrdqna7xa/pixies-quest</p>\n<hr>\n<p>PS</p>\n<p>I can post a simple way to do it.</p>\n<p>This is the coolest method I could conjure up while collaborating on the Pixie game.</p>\n<p><strong>NOTE:</strong>  If you enter the command SAVE (instead of clicking on 'Save') when playing online, Quest doesn't save any of the game's text by default at the moment.  It's like the screen has been cleared when you load a save.  This fixes that, too.  Hence all the extra functions.</p>\n\n",
      "PostDate": "2017-11-19T20:17:28.0056114Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "57f808be-94c8-42d2-8681-b594c6144734",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is the simplest way I can conjure up that still checks for the web player:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Saving Fancily\">\r\n    <gameid>4f0614a3-267e-4afe-b43c-5508ef2b0ac9</gameid>\r\n    <version>1.3</version>\r\n    <firstpublished>2017</firstpublished>\r\n  </game>\r\n  <command name=\"save\">\r\n    <pattern type=\"string\">^save$</pattern>\r\n    <script>\r\n      JS.eval (\"if (webPlayer){alert('Playing online');saveGame();}else{alert('Playing in the desktop version');ASLEvent('SaveFunction', '');};\")\r\n    </script>\r\n  </command>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <function name=\"SaveFunction\" parameters=\"param\">\r\n    request (RequestSave, \"\")\r\n  </function>\r\n</asl>\r\n```\r\n\r\n---\r\nYou could change ```alert('Playing online')``` to ```addTextAndScroll('<br/>Insert your message here<br/>')```, or just change the alert message if you like the alert.  The same goes for ```alert('Playing in the desktop version')```.",
      "EditableFormat": "markdown",
      "HTML": "<p>This is the simplest way I can conjure up that still checks for the web player:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Saving Fancily\"&gt;\n    &lt;gameid&gt;4f0614a3-267e-4afe-b43c-5508ef2b0ac9&lt;/gameid&gt;\n    &lt;version&gt;1.3&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;command name=\"save\"&gt;\n    &lt;pattern type=\"string\"&gt;^save$&lt;/pattern&gt;\n    &lt;script&gt;\n      JS.eval (\"if (webPlayer){alert('Playing online');saveGame();}else{alert('Playing in the desktop version');ASLEvent('SaveFunction', '');};\")\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;function name=\"SaveFunction\" parameters=\"param\"&gt;\n    request (RequestSave, \"\")\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>You could change <code>alert('Playing online')</code> to <code>addTextAndScroll('&lt;br/&gt;Insert your message here&lt;br/&gt;')</code>, or just change the alert message if you like the alert.  The same goes for <code>alert('Playing in the desktop version')</code>.</p>\n\n",
      "PostDate": "2017-11-19T20:56:33.6771179Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "23520e68-96fc-4e3b-a68b-de3270d6e2e7",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(ignore me, responding to the first post before I saw the second)",
      "EditableFormat": "markdown",
      "HTML": "<p>(ignore me, responding to the first post before I saw the second)</p>\n\n",
      "PostDate": "2017-11-19T20:58:23.5403251Z",
      "LastEditDate": "2017-11-19T21:01:05.8330364Z",
      "link": null
    },
    {
      "PostId": "fbd38726-0bbb-4d99-92d0-06fa70e38350",
      "UserId": 311632,
      "Username": "Anthony the tiger ",
      "AvatarUrl": "http://i.imgur.com/41t3IZYb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So, let's say the player uses this command and I want an NPC to notice this action.  Say I want to do some sort of forth wall joke about saving the game. They press the command to save the game. Then through another command could load said game. Is it possible for an npc to notice this. Where an object or character would check if the player has saved or not?",
      "EditableFormat": "markdown",
      "HTML": "<p>So, let's say the player uses this command and I want an NPC to notice this action.  Say I want to do some sort of forth wall joke about saving the game. They press the command to save the game. Then through another command could load said game. Is it possible for an npc to notice this. Where an object or character would check if the player has saved or not?</p>\n\n",
      "PostDate": "2017-11-19T21:25:41.1685362Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cabaaa1c-d2b2-48ad-87fd-c73f6b4c1b88",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\n//After the other script (Ralph is my NPC, of course.)\r\nif (Ralph.parent = player.parent) {\r\n  msg (\"{random:The game has been saved, and that villainous scoundrel, Murphy, is still out there somewhere...:'Oh, hell!' declares Ralph. 'Are we wussing out, or are we about to mess something up?'}\")\r\n}\r\nelse {\r\n  msg (\"The game has been saved, and that villainous scoundrel, Murphy, is still out there somewhere...\")\r\n}\r\n```\r\n\r\n---\r\nmrangel,\r\n\r\nSorry about that!  I realized how disarrayed everything was once I posted that first method.  (You've taught me a lot about JS since then, sir.  Hence my second code.  (Was yours more elegant?  (Don't lie to make me feel good, either!)))",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>//After the other script (Ralph is my NPC, of course.)\nif (Ralph.parent = player.parent) {\n  msg (\"{random:The game has been saved, and that villainous scoundrel, Murphy, is still out there somewhere...:'Oh, hell!' declares Ralph. 'Are we wussing out, or are we about to mess something up?'}\")\n}\nelse {\n  msg (\"The game has been saved, and that villainous scoundrel, Murphy, is still out there somewhere...\")\n}\n</code></pre>\n<hr>\n<p>mrangel,</p>\n<p>Sorry about that!  I realized how disarrayed everything was once I posted that first method.  (You've taught me a lot about JS since then, sir.  Hence my second code.  (Was yours more elegant?  (Don't lie to make me feel good, either!)))</p>\n\n",
      "PostDate": "2017-11-19T21:30:55.35297Z",
      "LastEditDate": "2017-11-19T21:33:38.9320745Z",
      "link": null
    },
    {
      "PostId": "26a1c7bd-0a64-4f97-893c-56d1167855db",
      "UserId": 311632,
      "Username": "Anthony the tiger ",
      "AvatarUrl": "http://i.imgur.com/41t3IZYb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "would the player be able to load said save via the in-game command as well?",
      "EditableFormat": "markdown",
      "HTML": "<p>would the player be able to load said save via the in-game command as well?</p>\n\n",
      "PostDate": "2017-11-19T22:17:04.2490259Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fc8fe548-d036-430e-bd8d-c34625ae83e4",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well, when you save a game online, you can click \"Play (resume)' or 'Restart' from the game's page.\r\n\r\nWhen you in the desktop, it creates a save file, which you open to resume play.\r\n\r\nI don't know of a command, which doesn't mean it doesn't exist...\r\n\r\n...but this saving method makes it so your save file works correctly, whether playing online or offline.",
      "EditableFormat": "markdown",
      "HTML": "<p>Well, when you save a game online, you can click \"Play (resume)' or 'Restart' from the game's page.</p>\n<p>When you in the desktop, it creates a save file, which you open to resume play.</p>\n<p>I don't know of a command, which doesn't mean it doesn't exist...</p>\n<p>...but this saving method makes it so your save file works correctly, whether playing online or offline.</p>\n\n",
      "PostDate": "2017-11-19T22:27:20.5444363Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c30b47fb-b6ef-44db-be9c-6a80a08235d1",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Now you've got me trying to work out how, following the save function, you could have the NPC say something just after saving, but something different when you load the saved game :p First I was thinking about using the UI initialisation script to set something up. But then I thought that there's probably an easier way. Because JS variables aren't saved/restored… something like…\r\n```\r\nJS.eval(\"hasJustSaved = true; setTimeout(function() {hasJustSaved=false;}, 5000);\")\r\n// commands to actually save the game go here\r\nOutputTextNoBr(\"Ralph turns to you and says: \")\r\nmsg(\"<script>addText(hasJustSaved ? '“Well, are you ready to go then?”' : '“Well, are we... Wait, didn’t I already say that? Did you get yourself killed again?”');</script>\")\r\nmsg(\"\")\r\n```\r\n\r\n(yes, I know that's horrible and has significant flaws even if it works. It was a first guess at how it might be done)",
      "EditableFormat": "markdown",
      "HTML": "<p>Now you've got me trying to work out how, following the save function, you could have the NPC say something just after saving, but something different when you load the saved game :p First I was thinking about using the UI initialisation script to set something up. But then I thought that there's probably an easier way. Because JS variables aren't saved/restored… something like…</p>\n<pre><code>JS.eval(\"hasJustSaved = true; setTimeout(function() {hasJustSaved=false;}, 5000);\")\n// commands to actually save the game go here\nOutputTextNoBr(\"Ralph turns to you and says: \")\nmsg(\"&lt;script&gt;addText(hasJustSaved ? '“Well, are you ready to go then?”' : '“Well, are we... Wait, didn’t I already say that? Did you get yourself killed again?”');&lt;/script&gt;\")\nmsg(\"\")\n</code></pre>\n<p>(yes, I know that's horrible and has significant flaws even if it works. It was a first guess at how it might be done)</p>\n\n",
      "PostDate": "2017-11-19T22:31:47.4347493Z",
      "LastEditDate": "2017-11-19T22:36:07.2505971Z",
      "link": null
    },
    {
      "PostId": "ab5b33ac-b39e-4629-abc1-cf03e7f12902",
      "UserId": 311632,
      "Username": "Anthony the tiger ",
      "AvatarUrl": "http://i.imgur.com/41t3IZYb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "K.V.\r\nWell, when you save a game online, you can click \"Play (resume)' or 'Restart' from the game's page.\r\n\r\nWhen you in the desktop, it creates a save file, which you open to resume play.\r\n\r\nI don't know of a command, which doesn't mean it doesn't exist...\r\n\r\n...but this saving method makes it so your save file works correctly, whether playing online or offline.\r\n____________________________________________________________________________________\r\nMe:\r\nOh, okay so it's just a custom command that works like normal saving but it's a way for the npcs to recognize it. Makes enough sense. Also, I was curious if there can be a custom 'restart' command. In short, I was thinking of putting achievements in my game but I know when a player starts a new game or loads back into the game they resumed the achievement wouldn't be there. Is there a way to fix this issue so that the achievement is a permanent unlocked thing for the player? \r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>K.V.<br>\nWell, when you save a game online, you can click \"Play (resume)' or 'Restart' from the game's page.</p>\n<p>When you in the desktop, it creates a save file, which you open to resume play.</p>\n<p>I don't know of a command, which doesn't mean it doesn't exist...</p>\n<p>...but this saving method makes it so your save file works correctly, whether playing online or offline.</p>\n<hr>\n<p>Me:<br>\nOh, okay so it's just a custom command that works like normal saving but it's a way for the npcs to recognize it. Makes enough sense. Also, I was curious if there can be a custom 'restart' command. In short, I was thinking of putting achievements in my game but I know when a player starts a new game or loads back into the game they resumed the achievement wouldn't be there. Is there a way to fix this issue so that the achievement is a permanent unlocked thing for the player?</p>\n\n",
      "PostDate": "2017-11-19T22:39:18.8650934Z",
      "LastEditDate": "2017-11-19T22:39:56.9533698Z",
      "link": null
    },
    {
      "PostId": "d6164187-27f6-4e58-9aab-bf22d43ef4fe",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I was thinking of putting achievements in my game but I know when a player starts a new game or loads back into the game they resumed the achievement wouldn't be there. Is there a way to fix this issue so that the achievement is a permanent unlocked thing for the player?\r\n\r\nI've thought about that before. Playing online, you could use cookies or localStorage to save data outside of the individual game session. No idea if that would work with the desktop version or not, I never got around to testing it.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I was thinking of putting achievements in my game but I know when a player starts a new game or loads back into the game they resumed the achievement wouldn't be there. Is there a way to fix this issue so that the achievement is a permanent unlocked thing for the player?</p>\n</blockquote>\n<p>I've thought about that before. Playing online, you could use cookies or localStorage to save data outside of the individual game session. No idea if that would work with the desktop version or not, I never got around to testing it.</p>\n\n",
      "PostDate": "2017-11-19T22:47:38.5523392Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "607e7d26-e493-4641-bcc1-e3b4836787f2",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "mrangel,\r\n\r\nHa!  I tried the same thing, and the amount of time it takes to save the game varies, so the timers always ended up frustrating me.\r\n\r\nThe only way I came up with that worked involved changing the ```saveGameResponse``` function, and I wasn't sure I should be fooling around with that.\r\n\r\nI searched for an attribute or variable that was set by default after loading a saved game, but I couldn't find anything.\r\n\r\n---\r\nAnthony,\r\n\r\nMaybe you could:\r\n\r\n- Set up the achievements as attributes\r\n-  Set those attributes to something else after saving the game\r\n- Run a user initialization script that does something if the attributes are whatever you want them to be after saving.\r\n\r\n---\r\nThere is no RESTART command (which is something mrangel and I have also worked on).  You can create a RESTART command that works in the online player, but the only ways I can find to restart the desktop player is by pressing CTRL+R or using the menu.\r\n\r\nAlso, the restart will start whatever game you're playing from the beginning.  If it's the original game, it would start from the very beginning.  BUT, if was a saved file and you just saved before restarting, it would start where you expected it to (I think -- as long as you save the file over the old save file AND that's the one you're playing from).",
      "EditableFormat": "markdown",
      "HTML": "<p>mrangel,</p>\n<p>Ha!  I tried the same thing, and the amount of time it takes to save the game varies, so the timers always ended up frustrating me.</p>\n<p>The only way I came up with that worked involved changing the <code>saveGameResponse</code> function, and I wasn't sure I should be fooling around with that.</p>\n<p>I searched for an attribute or variable that was set by default after loading a saved game, but I couldn't find anything.</p>\n<hr>\n<p>Anthony,</p>\n<p>Maybe you could:</p>\n<ul>\n<li>Set up the achievements as attributes</li>\n<li>Set those attributes to something else after saving the game</li>\n<li>Run a user initialization script that does something if the attributes are whatever you want them to be after saving.</li>\n</ul>\n<hr>\n<p>There is no RESTART command (which is something mrangel and I have also worked on).  You can create a RESTART command that works in the online player, but the only ways I can find to restart the desktop player is by pressing CTRL+R or using the menu.</p>\n<p>Also, the restart will start whatever game you're playing from the beginning.  If it's the original game, it would start from the very beginning.  BUT, if was a saved file and you just saved before restarting, it would start where you expected it to (I think -- as long as you save the file over the old save file AND that's the one you're playing from).</p>\n\n",
      "PostDate": "2017-11-19T22:51:51.7763964Z",
      "LastEditDate": "2017-11-19T23:03:59.126499Z",
      "link": null
    },
    {
      "PostId": "76a7aae7-e829-4108-9b2d-a7812a1f072e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The timer isn't actually necessary, I think.\r\nYou don't really want a `<script>` element. What you want is a div with an onready function that changes its content. That can change the message either way, and then clear the variable afterwards. (I think that onready function will execute every time it is reloaded from the saved text buffer; so you probably want it to check if it's at the end of divOutput too. If you're really crafty, you could generate a unique ID each time the game saves, and track how many times each one has been loaded from using cookies :p)",
      "EditableFormat": "markdown",
      "HTML": "<p>The timer isn't actually necessary, I think.<br>\nYou don't really want a <code>&lt;script&gt;</code> element. What you want is a div with an onready function that changes its content. That can change the message either way, and then clear the variable afterwards. (I think that onready function will execute every time it is reloaded from the saved text buffer; so you probably want it to check if it's at the end of divOutput too. If you're really crafty, you could generate a unique ID each time the game saves, and track how many times each one has been loaded from using cookies :p)</p>\n\n",
      "PostDate": "2017-11-19T23:02:07.8422752Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7112bea1-92b0-4cc0-af53-397916255a20",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This works:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Saving Fancily\">\r\n    <gameid>4f0614a3-267e-4afe-b43c-5508ef2b0ac9</gameid>\r\n    <version>1.3</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <feature_advancedscripts />\r\n    <inituserinterface type=\"script\">\r\n      if (HasAttribute(game, \"saved\")) {\r\n        JS.alert (\"You have loaded a saved game!\")\r\n      }\r\n    </inituserinterface>\r\n  </game>\r\n  <command name=\"save\">\r\n    <pattern type=\"string\">^save$</pattern>\r\n    <script>\r\n      JS.eval (\"if (webPlayer){alert('Playing online');saveGame();}else{alert('Playing in the desktop version');ASLEvent('SaveFunction', '');};\")\r\n      game.saved = true\r\n    </script>\r\n  </command>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <function name=\"SaveFunction\" parameters=\"param\">\r\n    request (RequestSave, \"\")\r\n  </function>\r\n</asl>\r\n```\r\n\r\n---\r\nThis also works (instead of the alert, but not without the SetTimeout):\r\n\r\n```\r\n    <inituserinterface type=\"script\">\r\n      if (HasAttribute(game, \"saved\")) {\r\n        SetTimeout(1) msg (\"You have loaded a saved game!\")\r\n      }\r\n    </inituserinterface>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>This works:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Saving Fancily\"&gt;\n    &lt;gameid&gt;4f0614a3-267e-4afe-b43c-5508ef2b0ac9&lt;/gameid&gt;\n    &lt;version&gt;1.3&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;inituserinterface type=\"script\"&gt;\n      if (HasAttribute(game, \"saved\")) {\n        JS.alert (\"You have loaded a saved game!\")\n      }\n    &lt;/inituserinterface&gt;\n  &lt;/game&gt;\n  &lt;command name=\"save\"&gt;\n    &lt;pattern type=\"string\"&gt;^save$&lt;/pattern&gt;\n    &lt;script&gt;\n      JS.eval (\"if (webPlayer){alert('Playing online');saveGame();}else{alert('Playing in the desktop version');ASLEvent('SaveFunction', '');};\")\n      game.saved = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;function name=\"SaveFunction\" parameters=\"param\"&gt;\n    request (RequestSave, \"\")\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>This also works (instead of the alert, but not without the SetTimeout):</p>\n<pre><code>    &lt;inituserinterface type=\"script\"&gt;\n      if (HasAttribute(game, \"saved\")) {\n        SetTimeout(1) msg (\"You have loaded a saved game!\")\n      }\n    &lt;/inituserinterface&gt;\n</code></pre>\n\n",
      "PostDate": "2017-11-19T23:03:02.4264074Z",
      "LastEditDate": "2017-11-19T23:07:20.4282307Z",
      "link": null
    }
  ]
}
