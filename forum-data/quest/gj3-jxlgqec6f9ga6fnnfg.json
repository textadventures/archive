{
  "Topic": {
    "TopicId": "gj3-jxlgqec6f9ga6fnnfg",
    "ForumId": "10",
    "Title": "PUSHING MY LUCK -- Making KV's Side Image a Link [DONE!]",
    "LastUpdated": "2018-06-08T06:57:57.6889431Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "68db52e2-4f62-43c2-88c3-74b1f0855bed",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Greetings wanderer!\r\n```\r\nJS.eval (\"$('body').append(\\\"<img id='AreaPicPane' src='\" + GetFileURL(game.NewArea.AreaPic) + \"' style='display:none;'/>\\\");\")\r\nJS.eval (\"$('#AreaPicPane').insertBefore($('#statusVarsLabel')).show().width('100%');\")\r\n```\r\nThese two lines by KV display an image in the sidepanes, as per a previous thread:\r\nhttp://textadventures.co.uk/forum/samples/topic/q5zedoe560au_ii73oamoq/adding-graphics-in-a-specific-location-gui-solved\r\n\r\nTo make the image a command link, the first line is added to, like so:\r\n```\r\nJS.eval (\"$('body').append(\\\"<img id='AreaPicPane' src='\" + GetFileURL(game.NewArea.AreaPic) + \"' onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\" style='display:none;'/>\\\");\")\r\n```\r\n```HandleButtonClick (\"look\")``` is a simple function that calls a command.  The problem with the above, adjusted line is the quotes around ```\\\"ASLEvent('HandleButtonClick', 'look');\\\"``` -- only double quotes or escape double quotes will work here; single quotes will not work.  However, double quotes/escape double quotes throw a syntax error in the above line because they conflict with the double quotes/escape double quotes earlier on in the same line, thus confusing Quest.  To get around this, the above line has been split up into two separate lines:\r\n```\r\ns = \"<img id='AreaPicPane' src='\" + GetFileURL(game.NewArea.AreaPic) + \"' onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\" style='display:none;'/>\"\r\nJS.eval (\"$('body').append(s)\")\r\n```\r\nThe problem here is that, for some reason, the image will no longer print.  A ```msg (s)``` script will fix this, but will also trigger the known Quest bug that arises when something is printed from the Init UI tab upon reloading a saved game (which is what ```JS.eval (\"$('body').append...``` fixed in the first place, i.e., it \"magically\" displayed the image without throwing the printing bug).\r\n\r\nIf you're still reading and understanding this, you must be KV or mrangel!  How do I display the image and get the ```ASLEvent``` to make the link work, but without triggering the printing bug?",
      "EditableFormat": "markdown",
      "HTML": "<p>Greetings wanderer!</p>\n<pre><code>JS.eval (\"$('body').append(\\\"&lt;img id='AreaPicPane' src='\" + GetFileURL(game.NewArea.AreaPic) + \"' style='display:none;'/&gt;\\\");\")\nJS.eval (\"$('#AreaPicPane').insertBefore($('#statusVarsLabel')).show().width('100%');\")\n</code></pre>\n<p>These two lines by KV display an image in the sidepanes, as per a previous thread:<br>\nhttp://textadventures.co.uk/forum/samples/topic/q5zedoe560au_ii73oamoq/adding-graphics-in-a-specific-location-gui-solved</p>\n<p>To make the image a command link, the first line is added to, like so:</p>\n<pre><code>JS.eval (\"$('body').append(\\\"&lt;img id='AreaPicPane' src='\" + GetFileURL(game.NewArea.AreaPic) + \"' onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\" style='display:none;'/&gt;\\\");\")\n</code></pre>\n<p><code>HandleButtonClick (\"look\")</code> is a simple function that calls a command.  The problem with the above, adjusted line is the quotes around <code>\\\"ASLEvent('HandleButtonClick', 'look');\\\"</code> -- only double quotes or escape double quotes will work here; single quotes will not work.  However, double quotes/escape double quotes throw a syntax error in the above line because they conflict with the double quotes/escape double quotes earlier on in the same line, thus confusing Quest.  To get around this, the above line has been split up into two separate lines:</p>\n<pre><code>s = \"&lt;img id='AreaPicPane' src='\" + GetFileURL(game.NewArea.AreaPic) + \"' onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\" style='display:none;'/&gt;\"\nJS.eval (\"$('body').append(s)\")\n</code></pre>\n<p>The problem here is that, for some reason, the image will no longer print.  A <code>msg (s)</code> script will fix this, but will also trigger the known Quest bug that arises when something is printed from the Init UI tab upon reloading a saved game (which is what <code>JS.eval (\"$('body').append...</code> fixed in the first place, i.e., it \"magically\" displayed the image without throwing the printing bug).</p>\n<p>If you're still reading and understanding this, you must be KV or mrangel!  How do I display the image and get the <code>ASLEvent</code> to make the link work, but without triggering the printing bug?</p>\n\n",
      "PostDate": "2018-06-08T06:57:57.6889431Z",
      "LastEditDate": "2018-06-14T13:08:48.00846Z",
      "link": null
    },
    {
      "PostId": "b8ce7f6d-4ded-465c-8b45-c4cfd5b46c52",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Maybe change the 2nd line:\r\n\r\n```\r\nJS.eval (\"$('body').append(\\\"\"+s+\"\\\");\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Maybe change the 2nd line:</p>\n<pre><code>JS.eval (\"$('body').append(\\\"\"+s+\"\\\");\")\n</code></pre>\n\n",
      "PostDate": "2018-06-08T07:45:43.6350654Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "08d48aea-6eca-48d2-84a1-9be29a36c2d3",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The way you have it, the ```s``` will be treated as a Javascript variable, which it isn't.  It's a Quest variable.\r\n\r\nJS VARIABLE (BAD): ```JS.eval (\"$('body').append(s)\")```\r\n\r\nQUEST VARIABLE (GOOD): ```JS.eval (\"$('body').append(\\\"\" + s + \"\\\");\")```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>The way you have it, the <code>s</code> will be treated as a Javascript variable, which it isn't.  It's a Quest variable.</p>\n<p>JS VARIABLE (BAD): <code>JS.eval (\"$('body').append(s)\")</code></p>\n<p>QUEST VARIABLE (GOOD): <code>JS.eval (\"$('body').append(\\\"\" + s + \"\\\");\")</code></p>\n\n",
      "PostDate": "2018-06-08T07:51:34.7629782Z",
      "LastEditDate": "2018-06-08T07:53:12.1489426Z",
      "link": null
    },
    {
      "PostId": "b7ee00ae-cf5e-4cee-b567-57f5d138390a",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\ns = \"<img id='AreaPicPane' src='\" + GetFileURL(game.NewArea.AreaPic) + \"' onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\" style='display:none;'/>\"\r\nJS.eval (\"$('body').append(\\\"\" +s+ \"\\\")\")\r\nJS.eval (\"$('#AreaPicPane').insertBefore($('#statusVarsLabel')).show().width('100%');\")\r\n```\r\nHmm...the image is not displayed.  I also tried single quotes here:\r\n```\r\nJS.eval (\"$('body').append('\" +s+ \"')\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>s = \"&lt;img id='AreaPicPane' src='\" + GetFileURL(game.NewArea.AreaPic) + \"' onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\" style='display:none;'/&gt;\"\nJS.eval (\"$('body').append(\\\"\" +s+ \"\\\")\")\nJS.eval (\"$('#AreaPicPane').insertBefore($('#statusVarsLabel')).show().width('100%');\")\n</code></pre>\n<p>Hmm...the image is not displayed.  I also tried single quotes here:</p>\n<pre><code>JS.eval (\"$('body').append('\" +s+ \"')\")\n</code></pre>\n\n",
      "PostDate": "2018-06-08T08:41:33.2736322Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "82f2bba0-9a7a-46c1-8dae-b24011b642cc",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I tried replacing both instances of ```s``` with ```game.s``` -- no change.",
      "EditableFormat": "markdown",
      "HTML": "<p>I tried replacing both instances of <code>s</code> with <code>game.s</code> -- no change.</p>\n\n",
      "PostDate": "2018-06-08T08:51:43.7637121Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cabd490c-9130-4982-a691-2ecc5965450f",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hrmm...\r\n\r\nTry this:\r\n\r\n```\r\ns = \"<img id='AreaPicPane' src=\\\"\" + GetFileURL(game.NewArea.AreaPic) + \"\\\" onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\" style='display:none;'/>\"\r\nJS.eval (\"$('body').append(\\\"\" +s+ \"\\\")\")\r\nJS.eval (\"$('#AreaPicPane').insertBefore($('#statusVarsLabel')).show().width('100%');\")\r\n```\r\n\r\n---\r\n**EDIT**\r\n\r\nThe url will contain backslashes, so I changed the single quotes in src to escaped double quotes.   (Fingers crossed.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Hrmm...</p>\n<p>Try this:</p>\n<pre><code>s = \"&lt;img id='AreaPicPane' src=\\\"\" + GetFileURL(game.NewArea.AreaPic) + \"\\\" onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\" style='display:none;'/&gt;\"\nJS.eval (\"$('body').append(\\\"\" +s+ \"\\\")\")\nJS.eval (\"$('#AreaPicPane').insertBefore($('#statusVarsLabel')).show().width('100%');\")\n</code></pre>\n<hr>\n<p><strong>EDIT</strong></p>\n<p>The url will contain backslashes, so I changed the single quotes in src to escaped double quotes.   (Fingers crossed.)</p>\n\n",
      "PostDate": "2018-06-08T08:52:52.6335794Z",
      "LastEditDate": "2018-06-08T08:56:56.1569737Z",
      "link": null
    },
    {
      "PostId": "b3991a07-e279-4a6e-8b82-6d1e966ad084",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Unfortunately, no luckie.  Amazing how this problem arises because of a mere inability to take single quotes around ASLEvent().",
      "EditableFormat": "markdown",
      "HTML": "<p>Unfortunately, no luckie.  Amazing how this problem arises because of a mere inability to take single quotes around ASLEvent().</p>\n\n",
      "PostDate": "2018-06-08T09:06:58.907065Z",
      "LastEditDate": "2018-06-08T09:08:50.1718277Z",
      "link": null
    },
    {
      "PostId": "b5695520-8eab-4693-b684-064b55b8471c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Curses!\r\n\r\n...and I bet your error in the HTML Tools console is completely vague?",
      "EditableFormat": "markdown",
      "HTML": "<p>Curses!</p>\n<p>...and I bet your error in the HTML Tools console is completely vague?</p>\n\n",
      "PostDate": "2018-06-08T09:08:52.5317458Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "83f5aadc-db35-4a34-8760-dbcc5f1311b3",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Forgot that I could check that!  It says:\r\n\r\n```Uncaught SyntaxError: Unexpected identifier```",
      "EditableFormat": "markdown",
      "HTML": "<p>Forgot that I could check that!  It says:</p>\n<p><code>Uncaught SyntaxError: Unexpected identifier</code></p>\n\n",
      "PostDate": "2018-06-08T09:10:12.2711608Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c27617c1-d4a8-490e-9498-6f499dbb02a7",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Try following through what each string is\r\n```\r\ns = \"<img id='AreaPicPane' src=\\\"\" + GetFileURL(game.NewArea.AreaPic) + \"\\\" onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\" style='display:none;'/>\"\r\nJS.eval (\"$('body').append(\\\"\" +s+ \"\\\")\")\r\nJS.eval (\"$('#AreaPicPane').insertBefore($('#statusVarsLabel')).show().width('100%');\")\r\n```\r\n\r\nSo, the Quest variable `s` comes out looking like:\r\n`<img id='AreaPicPane' src=\"http://some.url.here/whatever.jpg\" onclick=\"ASLEvent('HandleButtonClick', 'look');\" style='display:none;'/>`\r\n\r\nso the Javascript code the borwser is trying to interpret is:\r\n`$('body').append(\"<img id='AreaPicPane' src=\"http://some.url.here/whatever.jpg\" onclick=\"ASLEvent('HandleButtonClick', 'look');\" style='display:none;'/>\")`\r\n\r\nIf you've got multiple levels of interpolation, you want multiple levels of escaping.\r\n\r\nOff the top of my head:\r\n```\r\nJS.eval(\"$('<img id=\\\"AreaPicPane\\\" src=\\\"\" + GetFileURL(game.NewArea.AreaPic) + \"\\\" onclick=\\\"ASLEvent(\\\\'HandleButtonClick\\\\', \\\\'look\\\\');\\\" style=\\\"display:none;\\\"/>').insertBefore('#statusVarsLabel').show().width('100%');\")\r\n```\r\nThen the line being evaluated by JS is:\r\n`$('<img id=\"AreaPicPane\" src=\"http://some.url.here/image.jpg\" onclick=\"ASLEvent(\\'HandleButtonClick\\', \\'look\\');\" style=\"display:none;\"/>').insertBefore('#statusVarsLabel').show().width('100%');`\r\nso the HTML it's adding is:\r\n`<img id=\"AreaPicPane\" src=\"http://some.url.here/image.jpg\" onclick=\"ASLEvent('HandleButtonClick', 'look');\" style=\"display:none;\"/>`\r\n\r\n(Note: HTML attributes should always use double quotes. Current browsers will mostly accept single quotes, but you shouldn't count on this behaviour)",
      "EditableFormat": "markdown",
      "HTML": "<p>Try following through what each string is</p>\n<pre><code>s = \"&lt;img id='AreaPicPane' src=\\\"\" + GetFileURL(game.NewArea.AreaPic) + \"\\\" onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\" style='display:none;'/&gt;\"\nJS.eval (\"$('body').append(\\\"\" +s+ \"\\\")\")\nJS.eval (\"$('#AreaPicPane').insertBefore($('#statusVarsLabel')).show().width('100%');\")\n</code></pre>\n<p>So, the Quest variable <code>s</code> comes out looking like:<br>\n<code>&lt;img id='AreaPicPane' src=\"http://some.url.here/whatever.jpg\" onclick=\"ASLEvent('HandleButtonClick', 'look');\" style='display:none;'/&gt;</code></p>\n<p>so the Javascript code the borwser is trying to interpret is:<br>\n<code>$('body').append(\"&lt;img id='AreaPicPane' src=\"http://some.url.here/whatever.jpg\" onclick=\"ASLEvent('HandleButtonClick', 'look');\" style='display:none;'/&gt;\")</code></p>\n<p>If you've got multiple levels of interpolation, you want multiple levels of escaping.</p>\n<p>Off the top of my head:</p>\n<pre><code>JS.eval(\"$('&lt;img id=\\\"AreaPicPane\\\" src=\\\"\" + GetFileURL(game.NewArea.AreaPic) + \"\\\" onclick=\\\"ASLEvent(\\\\'HandleButtonClick\\\\', \\\\'look\\\\');\\\" style=\\\"display:none;\\\"/&gt;').insertBefore('#statusVarsLabel').show().width('100%');\")\n</code></pre>\n<p>Then the line being evaluated by JS is:<br>\n<code>$('&lt;img id=\"AreaPicPane\" src=\"http://some.url.here/image.jpg\" onclick=\"ASLEvent(\\'HandleButtonClick\\', \\'look\\');\" style=\"display:none;\"/&gt;').insertBefore('#statusVarsLabel').show().width('100%');</code><br>\nso the HTML it's adding is:<br>\n<code>&lt;img id=\"AreaPicPane\" src=\"http://some.url.here/image.jpg\" onclick=\"ASLEvent('HandleButtonClick', 'look');\" style=\"display:none;\"/&gt;</code></p>\n<p>(Note: HTML attributes should always use double quotes. Current browsers will mostly accept single quotes, but you shouldn't count on this behaviour)</p>\n\n",
      "PostDate": "2018-06-08T09:35:01.8100445Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3aaac153-d4aa-470e-8be5-55bcb150f3c5",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That works when I test it, mrangel.\r\n\r\nThank you!  (I'd have never thought of trying double-escaping the single quotation marks!)",
      "EditableFormat": "markdown",
      "HTML": "<p>That works when I test it, mrangel.</p>\n<p>Thank you!  (I'd have never thought of trying double-escaping the single quotation marks!)</p>\n\n",
      "PostDate": "2018-06-08T09:43:51.1021104Z",
      "LastEditDate": "2018-06-08T09:44:41.7646345Z",
      "link": null
    },
    {
      "PostId": "8fdbd96a-36bf-4a85-bbe2-2bca3231d13f",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "In some cases, jQuery object notation might result in less complex quoting. I don't know if it'll be easier here, but I can try it.\r\n\r\nThe JS would be:\r\n```\r\n$('<img>', {\r\n  id: 'AreaPicPane',\r\n  src: 'insert-url-here',\r\n  onclick: 'ASLEvent(\\'HandleButtonClick\\', \\'look\\');'\r\n}).insertBefore('#statusVarsLabel').width('100%');\r\n```\r\nor to avoid putting backslashes in at this stage:\r\n```\r\n$('<img>', {\r\n  id: 'AreaPicPane',\r\n  src: 'insert-url-here',\r\n  onclick: \"ASLEvent('HandleButtonClick', 'look');\"\r\n}).insertBefore('#statusVarsLabel').width('100%');\r\n```\r\nSo the version you have in Quest would be:\r\n```\r\nJS.eval(\"$('<img>', {id: 'AreaPicPane',src: '\"+GetFileURL(game.NewArea.AreaPic)+\"',onclick: 'ASLEvent(\\\\'HandleButtonClick\\\\', \\\\'look\\\\');'}).insertBefore('#statusVarsLabel').width('100%');\")\r\n```\r\nor\r\n```\r\nJS.eval(\"$('<img>', {id: 'AreaPicPane',src: '\"+GetFileURL(game.NewArea.AreaPic)+\"',onclick: \\\"ASLEvent('HandleButtonClick', 'look');\\\"}).insertBefore('#statusVarsLabel').width('100%');\")\r\n```\r\n\r\n(Note: I removed the `display: none` style rule which hides the element before immediately calling `.show()` on it. I only looked at the last couple of posts in this thread, so don't know if there's some explanation earlier on of why you're doing that. You can put it back in if you prefer)\r\n\r\nSo... three options. Use whichever seems most readable to you.",
      "EditableFormat": "markdown",
      "HTML": "<p>In some cases, jQuery object notation might result in less complex quoting. I don't know if it'll be easier here, but I can try it.</p>\n<p>The JS would be:</p>\n<pre><code>$('&lt;img&gt;', {\n  id: 'AreaPicPane',\n  src: 'insert-url-here',\n  onclick: 'ASLEvent(\\'HandleButtonClick\\', \\'look\\');'\n}).insertBefore('#statusVarsLabel').width('100%');\n</code></pre>\n<p>or to avoid putting backslashes in at this stage:</p>\n<pre><code>$('&lt;img&gt;', {\n  id: 'AreaPicPane',\n  src: 'insert-url-here',\n  onclick: \"ASLEvent('HandleButtonClick', 'look');\"\n}).insertBefore('#statusVarsLabel').width('100%');\n</code></pre>\n<p>So the version you have in Quest would be:</p>\n<pre><code>JS.eval(\"$('&lt;img&gt;', {id: 'AreaPicPane',src: '\"+GetFileURL(game.NewArea.AreaPic)+\"',onclick: 'ASLEvent(\\\\'HandleButtonClick\\\\', \\\\'look\\\\');'}).insertBefore('#statusVarsLabel').width('100%');\")\n</code></pre>\n<p>or</p>\n<pre><code>JS.eval(\"$('&lt;img&gt;', {id: 'AreaPicPane',src: '\"+GetFileURL(game.NewArea.AreaPic)+\"',onclick: \\\"ASLEvent('HandleButtonClick', 'look');\\\"}).insertBefore('#statusVarsLabel').width('100%');\")\n</code></pre>\n<p>(Note: I removed the <code>display: none</code> style rule which hides the element before immediately calling <code>.show()</code> on it. I only looked at the last couple of posts in this thread, so don't know if there's some explanation earlier on of why you're doing that. You can put it back in if you prefer)</p>\n<p>So... three options. Use whichever seems most readable to you.</p>\n\n",
      "PostDate": "2018-06-08T09:48:42.6819037Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3b4ffe61-7619-42d1-85bc-5a95cbf9369e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@KV:\r\n> (I'd have never thought of trying double-escaping the single quotation marks!)\r\n\r\nI'm not double escaping them.\r\nThere are two characters that need escaping in a Quest string to survive the transition to Javascript: A double quote, and a backslash.",
      "EditableFormat": "markdown",
      "HTML": "<p>@KV:</p>\n<blockquote>\n<p>(I'd have never thought of trying double-escaping the single quotation marks!)</p>\n</blockquote>\n<p>I'm not double escaping them.<br>\nThere are two characters that need escaping in a Quest string to survive the transition to Javascript: A double quote, and a backslash.</p>\n\n",
      "PostDate": "2018-06-08T09:50:49.0771911Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "01c687a7-19a1-4295-b54a-83e87a1925c1",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I tried mrangel's first method -- it works, but the same printing bug on reload persists.  How do you guys print something on game reload without triggering that bug?\r\n\r\nYou probably just clear the screen before you save, huh?",
      "EditableFormat": "markdown",
      "HTML": "<p>I tried mrangel's first method -- it works, but the same printing bug on reload persists.  How do you guys print something on game reload without triggering that bug?</p>\n<p>You probably just clear the screen before you save, huh?</p>\n\n",
      "PostDate": "2018-06-08T10:00:05.7095283Z",
      "LastEditDate": "2018-06-08T10:03:26.2636948Z",
      "link": null
    },
    {
      "PostId": "900ea89e-70ea-4a52-b709-2779f740ca4f",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This line is \"special\" because it \"magically\" displays the side image without triggering the print bug on reload (splitting things up into 2 lines triggers the print bug again):\r\n```\r\nJS.eval (\"$('body').append(\\\"<img id='AreaPicPane' src='\" + GetFileURL(game.NewArea.AreaPic) + \"' style='display:none;'/>\\\");\")\r\n```\r\nHow do I futz with the quotes so that I can add this bit to the above line:\r\n```\r\nonclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\"\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>This line is \"special\" because it \"magically\" displays the side image without triggering the print bug on reload (splitting things up into 2 lines triggers the print bug again):</p>\n<pre><code>JS.eval (\"$('body').append(\\\"&lt;img id='AreaPicPane' src='\" + GetFileURL(game.NewArea.AreaPic) + \"' style='display:none;'/&gt;\\\");\")\n</code></pre>\n<p>How do I futz with the quotes so that I can add this bit to the above line:</p>\n<pre><code>onclick=\\\"ASLEvent('HandleButtonClick', 'look');\\\"\n</code></pre>\n\n",
      "PostDate": "2018-06-08T10:31:21.6539318Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5c029782-6b26-4ca0-bbb5-fe05446edb3b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> How do I futz with the quotes so that I can add this bit to the above line:\r\n\r\n`onclick=\\\\\\\"ASLEvent('HandleButtonClick', 'look');\\\\\\\"`",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>How do I futz with the quotes so that I can add this bit to the above line:</p>\n</blockquote>\n<p><code>onclick=\\\\\\\"ASLEvent('HandleButtonClick', 'look');\\\\\\\"</code></p>\n\n",
      "PostDate": "2018-06-08T11:21:21.458996Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "03653e4d-6f59-42af-a1cd-9003a032f7e2",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Or do it later; after you've created the image, you could do:\r\n`JS.eval(\"$('AreaPicPane').on('click', function () { ASLEvent('HandleButtonClick', 'look'); });\")`\r\n\r\n(not sure what the bug is that your line \"magically\" fixes; wouldn't putting it directly in the sidebar be less glitch-prone in any case?)",
      "EditableFormat": "markdown",
      "HTML": "<p>Or do it later; after you've created the image, you could do:<br>\n<code>JS.eval(\"$('AreaPicPane').on('click', function () { ASLEvent('HandleButtonClick', 'look'); });\")</code></p>\n<p>(not sure what the bug is that your line \"magically\" fixes; wouldn't putting it directly in the sidebar be less glitch-prone in any case?)</p>\n\n",
      "PostDate": "2018-06-08T14:36:20.4261462Z",
      "LastEditDate": "2018-06-08T14:41:52.7397688Z",
      "link": null
    },
    {
      "PostId": "b380c560-8523-4c4b-9ba9-7756f47d6e08",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\nonclick=\\\\\\\"ASLEvent('HandleButtonClick', 'look');\\\\\\\"\r\n```\r\nThat works!  All 3 things work simultaneously -- the image displays, the image link works, and there is no printing bug on game reload.  Haven't tried the second solution yet.  So just keep adding escape backslashes until the code is accepted?\r\n\r\n>(not sure what the bug is that your line \"magically\" fixes...\r\n\r\nThe known Quest bug that is \"magically\" fixed is when you have any script that prints or does ```JS.addText``` placed in the Init UI tab -- it will work fine in a new game, but in a reloaded game, text will start printing at the beginning of the old text thread instead of at the end.  I like to carry the old text thread over to a saved game instead of clearing it so that the player can see what he was doing before.\r\n\r\n>wouldn't putting it directly in the sidebar be less glitch-prone in any case?)\r\n\r\nWhat I'm dealing with now is KV's adding a (secondary) image to the right-side panes.  I think you are referring to the (left) side navigation menu that slides out -- sorry for the confusion, that was a different topic!\r\n\r\nI will put out a demo of my progress thus far so that everyone can see all the work/contribution that has been put into this...",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>onclick=\\\\\\\"ASLEvent('HandleButtonClick', 'look');\\\\\\\"\n</code></pre>\n<p>That works!  All 3 things work simultaneously -- the image displays, the image link works, and there is no printing bug on game reload.  Haven't tried the second solution yet.  So just keep adding escape backslashes until the code is accepted?</p>\n<blockquote>\n<p>(not sure what the bug is that your line \"magically\" fixes...</p>\n</blockquote>\n<p>The known Quest bug that is \"magically\" fixed is when you have any script that prints or does <code>JS.addText</code> placed in the Init UI tab -- it will work fine in a new game, but in a reloaded game, text will start printing at the beginning of the old text thread instead of at the end.  I like to carry the old text thread over to a saved game instead of clearing it so that the player can see what he was doing before.</p>\n<blockquote>\n<p>wouldn't putting it directly in the sidebar be less glitch-prone in any case?)</p>\n</blockquote>\n<p>What I'm dealing with now is KV's adding a (secondary) image to the right-side panes.  I think you are referring to the (left) side navigation menu that slides out -- sorry for the confusion, that was a different topic!</p>\n<p>I will put out a demo of my progress thus far so that everyone can see all the work/contribution that has been put into this...</p>\n\n",
      "PostDate": "2018-06-08T18:04:00.3741482Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a588d628-ea17-41b3-b669-94b152971488",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Second solution works too:\r\n```\r\nJS.eval (\"$('#AreaPicPane').on('click', function () {ASLEvent('HandleButtonClick', 'look');});\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Second solution works too:</p>\n<pre><code>JS.eval (\"$('#AreaPicPane').on('click', function () {ASLEvent('HandleButtonClick', 'look');});\")\n</code></pre>\n\n",
      "PostDate": "2018-06-08T18:14:23.6144966Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "27f02d1a-f26e-4668-a79c-ad0115bcd3f2",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I want to remember that issue with printing from ```inituserinterface``` being fixed...\r\n\r\nSeems like mrangel fixed something with the divOutputAlign element count (or something like that).\r\n\r\nAm I dreaming that?  Or did the fix get lost during the update to 5.8?",
      "EditableFormat": "markdown",
      "HTML": "<p>I want to remember that issue with printing from <code>inituserinterface</code> being fixed...</p>\n<p>Seems like mrangel fixed something with the divOutputAlign element count (or something like that).</p>\n<p>Am I dreaming that?  Or did the fix get lost during the update to 5.8?</p>\n\n",
      "PostDate": "2018-06-08T23:14:36.3635607Z",
      "LastEditDate": "2018-06-08T23:16:14.9398061Z",
      "link": null
    },
    {
      "PostId": "a47d41de-957e-417e-b398-65855d641a8c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I was thinking of this, which was close:\r\n\r\nhttp://textadventures.co.uk/forum/quest/topic/ik0dbblaq0o5fdqq7nuwia/js-function-to-find-the-last-divoutputalign-in-a-saved-game-solved#2909e2da-ec2d-4ac0-a169-74e958a4bbf9\r\n\r\n\r\n---\r\nThis is the bit that seems to be throwing things off:\r\n\r\n```\r\nvar _divCount = -1; \r\n\r\nfunction getDivCount() {\r\n    if (_divCount < 1) {\r\n        _divCount = parseInt($(\"#outputData\").attr(\"data-divcount\")) || 0;\r\n    }\r\n    return _divCount;\r\n}\r\n\r\nfunction setDivCount(count) {\r\n    _divCount = count;\r\n    $(\"#outputData\").attr(\"data-divcount\", _divCount);\r\n}\r\n```\r\n\r\nAnd I am about to see if changing it to this fixes it:\r\n\r\n```\r\nvar _divCount = -1;\r\nif (typeof ($(\"#outputData\").attr(\"data-divcount\")) != 'undefined') {\r\n    setDivCount($(\"#outputData\").attr(\"data-divcount\"));\r\n}\r\n\r\nfunction getDivCount() {\r\n    if (_divCount < 1) {\r\n        _divCount = parseInt($(\"#outputData\").attr(\"data-divcount\")) || 0;\r\n    }\r\n    return _divCount;\r\n}\r\n\r\nfunction setDivCount(count) {\r\n    _divCount = count;\r\n    $(\"#outputData\").attr(\"data-divcount\", _divCount);\r\n}\r\n```\r\n\r\n---\r\nIf it works, it can't be added to a game, as far as I can tell.  It will need to be in playercore.js to work.",
      "EditableFormat": "markdown",
      "HTML": "<p>I was thinking of this, which was close:</p>\n<p>http://textadventures.co.uk/forum/quest/topic/ik0dbblaq0o5fdqq7nuwia/js-function-to-find-the-last-divoutputalign-in-a-saved-game-solved#2909e2da-ec2d-4ac0-a169-74e958a4bbf9</p>\n<hr>\n<p>This is the bit that seems to be throwing things off:</p>\n<pre><code>var _divCount = -1; \n\nfunction getDivCount() {\n    if (_divCount &lt; 1) {\n        _divCount = parseInt($(\"#outputData\").attr(\"data-divcount\")) || 0;\n    }\n    return _divCount;\n}\n\nfunction setDivCount(count) {\n    _divCount = count;\n    $(\"#outputData\").attr(\"data-divcount\", _divCount);\n}\n</code></pre>\n<p>And I am about to see if changing it to this fixes it:</p>\n<pre><code>var _divCount = -1;\nif (typeof ($(\"#outputData\").attr(\"data-divcount\")) != 'undefined') {\n    setDivCount($(\"#outputData\").attr(\"data-divcount\"));\n}\n\nfunction getDivCount() {\n    if (_divCount &lt; 1) {\n        _divCount = parseInt($(\"#outputData\").attr(\"data-divcount\")) || 0;\n    }\n    return _divCount;\n}\n\nfunction setDivCount(count) {\n    _divCount = count;\n    $(\"#outputData\").attr(\"data-divcount\", _divCount);\n}\n</code></pre>\n<hr>\n<p>If it works, it can't be added to a game, as far as I can tell.  It will need to be in playercore.js to work.</p>\n\n",
      "PostDate": "2018-06-08T23:47:02.7219993Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9cb10a27-ee2a-4dd1-9441-37408aef858b",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That didn't work.\r\n\r\nNow I'm thinking it may have to do with the ```_outputSections``` variable...\r\n\r\n---\r\nNope.",
      "EditableFormat": "markdown",
      "HTML": "<p>That didn't work.</p>\n<p>Now I'm thinking it may have to do with the <code>_outputSections</code> variable...</p>\n<hr>\n<p>Nope.</p>\n\n",
      "PostDate": "2018-06-09T00:10:48.848702Z",
      "LastEditDate": "2018-06-09T00:22:30.5698179Z",
      "link": null
    },
    {
      "PostId": "1865f05f-626a-4a5f-a49d-7fd3a1814fb7",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The ```data-divcount``` attribute is either not being saved or it's being reset.\r\n\r\n```\r\nfunction getDivCount() {\r\n    if (_divCount < 1) {\r\n\tconsole.log(\"data-divcount: \"+$(\"#outputData\").attr(\"data-divcount\"));  // TESTING\r\n        _divCount = parseInt($(\"#outputData\").attr(\"data-divcount\")) || 0;\r\n    }\r\n    return _divCount;\r\n}\r\n\r\nfunction setDivCount(count) {\r\n    console.log(\"count: \"+count); // TESTING\r\n    _divCount = count;\r\n    $(\"#outputData\").attr(\"data-divcount\", _divCount);\r\n    console.log(\"data-divcount: \"+$(\"#outputData\").attr(\"data-divcount\"));  // TESTING\r\n}\r\n```\r\n\r\n---\r\nBefore saving:\r\n```\r\nplayercore.js:699 data-divcount: 0\r\nplayercore.js:696 count: 1\r\nplayercore.js:699 data-divcount: 1\r\nplayercore.js:696 count: 2\r\nplayercore.js:699 data-divcount: 2\r\nplayercore.js:696 count: 3\r\nplayercore.js:699 data-divcount: 3\r\nplayercore.js:696 count: 4\r\nplayercore.js:699 data-divcount: 4\r\nplayercore.js:696 count: 5\r\nplayercore.js:699 data-divcount: 5\r\nplayercore.js:696 count: 6\r\nplayercore.js:699 data-divcount: 6\r\nplayercore.js:696 count: 7\r\nplayercore.js:699 data-divcount: 7\r\nplayercore.js:696 count: 8\r\nplayercore.js:699 data-divcount: 8\r\nplayercore.js:696 count: 9\r\nplayercore.js:699 data-divcount: 9\r\nplayercore.js:696 count: 10\r\nplayercore.js:699 data-divcount: 10\r\n```\r\n\r\n---\r\nSaved game after loading and taking 1 turn (with msg in inituserinterface):\r\n\r\n```\r\nplayercore.js:699 data-divcount: 0\r\nplayercore.js:696 count: 1\r\nplayercore.js:699 data-divcount: 1\r\nplayercore.js:696 count: 2\r\nplayercore.js:699 data-divcount: 2\r\n```\r\n\r\n---\r\nSaved game after loading and taking 1 turn (WITHOUT msg in inituserinterface):\r\n```\r\nplayercore.js:699 data-divcount: 0\r\nplayercore.js:689 data-divcount: 9\r\nplayercore.js:696 count: 10\r\nplayercore.js:699 data-divcount: 10\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>The <code>data-divcount</code> attribute is either not being saved or it's being reset.</p>\n<pre><code>function getDivCount() {\n    if (_divCount &lt; 1) {\n\tconsole.log(\"data-divcount: \"+$(\"#outputData\").attr(\"data-divcount\"));  // TESTING\n        _divCount = parseInt($(\"#outputData\").attr(\"data-divcount\")) || 0;\n    }\n    return _divCount;\n}\n\nfunction setDivCount(count) {\n    console.log(\"count: \"+count); // TESTING\n    _divCount = count;\n    $(\"#outputData\").attr(\"data-divcount\", _divCount);\n    console.log(\"data-divcount: \"+$(\"#outputData\").attr(\"data-divcount\"));  // TESTING\n}\n</code></pre>\n<hr>\n<p>Before saving:</p>\n<pre><code>playercore.js:699 data-divcount: 0\nplayercore.js:696 count: 1\nplayercore.js:699 data-divcount: 1\nplayercore.js:696 count: 2\nplayercore.js:699 data-divcount: 2\nplayercore.js:696 count: 3\nplayercore.js:699 data-divcount: 3\nplayercore.js:696 count: 4\nplayercore.js:699 data-divcount: 4\nplayercore.js:696 count: 5\nplayercore.js:699 data-divcount: 5\nplayercore.js:696 count: 6\nplayercore.js:699 data-divcount: 6\nplayercore.js:696 count: 7\nplayercore.js:699 data-divcount: 7\nplayercore.js:696 count: 8\nplayercore.js:699 data-divcount: 8\nplayercore.js:696 count: 9\nplayercore.js:699 data-divcount: 9\nplayercore.js:696 count: 10\nplayercore.js:699 data-divcount: 10\n</code></pre>\n<hr>\n<p>Saved game after loading and taking 1 turn (with msg in inituserinterface):</p>\n<pre><code>playercore.js:699 data-divcount: 0\nplayercore.js:696 count: 1\nplayercore.js:699 data-divcount: 1\nplayercore.js:696 count: 2\nplayercore.js:699 data-divcount: 2\n</code></pre>\n<hr>\n<p>Saved game after loading and taking 1 turn (WITHOUT msg in inituserinterface):</p>\n<pre><code>playercore.js:699 data-divcount: 0\nplayercore.js:689 data-divcount: 9\nplayercore.js:696 count: 10\nplayercore.js:699 data-divcount: 10\n</code></pre>\n\n",
      "PostDate": "2018-06-09T00:36:18.2686922Z",
      "LastEditDate": "2018-06-09T00:57:04.5317096Z",
      "link": null
    },
    {
      "PostId": "45a236eb-633c-4d10-a2a6-51e92242ffb6",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay...  ```data-divcount``` is being saved correctly.  Here's the line in my saved file:\r\n\r\n```\r\n<div id=\"outputData\" style=\"display: none\" data-divcount=\"9\" data-currentdiv=\"#divOutputAlign9\"></div>\r\n```\r\n\r\n---\r\nHrmm...\r\n\r\nWhy does ```InitInterface``` call ```getDivCount```?\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay...  <code>data-divcount</code> is being saved correctly.  Here's the line in my saved file:</p>\n<pre><code>&lt;div id=\"outputData\" style=\"display: none\" data-divcount=\"9\" data-currentdiv=\"#divOutputAlign9\"&gt;&lt;/div&gt;\n</code></pre>\n<hr>\n<p>Hrmm...</p>\n<p>Why does <code>InitInterface</code> call <code>getDivCount</code>?</p>\n\n",
      "PostDate": "2018-06-09T00:54:34.6941403Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7061f1bc-5a91-45b8-b1ac-6e7f3bcf24ee",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "...and SOLVED?\r\n\r\nIf you add this code FIRST in your ```game.inituserinterface```, the issue with adding text from that same script should not effect you ever again (hopefully):\r\n\r\n```\r\n// Edited\r\nif (not game.timeelapsed = 0) {\r\n  JS.eval (\"setCurrentDiv($(\\\"#outputData\\\").attr(\\\"data-currentdiv\\\"));setDivCount(parseInt($(\\\"#outputData\\\").attr(\\\"data-divcount\\\")));\")\r\n}\r\n```\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>...and SOLVED?</p>\n<p>If you add this code FIRST in your <code>game.inituserinterface</code>, the issue with adding text from that same script should not effect you ever again (hopefully):</p>\n<pre><code>// Edited\nif (not game.timeelapsed = 0) {\n  JS.eval (\"setCurrentDiv($(\\\"#outputData\\\").attr(\\\"data-currentdiv\\\"));setDivCount(parseInt($(\\\"#outputData\\\").attr(\\\"data-divcount\\\")));\")\n}\n</code></pre>\n\n",
      "PostDate": "2018-06-09T01:18:21.5278728Z",
      "LastEditDate": "2018-06-09T01:32:06.40984Z",
      "link": null
    },
    {
      "PostId": "ce6d80d3-42c8-4020-93ab-f6999d253e0d",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If that works, should that go into the next beta?",
      "EditableFormat": "markdown",
      "HTML": "<p>If that works, should that go into the next beta?</p>\n\n",
      "PostDate": "2018-06-09T01:30:54.6048735Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "00d40995-1944-4c92-b8d2-8f22cad5f599",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm still trying to make it break something.\r\n\r\n...and I don't know that Pixie is inclined to add anything else until after the official release of 5.8.  (In fact, I've promised him twice that I'd stop coming up with stuff, but... I am a code junkie.)\r\n\r\n---\r\nAnyway, try to break it with me.  I'm going to modify the ```InitInterface``` function so this doesn't have to be added to ```game.inituserinterface``` and see how that works out.\r\n\r\nI have added my code just after this line in ```InitInterface```:\r\n```\r\n    JS.getDivCount ()\r\n```\r\n\r\n---\r\nHere's my addition:\r\n```\r\n    // Added by KV to fix the issue when adding text from inituserinterface\r\n    if (not game.timeelapsed = 0) {\r\n      JS.eval (\"setCurrentDiv($(\\\"#outputData\\\").attr(\\\"data-currentdiv\\\"));setDivCount(parseInt($(\\\"#outputData\\\").attr(\\\"data-divcount\\\")));\")\r\n    }\r\n```\r\n\r\n---\r\nTesting it on your map game is the best test I can think of, and I've lost all my files during my recent war with the Windows 10 version 1803 update.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm still trying to make it break something.</p>\n<p>...and I don't know that Pixie is inclined to add anything else until after the official release of 5.8.  (In fact, I've promised him twice that I'd stop coming up with stuff, but... I am a code junkie.)</p>\n<hr>\n<p>Anyway, try to break it with me.  I'm going to modify the <code>InitInterface</code> function so this doesn't have to be added to <code>game.inituserinterface</code> and see how that works out.</p>\n<p>I have added my code just after this line in <code>InitInterface</code>:</p>\n<pre><code>    JS.getDivCount ()\n</code></pre>\n<hr>\n<p>Here's my addition:</p>\n<pre><code>    // Added by KV to fix the issue when adding text from inituserinterface\n    if (not game.timeelapsed = 0) {\n      JS.eval (\"setCurrentDiv($(\\\"#outputData\\\").attr(\\\"data-currentdiv\\\"));setDivCount(parseInt($(\\\"#outputData\\\").attr(\\\"data-divcount\\\")));\")\n    }\n</code></pre>\n<hr>\n<p>Testing it on your map game is the best test I can think of, and I've lost all my files during my recent war with the Windows 10 version 1803 update.</p>\n\n",
      "PostDate": "2018-06-09T01:35:45.6540393Z",
      "LastEditDate": "2018-06-09T02:40:30.89865Z",
      "link": null
    },
    {
      "PostId": "7dc3e4f0-1e81-4fed-9bae-014bf3390662",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is working perfectly on my end.  (I can even add the sidenav stuff in with a ```msg()``` in ```inituserinterface``` with no issues in a loaded saved game (no issues in a new game, either).)\r\n\r\nHow 'bout you, Dcoder?\r\n\r\n---\r\nNOTE\r\n\r\nYou still have to add a 2 second timeout to have anything actually show up in the divOutput element itself in a loaded saved game, but this was expected behavior.  We must give Quest time to load the element first.",
      "EditableFormat": "markdown",
      "HTML": "<p>This is working perfectly on my end.  (I can even add the sidenav stuff in with a <code>msg()</code> in <code>inituserinterface</code> with no issues in a loaded saved game (no issues in a new game, either).)</p>\n<p>How 'bout you, Dcoder?</p>\n<hr>\n<p>NOTE</p>\n<p>You still have to add a 2 second timeout to have anything actually show up in the divOutput element itself in a loaded saved game, but this was expected behavior.  We must give Quest time to load the element first.</p>\n\n",
      "PostDate": "2018-06-09T02:51:06.1064646Z",
      "LastEditDate": "2018-06-09T02:54:29.6553673Z",
      "link": null
    },
    {
      "PostId": "6756becb-fac7-466d-854c-9b17b3c567c2",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think that side image idea came from CheeseMyBaby, just to give credit where credit is due.",
      "EditableFormat": "markdown",
      "HTML": "<p>I think that side image idea came from CheeseMyBaby, just to give credit where credit is due.</p>\n\n",
      "PostDate": "2018-06-09T03:11:00.7819052Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d34d3fcb-d573-420f-ba2f-dcbf17ac15d9",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Wow, InitInterface is a long function.  I guess I should install beta 8 first...",
      "EditableFormat": "markdown",
      "HTML": "<p>Wow, InitInterface is a long function.  I guess I should install beta 8 first...</p>\n\n",
      "PostDate": "2018-06-09T03:21:15.9373912Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "78de271e-cfa2-4675-8302-43204de6f9ec",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm testing it from beta 8 on one machine and 5.7.2 on another.  Works good in both, as far as I can tell so far.\r\n\r\n(Finally got all the Windows updates installed!  Whew!!!  That only took TWO DAYS, and the only change I noticed was my desktop background was changed to BRIGHT PINK.  Gee, wow, thanks for that kick in the groin after I was down!  I picture someone at Microsoft saying, \"ha!  And THEN, we can change his desktop from Kate Upton in a bikini to a HOT PINK solid background.  He'll be PISSED!!!  Bwahahahahaha!!!\"))\r\n\r\n---\r\nPS\r\n\r\nIt works fine in ```game.inituserinterface```.  I just added it to ```InitInterface``` in Core.aslx to save myself the trouble of always having to remember to add it to each new game.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm testing it from beta 8 on one machine and 5.7.2 on another.  Works good in both, as far as I can tell so far.</p>\n<p>(Finally got all the Windows updates installed!  Whew!!!  That only took TWO DAYS, and the only change I noticed was my desktop background was changed to BRIGHT PINK.  Gee, wow, thanks for that kick in the groin after I was down!  I picture someone at Microsoft saying, \"ha!  And THEN, we can change his desktop from Kate Upton in a bikini to a HOT PINK solid background.  He'll be PISSED!!!  Bwahahahahaha!!!\"))</p>\n<hr>\n<p>PS</p>\n<p>It works fine in <code>game.inituserinterface</code>.  I just added it to <code>InitInterface</code> in Core.aslx to save myself the trouble of always having to remember to add it to each new game.</p>\n\n",
      "PostDate": "2018-06-09T03:28:37.6671834Z",
      "LastEditDate": "2018-06-09T03:32:09.3696645Z",
      "link": null
    },
    {
      "PostId": "bacd80be-c506-4963-8a11-f6fc2101e178",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "PPS\r\n\r\nI sent Pixie a link to this, but it's easy to add to a game.  Like I say, I really don't think he wants to add any more <s>potential problems</s> changes to Quest 5.8.0, even if they do seem to work well at first.  (Of course, this is just me thinking, which admittedly hurts a little and usually exacerbates things for everyone involved.)",
      "EditableFormat": "markdown",
      "HTML": "<p>PPS</p>\n<p>I sent Pixie a link to this, but it's easy to add to a game.  Like I say, I really don't think he wants to add any more <s>potential problems</s> changes to Quest 5.8.0, even if they do seem to work well at first.  (Of course, this is just me thinking, which admittedly hurts a little and usually exacerbates things for everyone involved.)</p>\n\n",
      "PostDate": "2018-06-09T03:37:14.8148625Z",
      "LastEditDate": "2018-06-09T03:37:55.4123523Z",
      "link": null
    },
    {
      "PostId": "eef43b07-e29b-40ac-830f-eb2fd6e4ad32",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Preliminary testing -- messaging from Init UI, like you said, seems to work fine.\r\n\r\nThe only problem I noticed so far is that on game reload, after moving the player around a few times, my map game slows down tremendously, like the game's resources have been stretched thin or something.  Doesn't happen in a new game.\r\n\r\nI can send you my latest game update if you want...\r\n\r\n>...and I don't know that Pixie is inclined to add anything else until after the official release of 5.8. (In fact, I've promised him twice that I'd stop coming up with stuff, but... I am a code junkie.)\r\n\r\nI can just hear Pixie telling you to \"STOP FIXING STUFF!\" :D",
      "EditableFormat": "markdown",
      "HTML": "<p>Preliminary testing -- messaging from Init UI, like you said, seems to work fine.</p>\n<p>The only problem I noticed so far is that on game reload, after moving the player around a few times, my map game slows down tremendously, like the game's resources have been stretched thin or something.  Doesn't happen in a new game.</p>\n<p>I can send you my latest game update if you want...</p>\n<blockquote>\n<p>...and I don't know that Pixie is inclined to add anything else until after the official release of 5.8. (In fact, I've promised him twice that I'd stop coming up with stuff, but... I am a code junkie.)</p>\n</blockquote>\n<p>I can just hear Pixie telling you to \"STOP FIXING STUFF!\" :D</p>\n\n",
      "PostDate": "2018-06-09T03:51:25.4172434Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7fe55cd9-96f4-4d9f-be78-1ea31b8b1f09",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That lag was from my GridImageLib stuff.  (I fixededed it.)",
      "EditableFormat": "markdown",
      "HTML": "<p>That lag was from my GridImageLib stuff.  (I fixededed it.)</p>\n\n",
      "PostDate": "2018-06-09T06:37:32.7070825Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2ff34082-5b49-4940-a1ce-c14a2a849f03",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well, I have finished a new version of my Map Demo replete with all of the new features that you guys have helped me out with.  As soon as the webplayer is updated from 5.7 to 5.8 (which might be a while), I will upload my demo and share!",
      "EditableFormat": "markdown",
      "HTML": "<p>Well, I have finished a new version of my Map Demo replete with all of the new features that you guys have helped me out with.  As soon as the webplayer is updated from 5.7 to 5.8 (which might be a while), I will upload my demo and share!</p>\n\n",
      "PostDate": "2018-06-18T07:06:58.8233797Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
