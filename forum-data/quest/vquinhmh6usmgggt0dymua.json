{
  "Topic": {
    "TopicId": "vquinhmh6usmgggt0dymua",
    "ForumId": "10",
    "Title": "Gamebook: Going between random pages? ",
    "LastUpdated": "2022-04-17T21:47:14.4758991Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "066ad89c-b81b-47bb-8c08-d62239d08d4a",
      "UserId": 409658,
      "Username": "makarr",
      "AvatarUrl": "https://i.imgur.com/MvVLHqIb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello! alrighty, here's the situation: I'm working in a gamebook for the first time, since it'll suit my current relatively simple project, and the main hurdle is one initial script.\r\n\r\nI suppose the easiest way to visualize it is something like tinder; you are presented a profile; matching would lead down a path of scenes, but the 'pass' script would switch the page to a different profile, randomly chosen out of the pool of pages. I suppose it could be easiest to be a function recalled every time, since it's the same command no matter which profile you're on\r\n\r\nI don't need it to exclude pages visited before and don't care if the same profile is randomly visited twice in a row, so hopefully that makes it easier! :)",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello! alrighty, here's the situation: I'm working in a gamebook for the first time, since it'll suit my current relatively simple project, and the main hurdle is one initial script.</p>\n<p>I suppose the easiest way to visualize it is something like tinder; you are presented a profile; matching would lead down a path of scenes, but the 'pass' script would switch the page to a different profile, randomly chosen out of the pool of pages. I suppose it could be easiest to be a function recalled every time, since it's the same command no matter which profile you're on</p>\n<p>I don't need it to exclude pages visited before and don't care if the same profile is randomly visited twice in a row, so hopefully that makes it easier! :)</p>\n\n",
      "PostDate": "2022-04-17T21:47:14.4758991Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "45d6c016-c7b7-4fc7-8bd8-0b33bd0e8aac",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think the simplest option would be to have a 'randomiser' script page, that sends you to a random profile whenever you visit it.\r\n\r\nOff the top of my head, something like:\r\n```\r\nprofiles = Split(\"some page;another page;a different page;more of these\")\r\nnumber = GetRandomInt(1, ListCount (profiles)) - 1\r\nplayer.parent = GetObject (ListItem (profiles, number))\r\n```\r\nWhere the string `some page;another page;a different page;more of these` is a list of page names that it could send you to.\r\n\r\nIf you wanted it to avoid duplicates, that would be:\r\n```\r\nif (not HasAttribute (this, \"profiles\")) {\r\n  // This line initialises the list of possibilities the first time we get here\r\n  this.profiles = Split(\"some page;another page;a different page;more of these\")\r\n}\r\nnumber = GetRandomInt(1, ListCount (profiles)) - 1\r\nnext_profile = GetObject (ListItem (profiles, number))\r\nlist remove (this.profiles, next_profile)\r\nif (ListCount (this, \"profiles\") = 0) {\r\n  // This block runs if this is the last profile the player hasn't seen.\r\n  // Here we reset the list and start again; if you want to do something else when the last one is visited, do it here \r\n  this.profiles = Split(\"some page;another page;a different page;more of these\")\r\n}\r\nplayer.parent = next_profile\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>I think the simplest option would be to have a 'randomiser' script page, that sends you to a random profile whenever you visit it.</p>\n<p>Off the top of my head, something like:</p>\n<pre><code>profiles = Split(\"some page;another page;a different page;more of these\")\nnumber = GetRandomInt(1, ListCount (profiles)) - 1\nplayer.parent = GetObject (ListItem (profiles, number))\n</code></pre>\n<p>Where the string <code>some page;another page;a different page;more of these</code> is a list of page names that it could send you to.</p>\n<p>If you wanted it to avoid duplicates, that would be:</p>\n<pre><code>if (not HasAttribute (this, \"profiles\")) {\n  // This line initialises the list of possibilities the first time we get here\n  this.profiles = Split(\"some page;another page;a different page;more of these\")\n}\nnumber = GetRandomInt(1, ListCount (profiles)) - 1\nnext_profile = GetObject (ListItem (profiles, number))\nlist remove (this.profiles, next_profile)\nif (ListCount (this, \"profiles\") = 0) {\n  // This block runs if this is the last profile the player hasn't seen.\n  // Here we reset the list and start again; if you want to do something else when the last one is visited, do it here \n  this.profiles = Split(\"some page;another page;a different page;more of these\")\n}\nplayer.parent = next_profile\n</code></pre>\n\n",
      "PostDate": "2022-04-17T22:40:36.9303546Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "66fb4099-6f91-4d75-95e0-9b438e7bc053",
      "UserId": 409658,
      "Username": "makarr",
      "AvatarUrl": "https://i.imgur.com/MvVLHqIb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Like, this as a page script?\r\n\r\n```\r\nprofiles = Split(\"Test1;Test2;Test3\")\r\nnumber = GetRandomInt(1, ListCount (profiles)) - 1\r\nplayer.parent = GetObject (ListItem (profiles, number))\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Like, this as a page script?</p>\n<pre><code>profiles = Split(\"Test1;Test2;Test3\")\nnumber = GetRandomInt(1, ListCount (profiles)) - 1\nplayer.parent = GetObject (ListItem (profiles, number))\n</code></pre>\n\n",
      "PostDate": "2022-04-18T00:24:43.566199Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e4bcd826-0d5a-4c35-a3c1-1f9dfc82a7c8",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think that should work :)",
      "EditableFormat": "markdown",
      "HTML": "<p>I think that should work :)</p>\n\n",
      "PostDate": "2022-04-18T08:25:06.9354052Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "44a5fb92-b0df-4a20-ab17-0d380ba75159",
      "UserId": 409658,
      "Username": "makarr",
      "AvatarUrl": "https://i.imgur.com/MvVLHqIb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Putting that as a script page and trying to go to that page results in this: \r\n\r\n```Error running script: Error compiling expression 'GetObject (ListItem (profiles, number))': FunctionCallElement: Could find not function 'GetObject(Object)'``` \r\n\r\nWhich is odd for the function itself to not be recognized. \r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Putting that as a script page and trying to go to that page results in this:</p>\n<p><code>Error running script: Error compiling expression 'GetObject (ListItem (profiles, number))': FunctionCallElement: Could find not function 'GetObject(Object)'</code></p>\n<p>Which is odd for the function itself to not be recognized.</p>\n\n",
      "PostDate": "2022-04-18T16:43:44.3421774Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9d6b38bc-8394-4c2e-b685-6ade712a8776",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ugh… type checking in Quest is weird. Sorry I missed that; was on my phone so it wasn't easy to test it.\r\n\r\nTry changing `ListItem` to `StringListItem`.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ugh… type checking in Quest is weird. Sorry I missed that; was on my phone so it wasn't easy to test it.</p>\n<p>Try changing <code>ListItem</code> to <code>StringListItem</code>.</p>\n\n",
      "PostDate": "2022-04-18T19:02:32.4554741Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7fb54206-df08-4d96-9bb0-0493f5fe714d",
      "UserId": 409658,
      "Username": "makarr",
      "AvatarUrl": "https://i.imgur.com/MvVLHqIb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That's not it; I think it's the GetObject function that's causing trouble...",
      "EditableFormat": "markdown",
      "HTML": "<p>That's not it; I think it's the GetObject function that's causing trouble...</p>\n\n",
      "PostDate": "2022-04-19T13:02:01.7744715Z",
      "LastEditDate": "2022-04-19T13:02:19.6846357Z",
      "link": null
    },
    {
      "PostId": "f244fc49-84b2-4cbd-8d54-c4c08b334baf",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> That's not it; I think it's the GetObject function that's causing trouble...\r\n\r\nThat is it. I made a test game, and can confirm that changing `ListItem` to `StringListItem` fixes that error.\r\n\r\nYou'll still get an error if one of the page names is spelled wrong in your list, but it would say `Error running script: Error evaluating expression 'GetBoolean(player.parent, \"runscript\") or GetBoolean(player.parent, \"runscriptonly\")': GetBoolean function expected object parameter but was passed 'null'`.\r\n\r\n\r\nThe issue is because `GetObject` and `ListItem` are both built-in functions. This means that Quest will attempt to save processing time by checking whether they have the right types before attempting to run them. `ListItem` can return either an object or a string, depending what type of data is in the list – so before allowing the line to run, the engine checks for the existence of typed functions `GetObject(string)` (which exists) and `GetObject(object)` (which doesn't). Even though we know in this case that the list's items are all strings, the error is based on the types that the `ListItem` function is hypothetically capable of returning. So it's necessary to explicitly use `StringListItem` or `ObjectListItem` if you put it inside another built-in function.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>That's not it; I think it's the GetObject function that's causing trouble...</p>\n</blockquote>\n<p>That is it. I made a test game, and can confirm that changing <code>ListItem</code> to <code>StringListItem</code> fixes that error.</p>\n<p>You'll still get an error if one of the page names is spelled wrong in your list, but it would say <code>Error running script: Error evaluating expression 'GetBoolean(player.parent, \"runscript\") or GetBoolean(player.parent, \"runscriptonly\")': GetBoolean function expected object parameter but was passed 'null'</code>.</p>\n<p>The issue is because <code>GetObject</code> and <code>ListItem</code> are both built-in functions. This means that Quest will attempt to save processing time by checking whether they have the right types before attempting to run them. <code>ListItem</code> can return either an object or a string, depending what type of data is in the list – so before allowing the line to run, the engine checks for the existence of typed functions <code>GetObject(string)</code> (which exists) and <code>GetObject(object)</code> (which doesn't). Even though we know in this case that the list's items are all strings, the error is based on the types that the <code>ListItem</code> function is hypothetically capable of returning. So it's necessary to explicitly use <code>StringListItem</code> or <code>ObjectListItem</code> if you put it inside another built-in function.</p>\n\n",
      "PostDate": "2022-04-19T17:24:45.2081212Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "efeb31ae-45d7-4882-bba4-4f11e981585f",
      "UserId": 409658,
      "Username": "makarr",
      "AvatarUrl": "https://i.imgur.com/MvVLHqIb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You're right! Sorry about that doubt-- and thank you so so much for working with me! ",
      "EditableFormat": "markdown",
      "HTML": "<p>You're right! Sorry about that doubt-- and thank you so so much for working with me!</p>\n\n",
      "PostDate": "2022-04-20T00:50:02.038095Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
