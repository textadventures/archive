{
  "Topic": {
    "TopicId": "tlh8chxnuei7pa76yhgqqq",
    "ForumId": "10",
    "Title": "No text when loading a saved game online (a couple of fixes)",
    "LastUpdated": "2017-10-23T16:02:08.3298737Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "8c5d0657-37cb-4bf6-8cfc-017e2bfcdbc6",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello,\r\n\r\nWhen the player enters SAVE instead of clicking on 'Save' during online play, Quest does not save the text on the screen.\r\n\r\nA couple of fixes:\r\n\r\n---\r\nDirty:\r\n```\r\n//Offline first:\r\nrequest (RequestSave, \"\")\r\n\r\n//Online cleanup\r\nJS.saveGame ()\r\nJS.afterSave ()\r\n```\r\n\r\n---\r\nNot so dirty:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.16853-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Loaded Save Tester\">\r\n    <gameid>68e8daeb-f2c6-4560-a6c2-b886785f742e</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <menufont>Georgia, serif</menufont>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description><![CDATA[When I load a saved game, I can't see this!<br/>]]></description>\r\n    <enter type=\"script\">\r\n      webCheck\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <command name=\"kv_saveCmd\">\r\n    <pattern>save</pattern>\r\n    <script><![CDATA[\r\n      JS.eval (\"addText (Date()+\\\"&nbsp;\\\") \")\r\n      if (not game.online) {\r\n        request (RequestSave, \"\")\r\n      }\r\n      else {\r\n        JS.saveGame ()\r\n        JS.afterSave ()\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <function name=\"webCheck\"><![CDATA[\r\n    JS.eval (\"addText(\\\"<br/>webCheck initialized<br/>\\\");var bool = false; if(webPlayer) {bool = true;ASLEvent('setOnline', bool);}else { bool = false; ASLEvent('setOnline', bool);}addText(\\\"<br/>webCheck complete<br/>\\\");\")\r\n  ]]></function>\r\n  <function name=\"setOnline\" parameters=\"bool\">\r\n    switch (bool) {\r\n      case (\"true\") {\r\n        msg (\"You are playing online!\")\r\n        game.online = true\r\n      }\r\n      case (\"false\") {\r\n        msg (\"You are playing in the desktop version.\")\r\n        game.online = false\r\n      }\r\n      default {\r\n        error (\"Error checking for online player.\")\r\n      }\r\n    }\r\n  </function>\r\n</asl>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello,</p>\n<p>When the player enters SAVE instead of clicking on 'Save' during online play, Quest does not save the text on the screen.</p>\n<p>A couple of fixes:</p>\n<hr>\n<p>Dirty:</p>\n<pre><code>//Offline first:\nrequest (RequestSave, \"\")\n\n//Online cleanup\nJS.saveGame ()\nJS.afterSave ()\n</code></pre>\n<hr>\n<p>Not so dirty:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.16853--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Loaded Save Tester\"&gt;\n    &lt;gameid&gt;68e8daeb-f2c6-4560-a6c2-b886785f742e&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;menufont&gt;Georgia, serif&lt;/menufont&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description&gt;&lt;![CDATA[When I load a saved game, I can't see this!&lt;br/&gt;]]&gt;&lt;/description&gt;\n    &lt;enter type=\"script\"&gt;\n      webCheck\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command name=\"kv_saveCmd\"&gt;\n    &lt;pattern&gt;save&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      JS.eval (\"addText (Date()+\\\"&amp;nbsp;\\\") \")\n      if (not game.online) {\n        request (RequestSave, \"\")\n      }\n      else {\n        JS.saveGame ()\n        JS.afterSave ()\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=\"webCheck\"&gt;&lt;![CDATA[\n    JS.eval (\"addText(\\\"&lt;br/&gt;webCheck initialized&lt;br/&gt;\\\");var bool = false; if(webPlayer) {bool = true;ASLEvent('setOnline', bool);}else { bool = false; ASLEvent('setOnline', bool);}addText(\\\"&lt;br/&gt;webCheck complete&lt;br/&gt;\\\");\")\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"setOnline\" parameters=\"bool\"&gt;\n    switch (bool) {\n      case (\"true\") {\n        msg (\"You are playing online!\")\n        game.online = true\n      }\n      case (\"false\") {\n        msg (\"You are playing in the desktop version.\")\n        game.online = false\n      }\n      default {\n        error (\"Error checking for online player.\")\n      }\n    }\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2017-10-23T16:02:08.3298737Z",
      "LastEditDate": "2017-10-25T17:57:48.2267845Z",
      "link": null
    }
  ]
}
