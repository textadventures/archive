{
  "Topic": {
    "TopicId": "nxj29uaaregc52vvevvdrq",
    "ForumId": "10",
    "Title": "Creating Dwarf-oriented RPG",
    "LastUpdated": "2018-07-21T15:35:28.8040764Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "a9e375bd-61e0-4c05-b752-cb6860ac98ed",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi all!\r\n\r\nIn this topic I will post my progress at making dwarf-RPG, which is means that it setting lies in underground world. Also, I probably will be asking for help here, because I'm started using Quest not so long ago, and not yet learned this engine properly.\r\n\r\n**Current progress:**\r\n\r\n1.  Monsters\r\na) Health, max health\r\nb)  Attack\r\nc) Random descriptions of monsters and their attacks\r\nd) Attacks with preparation\r\ne) Loot\r\n\r\n2. Character\r\na) Health, max health\r\nb) Energy, max energy\r\nc) Attack\r\nd) Money\r\ne) Full status command\r\nf) Сharacteristics - strength, agility, intelligence, vitality, armour\r\ng)  Armor\r\nh) Jewelry\r\ni) Shields\r\nj) Inventory size\r\n\r\n3. Items\r\na) Melee weapons\r\nb) Ranged weapons\r\nc) Magic weapons\r\nd) Food, potions\r\n\r\n4. Locations\r\na) Safe zones\r\nb) Chests\r\nc) Fast travels\r\n\r\n**Not yet made:**\r\n1) Several turns buffs from food and potions\r\n2) Shops\r\n3) Level system\r\n4) Quests\r\n5) Illustration of combat\r\n6) Monster respawn after some time\r\n7) Bank\r\n8) Loss of % of money after death and resurrection in nearest town\r\n9) NPC\r\n10) Bosses\r\n11) Interrupting attacks with preparation\r\n12) Music and ambience in locations\r\n\r\n**Optionally:**\r\n1) Crafting system\r\n2) Farming system\r\n3) Several savefiles\r\n4) Sound accompaniment of combat\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi all!</p>\n<p>In this topic I will post my progress at making dwarf-RPG, which is means that it setting lies in underground world. Also, I probably will be asking for help here, because I'm started using Quest not so long ago, and not yet learned this engine properly.</p>\n<p><strong>Current progress:</strong></p>\n<ol>\n<li>\n<p>Monsters<br>\na) Health, max health<br>\nb)  Attack<br>\nc) Random descriptions of monsters and their attacks<br>\nd) Attacks with preparation<br>\ne) Loot</p>\n</li>\n<li>\n<p>Character<br>\na) Health, max health<br>\nb) Energy, max energy<br>\nc) Attack<br>\nd) Money<br>\ne) Full status command<br>\nf) Сharacteristics - strength, agility, intelligence, vitality, armour<br>\ng)  Armor<br>\nh) Jewelry<br>\ni) Shields<br>\nj) Inventory size</p>\n</li>\n<li>\n<p>Items<br>\na) Melee weapons<br>\nb) Ranged weapons<br>\nc) Magic weapons<br>\nd) Food, potions</p>\n</li>\n<li>\n<p>Locations<br>\na) Safe zones<br>\nb) Chests<br>\nc) Fast travels</p>\n</li>\n</ol>\n<p><strong>Not yet made:</strong></p>\n<ol>\n<li>Several turns buffs from food and potions</li>\n<li>Shops</li>\n<li>Level system</li>\n<li>Quests</li>\n<li>Illustration of combat</li>\n<li>Monster respawn after some time</li>\n<li>Bank</li>\n<li>Loss of % of money after death and resurrection in nearest town</li>\n<li>NPC</li>\n<li>Bosses</li>\n<li>Interrupting attacks with preparation</li>\n<li>Music and ambience in locations</li>\n</ol>\n<p><strong>Optionally:</strong></p>\n<ol>\n<li>Crafting system</li>\n<li>Farming system</li>\n<li>Several savefiles</li>\n<li>Sound accompaniment of combat</li>\n</ol>\n\n",
      "PostDate": "2018-07-21T15:35:28.8040764Z",
      "LastEditDate": "2018-07-30T15:48:15.94507Z",
      "link": null
    },
    {
      "PostId": "15234cf9-7951-4a8d-bfa6-2d984d2c1838",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Just looking at the code you posted, it seems that the DoAttack function is missing a parameter.\r\nI'd guess the 4th parameter is named \"firearm\".\r\n\r\nYou'll need to go to the DoAttack function and add another parameter at the bottom of the list.",
      "EditableFormat": "markdown",
      "HTML": "<p>Just looking at the code you posted, it seems that the DoAttack function is missing a parameter.<br>\nI'd guess the 4th parameter is named \"firearm\".</p>\n<p>You'll need to go to the DoAttack function and add another parameter at the bottom of the list.</p>\n\n",
      "PostDate": "2018-07-21T15:45:34.6136176Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "86ff6842-1224-4bd0-b161-789b4fcedc64",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you! It worked!",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you! It worked!</p>\n\n",
      "PostDate": "2018-07-21T16:05:36.7052109Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "446ef8cd-7bc3-4a05-9531-0ba6e45ae1b0",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It seems that I again messed something. Pistol is shooting,  but the bullets count do not lowering. Would appreciate any help!\r\n\r\nCode:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"11\">\r\n    <gameid>7b6e3407-e81b-4f7b-b470-6c3a3f9f5b45</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <feature_advancedscripts />\r\n    <unresolvedcommandhandler type=\"script\">\r\n      msg (\"Er, what..?\")\r\n      game.notarealturn = true\r\n    </unresolvedcommandhandler>\r\n    <start type=\"script\">\r\n      // List of attackers\r\n      player.attackers = NewObjectList()\r\n      player.ammo = 35\r\n      // Status attributes\r\n      WeaponUpdate\r\n      player.statusattributes = NewStringDictionary()\r\n      dictionary add (player.statusattributes, \"hitpoints\", \"Hit points: !\")\r\n      dictionary add (player.statusattributes, \"ammo\", \"Spare ammo: !\")\r\n      dictionary add (player.statusattributes, \"equippedname\", \"Weapon: !\")\r\n      dictionary add (player.statusattributes, \"ammonote\", \"Ammo: !\")\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <beforefirstenter type=\"script\">\r\n      SpawnZombie (this)\r\n      SpawnZombie (this)\r\n    </beforefirstenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <feature_startscript />\r\n      <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n        player.alias = \"you\"\r\n        player.hitpoints = 250\r\n        player.damage = 3\r\n        player.attack = 0\r\n        player.defence = 0\r\n        player.armour = 0\r\n        player.changedhitpoints => {\r\n          if (player.hitpoints > 0) {\r\n            msg (\"Hits points now \" + player.hitpoints)\r\n          }\r\n          else {\r\n            msg (\"You are dead!\")\r\n            finish\r\n          }\r\n        }\r\n      ]]></attr>\r\n    </object>\r\n    <object name=\"spade\">\r\n      <inherit name=\"editor_object\" />\r\n      <listalias>spade</listalias>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>equip</value>\r\n        <value>Drop</value>\r\n      </inventoryverbs>\r\n      <feature_startscript />\r\n      <take />\r\n      <attr name=\"_initialise_\" type=\"script\">\r\n        this.damage = \"1d6\"\r\n        this.attack = 3\r\n      </attr>\r\n    </object>\r\n    <object name=\"pistol\">\r\n      <inherit name=\"editor_object\" />\r\n      <listalias>pistol</listalias>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>equip</value>\r\n        <value>Drop</value>\r\n        <value>reload</value>\r\n      </inventoryverbs>\r\n      <feature_startscript />\r\n      <take />\r\n      <look>Good for shooting zombies. Ammo: {pistol.ammo}/{pistol.ammomax}</look>\r\n      <attr name=\"_initialise_\" type=\"script\">\r\n        this.damage = \"2\"\r\n        this.attack = 0\r\n        this.firearmdamage = \"2d8\"\r\n        this.firearmattack = 3\r\n        this.ammo = 3\r\n        this.ammomax = 6\r\n      </attr>\r\n      <ontake type=\"script\">\r\n      </ontake>\r\n    </object>\r\n  </object>\r\n  <command>\r\n    <pattern>attack #object#</pattern>\r\n    <script>\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you can attack.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else {\r\n        if (player.equipped = null) {\r\n          DoAttack (player, player, object, false)\r\n        }\r\n        else {\r\n          DoAttack (player, player.equipped, object, false)\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>equip #object#</pattern>\r\n    <script>\r\n      if (HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you can wield.\")\r\n      }\r\n      else if (not HasAttribute(object, \"damage\")) {\r\n        msg (\"That's not something you can wield.\")\r\n      }\r\n      else if (not object.parent = player) {\r\n        msg (\"You are not carrying it.\")\r\n      }\r\n      else if (object = player.equipped) {\r\n        msg (\"You already have.\")\r\n      }\r\n      else {\r\n        if (player.equipped = null) {\r\n          msg (\"You equip your \" + GetDisplayAlias(object) + \".\")\r\n        }\r\n        else {\r\n          msg (\"You put away your \" + GetDisplayAlias(player.equipped) + \" and equip your \" + GetDisplayAlias(object) + \".\")\r\n          list add (player.equipped.inventoryverbs, \"Equip\")\r\n          list remove (player.equipped.inventoryverbs, \"Unequip\")\r\n          player.equipped.listalias = Replace(player.equipped.listalias, \" (equipped)\", \"\")\r\n        }\r\n        player.equipped = object\r\n        list add (object.inventoryverbs, \"Unequip\")\r\n        list remove (object.inventoryverbs, \"Equip\")\r\n        object.listalias = object.listalias + \" (equipped)\"\r\n        WeaponUpdate\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>unequip #object#</pattern>\r\n    <script>\r\n      if (not object = player.equipped) {\r\n        msg (\"You are not wielding it.\")\r\n      }\r\n      else {\r\n        msg (\"You put away your spade.\")\r\n        player.equipped = null\r\n        list add (object.inventoryverbs, \"Equip\")\r\n        list remove (object.inventoryverbs, \"Unequip\")\r\n        object.listalias = Replace(object.listalias, \" (equipped)\", \"\")\r\n        WeaponUpdate\r\n      }\r\n    </script>\r\n  </command>\r\n  <turnscript name=\"attackturnscript\">\r\n    <enabled />\r\n    <script>\r\n      if (not GetBoolean(game, \"notarealturn\")) {\r\n        list = NewObjectList()\r\n        foreach (obj, GetDirectChildren(player.parent)) {\r\n          if (HasBoolean(obj, \"dead\")) {\r\n            if (not obj.dead) {\r\n              DoAttack (obj, obj, player, false)\r\n              list add (list, obj)\r\n            }\r\n          }\r\n        }\r\n        foreach (obj, ListExclude(player.attackers, list)) {\r\n          if (not obj.dead and RandomChance(80)) {\r\n            obj.parent = player.parent\r\n            msg (CapFirst(obj.alias) + \" shambles into the area.\")\r\n            list add (list, obj)\r\n          }\r\n        }\r\n        player.attackers = list\r\n      }\r\n      game.notarealturn = false\r\n    </script>\r\n  </turnscript>\r\n  <command>\r\n    <pattern>shoot #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you need to shoot.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else if (player.equipped = null) {\r\n        msg (\"You don't have a firearm equipped.\")\r\n      }\r\n      else if (not HasInt(player.equipped, \"ammo\")) {\r\n        msg (\"You can't shoot a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (not player.equipped.ammo > 0) {\r\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and pull the trigger. Click. No ammo loaded.\")\r\n      }\r\n      else {\r\n        DoAttack (player, player.equipped, object, false)\r\n        WeaponUpdate\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <command>\r\n    <pattern>reload #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasInt(object, \"ammo\")) {\r\n        msg (\"You can't reload a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (player.ammo < 1) {\r\n        msg (\"You have no ammo.\")\r\n      }\r\n      else {\r\n        bullets = object.ammomax - object.ammo\r\n        if (bullets > player.ammo) {\r\n          bullets = player.ammo\r\n        }\r\n        player.ammo = player.ammo - bullets\r\n        object.ammo = object.ammo + bullets\r\n        msg (\"You put \" + bullets + \" bullets in it.\")\r\n        WeaponUpdate\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <function name=\"SpawnZombie\" parameters=\"room\"><![CDATA[\r\n    if (HasInt(game, \"crittercount\")) {\r\n      game.crittercount = game.crittercount + 1\r\n    }\r\n    else {\r\n      game.crittercount = 1\r\n    }\r\n    create (\"critter\" + game.crittercount)\r\n    obj = GetObject(\"critter\" + game.crittercount)\r\n    obj.parent = room\r\n    obj.displayverbs = Split(\"Look at;Attack;Shoot\", \";\")\r\n    obj.dead = false\r\n    obj.changedhitpoints => {\r\n      if (this.hitpoints < 1) {\r\n        msg (\"It is dead!\")\r\n        this.dead = true\r\n      }\r\n    }\r\n    names = Split(\"decipit;decomposing;shambling;disgusting;filthy;falling-apart\", \";\")\r\n    obj.alias = StringListItem(names, game.crittercount % ListCount(names)) + \" zombie\"\r\n    obj.listalias = CapFirst(obj.alias)\r\n    obj.look = ProcessText(\"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\")\r\n    obj.hitpoints = 10\r\n    obj.damage = 1\r\n    obj.attack = 0\r\n    obj.defence = 0\r\n    obj.armour = 0\r\n  ]]></function>\r\n  <function name=\"DoAttack\" parameters=\"attacker, weapon, target, firearm\"><![CDATA[\r\n    if (firearm) {\r\n      damageatt = \"firearmdamage\"\r\n      attackatt = \"firearmattack\"\r\n      weapon.ammo = weapon.ammo - 1\r\n    }\r\n    else {\r\n      damageatt = \"damage\"\r\n      attackatt = \"attack\"\r\n    }\r\n    roll = GetRandomInt(1, 20) + weapon.attack - target.defence\r\n    damage = DiceRoll(weapon.damage) * (100 - target.armour) / 100\r\n    if (damage < 1) {\r\n      damage = 1\r\n    }\r\n    if (roll > 15) {\r\n      damage = damage * 3\r\n      msg (CapFirst(attacker.alias) + \" attacks \" + target.alias + \" and gets a critical (\" + damage + \" hits)!\")\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else if (roll > 10) {\r\n      msg (CapFirst(attacker.alias) + \" attacks \" + target.alias + \" and hit (\" + damage + \" hits).\")\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else {\r\n      msg (CapFirst(attacker.alias) + \" attacks \" + target.alias + \" and misses...\")\r\n      WeaponUpdate\r\n    }\r\n  ]]></function>\r\n  <function name=\"WeaponUpdate\">\r\n    if (player.equipped = null) {\r\n      player.equippedname = \"-\"\r\n      player.ammonote = \"-\"\r\n    }\r\n    else {\r\n      player.equippedname = Replace (player.equipped.listalias, \" (equipped)\", \"\")\r\n      if (not HasAttribute(player.equipped, \"ammo\")) {\r\n        player.ammonote = \"-\"\r\n      }\r\n      else {\r\n        player.ammonote = player.equipped.ammo + \"/\" + player.equipped.ammomax\r\n      }\r\n    }\r\n  </function>\r\n</asl>\r\n\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>It seems that I again messed something. Pistol is shooting,  but the bullets count do not lowering. Would appreciate any help!</p>\n<p>Code:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"11\"&gt;\n    &lt;gameid&gt;7b6e3407-e81b-4f7b-b470-6c3a3f9f5b45&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;unresolvedcommandhandler type=\"script\"&gt;\n      msg (\"Er, what..?\")\n      game.notarealturn = true\n    &lt;/unresolvedcommandhandler&gt;\n    &lt;start type=\"script\"&gt;\n      // List of attackers\n      player.attackers = NewObjectList()\n      player.ammo = 35\n      // Status attributes\n      WeaponUpdate\n      player.statusattributes = NewStringDictionary()\n      dictionary add (player.statusattributes, \"hitpoints\", \"Hit points: !\")\n      dictionary add (player.statusattributes, \"ammo\", \"Spare ammo: !\")\n      dictionary add (player.statusattributes, \"equippedname\", \"Weapon: !\")\n      dictionary add (player.statusattributes, \"ammonote\", \"Ammo: !\")\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;beforefirstenter type=\"script\"&gt;\n      SpawnZombie (this)\n      SpawnZombie (this)\n    &lt;/beforefirstenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;feature_startscript /&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n        player.alias = \"you\"\n        player.hitpoints = 250\n        player.damage = 3\n        player.attack = 0\n        player.defence = 0\n        player.armour = 0\n        player.changedhitpoints =&gt; {\n          if (player.hitpoints &gt; 0) {\n            msg (\"Hits points now \" + player.hitpoints)\n          }\n          else {\n            msg (\"You are dead!\")\n            finish\n          }\n        }\n      ]]&gt;&lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"spade\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;listalias&gt;spade&lt;/listalias&gt;\n      &lt;inventoryverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;equip&lt;/value&gt;\n        &lt;value&gt;Drop&lt;/value&gt;\n      &lt;/inventoryverbs&gt;\n      &lt;feature_startscript /&gt;\n      &lt;take /&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n        this.damage = \"1d6\"\n        this.attack = 3\n      &lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"pistol\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;listalias&gt;pistol&lt;/listalias&gt;\n      &lt;inventoryverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;equip&lt;/value&gt;\n        &lt;value&gt;Drop&lt;/value&gt;\n        &lt;value&gt;reload&lt;/value&gt;\n      &lt;/inventoryverbs&gt;\n      &lt;feature_startscript /&gt;\n      &lt;take /&gt;\n      &lt;look&gt;Good for shooting zombies. Ammo: {pistol.ammo}/{pistol.ammomax}&lt;/look&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n        this.damage = \"2\"\n        this.attack = 0\n        this.firearmdamage = \"2d8\"\n        this.firearmattack = 3\n        this.ammo = 3\n        this.ammomax = 6\n      &lt;/attr&gt;\n      &lt;ontake type=\"script\"&gt;\n      &lt;/ontake&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;attack #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you can attack.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else {\n        if (player.equipped = null) {\n          DoAttack (player, player, object, false)\n        }\n        else {\n          DoAttack (player, player.equipped, object, false)\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;equip #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you can wield.\")\n      }\n      else if (not HasAttribute(object, \"damage\")) {\n        msg (\"That's not something you can wield.\")\n      }\n      else if (not object.parent = player) {\n        msg (\"You are not carrying it.\")\n      }\n      else if (object = player.equipped) {\n        msg (\"You already have.\")\n      }\n      else {\n        if (player.equipped = null) {\n          msg (\"You equip your \" + GetDisplayAlias(object) + \".\")\n        }\n        else {\n          msg (\"You put away your \" + GetDisplayAlias(player.equipped) + \" and equip your \" + GetDisplayAlias(object) + \".\")\n          list add (player.equipped.inventoryverbs, \"Equip\")\n          list remove (player.equipped.inventoryverbs, \"Unequip\")\n          player.equipped.listalias = Replace(player.equipped.listalias, \" (equipped)\", \"\")\n        }\n        player.equipped = object\n        list add (object.inventoryverbs, \"Unequip\")\n        list remove (object.inventoryverbs, \"Equip\")\n        object.listalias = object.listalias + \" (equipped)\"\n        WeaponUpdate\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;unequip #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not object = player.equipped) {\n        msg (\"You are not wielding it.\")\n      }\n      else {\n        msg (\"You put away your spade.\")\n        player.equipped = null\n        list add (object.inventoryverbs, \"Equip\")\n        list remove (object.inventoryverbs, \"Unequip\")\n        object.listalias = Replace(object.listalias, \" (equipped)\", \"\")\n        WeaponUpdate\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;turnscript name=\"attackturnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      if (not GetBoolean(game, \"notarealturn\")) {\n        list = NewObjectList()\n        foreach (obj, GetDirectChildren(player.parent)) {\n          if (HasBoolean(obj, \"dead\")) {\n            if (not obj.dead) {\n              DoAttack (obj, obj, player, false)\n              list add (list, obj)\n            }\n          }\n        }\n        foreach (obj, ListExclude(player.attackers, list)) {\n          if (not obj.dead and RandomChance(80)) {\n            obj.parent = player.parent\n            msg (CapFirst(obj.alias) + \" shambles into the area.\")\n            list add (list, obj)\n          }\n        }\n        player.attackers = list\n      }\n      game.notarealturn = false\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;shoot #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you need to shoot.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else if (player.equipped = null) {\n        msg (\"You don't have a firearm equipped.\")\n      }\n      else if (not HasInt(player.equipped, \"ammo\")) {\n        msg (\"You can't shoot a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (not player.equipped.ammo &gt; 0) {\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and pull the trigger. Click. No ammo loaded.\")\n      }\n      else {\n        DoAttack (player, player.equipped, object, false)\n        WeaponUpdate\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;reload #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasInt(object, \"ammo\")) {\n        msg (\"You can't reload a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (player.ammo &lt; 1) {\n        msg (\"You have no ammo.\")\n      }\n      else {\n        bullets = object.ammomax - object.ammo\n        if (bullets &gt; player.ammo) {\n          bullets = player.ammo\n        }\n        player.ammo = player.ammo - bullets\n        object.ammo = object.ammo + bullets\n        msg (\"You put \" + bullets + \" bullets in it.\")\n        WeaponUpdate\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=\"SpawnZombie\" parameters=\"room\"&gt;&lt;![CDATA[\n    if (HasInt(game, \"crittercount\")) {\n      game.crittercount = game.crittercount + 1\n    }\n    else {\n      game.crittercount = 1\n    }\n    create (\"critter\" + game.crittercount)\n    obj = GetObject(\"critter\" + game.crittercount)\n    obj.parent = room\n    obj.displayverbs = Split(\"Look at;Attack;Shoot\", \";\")\n    obj.dead = false\n    obj.changedhitpoints =&gt; {\n      if (this.hitpoints &lt; 1) {\n        msg (\"It is dead!\")\n        this.dead = true\n      }\n    }\n    names = Split(\"decipit;decomposing;shambling;disgusting;filthy;falling-apart\", \";\")\n    obj.alias = StringListItem(names, game.crittercount % ListCount(names)) + \" zombie\"\n    obj.listalias = CapFirst(obj.alias)\n    obj.look = ProcessText(\"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\")\n    obj.hitpoints = 10\n    obj.damage = 1\n    obj.attack = 0\n    obj.defence = 0\n    obj.armour = 0\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"DoAttack\" parameters=\"attacker, weapon, target, firearm\"&gt;&lt;![CDATA[\n    if (firearm) {\n      damageatt = \"firearmdamage\"\n      attackatt = \"firearmattack\"\n      weapon.ammo = weapon.ammo - 1\n    }\n    else {\n      damageatt = \"damage\"\n      attackatt = \"attack\"\n    }\n    roll = GetRandomInt(1, 20) + weapon.attack - target.defence\n    damage = DiceRoll(weapon.damage) * (100 - target.armour) / 100\n    if (damage &lt; 1) {\n      damage = 1\n    }\n    if (roll &gt; 15) {\n      damage = damage * 3\n      msg (CapFirst(attacker.alias) + \" attacks \" + target.alias + \" and gets a critical (\" + damage + \" hits)!\")\n      target.hitpoints = target.hitpoints - damage\n    }\n    else if (roll &gt; 10) {\n      msg (CapFirst(attacker.alias) + \" attacks \" + target.alias + \" and hit (\" + damage + \" hits).\")\n      target.hitpoints = target.hitpoints - damage\n    }\n    else {\n      msg (CapFirst(attacker.alias) + \" attacks \" + target.alias + \" and misses...\")\n      WeaponUpdate\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"WeaponUpdate\"&gt;\n    if (player.equipped = null) {\n      player.equippedname = \"-\"\n      player.ammonote = \"-\"\n    }\n    else {\n      player.equippedname = Replace (player.equipped.listalias, \" (equipped)\", \"\")\n      if (not HasAttribute(player.equipped, \"ammo\")) {\n        player.ammonote = \"-\"\n      }\n      else {\n        player.ammonote = player.equipped.ammo + \"/\" + player.equipped.ammomax\n      }\n    }\n  &lt;/function&gt;\n&lt;/asl&gt;\n\n</code></pre>\n\n",
      "PostDate": "2018-07-22T11:05:54.9673583Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "67fbc6ac-4323-436b-a29f-31b335cfcd81",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "In the `shoot` command, you have the line:\r\n* `DoAttack (player, player.equipped, object, false)`\r\n\r\nThe last parameter \"firearm\" tells the DoAttack command whether you want to fire the pistol, or hit the zombie with it. So in the \"shoot\" command, you want to change that \"false\" to \"true\"",
      "EditableFormat": "markdown",
      "HTML": "<p>In the <code>shoot</code> command, you have the line:</p>\n<ul>\n<li><code>DoAttack (player, player.equipped, object, false)</code></li>\n</ul>\n<p>The last parameter \"firearm\" tells the DoAttack command whether you want to fire the pistol, or hit the zombie with it. So in the \"shoot\" command, you want to change that \"false\" to \"true\"</p>\n\n",
      "PostDate": "2018-07-22T11:12:12.9094146Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "877b0438-521d-41bb-89a1-95d678a5a705",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Actaully it is false. Or that's how The Pixie set it up.",
      "EditableFormat": "markdown",
      "HTML": "<p>Actaully it is false. Or that's how The Pixie set it up.</p>\n\n",
      "PostDate": "2018-07-22T23:10:36.1415723Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f8e8fcaf-ffb6-4916-bc2f-1efb5b326837",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you, Mrangel, it worked!",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you, Mrangel, it worked!</p>\n\n",
      "PostDate": "2018-07-23T15:48:27.942972Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6b6e9933-2ad7-4dee-855e-9c258feaecf8",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay, moving on individual attack descriptions... It seems what Quest need descriptions for attack without any weapon and because it lacks these descriptions it shows error, when I try to hit zombie without weapon. But this part of tutorial is missing in Pixie's tutorial, that's strange.\r\n\r\nError:\r\n```\r\nError running script: Error compiling expression 'Replace(s, \"#Attacker#\", CapFirst(GetDisplayAlias(attacker)))': FunctionCallElement: Could find not function 'Replace(Object; String; String)'\r\n```\r\n\r\nI tried to add \"this.critdesc\", \"this.attackdesc\" and \"this.missdesc\" to player's initialisation script, but this didint done anything.  How should I do to add these descriptions? Would appreciate any help!\r\n\r\nCode:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"11\">\r\n    <gameid>7b6e3407-e81b-4f7b-b470-6c3a3f9f5b45</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <feature_advancedscripts />\r\n    <unresolvedcommandhandler type=\"script\">\r\n      msg (\"Er, what..?\")\r\n      game.notarealturn = true\r\n    </unresolvedcommandhandler>\r\n    <start type=\"script\">\r\n      // List of attackers\r\n      player.attackers = NewObjectList()\r\n      player.ammo = 35\r\n      // Status attributes\r\n      WeaponUpdate\r\n      player.statusattributes = NewStringDictionary()\r\n      dictionary add (player.statusattributes, \"hitpoints\", \"Hit points: !\")\r\n      dictionary add (player.statusattributes, \"ammo\", \"Spare ammo: !\")\r\n      dictionary add (player.statusattributes, \"equippedname\", \"Weapon: !\")\r\n      dictionary add (player.statusattributes, \"ammonote\", \"Ammo: !\")\r\n    </start>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <beforefirstenter type=\"script\">\r\n      SpawnZombie (this)\r\n      SpawnZombie (this)\r\n    </beforefirstenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <feature_startscript />\r\n      <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n        player.alias = \"you\"\r\n        player.hitpoints = 250\r\n        player.damage = 0\r\n        player.attack = 3\r\n        player.defence = 0\r\n        player.armour = 0\r\n        player.changedhitpoints => {\r\n          if (player.hitpoints > 0) {\r\n            msg (\"Hits points now \" + player.hitpoints)\r\n          }\r\n          else {\r\n            msg (\"You are dead!\")\r\n            finish\r\n          }\r\n        }\r\n      ]]></attr>\r\n    </object>\r\n    <object name=\"spade\">\r\n      <inherit name=\"editor_object\" />\r\n      <listalias>spade</listalias>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>equip</value>\r\n        <value>Drop</value>\r\n      </inventoryverbs>\r\n      <feature_startscript />\r\n      <take />\r\n      <attr name=\"_initialise_\" type=\"script\">\r\n        this.damage = \"1d6\"\r\n        this.attack = 3\r\n        this.critdesc = \"You smash the spade down on #target# (#hits# hits).\"\r\n        this.attackdesc = \"You swing the spade at #target# (#hits# hits).\"\r\n        this.missdesc = \"You swing wildly and entirely miss #target#.\"\r\n      </attr>\r\n    </object>\r\n    <object name=\"pistol\">\r\n      <inherit name=\"editor_object\" />\r\n      <listalias>pistol</listalias>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>equip</value>\r\n        <value>Drop</value>\r\n        <value>reload</value>\r\n      </inventoryverbs>\r\n      <feature_startscript />\r\n      <take />\r\n      <look>Good for shooting zombies. Ammo: {pistol.ammo}/{pistol.ammomax}</look>\r\n      <attr name=\"_initialise_\" type=\"script\">\r\n        this.damage = \"2\"\r\n        this.attack = 0\r\n        this.firearmdamage = \"2d8\"\r\n        this.firearmattack = 3\r\n        this.ammo = 3\r\n        this.ammomax = 6\r\n        this.critdesc = \"A well placed shot with the pistol on #target# (#hits# hits).\"\r\n        this.attackdesc = \"You shot the pistol at #target# (#hits# hits).\"\r\n        this.missdesc = \"You shoot wildly and entirely miss #target#.\"\r\n      </attr>\r\n      <ontake type=\"script\">\r\n      </ontake>\r\n    </object>\r\n  </object>\r\n  <command>\r\n    <pattern>attack #object#</pattern>\r\n    <script>\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you can attack.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else {\r\n        if (player.equipped = null) {\r\n          DoAttack (player, player, object, false)\r\n        }\r\n        else {\r\n          DoAttack (player, player.equipped, object, false)\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>equip #object#</pattern>\r\n    <script>\r\n      if (HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you can wield.\")\r\n      }\r\n      else if (not HasAttribute(object, \"damage\")) {\r\n        msg (\"That's not something you can wield.\")\r\n      }\r\n      else if (not object.parent = player) {\r\n        msg (\"You are not carrying it.\")\r\n      }\r\n      else if (object = player.equipped) {\r\n        msg (\"You already have.\")\r\n      }\r\n      else {\r\n        if (player.equipped = null) {\r\n          msg (\"You equip your \" + GetDisplayAlias(object) + \".\")\r\n        }\r\n        else {\r\n          msg (\"You put away your \" + GetDisplayAlias(player.equipped) + \" and equip your \" + GetDisplayAlias(object) + \".\")\r\n          list add (player.equipped.inventoryverbs, \"Equip\")\r\n          list remove (player.equipped.inventoryverbs, \"Unequip\")\r\n          player.equipped.listalias = Replace(player.equipped.listalias, \" (equipped)\", \"\")\r\n        }\r\n        player.equipped = object\r\n        list add (object.inventoryverbs, \"Unequip\")\r\n        list remove (object.inventoryverbs, \"Equip\")\r\n        object.listalias = object.listalias + \" (equipped)\"\r\n        WeaponUpdate\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>unequip #object#</pattern>\r\n    <script>\r\n      if (not object = player.equipped) {\r\n        msg (\"You are not wielding it.\")\r\n      }\r\n      else {\r\n        msg (\"You put away your spade.\")\r\n        player.equipped = null\r\n        list add (object.inventoryverbs, \"Equip\")\r\n        list remove (object.inventoryverbs, \"Unequip\")\r\n        object.listalias = Replace(object.listalias, \" (equipped)\", \"\")\r\n        WeaponUpdate\r\n      }\r\n    </script>\r\n  </command>\r\n  <turnscript name=\"attackturnscript\">\r\n    <enabled />\r\n    <script>\r\n      if (not GetBoolean(game, \"notarealturn\")) {\r\n        list = NewObjectList()\r\n        foreach (obj, GetDirectChildren(player.parent)) {\r\n          if (HasBoolean(obj, \"dead\")) {\r\n            if (not obj.dead) {\r\n              DoAttack (obj, obj, player, false)\r\n              list add (list, obj)\r\n            }\r\n          }\r\n        }\r\n        foreach (obj, ListExclude(player.attackers, list)) {\r\n          if (not obj.dead and RandomChance(80)) {\r\n            obj.parent = player.parent\r\n            msg (CapFirst(obj.alias) + \" shambles into the area.\")\r\n            list add (list, obj)\r\n          }\r\n        }\r\n        player.attackers = list\r\n      }\r\n      game.notarealturn = false\r\n    </script>\r\n  </turnscript>\r\n  <command>\r\n    <pattern>shoot #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you need to shoot.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else if (player.equipped = null) {\r\n        msg (\"You don't have a firearm equipped.\")\r\n      }\r\n      else if (not HasInt(player.equipped, \"ammo\")) {\r\n        msg (\"You can't shoot a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (not player.equipped.ammo > 0) {\r\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and pull the trigger. Click. No ammo loaded.\")\r\n      }\r\n      else {\r\n        DoAttack (player, player.equipped, object, true)\r\n        WeaponUpdate\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <command>\r\n    <pattern>reload #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasInt(object, \"ammo\")) {\r\n        msg (\"You can't reload a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (player.ammo < 1) {\r\n        msg (\"You have no ammo.\")\r\n      }\r\n      else {\r\n        bullets = object.ammomax - object.ammo\r\n        if (bullets > player.ammo) {\r\n          bullets = player.ammo\r\n        }\r\n        player.ammo = player.ammo - bullets\r\n        object.ammo = object.ammo + bullets\r\n        msg (\"You put \" + bullets + \" bullets in it.\")\r\n        WeaponUpdate\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <function name=\"SpawnZombie\" parameters=\"room\"><![CDATA[\r\n    if (HasInt(game, \"crittercount\")) {\r\n      game.crittercount = game.crittercount + 1\r\n    }\r\n    else {\r\n      game.crittercount = 1\r\n    }\r\n    create (\"critter\" + game.crittercount)\r\n    obj = GetObject(\"critter\" + game.crittercount)\r\n    obj.parent = room\r\n    obj.displayverbs = Split(\"Look at;Attack;Shoot\", \";\")\r\n    obj.dead = false\r\n    obj.changedhitpoints => {\r\n      if (this.hitpoints < 1) {\r\n        msg (\"It is dead!\")\r\n        this.dead = true\r\n      }\r\n    }\r\n    names = Split(\"decipit;decomposing;shambling;disgusting;filthy;falling-apart\", \";\")\r\n    obj.alias = StringListItem(names, game.crittercount % ListCount(names)) + \" zombie\"\r\n    obj.listalias = CapFirst(obj.alias)\r\n    obj.look = ProcessText(\"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\")\r\n    obj.hitpoints = 10\r\n    obj.damage = 1\r\n    obj.attack = 0\r\n    obj.defence = 0\r\n    obj.armour = 0\r\n    obj.critdesc = \"A well-placed blow by #attacker# sends you reeling (#hits# hits).\"\r\n    obj.attackdesc = \"#Attacker# has hit you (#hits# hits).\"\r\n    obj.missdesc = \"#Attacker# misses you.\"\r\n  ]]></function>\r\n  <function name=\"DoAttack\" parameters=\"attacker, weapon, target, firearm\"><![CDATA[\r\n    if (firearm) {\r\n      damageatt = \"firearmdamage\"\r\n      attackatt = \"firearmattack\"\r\n      weapon.ammo = weapon.ammo - 1\r\n    }\r\n    else {\r\n      damageatt = \"damage\"\r\n      attackatt = \"attack\"\r\n    }\r\n    roll = GetRandomInt(1, 20) + weapon.attack - target.defence\r\n    damage = DiceRoll(weapon.damage) * (100 - target.armour) / 100\r\n    if (damage < 1) {\r\n      damage = 1\r\n    }\r\n    if (roll > 15) {\r\n      damage = damage * 3\r\n      AttackReport (weapon.critdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else if (roll > 10) {\r\n      AttackReport (weapon.attackdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else {\r\n      AttackReport (weapon.missdesc, attacker, target, 0)\r\n    }\r\n  ]]></function>\r\n  <function name=\"WeaponUpdate\">\r\n    if (player.equipped = null) {\r\n      player.equippedname = \"-\"\r\n      player.ammonote = \"-\"\r\n    }\r\n    else {\r\n      player.equippedname = Replace (player.equipped.listalias, \" (equipped)\", \"\")\r\n      if (not HasAttribute(player.equipped, \"ammo\")) {\r\n        player.ammonote = \"-\"\r\n      }\r\n      else {\r\n        player.ammonote = player.equipped.ammo + \"/\" + player.equipped.ammomax\r\n      }\r\n    }\r\n  </function>\r\n  <function name=\"AttackReport\" parameters=\"s, attacker, target, hits\">\r\n    s = Replace(s, \"#Attacker#\", CapFirst(GetDisplayAlias(attacker)))\r\n    s = Replace(s, \"#attacker#\", GetDisplayAlias(attacker))\r\n    s = Replace(s, \"#Target#\", CapFirst(GetDisplayAlias(target)))\r\n    s = Replace(s, \"#target#\", GetDisplayAlias(target))\r\n    s = Replace(s, \"#hits#\", \"\" + hits)\r\n    msg (s)\r\n  </function>\r\n</asl>\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay, moving on individual attack descriptions... It seems what Quest need descriptions for attack without any weapon and because it lacks these descriptions it shows error, when I try to hit zombie without weapon. But this part of tutorial is missing in Pixie's tutorial, that's strange.</p>\n<p>Error:</p>\n<pre><code>Error running script: Error compiling expression 'Replace(s, \"#Attacker#\", CapFirst(GetDisplayAlias(attacker)))': FunctionCallElement: Could find not function 'Replace(Object; String; String)'\n</code></pre>\n<p>I tried to add \"this.critdesc\", \"this.attackdesc\" and \"this.missdesc\" to player's initialisation script, but this didint done anything.  How should I do to add these descriptions? Would appreciate any help!</p>\n<p>Code:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"11\"&gt;\n    &lt;gameid&gt;7b6e3407-e81b-4f7b-b470-6c3a3f9f5b45&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;unresolvedcommandhandler type=\"script\"&gt;\n      msg (\"Er, what..?\")\n      game.notarealturn = true\n    &lt;/unresolvedcommandhandler&gt;\n    &lt;start type=\"script\"&gt;\n      // List of attackers\n      player.attackers = NewObjectList()\n      player.ammo = 35\n      // Status attributes\n      WeaponUpdate\n      player.statusattributes = NewStringDictionary()\n      dictionary add (player.statusattributes, \"hitpoints\", \"Hit points: !\")\n      dictionary add (player.statusattributes, \"ammo\", \"Spare ammo: !\")\n      dictionary add (player.statusattributes, \"equippedname\", \"Weapon: !\")\n      dictionary add (player.statusattributes, \"ammonote\", \"Ammo: !\")\n    &lt;/start&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;beforefirstenter type=\"script\"&gt;\n      SpawnZombie (this)\n      SpawnZombie (this)\n    &lt;/beforefirstenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;feature_startscript /&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n        player.alias = \"you\"\n        player.hitpoints = 250\n        player.damage = 0\n        player.attack = 3\n        player.defence = 0\n        player.armour = 0\n        player.changedhitpoints =&gt; {\n          if (player.hitpoints &gt; 0) {\n            msg (\"Hits points now \" + player.hitpoints)\n          }\n          else {\n            msg (\"You are dead!\")\n            finish\n          }\n        }\n      ]]&gt;&lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"spade\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;listalias&gt;spade&lt;/listalias&gt;\n      &lt;inventoryverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;equip&lt;/value&gt;\n        &lt;value&gt;Drop&lt;/value&gt;\n      &lt;/inventoryverbs&gt;\n      &lt;feature_startscript /&gt;\n      &lt;take /&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n        this.damage = \"1d6\"\n        this.attack = 3\n        this.critdesc = \"You smash the spade down on #target# (#hits# hits).\"\n        this.attackdesc = \"You swing the spade at #target# (#hits# hits).\"\n        this.missdesc = \"You swing wildly and entirely miss #target#.\"\n      &lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"pistol\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;listalias&gt;pistol&lt;/listalias&gt;\n      &lt;inventoryverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;equip&lt;/value&gt;\n        &lt;value&gt;Drop&lt;/value&gt;\n        &lt;value&gt;reload&lt;/value&gt;\n      &lt;/inventoryverbs&gt;\n      &lt;feature_startscript /&gt;\n      &lt;take /&gt;\n      &lt;look&gt;Good for shooting zombies. Ammo: {pistol.ammo}/{pistol.ammomax}&lt;/look&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n        this.damage = \"2\"\n        this.attack = 0\n        this.firearmdamage = \"2d8\"\n        this.firearmattack = 3\n        this.ammo = 3\n        this.ammomax = 6\n        this.critdesc = \"A well placed shot with the pistol on #target# (#hits# hits).\"\n        this.attackdesc = \"You shot the pistol at #target# (#hits# hits).\"\n        this.missdesc = \"You shoot wildly and entirely miss #target#.\"\n      &lt;/attr&gt;\n      &lt;ontake type=\"script\"&gt;\n      &lt;/ontake&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;attack #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you can attack.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else {\n        if (player.equipped = null) {\n          DoAttack (player, player, object, false)\n        }\n        else {\n          DoAttack (player, player.equipped, object, false)\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;equip #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you can wield.\")\n      }\n      else if (not HasAttribute(object, \"damage\")) {\n        msg (\"That's not something you can wield.\")\n      }\n      else if (not object.parent = player) {\n        msg (\"You are not carrying it.\")\n      }\n      else if (object = player.equipped) {\n        msg (\"You already have.\")\n      }\n      else {\n        if (player.equipped = null) {\n          msg (\"You equip your \" + GetDisplayAlias(object) + \".\")\n        }\n        else {\n          msg (\"You put away your \" + GetDisplayAlias(player.equipped) + \" and equip your \" + GetDisplayAlias(object) + \".\")\n          list add (player.equipped.inventoryverbs, \"Equip\")\n          list remove (player.equipped.inventoryverbs, \"Unequip\")\n          player.equipped.listalias = Replace(player.equipped.listalias, \" (equipped)\", \"\")\n        }\n        player.equipped = object\n        list add (object.inventoryverbs, \"Unequip\")\n        list remove (object.inventoryverbs, \"Equip\")\n        object.listalias = object.listalias + \" (equipped)\"\n        WeaponUpdate\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;unequip #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not object = player.equipped) {\n        msg (\"You are not wielding it.\")\n      }\n      else {\n        msg (\"You put away your spade.\")\n        player.equipped = null\n        list add (object.inventoryverbs, \"Equip\")\n        list remove (object.inventoryverbs, \"Unequip\")\n        object.listalias = Replace(object.listalias, \" (equipped)\", \"\")\n        WeaponUpdate\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;turnscript name=\"attackturnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      if (not GetBoolean(game, \"notarealturn\")) {\n        list = NewObjectList()\n        foreach (obj, GetDirectChildren(player.parent)) {\n          if (HasBoolean(obj, \"dead\")) {\n            if (not obj.dead) {\n              DoAttack (obj, obj, player, false)\n              list add (list, obj)\n            }\n          }\n        }\n        foreach (obj, ListExclude(player.attackers, list)) {\n          if (not obj.dead and RandomChance(80)) {\n            obj.parent = player.parent\n            msg (CapFirst(obj.alias) + \" shambles into the area.\")\n            list add (list, obj)\n          }\n        }\n        player.attackers = list\n      }\n      game.notarealturn = false\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;shoot #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you need to shoot.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else if (player.equipped = null) {\n        msg (\"You don't have a firearm equipped.\")\n      }\n      else if (not HasInt(player.equipped, \"ammo\")) {\n        msg (\"You can't shoot a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (not player.equipped.ammo &gt; 0) {\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and pull the trigger. Click. No ammo loaded.\")\n      }\n      else {\n        DoAttack (player, player.equipped, object, true)\n        WeaponUpdate\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;reload #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasInt(object, \"ammo\")) {\n        msg (\"You can't reload a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (player.ammo &lt; 1) {\n        msg (\"You have no ammo.\")\n      }\n      else {\n        bullets = object.ammomax - object.ammo\n        if (bullets &gt; player.ammo) {\n          bullets = player.ammo\n        }\n        player.ammo = player.ammo - bullets\n        object.ammo = object.ammo + bullets\n        msg (\"You put \" + bullets + \" bullets in it.\")\n        WeaponUpdate\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=\"SpawnZombie\" parameters=\"room\"&gt;&lt;![CDATA[\n    if (HasInt(game, \"crittercount\")) {\n      game.crittercount = game.crittercount + 1\n    }\n    else {\n      game.crittercount = 1\n    }\n    create (\"critter\" + game.crittercount)\n    obj = GetObject(\"critter\" + game.crittercount)\n    obj.parent = room\n    obj.displayverbs = Split(\"Look at;Attack;Shoot\", \";\")\n    obj.dead = false\n    obj.changedhitpoints =&gt; {\n      if (this.hitpoints &lt; 1) {\n        msg (\"It is dead!\")\n        this.dead = true\n      }\n    }\n    names = Split(\"decipit;decomposing;shambling;disgusting;filthy;falling-apart\", \";\")\n    obj.alias = StringListItem(names, game.crittercount % ListCount(names)) + \" zombie\"\n    obj.listalias = CapFirst(obj.alias)\n    obj.look = ProcessText(\"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\")\n    obj.hitpoints = 10\n    obj.damage = 1\n    obj.attack = 0\n    obj.defence = 0\n    obj.armour = 0\n    obj.critdesc = \"A well-placed blow by #attacker# sends you reeling (#hits# hits).\"\n    obj.attackdesc = \"#Attacker# has hit you (#hits# hits).\"\n    obj.missdesc = \"#Attacker# misses you.\"\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"DoAttack\" parameters=\"attacker, weapon, target, firearm\"&gt;&lt;![CDATA[\n    if (firearm) {\n      damageatt = \"firearmdamage\"\n      attackatt = \"firearmattack\"\n      weapon.ammo = weapon.ammo - 1\n    }\n    else {\n      damageatt = \"damage\"\n      attackatt = \"attack\"\n    }\n    roll = GetRandomInt(1, 20) + weapon.attack - target.defence\n    damage = DiceRoll(weapon.damage) * (100 - target.armour) / 100\n    if (damage &lt; 1) {\n      damage = 1\n    }\n    if (roll &gt; 15) {\n      damage = damage * 3\n      AttackReport (weapon.critdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else if (roll &gt; 10) {\n      AttackReport (weapon.attackdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else {\n      AttackReport (weapon.missdesc, attacker, target, 0)\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"WeaponUpdate\"&gt;\n    if (player.equipped = null) {\n      player.equippedname = \"-\"\n      player.ammonote = \"-\"\n    }\n    else {\n      player.equippedname = Replace (player.equipped.listalias, \" (equipped)\", \"\")\n      if (not HasAttribute(player.equipped, \"ammo\")) {\n        player.ammonote = \"-\"\n      }\n      else {\n        player.ammonote = player.equipped.ammo + \"/\" + player.equipped.ammomax\n      }\n    }\n  &lt;/function&gt;\n  &lt;function name=\"AttackReport\" parameters=\"s, attacker, target, hits\"&gt;\n    s = Replace(s, \"#Attacker#\", CapFirst(GetDisplayAlias(attacker)))\n    s = Replace(s, \"#attacker#\", GetDisplayAlias(attacker))\n    s = Replace(s, \"#Target#\", CapFirst(GetDisplayAlias(target)))\n    s = Replace(s, \"#target#\", GetDisplayAlias(target))\n    s = Replace(s, \"#hits#\", \"\" + hits)\n    msg (s)\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2018-07-23T18:18:26.7753936Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "92b4223f-ad46-4109-8063-71cb89c4796b",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You'll have to add something like this:\r\n\r\n```\r\nplayer.critdesc = \"You attack #target# with your bare hands and get a critical (#hits# hits).\"\r\nplayer.attackdesc = \"You attack #target# with your bare hands and hit (#hits# hits).\"\r\nplayer.missdesc = \"You swing wildly and entirely miss #target#.\"\r\n```\r\n\r\nAdding a this.critdesc thing works too. I just think it's easier this way.",
      "EditableFormat": "markdown",
      "HTML": "<p>You'll have to add something like this:</p>\n<pre><code>player.critdesc = \"You attack #target# with your bare hands and get a critical (#hits# hits).\"\nplayer.attackdesc = \"You attack #target# with your bare hands and hit (#hits# hits).\"\nplayer.missdesc = \"You swing wildly and entirely miss #target#.\"\n</code></pre>\n<p>Adding a this.critdesc thing works too. I just think it's easier this way.</p>\n\n",
      "PostDate": "2018-07-23T18:37:58.7316272Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5797d42c-c92c-4c91-947c-a35472fe207e",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "personally, you should have an 'unarmed' (as your no weapon) Object, just like you'd have a 'katana' (weapon) Object, as this will (should, meh) work with Pixie's combat library, instead of you having to manually code in your own combat stuff for dealing with not using a weapon. As this lets you easily give it values/attributes and etc abilities if you want to have some advanced 'unarmed' combat (different types of punches, kicks, claws, \"power fists\", \"spiked/brass knuckles\", \"pointed/spiked/dagger boots\", and etc unarmed attacks/abilities, for example like in Fallout 1+2 games --- haven't played/seen Fallout 3+4, sighs).\r\n\r\n(the same should be done for armor and/or clothing equipment, as well, for when \"naked: without armor/clothing\", an 'unarmed or unarmored, or naked' armor/clothing Object)",
      "EditableFormat": "markdown",
      "HTML": "<p>personally, you should have an 'unarmed' (as your no weapon) Object, just like you'd have a 'katana' (weapon) Object, as this will (should, meh) work with Pixie's combat library, instead of you having to manually code in your own combat stuff for dealing with not using a weapon. As this lets you easily give it values/attributes and etc abilities if you want to have some advanced 'unarmed' combat (different types of punches, kicks, claws, \"power fists\", \"spiked/brass knuckles\", \"pointed/spiked/dagger boots\", and etc unarmed attacks/abilities, for example like in Fallout 1+2 games --- haven't played/seen Fallout 3+4, sighs).</p>\n<p>(the same should be done for armor and/or clothing equipment, as well, for when \"naked: without armor/clothing\", an 'unarmed or unarmored, or naked' armor/clothing Object)</p>\n\n",
      "PostDate": "2018-07-23T18:44:08.6688493Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e283899a-20ef-4461-8d7a-08b6a2c432ac",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks, it worked. It seems that it did not worked when I tried simply because I added these strings **after** this:\r\n``` \r\nif (player.hitpoints > 0) {\r\n    msg (\"Hits points now \" + player.hitpoints)\r\n  }\r\n  else {\r\n    msg (\"You are dead!\")\r\n    finish\r\n```\r\nBut after I added them **before** HP strings, all worked. Thank you again!",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks, it worked. It seems that it did not worked when I tried simply because I added these strings <strong>after</strong> this:</p>\n<pre><code>if (player.hitpoints &gt; 0) {\n    msg (\"Hits points now \" + player.hitpoints)\n  }\n  else {\n    msg (\"You are dead!\")\n    finish\n</code></pre>\n<p>But after I added them <strong>before</strong> HP strings, all worked. Thank you again!</p>\n\n",
      "PostDate": "2018-07-23T18:45:37.4186247Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "50659567-b9ca-421c-a40b-96b7b12ecda8",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I finished Pixie's tutorial, thanks to you, guys! It was quite helpful to understand some basics of making an RPG. So, now I'm trying to develop the idea further.\r\n\r\nI added command \"status\" for player, which shows health, ammo, weapon and etc. There I have a first question. What should I do to add in command not only player's current HP, but and the max amount of his HP?\r\n\r\nAlso I little modified command \"look\", so now Quest do not consider it as a combat turn. There I have a second question. How can I add current and max HP's of enemy to his look description? I tried to modify this string in SpawnZombie function with adding \"obj.hitpoints\" and \"this.hitpoint\", but it doesn't do anything.\r\n```\r\nobj.look = \"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\"\r\n```\r\nWell, it do...  I can add words and sentences, but I cannot display current and max HP's of the enemy.\r\n\r\nWould appreciate any help!\r\n\r\nWhole code:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Dwarf World\">\r\n    <inherit name=\"theme_novella\" />\r\n    <gameid>7b6e3407-e81b-4f7b-b470-6c3a3f9f5b45</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <feature_advancedscripts />\r\n    <showmoney />\r\n    <defaultfontsize type=\"int\">14</defaultfontsize>\r\n    <backgroundimage>33 2.png</backgroundimage>\r\n    <deactivatecommandlinks type=\"boolean\">false</deactivatecommandlinks>\r\n    <defaultfont>'Lucida Console', Monaco, monospace</defaultfont>\r\n    <defaultbackground>#000000</defaultbackground>\r\n    <defaultlinkforeground>#FFFFB5</defaultlinkforeground>\r\n    <menufont>'Lucida Console', Monaco, monospace</menufont>\r\n    <menubackground>Black</menubackground>\r\n    <menuforeground>White</menuforeground>\r\n    <menuhoverbackground>Black</menuhoverbackground>\r\n    <underlinehyperlinks type=\"boolean\">false</underlinehyperlinks>\r\n    <showcommandbar />\r\n    <customwidth type=\"int\">1200</customwidth>\r\n    <feature_pictureframe />\r\n    <borderlesscursor />\r\n    <defaultforeground>#7BC67B</defaultforeground>\r\n    <unresolvedcommandhandler type=\"script\">\r\n      msg (\"Er, what..?\")\r\n      game.notarealturn = true\r\n    </unresolvedcommandhandler>\r\n    <start type=\"script\">\r\n      // List of attackers\r\n      player.attackers = NewObjectList()\r\n      player.ammo = 35\r\n      // Status attributes\r\n      WeaponUpdate\r\n      player.statusattributes = NewStringDictionary()\r\n      dictionary add (player.statusattributes, \"hitpoints\", \"Hit points: !\")\r\n      dictionary add (player.statusattributes, \"ammo\", \"Spare ammo: !\")\r\n      dictionary add (player.statusattributes, \"equippedname\", \"Weapon: !\")\r\n      dictionary add (player.statusattributes, \"ammonote\", \"Ammo: !\")\r\n    </start>\r\n    <roomenter type=\"script\">\r\n    </roomenter>\r\n    <object name=\"monsterattacks\">\r\n      <inherit name=\"editor_room\" />\r\n      <object name=\"vomitattack\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = \"2d6\"\r\n          this.attack = 0\r\n          this.critdesc = \"#Attacker# spews noxious vomit all over you (#hits# hits).\"\r\n          this.attackdesc = \"#Attacker# vomits over you (#hits# hits).\"\r\n          this.missdesc = \"You narrowly avoid the foul vomit from #attacker#.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"vomitreadying\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = \"0\"\r\n          this.attack = -100\r\n          this.critdesc = \"\"\r\n          this.attackdesc = \"\"\r\n          this.missdesc = \"#Attacker#'s abdomen is gurgling alarmingly.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"talonattack\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = \"2d6\"\r\n          this.attack = 0\r\n          this.critdesc = \"#Attacker# strikes you with a monstrous blow (#hits# hits).\"\r\n          this.attackdesc = \"#Attacker# scratch you by claws (#hits# hits).\"\r\n          this.missdesc = \"You barely avoid the clawed hand from #attacker#.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"kickattack\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = \"2d6\"\r\n          this.attack = 0\r\n          this.critdesc = \"#Attacker# furiously kicks you in leg (#hits# hits).\"\r\n          this.attackdesc = \"#Attacker# kicks you (#hits# hits).\"\r\n          this.missdesc = \"You faintly avoid the kick from #attacker#.\"\r\n        </attr>\r\n      </object>\r\n    </object>\r\n    <object name=\"Loot\">\r\n      <inherit name=\"editor_room\" />\r\n      <object name=\"treasureroom\">\r\n        <inherit name=\"editor_room\" />\r\n        <object name=\"Pick\">\r\n          <inherit name=\"editor_object\" />\r\n          <listalias>Pick</listalias>\r\n          <inventoryverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n            <value>equip</value>\r\n            <value>Drop</value>\r\n          </inventoryverbs>\r\n          <feature_startscript />\r\n          <take />\r\n          <attr name=\"_initialise_\" type=\"script\">\r\n            this.damage = \"1d6\"\r\n            this.attack = 3\r\n            this.critdesc = \"You smash the pick down on #target# (#hits# hits).\"\r\n            this.attackdesc = \"You swing the pick at #target# (#hits# hits).\"\r\n            this.missdesc = \"You swing wildly and entirely miss #target# with your pick.\"\r\n          </attr>\r\n        </object>\r\n        <object name=\"Axe\">\r\n          <inherit name=\"editor_object\" />\r\n          <listalias>Axe</listalias>\r\n          <inventoryverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n            <value>equip</value>\r\n            <value>Drop</value>\r\n          </inventoryverbs>\r\n          <feature_startscript />\r\n          <take />\r\n          <attr name=\"_initialise_\" type=\"script\">\r\n            this.damage = \"1d6\"\r\n            this.attack = 3\r\n            this.critdesc = \"You smash the axe down on #target# (#hits# hits).\"\r\n            this.attackdesc = \"You swing the axe at #target# (#hits# hits).\"\r\n            this.missdesc = \"You swing wildly and entirely miss #target# with your axe.\"\r\n          </attr>\r\n        </object>\r\n      </object>\r\n    </object>\r\n  </game>\r\n  <command name=\"look\">\r\n    <pattern type=\"string\">^look$|^l$</pattern>\r\n    <script>\r\n      ShowRoomDescription\r\n      game.notarealturn = true\r\n    </script>\r\n  </command>\r\n  <command name=\"lookat\">\r\n    <pattern>look at #object#; look #object#; x #object#; examine #object#; exam #object#; ex #object#</pattern>\r\n    <script>\r\n      if (GetBoolean(object, \"hidechildren\")) {\r\n        object.hidechildren = false\r\n      }\r\n      if (TypeOf(object, \"look\") = \"script\") {\r\n        do (object, \"look\")\r\n      }\r\n      else {\r\n        lookdesc = \"\"\r\n        if (HasString(object, \"look\")) {\r\n          lookdesc = object.look\r\n        }\r\n        if (LengthOf(lookdesc) = 0) {\r\n          lookdesc = Template(\"DefaultObjectDescription\")\r\n        }\r\n        if (GetBoolean(object, \"switchedon\")) {\r\n          if (HasString(object, \"switchedondesc\")) {\r\n            lookdesc = lookdesc + \" \" + object.switchedondesc\r\n          }\r\n        }\r\n        else {\r\n          if (HasString(object, \"switchedoffdesc\")) {\r\n            lookdesc = lookdesc + \" \" + object.switchedoffdesc\r\n          }\r\n        }\r\n        isDark = CheckDarkness()\r\n        if (isDark and not GetBoolean(object, \"lightsource\")) {\r\n          lookdesc = DynamicTemplate(\"LookAtDarkness\", object)\r\n        }\r\n        msg (lookdesc)\r\n      }\r\n      ListObjectContents (object)\r\n      game.notarealturn = true\r\n    </script>\r\n  </command>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <beforefirstenter type=\"script\">\r\n      SpawnZombie (this)\r\n      SpawnZombie (this)\r\n    </beforefirstenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <feature_startscript />\r\n      <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n        player.alias = \"you\"\r\n        player.hitpoints = 250\r\n        player.damage = 0\r\n        player.attack = 3\r\n        player.defence = 0\r\n        player.armour = 0\r\n        player.money = 10\r\n        this.critdesc = \"You attack #target# with your bare hands and get a critical (#hits# hits).\"\r\n        this.attackdesc = \"You attack #target# with your bare hands and hit (#hits# hits).\"\r\n        this.missdesc = \"You swing wildly and entirely miss #target#.\"\r\n        player.changedhitpoints => {\r\n          if (player.hitpoints > 0) {\r\n            msg (\"Hits points now \" + player.hitpoints)\r\n          }\r\n          else {\r\n            msg (\"You are dead!\")\r\n            finish\r\n          }\r\n        }\r\n      ]]></attr>\r\n    </object>\r\n    <object name=\"spade\">\r\n      <inherit name=\"editor_object\" />\r\n      <listalias>spade</listalias>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>equip</value>\r\n        <value>Drop</value>\r\n      </inventoryverbs>\r\n      <feature_startscript />\r\n      <take />\r\n      <attr name=\"_initialise_\" type=\"script\">\r\n        this.damage = \"1d6\"\r\n        this.attack = 3\r\n        this.critdesc = \"You smash the spade down on #target# (#hits# hits).\"\r\n        this.attackdesc = \"You swing the spade at #target# (#hits# hits).\"\r\n        this.missdesc = \"You swing wildly and entirely miss #target#.\"\r\n      </attr>\r\n    </object>\r\n    <object name=\"pistol\">\r\n      <inherit name=\"editor_object\" />\r\n      <listalias>pistol</listalias>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>equip</value>\r\n        <value>Drop</value>\r\n        <value>reload</value>\r\n      </inventoryverbs>\r\n      <feature_startscript />\r\n      <take />\r\n      <look>Good for shooting zombies. Ammo: {pistol.ammo}/{pistol.ammomax}</look>\r\n      <attr name=\"_initialise_\" type=\"script\">\r\n        this.damage = \"2\"\r\n        this.attack = 0\r\n        this.firearmdamage = \"2d8\"\r\n        this.firearmattack = 3\r\n        this.ammo = 3\r\n        this.ammomax = 6\r\n        this.critdesc = \"A well placed shot with the pistol on #target# (#hits# hits).\"\r\n        this.attackdesc = \"You shot the pistol at #target# (#hits# hits).\"\r\n        this.missdesc = \"You shoot wildly and entirely miss #target#.\"\r\n      </attr>\r\n      <ontake type=\"script\">\r\n      </ontake>\r\n    </object>\r\n    <exit alias=\"east\" to=\"safezone\">\r\n      <inherit name=\"eastdirection\" />\r\n      <runscript />\r\n      <script type=\"script\">\r\n        player.attackers = NewObjectList()\r\n        msg (\"You slam the door, safe at last!\")\r\n        player.parent = this.to\r\n      </script>\r\n    </exit>\r\n    <object name=\"chest\">\r\n      <inherit name=\"editor_object\" />\r\n      <feature_startscript />\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Search</value>\r\n      </displayverbs>\r\n      <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n        this.searchscript => {\r\n          msg (\"You found a shiny chunk of gold ore.\")\r\n          gold ore.visible = true\r\n        }\r\n      ]]></attr>\r\n    </object>\r\n    <object name=\"gold ore\">\r\n      <inherit name=\"editor_object\" />\r\n      <visible type=\"boolean\">false</visible>\r\n      <take />\r\n    </object>\r\n  </object>\r\n  <command>\r\n    <pattern>attack #object#</pattern>\r\n    <script>\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you can attack.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else {\r\n        if (player.equipped = null) {\r\n          DoAttack (player, player, object, false)\r\n        }\r\n        else {\r\n          DoAttack (player, player.equipped, object, false)\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>equip #object#</pattern>\r\n    <script>\r\n      if (HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you can wield.\")\r\n      }\r\n      else if (not HasAttribute(object, \"damage\")) {\r\n        msg (\"That's not something you can wield.\")\r\n      }\r\n      else if (not object.parent = player) {\r\n        msg (\"You are not carrying it.\")\r\n      }\r\n      else if (object = player.equipped) {\r\n        msg (\"You already have.\")\r\n      }\r\n      else {\r\n        if (player.equipped = null) {\r\n          msg (\"You equip your \" + GetDisplayAlias(object) + \".\")\r\n        }\r\n        else {\r\n          msg (\"You put away your \" + GetDisplayAlias(player.equipped) + \" and equip your \" + GetDisplayAlias(object) + \".\")\r\n          list add (player.equipped.inventoryverbs, \"Equip\")\r\n          list remove (player.equipped.inventoryverbs, \"Unequip\")\r\n          player.equipped.listalias = Replace(player.equipped.listalias, \" (equipped)\", \"\")\r\n        }\r\n        player.equipped = object\r\n        list add (object.inventoryverbs, \"Unequip\")\r\n        list remove (object.inventoryverbs, \"Equip\")\r\n        object.listalias = object.listalias + \" (equipped)\"\r\n        WeaponUpdate\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>unequip #object#</pattern>\r\n    <script>\r\n      if (not object = player.equipped) {\r\n        msg (\"You are not wielding it.\")\r\n      }\r\n      else {\r\n        msg (\"You put away your spade.\")\r\n        player.equipped = null\r\n        list add (object.inventoryverbs, \"Equip\")\r\n        list remove (object.inventoryverbs, \"Unequip\")\r\n        object.listalias = Replace(object.listalias, \" (equipped)\", \"\")\r\n        WeaponUpdate\r\n      }\r\n    </script>\r\n  </command>\r\n  <turnscript name=\"attackturnscript\">\r\n    <enabled />\r\n    <script>\r\n      if (not GetBoolean(game, \"notarealturn\")) {\r\n        list = NewObjectList()\r\n        foreach (obj, GetDirectChildren(player.parent)) {\r\n          if (HasBoolean(obj, \"dead\")) {\r\n            if (not obj.dead) {\r\n              if (HasScript(obj, \"selectweapon\")) {\r\n                do (obj, \"selectweapon\")\r\n              }\r\n              if (HasObject(obj, \"weapon\")) {\r\n                DoAttack (obj, obj.weapon, player, false)\r\n              }\r\n              else {\r\n                DoAttack (obj, obj, player, false)\r\n              }\r\n              list add (list, obj)\r\n            }\r\n          }\r\n        }\r\n        foreach (obj, ListExclude(player.attackers, list)) {\r\n          if (not obj.dead and RandomChance(80)) {\r\n            obj.parent = player.parent\r\n            msg (CapFirst(obj.alias) + \" shambles into the area.\")\r\n            list add (list, obj)\r\n          }\r\n        }\r\n        player.attackers = list\r\n      }\r\n      game.notarealturn = false\r\n    </script>\r\n  </turnscript>\r\n  <command>\r\n    <pattern>shoot #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you need to shoot.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else if (player.equipped = null) {\r\n        msg (\"You don't have a firearm equipped.\")\r\n      }\r\n      else if (not HasInt(player.equipped, \"ammo\")) {\r\n        msg (\"You can't shoot a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (not player.equipped.ammo > 0) {\r\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and pull the trigger. Click. No ammo loaded.\")\r\n      }\r\n      else {\r\n        DoAttack (player, player.equipped, object, true)\r\n        WeaponUpdate\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <command>\r\n    <pattern>reload #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasInt(object, \"ammo\")) {\r\n        msg (\"You can't reload a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (player.ammo < 1) {\r\n        msg (\"You have no ammo.\")\r\n      }\r\n      else {\r\n        bullets = object.ammomax - object.ammo\r\n        if (bullets > player.ammo) {\r\n          bullets = player.ammo\r\n        }\r\n        player.ammo = player.ammo - bullets\r\n        object.ammo = object.ammo + bullets\r\n        msg (\"You put \" + bullets + \" bullets in it.\")\r\n        WeaponUpdate\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <object name=\"safezone\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"west\" to=\"room\">\r\n      <inherit name=\"westdirection\" />\r\n      <runscript />\r\n      <script type=\"script\">\r\n        player.attackers = NewObjectList()\r\n        msg (\"You slam the door, safe at last!\")\r\n        player.parent = this.to\r\n      </script>\r\n    </exit>\r\n  </object>\r\n  <command>\r\n    <pattern>search #object#</pattern>\r\n    <script>\r\n      if (not HasScript(object, \"searchscript\")) {\r\n        msg (\"There's nothing of interest there.\")\r\n      }\r\n      else if (GetBoolean(object, \"searched\")) {\r\n        msg (\"You find nothing more.\")\r\n      }\r\n      else if (not GetBoolean(object, \"dead\") and HasBoolean(object, \"dead\")) {\r\n        msg (\"That's moving too much for you to search!\")\r\n      }\r\n      else {\r\n        do (object, \"searchscript\")\r\n        object.searched = true\r\n      }\r\n    </script>\r\n  </command>\r\n  <command name=\"status\">\r\n    <pattern>status</pattern>\r\n    <script>\r\n      msg (\"Your health is \" + player.hitpoints)\r\n      msg (\"Your money is \" + player.money + \" coins\")\r\n      msg (\"Your weapon is \" + player.equippedname)\r\n      msg (\"Your ammo loaded is \" + player.ammonote)\r\n      msg (\"Your spare ammo is \" + player.ammo)\r\n      game.notarealturn = true\r\n    </script>\r\n  </command>\r\n  <function name=\"SpawnZombie\" parameters=\"room\"><![CDATA[\r\n    if (HasInt(game, \"crittercount\")) {\r\n      game.crittercount = game.crittercount + 1\r\n    }\r\n    else {\r\n      game.crittercount = 1\r\n    }\r\n    create (\"critter\" + game.crittercount)\r\n    obj = GetObject(\"critter\" + game.crittercount)\r\n    obj.parent = room\r\n    obj.displayverbs = Split(\"Look at;Attack;Shoot\", \";\")\r\n    obj.dead = false\r\n    obj.changedhitpoints => {\r\n      if (this.hitpoints < 1) {\r\n        msg (\"It is dead!\")\r\n        this.dead = true\r\n        this.displayverbs = Split(\"Look at;Search\", \";\")\r\n      }\r\n    }\r\n    names = Split(\"decipit;decomposing;shambling;disgusting;filthy;falling-apart\", \";\")\r\n    obj.alias = StringListItem(names, game.crittercount % ListCount(names)) + \" zombie\"\r\n    obj.listalias = CapFirst(obj.alias)\r\n    obj.look = \"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\"\r\n    obj.hitpoints = 2\r\n    obj.damage = 1\r\n    obj.attack = 0\r\n    obj.defence = 0\r\n    obj.armour = 0\r\n    obj.critdesc = \"A well-placed blow by #attacker# sends you reeling (#hits# hits).\"\r\n    obj.attackdesc = \"#Attacker# has hit you (#hits# hits).\"\r\n    obj.missdesc = \"{random:#Attacker# attacks you and <b>misses1</b>:#Attacker# attacks you and <b>misses2</b>:#Attacker# attacks you and <b>misses3</b>}\"\r\n    obj.selectweapon => {\r\n      if (this.weapon = vomitreadying) {\r\n        this.weapon = vomitattack\r\n      }\r\n      else {\r\n        this.weapon = GetObject(PickOneString(\"vomitreadying;talonattack;kickattack;talonattack;kickattack\"))\r\n      }\r\n    }\r\n    obj.searchscript => {\r\n      money = GetRandomInt(1, 50)\r\n      msg (\"You find \" + DisplayMoney(money) + \".\")\r\n      player.money = player.money + money\r\n      if (RandomChance (50) = true) {\r\n        o = PickOneChild(treasureroom)\r\n        msg (\"You also find \" + GetDisplayName(o) + \".\")\r\n        CloneObjectAndMoveHere (o)\r\n      }\r\n    }\r\n  ]]></function>\r\n  <function name=\"DoAttack\" parameters=\"attacker, weapon, target, firearm\"><![CDATA[\r\n    if (firearm) {\r\n      damageatt = \"firearmdamage\"\r\n      attackatt = \"firearmattack\"\r\n      weapon.ammo = weapon.ammo - 1\r\n    }\r\n    else {\r\n      damageatt = \"damage\"\r\n      attackatt = \"attack\"\r\n    }\r\n    roll = GetRandomInt(1, 20) + weapon.attack - target.defence\r\n    damage = DiceRoll(weapon.damage) * (100 - target.armour) / 100\r\n    if (damage < 1) {\r\n      damage = 1\r\n    }\r\n    if (roll > 15) {\r\n      damage = damage * 3\r\n      AttackReport (weapon.critdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else if (roll > 10) {\r\n      AttackReport (weapon.attackdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else {\r\n      AttackReport (weapon.missdesc, attacker, target, 0)\r\n    }\r\n  ]]></function>\r\n  <function name=\"WeaponUpdate\">\r\n    if (player.equipped = null) {\r\n      player.equippedname = \"bare hands\"\r\n      player.ammonote = \"-\"\r\n    }\r\n    else {\r\n      player.equippedname = Replace (player.equipped.listalias, \" (equipped)\", \"\")\r\n      if (not HasAttribute(player.equipped, \"ammo\")) {\r\n        player.ammonote = \"-\"\r\n      }\r\n      else {\r\n        player.ammonote = player.equipped.ammo + \"/\" + player.equipped.ammomax\r\n      }\r\n    }\r\n  </function>\r\n  <function name=\"AttackReport\" parameters=\"s, attacker, target, hits\">\r\n    s = Replace(s, \"#Attacker#\", CapFirst(GetDisplayAlias(attacker)))\r\n    s = Replace(s, \"#attacker#\", GetDisplayAlias(attacker))\r\n    s = Replace(s, \"#Target#\", CapFirst(GetDisplayAlias(target)))\r\n    s = Replace(s, \"#target#\", GetDisplayAlias(target))\r\n    s = Replace(s, \"#hits#\", \"\" + hits)\r\n    msg (s)\r\n  </function>\r\n</asl>\r\n```\r\n\r\nP.S. hegemonkhan, I tried to use Pixie's combat library, but it seems to have some errors in it (or it's silly me :D), at least in part of adding \"armour\" parametr to clothing (though, it adds defence correctly). So, I decided to use his libraries as theoretical basis for my game, but try to do my own system, to better understand the whole engine.",
      "EditableFormat": "markdown",
      "HTML": "<p>I finished Pixie's tutorial, thanks to you, guys! It was quite helpful to understand some basics of making an RPG. So, now I'm trying to develop the idea further.</p>\n<p>I added command \"status\" for player, which shows health, ammo, weapon and etc. There I have a first question. What should I do to add in command not only player's current HP, but and the max amount of his HP?</p>\n<p>Also I little modified command \"look\", so now Quest do not consider it as a combat turn. There I have a second question. How can I add current and max HP's of enemy to his look description? I tried to modify this string in SpawnZombie function with adding \"obj.hitpoints\" and \"this.hitpoint\", but it doesn't do anything.</p>\n<pre><code>obj.look = \"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\"\n</code></pre>\n<p>Well, it do...  I can add words and sentences, but I cannot display current and max HP's of the enemy.</p>\n<p>Would appreciate any help!</p>\n<p>Whole code:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Dwarf World\"&gt;\n    &lt;inherit name=\"theme_novella\" /&gt;\n    &lt;gameid&gt;7b6e3407-e81b-4f7b-b470-6c3a3f9f5b45&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;showmoney /&gt;\n    &lt;defaultfontsize type=\"int\"&gt;14&lt;/defaultfontsize&gt;\n    &lt;backgroundimage&gt;33 2.png&lt;/backgroundimage&gt;\n    &lt;deactivatecommandlinks type=\"boolean\"&gt;false&lt;/deactivatecommandlinks&gt;\n    &lt;defaultfont&gt;'Lucida Console', Monaco, monospace&lt;/defaultfont&gt;\n    &lt;defaultbackground&gt;#000000&lt;/defaultbackground&gt;\n    &lt;defaultlinkforeground&gt;#FFFFB5&lt;/defaultlinkforeground&gt;\n    &lt;menufont&gt;'Lucida Console', Monaco, monospace&lt;/menufont&gt;\n    &lt;menubackground&gt;Black&lt;/menubackground&gt;\n    &lt;menuforeground&gt;White&lt;/menuforeground&gt;\n    &lt;menuhoverbackground&gt;Black&lt;/menuhoverbackground&gt;\n    &lt;underlinehyperlinks type=\"boolean\"&gt;false&lt;/underlinehyperlinks&gt;\n    &lt;showcommandbar /&gt;\n    &lt;customwidth type=\"int\"&gt;1200&lt;/customwidth&gt;\n    &lt;feature_pictureframe /&gt;\n    &lt;borderlesscursor /&gt;\n    &lt;defaultforeground&gt;#7BC67B&lt;/defaultforeground&gt;\n    &lt;unresolvedcommandhandler type=\"script\"&gt;\n      msg (\"Er, what..?\")\n      game.notarealturn = true\n    &lt;/unresolvedcommandhandler&gt;\n    &lt;start type=\"script\"&gt;\n      // List of attackers\n      player.attackers = NewObjectList()\n      player.ammo = 35\n      // Status attributes\n      WeaponUpdate\n      player.statusattributes = NewStringDictionary()\n      dictionary add (player.statusattributes, \"hitpoints\", \"Hit points: !\")\n      dictionary add (player.statusattributes, \"ammo\", \"Spare ammo: !\")\n      dictionary add (player.statusattributes, \"equippedname\", \"Weapon: !\")\n      dictionary add (player.statusattributes, \"ammonote\", \"Ammo: !\")\n    &lt;/start&gt;\n    &lt;roomenter type=\"script\"&gt;\n    &lt;/roomenter&gt;\n    &lt;object name=\"monsterattacks\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;object name=\"vomitattack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = \"2d6\"\n          this.attack = 0\n          this.critdesc = \"#Attacker# spews noxious vomit all over you (#hits# hits).\"\n          this.attackdesc = \"#Attacker# vomits over you (#hits# hits).\"\n          this.missdesc = \"You narrowly avoid the foul vomit from #attacker#.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"vomitreadying\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = \"0\"\n          this.attack = -100\n          this.critdesc = \"\"\n          this.attackdesc = \"\"\n          this.missdesc = \"#Attacker#'s abdomen is gurgling alarmingly.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"talonattack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = \"2d6\"\n          this.attack = 0\n          this.critdesc = \"#Attacker# strikes you with a monstrous blow (#hits# hits).\"\n          this.attackdesc = \"#Attacker# scratch you by claws (#hits# hits).\"\n          this.missdesc = \"You barely avoid the clawed hand from #attacker#.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"kickattack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = \"2d6\"\n          this.attack = 0\n          this.critdesc = \"#Attacker# furiously kicks you in leg (#hits# hits).\"\n          this.attackdesc = \"#Attacker# kicks you (#hits# hits).\"\n          this.missdesc = \"You faintly avoid the kick from #attacker#.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"Loot\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;object name=\"treasureroom\"&gt;\n        &lt;inherit name=\"editor_room\" /&gt;\n        &lt;object name=\"Pick\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;listalias&gt;Pick&lt;/listalias&gt;\n          &lt;inventoryverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n            &lt;value&gt;equip&lt;/value&gt;\n            &lt;value&gt;Drop&lt;/value&gt;\n          &lt;/inventoryverbs&gt;\n          &lt;feature_startscript /&gt;\n          &lt;take /&gt;\n          &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n            this.damage = \"1d6\"\n            this.attack = 3\n            this.critdesc = \"You smash the pick down on #target# (#hits# hits).\"\n            this.attackdesc = \"You swing the pick at #target# (#hits# hits).\"\n            this.missdesc = \"You swing wildly and entirely miss #target# with your pick.\"\n          &lt;/attr&gt;\n        &lt;/object&gt;\n        &lt;object name=\"Axe\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;listalias&gt;Axe&lt;/listalias&gt;\n          &lt;inventoryverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n            &lt;value&gt;equip&lt;/value&gt;\n            &lt;value&gt;Drop&lt;/value&gt;\n          &lt;/inventoryverbs&gt;\n          &lt;feature_startscript /&gt;\n          &lt;take /&gt;\n          &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n            this.damage = \"1d6\"\n            this.attack = 3\n            this.critdesc = \"You smash the axe down on #target# (#hits# hits).\"\n            this.attackdesc = \"You swing the axe at #target# (#hits# hits).\"\n            this.missdesc = \"You swing wildly and entirely miss #target# with your axe.\"\n          &lt;/attr&gt;\n        &lt;/object&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/game&gt;\n  &lt;command name=\"look\"&gt;\n    &lt;pattern type=\"string\"&gt;^look$|^l$&lt;/pattern&gt;\n    &lt;script&gt;\n      ShowRoomDescription\n      game.notarealturn = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"lookat\"&gt;\n    &lt;pattern&gt;look at #object#; look #object#; x #object#; examine #object#; exam #object#; ex #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (GetBoolean(object, \"hidechildren\")) {\n        object.hidechildren = false\n      }\n      if (TypeOf(object, \"look\") = \"script\") {\n        do (object, \"look\")\n      }\n      else {\n        lookdesc = \"\"\n        if (HasString(object, \"look\")) {\n          lookdesc = object.look\n        }\n        if (LengthOf(lookdesc) = 0) {\n          lookdesc = Template(\"DefaultObjectDescription\")\n        }\n        if (GetBoolean(object, \"switchedon\")) {\n          if (HasString(object, \"switchedondesc\")) {\n            lookdesc = lookdesc + \" \" + object.switchedondesc\n          }\n        }\n        else {\n          if (HasString(object, \"switchedoffdesc\")) {\n            lookdesc = lookdesc + \" \" + object.switchedoffdesc\n          }\n        }\n        isDark = CheckDarkness()\n        if (isDark and not GetBoolean(object, \"lightsource\")) {\n          lookdesc = DynamicTemplate(\"LookAtDarkness\", object)\n        }\n        msg (lookdesc)\n      }\n      ListObjectContents (object)\n      game.notarealturn = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;beforefirstenter type=\"script\"&gt;\n      SpawnZombie (this)\n      SpawnZombie (this)\n    &lt;/beforefirstenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;feature_startscript /&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n        player.alias = \"you\"\n        player.hitpoints = 250\n        player.damage = 0\n        player.attack = 3\n        player.defence = 0\n        player.armour = 0\n        player.money = 10\n        this.critdesc = \"You attack #target# with your bare hands and get a critical (#hits# hits).\"\n        this.attackdesc = \"You attack #target# with your bare hands and hit (#hits# hits).\"\n        this.missdesc = \"You swing wildly and entirely miss #target#.\"\n        player.changedhitpoints =&gt; {\n          if (player.hitpoints &gt; 0) {\n            msg (\"Hits points now \" + player.hitpoints)\n          }\n          else {\n            msg (\"You are dead!\")\n            finish\n          }\n        }\n      ]]&gt;&lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"spade\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;listalias&gt;spade&lt;/listalias&gt;\n      &lt;inventoryverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;equip&lt;/value&gt;\n        &lt;value&gt;Drop&lt;/value&gt;\n      &lt;/inventoryverbs&gt;\n      &lt;feature_startscript /&gt;\n      &lt;take /&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n        this.damage = \"1d6\"\n        this.attack = 3\n        this.critdesc = \"You smash the spade down on #target# (#hits# hits).\"\n        this.attackdesc = \"You swing the spade at #target# (#hits# hits).\"\n        this.missdesc = \"You swing wildly and entirely miss #target#.\"\n      &lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"pistol\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;listalias&gt;pistol&lt;/listalias&gt;\n      &lt;inventoryverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;equip&lt;/value&gt;\n        &lt;value&gt;Drop&lt;/value&gt;\n        &lt;value&gt;reload&lt;/value&gt;\n      &lt;/inventoryverbs&gt;\n      &lt;feature_startscript /&gt;\n      &lt;take /&gt;\n      &lt;look&gt;Good for shooting zombies. Ammo: {pistol.ammo}/{pistol.ammomax}&lt;/look&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n        this.damage = \"2\"\n        this.attack = 0\n        this.firearmdamage = \"2d8\"\n        this.firearmattack = 3\n        this.ammo = 3\n        this.ammomax = 6\n        this.critdesc = \"A well placed shot with the pistol on #target# (#hits# hits).\"\n        this.attackdesc = \"You shot the pistol at #target# (#hits# hits).\"\n        this.missdesc = \"You shoot wildly and entirely miss #target#.\"\n      &lt;/attr&gt;\n      &lt;ontake type=\"script\"&gt;\n      &lt;/ontake&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"east\" to=\"safezone\"&gt;\n      &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;runscript /&gt;\n      &lt;script type=\"script\"&gt;\n        player.attackers = NewObjectList()\n        msg (\"You slam the door, safe at last!\")\n        player.parent = this.to\n      &lt;/script&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"chest\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;feature_startscript /&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;Search&lt;/value&gt;\n      &lt;/displayverbs&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n        this.searchscript =&gt; {\n          msg (\"You found a shiny chunk of gold ore.\")\n          gold ore.visible = true\n        }\n      ]]&gt;&lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"gold ore\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;visible type=\"boolean\"&gt;false&lt;/visible&gt;\n      &lt;take /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;attack #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you can attack.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else {\n        if (player.equipped = null) {\n          DoAttack (player, player, object, false)\n        }\n        else {\n          DoAttack (player, player.equipped, object, false)\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;equip #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you can wield.\")\n      }\n      else if (not HasAttribute(object, \"damage\")) {\n        msg (\"That's not something you can wield.\")\n      }\n      else if (not object.parent = player) {\n        msg (\"You are not carrying it.\")\n      }\n      else if (object = player.equipped) {\n        msg (\"You already have.\")\n      }\n      else {\n        if (player.equipped = null) {\n          msg (\"You equip your \" + GetDisplayAlias(object) + \".\")\n        }\n        else {\n          msg (\"You put away your \" + GetDisplayAlias(player.equipped) + \" and equip your \" + GetDisplayAlias(object) + \".\")\n          list add (player.equipped.inventoryverbs, \"Equip\")\n          list remove (player.equipped.inventoryverbs, \"Unequip\")\n          player.equipped.listalias = Replace(player.equipped.listalias, \" (equipped)\", \"\")\n        }\n        player.equipped = object\n        list add (object.inventoryverbs, \"Unequip\")\n        list remove (object.inventoryverbs, \"Equip\")\n        object.listalias = object.listalias + \" (equipped)\"\n        WeaponUpdate\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;unequip #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not object = player.equipped) {\n        msg (\"You are not wielding it.\")\n      }\n      else {\n        msg (\"You put away your spade.\")\n        player.equipped = null\n        list add (object.inventoryverbs, \"Equip\")\n        list remove (object.inventoryverbs, \"Unequip\")\n        object.listalias = Replace(object.listalias, \" (equipped)\", \"\")\n        WeaponUpdate\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;turnscript name=\"attackturnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      if (not GetBoolean(game, \"notarealturn\")) {\n        list = NewObjectList()\n        foreach (obj, GetDirectChildren(player.parent)) {\n          if (HasBoolean(obj, \"dead\")) {\n            if (not obj.dead) {\n              if (HasScript(obj, \"selectweapon\")) {\n                do (obj, \"selectweapon\")\n              }\n              if (HasObject(obj, \"weapon\")) {\n                DoAttack (obj, obj.weapon, player, false)\n              }\n              else {\n                DoAttack (obj, obj, player, false)\n              }\n              list add (list, obj)\n            }\n          }\n        }\n        foreach (obj, ListExclude(player.attackers, list)) {\n          if (not obj.dead and RandomChance(80)) {\n            obj.parent = player.parent\n            msg (CapFirst(obj.alias) + \" shambles into the area.\")\n            list add (list, obj)\n          }\n        }\n        player.attackers = list\n      }\n      game.notarealturn = false\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;shoot #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you need to shoot.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else if (player.equipped = null) {\n        msg (\"You don't have a firearm equipped.\")\n      }\n      else if (not HasInt(player.equipped, \"ammo\")) {\n        msg (\"You can't shoot a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (not player.equipped.ammo &gt; 0) {\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and pull the trigger. Click. No ammo loaded.\")\n      }\n      else {\n        DoAttack (player, player.equipped, object, true)\n        WeaponUpdate\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;reload #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasInt(object, \"ammo\")) {\n        msg (\"You can't reload a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (player.ammo &lt; 1) {\n        msg (\"You have no ammo.\")\n      }\n      else {\n        bullets = object.ammomax - object.ammo\n        if (bullets &gt; player.ammo) {\n          bullets = player.ammo\n        }\n        player.ammo = player.ammo - bullets\n        object.ammo = object.ammo + bullets\n        msg (\"You put \" + bullets + \" bullets in it.\")\n        WeaponUpdate\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=\"safezone\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"west\" to=\"room\"&gt;\n      &lt;inherit name=\"westdirection\" /&gt;\n      &lt;runscript /&gt;\n      &lt;script type=\"script\"&gt;\n        player.attackers = NewObjectList()\n        msg (\"You slam the door, safe at last!\")\n        player.parent = this.to\n      &lt;/script&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;search #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not HasScript(object, \"searchscript\")) {\n        msg (\"There's nothing of interest there.\")\n      }\n      else if (GetBoolean(object, \"searched\")) {\n        msg (\"You find nothing more.\")\n      }\n      else if (not GetBoolean(object, \"dead\") and HasBoolean(object, \"dead\")) {\n        msg (\"That's moving too much for you to search!\")\n      }\n      else {\n        do (object, \"searchscript\")\n        object.searched = true\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"status\"&gt;\n    &lt;pattern&gt;status&lt;/pattern&gt;\n    &lt;script&gt;\n      msg (\"Your health is \" + player.hitpoints)\n      msg (\"Your money is \" + player.money + \" coins\")\n      msg (\"Your weapon is \" + player.equippedname)\n      msg (\"Your ammo loaded is \" + player.ammonote)\n      msg (\"Your spare ammo is \" + player.ammo)\n      game.notarealturn = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=\"SpawnZombie\" parameters=\"room\"&gt;&lt;![CDATA[\n    if (HasInt(game, \"crittercount\")) {\n      game.crittercount = game.crittercount + 1\n    }\n    else {\n      game.crittercount = 1\n    }\n    create (\"critter\" + game.crittercount)\n    obj = GetObject(\"critter\" + game.crittercount)\n    obj.parent = room\n    obj.displayverbs = Split(\"Look at;Attack;Shoot\", \";\")\n    obj.dead = false\n    obj.changedhitpoints =&gt; {\n      if (this.hitpoints &lt; 1) {\n        msg (\"It is dead!\")\n        this.dead = true\n        this.displayverbs = Split(\"Look at;Search\", \";\")\n      }\n    }\n    names = Split(\"decipit;decomposing;shambling;disgusting;filthy;falling-apart\", \";\")\n    obj.alias = StringListItem(names, game.crittercount % ListCount(names)) + \" zombie\"\n    obj.listalias = CapFirst(obj.alias)\n    obj.look = \"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\"\n    obj.hitpoints = 2\n    obj.damage = 1\n    obj.attack = 0\n    obj.defence = 0\n    obj.armour = 0\n    obj.critdesc = \"A well-placed blow by #attacker# sends you reeling (#hits# hits).\"\n    obj.attackdesc = \"#Attacker# has hit you (#hits# hits).\"\n    obj.missdesc = \"{random:#Attacker# attacks you and &lt;b&gt;misses1&lt;/b&gt;:#Attacker# attacks you and &lt;b&gt;misses2&lt;/b&gt;:#Attacker# attacks you and &lt;b&gt;misses3&lt;/b&gt;}\"\n    obj.selectweapon =&gt; {\n      if (this.weapon = vomitreadying) {\n        this.weapon = vomitattack\n      }\n      else {\n        this.weapon = GetObject(PickOneString(\"vomitreadying;talonattack;kickattack;talonattack;kickattack\"))\n      }\n    }\n    obj.searchscript =&gt; {\n      money = GetRandomInt(1, 50)\n      msg (\"You find \" + DisplayMoney(money) + \".\")\n      player.money = player.money + money\n      if (RandomChance (50) = true) {\n        o = PickOneChild(treasureroom)\n        msg (\"You also find \" + GetDisplayName(o) + \".\")\n        CloneObjectAndMoveHere (o)\n      }\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"DoAttack\" parameters=\"attacker, weapon, target, firearm\"&gt;&lt;![CDATA[\n    if (firearm) {\n      damageatt = \"firearmdamage\"\n      attackatt = \"firearmattack\"\n      weapon.ammo = weapon.ammo - 1\n    }\n    else {\n      damageatt = \"damage\"\n      attackatt = \"attack\"\n    }\n    roll = GetRandomInt(1, 20) + weapon.attack - target.defence\n    damage = DiceRoll(weapon.damage) * (100 - target.armour) / 100\n    if (damage &lt; 1) {\n      damage = 1\n    }\n    if (roll &gt; 15) {\n      damage = damage * 3\n      AttackReport (weapon.critdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else if (roll &gt; 10) {\n      AttackReport (weapon.attackdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else {\n      AttackReport (weapon.missdesc, attacker, target, 0)\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"WeaponUpdate\"&gt;\n    if (player.equipped = null) {\n      player.equippedname = \"bare hands\"\n      player.ammonote = \"-\"\n    }\n    else {\n      player.equippedname = Replace (player.equipped.listalias, \" (equipped)\", \"\")\n      if (not HasAttribute(player.equipped, \"ammo\")) {\n        player.ammonote = \"-\"\n      }\n      else {\n        player.ammonote = player.equipped.ammo + \"/\" + player.equipped.ammomax\n      }\n    }\n  &lt;/function&gt;\n  &lt;function name=\"AttackReport\" parameters=\"s, attacker, target, hits\"&gt;\n    s = Replace(s, \"#Attacker#\", CapFirst(GetDisplayAlias(attacker)))\n    s = Replace(s, \"#attacker#\", GetDisplayAlias(attacker))\n    s = Replace(s, \"#Target#\", CapFirst(GetDisplayAlias(target)))\n    s = Replace(s, \"#target#\", GetDisplayAlias(target))\n    s = Replace(s, \"#hits#\", \"\" + hits)\n    msg (s)\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n<p>P.S. hegemonkhan, I tried to use Pixie's combat library, but it seems to have some errors in it (or it's silly me :D), at least in part of adding \"armour\" parametr to clothing (though, it adds defence correctly). So, I decided to use his libraries as theoretical basis for my game, but try to do my own system, to better understand the whole engine.</p>\n\n",
      "PostDate": "2018-07-24T11:48:19.6188473Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8f92cc2a-a246-45d6-b739-0ca7738bc2b2",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "here's a link (really detailed step by step walkthrough demo game making guide) on using the built-in 'statusattributes' String Dictionary Attribute (doing: cur/max life/mana, etc):\r\n\r\nhttp://textadventures.co.uk/forum/quest/topic/5387/i-really-need-help#37375\r\n\r\nand here's a bunch of links (guides) to get started with learning quest and its coding:\r\n\r\nhttp://textadventures.co.uk/forum/general/topic/ljjm32av4e2t9ot49k478g/help#710be61e-eae1-4af1-8363-520cc718ba1c\r\n\r\nhere's my own combat code (all credit goes to pertex as I used his combat code and its structure as the basis for mine) that you can study (it was done a long time ago when I was learning combat coding myself, so it's really bad code, it has some mistakes and has some un-needed code, and I got confused with my abbreviated elemental damage/defense-resistance attributes, argh. I learned to never ever use abrevs from that point on, lol):\r\n\r\nhttps://textadventures.co.uk/forum/quest/topic/3348/noobie-hks-help-me-thread#22485 (Pertex' cleaned my combat code up a bit, so this is the best to look for trying to study/understand it, you got to download it though)\r\n\r\nif you don't want to download pertex' cleaned up code of mine, then here (but it's going to be harder to study/understand as it's really messy and got mistakes and lots of un-needed code):\r\n\r\nhttps://textadventures.co.uk/forum/quest/topic/3348/noobie-hks-help-me-thread#22483\r\n\r\nand lastly, here's the bloody (sorry about this) legend/key for my abrevs (I've learned to never ever use abrevs ever since, lol):\r\n\r\nhttps://textadventures.co.uk/forum/quest/topic/3348/noobie-hks-help-me-thread#22486\r\n\r\n--------\r\n\r\nask if you got any questions, or need help or explanation of anything",
      "EditableFormat": "markdown",
      "HTML": "<p>here's a link (really detailed step by step walkthrough demo game making guide) on using the built-in 'statusattributes' String Dictionary Attribute (doing: cur/max life/mana, etc):</p>\n<p>http://textadventures.co.uk/forum/quest/topic/5387/i-really-need-help#37375</p>\n<p>and here's a bunch of links (guides) to get started with learning quest and its coding:</p>\n<p>http://textadventures.co.uk/forum/general/topic/ljjm32av4e2t9ot49k478g/help#710be61e-eae1-4af1-8363-520cc718ba1c</p>\n<p>here's my own combat code (all credit goes to pertex as I used his combat code and its structure as the basis for mine) that you can study (it was done a long time ago when I was learning combat coding myself, so it's really bad code, it has some mistakes and has some un-needed code, and I got confused with my abbreviated elemental damage/defense-resistance attributes, argh. I learned to never ever use abrevs from that point on, lol):</p>\n<p>https://textadventures.co.uk/forum/quest/topic/3348/noobie-hks-help-me-thread#22485 (Pertex' cleaned my combat code up a bit, so this is the best to look for trying to study/understand it, you got to download it though)</p>\n<p>if you don't want to download pertex' cleaned up code of mine, then here (but it's going to be harder to study/understand as it's really messy and got mistakes and lots of un-needed code):</p>\n<p>https://textadventures.co.uk/forum/quest/topic/3348/noobie-hks-help-me-thread#22483</p>\n<p>and lastly, here's the bloody (sorry about this) legend/key for my abrevs (I've learned to never ever use abrevs ever since, lol):</p>\n<p>https://textadventures.co.uk/forum/quest/topic/3348/noobie-hks-help-me-thread#22486</p>\n<hr>\n<p>ask if you got any questions, or need help or explanation of anything</p>\n\n",
      "PostDate": "2018-07-24T17:09:08.0526397Z",
      "LastEditDate": "2018-07-24T17:25:41.1849115Z",
      "link": null
    },
    {
      "PostId": "12faf2c3-25e9-4090-8f5c-6e2ec6bb7747",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Also I little modified command \"look\", so now Quest do not consider it as a combat turn. There I have a second question. How can I add current and max HP's of enemy to his look description? I tried to modify this string in SpawnZombie function with adding \"obj.hitpoints\" and \"this.hitpoint\", but it doesn't do anything.\r\n>\r\n> `obj.look = \"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\"`\r\n\r\nOK ... when you call SpawnZombie, it sets the \"look\" description to that string. So the object's look attribute is actually something like `A shambling zombie, {random:covered in maggots:missing an arm:one eye hanging out}.`\r\n\r\nThis is relevant. Variables added using the `+ obj.alias +` syntax are converted into text when SpawnZombie is run. So if you do `+ obj.hitpoints +` here, that will be the zombie's hitpoints *at that point in SpawnZombie*, which is before they've been set.\r\n\r\nOn the other hand, text processor commands will be used to get the current value of an attribute when you look at the zombie.\r\n**BUT**\r\nSomething like `obj.look = \"A \" + obj.alias + \", with {obj.hitpoints} HP\" will NOT work.\r\n\r\nBecause the `obj` variable only exists until the end of SpawnZombie. And you can't use `this` effectively in the text processor.\r\n\r\nSo what do you do? You use the name of the actual zombie you're looking at.\r\n\r\n`obj.look = \"A \" + obj.alias + \", with {\" + obj.name + \".hitpoints} HP.\"`\r\nor something like that.\r\n\r\nThis means that the object's \"look\" attribute is something like `A shambling zombie with {critter17.hitpoints} HP`, which will be displayed correctly when the player looks at it.\r\n\r\nI note that in previous versions of the code, you had:\r\n> `obj.look = ProcessText(\"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\")`\r\n\r\nThis would have done the random thing once for each zombie, so if it has an eye hanging out it will still have an eye hanging out the next time you look at it.\r\n\r\nIf you want to put that back in, so that random descriptions still work like that, you'd have to do it like:\r\n\r\n> `obj.look = ProcessText(\"A \" + obj.alias + \" (@@@open@@@\" + obj.name + \".hitpoints@@@close@@@HP), {random:covered in maggots:missing an arm:one eye hanging out}.\")`\r\n\r\nThe text processor turns @@@open@@@ and @@@close@@@ into { and }, so after running ProcessText, the \"look\" attribute would be: `A shambling zombie ({critter6.hitpoints}HP), with one eye hanging out.` The random text is fixed when the zombie is created, but the hitpoints attribute is still checked each time you look at it.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Also I little modified command \"look\", so now Quest do not consider it as a combat turn. There I have a second question. How can I add current and max HP's of enemy to his look description? I tried to modify this string in SpawnZombie function with adding \"obj.hitpoints\" and \"this.hitpoint\", but it doesn't do anything.</p>\n<p><code>obj.look = \"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\"</code></p>\n</blockquote>\n<p>OK ... when you call SpawnZombie, it sets the \"look\" description to that string. So the object's look attribute is actually something like <code>A shambling zombie, {random:covered in maggots:missing an arm:one eye hanging out}.</code></p>\n<p>This is relevant. Variables added using the <code>+ obj.alias +</code> syntax are converted into text when SpawnZombie is run. So if you do <code>+ obj.hitpoints +</code> here, that will be the zombie's hitpoints <em>at that point in SpawnZombie</em>, which is before they've been set.</p>\n<p>On the other hand, text processor commands will be used to get the current value of an attribute when you look at the zombie.<br>\n<strong>BUT</strong><br>\nSomething like `obj.look = \"A \" + obj.alias + \", with {obj.hitpoints} HP\" will NOT work.</p>\n<p>Because the <code>obj</code> variable only exists until the end of SpawnZombie. And you can't use <code>this</code> effectively in the text processor.</p>\n<p>So what do you do? You use the name of the actual zombie you're looking at.</p>\n<p><code>obj.look = \"A \" + obj.alias + \", with {\" + obj.name + \".hitpoints} HP.\"</code><br>\nor something like that.</p>\n<p>This means that the object's \"look\" attribute is something like <code>A shambling zombie with {critter17.hitpoints} HP</code>, which will be displayed correctly when the player looks at it.</p>\n<p>I note that in previous versions of the code, you had:</p>\n<blockquote>\n<p><code>obj.look = ProcessText(\"A \" + obj.alias + \", {random:covered in maggots:missing an arm:one eye hanging out}.\")</code></p>\n</blockquote>\n<p>This would have done the random thing once for each zombie, so if it has an eye hanging out it will still have an eye hanging out the next time you look at it.</p>\n<p>If you want to put that back in, so that random descriptions still work like that, you'd have to do it like:</p>\n<blockquote>\n<p><code>obj.look = ProcessText(\"A \" + obj.alias + \" (@@@open@@@\" + obj.name + \".hitpoints@@@close@@@HP), {random:covered in maggots:missing an arm:one eye hanging out}.\")</code></p>\n</blockquote>\n<p>The text processor turns @@@open@@@ and @@@close@@@ into { and }, so after running ProcessText, the \"look\" attribute would be: <code>A shambling zombie ({critter6.hitpoints}HP), with one eye hanging out.</code> The random text is fixed when the zombie is created, but the hitpoints attribute is still checked each time you look at it.</p>\n\n",
      "PostDate": "2018-07-24T17:14:15.6261978Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "811cd8c9-7dbc-4d67-9fff-c03185c5e90d",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you, mrangel, it worked! I probably messed up with brackets when was trying to rework look system, if not you, I wouldn't even see that.\r\nThank you, hegemonkhan, I'll read these guides!\r\n\r\nMy progress at game:\r\n1) I somehow did a very simple max hitpoints system.\r\n2) Also I made a drink/eat verbs and objects, which can change player's stats.\r\n3) Changed zombie's description and stats to level 1 goblin (though, haven't started yet working on the level system)\r\n\r\nI decided to rework combat system, adding combat stat \"agility\", instead of \"defence\", and also changed damage algorithm but something went not right. When I try to attack, I have this message: \r\n```\r\nError running script: Error compiling expression 'GetRandomInt(1, 60) + attacker.agility﻿': SyntaxError: Unexpected character: ﻿Line: 1, Column: 47\r\n```\r\nWhole code:\r\n\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Dwarf World\">\r\n    <inherit name=\"theme_novella\" />\r\n    <gameid>7b6e3407-e81b-4f7b-b470-6c3a3f9f5b45</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <feature_advancedscripts />\r\n    <showmoney />\r\n    <defaultfontsize type=\"int\">14</defaultfontsize>\r\n    <backgroundimage>33 2.png</backgroundimage>\r\n    <deactivatecommandlinks />\r\n    <defaultfont>'Lucida Console', Monaco, monospace</defaultfont>\r\n    <defaultbackground>#000000</defaultbackground>\r\n    <defaultlinkforeground>#FFFFB5</defaultlinkforeground>\r\n    <menufont>'Lucida Console', Monaco, monospace</menufont>\r\n    <menubackground>Black</menubackground>\r\n    <menuforeground>White</menuforeground>\r\n    <menuhoverbackground>Black</menuhoverbackground>\r\n    <underlinehyperlinks />\r\n    <showcommandbar />\r\n    <customwidth type=\"int\">1200</customwidth>\r\n    <feature_pictureframe />\r\n    <borderlesscursor />\r\n    <defaultforeground>#7BC67B</defaultforeground>\r\n    <unresolvedcommandhandler type=\"script\">\r\n      msg (\"Er, what..?\")\r\n      game.notarealturn = true\r\n    </unresolvedcommandhandler>\r\n    <start type=\"script\">\r\n      // List of attackers\r\n      player.attackers = NewObjectList()\r\n      player.ammo = 35\r\n      // Status attributes\r\n      WeaponUpdate\r\n      player.statusattributes = NewStringDictionary()\r\n      dictionary add (player.statusattributes, \"hitpoints\", \"Hit points: !\")\r\n      dictionary add (player.statusattributes, \"ammo\", \"Spare ammo: !\")\r\n      dictionary add (player.statusattributes, \"equippedname\", \"Weapon: !\")\r\n      dictionary add (player.statusattributes, \"ammonote\", \"Ammo: !\")\r\n    </start>\r\n    <roomenter type=\"script\">\r\n    </roomenter>\r\n    <object name=\"monsterattacks\">\r\n      <inherit name=\"editor_room\" />\r\n      <object name=\"vomitattack\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 10\r\n          this.critdesc = \"#Attacker# spews noxious vomit all over you (#hits# hits).\"\r\n          this.attackdesc = \"#Attacker# vomits over you (#hits# hits).\"\r\n          this.missdesc = \"You narrowly avoid the foul vomit from #attacker#.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"vomitreadying\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = \"0\"\r\n          this.agility = -100\r\n          this.critdesc = \"\"\r\n          this.attackdesc = \"\"\r\n          this.missdesc = \"#Attacker#'s abdomen is gurgling alarmingly.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"talonattack\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 10\r\n          this.critdesc = \"#Attacker# strikes you with a monstrous blow (#hits# hits).\"\r\n          this.attackdesc = \"#Attacker# scratch you by claws (#hits# hits).\"\r\n          this.missdesc = \"You barely avoid the clawed hand from #attacker#.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"kickattack\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 10\r\n          this.critdesc = \"#Attacker# furiously kicks you in leg (#hits# hits).\"\r\n          this.attackdesc = \"#Attacker# kicks you (#hits# hits).\"\r\n          this.missdesc = \"You faintly avoid the kick from #attacker#.\"\r\n        </attr>\r\n      </object>\r\n    </object>\r\n    <object name=\"Loot\">\r\n      <inherit name=\"editor_room\" />\r\n      <object name=\"treasureroom\">\r\n        <inherit name=\"editor_room\" />\r\n        <object name=\"Pick\">\r\n          <inherit name=\"editor_object\" />\r\n          <listalias>Pick</listalias>\r\n          <inventoryverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n            <value>equip</value>\r\n            <value>Drop</value>\r\n          </inventoryverbs>\r\n          <feature_startscript />\r\n          <take />\r\n          <attr name=\"_initialise_\" type=\"script\">\r\n            this.damage = 8\r\n            this.critdesc = \"You smash the pick down on #target# (#hits# hits).\"\r\n            this.attackdesc = \"You swing the pick at #target# (#hits# hits).\"\r\n            this.missdesc = \"You swing wildly and entirely miss #target# with your pick.\"\r\n          </attr>\r\n        </object>\r\n        <object name=\"Axe\">\r\n          <inherit name=\"editor_object\" />\r\n          <listalias>Axe</listalias>\r\n          <inventoryverbs type=\"stringlist\">\r\n            <value>Look at</value>\r\n            <value>equip</value>\r\n            <value>Drop</value>\r\n          </inventoryverbs>\r\n          <feature_startscript />\r\n          <take />\r\n          <attr name=\"_initialise_\" type=\"script\">\r\n            this.damage = 10\r\n            this.critdesc = \"You smash the axe down on #target# (#hits# hits).\"\r\n            this.attackdesc = \"You swing the axe at #target# (#hits# hits).\"\r\n            this.missdesc = \"You swing wildly and entirely miss #target# with your axe.\"\r\n          </attr>\r\n        </object>\r\n      </object>\r\n    </object>\r\n  </game>\r\n  <command name=\"look\">\r\n    <pattern type=\"string\">^look$|^l$</pattern>\r\n    <script>\r\n      ShowRoomDescription\r\n      game.notarealturn = true\r\n    </script>\r\n  </command>\r\n  <command name=\"lookat\">\r\n    <pattern>look at #object#; look #object#; x #object#; examine #object#; exam #object#; ex #object#</pattern>\r\n    <script>\r\n      if (GetBoolean(object, \"hidechildren\")) {\r\n        object.hidechildren = false\r\n      }\r\n      if (TypeOf(object, \"look\") = \"script\") {\r\n        do (object, \"look\")\r\n      }\r\n      else {\r\n        lookdesc = \"\"\r\n        if (HasString(object, \"look\")) {\r\n          lookdesc = object.look\r\n        }\r\n        if (LengthOf(lookdesc) = 0) {\r\n          lookdesc = Template(\"DefaultObjectDescription\")\r\n        }\r\n        if (GetBoolean(object, \"switchedon\")) {\r\n          if (HasString(object, \"switchedondesc\")) {\r\n            lookdesc = lookdesc + \" \" + object.switchedondesc\r\n          }\r\n        }\r\n        else {\r\n          if (HasString(object, \"switchedoffdesc\")) {\r\n            lookdesc = lookdesc + \" \" + object.switchedoffdesc\r\n          }\r\n        }\r\n        isDark = CheckDarkness()\r\n        if (isDark and not GetBoolean(object, \"lightsource\")) {\r\n          lookdesc = DynamicTemplate(\"LookAtDarkness\", object)\r\n        }\r\n        msg (lookdesc)\r\n      }\r\n      ListObjectContents (object)\r\n      game.notarealturn = true\r\n    </script>\r\n  </command>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description type=\"string\"></description>\r\n    <descprefix>You are</descprefix>\r\n    <beforefirstenter type=\"script\">\r\n      SpawnGoblin1 (this)\r\n      SpawnGoblin1 (this)\r\n    </beforefirstenter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <feature_startscript />\r\n      <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n        player.alias = \"you\"\r\n        player.hitpoints = 250\r\n        player.maxhitpoints = 260\r\n        player.damage = 3\r\n        player.might = 0\r\n        player.agility = 0\r\n        player.vitality = 0\r\n        player.intellegence = 0\r\n        player.armour = 6\r\n        player.money = 10\r\n        this.critdesc = \"You attack #target# with your bare hands and get a critical (#hits# hits).\"\r\n        this.attackdesc = \"You attack #target# with your bare hands and hit (#hits# hits).\"\r\n        this.missdesc = \"You swing wildly and entirely miss #target#.\"\r\n        player.changedhitpoints => {\r\n          if (player.hitpoints > 0) {\r\n            msg (\"Hits points now \" + player.hitpoints)\r\n          }\r\n          else {\r\n            msg (\"You are dead!\")\r\n            finish\r\n          }\r\n        }\r\n      ]]></attr>\r\n    </object>\r\n    <object name=\"spade\">\r\n      <inherit name=\"editor_object\" />\r\n      <listalias>spade</listalias>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>equip</value>\r\n        <value>Drop</value>\r\n      </inventoryverbs>\r\n      <feature_startscript />\r\n      <take />\r\n      <attr name=\"_initialise_\" type=\"script\">\r\n        this.damage = 5\r\n        this.critdesc = \"You smash the spade down on #target# (#hits# hits).\"\r\n        this.attackdesc = \"You swing the spade at #target# (#hits# hits).\"\r\n        this.missdesc = \"You swing wildly and entirely miss #target#.\"\r\n      </attr>\r\n    </object>\r\n    <object name=\"pistol\">\r\n      <inherit name=\"editor_object\" />\r\n      <listalias>pistol</listalias>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>equip</value>\r\n        <value>Drop</value>\r\n        <value>reload</value>\r\n      </inventoryverbs>\r\n      <feature_startscript />\r\n      <take />\r\n      <look>Good for shooting zombies. Ammo: {pistol.ammo}/{pistol.ammomax}</look>\r\n      <attr name=\"_initialise_\" type=\"script\">\r\n        this.damage = \"2\"\r\n        this.attack = 0\r\n        this.firearmdamage = \"2d8\"\r\n        this.firearmattack = 3\r\n        this.ammo = 3\r\n        this.ammomax = 6\r\n        this.critdesc = \"A well placed shot with the pistol on #target# (#hits# hits).\"\r\n        this.attackdesc = \"You shot the pistol at #target# (#hits# hits).\"\r\n        this.missdesc = \"You shoot wildly and entirely miss #target#.\"\r\n      </attr>\r\n      <ontake type=\"script\">\r\n      </ontake>\r\n    </object>\r\n    <exit alias=\"east\" to=\"safezone\">\r\n      <inherit name=\"eastdirection\" />\r\n      <runscript />\r\n      <script type=\"script\">\r\n        player.attackers = NewObjectList()\r\n        msg (\"You slam the door, safe at last!\")\r\n        player.parent = this.to\r\n      </script>\r\n    </exit>\r\n    <object name=\"chest\">\r\n      <inherit name=\"editor_object\" />\r\n      <feature_startscript />\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Search</value>\r\n      </displayverbs>\r\n      <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n        this.searchscript => {\r\n          msg (\"You found a shiny chunk of gold ore.\")\r\n          gold ore.visible = true\r\n        }\r\n      ]]></attr>\r\n    </object>\r\n    <object name=\"gold ore\">\r\n      <inherit name=\"editor_object\" />\r\n      <visible type=\"boolean\">false</visible>\r\n      <take />\r\n    </object>\r\n  </object>\r\n  <command>\r\n    <pattern>attack #object#</pattern>\r\n    <script>\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you can attack.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else {\r\n        if (player.equipped = null) {\r\n          DoAttack (player, player, object, false)\r\n        }\r\n        else {\r\n          DoAttack (player, player.equipped, object, false)\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>equip #object#</pattern>\r\n    <script>\r\n      if (HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you can wield.\")\r\n      }\r\n      else if (not HasAttribute(object, \"damage\")) {\r\n        msg (\"That's not something you can wield.\")\r\n      }\r\n      else if (not object.parent = player) {\r\n        msg (\"You are not carrying it.\")\r\n      }\r\n      else if (object = player.equipped) {\r\n        msg (\"You already have.\")\r\n      }\r\n      else {\r\n        if (player.equipped = null) {\r\n          msg (\"You equip your \" + GetDisplayAlias(object) + \".\")\r\n        }\r\n        else {\r\n          msg (\"You put away your \" + GetDisplayAlias(player.equipped) + \" and equip your \" + GetDisplayAlias(object) + \".\")\r\n          list add (player.equipped.inventoryverbs, \"Equip\")\r\n          list remove (player.equipped.inventoryverbs, \"Unequip\")\r\n          player.equipped.listalias = Replace(player.equipped.listalias, \" (equipped)\", \"\")\r\n        }\r\n        player.equipped = object\r\n        list add (object.inventoryverbs, \"Unequip\")\r\n        list remove (object.inventoryverbs, \"Equip\")\r\n        object.listalias = object.listalias + \" (equipped)\"\r\n        WeaponUpdate\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>unequip #object#</pattern>\r\n    <script>\r\n      if (not object = player.equipped) {\r\n        msg (\"You are not wielding it.\")\r\n      }\r\n      else {\r\n        msg (\"You put away your spade.\")\r\n        player.equipped = null\r\n        list add (object.inventoryverbs, \"Equip\")\r\n        list remove (object.inventoryverbs, \"Unequip\")\r\n        object.listalias = Replace(object.listalias, \" (equipped)\", \"\")\r\n        WeaponUpdate\r\n      }\r\n    </script>\r\n  </command>\r\n  <turnscript name=\"attackturnscript\">\r\n    <enabled />\r\n    <script>\r\n      if (not GetBoolean(game, \"notarealturn\")) {\r\n        list = NewObjectList()\r\n        foreach (obj, GetDirectChildren(player.parent)) {\r\n          if (HasBoolean(obj, \"dead\")) {\r\n            if (not obj.dead) {\r\n              if (HasScript(obj, \"selectweapon\")) {\r\n                do (obj, \"selectweapon\")\r\n              }\r\n              if (HasObject(obj, \"weapon\")) {\r\n                DoAttack (obj, obj.weapon, player, false)\r\n              }\r\n              else {\r\n                DoAttack (obj, obj, player, false)\r\n              }\r\n              list add (list, obj)\r\n            }\r\n          }\r\n        }\r\n        foreach (obj, ListExclude(player.attackers, list)) {\r\n          if (not obj.dead and RandomChance(80)) {\r\n            obj.parent = player.parent\r\n            msg (CapFirst(obj.alias) + \" shambles into the area.\")\r\n            list add (list, obj)\r\n          }\r\n        }\r\n        player.attackers = list\r\n      }\r\n      game.notarealturn = false\r\n    </script>\r\n  </turnscript>\r\n  <command>\r\n    <pattern>shoot #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you need to shoot.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else if (player.equipped = null) {\r\n        msg (\"You don't have a firearm equipped.\")\r\n      }\r\n      else if (not HasInt(player.equipped, \"ammo\")) {\r\n        msg (\"You can't shoot a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (not player.equipped.ammo > 0) {\r\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and pull the trigger. Click. No ammo loaded.\")\r\n      }\r\n      else {\r\n        DoAttack (player, player.equipped, object, true)\r\n        WeaponUpdate\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <command>\r\n    <pattern>reload #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasInt(object, \"ammo\")) {\r\n        msg (\"You can't reload a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (player.ammo < 1) {\r\n        msg (\"You have no ammo.\")\r\n      }\r\n      else {\r\n        bullets = object.ammomax - object.ammo\r\n        if (bullets > player.ammo) {\r\n          bullets = player.ammo\r\n        }\r\n        player.ammo = player.ammo - bullets\r\n        object.ammo = object.ammo + bullets\r\n        msg (\"You put \" + bullets + \" bullets in it.\")\r\n        WeaponUpdate\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <object name=\"safezone\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"west\" to=\"room\">\r\n      <inherit name=\"westdirection\" />\r\n      <runscript />\r\n      <script type=\"script\">\r\n        player.attackers = NewObjectList()\r\n        msg (\"You slam the door, safe at last!\")\r\n        player.parent = this.to\r\n      </script>\r\n    </exit>\r\n    <object name=\"Dwarven pie\">\r\n      <inherit name=\"editor_object\" />\r\n      <take />\r\n      <look>Favorite dwarf's pie, stuffed with gravel and sandstone. Hard as stone. Restore 15 HP, when eaten.</look>\r\n      <eat type=\"script\"><![CDATA[\r\n        msg (\"You eat the dwarven pie, receiving 15 health.\")\r\n        if (player.hitpoints + 15 > player.maxhitpoints) {\r\n          player.hitpoints = player.maxhitpoints\r\n        }\r\n        else {\r\n          player.hitpoints = player.hitpoints + 15\r\n        }\r\n        this.parent = null\r\n      ]]></eat>\r\n      <ontake type=\"script\">\r\n      </ontake>\r\n    </object>\r\n    <object name=\"Dwarven beer\">\r\n      <inherit name=\"editor_object\" />\r\n      <take />\r\n      <look>Strong dwarven beer from underground wheat and a special mix of mushrooms.</look>\r\n      <drink type=\"script\">\r\n        msg (\"You drink strong dwarven beer. Your max health increased by 5!\")\r\n        player.maxhitpoints = player.maxhitpoints + 5\r\n        msg (\"Max hitpoints now \" + player.maxhitpoints)\r\n        this.parent = null\r\n      </drink>\r\n      <ontake type=\"script\">\r\n      </ontake>\r\n    </object>\r\n  </object>\r\n  <command>\r\n    <pattern>search #object#</pattern>\r\n    <script>\r\n      if (not HasScript(object, \"searchscript\")) {\r\n        msg (\"There's nothing of interest there.\")\r\n      }\r\n      else if (GetBoolean(object, \"searched\")) {\r\n        msg (\"You find nothing more.\")\r\n      }\r\n      else if (not GetBoolean(object, \"dead\") and HasBoolean(object, \"dead\")) {\r\n        msg (\"That's moving too much for you to search!\")\r\n      }\r\n      else {\r\n        do (object, \"searchscript\")\r\n        object.searched = true\r\n      }\r\n    </script>\r\n  </command>\r\n  <command name=\"status\">\r\n    <pattern>status</pattern>\r\n    <script>\r\n      msg (\"Your health is \" + player.hitpoints + \"/\" + player.maxhitpoints)\r\n      msg (\"Your money is \" + player.money + \" coins\")\r\n      msg (\"Your weapon is \" + player.equippedname)\r\n      msg (\"Your ammo loaded is \" + player.ammonote)\r\n      msg (\"Your spare ammo is \" + player.ammo)\r\n      game.notarealturn = true\r\n    </script>\r\n  </command>\r\n  <function name=\"SpawnGoblin1\" parameters=\"room\"><![CDATA[\r\n    if (HasInt(game, \"crittercount\")) {\r\n      game.crittercount = game.crittercount + 1\r\n    }\r\n    else {\r\n      game.crittercount = 1\r\n    }\r\n    create (\"critter\" + game.crittercount)\r\n    obj = GetObject(\"critter\" + game.crittercount)\r\n    obj.parent = room\r\n    obj.displayverbs = Split(\"Look at;Attack;Shoot\", \";\")\r\n    obj.dead = false\r\n    obj.changedhitpoints => {\r\n      if (this.hitpoints < 1) {\r\n        msg (\"Goblin falls dead!\")\r\n        this.dead = true\r\n        this.displayverbs = Split(\"Look at;Search\", \";\")\r\n      }\r\n    }\r\n    names = Split(\"foul;angry;nasty;fat;filthy;drunk\", \";\")\r\n    obj.alias = StringListItem(names, game.crittercount % ListCount(names)) + \" goblin\"\r\n    obj.listalias = CapFirst(obj.alias)\r\n    obj.look = ProcessText(\"This \" + obj.alias + \" {random:looks disgusting: stinks like a bunch of socks:without teeth at all}\" + \" {colour:#FFFFB5:(@@@open@@@\" + obj.name + \".hitpoints@@@close@@@/20 HP)}\")\r\n    obj.hitpoints = 20\r\n    obj.damage = 10\r\n    obj.agility = 0\r\n    obj.armour = 0\r\n    obj.critdesc = \"A well-placed blow by #attacker# sends you reeling (#hits# hits).\"\r\n    obj.attackdesc = \"#Attacker# has hit you (#hits# hits).\"\r\n    obj.missdesc = \"{random:#Attacker# attacks you and <b>misses1</b>:#Attacker# attacks you and <b>misses2</b>:#Attacker# attacks you and <b>misses3</b>}\"\r\n    obj.selectweapon => {\r\n      if (this.weapon = vomitreadying) {\r\n        this.weapon = vomitattack\r\n      }\r\n      else {\r\n        this.weapon = GetObject(PickOneString(\"vomitreadying;talonattack;kickattack;talonattack;kickattack\"))\r\n      }\r\n    }\r\n    obj.searchscript => {\r\n      money = GetRandomInt(1, 50)\r\n      msg (\"You find \" + DisplayMoney(money) + \".\")\r\n      player.money = player.money + money\r\n      if (RandomChance (50) = true) {\r\n        o = PickOneChild(treasureroom)\r\n        msg (\"You also find \" + GetDisplayName(o) + \".\")\r\n        CloneObjectAndMoveHere (o)\r\n      }\r\n    }\r\n  ]]></function>\r\n  <function name=\"DoAttack\" parameters=\"attacker, weapon, target, firearm\"><![CDATA[\r\n    if (firearm) {\r\n      attackatt = \"firearmattack\"\r\n      weapon.ammo = weapon.ammo - 1\r\n    }\r\n    else {\r\n      attackatt = \"attack\"\r\n    }\r\n    roll = GetRandomInt(1, 60) + attacker.agility﻿\r\n    damage = attacker.damage - target.armour\r\n    if (damage < 1) {\r\n      damage = 1\r\n    }\r\n    if (roll > 80) {\r\n      damage = damage * 3\r\n      AttackReport (weapon.critdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else if (roll > 60) {\r\n      damage = damage * 2\r\n      AttackReport (weapon.attackdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else if (roll > 40) {\r\n      damage = damage * 1\r\n      AttackReport (weapon.attackdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else if (roll > 20) {\r\n      damage = damage * 0.5\r\n      AttackReport (weapon.attackdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else {\r\n      AttackReport (weapon.missdesc, attacker, target, 0)\r\n    }\r\n  ]]></function>\r\n  <function name=\"WeaponUpdate\">\r\n    if (player.equipped = null) {\r\n      player.equippedname = \"bare hands\"\r\n      player.ammonote = \"-\"\r\n    }\r\n    else {\r\n      player.equippedname = Replace (player.equipped.listalias, \" (equipped)\", \"\")\r\n      if (not HasAttribute(player.equipped, \"ammo\")) {\r\n        player.ammonote = \"-\"\r\n      }\r\n      else {\r\n        player.ammonote = player.equipped.ammo + \"/\" + player.equipped.ammomax\r\n      }\r\n    }\r\n  </function>\r\n  <function name=\"AttackReport\" parameters=\"s, attacker, target, hits\">\r\n    s = Replace(s, \"#Attacker#\", CapFirst(GetDisplayAlias(attacker)))\r\n    s = Replace(s, \"#attacker#\", GetDisplayAlias(attacker))\r\n    s = Replace(s, \"#Target#\", CapFirst(GetDisplayAlias(target)))\r\n    s = Replace(s, \"#target#\", GetDisplayAlias(target))\r\n    s = Replace(s, \"#hits#\", \"\" + hits)\r\n    msg (s)\r\n  </function>\r\n</asl>\r\n```\r\nP.S. Can I change somehow topic's name? It's theme is little bit different now, but I want to continue posting here.\r\nP.P.S. Maybe, next time,  I need to post my code not as message, but rather as link to it?",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you, mrangel, it worked! I probably messed up with brackets when was trying to rework look system, if not you, I wouldn't even see that.<br>\nThank you, hegemonkhan, I'll read these guides!</p>\n<p>My progress at game:</p>\n<ol>\n<li>I somehow did a very simple max hitpoints system.</li>\n<li>Also I made a drink/eat verbs and objects, which can change player's stats.</li>\n<li>Changed zombie's description and stats to level 1 goblin (though, haven't started yet working on the level system)</li>\n</ol>\n<p>I decided to rework combat system, adding combat stat \"agility\", instead of \"defence\", and also changed damage algorithm but something went not right. When I try to attack, I have this message:</p>\n<pre><code>Error running script: Error compiling expression 'GetRandomInt(1, 60) + attacker.agility﻿': SyntaxError: Unexpected character: ﻿Line: 1, Column: 47\n</code></pre>\n<p>Whole code:</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Dwarf World\"&gt;\n    &lt;inherit name=\"theme_novella\" /&gt;\n    &lt;gameid&gt;7b6e3407-e81b-4f7b-b470-6c3a3f9f5b45&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;showmoney /&gt;\n    &lt;defaultfontsize type=\"int\"&gt;14&lt;/defaultfontsize&gt;\n    &lt;backgroundimage&gt;33 2.png&lt;/backgroundimage&gt;\n    &lt;deactivatecommandlinks /&gt;\n    &lt;defaultfont&gt;'Lucida Console', Monaco, monospace&lt;/defaultfont&gt;\n    &lt;defaultbackground&gt;#000000&lt;/defaultbackground&gt;\n    &lt;defaultlinkforeground&gt;#FFFFB5&lt;/defaultlinkforeground&gt;\n    &lt;menufont&gt;'Lucida Console', Monaco, monospace&lt;/menufont&gt;\n    &lt;menubackground&gt;Black&lt;/menubackground&gt;\n    &lt;menuforeground&gt;White&lt;/menuforeground&gt;\n    &lt;menuhoverbackground&gt;Black&lt;/menuhoverbackground&gt;\n    &lt;underlinehyperlinks /&gt;\n    &lt;showcommandbar /&gt;\n    &lt;customwidth type=\"int\"&gt;1200&lt;/customwidth&gt;\n    &lt;feature_pictureframe /&gt;\n    &lt;borderlesscursor /&gt;\n    &lt;defaultforeground&gt;#7BC67B&lt;/defaultforeground&gt;\n    &lt;unresolvedcommandhandler type=\"script\"&gt;\n      msg (\"Er, what..?\")\n      game.notarealturn = true\n    &lt;/unresolvedcommandhandler&gt;\n    &lt;start type=\"script\"&gt;\n      // List of attackers\n      player.attackers = NewObjectList()\n      player.ammo = 35\n      // Status attributes\n      WeaponUpdate\n      player.statusattributes = NewStringDictionary()\n      dictionary add (player.statusattributes, \"hitpoints\", \"Hit points: !\")\n      dictionary add (player.statusattributes, \"ammo\", \"Spare ammo: !\")\n      dictionary add (player.statusattributes, \"equippedname\", \"Weapon: !\")\n      dictionary add (player.statusattributes, \"ammonote\", \"Ammo: !\")\n    &lt;/start&gt;\n    &lt;roomenter type=\"script\"&gt;\n    &lt;/roomenter&gt;\n    &lt;object name=\"monsterattacks\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;object name=\"vomitattack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 10\n          this.critdesc = \"#Attacker# spews noxious vomit all over you (#hits# hits).\"\n          this.attackdesc = \"#Attacker# vomits over you (#hits# hits).\"\n          this.missdesc = \"You narrowly avoid the foul vomit from #attacker#.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"vomitreadying\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = \"0\"\n          this.agility = -100\n          this.critdesc = \"\"\n          this.attackdesc = \"\"\n          this.missdesc = \"#Attacker#'s abdomen is gurgling alarmingly.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"talonattack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 10\n          this.critdesc = \"#Attacker# strikes you with a monstrous blow (#hits# hits).\"\n          this.attackdesc = \"#Attacker# scratch you by claws (#hits# hits).\"\n          this.missdesc = \"You barely avoid the clawed hand from #attacker#.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"kickattack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 10\n          this.critdesc = \"#Attacker# furiously kicks you in leg (#hits# hits).\"\n          this.attackdesc = \"#Attacker# kicks you (#hits# hits).\"\n          this.missdesc = \"You faintly avoid the kick from #attacker#.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"Loot\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;object name=\"treasureroom\"&gt;\n        &lt;inherit name=\"editor_room\" /&gt;\n        &lt;object name=\"Pick\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;listalias&gt;Pick&lt;/listalias&gt;\n          &lt;inventoryverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n            &lt;value&gt;equip&lt;/value&gt;\n            &lt;value&gt;Drop&lt;/value&gt;\n          &lt;/inventoryverbs&gt;\n          &lt;feature_startscript /&gt;\n          &lt;take /&gt;\n          &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n            this.damage = 8\n            this.critdesc = \"You smash the pick down on #target# (#hits# hits).\"\n            this.attackdesc = \"You swing the pick at #target# (#hits# hits).\"\n            this.missdesc = \"You swing wildly and entirely miss #target# with your pick.\"\n          &lt;/attr&gt;\n        &lt;/object&gt;\n        &lt;object name=\"Axe\"&gt;\n          &lt;inherit name=\"editor_object\" /&gt;\n          &lt;listalias&gt;Axe&lt;/listalias&gt;\n          &lt;inventoryverbs type=\"stringlist\"&gt;\n            &lt;value&gt;Look at&lt;/value&gt;\n            &lt;value&gt;equip&lt;/value&gt;\n            &lt;value&gt;Drop&lt;/value&gt;\n          &lt;/inventoryverbs&gt;\n          &lt;feature_startscript /&gt;\n          &lt;take /&gt;\n          &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n            this.damage = 10\n            this.critdesc = \"You smash the axe down on #target# (#hits# hits).\"\n            this.attackdesc = \"You swing the axe at #target# (#hits# hits).\"\n            this.missdesc = \"You swing wildly and entirely miss #target# with your axe.\"\n          &lt;/attr&gt;\n        &lt;/object&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/game&gt;\n  &lt;command name=\"look\"&gt;\n    &lt;pattern type=\"string\"&gt;^look$|^l$&lt;/pattern&gt;\n    &lt;script&gt;\n      ShowRoomDescription\n      game.notarealturn = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"lookat\"&gt;\n    &lt;pattern&gt;look at #object#; look #object#; x #object#; examine #object#; exam #object#; ex #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (GetBoolean(object, \"hidechildren\")) {\n        object.hidechildren = false\n      }\n      if (TypeOf(object, \"look\") = \"script\") {\n        do (object, \"look\")\n      }\n      else {\n        lookdesc = \"\"\n        if (HasString(object, \"look\")) {\n          lookdesc = object.look\n        }\n        if (LengthOf(lookdesc) = 0) {\n          lookdesc = Template(\"DefaultObjectDescription\")\n        }\n        if (GetBoolean(object, \"switchedon\")) {\n          if (HasString(object, \"switchedondesc\")) {\n            lookdesc = lookdesc + \" \" + object.switchedondesc\n          }\n        }\n        else {\n          if (HasString(object, \"switchedoffdesc\")) {\n            lookdesc = lookdesc + \" \" + object.switchedoffdesc\n          }\n        }\n        isDark = CheckDarkness()\n        if (isDark and not GetBoolean(object, \"lightsource\")) {\n          lookdesc = DynamicTemplate(\"LookAtDarkness\", object)\n        }\n        msg (lookdesc)\n      }\n      ListObjectContents (object)\n      game.notarealturn = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description type=\"string\"&gt;&lt;/description&gt;\n    &lt;descprefix&gt;You are&lt;/descprefix&gt;\n    &lt;beforefirstenter type=\"script\"&gt;\n      SpawnGoblin1 (this)\n      SpawnGoblin1 (this)\n    &lt;/beforefirstenter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;feature_startscript /&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n        player.alias = \"you\"\n        player.hitpoints = 250\n        player.maxhitpoints = 260\n        player.damage = 3\n        player.might = 0\n        player.agility = 0\n        player.vitality = 0\n        player.intellegence = 0\n        player.armour = 6\n        player.money = 10\n        this.critdesc = \"You attack #target# with your bare hands and get a critical (#hits# hits).\"\n        this.attackdesc = \"You attack #target# with your bare hands and hit (#hits# hits).\"\n        this.missdesc = \"You swing wildly and entirely miss #target#.\"\n        player.changedhitpoints =&gt; {\n          if (player.hitpoints &gt; 0) {\n            msg (\"Hits points now \" + player.hitpoints)\n          }\n          else {\n            msg (\"You are dead!\")\n            finish\n          }\n        }\n      ]]&gt;&lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"spade\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;listalias&gt;spade&lt;/listalias&gt;\n      &lt;inventoryverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;equip&lt;/value&gt;\n        &lt;value&gt;Drop&lt;/value&gt;\n      &lt;/inventoryverbs&gt;\n      &lt;feature_startscript /&gt;\n      &lt;take /&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n        this.damage = 5\n        this.critdesc = \"You smash the spade down on #target# (#hits# hits).\"\n        this.attackdesc = \"You swing the spade at #target# (#hits# hits).\"\n        this.missdesc = \"You swing wildly and entirely miss #target#.\"\n      &lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"pistol\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;listalias&gt;pistol&lt;/listalias&gt;\n      &lt;inventoryverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;equip&lt;/value&gt;\n        &lt;value&gt;Drop&lt;/value&gt;\n        &lt;value&gt;reload&lt;/value&gt;\n      &lt;/inventoryverbs&gt;\n      &lt;feature_startscript /&gt;\n      &lt;take /&gt;\n      &lt;look&gt;Good for shooting zombies. Ammo: {pistol.ammo}/{pistol.ammomax}&lt;/look&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n        this.damage = \"2\"\n        this.attack = 0\n        this.firearmdamage = \"2d8\"\n        this.firearmattack = 3\n        this.ammo = 3\n        this.ammomax = 6\n        this.critdesc = \"A well placed shot with the pistol on #target# (#hits# hits).\"\n        this.attackdesc = \"You shot the pistol at #target# (#hits# hits).\"\n        this.missdesc = \"You shoot wildly and entirely miss #target#.\"\n      &lt;/attr&gt;\n      &lt;ontake type=\"script\"&gt;\n      &lt;/ontake&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"east\" to=\"safezone\"&gt;\n      &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;runscript /&gt;\n      &lt;script type=\"script\"&gt;\n        player.attackers = NewObjectList()\n        msg (\"You slam the door, safe at last!\")\n        player.parent = this.to\n      &lt;/script&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"chest\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;feature_startscript /&gt;\n      &lt;displayverbs type=\"stringlist\"&gt;\n        &lt;value&gt;Look at&lt;/value&gt;\n        &lt;value&gt;Search&lt;/value&gt;\n      &lt;/displayverbs&gt;\n      &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n        this.searchscript =&gt; {\n          msg (\"You found a shiny chunk of gold ore.\")\n          gold ore.visible = true\n        }\n      ]]&gt;&lt;/attr&gt;\n    &lt;/object&gt;\n    &lt;object name=\"gold ore\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;visible type=\"boolean\"&gt;false&lt;/visible&gt;\n      &lt;take /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;attack #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you can attack.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else {\n        if (player.equipped = null) {\n          DoAttack (player, player, object, false)\n        }\n        else {\n          DoAttack (player, player.equipped, object, false)\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;equip #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you can wield.\")\n      }\n      else if (not HasAttribute(object, \"damage\")) {\n        msg (\"That's not something you can wield.\")\n      }\n      else if (not object.parent = player) {\n        msg (\"You are not carrying it.\")\n      }\n      else if (object = player.equipped) {\n        msg (\"You already have.\")\n      }\n      else {\n        if (player.equipped = null) {\n          msg (\"You equip your \" + GetDisplayAlias(object) + \".\")\n        }\n        else {\n          msg (\"You put away your \" + GetDisplayAlias(player.equipped) + \" and equip your \" + GetDisplayAlias(object) + \".\")\n          list add (player.equipped.inventoryverbs, \"Equip\")\n          list remove (player.equipped.inventoryverbs, \"Unequip\")\n          player.equipped.listalias = Replace(player.equipped.listalias, \" (equipped)\", \"\")\n        }\n        player.equipped = object\n        list add (object.inventoryverbs, \"Unequip\")\n        list remove (object.inventoryverbs, \"Equip\")\n        object.listalias = object.listalias + \" (equipped)\"\n        WeaponUpdate\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;unequip #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not object = player.equipped) {\n        msg (\"You are not wielding it.\")\n      }\n      else {\n        msg (\"You put away your spade.\")\n        player.equipped = null\n        list add (object.inventoryverbs, \"Equip\")\n        list remove (object.inventoryverbs, \"Unequip\")\n        object.listalias = Replace(object.listalias, \" (equipped)\", \"\")\n        WeaponUpdate\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;turnscript name=\"attackturnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      if (not GetBoolean(game, \"notarealturn\")) {\n        list = NewObjectList()\n        foreach (obj, GetDirectChildren(player.parent)) {\n          if (HasBoolean(obj, \"dead\")) {\n            if (not obj.dead) {\n              if (HasScript(obj, \"selectweapon\")) {\n                do (obj, \"selectweapon\")\n              }\n              if (HasObject(obj, \"weapon\")) {\n                DoAttack (obj, obj.weapon, player, false)\n              }\n              else {\n                DoAttack (obj, obj, player, false)\n              }\n              list add (list, obj)\n            }\n          }\n        }\n        foreach (obj, ListExclude(player.attackers, list)) {\n          if (not obj.dead and RandomChance(80)) {\n            obj.parent = player.parent\n            msg (CapFirst(obj.alias) + \" shambles into the area.\")\n            list add (list, obj)\n          }\n        }\n        player.attackers = list\n      }\n      game.notarealturn = false\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;shoot #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you need to shoot.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else if (player.equipped = null) {\n        msg (\"You don't have a firearm equipped.\")\n      }\n      else if (not HasInt(player.equipped, \"ammo\")) {\n        msg (\"You can't shoot a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (not player.equipped.ammo &gt; 0) {\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and pull the trigger. Click. No ammo loaded.\")\n      }\n      else {\n        DoAttack (player, player.equipped, object, true)\n        WeaponUpdate\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;reload #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasInt(object, \"ammo\")) {\n        msg (\"You can't reload a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (player.ammo &lt; 1) {\n        msg (\"You have no ammo.\")\n      }\n      else {\n        bullets = object.ammomax - object.ammo\n        if (bullets &gt; player.ammo) {\n          bullets = player.ammo\n        }\n        player.ammo = player.ammo - bullets\n        object.ammo = object.ammo + bullets\n        msg (\"You put \" + bullets + \" bullets in it.\")\n        WeaponUpdate\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=\"safezone\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"west\" to=\"room\"&gt;\n      &lt;inherit name=\"westdirection\" /&gt;\n      &lt;runscript /&gt;\n      &lt;script type=\"script\"&gt;\n        player.attackers = NewObjectList()\n        msg (\"You slam the door, safe at last!\")\n        player.parent = this.to\n      &lt;/script&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"Dwarven pie\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;take /&gt;\n      &lt;look&gt;Favorite dwarf's pie, stuffed with gravel and sandstone. Hard as stone. Restore 15 HP, when eaten.&lt;/look&gt;\n      &lt;eat type=\"script\"&gt;&lt;![CDATA[\n        msg (\"You eat the dwarven pie, receiving 15 health.\")\n        if (player.hitpoints + 15 &gt; player.maxhitpoints) {\n          player.hitpoints = player.maxhitpoints\n        }\n        else {\n          player.hitpoints = player.hitpoints + 15\n        }\n        this.parent = null\n      ]]&gt;&lt;/eat&gt;\n      &lt;ontake type=\"script\"&gt;\n      &lt;/ontake&gt;\n    &lt;/object&gt;\n    &lt;object name=\"Dwarven beer\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;take /&gt;\n      &lt;look&gt;Strong dwarven beer from underground wheat and a special mix of mushrooms.&lt;/look&gt;\n      &lt;drink type=\"script\"&gt;\n        msg (\"You drink strong dwarven beer. Your max health increased by 5!\")\n        player.maxhitpoints = player.maxhitpoints + 5\n        msg (\"Max hitpoints now \" + player.maxhitpoints)\n        this.parent = null\n      &lt;/drink&gt;\n      &lt;ontake type=\"script\"&gt;\n      &lt;/ontake&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;search #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not HasScript(object, \"searchscript\")) {\n        msg (\"There's nothing of interest there.\")\n      }\n      else if (GetBoolean(object, \"searched\")) {\n        msg (\"You find nothing more.\")\n      }\n      else if (not GetBoolean(object, \"dead\") and HasBoolean(object, \"dead\")) {\n        msg (\"That's moving too much for you to search!\")\n      }\n      else {\n        do (object, \"searchscript\")\n        object.searched = true\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"status\"&gt;\n    &lt;pattern&gt;status&lt;/pattern&gt;\n    &lt;script&gt;\n      msg (\"Your health is \" + player.hitpoints + \"/\" + player.maxhitpoints)\n      msg (\"Your money is \" + player.money + \" coins\")\n      msg (\"Your weapon is \" + player.equippedname)\n      msg (\"Your ammo loaded is \" + player.ammonote)\n      msg (\"Your spare ammo is \" + player.ammo)\n      game.notarealturn = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=\"SpawnGoblin1\" parameters=\"room\"&gt;&lt;![CDATA[\n    if (HasInt(game, \"crittercount\")) {\n      game.crittercount = game.crittercount + 1\n    }\n    else {\n      game.crittercount = 1\n    }\n    create (\"critter\" + game.crittercount)\n    obj = GetObject(\"critter\" + game.crittercount)\n    obj.parent = room\n    obj.displayverbs = Split(\"Look at;Attack;Shoot\", \";\")\n    obj.dead = false\n    obj.changedhitpoints =&gt; {\n      if (this.hitpoints &lt; 1) {\n        msg (\"Goblin falls dead!\")\n        this.dead = true\n        this.displayverbs = Split(\"Look at;Search\", \";\")\n      }\n    }\n    names = Split(\"foul;angry;nasty;fat;filthy;drunk\", \";\")\n    obj.alias = StringListItem(names, game.crittercount % ListCount(names)) + \" goblin\"\n    obj.listalias = CapFirst(obj.alias)\n    obj.look = ProcessText(\"This \" + obj.alias + \" {random:looks disgusting: stinks like a bunch of socks:without teeth at all}\" + \" {colour:#FFFFB5:(@@@open@@@\" + obj.name + \".hitpoints@@@close@@@/20 HP)}\")\n    obj.hitpoints = 20\n    obj.damage = 10\n    obj.agility = 0\n    obj.armour = 0\n    obj.critdesc = \"A well-placed blow by #attacker# sends you reeling (#hits# hits).\"\n    obj.attackdesc = \"#Attacker# has hit you (#hits# hits).\"\n    obj.missdesc = \"{random:#Attacker# attacks you and &lt;b&gt;misses1&lt;/b&gt;:#Attacker# attacks you and &lt;b&gt;misses2&lt;/b&gt;:#Attacker# attacks you and &lt;b&gt;misses3&lt;/b&gt;}\"\n    obj.selectweapon =&gt; {\n      if (this.weapon = vomitreadying) {\n        this.weapon = vomitattack\n      }\n      else {\n        this.weapon = GetObject(PickOneString(\"vomitreadying;talonattack;kickattack;talonattack;kickattack\"))\n      }\n    }\n    obj.searchscript =&gt; {\n      money = GetRandomInt(1, 50)\n      msg (\"You find \" + DisplayMoney(money) + \".\")\n      player.money = player.money + money\n      if (RandomChance (50) = true) {\n        o = PickOneChild(treasureroom)\n        msg (\"You also find \" + GetDisplayName(o) + \".\")\n        CloneObjectAndMoveHere (o)\n      }\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"DoAttack\" parameters=\"attacker, weapon, target, firearm\"&gt;&lt;![CDATA[\n    if (firearm) {\n      attackatt = \"firearmattack\"\n      weapon.ammo = weapon.ammo - 1\n    }\n    else {\n      attackatt = \"attack\"\n    }\n    roll = GetRandomInt(1, 60) + attacker.agility﻿\n    damage = attacker.damage - target.armour\n    if (damage &lt; 1) {\n      damage = 1\n    }\n    if (roll &gt; 80) {\n      damage = damage * 3\n      AttackReport (weapon.critdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else if (roll &gt; 60) {\n      damage = damage * 2\n      AttackReport (weapon.attackdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else if (roll &gt; 40) {\n      damage = damage * 1\n      AttackReport (weapon.attackdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else if (roll &gt; 20) {\n      damage = damage * 0.5\n      AttackReport (weapon.attackdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else {\n      AttackReport (weapon.missdesc, attacker, target, 0)\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"WeaponUpdate\"&gt;\n    if (player.equipped = null) {\n      player.equippedname = \"bare hands\"\n      player.ammonote = \"-\"\n    }\n    else {\n      player.equippedname = Replace (player.equipped.listalias, \" (equipped)\", \"\")\n      if (not HasAttribute(player.equipped, \"ammo\")) {\n        player.ammonote = \"-\"\n      }\n      else {\n        player.ammonote = player.equipped.ammo + \"/\" + player.equipped.ammomax\n      }\n    }\n  &lt;/function&gt;\n  &lt;function name=\"AttackReport\" parameters=\"s, attacker, target, hits\"&gt;\n    s = Replace(s, \"#Attacker#\", CapFirst(GetDisplayAlias(attacker)))\n    s = Replace(s, \"#attacker#\", GetDisplayAlias(attacker))\n    s = Replace(s, \"#Target#\", CapFirst(GetDisplayAlias(target)))\n    s = Replace(s, \"#target#\", GetDisplayAlias(target))\n    s = Replace(s, \"#hits#\", \"\" + hits)\n    msg (s)\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n<p>P.S. Can I change somehow topic's name? It's theme is little bit different now, but I want to continue posting here.<br>\nP.P.S. Maybe, next time,  I need to post my code not as message, but rather as link to it?</p>\n\n",
      "PostDate": "2018-07-26T18:12:00.503073Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9fb31307-c0a8-4144-97e0-7a5943acb3b3",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think if you edit your OP, you can change the topic\r\n\r\n---------\r\n\r\nunfortunately the error message isn't helping:\r\n\r\n>Error running script: Error compiling expression 'GetRandomInt(1, 60) + attacker.agility﻿': SyntaxError: Unexpected character: ﻿Line: 1, Column: 47\r\n\r\nas it says: LINE 1, column 47\r\n\r\nobviously it's not the first line and 47th character count (within your first line of code) from the left side, lol\r\n\r\nthe usual error is a missing 'xml' tag code, and/or, a function's/script's parenthesis (a missing left or right parenthesis, too many/few parenthesis on one side, and/or parenthesis in the wrong placement) and/or a missing curly bracket (left or right):\r\n\r\nWHICH UNFORTUNATELY, SCREWS UP / shifts the compilation reading of parts of (or even possibly the entire) game code by quest, and thus the error), for example concept:\r\n\r\nHi my name is hegemonkhan what is your name\r\n\r\nbut pretend we got an error in it, which causes it not to be in that same (readable/understandable) pattern (its shifted-rotated 1 character to the right, but the spaces remain un-moved):\r\n\r\neh im ynam ei sh egemonkha nwha ti sy ou rnam (you probably could never tell what this was trying to say if you didn't already know what it was, lol)\r\n\r\n```\r\n// the 'xml' tags:\r\n\r\nstarting tag: <\r\n\r\nending tag: >\r\n\r\nmissing:  /  ----- in the ending tag of:   '/>' or '</XXX>'\r\n\r\nwrong direction (a back slash) of the correct (forward) slash needed (aka: having the wrong slash character): \\ ----- in the ending tag of: />\r\n```\r\n\r\n------------------\r\n\r\ngood luck with finding it....\r\n\r\nthe best thing you can do... is make a backup copy of your game file... and then just start deleting chunks (you got to delete the chunks properly so that the rest of your game code still works) of your code (\"divide and conquer\" --- delete the entire bottom half of your code, if no error, then the error is in the bottom half of the code, do the same again, delete the bottom half of the code you deleted, and continue this until you can get to finding/knowing where the error is, and if the error is in the code you didn't delete, then continue to delete half of it until you narrow down to being able to find it) until you narrow down where it's at\r\n\r\nhttps://en.wikipedia.org/wiki/Divide_and_conquer_algorithm (this is on programming code algorithms/designs itself, but it works the same for tracking down where your error is)\r\n\r\nhttps://nms.kcl.ac.uk/colin.cooper/teachingmaterial/PAL-PDA/lectures/6A-Divide-Conquer.pdf\r\n\r\nhttp://web.eecs.umich.edu/~aprakash/eecs282/lectures/11-recursion.pdf",
      "EditableFormat": "markdown",
      "HTML": "<p>I think if you edit your OP, you can change the topic</p>\n<hr>\n<p>unfortunately the error message isn't helping:</p>\n<blockquote>\n<p>Error running script: Error compiling expression 'GetRandomInt(1, 60) + attacker.agility﻿': SyntaxError: Unexpected character: ﻿Line: 1, Column: 47</p>\n</blockquote>\n<p>as it says: LINE 1, column 47</p>\n<p>obviously it's not the first line and 47th character count (within your first line of code) from the left side, lol</p>\n<p>the usual error is a missing 'xml' tag code, and/or, a function's/script's parenthesis (a missing left or right parenthesis, too many/few parenthesis on one side, and/or parenthesis in the wrong placement) and/or a missing curly bracket (left or right):</p>\n<p>WHICH UNFORTUNATELY, SCREWS UP / shifts the compilation reading of parts of (or even possibly the entire) game code by quest, and thus the error), for example concept:</p>\n<p>Hi my name is hegemonkhan what is your name</p>\n<p>but pretend we got an error in it, which causes it not to be in that same (readable/understandable) pattern (its shifted-rotated 1 character to the right, but the spaces remain un-moved):</p>\n<p>eh im ynam ei sh egemonkha nwha ti sy ou rnam (you probably could never tell what this was trying to say if you didn't already know what it was, lol)</p>\n<pre><code>// the 'xml' tags:\n\nstarting tag: &lt;\n\nending tag: &gt;\n\nmissing:  /  ----- in the ending tag of:   '/&gt;' or '&lt;/XXX&gt;'\n\nwrong direction (a back slash) of the correct (forward) slash needed (aka: having the wrong slash character): \\ ----- in the ending tag of: /&gt;\n</code></pre>\n<hr>\n<p>good luck with finding it....</p>\n<p>the best thing you can do... is make a backup copy of your game file... and then just start deleting chunks (you got to delete the chunks properly so that the rest of your game code still works) of your code (\"divide and conquer\" --- delete the entire bottom half of your code, if no error, then the error is in the bottom half of the code, do the same again, delete the bottom half of the code you deleted, and continue this until you can get to finding/knowing where the error is, and if the error is in the code you didn't delete, then continue to delete half of it until you narrow down to being able to find it) until you narrow down where it's at</p>\n<p>https://en.wikipedia.org/wiki/Divide_and_conquer_algorithm (this is on programming code algorithms/designs itself, but it works the same for tracking down where your error is)</p>\n<p>https://nms.kcl.ac.uk/colin.cooper/teachingmaterial/PAL-PDA/lectures/6A-Divide-Conquer.pdf</p>\n<p>http://web.eecs.umich.edu/~aprakash/eecs282/lectures/11-recursion.pdf</p>\n\n",
      "PostDate": "2018-07-26T20:33:48.7894842Z",
      "LastEditDate": "2018-07-26T23:07:37.5852131Z",
      "link": null
    },
    {
      "PostId": "799a17a6-e63e-4c01-9e0e-44910f5a0531",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "in your 'DoAttack' Function, you could try taking out the space in the parenthesis:\r\n\r\nfrom:\r\n\r\n>roll = GetRandomInt(1, 60) + attacker.agility﻿\r\n\r\nto:\r\n\r\n>roll = GetRandomInt(1,60) + attacker.agility﻿\r\n\r\nbut, I think quest is able to handle having a space in it... but if not... then hopefully the error (and its the only error --- usually when you got \"an error\", it's actually a bunch of errors, which you find out as you solve one, only to get another error now being messaged to you --- it can only show one error spot at a time, lol) is solved, lol\r\n\r\n---------\r\n\r\nthe absolute worse is having an accidental space where it causes an error...  finding that accidental space is nearly impossible... and usually it doesn't even cross your mind that the error is a $#$#@ accidental space some where.. lol... but even being aware of this error... doesn't help in finding the accidental space... lol\r\n\r\n(accidental spaces can happen a lot when you copy and paste code a lot... accidentally highlighting too far... getting extra space/s at the beginning and/or ending of the code you're highlighting, copying, and then pasting... lol)",
      "EditableFormat": "markdown",
      "HTML": "<p>in your 'DoAttack' Function, you could try taking out the space in the parenthesis:</p>\n<p>from:</p>\n<blockquote>\n<p>roll = GetRandomInt(1, 60) + attacker.agility﻿</p>\n</blockquote>\n<p>to:</p>\n<blockquote>\n<p>roll = GetRandomInt(1,60) + attacker.agility﻿</p>\n</blockquote>\n<p>but, I think quest is able to handle having a space in it... but if not... then hopefully the error (and its the only error --- usually when you got \"an error\", it's actually a bunch of errors, which you find out as you solve one, only to get another error now being messaged to you --- it can only show one error spot at a time, lol) is solved, lol</p>\n<hr>\n<p>the absolute worse is having an accidental space where it causes an error...  finding that accidental space is nearly impossible... and usually it doesn't even cross your mind that the error is a $#$#@ accidental space some where.. lol... but even being aware of this error... doesn't help in finding the accidental space... lol</p>\n<p>(accidental spaces can happen a lot when you copy and paste code a lot... accidentally highlighting too far... getting extra space/s at the beginning and/or ending of the code you're highlighting, copying, and then pasting... lol)</p>\n\n",
      "PostDate": "2018-07-26T20:52:35.6812882Z",
      "LastEditDate": "2018-07-26T20:56:49.8661754Z",
      "link": null
    },
    {
      "PostId": "1364a057-6903-4162-93c7-a5d368e217b5",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The issue is in the line `roll = GetRandomInt(1, 60) + attacker.agility﻿` in the DoAttack function.\r\n\r\nThe 47th character here is at the end of the line. Your pasted code appears to include three non-printable characters at the end of the line (unless the forum has added them somehow). They are 'dead' characters, which don't take up space but cause an accent to appear over the next character., As they're at the end of the line, you don't see the accent.\r\n\r\nI'd suggest you delete these characters; how easy that is will depend on your international input method settings. If all else fails, you can go into code view, delete this line, and type it again.\r\n\r\n(Sorry if that doesn't help; I'm panicking over my new book being behind schedule, so am skimming your code looking for a solution as quickly as I can)",
      "EditableFormat": "markdown",
      "HTML": "<p>The issue is in the line <code>roll = GetRandomInt(1, 60) + attacker.agility﻿</code> in the DoAttack function.</p>\n<p>The 47th character here is at the end of the line. Your pasted code appears to include three non-printable characters at the end of the line (unless the forum has added them somehow). They are 'dead' characters, which don't take up space but cause an accent to appear over the next character., As they're at the end of the line, you don't see the accent.</p>\n<p>I'd suggest you delete these characters; how easy that is will depend on your international input method settings. If all else fails, you can go into code view, delete this line, and type it again.</p>\n<p>(Sorry if that doesn't help; I'm panicking over my new book being behind schedule, so am skimming your code looking for a solution as quickly as I can)</p>\n\n",
      "PostDate": "2018-07-26T21:59:09.4944491Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c7ac8b96-524f-4bef-b086-b289a51de504",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://i.imgur.com/4nc2mjqb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you guys for helping me again! I resolved the problem by loading the backup of my code and writing the new part again.\r\n\r\nNow I will be more careful with this and will start make backups more often.\r\n\r\nAlso, I changed the topic's name and first post.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you guys for helping me again! I resolved the problem by loading the backup of my code and writing the new part again.</p>\n<p>Now I will be more careful with this and will start make backups more often.</p>\n<p>Also, I changed the topic's name and first post.</p>\n\n",
      "PostDate": "2018-07-27T21:01:04.2622654Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "028d8b70-dc1c-4e81-8961-885a429f93fd",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://i.imgur.com/4nc2mjqb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi all!\r\n\r\nMy progress at game:\r\n\r\n1) Addded characteristics (Strength, agility, vitality and intelligence)\r\n2) Added fast travels\r\n3) Added armour, jewelry and shields\r\n4) Added inventory size\r\n\r\nI have an problem - I do not know, how to create container, in which I can place and keep my items in-game, since I have inventory size limit.  I tried to find such topic on forum, but failed. \r\n\r\nWhole code (Presumably, this container should be \"Crate\" in \"safezone5\":\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <dynamictemplate name=\"WearSuccessful\">\"You put \" + object.article + \" on.\"</dynamictemplate>\r\n  <game name=\"Dwarf World\">\r\n    <inherit name=\"theme_novella\" />\r\n    <gameid>7b6e3407-e81b-4f7b-b470-6c3a3f9f5b45</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n    <feature_advancedscripts />\r\n    <showmoney />\r\n    <defaultfontsize type=\"int\">14</defaultfontsize>\r\n    <backgroundimage>33 2.png</backgroundimage>\r\n    <deactivatecommandlinks />\r\n    <defaultfont>'Lucida Console', Monaco, monospace</defaultfont>\r\n    <defaultbackground>#000000</defaultbackground>\r\n    <defaultlinkforeground>#FFFFB5</defaultlinkforeground>\r\n    <menufont>'Lucida Console', Monaco, monospace</menufont>\r\n    <menubackground>Black</menubackground>\r\n    <menuforeground>White</menuforeground>\r\n    <menuhoverbackground>Black</menuhoverbackground>\r\n    <underlinehyperlinks />\r\n    <showcommandbar />\r\n    <customwidth type=\"int\">1200</customwidth>\r\n    <feature_pictureframe />\r\n    <borderlesscursor />\r\n    <defaultforeground>#7BC67B</defaultforeground>\r\n    <feature_limitinventory />\r\n    <unresolvedcommandhandler type=\"script\">\r\n      msg (\"Er, what..?\")\r\n      game.notarealturn = true\r\n    </unresolvedcommandhandler>\r\n    <start type=\"script\">\r\n      // List of attackers\r\n      player.attackers = NewObjectList()\r\n      player.ammo = 35\r\n      // Status attributes\r\n      WeaponUpdate\r\n      player.statusattributes = NewStringDictionary()\r\n      dictionary add (player.statusattributes, \"hitpoints\", \"Hit points: !\")\r\n      dictionary add (player.statusattributes, \"ammo\", \"Spare ammo: !\")\r\n      dictionary add (player.statusattributes, \"equippedname\", \"Weapon: !\")\r\n      dictionary add (player.statusattributes, \"ammonote\", \"Ammo: !\")\r\n    </start>\r\n    <roomenter type=\"script\">\r\n    </roomenter>\r\n    <object name=\"Loot\">\r\n      <inherit name=\"editor_room\" />\r\n    </object>\r\n  </game>\r\n  <command name=\"look\">\r\n    <pattern type=\"string\">^look$|^l$</pattern>\r\n    <script>\r\n      ShowRoomDescription\r\n      game.notarealturn = true\r\n    </script>\r\n  </command>\r\n  <command name=\"lookat\">\r\n    <pattern>look at #object#; look #object#; x #object#; examine #object#; exam #object#; ex #object#</pattern>\r\n    <script>\r\n      if (GetBoolean(object, \"hidechildren\")) {\r\n        object.hidechildren = false\r\n      }\r\n      if (TypeOf(object, \"look\") = \"script\") {\r\n        do (object, \"look\")\r\n      }\r\n      else {\r\n        lookdesc = \"\"\r\n        if (HasString(object, \"look\")) {\r\n          lookdesc = object.look\r\n        }\r\n        if (LengthOf(lookdesc) = 0) {\r\n          lookdesc = Template(\"DefaultObjectDescription\")\r\n        }\r\n        if (GetBoolean(object, \"switchedon\")) {\r\n          if (HasString(object, \"switchedondesc\")) {\r\n            lookdesc = lookdesc + \" \" + object.switchedondesc\r\n          }\r\n        }\r\n        else {\r\n          if (HasString(object, \"switchedoffdesc\")) {\r\n            lookdesc = lookdesc + \" \" + object.switchedoffdesc\r\n          }\r\n        }\r\n        isDark = CheckDarkness()\r\n        if (isDark and not GetBoolean(object, \"lightsource\")) {\r\n          lookdesc = DynamicTemplate(\"LookAtDarkness\", object)\r\n        }\r\n        msg (lookdesc)\r\n      }\r\n      ListObjectContents (object)\r\n      game.notarealturn = true\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>attack #object#</pattern>\r\n    <script>\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you can attack.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else {\r\n        if (player.equipped = null) {\r\n          DoAttack (player, player, object, false, false)\r\n        }\r\n        else {\r\n          DoAttack (player, player.equipped, object, false, false)\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>equip #object#</pattern>\r\n    <script>\r\n      if (HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you can wield.\")\r\n      }\r\n      else if (not HasAttribute(object, \"damage\")) {\r\n        msg (\"That's not something you can wield.\")\r\n      }\r\n      else if (not object.parent = player) {\r\n        msg (\"You are not carrying it.\")\r\n      }\r\n      else if (object = player.equipped) {\r\n        msg (\"You already have.\")\r\n      }\r\n      else {\r\n        if (player.equipped = null) {\r\n          msg (\"You equip your \" + GetDisplayAlias(object) + \".\")\r\n        }\r\n        else {\r\n          msg (\"You put away your \" + GetDisplayAlias(player.equipped) + \" and equip your \" + GetDisplayAlias(object) + \".\")\r\n          list add (player.equipped.inventoryverbs, \"Equip\")\r\n          list remove (player.equipped.inventoryverbs, \"Unequip\")\r\n          player.equipped.listalias = Replace(player.equipped.listalias, \" (equipped)\", \"\")\r\n        }\r\n        player.equipped = object\r\n        list add (object.inventoryverbs, \"Unequip\")\r\n        list remove (object.inventoryverbs, \"Equip\")\r\n        object.listalias = object.listalias + \" (equipped)\"\r\n        WeaponUpdate\r\n      }\r\n    </script>\r\n  </command>\r\n  <command>\r\n    <pattern>unequip #object#</pattern>\r\n    <script>\r\n      if (not object = player.equipped) {\r\n        msg (\"You are not wielding it.\")\r\n      }\r\n      else {\r\n        msg (\"You put away your spade.\")\r\n        player.equipped = null\r\n        list add (object.inventoryverbs, \"Equip\")\r\n        list remove (object.inventoryverbs, \"Unequip\")\r\n        object.listalias = Replace(object.listalias, \" (equipped)\", \"\")\r\n        WeaponUpdate\r\n      }\r\n    </script>\r\n  </command>\r\n  <turnscript name=\"attackturnscript\">\r\n    <enabled />\r\n    <script>\r\n      if (not GetBoolean(game, \"notarealturn\")) {\r\n        list = NewObjectList()\r\n        foreach (obj, GetDirectChildren(player.parent)) {\r\n          if (HasBoolean(obj, \"dead\")) {\r\n            if (not obj.dead) {\r\n              if (HasScript(obj, \"selectweapon\")) {\r\n                do (obj, \"selectweapon\")\r\n              }\r\n              if (HasObject(obj, \"weapon\")) {\r\n                DoAttack (obj, obj.weapon, player, false, false)\r\n              }\r\n              else {\r\n                DoAttack (obj, obj, player, false)\r\n              }\r\n              list add (list, obj)\r\n            }\r\n          }\r\n        }\r\n        foreach (obj, ListExclude(player.attackers, list)) {\r\n          if (not obj.dead and RandomChance(80)) {\r\n            obj.parent = player.parent\r\n            msg (CapFirst(obj.alias) + \" shambles into the area.\")\r\n            list add (list, obj)\r\n          }\r\n        }\r\n        player.attackers = list\r\n      }\r\n      game.notarealturn = false\r\n    </script>\r\n  </turnscript>\r\n  <command>\r\n    <pattern>shoot #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you need to shoot.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else if (player.equipped = null) {\r\n        msg (\"You don't have a ranged weapon equipped.\")\r\n      }\r\n      else if (not HasInt(player.equipped, \"ammo\")) {\r\n        msg (\"You can't shoot a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (not player.equipped.ammo > 0) {\r\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and pull the trigger. Click. No ammo loaded.\")\r\n      }\r\n      else {\r\n        DoAttack (player, player.equipped, object, true, false)\r\n        WeaponUpdate\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <command>\r\n    <pattern>reload #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasInt(object, \"ammo\")) {\r\n        msg (\"You can't reload a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (player.ammo < 1) {\r\n        msg (\"You have no ammo.\")\r\n      }\r\n      else {\r\n        bolts = object.ammomax - object.ammo\r\n        if (bolts > player.ammo) {\r\n          bolts = player.ammo\r\n        }\r\n        player.ammo = player.ammo - bolts\r\n        object.ammo = object.ammo + bolts\r\n        msg (\"You put \" + bolts + \" bolts in it.\")\r\n        WeaponUpdate\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <command>\r\n    <pattern>search #object#</pattern>\r\n    <script>\r\n      if (not HasScript(object, \"searchscript\")) {\r\n        msg (\"There's nothing of interest there.\")\r\n      }\r\n      else if (GetBoolean(object, \"searched\")) {\r\n        msg (\"You find nothing more.\")\r\n      }\r\n      else if (not GetBoolean(object, \"dead\") and HasBoolean(object, \"dead\")) {\r\n        msg (\"That's moving too much for you to search!\")\r\n      }\r\n      else {\r\n        do (object, \"searchscript\")\r\n        object.searched = true\r\n      }\r\n    </script>\r\n  </command>\r\n  <command name=\"status\">\r\n    <pattern>status</pattern>\r\n    <script>\r\n      msg (\"Your health is \" + player.hitpoints + \"/\" + player.maxhitpoints)\r\n      msg (\"Your energy is \" + player.energy + \"/\" + player.maxenergy)\r\n      msg (\"Your strength is \" + player.strength)\r\n      msg (\"Your agility is \" + player.agility)\r\n      msg (\"Your vitality is \" + player.vitality)\r\n      msg (\"Your intelligence is \" + player.intelligence)\r\n      msg (\"Your armour is \" + player.armour)\r\n      msg (\"Your money is \" + player.money + \" coins\")\r\n      msg (\"Your weapon is \" + player.equippedname)\r\n      msg (\"Your ammo loaded is \" + player.ammonote)\r\n      msg (\"Your spare ammo is \" + player.ammo)\r\n      game.notarealturn = true\r\n    </script>\r\n  </command>\r\n  <object name=\"Test\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"room\">\r\n      <inherit name=\"editor_room\" />\r\n      <description type=\"string\"></description>\r\n      <descprefix>You are in</descprefix>\r\n      <beforefirstenter type=\"script\">\r\n        SpawnZombie (this)\r\n        SpawnZombie (this)\r\n      </beforefirstenter>\r\n      <object name=\"player\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"editor_player\" />\r\n        <feature_startscript />\r\n        <containermaxobjects>Your backpack is full!</containermaxobjects>\r\n        <maxvolume type=\"int\">2</maxvolume>\r\n        <containerfullmessage>Your backpack is full!</containerfullmessage>\r\n        <maxobjects type=\"int\">10000</maxobjects>\r\n        <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n          player.alias = \"you\"\r\n          player.hitpoints = 250\r\n          player.maxhitpoints = 260\r\n          player.energy = 50\r\n          player.maxenergy = 60\r\n          player.damage = 5\r\n          player.strength = 0\r\n          player.agility = 0\r\n          player.vitality = 0\r\n          player.intelligence = 0\r\n          player.armour = 0\r\n          player.money = 10\r\n          this.critdesc = \"You attack #target# with your bare hands and get a critical (#hits# hits).\"\r\n          this.attackdesc = \"You attack #target# with your bare hands and hit (#hits# hits).\"\r\n          this.missdesc = \"You swing wildly and entirely miss #target#.\"\r\n          player.changedhitpoints => {\r\n            if (player.hitpoints > 0) {\r\n              msg (\"Your health is \" + player.hitpoints + \"/\" + player.maxhitpoints)\r\n            }\r\n            else {\r\n              msg (\"You are dead!\")\r\n              finish\r\n            }\r\n          }\r\n          player.maxhitpoints = player.maxhitpoints + player.vitality * 4\r\n        ]]></attr>\r\n      </object>\r\n      <object name=\"spade\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 10\r\n          this.agility = 0\r\n          this.critdesc = \"You smash the spade down on #target# (#hits# hits).\"\r\n          this.attackdesc = \"You swing the spade at #target# (#hits# hits).\"\r\n          this.missdesc = \"You swing wildly and entirely miss #target#.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"crossbow\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias>pistol</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n          <value>reload</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <look>Good for shooting zombies. Ammo: {crossbow.ammo}/{crossbow.ammomax}</look>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 5\r\n          this.agility = 0\r\n          this.rangedamage = 15\r\n          this.rangedagility = 3\r\n          this.ammo = 3\r\n          this.ammomax = 6\r\n          this.critdesc = \"A well placed shot with the crossbow on #target# (#hits# hits).\"\r\n          this.attackdesc = \"You shot the crossbow at #target# (#hits# hits).\"\r\n          this.missdesc = \"You shoot wildly and entirely miss #target#.\"\r\n        </attr>\r\n        <ontake type=\"script\">\r\n        </ontake>\r\n      </object>\r\n      <exit alias=\"east\" to=\"safezone\">\r\n        <inherit name=\"eastdirection\" />\r\n        <runscript />\r\n        <script type=\"script\">\r\n          player.attackers = NewObjectList()\r\n          msg (\"You slam the door, safe at last!\")\r\n          player.parent = this.to\r\n        </script>\r\n      </exit>\r\n      <object name=\"chest\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_limited\" />\r\n        <feature_startscript />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Search</value>\r\n        </displayverbs>\r\n        <attr name=\"feature_container\" type=\"boolean\">false</attr>\r\n        <maxobjects type=\"int\">3</maxobjects>\r\n        <hidechildren />\r\n        <listchildren />\r\n        <attr name=\"_initialise_\" type=\"script\"><![CDATA[\r\n          this.searchscript => {\r\n            msg (\"You found a shiny chunk of gold ore.\")\r\n            gold ore.visible = true\r\n          }\r\n        ]]></attr>\r\n      </object>\r\n      <object name=\"gold ore\">\r\n        <inherit name=\"editor_object\" />\r\n        <visible type=\"boolean\">false</visible>\r\n        <take />\r\n      </object>\r\n      <object name=\"rune stone\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias>pistol</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <look>In this stone are hidden powerful knowledge of the magic of lightning.</look>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 5\r\n          this.agility = 0\r\n          this.runestone = 1\r\n          this.magicdamage = 15\r\n          this.magicagility = 3\r\n          this.critdesc = \"A well placed lighting with the rune stone on #target# (#hits# hits).\"\r\n          this.attackdesc = \"You emit lightning at #target# (#hits# hits).\"\r\n          this.missdesc = \"You shoot lighting wildly and entirely miss #target#.\"\r\n        </attr>\r\n        <ontake type=\"script\">\r\n        </ontake>\r\n      </object>\r\n      <object name=\"helmet of life\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">1</attr>\r\n        <wearmsg>You put the helmet on. You recieved 10 armour and 8 max hitpoints!</wearmsg>\r\n        <removemsg>You put the helmet off. You lost 10 armour and 8 max hitpoints!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 10\r\n          this.strength = 0\r\n          this.agility = 0\r\n          this.intelligence = 0\r\n          this.vitality = 2\r\n        </attr>\r\n      </object>\r\n      <object name=\"shoulders\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">2</attr>\r\n        <wearmsg>You put the shoulders on. You recieved 10 armour!</wearmsg>\r\n        <removemsg>You put the shoulders off. You lost 10 armour!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 10\r\n          this.strength = 0\r\n          this.agility = 0\r\n          this.intelligence = 0\r\n          this.vitality = 0\r\n        </attr>\r\n      </object>\r\n      <object name=\"breastplate\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">3</attr>\r\n        <wearmsg>You put the breastplate on. You recieved 10 armour!</wearmsg>\r\n        <removemsg>You put the breastplate off. You lost 10 armour!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 10\r\n          this.strength = 0\r\n          this.agility = 0\r\n          this.intelligence = 0\r\n          this.vitality = 0\r\n        </attr>\r\n      </object>\r\n      <object name=\"gloves\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">4</attr>\r\n        <wearmsg>You put the gloves on. You recieved 10 armour!</wearmsg>\r\n        <removemsg>You put the gloves off. You lost 10 armour!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 10\r\n          this.strength = 0\r\n          this.agility = 0\r\n          this.intelligence = 0\r\n          this.vitality = 0\r\n        </attr>\r\n      </object>\r\n      <object name=\"leggins\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">5</attr>\r\n        <wearmsg>You put the leggins on. You recieved 10 armour!</wearmsg>\r\n        <removemsg>You put the leggins off. You lost 10 armour!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 10\r\n          this.strength = 0\r\n          this.agility = 0\r\n          this.intelligence = 0\r\n          this.vitality = 0\r\n        </attr>\r\n      </object>\r\n      <object name=\"boots\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">6</attr>\r\n        <wearmsg>You put the boots on. You recieved 10 armour!</wearmsg>\r\n        <removemsg>You put the boots off. You lost 10 armour!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 10\r\n          this.strength = 0\r\n          this.agility = 0\r\n          this.intelligence = 0\r\n          this.vitality = 0\r\n        </attr>\r\n      </object>\r\n      <object name=\"amulet of intelligence\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">7</attr>\r\n        <wearmsg>You put the amulet of intelligence on. You recieved 5 intelligence!</wearmsg>\r\n        <removemsg>You put the amulet of intelligence off. You lost 5  intelligence!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 0\r\n          this.strength = 0\r\n          this.agility = 0\r\n          this.intelligence = 5\r\n          this.vitality = 0\r\n        </attr>\r\n      </object>\r\n      <object name=\"ring of strength\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">8</attr>\r\n        <wearmsg>You put the ring of strength on. You recieved 5 strength!</wearmsg>\r\n        <removemsg>You put the ring of strength off. You lost 5 strength!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 0\r\n          this.strength = 5\r\n          this.agility = 0\r\n          this.intelligence = 0\r\n          this.vitality = 0\r\n        </attr>\r\n      </object>\r\n      <object name=\"bracelet of agility\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">9</attr>\r\n        <wearmsg>You put the bracelet of agility on. You recieved 5 agility!</wearmsg>\r\n        <removemsg>You put the  bracelet of agility off. You lost 5 agility!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 0\r\n          this.strength = 0\r\n          this.agility = 5\r\n          this.intelligence = 0\r\n          this.vitality = 0\r\n        </attr>\r\n      </object>\r\n      <object name=\"Shiny emerald\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">10</attr>\r\n        <wearmsg>You put the shiny emerald into your pocket. You recieved 1 strength, intelligence, agility and vitality!</wearmsg>\r\n        <removemsg>You put the shiny emerald out of your pocket. You lost 1 strength, intelligence, agility and vitality!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 0\r\n          this.strength = 1\r\n          this.agility = 1\r\n          this.intelligence = 1\r\n          this.vitality = 1\r\n        </attr>\r\n      </object>\r\n      <object name=\"Teleport1\">\r\n        <inherit name=\"editor_object\" />\r\n        <drop type=\"boolean\">false</drop>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Teleport to end</value>\r\n        </displayverbs>\r\n        <inventoryverbs type=\"stringlist\" />\r\n        <teleporttoend type=\"script\">\r\n          MoveObject (player, safezone5)\r\n          player.attackers = NewObjectList()\r\n        </teleporttoend>\r\n      </object>\r\n      <object name=\"wooden shield\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"wearable\" />\r\n        <listalias>spade</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Wear</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <feature_wearable />\r\n        <attr name=\"wear_layer\" type=\"int\">11</attr>\r\n        <wearmsg>You put the wooden shield on. You recieved 20 armour!</wearmsg>\r\n        <removemsg>You put the wooden shield offt. You lost 20 armour!</removemsg>\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.armour = 20\r\n          this.strength = 0\r\n          this.agility = 0\r\n          this.intelligence = 0\r\n          this.vitality = 0\r\n        </attr>\r\n      </object>\r\n    </object>\r\n    <object name=\"safezone\">\r\n      <inherit name=\"editor_room\" />\r\n      <exit alias=\"west\" to=\"room\">\r\n        <inherit name=\"westdirection\" />\r\n        <runscript />\r\n        <script type=\"script\">\r\n          player.attackers = NewObjectList()\r\n          msg (\"You slam the door, safe at last!\")\r\n          player.parent = this.to\r\n        </script>\r\n      </exit>\r\n      <object name=\"dwarven pie\">\r\n        <inherit name=\"editor_object\" />\r\n        <take />\r\n        <look>Favorite dwarf's pie, stuffed with gravel and sandstone. Hard as stone. Restore 15 HP, when eaten.</look>\r\n        <eat type=\"script\"><![CDATA[\r\n          msg (\"You eat the dwarven pie, receiving 15 health.\")\r\n          if (player.hitpoints + 15 > player.maxhitpoints) {\r\n            player.hitpoints = player.maxhitpoints\r\n          }\r\n          else {\r\n            player.hitpoints = player.hitpoints + 15\r\n          }\r\n          this.parent = null\r\n        ]]></eat>\r\n        <ontake type=\"script\">\r\n        </ontake>\r\n      </object>\r\n      <object name=\"strong beer\">\r\n        <inherit name=\"editor_object\" />\r\n        <take />\r\n        <look>Strong dwarven beer from underground wheat and a special mix of mushrooms.</look>\r\n        <drink type=\"script\">\r\n          msg (\"You drink strong dwarven beer. Your strength increased by 5!\")\r\n          player.strength = player.strength + 5\r\n          msg (\"Your strength now \" + player.strength)\r\n          this.parent = null\r\n        </drink>\r\n        <ontake type=\"script\">\r\n        </ontake>\r\n      </object>\r\n      <object name=\"healthy mushroom\">\r\n        <inherit name=\"editor_object\" />\r\n        <take />\r\n        <look>Mushroom with a large shiny hat of orange color, in white speckles.</look>\r\n        <eat type=\"script\">\r\n          msg (\"You eat the orange mushroom, receiving 5 vitality!\")\r\n          player.vitality = player.vitality + 5\r\n          msg (\"Your vitality now \" + player.vitality)\r\n          this.parent = null\r\n          player.maxhitpoints = player.maxhitpoints + player.vitality * 4\r\n        </eat>\r\n        <ontake type=\"script\">\r\n        </ontake>\r\n      </object>\r\n      <object name=\"root of Wisdom\">\r\n        <inherit name=\"editor_object\" />\r\n        <take />\r\n        <look>Matte white root with sparkling blue veins. Restores 10 energy, when eaten.</look>\r\n        <eat type=\"script\"><![CDATA[\r\n          msg (\"You eat the strange root, restoring 10 energy.\")\r\n          if (player.energy + 10 > player.maxenergy) {\r\n            player.energy = player.energy\r\n          }\r\n          else {\r\n            player.energy = player.energy + 10\r\n          }\r\n          this.parent = null\r\n          msg (\"Your energy is \" + player.energy + \"/\" + player.maxenergy)\r\n        ]]></eat>\r\n        <ontake type=\"script\">\r\n        </ontake>\r\n      </object>\r\n      <exit alias=\"east\" to=\"safezone2\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n    </object>\r\n    <object name=\"safezone2\">\r\n      <inherit name=\"editor_room\" />\r\n      <exit alias=\"west\" to=\"safezone\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <exit alias=\"east\" to=\"safezone3\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n    </object>\r\n    <object name=\"safezone3\">\r\n      <inherit name=\"editor_room\" />\r\n      <exit alias=\"west\" to=\"safezone2\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <exit alias=\"east\" to=\"safezone4\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n    </object>\r\n    <object name=\"safezone4\">\r\n      <inherit name=\"editor_room\" />\r\n      <exit alias=\"west\" to=\"safezone3\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <exit alias=\"east\" to=\"safezone5\">\r\n        <inherit name=\"eastdirection\" />\r\n      </exit>\r\n    </object>\r\n    <object name=\"safezone5\">\r\n      <inherit name=\"editor_room\" />\r\n      <object name=\"Teleport2\">\r\n        <inherit name=\"editor_object\" />\r\n        <drop type=\"boolean\">false</drop>\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>Teleport to start</value>\r\n        </displayverbs>\r\n        <inventoryverbs type=\"stringlist\" />\r\n        <teleporttostart type=\"script\">\r\n          MoveObject (player, room)\r\n          player.attackers = NewObjectList()\r\n        </teleporttostart>\r\n      </object>\r\n      <exit alias=\"west\" to=\"safezone4\">\r\n        <inherit name=\"westdirection\" />\r\n      </exit>\r\n      <object name=\"Crate\">\r\n        <inherit name=\"editor_object\" />\r\n        <inherit name=\"container_limited\" />\r\n        <displayverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n        </displayverbs>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n        </inventoryverbs>\r\n        <feature_container />\r\n        <maxobjects type=\"int\">3</maxobjects>\r\n        <attr name=\"feature_usegive\" type=\"boolean\">false</attr>\r\n      </object>\r\n    </object>\r\n  </object>\r\n  <command>\r\n    <pattern>cast #object#</pattern>\r\n    <script><![CDATA[\r\n      if (not HasBoolean(object, \"dead\")) {\r\n        msg (\"That's not something you need to cast.\")\r\n      }\r\n      else if (object.dead) {\r\n        msg (\"That one is already dead.\")\r\n      }\r\n      else if (player.equipped = null) {\r\n        msg (\"You don't have a rune weapon equipped.\")\r\n      }\r\n      else if (not HasInt(player.equipped, \"runestone\")) {\r\n        msg (\"You can't cast a \" + GetDisplayAlias(player.equipped) + \".\")\r\n      }\r\n      else if (not player.energy > 0) {\r\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and try to cast. T-s-s-s. You have no energy left.\")\r\n      }\r\n      else {\r\n        DoAttack (player, player.equipped, object, false, true)\r\n        WeaponUpdate\r\n        msg (\"Your energy is \" + player.energy + \"/\" + player.maxenergy)\r\n      }\r\n    ]]></script>\r\n  </command>\r\n  <object name=\"Code\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"treasureroom\">\r\n      <inherit name=\"editor_room\" />\r\n      <object name=\"Pick\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias>Pick</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 15\r\n          this.agility = 0\r\n          this.critdesc = \"You smash the pick down on #target# (#hits# hits).\"\r\n          this.attackdesc = \"You swing the pick at #target# (#hits# hits).\"\r\n          this.missdesc = \"You swing wildly and entirely miss #target# with your pick.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"Axe\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias>Axe</listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 15\r\n          this.agility = 0\r\n          this.critdesc = \"You smash the axe down on #target# (#hits# hits).\"\r\n          this.attackdesc = \"You swing the axe at #target# (#hits# hits).\"\r\n          this.missdesc = \"You swing wildly and entirely miss #target# with your axe.\"\r\n        </attr>\r\n      </object>\r\n    </object>\r\n    <object name=\"monsterattacks\">\r\n      <inherit name=\"editor_room\" />\r\n      <object name=\"vomitattack\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 10\r\n          this.agility = 0\r\n          this.critdesc = \"#Attacker# spews noxious vomit all over you (#hits# hits).\"\r\n          this.attackdesc = \"#Attacker# vomits over you (#hits# hits).\"\r\n          this.missdesc = \"You narrowly avoid the foul vomit from #attacker#.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"vomitreadying\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 0\r\n          this.agility = -100\r\n          this.critdesc = \"\"\r\n          this.attackdesc = \"\"\r\n          this.missdesc = \"#Attacker#'s abdomen is gurgling alarmingly.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"talonattack\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 8\r\n          this.agility = 0\r\n          this.critdesc = \"#Attacker# strikes you with a monstrous blow (#hits# hits).\"\r\n          this.attackdesc = \"#Attacker# scratch you by claws (#hits# hits).\"\r\n          this.missdesc = \"You barely avoid the clawed hand from #attacker#.\"\r\n        </attr>\r\n      </object>\r\n      <object name=\"kickattack\">\r\n        <inherit name=\"editor_object\" />\r\n        <listalias type=\"string\"></listalias>\r\n        <inventoryverbs type=\"stringlist\">\r\n          <value>Look at</value>\r\n          <value>equip</value>\r\n          <value>Drop</value>\r\n        </inventoryverbs>\r\n        <feature_startscript />\r\n        <take />\r\n        <attr name=\"_initialise_\" type=\"script\">\r\n          this.damage = 8\r\n          this.agility = 0\r\n          this.critdesc = \"#Attacker# furiously kicks you in leg (#hits# hits).\"\r\n          this.attackdesc = \"#Attacker# kicks you (#hits# hits).\"\r\n          this.missdesc = \"You faintly avoid the kick from #attacker#.\"\r\n        </attr>\r\n      </object>\r\n    </object>\r\n  </object>\r\n  <verb>\r\n    <property>teleporttostart</property>\r\n    <pattern>teleport to start</pattern>\r\n    <defaultexpression>\"You can't teleport to start \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <verb>\r\n    <property>teleporttoend</property>\r\n    <pattern>teleport to end</pattern>\r\n    <defaultexpression>\"You can't teleport to end \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <verb>\r\n    <property>put</property>\r\n    <pattern>put</pattern>\r\n    <defaultexpression>\"You can't put \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <function name=\"_DoWear\" parameters=\"object\" type=\"boolean\"><![CDATA[\r\n    // Is this possible?\r\n    if (not HasAttribute(object,\"worn\") or not HasAttribute(object,\"wear_slots\")) {\r\n      // No, not a garment\r\n      msg (DynamicTemplate(\"WearUnsuccessful\", object))\r\n      return (false)\r\n    }\r\n    if (object.parent = game.pov and object.worn = true) {\r\n      // No, already worn\r\n      msg (DynamicTemplate(\"AlreadyWearing\", object))\r\n      return (false)\r\n    }\r\n    if (not ListContains(ScopeInventory(), object)) {\r\n      // No, not held\r\n      msg (DynamicTemplate(\"CannotWearIfNotHeld\", object))\r\n      return (false)\r\n    }\r\n    // Are other worn garments in the way?\r\n    obj = _GetOuterForGarment(game.pov, object)\r\n    if (not obj = null) {\r\n      if (obj.wear_layer > object.wear_layer or obj.wear_layer = 0 or object.wear_layer = 0) {\r\n        msg (DynamicTemplate(\"CannotWearOver\", obj))\r\n        return (false)\r\n      }\r\n      if (obj.wear_layer = object.wear_layer) {\r\n        msg (DynamicTemplate(\"CannotWearWith\", obj))\r\n        return (false)\r\n      }\r\n    }\r\n    if (not TestGarment(object)) {\r\n      return (false)\r\n    }\r\n    WearGarment (object)\r\n    if (object.wearmsg = null) {\r\n      {\r\n        {\r\n          {\r\n            {\r\n              {\r\n                {\r\n                  {\r\n                    {\r\n                      {\r\n                        {\r\n                          {\r\n                            {\r\n                              P (DynamicTemplate(\"WearSuccessful\",object)\r\n                            }\r\n                          }\r\n                        }\r\n                      }\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      P (object.wearmsg)\r\n      player.armour = player.armour + object.armour\r\n      player.strength = player.strength + object.strength\r\n      player.intelligence = player.intelligence + object.intelligence\r\n      player.maxhitpoints = player.maxhitpoints + player.vitality * 4 + object.vitality *4\r\n      player.vitality = player.vitality + object.vitality\r\n      player.agility = player.agility + object.agility\r\n    }\r\n    // do after\r\n    if (HasScript(object, \"onafterwear\")) {\r\n      do (object, \"onafterwear\")\r\n    }\r\n    else if (HasString(object, \"onafterwear\")) {\r\n      P (object.onafterwear)\r\n    }\r\n    AfterWear\r\n    return (true)\r\n  ]]></function>\r\n  <function name=\"_DoRemove\" parameters=\"object\" type=\"boolean\"><![CDATA[\r\n    if (not ListContains(GetAllChildObjects(game.pov), object)) {\r\n      msg (DynamicTemplate(\"CannotRemoveIfNotHeld\", object))\r\n      return (false)\r\n    }\r\n    if (not GetBoolean(object, \"worn\")) {\r\n      msg (DynamicTemplate(\"CannotRemoveIfNotWearing\", object))\r\n      return (false)\r\n    }\r\n    if (not GetBoolean(object, \"removeable\")) {\r\n      if (HasString(object, \"notremoveablemessage\")) {\r\n        msg (object.notremoveablemessage)\r\n      }\r\n      else {\r\n        msg (DynamicTemplate(\"NotRemovable\", object))\r\n      }\r\n      return (false)\r\n    }\r\n    if (HasInt(game.pov, \"maxobjects\")) {\r\n      if (ListCount(GetAllChildObjects(game.pov)) >= game.pov.maxobjects) {\r\n        msg (DynamicTemplate(\"MaxObjectsInInventory\", object))\r\n        return (false)\r\n      }\r\n    }\r\n    obj = _GetOuterForGarment(game.pov, object)\r\n    if (not obj = null) {\r\n      if (obj.wear_layer > object.wear_layer) {\r\n        msg (DynamicTemplate(\"RemoveFirst\", obj))\r\n        return (false)\r\n      }\r\n    }\r\n    if (not TestRemove(object)) {\r\n      return (false)\r\n    }\r\n    RemoveGarment (object)\r\n    if (object.removemsg = null) {\r\n      P (DynamicTemplate(\"RemoveSuccessful\",object))\r\n    }\r\n    else {\r\n      P (object.removemsg)\r\n      player.armour = player.armour - object.armour\r\n      player.strength = player.strength - object.strength\r\n      player.intelligence = player.intelligence - object.intelligence\r\n      player.vitality = player.vitality - object.vitality\r\n      player.maxhitpoints = player.maxhitpoints + player.vitality * 4 - object.vitality *4\r\n      player.agility = player.agility - object.agility\r\n    }\r\n    // do after\r\n    if (HasScript(object, \"onafterremove\")) {\r\n      do (object, \"onafterremove\")\r\n    }\r\n    else if (HasString(object, \"onafterremove\")) {\r\n      P (object.onafterremove)\r\n    }\r\n    AfterRemove\r\n    return (true)\r\n  ]]></function>\r\n  <function name=\"SpawnZombie\" parameters=\"room\"><![CDATA[\r\n    if (HasInt(game, \"crittercount\")) {\r\n      game.crittercount = game.crittercount + 1\r\n    }\r\n    else {\r\n      game.crittercount = 1\r\n    }\r\n    create (\"critter\" + game.crittercount)\r\n    obj = GetObject(\"critter\" + game.crittercount)\r\n    obj.parent = room\r\n    obj.displayverbs = Split(\"Look at;Attack;Shoot;Cast\", \";\")\r\n    obj.dead = false\r\n    obj.changedhitpoints => {\r\n      if (this.hitpoints < 1) {\r\n        msg (\"It is dead!\")\r\n        this.dead = true\r\n        this.displayverbs = Split(\"Look at;Search\", \";\")\r\n      }\r\n    }\r\n    names = Split(\"decipit;decomposing;shambling;disgusting;filthy;falling-apart\", \";\")\r\n    obj.alias = StringListItem(names, game.crittercount % ListCount(names)) + \" zombie\"\r\n    obj.listalias = CapFirst(obj.alias)\r\n    obj.look = ProcessText(\"A \" + obj.alias + \", {random:covered in maggots:missing an arm:with one eye hanging out}\" + \" {colour:#FFFFB5:(@@@open@@@\" + obj.name + \".hitpoints@@@close@@@/20 HP)}\")\r\n    obj.hitpoints = 20\r\n    obj.damage = 10\r\n    obj.agility = 0\r\n    obj.strength = 0\r\n    obj.vitality = 0\r\n    obj.intelligence = 0\r\n    obj.armour = 0\r\n    obj.devastdesc = \"A devastating blow by #attacker# sends you reeling (#hits# hits).\"\r\n    obj.critdesc = \"A well-placed blow by #attacker# sends you reeling (#hits# hits).\"\r\n    obj.attackdesc = \"#Attacker# has hit you (#hits# hits).\"\r\n    obj.weakdesc = \"#Attacker# has hit you slightly (#hits# hits).\"\r\n    obj.missdesc = \"{random:#Attacker# attacks you and <b>misses1</b>:#Attacker# attacks you and <b>misses2</b>:#Attacker# attacks you and <b>misses3</b>}\"\r\n    obj.selectweapon => {\r\n      if (this.weapon = vomitreadying) {\r\n        this.weapon = vomitattack\r\n      }\r\n      else {\r\n        this.weapon = GetObject(PickOneString(\"vomitreadying;talonattack;kickattack;talonattack;kickattack\"))\r\n      }\r\n    }\r\n    obj.searchscript => {\r\n      money = GetRandomInt(1, 50)\r\n      msg (\"You find \" + DisplayMoney(money) + \".\")\r\n      player.money = player.money + money\r\n      if (RandomChance (50) = true) {\r\n        o = PickOneChild(treasureroom)\r\n        msg (\"You also find \" + GetDisplayName(o) + \".\")\r\n        CloneObjectAndMoveHere (o)\r\n      }\r\n    }\r\n  ]]></function>\r\n  <function name=\"DoAttack\" parameters=\"attacker, weapon, target, rangearm, magicarm\"><![CDATA[\r\n    if (rangearm) {\r\n      damageatt = \"rangedamage\"\r\n      attackatt = \"rangedagility\"\r\n      weapon.ammo = weapon.ammo - 1\r\n    }\r\n    else if (magicarm) {\r\n      damageatt = \"magicdamage\"\r\n      attackatt = \"magicagility\"\r\n      player.energy = player.energy - 1\r\n    }\r\n    else {\r\n      damageatt = \"damage\"\r\n      attackatt = \"attack\"\r\n    }\r\n    roll = GetRandomInt(1, 60) + weapon.agility + attacker.agility\r\n    damage = weapon.damage - target.armour + attacker.strength\r\n    if (damage < 1) {\r\n      damage = 1\r\n    }\r\n    if (roll > 80) {\r\n      damage = damage * 3\r\n      AttackReport (weapon.critdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else if (roll > 60) {\r\n      damage = damage * 2\r\n      AttackReport (weapon.critdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else if (roll > 40) {\r\n      AttackReport (weapon.attackdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else if (roll > 20) {\r\n      damage = damage * 0.5\r\n      AttackReport (weapon.attackdesc, attacker, target, damage)\r\n      target.hitpoints = target.hitpoints - damage\r\n    }\r\n    else {\r\n      AttackReport (weapon.missdesc, attacker, target, 0)\r\n    }\r\n  ]]></function>\r\n  <function name=\"WeaponUpdate\">\r\n    if (player.equipped = null) {\r\n      player.equippedname = \"bare hands\"\r\n      player.ammonote = \"-\"\r\n    }\r\n    else {\r\n      player.equippedname = Replace (player.equipped.listalias, \" (equipped)\", \"\")\r\n      if (not HasAttribute(player.equipped, \"ammo\")) {\r\n        player.ammonote = \"-\"\r\n      }\r\n      else {\r\n        player.ammonote = player.equipped.ammo + \"/\" + player.equipped.ammomax\r\n      }\r\n    }\r\n  </function>\r\n  <function name=\"AttackReport\" parameters=\"s, attacker, target, hits\">\r\n    s = Replace(s, \"#Attacker#\", CapFirst(GetDisplayAlias(attacker)))\r\n    s = Replace(s, \"#attacker#\", GetDisplayAlias(attacker))\r\n    s = Replace(s, \"#Target#\", CapFirst(GetDisplayAlias(target)))\r\n    s = Replace(s, \"#target#\", GetDisplayAlias(target))\r\n    s = Replace(s, \"#hits#\", \"\" + hits)\r\n    msg (s)\r\n  </function>\r\n</asl>\r\n```\r\nWould appreciate any help!",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi all!</p>\n<p>My progress at game:</p>\n<ol>\n<li>Addded characteristics (Strength, agility, vitality and intelligence)</li>\n<li>Added fast travels</li>\n<li>Added armour, jewelry and shields</li>\n<li>Added inventory size</li>\n</ol>\n<p>I have an problem - I do not know, how to create container, in which I can place and keep my items in-game, since I have inventory size limit.  I tried to find such topic on forum, but failed.</p>\n<p>Whole code (Presumably, this container should be \"Crate\" in \"safezone5\":</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6606.27193--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;dynamictemplate name=\"WearSuccessful\"&gt;\"You put \" + object.article + \" on.\"&lt;/dynamictemplate&gt;\n  &lt;game name=\"Dwarf World\"&gt;\n    &lt;inherit name=\"theme_novella\" /&gt;\n    &lt;gameid&gt;7b6e3407-e81b-4f7b-b470-6c3a3f9f5b45&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;showmoney /&gt;\n    &lt;defaultfontsize type=\"int\"&gt;14&lt;/defaultfontsize&gt;\n    &lt;backgroundimage&gt;33 2.png&lt;/backgroundimage&gt;\n    &lt;deactivatecommandlinks /&gt;\n    &lt;defaultfont&gt;'Lucida Console', Monaco, monospace&lt;/defaultfont&gt;\n    &lt;defaultbackground&gt;#000000&lt;/defaultbackground&gt;\n    &lt;defaultlinkforeground&gt;#FFFFB5&lt;/defaultlinkforeground&gt;\n    &lt;menufont&gt;'Lucida Console', Monaco, monospace&lt;/menufont&gt;\n    &lt;menubackground&gt;Black&lt;/menubackground&gt;\n    &lt;menuforeground&gt;White&lt;/menuforeground&gt;\n    &lt;menuhoverbackground&gt;Black&lt;/menuhoverbackground&gt;\n    &lt;underlinehyperlinks /&gt;\n    &lt;showcommandbar /&gt;\n    &lt;customwidth type=\"int\"&gt;1200&lt;/customwidth&gt;\n    &lt;feature_pictureframe /&gt;\n    &lt;borderlesscursor /&gt;\n    &lt;defaultforeground&gt;#7BC67B&lt;/defaultforeground&gt;\n    &lt;feature_limitinventory /&gt;\n    &lt;unresolvedcommandhandler type=\"script\"&gt;\n      msg (\"Er, what..?\")\n      game.notarealturn = true\n    &lt;/unresolvedcommandhandler&gt;\n    &lt;start type=\"script\"&gt;\n      // List of attackers\n      player.attackers = NewObjectList()\n      player.ammo = 35\n      // Status attributes\n      WeaponUpdate\n      player.statusattributes = NewStringDictionary()\n      dictionary add (player.statusattributes, \"hitpoints\", \"Hit points: !\")\n      dictionary add (player.statusattributes, \"ammo\", \"Spare ammo: !\")\n      dictionary add (player.statusattributes, \"equippedname\", \"Weapon: !\")\n      dictionary add (player.statusattributes, \"ammonote\", \"Ammo: !\")\n    &lt;/start&gt;\n    &lt;roomenter type=\"script\"&gt;\n    &lt;/roomenter&gt;\n    &lt;object name=\"Loot\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n    &lt;/object&gt;\n  &lt;/game&gt;\n  &lt;command name=\"look\"&gt;\n    &lt;pattern type=\"string\"&gt;^look$|^l$&lt;/pattern&gt;\n    &lt;script&gt;\n      ShowRoomDescription\n      game.notarealturn = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"lookat\"&gt;\n    &lt;pattern&gt;look at #object#; look #object#; x #object#; examine #object#; exam #object#; ex #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (GetBoolean(object, \"hidechildren\")) {\n        object.hidechildren = false\n      }\n      if (TypeOf(object, \"look\") = \"script\") {\n        do (object, \"look\")\n      }\n      else {\n        lookdesc = \"\"\n        if (HasString(object, \"look\")) {\n          lookdesc = object.look\n        }\n        if (LengthOf(lookdesc) = 0) {\n          lookdesc = Template(\"DefaultObjectDescription\")\n        }\n        if (GetBoolean(object, \"switchedon\")) {\n          if (HasString(object, \"switchedondesc\")) {\n            lookdesc = lookdesc + \" \" + object.switchedondesc\n          }\n        }\n        else {\n          if (HasString(object, \"switchedoffdesc\")) {\n            lookdesc = lookdesc + \" \" + object.switchedoffdesc\n          }\n        }\n        isDark = CheckDarkness()\n        if (isDark and not GetBoolean(object, \"lightsource\")) {\n          lookdesc = DynamicTemplate(\"LookAtDarkness\", object)\n        }\n        msg (lookdesc)\n      }\n      ListObjectContents (object)\n      game.notarealturn = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;attack #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you can attack.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else {\n        if (player.equipped = null) {\n          DoAttack (player, player, object, false, false)\n        }\n        else {\n          DoAttack (player, player.equipped, object, false, false)\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;equip #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you can wield.\")\n      }\n      else if (not HasAttribute(object, \"damage\")) {\n        msg (\"That's not something you can wield.\")\n      }\n      else if (not object.parent = player) {\n        msg (\"You are not carrying it.\")\n      }\n      else if (object = player.equipped) {\n        msg (\"You already have.\")\n      }\n      else {\n        if (player.equipped = null) {\n          msg (\"You equip your \" + GetDisplayAlias(object) + \".\")\n        }\n        else {\n          msg (\"You put away your \" + GetDisplayAlias(player.equipped) + \" and equip your \" + GetDisplayAlias(object) + \".\")\n          list add (player.equipped.inventoryverbs, \"Equip\")\n          list remove (player.equipped.inventoryverbs, \"Unequip\")\n          player.equipped.listalias = Replace(player.equipped.listalias, \" (equipped)\", \"\")\n        }\n        player.equipped = object\n        list add (object.inventoryverbs, \"Unequip\")\n        list remove (object.inventoryverbs, \"Equip\")\n        object.listalias = object.listalias + \" (equipped)\"\n        WeaponUpdate\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;unequip #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not object = player.equipped) {\n        msg (\"You are not wielding it.\")\n      }\n      else {\n        msg (\"You put away your spade.\")\n        player.equipped = null\n        list add (object.inventoryverbs, \"Equip\")\n        list remove (object.inventoryverbs, \"Unequip\")\n        object.listalias = Replace(object.listalias, \" (equipped)\", \"\")\n        WeaponUpdate\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;turnscript name=\"attackturnscript\"&gt;\n    &lt;enabled /&gt;\n    &lt;script&gt;\n      if (not GetBoolean(game, \"notarealturn\")) {\n        list = NewObjectList()\n        foreach (obj, GetDirectChildren(player.parent)) {\n          if (HasBoolean(obj, \"dead\")) {\n            if (not obj.dead) {\n              if (HasScript(obj, \"selectweapon\")) {\n                do (obj, \"selectweapon\")\n              }\n              if (HasObject(obj, \"weapon\")) {\n                DoAttack (obj, obj.weapon, player, false, false)\n              }\n              else {\n                DoAttack (obj, obj, player, false)\n              }\n              list add (list, obj)\n            }\n          }\n        }\n        foreach (obj, ListExclude(player.attackers, list)) {\n          if (not obj.dead and RandomChance(80)) {\n            obj.parent = player.parent\n            msg (CapFirst(obj.alias) + \" shambles into the area.\")\n            list add (list, obj)\n          }\n        }\n        player.attackers = list\n      }\n      game.notarealturn = false\n    &lt;/script&gt;\n  &lt;/turnscript&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;shoot #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you need to shoot.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else if (player.equipped = null) {\n        msg (\"You don't have a ranged weapon equipped.\")\n      }\n      else if (not HasInt(player.equipped, \"ammo\")) {\n        msg (\"You can't shoot a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (not player.equipped.ammo &gt; 0) {\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and pull the trigger. Click. No ammo loaded.\")\n      }\n      else {\n        DoAttack (player, player.equipped, object, true, false)\n        WeaponUpdate\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;reload #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasInt(object, \"ammo\")) {\n        msg (\"You can't reload a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (player.ammo &lt; 1) {\n        msg (\"You have no ammo.\")\n      }\n      else {\n        bolts = object.ammomax - object.ammo\n        if (bolts &gt; player.ammo) {\n          bolts = player.ammo\n        }\n        player.ammo = player.ammo - bolts\n        object.ammo = object.ammo + bolts\n        msg (\"You put \" + bolts + \" bolts in it.\")\n        WeaponUpdate\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;search #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (not HasScript(object, \"searchscript\")) {\n        msg (\"There's nothing of interest there.\")\n      }\n      else if (GetBoolean(object, \"searched\")) {\n        msg (\"You find nothing more.\")\n      }\n      else if (not GetBoolean(object, \"dead\") and HasBoolean(object, \"dead\")) {\n        msg (\"That's moving too much for you to search!\")\n      }\n      else {\n        do (object, \"searchscript\")\n        object.searched = true\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;command name=\"status\"&gt;\n    &lt;pattern&gt;status&lt;/pattern&gt;\n    &lt;script&gt;\n      msg (\"Your health is \" + player.hitpoints + \"/\" + player.maxhitpoints)\n      msg (\"Your energy is \" + player.energy + \"/\" + player.maxenergy)\n      msg (\"Your strength is \" + player.strength)\n      msg (\"Your agility is \" + player.agility)\n      msg (\"Your vitality is \" + player.vitality)\n      msg (\"Your intelligence is \" + player.intelligence)\n      msg (\"Your armour is \" + player.armour)\n      msg (\"Your money is \" + player.money + \" coins\")\n      msg (\"Your weapon is \" + player.equippedname)\n      msg (\"Your ammo loaded is \" + player.ammonote)\n      msg (\"Your spare ammo is \" + player.ammo)\n      game.notarealturn = true\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=\"Test\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"room\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;description type=\"string\"&gt;&lt;/description&gt;\n      &lt;descprefix&gt;You are in&lt;/descprefix&gt;\n      &lt;beforefirstenter type=\"script\"&gt;\n        SpawnZombie (this)\n        SpawnZombie (this)\n      &lt;/beforefirstenter&gt;\n      &lt;object name=\"player\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"editor_player\" /&gt;\n        &lt;feature_startscript /&gt;\n        &lt;containermaxobjects&gt;Your backpack is full!&lt;/containermaxobjects&gt;\n        &lt;maxvolume type=\"int\"&gt;2&lt;/maxvolume&gt;\n        &lt;containerfullmessage&gt;Your backpack is full!&lt;/containerfullmessage&gt;\n        &lt;maxobjects type=\"int\"&gt;10000&lt;/maxobjects&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n          player.alias = \"you\"\n          player.hitpoints = 250\n          player.maxhitpoints = 260\n          player.energy = 50\n          player.maxenergy = 60\n          player.damage = 5\n          player.strength = 0\n          player.agility = 0\n          player.vitality = 0\n          player.intelligence = 0\n          player.armour = 0\n          player.money = 10\n          this.critdesc = \"You attack #target# with your bare hands and get a critical (#hits# hits).\"\n          this.attackdesc = \"You attack #target# with your bare hands and hit (#hits# hits).\"\n          this.missdesc = \"You swing wildly and entirely miss #target#.\"\n          player.changedhitpoints =&gt; {\n            if (player.hitpoints &gt; 0) {\n              msg (\"Your health is \" + player.hitpoints + \"/\" + player.maxhitpoints)\n            }\n            else {\n              msg (\"You are dead!\")\n              finish\n            }\n          }\n          player.maxhitpoints = player.maxhitpoints + player.vitality * 4\n        ]]&gt;&lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"spade\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 10\n          this.agility = 0\n          this.critdesc = \"You smash the spade down on #target# (#hits# hits).\"\n          this.attackdesc = \"You swing the spade at #target# (#hits# hits).\"\n          this.missdesc = \"You swing wildly and entirely miss #target#.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"crossbow\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias&gt;pistol&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n          &lt;value&gt;reload&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;look&gt;Good for shooting zombies. Ammo: {crossbow.ammo}/{crossbow.ammomax}&lt;/look&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 5\n          this.agility = 0\n          this.rangedamage = 15\n          this.rangedagility = 3\n          this.ammo = 3\n          this.ammomax = 6\n          this.critdesc = \"A well placed shot with the crossbow on #target# (#hits# hits).\"\n          this.attackdesc = \"You shot the crossbow at #target# (#hits# hits).\"\n          this.missdesc = \"You shoot wildly and entirely miss #target#.\"\n        &lt;/attr&gt;\n        &lt;ontake type=\"script\"&gt;\n        &lt;/ontake&gt;\n      &lt;/object&gt;\n      &lt;exit alias=\"east\" to=\"safezone\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n        &lt;runscript /&gt;\n        &lt;script type=\"script\"&gt;\n          player.attackers = NewObjectList()\n          msg (\"You slam the door, safe at last!\")\n          player.parent = this.to\n        &lt;/script&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"chest\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_limited\" /&gt;\n        &lt;feature_startscript /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Search&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;attr name=\"feature_container\" type=\"boolean\"&gt;false&lt;/attr&gt;\n        &lt;maxobjects type=\"int\"&gt;3&lt;/maxobjects&gt;\n        &lt;hidechildren /&gt;\n        &lt;listchildren /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;&lt;![CDATA[\n          this.searchscript =&gt; {\n            msg (\"You found a shiny chunk of gold ore.\")\n            gold ore.visible = true\n          }\n        ]]&gt;&lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"gold ore\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;visible type=\"boolean\"&gt;false&lt;/visible&gt;\n        &lt;take /&gt;\n      &lt;/object&gt;\n      &lt;object name=\"rune stone\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias&gt;pistol&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;look&gt;In this stone are hidden powerful knowledge of the magic of lightning.&lt;/look&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 5\n          this.agility = 0\n          this.runestone = 1\n          this.magicdamage = 15\n          this.magicagility = 3\n          this.critdesc = \"A well placed lighting with the rune stone on #target# (#hits# hits).\"\n          this.attackdesc = \"You emit lightning at #target# (#hits# hits).\"\n          this.missdesc = \"You shoot lighting wildly and entirely miss #target#.\"\n        &lt;/attr&gt;\n        &lt;ontake type=\"script\"&gt;\n        &lt;/ontake&gt;\n      &lt;/object&gt;\n      &lt;object name=\"helmet of life\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;1&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the helmet on. You recieved 10 armour and 8 max hitpoints!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the helmet off. You lost 10 armour and 8 max hitpoints!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 10\n          this.strength = 0\n          this.agility = 0\n          this.intelligence = 0\n          this.vitality = 2\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"shoulders\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;2&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the shoulders on. You recieved 10 armour!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the shoulders off. You lost 10 armour!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 10\n          this.strength = 0\n          this.agility = 0\n          this.intelligence = 0\n          this.vitality = 0\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"breastplate\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;3&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the breastplate on. You recieved 10 armour!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the breastplate off. You lost 10 armour!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 10\n          this.strength = 0\n          this.agility = 0\n          this.intelligence = 0\n          this.vitality = 0\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"gloves\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;4&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the gloves on. You recieved 10 armour!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the gloves off. You lost 10 armour!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 10\n          this.strength = 0\n          this.agility = 0\n          this.intelligence = 0\n          this.vitality = 0\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"leggins\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;5&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the leggins on. You recieved 10 armour!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the leggins off. You lost 10 armour!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 10\n          this.strength = 0\n          this.agility = 0\n          this.intelligence = 0\n          this.vitality = 0\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"boots\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;6&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the boots on. You recieved 10 armour!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the boots off. You lost 10 armour!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 10\n          this.strength = 0\n          this.agility = 0\n          this.intelligence = 0\n          this.vitality = 0\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"amulet of intelligence\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;7&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the amulet of intelligence on. You recieved 5 intelligence!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the amulet of intelligence off. You lost 5  intelligence!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 0\n          this.strength = 0\n          this.agility = 0\n          this.intelligence = 5\n          this.vitality = 0\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"ring of strength\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;8&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the ring of strength on. You recieved 5 strength!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the ring of strength off. You lost 5 strength!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 0\n          this.strength = 5\n          this.agility = 0\n          this.intelligence = 0\n          this.vitality = 0\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"bracelet of agility\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;9&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the bracelet of agility on. You recieved 5 agility!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the  bracelet of agility off. You lost 5 agility!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 0\n          this.strength = 0\n          this.agility = 5\n          this.intelligence = 0\n          this.vitality = 0\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"Shiny emerald\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;10&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the shiny emerald into your pocket. You recieved 1 strength, intelligence, agility and vitality!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the shiny emerald out of your pocket. You lost 1 strength, intelligence, agility and vitality!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 0\n          this.strength = 1\n          this.agility = 1\n          this.intelligence = 1\n          this.vitality = 1\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"Teleport1\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;drop type=\"boolean\"&gt;false&lt;/drop&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Teleport to end&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;inventoryverbs type=\"stringlist\" /&gt;\n        &lt;teleporttoend type=\"script\"&gt;\n          MoveObject (player, safezone5)\n          player.attackers = NewObjectList()\n        &lt;/teleporttoend&gt;\n      &lt;/object&gt;\n      &lt;object name=\"wooden shield\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"wearable\" /&gt;\n        &lt;listalias&gt;spade&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Wear&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;feature_wearable /&gt;\n        &lt;attr name=\"wear_layer\" type=\"int\"&gt;11&lt;/attr&gt;\n        &lt;wearmsg&gt;You put the wooden shield on. You recieved 20 armour!&lt;/wearmsg&gt;\n        &lt;removemsg&gt;You put the wooden shield offt. You lost 20 armour!&lt;/removemsg&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.armour = 20\n          this.strength = 0\n          this.agility = 0\n          this.intelligence = 0\n          this.vitality = 0\n        &lt;/attr&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"safezone\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;exit alias=\"west\" to=\"room\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n        &lt;runscript /&gt;\n        &lt;script type=\"script\"&gt;\n          player.attackers = NewObjectList()\n          msg (\"You slam the door, safe at last!\")\n          player.parent = this.to\n        &lt;/script&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"dwarven pie\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;take /&gt;\n        &lt;look&gt;Favorite dwarf's pie, stuffed with gravel and sandstone. Hard as stone. Restore 15 HP, when eaten.&lt;/look&gt;\n        &lt;eat type=\"script\"&gt;&lt;![CDATA[\n          msg (\"You eat the dwarven pie, receiving 15 health.\")\n          if (player.hitpoints + 15 &gt; player.maxhitpoints) {\n            player.hitpoints = player.maxhitpoints\n          }\n          else {\n            player.hitpoints = player.hitpoints + 15\n          }\n          this.parent = null\n        ]]&gt;&lt;/eat&gt;\n        &lt;ontake type=\"script\"&gt;\n        &lt;/ontake&gt;\n      &lt;/object&gt;\n      &lt;object name=\"strong beer\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;take /&gt;\n        &lt;look&gt;Strong dwarven beer from underground wheat and a special mix of mushrooms.&lt;/look&gt;\n        &lt;drink type=\"script\"&gt;\n          msg (\"You drink strong dwarven beer. Your strength increased by 5!\")\n          player.strength = player.strength + 5\n          msg (\"Your strength now \" + player.strength)\n          this.parent = null\n        &lt;/drink&gt;\n        &lt;ontake type=\"script\"&gt;\n        &lt;/ontake&gt;\n      &lt;/object&gt;\n      &lt;object name=\"healthy mushroom\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;take /&gt;\n        &lt;look&gt;Mushroom with a large shiny hat of orange color, in white speckles.&lt;/look&gt;\n        &lt;eat type=\"script\"&gt;\n          msg (\"You eat the orange mushroom, receiving 5 vitality!\")\n          player.vitality = player.vitality + 5\n          msg (\"Your vitality now \" + player.vitality)\n          this.parent = null\n          player.maxhitpoints = player.maxhitpoints + player.vitality * 4\n        &lt;/eat&gt;\n        &lt;ontake type=\"script\"&gt;\n        &lt;/ontake&gt;\n      &lt;/object&gt;\n      &lt;object name=\"root of Wisdom\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;take /&gt;\n        &lt;look&gt;Matte white root with sparkling blue veins. Restores 10 energy, when eaten.&lt;/look&gt;\n        &lt;eat type=\"script\"&gt;&lt;![CDATA[\n          msg (\"You eat the strange root, restoring 10 energy.\")\n          if (player.energy + 10 &gt; player.maxenergy) {\n            player.energy = player.energy\n          }\n          else {\n            player.energy = player.energy + 10\n          }\n          this.parent = null\n          msg (\"Your energy is \" + player.energy + \"/\" + player.maxenergy)\n        ]]&gt;&lt;/eat&gt;\n        &lt;ontake type=\"script\"&gt;\n        &lt;/ontake&gt;\n      &lt;/object&gt;\n      &lt;exit alias=\"east\" to=\"safezone2\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n    &lt;object name=\"safezone2\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;exit alias=\"west\" to=\"safezone\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"east\" to=\"safezone3\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n    &lt;object name=\"safezone3\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;exit alias=\"west\" to=\"safezone2\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"east\" to=\"safezone4\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n    &lt;object name=\"safezone4\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;exit alias=\"west\" to=\"safezone3\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;exit alias=\"east\" to=\"safezone5\"&gt;\n        &lt;inherit name=\"eastdirection\" /&gt;\n      &lt;/exit&gt;\n    &lt;/object&gt;\n    &lt;object name=\"safezone5\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;object name=\"Teleport2\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;drop type=\"boolean\"&gt;false&lt;/drop&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;Teleport to start&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;inventoryverbs type=\"stringlist\" /&gt;\n        &lt;teleporttostart type=\"script\"&gt;\n          MoveObject (player, room)\n          player.attackers = NewObjectList()\n        &lt;/teleporttostart&gt;\n      &lt;/object&gt;\n      &lt;exit alias=\"west\" to=\"safezone4\"&gt;\n        &lt;inherit name=\"westdirection\" /&gt;\n      &lt;/exit&gt;\n      &lt;object name=\"Crate\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;inherit name=\"container_limited\" /&gt;\n        &lt;displayverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n        &lt;/displayverbs&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_container /&gt;\n        &lt;maxobjects type=\"int\"&gt;3&lt;/maxobjects&gt;\n        &lt;attr name=\"feature_usegive\" type=\"boolean\"&gt;false&lt;/attr&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;cast #object#&lt;/pattern&gt;\n    &lt;script&gt;&lt;![CDATA[\n      if (not HasBoolean(object, \"dead\")) {\n        msg (\"That's not something you need to cast.\")\n      }\n      else if (object.dead) {\n        msg (\"That one is already dead.\")\n      }\n      else if (player.equipped = null) {\n        msg (\"You don't have a rune weapon equipped.\")\n      }\n      else if (not HasInt(player.equipped, \"runestone\")) {\n        msg (\"You can't cast a \" + GetDisplayAlias(player.equipped) + \".\")\n      }\n      else if (not player.energy &gt; 0) {\n        msg (\"You aim your \" + GetDisplayAlias(player.equipped) + \" and try to cast. T-s-s-s. You have no energy left.\")\n      }\n      else {\n        DoAttack (player, player.equipped, object, false, true)\n        WeaponUpdate\n        msg (\"Your energy is \" + player.energy + \"/\" + player.maxenergy)\n      }\n    ]]&gt;&lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=\"Code\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"treasureroom\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;object name=\"Pick\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias&gt;Pick&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 15\n          this.agility = 0\n          this.critdesc = \"You smash the pick down on #target# (#hits# hits).\"\n          this.attackdesc = \"You swing the pick at #target# (#hits# hits).\"\n          this.missdesc = \"You swing wildly and entirely miss #target# with your pick.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"Axe\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias&gt;Axe&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 15\n          this.agility = 0\n          this.critdesc = \"You smash the axe down on #target# (#hits# hits).\"\n          this.attackdesc = \"You swing the axe at #target# (#hits# hits).\"\n          this.missdesc = \"You swing wildly and entirely miss #target# with your axe.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;object name=\"monsterattacks\"&gt;\n      &lt;inherit name=\"editor_room\" /&gt;\n      &lt;object name=\"vomitattack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 10\n          this.agility = 0\n          this.critdesc = \"#Attacker# spews noxious vomit all over you (#hits# hits).\"\n          this.attackdesc = \"#Attacker# vomits over you (#hits# hits).\"\n          this.missdesc = \"You narrowly avoid the foul vomit from #attacker#.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"vomitreadying\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 0\n          this.agility = -100\n          this.critdesc = \"\"\n          this.attackdesc = \"\"\n          this.missdesc = \"#Attacker#'s abdomen is gurgling alarmingly.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"talonattack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 8\n          this.agility = 0\n          this.critdesc = \"#Attacker# strikes you with a monstrous blow (#hits# hits).\"\n          this.attackdesc = \"#Attacker# scratch you by claws (#hits# hits).\"\n          this.missdesc = \"You barely avoid the clawed hand from #attacker#.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n      &lt;object name=\"kickattack\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;listalias type=\"string\"&gt;&lt;/listalias&gt;\n        &lt;inventoryverbs type=\"stringlist\"&gt;\n          &lt;value&gt;Look at&lt;/value&gt;\n          &lt;value&gt;equip&lt;/value&gt;\n          &lt;value&gt;Drop&lt;/value&gt;\n        &lt;/inventoryverbs&gt;\n        &lt;feature_startscript /&gt;\n        &lt;take /&gt;\n        &lt;attr name=\"_initialise_\" type=\"script\"&gt;\n          this.damage = 8\n          this.agility = 0\n          this.critdesc = \"#Attacker# furiously kicks you in leg (#hits# hits).\"\n          this.attackdesc = \"#Attacker# kicks you (#hits# hits).\"\n          this.missdesc = \"You faintly avoid the kick from #attacker#.\"\n        &lt;/attr&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;verb&gt;\n    &lt;property&gt;teleporttostart&lt;/property&gt;\n    &lt;pattern&gt;teleport to start&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't teleport to start \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;teleporttoend&lt;/property&gt;\n    &lt;pattern&gt;teleport to end&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't teleport to end \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;verb&gt;\n    &lt;property&gt;put&lt;/property&gt;\n    &lt;pattern&gt;put&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't put \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;function name=\"_DoWear\" parameters=\"object\" type=\"boolean\"&gt;&lt;![CDATA[\n    // Is this possible?\n    if (not HasAttribute(object,\"worn\") or not HasAttribute(object,\"wear_slots\")) {\n      // No, not a garment\n      msg (DynamicTemplate(\"WearUnsuccessful\", object))\n      return (false)\n    }\n    if (object.parent = game.pov and object.worn = true) {\n      // No, already worn\n      msg (DynamicTemplate(\"AlreadyWearing\", object))\n      return (false)\n    }\n    if (not ListContains(ScopeInventory(), object)) {\n      // No, not held\n      msg (DynamicTemplate(\"CannotWearIfNotHeld\", object))\n      return (false)\n    }\n    // Are other worn garments in the way?\n    obj = _GetOuterForGarment(game.pov, object)\n    if (not obj = null) {\n      if (obj.wear_layer &gt; object.wear_layer or obj.wear_layer = 0 or object.wear_layer = 0) {\n        msg (DynamicTemplate(\"CannotWearOver\", obj))\n        return (false)\n      }\n      if (obj.wear_layer = object.wear_layer) {\n        msg (DynamicTemplate(\"CannotWearWith\", obj))\n        return (false)\n      }\n    }\n    if (not TestGarment(object)) {\n      return (false)\n    }\n    WearGarment (object)\n    if (object.wearmsg = null) {\n      {\n        {\n          {\n            {\n              {\n                {\n                  {\n                    {\n                      {\n                        {\n                          {\n                            {\n                              P (DynamicTemplate(\"WearSuccessful\",object)\n                            }\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    else {\n      P (object.wearmsg)\n      player.armour = player.armour + object.armour\n      player.strength = player.strength + object.strength\n      player.intelligence = player.intelligence + object.intelligence\n      player.maxhitpoints = player.maxhitpoints + player.vitality * 4 + object.vitality *4\n      player.vitality = player.vitality + object.vitality\n      player.agility = player.agility + object.agility\n    }\n    // do after\n    if (HasScript(object, \"onafterwear\")) {\n      do (object, \"onafterwear\")\n    }\n    else if (HasString(object, \"onafterwear\")) {\n      P (object.onafterwear)\n    }\n    AfterWear\n    return (true)\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"_DoRemove\" parameters=\"object\" type=\"boolean\"&gt;&lt;![CDATA[\n    if (not ListContains(GetAllChildObjects(game.pov), object)) {\n      msg (DynamicTemplate(\"CannotRemoveIfNotHeld\", object))\n      return (false)\n    }\n    if (not GetBoolean(object, \"worn\")) {\n      msg (DynamicTemplate(\"CannotRemoveIfNotWearing\", object))\n      return (false)\n    }\n    if (not GetBoolean(object, \"removeable\")) {\n      if (HasString(object, \"notremoveablemessage\")) {\n        msg (object.notremoveablemessage)\n      }\n      else {\n        msg (DynamicTemplate(\"NotRemovable\", object))\n      }\n      return (false)\n    }\n    if (HasInt(game.pov, \"maxobjects\")) {\n      if (ListCount(GetAllChildObjects(game.pov)) &gt;= game.pov.maxobjects) {\n        msg (DynamicTemplate(\"MaxObjectsInInventory\", object))\n        return (false)\n      }\n    }\n    obj = _GetOuterForGarment(game.pov, object)\n    if (not obj = null) {\n      if (obj.wear_layer &gt; object.wear_layer) {\n        msg (DynamicTemplate(\"RemoveFirst\", obj))\n        return (false)\n      }\n    }\n    if (not TestRemove(object)) {\n      return (false)\n    }\n    RemoveGarment (object)\n    if (object.removemsg = null) {\n      P (DynamicTemplate(\"RemoveSuccessful\",object))\n    }\n    else {\n      P (object.removemsg)\n      player.armour = player.armour - object.armour\n      player.strength = player.strength - object.strength\n      player.intelligence = player.intelligence - object.intelligence\n      player.vitality = player.vitality - object.vitality\n      player.maxhitpoints = player.maxhitpoints + player.vitality * 4 - object.vitality *4\n      player.agility = player.agility - object.agility\n    }\n    // do after\n    if (HasScript(object, \"onafterremove\")) {\n      do (object, \"onafterremove\")\n    }\n    else if (HasString(object, \"onafterremove\")) {\n      P (object.onafterremove)\n    }\n    AfterRemove\n    return (true)\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"SpawnZombie\" parameters=\"room\"&gt;&lt;![CDATA[\n    if (HasInt(game, \"crittercount\")) {\n      game.crittercount = game.crittercount + 1\n    }\n    else {\n      game.crittercount = 1\n    }\n    create (\"critter\" + game.crittercount)\n    obj = GetObject(\"critter\" + game.crittercount)\n    obj.parent = room\n    obj.displayverbs = Split(\"Look at;Attack;Shoot;Cast\", \";\")\n    obj.dead = false\n    obj.changedhitpoints =&gt; {\n      if (this.hitpoints &lt; 1) {\n        msg (\"It is dead!\")\n        this.dead = true\n        this.displayverbs = Split(\"Look at;Search\", \";\")\n      }\n    }\n    names = Split(\"decipit;decomposing;shambling;disgusting;filthy;falling-apart\", \";\")\n    obj.alias = StringListItem(names, game.crittercount % ListCount(names)) + \" zombie\"\n    obj.listalias = CapFirst(obj.alias)\n    obj.look = ProcessText(\"A \" + obj.alias + \", {random:covered in maggots:missing an arm:with one eye hanging out}\" + \" {colour:#FFFFB5:(@@@open@@@\" + obj.name + \".hitpoints@@@close@@@/20 HP)}\")\n    obj.hitpoints = 20\n    obj.damage = 10\n    obj.agility = 0\n    obj.strength = 0\n    obj.vitality = 0\n    obj.intelligence = 0\n    obj.armour = 0\n    obj.devastdesc = \"A devastating blow by #attacker# sends you reeling (#hits# hits).\"\n    obj.critdesc = \"A well-placed blow by #attacker# sends you reeling (#hits# hits).\"\n    obj.attackdesc = \"#Attacker# has hit you (#hits# hits).\"\n    obj.weakdesc = \"#Attacker# has hit you slightly (#hits# hits).\"\n    obj.missdesc = \"{random:#Attacker# attacks you and &lt;b&gt;misses1&lt;/b&gt;:#Attacker# attacks you and &lt;b&gt;misses2&lt;/b&gt;:#Attacker# attacks you and &lt;b&gt;misses3&lt;/b&gt;}\"\n    obj.selectweapon =&gt; {\n      if (this.weapon = vomitreadying) {\n        this.weapon = vomitattack\n      }\n      else {\n        this.weapon = GetObject(PickOneString(\"vomitreadying;talonattack;kickattack;talonattack;kickattack\"))\n      }\n    }\n    obj.searchscript =&gt; {\n      money = GetRandomInt(1, 50)\n      msg (\"You find \" + DisplayMoney(money) + \".\")\n      player.money = player.money + money\n      if (RandomChance (50) = true) {\n        o = PickOneChild(treasureroom)\n        msg (\"You also find \" + GetDisplayName(o) + \".\")\n        CloneObjectAndMoveHere (o)\n      }\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"DoAttack\" parameters=\"attacker, weapon, target, rangearm, magicarm\"&gt;&lt;![CDATA[\n    if (rangearm) {\n      damageatt = \"rangedamage\"\n      attackatt = \"rangedagility\"\n      weapon.ammo = weapon.ammo - 1\n    }\n    else if (magicarm) {\n      damageatt = \"magicdamage\"\n      attackatt = \"magicagility\"\n      player.energy = player.energy - 1\n    }\n    else {\n      damageatt = \"damage\"\n      attackatt = \"attack\"\n    }\n    roll = GetRandomInt(1, 60) + weapon.agility + attacker.agility\n    damage = weapon.damage - target.armour + attacker.strength\n    if (damage &lt; 1) {\n      damage = 1\n    }\n    if (roll &gt; 80) {\n      damage = damage * 3\n      AttackReport (weapon.critdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else if (roll &gt; 60) {\n      damage = damage * 2\n      AttackReport (weapon.critdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else if (roll &gt; 40) {\n      AttackReport (weapon.attackdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else if (roll &gt; 20) {\n      damage = damage * 0.5\n      AttackReport (weapon.attackdesc, attacker, target, damage)\n      target.hitpoints = target.hitpoints - damage\n    }\n    else {\n      AttackReport (weapon.missdesc, attacker, target, 0)\n    }\n  ]]&gt;&lt;/function&gt;\n  &lt;function name=\"WeaponUpdate\"&gt;\n    if (player.equipped = null) {\n      player.equippedname = \"bare hands\"\n      player.ammonote = \"-\"\n    }\n    else {\n      player.equippedname = Replace (player.equipped.listalias, \" (equipped)\", \"\")\n      if (not HasAttribute(player.equipped, \"ammo\")) {\n        player.ammonote = \"-\"\n      }\n      else {\n        player.ammonote = player.equipped.ammo + \"/\" + player.equipped.ammomax\n      }\n    }\n  &lt;/function&gt;\n  &lt;function name=\"AttackReport\" parameters=\"s, attacker, target, hits\"&gt;\n    s = Replace(s, \"#Attacker#\", CapFirst(GetDisplayAlias(attacker)))\n    s = Replace(s, \"#attacker#\", GetDisplayAlias(attacker))\n    s = Replace(s, \"#Target#\", CapFirst(GetDisplayAlias(target)))\n    s = Replace(s, \"#target#\", GetDisplayAlias(target))\n    s = Replace(s, \"#hits#\", \"\" + hits)\n    msg (s)\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n<p>Would appreciate any help!</p>\n\n",
      "PostDate": "2018-07-30T15:56:49.1406433Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "51157f69-5e3a-43f9-b3e8-342aca9cd282",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "ah.. a storage system! hehe :D\r\n\r\n------------------------------\r\n\r\nconceptually:\r\n\r\nthink of Objects as like \"folders\", how does folder organization and management work?\r\n\r\n(this 'storage' Object is either: separate from your 'inventory', NOT within the currently controlled Player Object, or contained within your 'inventory', within the currently controlled Player Object, or there's a storage object for each of your Player Objects, contained within each of their inventories, aka within those Player Objects)\r\n\r\nstorage\r\n-> item storage\r\n->-> consumable item storage\r\n->->-> normal consumable item storage\r\n->->-> battle consumable item storage\r\n->->-> interior consumable item storage\r\n->->-> exterior consumable item storage\r\n->-> non-consumable storage\r\n-> equipment storage\r\n->-> weapon equipment storage\r\n->->-> melee weapon equipment storage\r\n->->->-> sword melee weapon equipment storage\r\n->->->->-> katana object\r\n->->->->-> claymore object\r\n->->->->-> short sword object\r\n->->->->-> long sword object\r\n->->->->-> broad sword object\r\n->->->-> axe melee weapon equipment storage\r\n->->-> projectile weapon equipment storage\r\n->-> armor equipment storage\r\n->-> clothing equipment storage\r\n-> spell storage\r\n->-> fire spell storage\r\n->-> water spell storage\r\n->-> air spell storage\r\n->-> earth spell storage\r\n-> ability storage\r\n\r\nalso, give your individual Objects a 'type_of_object' (or whatever you want to name/label it as) String Attribute (and/or you can also use the: Object Types / Types / Inherited Attributes / DoesInherit, as well), so you can match them up to the the correct type of storage object, for example:\r\n\r\n```\r\n// a simple brief coding example only:\r\n\r\n// create (\"katana\")\r\n// katana.type_of_object = \"sword\"\r\n\r\n// create (\"lance\")\r\n// katana.type_of_object = \"spear\"\r\n\r\n// stringlist_variable = split (\"katana;lance\", \";\")\r\n// string_variable = StringListItem (stringlist_variable, GetRandomInt (0,1))\r\n// object_parameter = GetObject (string_variable)\r\n\r\nif (object_parameter.type_of_object = \"sword\") {\r\n  object_parameter.parent = sword_melee_weapon_equiptment_storage_object\r\n} else if (object_parameter.type_of_object = \"spear\") {\r\n  object_parameter.parent = spear_melee_weapon_equiptment_storage_object\r\n}\r\n```\r\n\r\nnow, what are the various actions involved?\r\n\r\nsearching\r\nchecking\r\ncreating\r\nviewing\r\ndepositing (storing)\r\nwithdrawing (removing)\r\ndropping\r\ndeleting\r\nsorting\r\ncloning\r\n\r\nmake/use the 'Command' Element for your actions, or you can add Verbs to individual Objects too\r\n\r\n------\r\n\r\nyou can read up (google) on:\r\n\r\n'programming: data structure and management' if you want to get into much more advanced coding designs...\r\n\r\n-------\r\n\r\nI'll see if you can do this on your own.... but if not... we'll help you out",
      "EditableFormat": "markdown",
      "HTML": "<p>ah.. a storage system! hehe :D</p>\n<hr>\n<p>conceptually:</p>\n<p>think of Objects as like \"folders\", how does folder organization and management work?</p>\n<p>(this 'storage' Object is either: separate from your 'inventory', NOT within the currently controlled Player Object, or contained within your 'inventory', within the currently controlled Player Object, or there's a storage object for each of your Player Objects, contained within each of their inventories, aka within those Player Objects)</p>\n<p>storage<br>\n-&gt; item storage<br>\n-&gt;-&gt; consumable item storage<br>\n-&gt;-&gt;-&gt; normal consumable item storage<br>\n-&gt;-&gt;-&gt; battle consumable item storage<br>\n-&gt;-&gt;-&gt; interior consumable item storage<br>\n-&gt;-&gt;-&gt; exterior consumable item storage<br>\n-&gt;-&gt; non-consumable storage<br>\n-&gt; equipment storage<br>\n-&gt;-&gt; weapon equipment storage<br>\n-&gt;-&gt;-&gt; melee weapon equipment storage<br>\n-&gt;-&gt;-&gt;-&gt; sword melee weapon equipment storage<br>\n-&gt;-&gt;-&gt;-&gt;-&gt; katana object<br>\n-&gt;-&gt;-&gt;-&gt;-&gt; claymore object<br>\n-&gt;-&gt;-&gt;-&gt;-&gt; short sword object<br>\n-&gt;-&gt;-&gt;-&gt;-&gt; long sword object<br>\n-&gt;-&gt;-&gt;-&gt;-&gt; broad sword object<br>\n-&gt;-&gt;-&gt;-&gt; axe melee weapon equipment storage<br>\n-&gt;-&gt;-&gt; projectile weapon equipment storage<br>\n-&gt;-&gt; armor equipment storage<br>\n-&gt;-&gt; clothing equipment storage<br>\n-&gt; spell storage<br>\n-&gt;-&gt; fire spell storage<br>\n-&gt;-&gt; water spell storage<br>\n-&gt;-&gt; air spell storage<br>\n-&gt;-&gt; earth spell storage<br>\n-&gt; ability storage</p>\n<p>also, give your individual Objects a 'type_of_object' (or whatever you want to name/label it as) String Attribute (and/or you can also use the: Object Types / Types / Inherited Attributes / DoesInherit, as well), so you can match them up to the the correct type of storage object, for example:</p>\n<pre><code>// a simple brief coding example only:\n\n// create (\"katana\")\n// katana.type_of_object = \"sword\"\n\n// create (\"lance\")\n// katana.type_of_object = \"spear\"\n\n// stringlist_variable = split (\"katana;lance\", \";\")\n// string_variable = StringListItem (stringlist_variable, GetRandomInt (0,1))\n// object_parameter = GetObject (string_variable)\n\nif (object_parameter.type_of_object = \"sword\") {\n  object_parameter.parent = sword_melee_weapon_equiptment_storage_object\n} else if (object_parameter.type_of_object = \"spear\") {\n  object_parameter.parent = spear_melee_weapon_equiptment_storage_object\n}\n</code></pre>\n<p>now, what are the various actions involved?</p>\n<p>searching<br>\nchecking<br>\ncreating<br>\nviewing<br>\ndepositing (storing)<br>\nwithdrawing (removing)<br>\ndropping<br>\ndeleting<br>\nsorting<br>\ncloning</p>\n<p>make/use the 'Command' Element for your actions, or you can add Verbs to individual Objects too</p>\n<hr>\n<p>you can read up (google) on:</p>\n<p>'programming: data structure and management' if you want to get into much more advanced coding designs...</p>\n<hr>\n<p>I'll see if you can do this on your own.... but if not... we'll help you out</p>\n\n",
      "PostDate": "2018-07-30T18:55:49.2662714Z",
      "LastEditDate": "2018-07-30T19:09:46.0209341Z",
      "link": null
    },
    {
      "PostId": "af5da21b-98b3-47ff-9971-ef8c85846257",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://i.imgur.com/4nc2mjqb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you, hegemonkhan.\r\n\r\nWell... I done commands which adds and extracts objects from crate, if you are in zone with crate and if in crate is still left some room/or this item is located in crate.\r\n\r\nBut what I cannot understand - how can I disable normal \"take\" verb from things, when they are in crate. Because if player will use normal \"take\" verb, crate will think, that object that was taken, still  occupies some place in it, and this will ruin the whole system, sooner or later, because there will be no place left in crates.\r\n\r\nNow I will post my code on GitHub, because it's pretty big now.\r\n\r\nCode: https://gist.github.com/Goldo-Golderson/8f6fd47ca6b5dc6b97215f3f2662f76a\r\n\r\nWould appreciate any help.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you, hegemonkhan.</p>\n<p>Well... I done commands which adds and extracts objects from crate, if you are in zone with crate and if in crate is still left some room/or this item is located in crate.</p>\n<p>But what I cannot understand - how can I disable normal \"take\" verb from things, when they are in crate. Because if player will use normal \"take\" verb, crate will think, that object that was taken, still  occupies some place in it, and this will ruin the whole system, sooner or later, because there will be no place left in crates.</p>\n<p>Now I will post my code on GitHub, because it's pretty big now.</p>\n<p>Code: https://gist.github.com/Goldo-Golderson/8f6fd47ca6b5dc6b97215f3f2662f76a</p>\n<p>Would appreciate any help.</p>\n\n",
      "PostDate": "2018-07-31T10:46:53.4121678Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "823f18ad-42ff-45dd-870f-2e58cd6c5983",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think I must be missing something. The code you posted has an object, 'Crate', which the player can put things into and take them out again.\r\n\r\nWhat else are you trying to do?",
      "EditableFormat": "markdown",
      "HTML": "<p>I think I must be missing something. The code you posted has an object, 'Crate', which the player can put things into and take them out again.</p>\n<p>What else are you trying to do?</p>\n\n",
      "PostDate": "2018-07-31T13:01:10.4480188Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f169adf8-a8d6-4df9-92e6-12277d86f05f",
      "UserId": 368834,
      "Username": "Goldo Golderson",
      "AvatarUrl": "https://i.imgur.com/4nc2mjqb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "For taking things from Crate, player need to use special command \"get #object# from crate\", which reduses count of \"objects\" in crate. But when he click on the things in the crate, there is a normal verb \"take\", which is not reduses count of \"objects\" in Crate. This means, what crate will be owercrowded,  if player will accidentally use the vrong verb \"take #object#\", instead of \"get #object# from crate\".\r\n\r\nHow can I avoid that sort of thing? For example, remove verb \"take\" from objects, that currently in crate?\r\n\r\nI am talking about these strings\r\n```\r\n        <maxobjects type=\"int\">3</maxobjects>\r\n        <objects type=\"int\">0</objects>\r\n```\r\n\r\nand these\r\n\r\n```\r\n      if (Crate.objects + 1 > 3) {\r\n        msg (\"You cannot put \" + object.name + \" to storage. It is full.\")\r\n      }\r\n      else if (game.pov.parent = safezone5) {\r\n        object.parent = Crate\r\n        msg (\"You put \" + object.name + \" to storage.\")\r\n        Crate.objects = Crate.objects + 1\r\n```\r\n\r\nand these\r\n\r\n```\r\n      else if (Contains (Crate, object)) {\r\n        msg (\"You took \" + object.name + \" from storage.\")\r\n        object.parent = player\r\n        Crate.objects = Crate.objects - 1\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>For taking things from Crate, player need to use special command \"get #object# from crate\", which reduses count of \"objects\" in crate. But when he click on the things in the crate, there is a normal verb \"take\", which is not reduses count of \"objects\" in Crate. This means, what crate will be owercrowded,  if player will accidentally use the vrong verb \"take #object#\", instead of \"get #object# from crate\".</p>\n<p>How can I avoid that sort of thing? For example, remove verb \"take\" from objects, that currently in crate?</p>\n<p>I am talking about these strings</p>\n<pre><code>        &lt;maxobjects type=\"int\"&gt;3&lt;/maxobjects&gt;\n        &lt;objects type=\"int\"&gt;0&lt;/objects&gt;\n</code></pre>\n<p>and these</p>\n<pre><code>      if (Crate.objects + 1 &gt; 3) {\n        msg (\"You cannot put \" + object.name + \" to storage. It is full.\")\n      }\n      else if (game.pov.parent = safezone5) {\n        object.parent = Crate\n        msg (\"You put \" + object.name + \" to storage.\")\n        Crate.objects = Crate.objects + 1\n</code></pre>\n<p>and these</p>\n<pre><code>      else if (Contains (Crate, object)) {\n        msg (\"You took \" + object.name + \" from storage.\")\n        object.parent = player\n        Crate.objects = Crate.objects - 1\n</code></pre>\n\n",
      "PostDate": "2018-07-31T17:03:48.1649625Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "529bdd5d-6d69-4a56-8e64-62408e516d5a",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "the 'Verbs' are actually Script Attributes (with some additional coding to make them have their 'Verb' functionality), and the operating list of Verbs for an Object is controlled by:\r\n\r\nthe built-in 'displayverbs' and/or 'inventoryverbs' String List Attributes\r\n\r\nso, you just add/remove the 'Verb' items from these lists as you desire/need\r\n\r\n------\r\n\r\nPixie's great guides on Verbs, displayverbs, and inventoryverbs:\r\n\r\nhttp://docs.textadventures.co.uk/quest/using_verbs.html\r\n\r\nhttp://docs.textadventures.co.uk/quest/display_verbs.html (displayverbs and inventoryverbs are the same thing: inventoryverbs is merely for when the object is in the inventory: when the object is contained within the currently controlled Player Object, and displayverbs is when its not)\r\n\r\n-----\r\n\r\nalso, I believe that built-into quest is functionality for handling 'take' and 'drop', in that you can set their built-in Booleans to enable/disable them as well, for example:\r\n\r\nbook.take = true // the 'take' functionality for the 'book' Object is enabled\r\nbook.take = false // the 'take' functionality for the 'book' Object is disabled\r\n\r\nbook.drop = true // the 'drop' functionality for the 'book' Object is enabled\r\nbook.drop = false // the 'drop' functionality for the 'book' Object is disabled\r\n\r\n------\r\n\r\nask if you need help with anything",
      "EditableFormat": "markdown",
      "HTML": "<p>the 'Verbs' are actually Script Attributes (with some additional coding to make them have their 'Verb' functionality), and the operating list of Verbs for an Object is controlled by:</p>\n<p>the built-in 'displayverbs' and/or 'inventoryverbs' String List Attributes</p>\n<p>so, you just add/remove the 'Verb' items from these lists as you desire/need</p>\n<hr>\n<p>Pixie's great guides on Verbs, displayverbs, and inventoryverbs:</p>\n<p>http://docs.textadventures.co.uk/quest/using_verbs.html</p>\n<p>http://docs.textadventures.co.uk/quest/display_verbs.html (displayverbs and inventoryverbs are the same thing: inventoryverbs is merely for when the object is in the inventory: when the object is contained within the currently controlled Player Object, and displayverbs is when its not)</p>\n<hr>\n<p>also, I believe that built-into quest is functionality for handling 'take' and 'drop', in that you can set their built-in Booleans to enable/disable them as well, for example:</p>\n<p>book.take = true // the 'take' functionality for the 'book' Object is enabled<br>\nbook.take = false // the 'take' functionality for the 'book' Object is disabled</p>\n<p>book.drop = true // the 'drop' functionality for the 'book' Object is enabled<br>\nbook.drop = false // the 'drop' functionality for the 'book' Object is disabled</p>\n<hr>\n<p>ask if you need help with anything</p>\n\n",
      "PostDate": "2018-07-31T21:36:23.1029508Z",
      "LastEditDate": "2018-07-31T21:39:23.793818Z",
      "link": null
    }
  ]
}
