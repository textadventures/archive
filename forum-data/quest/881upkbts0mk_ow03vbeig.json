{
  "Topic": {
    "TopicId": "881upkbts0mk_ow03vbeig",
    "ForumId": "10",
    "Title": "Switch between text input field and just a cursor during play [SOLVED]",
    "LastUpdated": "2017-12-15T00:30:51.4475181Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "a49a1ce3-9a2b-43dc-a793-f77956f8ef4b",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I want it to switch from the default command box to the alternate prompt with cursor during play.\r\n\r\nThis is the best I've come up with, but it isn't quite the same as it is when you select the option in the editor.\r\n\r\n```\r\n//Switch to cursor prompt\r\nJS.eval (\"$('#txtCommandPrompt').html('\" + game.commandcursor + \"');setInterfaceString('TypeHereLabel', '');\")\r\n\r\n//Switch to text input box\r\n\r\nJS.eval (\"$('#txtCommandPrompt').empty().hide();setInterfaceString('TypeHereLabel', 'Type here...');\")\r\n```\r\n\r\n---\r\nI've changed the values of ```game.borderlesscursor``` and ```game.showcommandbar```, but neither appears to have any effect (and it also appears that the former is set to ```false``` while the latter is ```true```, whether I select 'use a cursor instead' or not).\r\n\r\n---\r\nThis one is kicking my butt.",
      "EditableFormat": "markdown",
      "HTML": "<p>I want it to switch from the default command box to the alternate prompt with cursor during play.</p>\n<p>This is the best I've come up with, but it isn't quite the same as it is when you select the option in the editor.</p>\n<pre><code>//Switch to cursor prompt\nJS.eval (\"$('#txtCommandPrompt').html('\" + game.commandcursor + \"');setInterfaceString('TypeHereLabel', '');\")\n\n//Switch to text input box\n\nJS.eval (\"$('#txtCommandPrompt').empty().hide();setInterfaceString('TypeHereLabel', 'Type here...');\")\n</code></pre>\n<hr>\n<p>I've changed the values of <code>game.borderlesscursor</code> and <code>game.showcommandbar</code>, but neither appears to have any effect (and it also appears that the former is set to <code>false</code> while the latter is <code>true</code>, whether I select 'use a cursor instead' or not).</p>\n<hr>\n<p>This one is kicking my butt.</p>\n\n",
      "PostDate": "2017-12-15T00:30:51.4475181Z",
      "LastEditDate": "2017-12-15T02:27:01.2065406Z",
      "link": null
    },
    {
      "PostId": "961171cc-4a8f-4f5f-9a04-9a03d4b7a323",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I saw this earlier, may contain clues/help. or not. It's all above my pay grade. just looks similar. Ar Ar\r\n<http://textadventures.co.uk/forum/quest/topic/5754/initinterface-help-required>\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I saw this earlier, may contain clues/help. or not. It's all above my pay grade. just looks similar. Ar Ar<br>\n<a href=\"http://textadventures.co.uk/forum/quest/topic/5754/initinterface-help-required\">http://textadventures.co.uk/forum/quest/topic/5754/initinterface-help-required</a></p>\n\n",
      "PostDate": "2017-12-15T01:39:19.9625181Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d6312835-225d-4005-b645-bb9bacc2c945",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Eureka!\r\n\r\nForgewright, you the man!",
      "EditableFormat": "markdown",
      "HTML": "<p>Eureka!</p>\n<p>Forgewright, you the man!</p>\n\n",
      "PostDate": "2017-12-15T02:06:41.0387102Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "72c63d44-6c32-4e68-b4b5-25b66addf423",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here's what I used:\r\n\r\nLogging into the computer:\r\n```\r\nClearScreen\r\nJS.eval (\"$('#txtCommandPrompt').prepend('\" + game.commandcursor + \"');setInterfaceString('TypeHereLabel', '');\")\r\nJS.eval (\"$('#txtCommandDiv').css('border','none');$('#txtCommand').css('outline','none').css('border', 'none');\")\r\n```\r\n\r\n---\r\nAfter logging out:\r\n```\r\nJS.eval (\"$('#txtCommandPrompt').empty().hide();setInterfaceString('TypeHereLabel', 'Type here...');\")\r\nJS.setCommandBarStyle (game.commandbarformat)\r\nJS.eval (\"$('#txtCommand').css('font-family','\"+game.defaultfont+\"');\")\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Here's what I used:</p>\n<p>Logging into the computer:</p>\n<pre><code>ClearScreen\nJS.eval (\"$('#txtCommandPrompt').prepend('\" + game.commandcursor + \"');setInterfaceString('TypeHereLabel', '');\")\nJS.eval (\"$('#txtCommandDiv').css('border','none');$('#txtCommand').css('outline','none').css('border', 'none');\")\n</code></pre>\n<hr>\n<p>After logging out:</p>\n<pre><code>JS.eval (\"$('#txtCommandPrompt').empty().hide();setInterfaceString('TypeHereLabel', 'Type here...');\")\nJS.setCommandBarStyle (game.commandbarformat)\nJS.eval (\"$('#txtCommand').css('font-family','\"+game.defaultfont+\"');\")\n</code></pre>\n\n",
      "PostDate": "2017-12-15T02:19:19.1459166Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dc657894-846a-42ad-a11d-86af9148537e",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Glad it worked out for you! I compare my forum searching skills to that of the proverbial blind squirrel...",
      "EditableFormat": "markdown",
      "HTML": "<p>Glad it worked out for you! I compare my forum searching skills to that of the proverbial blind squirrel...</p>\n\n",
      "PostDate": "2017-12-15T03:11:13.80093Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6f0ddd1f-c347-4170-9182-8e1912bd4d17",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">I compare my forum searching skills to that of the proverbial blind squirrel...\r\n\r\nMe too.\r\n\r\n---\r\nLook!\r\n\r\nHere's a bonus prize!\r\n\r\nI just figured out how to make the player jump (or whatever we want the player to do).\r\n\r\nIt adds it to the command prompt first, as if the player had pasted it in, then it executes by simulating pressing ENTER in 1.5 seconds.\r\n\r\n```\r\nJS.eval (\";document.getElementById('txtCommand').value = 'jump';var e = jQuery.Event('keypress');e.which = 13;e.keyCode = 13;setTimeout(function(){commandKey(e);},1500);\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I compare my forum searching skills to that of the proverbial blind squirrel...</p>\n</blockquote>\n<p>Me too.</p>\n<hr>\n<p>Look!</p>\n<p>Here's a bonus prize!</p>\n<p>I just figured out how to make the player jump (or whatever we want the player to do).</p>\n<p>It adds it to the command prompt first, as if the player had pasted it in, then it executes by simulating pressing ENTER in 1.5 seconds.</p>\n<pre><code>JS.eval (\";document.getElementById('txtCommand').value = 'jump';var e = jQuery.Event('keypress');e.which = 13;e.keyCode = 13;setTimeout(function(){commandKey(e);},1500);\")\n</code></pre>\n\n",
      "PostDate": "2017-12-15T03:57:07.9548805Z",
      "LastEditDate": "2017-12-15T03:58:48.2473797Z",
      "link": null
    },
    {
      "PostId": "10929cbc-5045-4ff1-8662-392b6a62ad4b",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here it is in slow motion:\r\n\r\n```\r\nJS.eval(\"var cmdFun = ['','j','u','m','p'];var i = 0;function iterateCmdFun(){if(i == cmdFun.length){var e = jQuery.Event('keypress');e.which = 13;e.keyCode = 13;commandKey(e);return false;}setTimeout(function(){document.getElementById('txtCommand').value = document.getElementById('txtCommand').value + cmdFun[i];i++;iterateCmdFun();},1500);};iterateCmdFun();\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Here it is in slow motion:</p>\n<pre><code>JS.eval(\"var cmdFun = ['','j','u','m','p'];var i = 0;function iterateCmdFun(){if(i == cmdFun.length){var e = jQuery.Event('keypress');e.which = 13;e.keyCode = 13;commandKey(e);return false;}setTimeout(function(){document.getElementById('txtCommand').value = document.getElementById('txtCommand').value + cmdFun[i];i++;iterateCmdFun();},1500);};iterateCmdFun();\")\n</code></pre>\n\n",
      "PostDate": "2017-12-15T04:31:13.6467967Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9417fe81-baa9-44d0-9c02-524d42c3d5fc",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Isn't that what the typewriter option at the bottom of the add script popup box does...?\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Isn't that what the typewriter option at the bottom of the add script popup box does...?</p>\n\n",
      "PostDate": "2017-12-15T04:41:58.5648315Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3d8f2bf8-7a72-4fa9-ab70-c665bec2303a",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Kinda, but this puts it in the command prompt, one letter at a time, as if the player were entering the command.  Then it simulates an ENTER press at the last letter, sending the command through.",
      "EditableFormat": "markdown",
      "HTML": "<p>Kinda, but this puts it in the command prompt, one letter at a time, as if the player were entering the command.  Then it simulates an ENTER press at the last letter, sending the command through.</p>\n\n",
      "PostDate": "2017-12-15T04:54:48.1233472Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "21f54307-2ffe-425b-bac8-794a09ecc40b",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ahh, ghost writer.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ahh, ghost writer.</p>\n\n",
      "PostDate": "2017-12-15T07:09:38.6389027Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c7bb50a0-49c2-4d18-a7e3-3f1f680dfbf3",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "In a previous thread on the forum, I seem to remember someone wanted to change the continue function. Wanted to restrict it to a certain letter as opposed to any key. \r\nCould your 'keyCode/commandKey' help with that.",
      "EditableFormat": "markdown",
      "HTML": "<p>In a previous thread on the forum, I seem to remember someone wanted to change the continue function. Wanted to restrict it to a certain letter as opposed to any key.<br>\nCould your 'keyCode/commandKey' help with that.</p>\n\n",
      "PostDate": "2017-12-15T08:10:56.1989408Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "005d0c6a-102d-43d5-8db8-b204bcbeebf6",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Maybe...  I'll try it out in a bit.",
      "EditableFormat": "markdown",
      "HTML": "<p>Maybe...  I'll try it out in a bit.</p>\n\n",
      "PostDate": "2017-12-15T14:11:10.9677468Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "60a27941-f68a-4568-a3a6-d8d238ab6a4d",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "http://i.imgur.com/FOIjtApb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How about this?\r\n\r\n**EDITED (added the function: ```WaitFunction(letter)```)**\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Continue Function\">\r\n    <gameid>176bc4ca-f00d-456f-bfc9-b90bf4452749</gameid>\r\n    <version>1.1</version>\r\n    <firstpublished>2017</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <description type=\"string\"></description>\r\n    <enter type=\"script\">\r\n      WaitFunction (\"g\")\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n  </object>\r\n  <function name=\"WaitFunction\" parameters=\"key\"><![CDATA[\r\n    key = UCase(key)\r\n    key = Asc(key)\r\n    if (key<Asc(\"A\") or key>Asc(\"Z\")) {\r\n      error (\"The key must be a letter!\")\r\n    }\r\n    // DEBUGGING\r\n    // msg(key)\r\n    msg (\"<div style='display:none' id='pressToContinue'><center><h4>PRESS \"+Chr(key)+\" TO CONTINUE!</h4></center></div>\")\r\n    JS.eval (\"$('#pressToContinue').insertBefore($('#txtCommand')).css('display','block');setInterfaceString('TypeHereLabel','Press \"+Chr(key)+\" to continue!');$('input').bind('keyup',function(e){var value = (e.keyCode);if(value !== parseInt('\"+key+\"')){document.getElementById('txtCommand').value = '';setInterfaceString('TypeHereLabel','You must press \"+Chr(key)+\"');}else{\t$('input').unbind('keyup');\tsetInterfaceString('TypeHereLabel','Type here...');$('#pressToContinue').hide();document.getElementById('txtCommand').value = '';}});\")\r\n  ]]></function>\r\n</asl>\r\n```\r\n\r\n---\r\nI've got it calling the function in the room's **After enter** script, just in case anyone want to play with this and change it around.\r\n\r\nJust be sure to wrap your letter in ```\"\"``` in the parameter, just like you would any other string.\r\n\r\nExample:\r\n\r\n```WaitFunction(\"c\")```",
      "EditableFormat": "markdown",
      "HTML": "<p>How about this?</p>\n<p><strong>EDITED (added the function: <code>WaitFunction(letter)</code>)</strong></p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Continue Function\"&gt;\n    &lt;gameid&gt;176bc4ca-f00d-456f-bfc9-b90bf4452749&lt;/gameid&gt;\n    &lt;version&gt;1.1&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;description type=\"string\"&gt;&lt;/description&gt;\n    &lt;enter type=\"script\"&gt;\n      WaitFunction (\"g\")\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;function name=\"WaitFunction\" parameters=\"key\"&gt;&lt;![CDATA[\n    key = UCase(key)\n    key = Asc(key)\n    if (key&lt;Asc(\"A\") or key&gt;Asc(\"Z\")) {\n      error (\"The key must be a letter!\")\n    }\n    // DEBUGGING\n    // msg(key)\n    msg (\"&lt;div style='display:none' id='pressToContinue'&gt;&lt;center&gt;&lt;h4&gt;PRESS \"+Chr(key)+\" TO CONTINUE!&lt;/h4&gt;&lt;/center&gt;&lt;/div&gt;\")\n    JS.eval (\"$('#pressToContinue').insertBefore($('#txtCommand')).css('display','block');setInterfaceString('TypeHereLabel','Press \"+Chr(key)+\" to continue!');$('input').bind('keyup',function(e){var value = (e.keyCode);if(value !== parseInt('\"+key+\"')){document.getElementById('txtCommand').value = '';setInterfaceString('TypeHereLabel','You must press \"+Chr(key)+\"');}else{\t$('input').unbind('keyup');\tsetInterfaceString('TypeHereLabel','Type here...');$('#pressToContinue').hide();document.getElementById('txtCommand').value = '';}});\")\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>I've got it calling the function in the room's <strong>After enter</strong> script, just in case anyone want to play with this and change it around.</p>\n<p>Just be sure to wrap your letter in <code>\"\"</code> in the parameter, just like you would any other string.</p>\n<p>Example:</p>\n<p><code>WaitFunction(\"c\")</code></p>\n\n",
      "PostDate": "2017-12-15T15:59:20.9138583Z",
      "LastEditDate": "2017-12-15T16:23:01.8630502Z",
      "link": null
    }
  ]
}
