{
  "Topic": {
    "TopicId": "4q1dz-zrqus1sbcril0f4q",
    "ForumId": "10",
    "Title": "Q5.8 Save Conflicts with Old Request Save?",
    "LastUpdated": "2018-05-22T21:33:12.9553487Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "9c1b206e-61a1-4ac3-8d8e-d46664395d2e",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I just encountered this problem while testing my Snazzy Side Nav Menu, but decided to start a new topic for this issue.\r\n\r\nI'm experiencing strange errors while saving my game.  Quest behaves as if it is saving, but when I reload the game, I can tell it is not the game that I just saved.  I even got some strange error message about not being able to save that I've never seen before.\r\n\r\nI'm thinking this is because, with some of my custom commands like autosave, quit and save, etc., I'm using the old ```request (RequestSave, \"\")``` script, but I noticed that the latest Quest 5.8 beta has a new default save command:\r\n```\r\nif (HasAttribute(game, \"questplatform\")) {\r\n  if (game.questplatform = \"desktop\") {\r\n    requestsave ()\r\n  }\r\n  else {\r\n    JS.saveGame ()\r\n  }\r\n}\r\nelse {\r\n  requestsave ()\r\n}\r\n```\r\nThe two different save methods must be in conflict.  Should I change all my old ```request (RequestSave, \"\")``` scripts to ```HandleSingleCommand (\"save\")```?\r\n\r\n------------   (filler to allow me to repost)  ----------------------------------------------------------------------+++++++++++++++++++++++++++++\r\n\r\nUpdate: I just copied the new Q5.8 save command from the CoreCommandsLib into my game.  When I look at it, it says \"Failed to load script:\" in a couple of places.  ```requestsave ()``` is in red when it should normally be in black.  Now I'm not sure which save method is the problem?!  Whiskey Tango Foxtrot?!",
      "EditableFormat": "markdown",
      "HTML": "<p>I just encountered this problem while testing my Snazzy Side Nav Menu, but decided to start a new topic for this issue.</p>\n<p>I'm experiencing strange errors while saving my game.  Quest behaves as if it is saving, but when I reload the game, I can tell it is not the game that I just saved.  I even got some strange error message about not being able to save that I've never seen before.</p>\n<p>I'm thinking this is because, with some of my custom commands like autosave, quit and save, etc., I'm using the old <code>request (RequestSave, \"\")</code> script, but I noticed that the latest Quest 5.8 beta has a new default save command:</p>\n<pre><code>if (HasAttribute(game, \"questplatform\")) {\n  if (game.questplatform = \"desktop\") {\n    requestsave ()\n  }\n  else {\n    JS.saveGame ()\n  }\n}\nelse {\n  requestsave ()\n}\n</code></pre>\n<p>The two different save methods must be in conflict.  Should I change all my old <code>request (RequestSave, \"\")</code> scripts to <code>HandleSingleCommand (\"save\")</code>?</p>\n<p>------------   (filler to allow me to repost)  ----------------------------------------------------------------------+++++++++++++++++++++++++++++</p>\n<p>Update: I just copied the new Q5.8 save command from the CoreCommandsLib into my game.  When I look at it, it says \"Failed to load script:\" in a couple of places.  <code>requestsave ()</code> is in red when it should normally be in black.  Now I'm not sure which save method is the problem?!  Whiskey Tango Foxtrot?!</p>\n\n",
      "PostDate": "2018-05-22T21:33:12.9553487Z",
      "LastEditDate": "2018-05-22T21:41:18.0322143Z",
      "link": null
    },
    {
      "PostId": "c863d69a-67c4-43c3-a8ef-216b48a9190c",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello.\r\n\r\nWhich beta are you running?  You want beta 4.  The others had problems.\r\n\r\n\r\n...and can you send me your code?",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello.</p>\n<p>Which beta are you running?  You want beta 4.  The others had problems.</p>\n<p>...and can you send me your code?</p>\n\n",
      "PostDate": "2018-05-22T22:42:51.7798045Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cc223cab-b46d-42e1-852c-faed565ce929",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The new save stuff is a change in the C# sharp code.  There are a few changes in the C# code, so Quest 5.8 was changed to ASL version 580.\r\n\r\nAfter Quest 5.8.0 beta3, Quest will check for the ASL version before it decides which scripts to run.  So, if your ASL version is 550 and you're running 5.8.0 beta4, it will use the old scripts.  This will suck if you are playing an .aslx file in the editor without changing the ASL version to 580 (this happens when you change something and Quest autosaves, or you can flip to code view and change it manually), because Quest will be using the stuff from the v580 core library, and that will not work with the v550 C# scripts it's running.\r\n\r\nThis may make us revised the default commands and functions which we've overridden, but it is necessary to keep the older games running.  As long as you are playing a v550 .quest file, all of the old core libraries are packaged in your game, so everything works.\r\n\r\n---\r\nI'm not 100% sure the save script will behave differently between v550 and v580.  I think it will, but Pixie did the save stuff, and I'm still trying to wrap my mind around it.  It works for me in every game I have opened, though.  New or old games.  ...and I have lots of ```reqeuest``` instead of ```requestsave``` going on, too.\r\n\r\nWait...   Have I tested SAVING those old games?  (Be right back!)",
      "EditableFormat": "markdown",
      "HTML": "<p>The new save stuff is a change in the C# sharp code.  There are a few changes in the C# code, so Quest 5.8 was changed to ASL version 580.</p>\n<p>After Quest 5.8.0 beta3, Quest will check for the ASL version before it decides which scripts to run.  So, if your ASL version is 550 and you're running 5.8.0 beta4, it will use the old scripts.  This will suck if you are playing an .aslx file in the editor without changing the ASL version to 580 (this happens when you change something and Quest autosaves, or you can flip to code view and change it manually), because Quest will be using the stuff from the v580 core library, and that will not work with the v550 C# scripts it's running.</p>\n<p>This may make us revised the default commands and functions which we've overridden, but it is necessary to keep the older games running.  As long as you are playing a v550 .quest file, all of the old core libraries are packaged in your game, so everything works.</p>\n<hr>\n<p>I'm not 100% sure the save script will behave differently between v550 and v580.  I think it will, but Pixie did the save stuff, and I'm still trying to wrap my mind around it.  It works for me in every game I have opened, though.  New or old games.  ...and I have lots of <code>reqeuest</code> instead of <code>requestsave</code> going on, too.</p>\n<p>Wait...   Have I tested SAVING those old games?  (Be right back!)</p>\n\n",
      "PostDate": "2018-05-22T23:12:18.5360073Z",
      "LastEditDate": "2018-05-22T23:13:57.0903376Z",
      "link": null
    },
    {
      "PostId": "21ccbdbd-ff36-4736-b1b1-3f80783262b5",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Testing notes (part 1)\r\n\r\nI just added the 'save' command from 5.7.2 to a game I made with 5.8.0 beta4.\r\n\r\nIt saved and the save loaded and everything worked fine.",
      "EditableFormat": "markdown",
      "HTML": "<p>Testing notes (part 1)</p>\n<p>I just added the 'save' command from 5.7.2 to a game I made with 5.8.0 beta4.</p>\n<p>It saved and the save loaded and everything worked fine.</p>\n\n",
      "PostDate": "2018-05-22T23:20:38.8534991Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5ff0e604-9423-481e-af27-56ffd6b23071",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Testing notes (part 2)\r\n\r\nThis is all in the editor from an .aslx file, except for the save files (which, of course, are not .aslx files and must be loaded in the player side).\r\n\r\n---\r\nI can't get it to throw an error.  I changed the ASL version in my new game (made with Quest 5.8.0 beta4) to 550 and added 5.7.2's save command, then played and saved.  The save file worked perfectly.\r\n\r\nI played a 5.7.2 (version 550) game from the editor and saved.  The save file worked again.  Then, I added the old save command to it, and it worked again.  Then, I changed it to 580 and it worked again.  Then, I removed the old save command, and it worked again.\r\n\r\nI can't think of any other way to approach it.",
      "EditableFormat": "markdown",
      "HTML": "<p>Testing notes (part 2)</p>\n<p>This is all in the editor from an .aslx file, except for the save files (which, of course, are not .aslx files and must be loaded in the player side).</p>\n<hr>\n<p>I can't get it to throw an error.  I changed the ASL version in my new game (made with Quest 5.8.0 beta4) to 550 and added 5.7.2's save command, then played and saved.  The save file worked perfectly.</p>\n<p>I played a 5.7.2 (version 550) game from the editor and saved.  The save file worked again.  Then, I added the old save command to it, and it worked again.  Then, I changed it to 580 and it worked again.  Then, I removed the old save command, and it worked again.</p>\n<p>I can't think of any other way to approach it.</p>\n\n",
      "PostDate": "2018-05-22T23:34:38.079348Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "215c557e-1dc4-48bb-8137-73a87d553808",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "### **NOTE: Games made in 5.8 beta will not work online at all until the new version is actually released and updated online!**\r\n\r\n---\r\n#### **EXCEPTION:**\r\n\r\nIf you open a v550 game in Quest 5.8 beta4, then immediately publish it without changing anything, Quest will not change it to v580.  If you modify anything in the GUI then press 'Play', Quest autosaves.  When this happens, it rewrites the entire .aslx file, and it changes 550 to 580 when it does this.\r\n\r\nIf you click 'Save' from code view, it will not change the ASL version.  \r\n\r\nMake sure it's set to 580 if publishing from 5.8.  But know that it won't work online just yet, and any version of Quest before 5.8 will not load it at all.  It will throw an incorrect ASL version error.  And, again, this is due to (good) changes in the C# sharp code, which is not packaged up with published games.\r\n\r\n---\r\nSo: \r\n\r\nWhen working on a game which I alone will be playing or editing, I'm using 5.8.\r\n\r\nIf I plan on sharing it in any way, shape, or form within the next month, I use 5.7.2.",
      "EditableFormat": "markdown",
      "HTML": "<h3><strong>NOTE: Games made in 5.8 beta will not work online at all until the new version is actually released and updated online!</strong></h3>\n<hr>\n<h4><strong>EXCEPTION:</strong></h4>\n<p>If you open a v550 game in Quest 5.8 beta4, then immediately publish it without changing anything, Quest will not change it to v580.  If you modify anything in the GUI then press 'Play', Quest autosaves.  When this happens, it rewrites the entire .aslx file, and it changes 550 to 580 when it does this.</p>\n<p>If you click 'Save' from code view, it will not change the ASL version.</p>\n<p>Make sure it's set to 580 if publishing from 5.8.  But know that it won't work online just yet, and any version of Quest before 5.8 will not load it at all.  It will throw an incorrect ASL version error.  And, again, this is due to (good) changes in the C# sharp code, which is not packaged up with published games.</p>\n<hr>\n<p>So:</p>\n<p>When working on a game which I alone will be playing or editing, I'm using 5.8.</p>\n<p>If I plan on sharing it in any way, shape, or form within the next month, I use 5.7.2.</p>\n\n",
      "PostDate": "2018-05-22T23:47:18.9098839Z",
      "LastEditDate": "2018-05-22T23:55:35.198086Z",
      "link": null
    },
    {
      "PostId": "7e0d4d27-ac0c-46bd-9696-2a2d73bd53cf",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Don't ask me why, but when you copy the save command from 5.8 into your game, you have to change ```requestsave ()``` to ```requestsave```, otherwise it complains about a parameter.\r\n\r\nNOTE:  This only happens when the 'save' command is actually in your game's code (for some reason).",
      "EditableFormat": "markdown",
      "HTML": "<p>Don't ask me why, but when you copy the save command from 5.8 into your game, you have to change <code>requestsave ()</code> to <code>requestsave</code>, otherwise it complains about a parameter.</p>\n<p>NOTE:  This only happens when the 'save' command is actually in your game's code (for some reason).</p>\n\n",
      "PostDate": "2018-05-23T00:32:48.8842392Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3715c12f-6c0d-4e45-8d20-3310b965f193",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "GIF (Saving is CRAZY)\r\n\r\n<details>\r\n\r\n<a href=\"https://user-images.githubusercontent.com/30656341/40397684-8031b2fa-5df9-11e8-87ed-b08c0bfb6a49.gif\"><img loop src=\"https://user-images.githubusercontent.com/30656341/40397684-8031b2fa-5df9-11e8-87ed-b08c0bfb6a49.gif\"/></a>\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>GIF (Saving is CRAZY)</p>\n<details>\n<p><a href=\"https://user-images.githubusercontent.com/30656341/40397684-8031b2fa-5df9-11e8-87ed-b08c0bfb6a49.gif\"><img src=\"https://user-images.githubusercontent.com/30656341/40397684-8031b2fa-5df9-11e8-87ed-b08c0bfb6a49.gif\"></a></p>\n</details>\n\n",
      "PostDate": "2018-05-23T00:52:06.5855866Z",
      "LastEditDate": "2018-05-23T01:04:29.1553659Z",
      "link": null
    },
    {
      "PostId": "ce97c34a-c272-49fb-858b-062b5a669f13",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oddly, the command in CoreCommands does not have the parentheses, but Quest adds them to the .aslx file.\r\n\r\n```\r\n  <command name=\"save\">\r\n    <pattern type=\"string\">^save$</pattern>\r\n    <script>\r\n      if (HasAttribute(game, \"questplatform\")) {\r\n        if (game.questplatform = \"desktop\") {\r\n          requestsave\r\n        }\r\n        else {\r\n          JS.saveGame ()\r\n        }\r\n      }\r\n      else {\r\n        requestsave\r\n      }\r\n    </script>\r\n  </command>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Oddly, the command in CoreCommands does not have the parentheses, but Quest adds them to the .aslx file.</p>\n<pre><code>  &lt;command name=\"save\"&gt;\n    &lt;pattern type=\"string\"&gt;^save$&lt;/pattern&gt;\n    &lt;script&gt;\n      if (HasAttribute(game, \"questplatform\")) {\n        if (game.questplatform = \"desktop\") {\n          requestsave\n        }\n        else {\n          JS.saveGame ()\n        }\n      }\n      else {\n        requestsave\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n</code></pre>\n\n",
      "PostDate": "2018-05-23T01:00:55.0589193Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "be0637e0-1bac-4b8f-a040-c01b27d04ac3",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "GIF 2 (```requestsave``` boogaloo)\r\n\r\n<details>\r\n\r\n<a href=\"https://user-images.githubusercontent.com/30656341/40397924-fb41c88a-5dfa-11e8-84ce-b68ab907717e.gif\"><img loop src=\"https://user-images.githubusercontent.com/30656341/40397924-fb41c88a-5dfa-11e8-84ce-b68ab907717e.gif\"/></a>\r\n\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>GIF 2 (<code>requestsave</code> boogaloo)</p>\n<details>\n<p><a href=\"https://user-images.githubusercontent.com/30656341/40397924-fb41c88a-5dfa-11e8-84ce-b68ab907717e.gif\"><img src=\"https://user-images.githubusercontent.com/30656341/40397924-fb41c88a-5dfa-11e8-84ce-b68ab907717e.gif\"></a></p>\n</details>\n\n",
      "PostDate": "2018-05-23T01:03:09.2302245Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0c733c24-1ed9-459f-bea0-8058c0aa19a1",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "PS\r\n\r\nI bet Pixie can fix this in less than 1 minute.  \r\n\r\n---\r\nI never thought to copy the command into a game to see if it worked that way, and I bet no one else testing 5.8 (besides Dcoder) has done so, either.\r\n\r\nHelluva catch, Dcoder!",
      "EditableFormat": "markdown",
      "HTML": "<p>PS</p>\n<p>I bet Pixie can fix this in less than 1 minute.</p>\n<hr>\n<p>I never thought to copy the command into a game to see if it worked that way, and I bet no one else testing 5.8 (besides Dcoder) has done so, either.</p>\n<p>Helluva catch, Dcoder!</p>\n\n",
      "PostDate": "2018-05-23T01:10:50.4313842Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c186bfce-24f6-4224-a760-060f29e3da7d",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Pixie has corrected this in the source code on GitHub, so the next release will include the fix.",
      "EditableFormat": "markdown",
      "HTML": "<p>Pixie has corrected this in the source code on GitHub, so the next release will include the fix.</p>\n\n",
      "PostDate": "2018-05-23T22:29:02.0105046Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
