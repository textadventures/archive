{
  "Topic": {
    "TopicId": "ga3bkltjo0ymsgr1lib3vw",
    "ForumId": "10",
    "Title": "Reset the entire map?",
    "LastUpdated": "2023-12-10T06:08:23.3568695Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "e762a234-5eb1-4f9b-ae42-7d7252b4c2c1",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello! I'm having a bit of an issue with quest, at least the desktop version, and I was hoping y'all could help. I've hit an error where when moving between maps using the TeleportTo function to save the prior map sometimes it just freezes up the map and it stops working altogether. I've been using the TeleportTo code for saving areas to leave and return to for AGES without any issue and haven't made any changes to it or anything related and it doesn't happen on the online version, only the desktop version, so I think it might just be an issue with Quest's memory or how it is with Windows 11 since I didn't have this problem on 10 rather than the code itself and this is happening with entrances I haven't touched in ages and were perfectly fine before so this isn't something I changed. Now, I love the map, it's one of my favorite things about Quest. \r\n\r\nSo I was wondering, is there a quick way to just wipe and reset the map? I was thinking of just giving the player an item they can use if the map goes hinky so they can just reset it, even if it clears the prior mapped out data, better that than just having it be broken altogether. (Or if you have any idea what's causing that/how to fix the error itself please let me know!) ",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello! I'm having a bit of an issue with quest, at least the desktop version, and I was hoping y'all could help. I've hit an error where when moving between maps using the TeleportTo function to save the prior map sometimes it just freezes up the map and it stops working altogether. I've been using the TeleportTo code for saving areas to leave and return to for AGES without any issue and haven't made any changes to it or anything related and it doesn't happen on the online version, only the desktop version, so I think it might just be an issue with Quest's memory or how it is with Windows 11 since I didn't have this problem on 10 rather than the code itself and this is happening with entrances I haven't touched in ages and were perfectly fine before so this isn't something I changed. Now, I love the map, it's one of my favorite things about Quest.</p>\n<p>So I was wondering, is there a quick way to just wipe and reset the map? I was thinking of just giving the player an item they can use if the map goes hinky so they can just reset it, even if it clears the prior mapped out data, better that than just having it be broken altogether. (Or if you have any idea what's causing that/how to fix the error itself please let me know!)</p>\n\n",
      "PostDate": "2023-12-10T06:08:23.3568695Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9dbd0fe5-19b9-4391-9bfb-81664eb3a0ae",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry I hope it's alright to bump this. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry I hope it's alright to bump this.</p>\n\n",
      "PostDate": "2024-01-01T00:37:11.3721659Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7d90f47e-724f-41cc-aef0-6131f1dc43b5",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Does running `Grid_Redraw` again not fix it?\r\n\r\nIn that case, off the top of my head I'd suggest something like this as a way to clear the map:\r\n```\r\ngame.pov.grid_coordinates = NewDictionary()\r\ndictionary add (game.pov.grid_coordinates, game.pov.parent.name, QuickParams (\"x\", 0.0, \"y\", 0.0, \"z\", 0.0))\r\nJS.Grid_ClearAllLayers ()\r\nGrid_Redraw\r\nGrid_DrawPlayerInRoom (game.pov.parent)\r\n```\r\nThis clears out the coordinate dictionary, sets the coordinates of the current room to zero, and then redraws the map based on that.\r\n\r\nBut… how does it interact with the teleport system?\r\n\r\n**If the map is also messed up the next time you teleport to a new location**, it may be necessary to clear all other coordinate systems too. To do this, you would do something like:\r\n```\r\nforeach (attr, GetAttributeNames (game.pov, false)) {\r\n  if (StartsWith (attr, \"saved_map_for_\")) {\r\n    set (game.pov, attr, null)\r\n  }\r\n}\r\n```\r\n\r\n**If teleporting again actually fixes the map**, it may be beneficial to try resetting the map to its last-saved-state rather than clearing it. In which case you could do this to try fixing a messed up map:\r\n\r\n```\r\ngame.pov.grid_coordinates = NewDictionary()\r\ndictionary add (game.pov.grid_coordinates, game.pov.parent.name, QuickParams (\"x\", 0.0, \"y\", 0.0, \"z\", 0.0))\r\nforeach (attr, GetAttributeNames (game.pov, false)) {\r\n  if (StartsWith (attr, \"saved_map_for_\")) {\r\n    coords = GetAttribute (game.pov, attr)\r\n    if (DictionaryContains (coords, game.pov.parent.name)) {\r\n      game.pov.grid_coordinates = coords\r\n    }\r\n  }\r\n}\r\nJS.Grid_ClearAllLayers ()\r\nGrid_Redraw\r\nGrid_DrawPlayerInRoom (game.pov.parent)\r\n```\r\nIt basically restores the map to a backup of the state it was in the last time this room was part of the map data saved when teleporting; or clears it if that doesn't help.\r\n\r\n<hr style=\"border-top: 1px dashed blue\"/>\r\n\r\n**Other thoughts:** Saving the map between teleporting might be a good idea, but it may also be adding unnecessary complexity. For many games, it would be simpler just to manually set coordinates. For example, you could put something like this in your start script instead of clearing the map every time you teleport:\r\n```\r\nzonex = 0\r\nzoney = 0\r\ncoords = NewDictionary()\r\n\r\n// list of rooms that you can teleport to\r\nzones = Split(\"starting room;wizard's tower;banana plantation;dungeons;planet araraaargh\")\r\nzonesize = sqrt(ListCount(zones) + 1)/2\r\nfor (zonex, -zonesize, zonesize) {\r\n  for (zoney, -zonesize, zonesize) {\r\n    if (ListCount (zones) > 0) {\r\n      zone = ListItem (zones, 0)\r\n      list remove (zones, zone)\r\n      dictionary add (coords, zone, QuickParams (\"x\", zonex * 250.0, \"y\", zoney * 250.0, \"z\", 0.0))\r\n    }\r\n  }\r\n}\r\nplayer.grid_coordinates = coords\r\n```\r\n(using a list of the room names for the places you can teleport to)\r\nThis basically puts the separate locations the player can teleport to in a grid on the map, 250 standard-room-widths apart. Most games never get anywhere close to this size with an exploreable map; so it means there's no need to save and reload different parts of the map: the other areas are on the same map, they're just so far away that the player never sees them.\r\n\r\nIf you only have one teleport destination in each area (which seems to be a prerequisite for the TeleportTo function), you could do this instead; and teleporting is as simple as moving the player to a new area.",
      "EditableFormat": "markdown",
      "HTML": "<p>Does running <code>Grid_Redraw</code> again not fix it?</p>\n<p>In that case, off the top of my head I'd suggest something like this as a way to clear the map:</p>\n<pre><code>game.pov.grid_coordinates = NewDictionary()\ndictionary add (game.pov.grid_coordinates, game.pov.parent.name, QuickParams (\"x\", 0.0, \"y\", 0.0, \"z\", 0.0))\nJS.Grid_ClearAllLayers ()\nGrid_Redraw\nGrid_DrawPlayerInRoom (game.pov.parent)\n</code></pre>\n<p>This clears out the coordinate dictionary, sets the coordinates of the current room to zero, and then redraws the map based on that.</p>\n<p>But… how does it interact with the teleport system?</p>\n<p><strong>If the map is also messed up the next time you teleport to a new location</strong>, it may be necessary to clear all other coordinate systems too. To do this, you would do something like:</p>\n<pre><code>foreach (attr, GetAttributeNames (game.pov, false)) {\n  if (StartsWith (attr, \"saved_map_for_\")) {\n    set (game.pov, attr, null)\n  }\n}\n</code></pre>\n<p><strong>If teleporting again actually fixes the map</strong>, it may be beneficial to try resetting the map to its last-saved-state rather than clearing it. In which case you could do this to try fixing a messed up map:</p>\n<pre><code>game.pov.grid_coordinates = NewDictionary()\ndictionary add (game.pov.grid_coordinates, game.pov.parent.name, QuickParams (\"x\", 0.0, \"y\", 0.0, \"z\", 0.0))\nforeach (attr, GetAttributeNames (game.pov, false)) {\n  if (StartsWith (attr, \"saved_map_for_\")) {\n    coords = GetAttribute (game.pov, attr)\n    if (DictionaryContains (coords, game.pov.parent.name)) {\n      game.pov.grid_coordinates = coords\n    }\n  }\n}\nJS.Grid_ClearAllLayers ()\nGrid_Redraw\nGrid_DrawPlayerInRoom (game.pov.parent)\n</code></pre>\n<p>It basically restores the map to a backup of the state it was in the last time this room was part of the map data saved when teleporting; or clears it if that doesn't help.</p>\n<hr style=\"border-top: 1px dashed blue\">\n<p><strong>Other thoughts:</strong> Saving the map between teleporting might be a good idea, but it may also be adding unnecessary complexity. For many games, it would be simpler just to manually set coordinates. For example, you could put something like this in your start script instead of clearing the map every time you teleport:</p>\n<pre><code>zonex = 0\nzoney = 0\ncoords = NewDictionary()\n\n// list of rooms that you can teleport to\nzones = Split(\"starting room;wizard's tower;banana plantation;dungeons;planet araraaargh\")\nzonesize = sqrt(ListCount(zones) + 1)/2\nfor (zonex, -zonesize, zonesize) {\n  for (zoney, -zonesize, zonesize) {\n    if (ListCount (zones) &gt; 0) {\n      zone = ListItem (zones, 0)\n      list remove (zones, zone)\n      dictionary add (coords, zone, QuickParams (\"x\", zonex * 250.0, \"y\", zoney * 250.0, \"z\", 0.0))\n    }\n  }\n}\nplayer.grid_coordinates = coords\n</code></pre>\n<p>(using a list of the room names for the places you can teleport to)<br>\nThis basically puts the separate locations the player can teleport to in a grid on the map, 250 standard-room-widths apart. Most games never get anywhere close to this size with an exploreable map; so it means there's no need to save and reload different parts of the map: the other areas are on the same map, they're just so far away that the player never sees them.</p>\n<p>If you only have one teleport destination in each area (which seems to be a prerequisite for the TeleportTo function), you could do this instead; and teleporting is as simple as moving the player to a new area.</p>\n\n",
      "PostDate": "2024-01-01T10:55:49.3603512Z",
      "LastEditDate": "2024-01-07T12:23:40.3823307Z",
      "link": null
    },
    {
      "PostId": "4359d9d1-4dac-4ccb-aa04-29eab1466685",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello mrangel! Thank you for your help! I tried the first options to redraw the map and unfortunately none of them seem to work. They do redraw it but after attempting to move it just stays frozen, but that last option you presented very much intrigues me and I think might be a better solution. My apologies though, where exactly do I put that script? And, to make sure, this is exactly what it would look like correct? Each of the places listed in the zones would be the separate starting room for each building or area the player would otherwise TeleportTo, right? \r\n\r\n```\r\nzonex = 0\r\nzoney = 0\r\ncoords = NewDictionary()\r\n\r\n// list of rooms that you can teleport to\r\nzones = Split(\"Intro;Your room;Treehollow_Cir;University_Gates;Math_Entrance;Science_Entrance;Art_Entrance;English_And_Social_Entrance;Administrative_Building_Entrance;Gym_Entrance;Dorms_Entrance;OGGraveyard1;SecondGraveyard1\")\r\nzonesize = sqrt(ListCount(zones) + 1)/2\r\nfor (zonex, -zonesize, zonesize) {\r\n  for (zoney, -zonesize, zonesize) {\r\n    if (ListCount (zones) > 0) {\r\n      zone = ListItem (zones, 0)\r\n      list remove (zones, zone)\r\n      dictionary add (coords, zone, QuickParams (zonex * 250.0, zoney * 250.0, 0.0))\r\n    }\r\n  }\r\n}\r\nplayer.grid_coordinates = coords\r\n```\r\n\r\n**Edit:** So I found the Start Script tab under Game, sorry about that. However, it doesn't quite seem to have the desired effect. The areas seem to be layered almost right on top of each other. For example Intro and Your Room are only a few squares away from each other on the map and are completely visible from each other, same with the University_Gates, completely visible. Did I do something wrong? ",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello mrangel! Thank you for your help! I tried the first options to redraw the map and unfortunately none of them seem to work. They do redraw it but after attempting to move it just stays frozen, but that last option you presented very much intrigues me and I think might be a better solution. My apologies though, where exactly do I put that script? And, to make sure, this is exactly what it would look like correct? Each of the places listed in the zones would be the separate starting room for each building or area the player would otherwise TeleportTo, right?</p>\n<pre><code>zonex = 0\nzoney = 0\ncoords = NewDictionary()\n\n// list of rooms that you can teleport to\nzones = Split(\"Intro;Your room;Treehollow_Cir;University_Gates;Math_Entrance;Science_Entrance;Art_Entrance;English_And_Social_Entrance;Administrative_Building_Entrance;Gym_Entrance;Dorms_Entrance;OGGraveyard1;SecondGraveyard1\")\nzonesize = sqrt(ListCount(zones) + 1)/2\nfor (zonex, -zonesize, zonesize) {\n  for (zoney, -zonesize, zonesize) {\n    if (ListCount (zones) &gt; 0) {\n      zone = ListItem (zones, 0)\n      list remove (zones, zone)\n      dictionary add (coords, zone, QuickParams (zonex * 250.0, zoney * 250.0, 0.0))\n    }\n  }\n}\nplayer.grid_coordinates = coords\n</code></pre>\n<p><strong>Edit:</strong> So I found the Start Script tab under Game, sorry about that. However, it doesn't quite seem to have the desired effect. The areas seem to be layered almost right on top of each other. For example Intro and Your Room are only a few squares away from each other on the map and are completely visible from each other, same with the University_Gates, completely visible. Did I do something wrong?</p>\n\n",
      "PostDate": "2024-01-06T23:51:17.1096005Z",
      "LastEditDate": "2024-01-07T00:14:44.909783Z",
      "link": null
    },
    {
      "PostId": "0d17cce9-2178-4362-982c-881061d4f8f1",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ooops, sorry. My bad. I missed out the keys.\r\n\r\nShould work better:\r\n<pre><code>zonex = 0\r\nzoney = 0\r\ncoords = NewDictionary()\r\n\r\n// list of rooms that you can teleport to\r\nzones = Split(\"Intro;Your room;Treehollow_Cir;University_Gates;Math_Entrance;Science_Entrance;Art_Entrance;English_And_Social_Entrance;Administrative_Building_Entrance;Gym_Entrance;Dorms_Entrance;OGGraveyard1;SecondGraveyard1\")\r\nzonesize = 1\r\nwhile (ListCount(zones) > (2*zonesize+1)^2) zonesize = zonesize + 1\r\nfor (zonex, -zonesize, zonesize) {\r\n  for (zoney, -zonesize, zonesize) {\r\n    if (ListCount (zones) > 0) {\r\n      zone = ListItem (zones, 0)\r\n      list remove (zones, zone)\r\n      dictionary add (coords, zone, QuickParams (<b style=\"color: blue\">\"x\", </b>zonex * 250.0, <b style=\"color: blue\">\"y\", </b>zoney * 250.0, <b style=\"color: blue\">\"z\", </b>0.0))\r\n    }\r\n  }\r\n}\r\nplayer.grid_coordinates = coords</code></pre>",
      "EditableFormat": "markdown",
      "HTML": "<p>Ooops, sorry. My bad. I missed out the keys.</p>\n<p>Should work better:</p>\n<pre><code>zonex = 0\nzoney = 0\ncoords = NewDictionary()\n\n// list of rooms that you can teleport to\nzones = Split(\"Intro;Your room;Treehollow_Cir;University_Gates;Math_Entrance;Science_Entrance;Art_Entrance;English_And_Social_Entrance;Administrative_Building_Entrance;Gym_Entrance;Dorms_Entrance;OGGraveyard1;SecondGraveyard1\")\nzonesize = 1\nwhile (ListCount(zones) &gt; (2*zonesize+1)^2) zonesize = zonesize + 1\nfor (zonex, -zonesize, zonesize) {\n  for (zoney, -zonesize, zonesize) {\n    if (ListCount (zones) &gt; 0) {\n      zone = ListItem (zones, 0)\n      list remove (zones, zone)\n      dictionary add (coords, zone, QuickParams (<b style=\"color: blue\">\"x\", </b>zonex * 250.0, <b style=\"color: blue\">\"y\", </b>zoney * 250.0, <b style=\"color: blue\">\"z\", </b>0.0))\n    }\n  }\n}\nplayer.grid_coordinates = coords</code></pre>\n\n",
      "PostDate": "2024-01-07T12:19:28.6203984Z",
      "LastEditDate": "2024-01-16T20:30:31.0907952Z",
      "link": null
    },
    {
      "PostId": "d5a6de2b-1ac8-419c-89cc-bbaaf20f7dd9",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "No problem! It still doesn't seem to be working though :( I copied it in exactly from your post and the areas are still showing up directly next to each other. It also gives me six instances of the error \"Error running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.\"  Strangely enough too, I find that the map is drawing the University Gates area specifically over the Intro area. I cannot figure out why. To explain the first part of the map: The intro goes In to \"Your room\", which goes Down to the rest of the house, after exploring the house, the front door goes North to Treehollow_Cir. After exploring the neighborhood one of the streets goes North to University Gates, so University Gates should be on the layer below Your Room. So weirdly the map is drawing both the Intro and the University Gates on the same upper layer as the Your Room and in the same square. I'm really at a loss.\r\n\r\nClarifying question though. When moving the player to one of those key locations, what script would I be using? So from the exit that would lead to University Gates, would I still be using the TeleportTo script or would I be just using the MoveObject script? I switched to just moving the player, is that why it wasn't working? I tried moving between one area that still had the TeleportTo still in place on the map and it still caused the map to freeze. Also, is there anything in particular I need to do with the Exits? Do I need to make sure the exits of the areas don't connect to anything? As it stands right now , the street and University Gates don't connect to each other but they do connect to the same dummy room to get the TeleportTo to work with the exit. Could that be causing it? ",
      "EditableFormat": "markdown",
      "HTML": "<p>No problem! It still doesn't seem to be working though :( I copied it in exactly from your post and the areas are still showing up directly next to each other. It also gives me six instances of the error \"Error running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.\"  Strangely enough too, I find that the map is drawing the University Gates area specifically over the Intro area. I cannot figure out why. To explain the first part of the map: The intro goes In to \"Your room\", which goes Down to the rest of the house, after exploring the house, the front door goes North to Treehollow_Cir. After exploring the neighborhood one of the streets goes North to University Gates, so University Gates should be on the layer below Your Room. So weirdly the map is drawing both the Intro and the University Gates on the same upper layer as the Your Room and in the same square. I'm really at a loss.</p>\n<p>Clarifying question though. When moving the player to one of those key locations, what script would I be using? So from the exit that would lead to University Gates, would I still be using the TeleportTo script or would I be just using the MoveObject script? I switched to just moving the player, is that why it wasn't working? I tried moving between one area that still had the TeleportTo still in place on the map and it still caused the map to freeze. Also, is there anything in particular I need to do with the Exits? Do I need to make sure the exits of the areas don't connect to anything? As it stands right now , the street and University Gates don't connect to each other but they do connect to the same dummy room to get the TeleportTo to work with the exit. Could that be causing it?</p>\n\n",
      "PostDate": "2024-01-09T02:11:17.2113696Z",
      "LastEditDate": "2024-01-09T02:12:38.1840478Z",
      "link": null
    },
    {
      "PostId": "803003a9-f6a5-4d1c-a59b-a67187c60177",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Clarifying question though. When moving the player to one of those key locations, what script would I be using? So from the exit that would lead to University Gates, would I still be using the TeleportTo script or would I be just using the MoveObject script?\r\n\r\nYou would just use MoveObject\r\n\r\n> Also, is there anything in particular I need to do with the Exits?\r\n\r\nLike the original teleport script, this one should work so long as the player never enters a room which contains an exit leading to a different zone (because entering a room causes its exits and the rooms they lead to to be placed on the map).\r\n\r\nI'll see if I can figure out what the problem is. I'll have to make a test game to try it out, so I'll probably wait until I've got a stable net connection. Sorry I'm not being too useful right now.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Clarifying question though. When moving the player to one of those key locations, what script would I be using? So from the exit that would lead to University Gates, would I still be using the TeleportTo script or would I be just using the MoveObject script?</p>\n</blockquote>\n<p>You would just use MoveObject</p>\n<blockquote>\n<p>Also, is there anything in particular I need to do with the Exits?</p>\n</blockquote>\n<p>Like the original teleport script, this one should work so long as the player never enters a room which contains an exit leading to a different zone (because entering a room causes its exits and the rooms they lead to to be placed on the map).</p>\n<p>I'll see if I can figure out what the problem is. I'll have to make a test game to try it out, so I'll probably wait until I've got a stable net connection. Sorry I'm not being too useful right now.</p>\n\n",
      "PostDate": "2024-01-12T12:12:54.5832343Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4e817e83-5219-4ebf-a1e8-17e71f563631",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It's no problem at all, you are a massive help! It might have to do with the way the exits are set up on my end. I will try to fiddle with those exits and see if that could be part of the issue. ",
      "EditableFormat": "markdown",
      "HTML": "<p>It's no problem at all, you are a massive help! It might have to do with the way the exits are set up on my end. I will try to fiddle with those exits and see if that could be part of the issue.</p>\n\n",
      "PostDate": "2024-01-16T04:20:28.4746909Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "40b6d521-5d11-499f-919e-34eddf963dc8",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay… I tried making a test game to try it on, and got errors right away. In this case,a  type error - you can't pass a double to `for`.\r\n\r\nI tried using the rounding functions, which according to the documentation take a double and return an int… but they seem to actually return doubles. So instead I changed\r\n`zonesize = sqrt(ListCount(zones) + 1)/2`\r\nto\r\n```\r\nzonesize = 1\r\nwhile (ListCount(zones) > (2*zonesize+1)^2) zonesize = zonesize + 1\r\n```\r\n\r\n(really you could just set it randomly; but I wanted to reduce manual stuff when you add more rooms).\r\n\r\nIn any case… it seems to work now. Except that it doesn't draw the room you just teleported into, which I can't figure out… I ended up modifying my teleport command to do it manually, which is weird, because I'm just calling the same functions that are called by `OnEnterRoom`.",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay… I tried making a test game to try it on, and got errors right away. In this case,a  type error - you can't pass a double to <code>for</code>.</p>\n<p>I tried using the rounding functions, which according to the documentation take a double and return an int… but they seem to actually return doubles. So instead I changed<br>\n<code>zonesize = sqrt(ListCount(zones) + 1)/2</code><br>\nto</p>\n<pre><code>zonesize = 1\nwhile (ListCount(zones) &gt; (2*zonesize+1)^2) zonesize = zonesize + 1\n</code></pre>\n<p>(really you could just set it randomly; but I wanted to reduce manual stuff when you add more rooms).</p>\n<p>In any case… it seems to work now. Except that it doesn't draw the room you just teleported into, which I can't figure out… I ended up modifying my teleport command to do it manually, which is weird, because I'm just calling the same functions that are called by <code>OnEnterRoom</code>.</p>\n\n",
      "PostDate": "2024-01-16T17:45:04.1089263Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f4698d66-776e-4412-b679-f10c50c2e810",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hmm okay so all I would need to do then to get it to work is set the teleport command to draw the room you're moved into? How would I do that? And where is the zonesize = sqrt(ListCount(zones) + 1)/2 to replace? I don't see that in the code you gave me, the more recent one already appears to have the other one set in it? ",
      "EditableFormat": "markdown",
      "HTML": "<p>Hmm okay so all I would need to do then to get it to work is set the teleport command to draw the room you're moved into? How would I do that? And where is the zonesize = sqrt(ListCount(zones) + 1)/2 to replace? I don't see that in the code you gave me, the more recent one already appears to have the other one set in it?</p>\n\n",
      "PostDate": "2024-01-22T03:55:28.8818466Z",
      "LastEditDate": "2024-01-22T04:03:21.4943307Z",
      "link": null
    },
    {
      "PostId": "20608eed-743e-46c4-b7fa-3bbf1693acdb",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Also slight update! So I actually figured out part of why the Reset The Map function wasn't working, I was misunderstanding part of the code, but it doesn't work entirely and I think I can better explain what's happening. \r\n\r\nSo before I was using \r\n\r\n```\r\nplayer.parent = room\r\nJS.Grid_ClearAllLayers ()\r\nGrid_Redraw\r\nGrid_DrawPlayerInRoom (game.pov.parent)\r\n```\r\nBecause I didn't understand that \"room\" was actually supposed to be the name of a room not just the word, my bad, but that doesn't work to reset the room anywhere like I need. I tried removing just that line so I had \r\n\r\n\r\n```\r\nJS.Grid_ClearAllLayers ()\r\nGrid_Redraw\r\nGrid_DrawPlayerInRoom (game.pov.parent)\r\n```\r\nand it confirmed something of what I was suspecting about the error. It does reset the map correctly, but whatever is causing the error in the TeleportTo script is de-linking the player with the yellow dot, so when I hit one of the directions to move, like North, it draws the North room on the map and the player is technically moved, the correct text displays etc, however the dot on the map and the map itself does not change position, it stays as if the player had not moved, so it's drawing the map around the room instead, the player's location on the map is just frozen but it's still drawing as they move. And that's what it was doing before the reset, it's de-linking the view with the dot and drawing around it, I just couldn't see it as well. So I just need to figure out how to re-link the player on the map with the actual player's movements and that should be enough to fix it, or at least fix it after resetting it. Does that maybe help at all?  \r\n\r\nEdit: There's a line missing and the forum won't let me post it for some reason. It just says \"Sorry you can't post that here\" I'm going to try to break it up if I can \"player. grid _coordinates  = null\" This would be the first line in the two above. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Also slight update! So I actually figured out part of why the Reset The Map function wasn't working, I was misunderstanding part of the code, but it doesn't work entirely and I think I can better explain what's happening.</p>\n<p>So before I was using</p>\n<pre><code>player.parent = room\nJS.Grid_ClearAllLayers ()\nGrid_Redraw\nGrid_DrawPlayerInRoom (game.pov.parent)\n</code></pre>\n<p>Because I didn't understand that \"room\" was actually supposed to be the name of a room not just the word, my bad, but that doesn't work to reset the room anywhere like I need. I tried removing just that line so I had</p>\n<pre><code>JS.Grid_ClearAllLayers ()\nGrid_Redraw\nGrid_DrawPlayerInRoom (game.pov.parent)\n</code></pre>\n<p>and it confirmed something of what I was suspecting about the error. It does reset the map correctly, but whatever is causing the error in the TeleportTo script is de-linking the player with the yellow dot, so when I hit one of the directions to move, like North, it draws the North room on the map and the player is technically moved, the correct text displays etc, however the dot on the map and the map itself does not change position, it stays as if the player had not moved, so it's drawing the map around the room instead, the player's location on the map is just frozen but it's still drawing as they move. And that's what it was doing before the reset, it's de-linking the view with the dot and drawing around it, I just couldn't see it as well. So I just need to figure out how to re-link the player on the map with the actual player's movements and that should be enough to fix it, or at least fix it after resetting it. Does that maybe help at all?</p>\n<p>Edit: There's a line missing and the forum won't let me post it for some reason. It just says \"Sorry you can't post that here\" I'm going to try to break it up if I can \"player. grid _coordinates  = null\" This would be the first line in the two above.</p>\n\n",
      "PostDate": "2024-01-22T04:31:26.6733846Z",
      "LastEditDate": "2024-01-22T04:36:08.6162253Z",
      "link": null
    },
    {
      "PostId": "95bf677f-16f9-42c6-8af0-2de322699c41",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry to bump this again but I'm still really struggling with this issue :( If I knew the function to force the map to draw the new area when the player is moved into it when using mrangel's script above I could try it out a bit further but I'm stuck on that at the moment before I can test it further. Ultimately if there was a way to re-link the player with the map that would fix everything though. Would anyone have any advice on how I can proceed? ",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry to bump this again but I'm still really struggling with this issue :( If I knew the function to force the map to draw the new area when the player is moved into it when using mrangel's script above I could try it out a bit further but I'm stuck on that at the moment before I can test it further. Ultimately if there was a way to re-link the player with the map that would fix everything though. Would anyone have any advice on how I can proceed?</p>\n\n",
      "PostDate": "2024-02-05T06:54:39.6064276Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dd1f2b9d-3808-4085-8911-d9d639a94a79",
      "UserId": 31991,
      "Username": "daeun",
      "AvatarUrl": "https://i.imgur.com/a59YNl7b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "What is TeleportTo function?\r\nIs it from a link, or did you write out a code?\r\nShow us the link or your code.\r\n\r\nWhy don't you just use \r\n```\r\nMoveObject (player, room3)\r\n```\r\nWhat are the benefits of your TeleportTo function over MoveObject?",
      "EditableFormat": "markdown",
      "HTML": "<p>What is TeleportTo function?<br>\nIs it from a link, or did you write out a code?<br>\nShow us the link or your code.</p>\n<p>Why don't you just use</p>\n<pre><code>MoveObject (player, room3)\n</code></pre>\n<p>What are the benefits of your TeleportTo function over MoveObject?</p>\n\n",
      "PostDate": "2024-02-05T08:17:40.928674Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b5dc4673-a61d-4e59-85a7-81a7fa4f7178",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> What are the benefits of your TeleportTo function over MoveObject?\r\n\r\nIf the map is turned on, moving the player to a room which isn't connected to their current location by exits will cause odd errors, because Quest doesn't know where to put it on the map. The `TeleportTo` function in the documentation is an example of how to get around this problem, although it isn't perfect.\r\n\r\nThis is in a big list of projects that I need to get around to (just above fixing operator precedence for QuestScript 5.7.7's expression parser). But I've not had as much time to work on stuff lately, and it gets hard to focus with little kids running around the house screaming, so the only coding time I get is usually answering questions from my phone – not idea for larger, more complex bits of code.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>What are the benefits of your TeleportTo function over MoveObject?</p>\n</blockquote>\n<p>If the map is turned on, moving the player to a room which isn't connected to their current location by exits will cause odd errors, because Quest doesn't know where to put it on the map. The <code>TeleportTo</code> function in the documentation is an example of how to get around this problem, although it isn't perfect.</p>\n<p>This is in a big list of projects that I need to get around to (just above fixing operator precedence for QuestScript 5.7.7's expression parser). But I've not had as much time to work on stuff lately, and it gets hard to focus with little kids running around the house screaming, so the only coding time I get is usually answering questions from my phone – not idea for larger, more complex bits of code.</p>\n\n",
      "PostDate": "2024-02-05T12:56:17.8918275Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9931fda1-bf7c-41f0-bba9-afa1755fd157",
      "UserId": 31991,
      "Username": "daeun",
      "AvatarUrl": "https://i.imgur.com/a59YNl7b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay, so \r\n> If the map is turned on, moving the player to a room which isn't connected to their current location by exits will cause odd errors.\r\n\r\nWhat I would be recommending would be something like this:\r\n```\r\nMoveObject (player, room1)\r\nMoveObject (player, room2)\r\nMoveObject (player, room3)\r\n```\r\nLiterally spam the moveobject all the way from the player's position to the next room to thee next room until you reach that target teleport location.\r\nI know this is terrible coding but since I cant find the TeleportTo function code and that you say the code is not pefect, this is my low-efficient workaround.\r\n\r\nAlso, make sure your rooms have exits to each other.",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay, so</p>\n<blockquote>\n<p>If the map is turned on, moving the player to a room which isn't connected to their current location by exits will cause odd errors.</p>\n</blockquote>\n<p>What I would be recommending would be something like this:</p>\n<pre><code>MoveObject (player, room1)\nMoveObject (player, room2)\nMoveObject (player, room3)\n</code></pre>\n<p>Literally spam the moveobject all the way from the player's position to the next room to thee next room until you reach that target teleport location.<br>\nI know this is terrible coding but since I cant find the TeleportTo function code and that you say the code is not pefect, this is my low-efficient workaround.</p>\n<p>Also, make sure your rooms have exits to each other.</p>\n\n",
      "PostDate": "2024-02-05T14:09:54.9918507Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5ee3e1c3-71eb-483e-8dc8-c9bec49c570d",
      "UserId": 31991,
      "Username": "daeun",
      "AvatarUrl": "https://i.imgur.com/a59YNl7b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Found the teleport code https://docs.textadventures.co.uk/quest/showing_a_map.html\r\nApparently the forum search and the documentation search gives different results, so finding teleport code at forum and google leads to nothing.",
      "EditableFormat": "markdown",
      "HTML": "<p>Found the teleport code https://docs.textadventures.co.uk/quest/showing_a_map.html<br>\nApparently the forum search and the documentation search gives different results, so finding teleport code at forum and google leads to nothing.</p>\n\n",
      "PostDate": "2024-02-05T15:42:19.0890698Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e50cdd78-3762-4dfe-808b-f4ab2b159c40",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yep,  that is the TeleportTo function that I am using that is causing the map to break, that is correct, daeun. The TeleportTo function is, as mrangel said, to reach areas that are not connected by exits. But unfortunately it recently causing the error where the player and map are coming unlinked with each other as I described above.\r\n\r\nMrangel, you mentioned that you modified your move object command to draw the room manually upon moving the player there using your new map script, how did you do that? It's of course not the end of the world if it doesn't but it is a lot better looking and more professional looking if it draws the room they're in when they're moved in rather than making them move in and out so I'd really like to do that as well so I can test out further. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Yep,  that is the TeleportTo function that I am using that is causing the map to break, that is correct, daeun. The TeleportTo function is, as mrangel said, to reach areas that are not connected by exits. But unfortunately it recently causing the error where the player and map are coming unlinked with each other as I described above.</p>\n<p>Mrangel, you mentioned that you modified your move object command to draw the room manually upon moving the player there using your new map script, how did you do that? It's of course not the end of the world if it doesn't but it is a lot better looking and more professional looking if it draws the room they're in when they're moved in rather than making them move in and out so I'd really like to do that as well so I can test out further.</p>\n\n",
      "PostDate": "2024-02-06T00:10:02.917239Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a08ced67-af1c-4715-96bc-dede5c6caef0",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The teleport command I was using for my test was simply:\r\n```\r\ngame.pov.parent = object\r\nGrid_CalculateMapCoordinates (object, game.pov)\r\nGrid_DrawPlayerInRoom (object)\r\n```\r\n(obviously, if you were using a teleport function instead of a command, you'd probably give the parameter a more sensible name than `object`)\r\n\r\n(First line moves the player; second calculates the coordinates of all the rooms adjacent to the one they're teleporting to, so that the exits can be drawn correctly; third actually draws it and moves the player dot on the map)\r\n\r\nThis shouldn't be necessary… Grid_CalculateMapCoordinates and Grid_DrawPlayerInRoom should both be called by `changedparent` and `OnEnterRoom`. I've gone through the code in my head several times, and I'm sure it should draw the room automatically, but it doesn't seem to do it.",
      "EditableFormat": "markdown",
      "HTML": "<p>The teleport command I was using for my test was simply:</p>\n<pre><code>game.pov.parent = object\nGrid_CalculateMapCoordinates (object, game.pov)\nGrid_DrawPlayerInRoom (object)\n</code></pre>\n<p>(obviously, if you were using a teleport function instead of a command, you'd probably give the parameter a more sensible name than <code>object</code>)</p>\n<p>(First line moves the player; second calculates the coordinates of all the rooms adjacent to the one they're teleporting to, so that the exits can be drawn correctly; third actually draws it and moves the player dot on the map)</p>\n<p>This shouldn't be necessary… Grid_CalculateMapCoordinates and Grid_DrawPlayerInRoom should both be called by <code>changedparent</code> and <code>OnEnterRoom</code>. I've gone through the code in my head several times, and I'm sure it should draw the room automatically, but it doesn't seem to do it.</p>\n\n",
      "PostDate": "2024-02-07T13:46:17.836337Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "2b3b2e08-723a-4ea4-aa97-1f8172ee0a0e",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi mrangel, sorry for the long delay in getting back to you, things have been chaotic. I've been working attempting things with the script and things are working a little bit better. I'm having a few issues with the initial move though for some reason. So when I use \r\n```\r\nMoveObject (player, Treehollow_Cir)\r\ngame.pov.parent = object\r\nGrid_CalculateMapCoordinates (object, game.pov)\r\nGrid_DrawPlayerInRoom (object)\r\n```\r\nThe game gives me an error saying \"Error running script: Error compiling expression 'object': Unknown object or variable 'object'\" and doesn't draw the map properly. I've noticed this error happens any time I've tried to use a script that uses \"game.pov.parent = object\" as  a part of it. Oddly enough sometimes the consecutive movements, seem to be okay and it draws the area correctly after that as long as I just use the MoveObject line and not the following three so I have no idea why. Am I doing something wrong? I feel like it's so close to being fixed there's just something I'm missing. I still need to go through and finish adjusting the exits for every single other area but the first few are promising I just don't know why some work and some don't. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi mrangel, sorry for the long delay in getting back to you, things have been chaotic. I've been working attempting things with the script and things are working a little bit better. I'm having a few issues with the initial move though for some reason. So when I use</p>\n<pre><code>MoveObject (player, Treehollow_Cir)\ngame.pov.parent = object\nGrid_CalculateMapCoordinates (object, game.pov)\nGrid_DrawPlayerInRoom (object)\n</code></pre>\n<p>The game gives me an error saying \"Error running script: Error compiling expression 'object': Unknown object or variable 'object'\" and doesn't draw the map properly. I've noticed this error happens any time I've tried to use a script that uses \"game.pov.parent = object\" as  a part of it. Oddly enough sometimes the consecutive movements, seem to be okay and it draws the area correctly after that as long as I just use the MoveObject line and not the following three so I have no idea why. Am I doing something wrong? I feel like it's so close to being fixed there's just something I'm missing. I still need to go through and finish adjusting the exits for every single other area but the first few are promising I just don't know why some work and some don't.</p>\n\n",
      "PostDate": "2024-02-16T04:44:22.4189532Z",
      "LastEditDate": "2024-02-16T05:16:22.3643448Z",
      "link": null
    },
    {
      "PostId": "e36391de-d393-488b-aace-adc219f1a817",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That's because I was testing it with a teleport command, which introduces the variable `object`.\r\nFor your example, I assume it would be:\r\n```\r\ngame.pov.parent = Treehollow_Cir\r\nGrid_CalculateMapCoordinates (Treehollow_Cir, game.pov)\r\nGrid_DrawPlayerInRoom (Treehollow_Cir)\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>That's because I was testing it with a teleport command, which introduces the variable <code>object</code>.<br>\nFor your example, I assume it would be:</p>\n<pre><code>game.pov.parent = Treehollow_Cir\nGrid_CalculateMapCoordinates (Treehollow_Cir, game.pov)\nGrid_DrawPlayerInRoom (Treehollow_Cir)\n</code></pre>\n\n",
      "PostDate": "2024-02-16T08:31:05.6877488Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9f441bbd-8689-4fac-a5d5-123accb27283",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh I see! I'm sorry, my lack of understanding with this sort of thing is showing! I tried that so \r\n```\r\nMoveObject (player, Treehollow_Cir)\r\ngame.pov.parent = Treehollow_Cir\r\nGrid_CalculateMapCoordinates (Treehollow_Cir, game.pov)\r\nGrid_DrawPlayerInRoom (Treehollow_Cir)\r\n```\r\nand it still didn't draw the new area upon moving the player there.  \r\n\r\nAlso just out of curiosity to test I went ahead with this version with your game start script in place separating the areas on the same map I attempted to use the TeleportTo function and it still broke the map. I also have tried using the TeleportTo script and the last part you gave me so\r\n```\r\nTeleportTo (Treehollow_Cir)\r\ngame.pov.parent = Treehollow_Cir\r\nGrid_CalculateMapCoordinates (Treehollow_Cir, game.pov)\r\nGrid_DrawPlayerInRoom (Treehollow_Cir)\r\n```\r\njust to see if that might help but it still didn't. \r\n\r\nI just want to make sure. I've got the TeleportTo script as copied out of that article, I even copied it fresh just to make sure I hadn't accidentally bumped a key or something and there were 0 changes, but do you see any errors in it? \r\n```\r\nfrom = player.parent\r\nset (player, \"saved_map_for_\" + from.name, player.grid_coordinates)\r\nif (HasAttribute(player, \"saved_map_for_\" + to.name)) {\r\n  player.grid_coordinates = GetAttribute(player, \"saved_map_for_\" + to.name)\r\n}\r\nelse {\r\n  player.grid_coordinates = null\r\n}\r\nplayer.parent = to\r\nJS.Grid_ClearAllLayers ()\r\nGrid_Redraw\r\nGrid_DrawPlayerInRoom (game.pov.parent)\r\n```\r\nI feel just so defeated, every time I think it's working for a minute it turns out to just be a momentary reprieve before it breaks again. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh I see! I'm sorry, my lack of understanding with this sort of thing is showing! I tried that so</p>\n<pre><code>MoveObject (player, Treehollow_Cir)\ngame.pov.parent = Treehollow_Cir\nGrid_CalculateMapCoordinates (Treehollow_Cir, game.pov)\nGrid_DrawPlayerInRoom (Treehollow_Cir)\n</code></pre>\n<p>and it still didn't draw the new area upon moving the player there.</p>\n<p>Also just out of curiosity to test I went ahead with this version with your game start script in place separating the areas on the same map I attempted to use the TeleportTo function and it still broke the map. I also have tried using the TeleportTo script and the last part you gave me so</p>\n<pre><code>TeleportTo (Treehollow_Cir)\ngame.pov.parent = Treehollow_Cir\nGrid_CalculateMapCoordinates (Treehollow_Cir, game.pov)\nGrid_DrawPlayerInRoom (Treehollow_Cir)\n</code></pre>\n<p>just to see if that might help but it still didn't.</p>\n<p>I just want to make sure. I've got the TeleportTo script as copied out of that article, I even copied it fresh just to make sure I hadn't accidentally bumped a key or something and there were 0 changes, but do you see any errors in it?</p>\n<pre><code>from = player.parent\nset (player, \"saved_map_for_\" + from.name, player.grid_coordinates)\nif (HasAttribute(player, \"saved_map_for_\" + to.name)) {\n  player.grid_coordinates = GetAttribute(player, \"saved_map_for_\" + to.name)\n}\nelse {\n  player.grid_coordinates = null\n}\nplayer.parent = to\nJS.Grid_ClearAllLayers ()\nGrid_Redraw\nGrid_DrawPlayerInRoom (game.pov.parent)\n</code></pre>\n<p>I feel just so defeated, every time I think it's working for a minute it turns out to just be a momentary reprieve before it breaks again.</p>\n\n",
      "PostDate": "2024-02-17T01:44:13.0747114Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f563cc7f-100a-485c-aa52-a2a748902db9",
      "UserId": 31991,
      "Username": "daeun",
      "AvatarUrl": "https://i.imgur.com/Xvt8zzBb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry if I am bothering you with the following code, I am just trying to help and english is not my main language.\r\nThis tp function tps you to target location, and clears all map, is it what you are trying to do?\r\n\r\n```\r\n<!--Saved by Quest 5.8.6836.13983-->\r\n<asl version=\"580\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"test\">\r\n    <gameid>57336ed3-787b-4dca-a8c8-d6811b9fd1f8</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2024</firstpublished>\r\n    <gridmap />\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <isroom />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <exit alias=\"east\" to=\"room1\">\r\n      <inherit name=\"eastdirection\" />\r\n    </exit>\r\n    <object name=\"tp\">\r\n      <inherit name=\"editor_object\" />\r\n      <tp type=\"script\">\r\n        TeleportTo (room4)\r\n      </tp>\r\n    </object>\r\n  </object>\r\n  <object name=\"room1\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"west\" to=\"room\">\r\n      <inherit name=\"westdirection\" />\r\n    </exit>\r\n    <exit alias=\"north\" to=\"room2\">\r\n      <inherit name=\"northdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"room2\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"south\" to=\"room1\">\r\n      <inherit name=\"southdirection\" />\r\n    </exit>\r\n    <exit alias=\"east\" to=\"room3\">\r\n      <inherit name=\"eastdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"room3\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"west\" to=\"room2\">\r\n      <inherit name=\"westdirection\" />\r\n    </exit>\r\n    <exit alias=\"northwest\" to=\"room4\">\r\n      <inherit name=\"northwestdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"room4\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"southeast\" to=\"room3\">\r\n      <inherit name=\"southeastdirection\" />\r\n    </exit>\r\n  </object>\r\n  <verb>\r\n    <property>tp</property>\r\n    <pattern>tp</pattern>\r\n    <defaultexpression>\"You can't tp \" + object.article + \".\"</defaultexpression>\r\n  </verb>\r\n  <function name=\"TeleportTo\" parameters=\"to\">\r\n    from = player.parent\r\n    set (player, \"saved_map_for_\" + from.name, player.grid_coordinates)\r\n    if (HasAttribute(player, \"saved_map_for_\" + to.name)) {\r\n      player.grid_coordinates = GetAttribute(player, \"saved_map_for_\" + to.name)\r\n    }\r\n    else {\r\n      player.grid_coordinates = null\r\n    }\r\n    player.parent = to\r\n    JS.Grid_ClearAllLayers ()\r\n    Grid_Redraw\r\n    Grid_DrawPlayerInRoom (game.pov.parent)\r\n  </function>\r\n</asl>\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry if I am bothering you with the following code, I am just trying to help and english is not my main language.<br>\nThis tp function tps you to target location, and clears all map, is it what you are trying to do?</p>\n<pre><code>&lt;!--Saved by Quest 5.8.6836.13983--&gt;\n&lt;asl version=\"580\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"test\"&gt;\n    &lt;gameid&gt;57336ed3-787b-4dca-a8c8-d6811b9fd1f8&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2024&lt;/firstpublished&gt;\n    &lt;gridmap /&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;isroom /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"east\" to=\"room1\"&gt;\n      &lt;inherit name=\"eastdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;object name=\"tp\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;tp type=\"script\"&gt;\n        TeleportTo (room4)\n      &lt;/tp&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room1\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"west\" to=\"room\"&gt;\n      &lt;inherit name=\"westdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"north\" to=\"room2\"&gt;\n      &lt;inherit name=\"northdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room2\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"south\" to=\"room1\"&gt;\n      &lt;inherit name=\"southdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"east\" to=\"room3\"&gt;\n      &lt;inherit name=\"eastdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room3\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"west\" to=\"room2\"&gt;\n      &lt;inherit name=\"westdirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"northwest\" to=\"room4\"&gt;\n      &lt;inherit name=\"northwestdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room4\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"southeast\" to=\"room3\"&gt;\n      &lt;inherit name=\"southeastdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;verb&gt;\n    &lt;property&gt;tp&lt;/property&gt;\n    &lt;pattern&gt;tp&lt;/pattern&gt;\n    &lt;defaultexpression&gt;\"You can't tp \" + object.article + \".\"&lt;/defaultexpression&gt;\n  &lt;/verb&gt;\n  &lt;function name=\"TeleportTo\" parameters=\"to\"&gt;\n    from = player.parent\n    set (player, \"saved_map_for_\" + from.name, player.grid_coordinates)\n    if (HasAttribute(player, \"saved_map_for_\" + to.name)) {\n      player.grid_coordinates = GetAttribute(player, \"saved_map_for_\" + to.name)\n    }\n    else {\n      player.grid_coordinates = null\n    }\n    player.parent = to\n    JS.Grid_ClearAllLayers ()\n    Grid_Redraw\n    Grid_DrawPlayerInRoom (game.pov.parent)\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2024-02-17T03:07:11.7555252Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7e03d0fe-3430-432e-bbda-7c94a822cbd5",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So, a bit more unfortunate news, mrangel. I think I figured out a solution and in the end... I think Quest just can't take it. What I did to get around the rooms not loading was I created false rooms that are the same dimensions on top of the intended entrance rooms. So a Treehollow_Cir2 The script moves the player there THEN moves the player In into Treehollow_Cir. With the alias set to \" \" and no visible exits in Treehollow_Cir2, no text displays so it's not noticeable to the player, just a split second longer load as they pop into Treehollow_Cir. So basically it fails to draw Treehollow_Cir2 but is corrected by being moved into Treehollow_Cir. It was a little messy and I didn't love it but it worked, so I tried it and it was working but I experimented, moved around, and unfortunately after moving between a few different areas Quest just crashes. I just don't think it can handle a map that big. Once or twice between areas it's fine with but once you're going back and forth more than that the program starts to really chug and then it just whitescreened not only the map but the whole program. So either there's something inherently broken in my map that it can't load or it just can't handle the size of the map. I've seen some pretty large maps in Quest before so I'm a bit surprised it can't handle mine. It's fairly big but not excessively complicated. I counted them and it's at about roughly around 190 rooms currently. ",
      "EditableFormat": "markdown",
      "HTML": "<p>So, a bit more unfortunate news, mrangel. I think I figured out a solution and in the end... I think Quest just can't take it. What I did to get around the rooms not loading was I created false rooms that are the same dimensions on top of the intended entrance rooms. So a Treehollow_Cir2 The script moves the player there THEN moves the player In into Treehollow_Cir. With the alias set to \" \" and no visible exits in Treehollow_Cir2, no text displays so it's not noticeable to the player, just a split second longer load as they pop into Treehollow_Cir. So basically it fails to draw Treehollow_Cir2 but is corrected by being moved into Treehollow_Cir. It was a little messy and I didn't love it but it worked, so I tried it and it was working but I experimented, moved around, and unfortunately after moving between a few different areas Quest just crashes. I just don't think it can handle a map that big. Once or twice between areas it's fine with but once you're going back and forth more than that the program starts to really chug and then it just whitescreened not only the map but the whole program. So either there's something inherently broken in my map that it can't load or it just can't handle the size of the map. I've seen some pretty large maps in Quest before so I'm a bit surprised it can't handle mine. It's fairly big but not excessively complicated. I counted them and it's at about roughly around 190 rooms currently.</p>\n\n",
      "PostDate": "2024-02-17T04:47:08.1477857Z",
      "LastEditDate": "2024-02-17T04:56:29.0262237Z",
      "link": null
    },
    {
      "PostId": "2755861f-be5e-4d32-af77-c1ca4e3bd760",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hey daeun no worries, I very much appreciate your help, it's no bother! To try to clarify: I don't want to clear the map when my players teleport. I want the map to be saved so when they return (for example when they go inside a building and then back outside the building) they don't have to fill the entire map back out again which is what the TeleportTo function is supposed to do. So if that function you provided wipes the map every time they teleport but doesn't restore it, then that wouldn't be what I'm looking for. \r\n\r\nThe problem is with the TeleportTo function when they return to an area sometimes the map  breaks and I'm looking for a way to either fix that issue or as an emergency fix give them the ability to reset the map altogether in that scenario, but that would only be a fix if it breaks. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Hey daeun no worries, I very much appreciate your help, it's no bother! To try to clarify: I don't want to clear the map when my players teleport. I want the map to be saved so when they return (for example when they go inside a building and then back outside the building) they don't have to fill the entire map back out again which is what the TeleportTo function is supposed to do. So if that function you provided wipes the map every time they teleport but doesn't restore it, then that wouldn't be what I'm looking for.</p>\n<p>The problem is with the TeleportTo function when they return to an area sometimes the map  breaks and I'm looking for a way to either fix that issue or as an emergency fix give them the ability to reset the map altogether in that scenario, but that would only be a fix if it breaks.</p>\n\n",
      "PostDate": "2024-02-17T04:54:29.4228617Z",
      "LastEditDate": "2024-02-17T04:55:25.0755415Z",
      "link": null
    },
    {
      "PostId": "9f05faf5-4232-4432-8495-e2c22db5f662",
      "UserId": 31991,
      "Username": "daeun",
      "AvatarUrl": "https://i.imgur.com/Xvt8zzBb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Perhaps you could copy a small part of your game into a code file, to demonstrate the errors you are having so that mrangel can try multiple solutions to test on it.\r\nBut judging by your big game, I do think it is possible for quest to glitch out and that the glitch might not appear in a smaller demonstration.\r\nJust giving my two cents, this error is beyond me :)",
      "EditableFormat": "markdown",
      "HTML": "<p>Perhaps you could copy a small part of your game into a code file, to demonstrate the errors you are having so that mrangel can try multiple solutions to test on it.<br>\nBut judging by your big game, I do think it is possible for quest to glitch out and that the glitch might not appear in a smaller demonstration.<br>\nJust giving my two cents, this error is beyond me :)</p>\n\n",
      "PostDate": "2024-02-17T05:21:43.3537019Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d6aec2d4-ab5e-4952-acf5-491840582065",
      "UserId": 471859,
      "Username": "HiddenDark",
      "AvatarUrl": "https://i.imgur.com/S3isQf8b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "To be honest I wouldn't even begin to know where to start to try to create a test file. There's just so much of it and I'd have to take out such a substantial chunk of my game for a few reasons before trying to share it it'd take me hours to prepare most likely. I've been working on this game for about two years now. I certainly appreciate you though! ",
      "EditableFormat": "markdown",
      "HTML": "<p>To be honest I wouldn't even begin to know where to start to try to create a test file. There's just so much of it and I'd have to take out such a substantial chunk of my game for a few reasons before trying to share it it'd take me hours to prepare most likely. I've been working on this game for about two years now. I certainly appreciate you though!</p>\n\n",
      "PostDate": "2024-02-17T05:51:47.4888845Z",
      "LastEditDate": "2024-02-17T05:52:19.3218051Z",
      "link": null
    }
  ]
}
