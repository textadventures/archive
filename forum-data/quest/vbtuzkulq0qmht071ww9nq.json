{
  "Topic": {
    "TopicId": "vbtuzkulq0qmht071ww9nq",
    "ForumId": "10",
    "Title": "Drink from bottle",
    "LastUpdated": "2020-07-16T16:00:51.4498694Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "b8afba09-e0e1-408f-9203-938c6890f920",
      "UserId": 451124,
      "Username": "smh479",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I need help. I made a watersource that fills a bottle with water. That worked but when I do the code (from the textadventures guide) to drink from the bottle it does not work. Whst can I do? ",
      "EditableFormat": "markdown",
      "HTML": "<p>I need help. I made a watersource that fills a bottle with water. That worked but when I do the code (from the textadventures guide) to drink from the bottle it does not work. Whst can I do?</p>\n\n",
      "PostDate": "2020-07-16T16:00:51.4498694Z",
      "LastEditDate": "2020-07-16T20:16:36.4142414Z",
      "link": null
    },
    {
      "PostId": "9c30f477-b217-4b7c-877d-204d75832ec2",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "What do you mean it doesn't work?\r\n\r\nTo understand what problem you are having, you need to show us the relevant code (or a link to your game), the command the player enters, what you expect to happen, and what actually happens. If it gives an error message, tell us what that message is.",
      "EditableFormat": "markdown",
      "HTML": "<p>What do you mean it doesn't work?</p>\n<p>To understand what problem you are having, you need to show us the relevant code (or a link to your game), the command the player enters, what you expect to happen, and what actually happens. If it gives an error message, tell us what that message is.</p>\n\n",
      "PostDate": "2020-07-16T16:11:20.2463428Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a640ea60-1506-44a4-96ca-9e44e616d381",
      "UserId": 451124,
      "Username": "smh479",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "hi mrangel\r\n\r\nI made a sink and a bottle with the cods from http://docs.textadventures.co.uk/quest/handling_water.html\r\n\r\nLike I said I can make the sink switch on and off the water. So I can fill the bottle with water. \r\nOn the switchable side of the sink I did this:\r\n\r\nthis.parent.watersource = true\r\nthis.parent.watersource = false\r\n\r\nI made a attribute on the bottle with full and capacity 0 and 10. \r\nThan I made a verb \"fill\":\r\n\r\n  if (this.full = this.capacity) {\r\n    msg (\"It is already full.\")\r\n  }\r\n  else if (not GetBoolean(game.pov.parent, \"watersource\")) {\r\n    msg (\"No water here.\")\r\n  }\r\n  else {\r\n    msg (\"You fill it.\")\r\n    this.full = this.capacity\r\n  }\r\n\r\nthat worked perfectly I can switch the sink on and off and I can fill the bottle.\r\n\r\nmy problem is this one:\r\n\r\n if (this.full = 0) {\r\n    msg (\"It is empty.\")\r\n  }\r\n  else {\r\n    msg (\"You take a drink from it.\")\r\n    this.full = this.full - 1\r\n  }\r\n\r\nI should make a verb \"drink from\" but it does not work. \r\nIt says: \r\n\r\n> drink from bottle\r\nError running script: Error compiling expression 'this.full = 0': CompareElement: Operation 'Equal' is not defined for types 'String' and 'Int32'\r\n\r\n\r\n\r\n\r\n\r\n\r\n <object name=\"sink\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"switchable\" />\r\n      <feature_switchable />\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Switch on</value>\r\n        <value>Switch off</value>\r\n      </displayverbs>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Use</value>\r\n        <value>Switch on</value>\r\n        <value>Switch off</value>\r\n      </inventoryverbs>\r\n      <onswitchon type=\"script\">\r\n        this.parent.watersource = true\r\n      </onswitchon>\r\n      <onswitchoff type=\"script\">\r\n        this.parent.watersource = false\r\n      </onswitchoff>\r\n    </object>\r\n    <object name=\"bottle\">\r\n      <inherit name=\"editor_object\" />\r\n      <full>10</full>\r\n      <capacity>0</capacity>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Drop</value>\r\n      </inventoryverbs>\r\n      <feature_usegive />\r\n      <fill type=\"script\">\r\n        if (this.full = this.capacity) {\r\n          msg (\"It is already full.\")\r\n        }\r\n        else if (not GetBoolean(game.pov.parent, \"watersource\")) {\r\n          msg (\"No water here.\")\r\n        }\r\n        else {\r\n          msg (\"You fill it.\")\r\n          this.full = this.capacity\r\n        }\r\n      </fill>\r\n      <use type=\"script\">\r\n        do (this, \"drinkfrom\")\r\n      </use>\r\n      <drinkfrom type=\"script\">\r\n        if (this.full = 0) {\r\n          msg (\"It is empty.\")\r\n        }\r\n        else {\r\n          msg (\"You take a drink from it.\")\r\n          this.full = this.full - 1\r\n        }\r\n      </drinkfrom>\r\n    </object>\r\n  </object>\r\n\r\nThank you for your help!\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>hi mrangel</p>\n<p>I made a sink and a bottle with the cods from http://docs.textadventures.co.uk/quest/handling_water.html</p>\n<p>Like I said I can make the sink switch on and off the water. So I can fill the bottle with water.<br>\nOn the switchable side of the sink I did this:</p>\n<p>this.parent.watersource = true<br>\nthis.parent.watersource = false</p>\n<p>I made a attribute on the bottle with full and capacity 0 and 10.<br>\nThan I made a verb \"fill\":</p>\n<p>if (this.full = this.capacity) {<br>\nmsg (\"It is already full.\")<br>\n}<br>\nelse if (not GetBoolean(game.pov.parent, \"watersource\")) {<br>\nmsg (\"No water here.\")<br>\n}<br>\nelse {<br>\nmsg (\"You fill it.\")<br>\nthis.full = this.capacity<br>\n}</p>\n<p>that worked perfectly I can switch the sink on and off and I can fill the bottle.</p>\n<p>my problem is this one:</p>\n<p>if (this.full = 0) {<br>\nmsg (\"It is empty.\")<br>\n}<br>\nelse {<br>\nmsg (\"You take a drink from it.\")<br>\nthis.full = this.full - 1<br>\n}</p>\n<p>I should make a verb \"drink from\" but it does not work.<br>\nIt says:</p>\n<blockquote>\n<p>drink from bottle<br>\nError running script: Error compiling expression 'this.full = 0': CompareElement: Operation 'Equal' is not defined for types 'String' and 'Int32'</p>\n</blockquote>\n \n    \n  \n<p>Thank you for your help!</p>\n\n",
      "PostDate": "2020-07-16T17:29:46.7216919Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "25a1e494-3c44-4388-a26a-d02d6b78e6f3",
      "UserId": 451124,
      "Username": "smh479",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": " ``` <object name=\"sink\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"switchable\" />\r\n      <feature_switchable />\r\n      <displayverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Switch on</value>\r\n        <value>Switch off</value>\r\n      </displayverbs>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Use</value>\r\n        <value>Switch on</value>\r\n        <value>Switch off</value>\r\n      </inventoryverbs>\r\n      <onswitchon type=\"script\">\r\n        this.parent.watersource = true\r\n      </onswitchon>\r\n      <onswitchoff type=\"script\">\r\n        this.parent.watersource = false\r\n      </onswitchoff>\r\n    </object>\r\n    <object name=\"bottle\">\r\n      <inherit name=\"editor_object\" />\r\n      <full>10</full>\r\n      <capacity>0</capacity>\r\n      <inventoryverbs type=\"stringlist\">\r\n        <value>Look at</value>\r\n        <value>Drop</value>\r\n      </inventoryverbs>\r\n      <feature_usegive />\r\n      <fill type=\"script\">\r\n        if (this.full = this.capacity) {\r\n          msg (\"It is already full.\")\r\n        }\r\n        else if (not GetBoolean(game.pov.parent, \"watersource\")) {\r\n          msg (\"No water here.\")\r\n        }\r\n        else {\r\n          msg (\"You fill it.\")\r\n          this.full = this.capacity\r\n        }\r\n      </fill>\r\n      <use type=\"script\">\r\n        do (this, \"drinkfrom\")\r\n      </use>\r\n      <drinkfrom type=\"script\">\r\n        if (this.full = 0) {\r\n          msg (\"It is empty.\")\r\n        }\r\n        else {\r\n          msg (\"You take a drink from it.\")\r\n          this.full = this.full - 1\r\n        }\r\n      </drinkfrom>\r\n    </object>\r\n  </object>```",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>     &lt;inherit name=\"editor_object\" /&gt;\n     &lt;inherit name=\"switchable\" /&gt;\n     &lt;feature_switchable /&gt;\n     &lt;displayverbs type=\"stringlist\"&gt;\n       &lt;value&gt;Look at&lt;/value&gt;\n       &lt;value&gt;Switch on&lt;/value&gt;\n       &lt;value&gt;Switch off&lt;/value&gt;\n     &lt;/displayverbs&gt;\n     &lt;inventoryverbs type=\"stringlist\"&gt;\n       &lt;value&gt;Look at&lt;/value&gt;\n       &lt;value&gt;Use&lt;/value&gt;\n       &lt;value&gt;Switch on&lt;/value&gt;\n       &lt;value&gt;Switch off&lt;/value&gt;\n     &lt;/inventoryverbs&gt;\n     &lt;onswitchon type=\"script\"&gt;\n       this.parent.watersource = true\n     &lt;/onswitchon&gt;\n     &lt;onswitchoff type=\"script\"&gt;\n       this.parent.watersource = false\n     &lt;/onswitchoff&gt;\n   &lt;/object&gt;\n   &lt;object name=\"bottle\"&gt;\n     &lt;inherit name=\"editor_object\" /&gt;\n     &lt;full&gt;10&lt;/full&gt;\n     &lt;capacity&gt;0&lt;/capacity&gt;\n     &lt;inventoryverbs type=\"stringlist\"&gt;\n       &lt;value&gt;Look at&lt;/value&gt;\n       &lt;value&gt;Drop&lt;/value&gt;\n     &lt;/inventoryverbs&gt;\n     &lt;feature_usegive /&gt;\n     &lt;fill type=\"script\"&gt;\n       if (this.full = this.capacity) {\n         msg (\"It is already full.\")\n       }\n       else if (not GetBoolean(game.pov.parent, \"watersource\")) {\n         msg (\"No water here.\")\n       }\n       else {\n         msg (\"You fill it.\")\n         this.full = this.capacity\n       }\n     &lt;/fill&gt;\n     &lt;use type=\"script\"&gt;\n       do (this, \"drinkfrom\")\n     &lt;/use&gt;\n     &lt;drinkfrom type=\"script\"&gt;\n       if (this.full = 0) {\n         msg (\"It is empty.\")\n       }\n       else {\n         msg (\"You take a drink from it.\")\n         this.full = this.full - 1\n       }\n     &lt;/drinkfrom&gt;\n   &lt;/object&gt;\n &lt;/object&gt;```\n</code></pre>\n\n",
      "PostDate": "2020-07-16T17:30:26.2511059Z",
      "LastEditDate": "2020-07-16T17:37:40.3022795Z",
      "link": null
    },
    {
      "PostId": "f1154a13-de58-4663-8691-9c2764a7bd62",
      "UserId": 451124,
      "Username": "smh479",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How can I post the whole code of my game? Its not showing.. - it worked now (look above)",
      "EditableFormat": "markdown",
      "HTML": "<p>How can I post the whole code of my game? Its not showing.. - it worked now (look above)</p>\n\n",
      "PostDate": "2020-07-16T17:31:27.8215946Z",
      "LastEditDate": "2020-07-16T17:39:03.6158677Z",
      "link": null
    },
    {
      "PostId": "26f3bd39-9e56-48a2-a13b-666f860229d3",
      "UserId": 451124,
      "Username": "smh479",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Please someone help me :) ",
      "EditableFormat": "markdown",
      "HTML": "<p>Please someone help me :)</p>\n\n",
      "PostDate": "2020-07-16T18:33:51.2030214Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9f6d099c-ce4a-4846-bdab-7fdf9a460908",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Your problem is the attribute types.\r\n\r\nThe capacity of your bottle is the string `10`. That is, a sequence of text containing the character `1` and the character `0`.\r\n\r\nWhen you fill the bottle, it sets the `full` attribute to the same as `capacity` - the string `10`.\r\n\r\nSo in your drink command, the line:\r\n```\r\nif (this.full = 0) {\r\n```\r\ncompares the string `10` to the number 0.\r\nQuest only allows you to compare two things of the same type. You can check if two strings are the same, or you can check if two numbers are the same. But you get an error if you try to check if a string is equal to a number.\r\n\r\nWhen you created the attributes, you need to set both `full` and `capacity` to be numeric types. This means that the type should be \"integer\" (not \"string\").\r\nI'm not sure how this looks in the editor, as I've only used the web editor (which doesn't  have the Attributes tab) - but there should be a way to change the type of each attribute.\r\n\r\nWhen you've got it set up correctly, that part of the code view should look like:\r\n```\r\n   <object name=\"bottle\">\r\n     <inherit name=\"editor_object\" />\r\n     <full type=\"int\">10</full>\r\n     <capacity type=\"int\">10</capacity>\r\n```\r\n\r\nOther than that, I can't see any other issues with the code.\r\n\r\nI'm not so good at explaining stuff, and I know some people find this hard to understand. I think I've said it a few different ways, so I hope one of them makes sense.",
      "EditableFormat": "markdown",
      "HTML": "<p>Your problem is the attribute types.</p>\n<p>The capacity of your bottle is the string <code>10</code>. That is, a sequence of text containing the character <code>1</code> and the character <code>0</code>.</p>\n<p>When you fill the bottle, it sets the <code>full</code> attribute to the same as <code>capacity</code> - the string <code>10</code>.</p>\n<p>So in your drink command, the line:</p>\n<pre><code>if (this.full = 0) {\n</code></pre>\n<p>compares the string <code>10</code> to the number 0.<br>\nQuest only allows you to compare two things of the same type. You can check if two strings are the same, or you can check if two numbers are the same. But you get an error if you try to check if a string is equal to a number.</p>\n<p>When you created the attributes, you need to set both <code>full</code> and <code>capacity</code> to be numeric types. This means that the type should be \"integer\" (not \"string\").<br>\nI'm not sure how this looks in the editor, as I've only used the web editor (which doesn't  have the Attributes tab) - but there should be a way to change the type of each attribute.</p>\n<p>When you've got it set up correctly, that part of the code view should look like:</p>\n<pre><code>   &lt;object name=\"bottle\"&gt;\n     &lt;inherit name=\"editor_object\" /&gt;\n     &lt;full type=\"int\"&gt;10&lt;/full&gt;\n     &lt;capacity type=\"int\"&gt;10&lt;/capacity&gt;\n</code></pre>\n<p>Other than that, I can't see any other issues with the code.</p>\n<p>I'm not so good at explaining stuff, and I know some people find this hard to understand. I think I've said it a few different ways, so I hope one of them makes sense.</p>\n\n",
      "PostDate": "2020-07-16T19:01:27.1866619Z",
      "LastEditDate": "2020-07-17T06:13:56.7790923Z",
      "link": null
    },
    {
      "PostId": "e72aeee4-e18d-4868-83db-c9d4a36ca3b6",
      "UserId": 451124,
      "Username": "smh479",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you very much. I think I understand. I try it!",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you very much. I think I understand. I try it!</p>\n\n",
      "PostDate": "2020-07-16T19:40:14.5169493Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3f09e92d-7b5e-4795-8b05-8310e6c0959a",
      "UserId": 451124,
      "Username": "smh479",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It works! Thank you so much! \r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>It works! Thank you so much!</p>\n\n",
      "PostDate": "2020-07-16T20:03:41.2752745Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "08c34624-15fc-42ba-826b-94563395ec2a",
      "UserId": 451124,
      "Username": "smh479",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "one problem left, the bottle does not go empty... ",
      "EditableFormat": "markdown",
      "HTML": "<p>one problem left, the bottle does not go empty...</p>\n\n",
      "PostDate": "2020-07-16T20:15:38.6142563Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "14989838-ef5e-48ac-80dd-41613c4c6dc7",
      "UserId": 260569,
      "Username": "DarkLizerd",
      "AvatarUrl": "https://i.imgur.com/vjdH3t6b.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "To test what's happening...\r\nTry this:\r\n(Your code bit)\r\nmsg (\"You take a drink from it.\")\r\n         this.full = this.full - 1\r\nChange to:\r\nmsg (\"You take a drink from it.\")\r\n         this.full = this.full - 1\r\nmsg(\"There are \" + this.full + \" drinks left.\")\r\n\r\nAnd watch what happens.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>To test what's happening...<br>\nTry this:<br>\n(Your code bit)<br>\nmsg (\"You take a drink from it.\")<br>\nthis.full = this.full - 1<br>\nChange to:<br>\nmsg (\"You take a drink from it.\")<br>\nthis.full = this.full - 1<br>\nmsg(\"There are \" + this.full + \" drinks left.\")</p>\n<p>And watch what happens.</p>\n\n",
      "PostDate": "2020-07-17T00:03:24.7546634Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "19599e82-cf6d-49bb-8820-16ca5284a542",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Check the values of the two intergers ```'full'``` and ```'capacity'```, are you sure they are the correct values.\r\n\r\nInitially, ```'full'``` should be set to ```0```, \r\nand ```'capacaity'``` should be set to ```10```\r\n\r\nLooking at the code you posted above, you seem to have capacity set at ```0```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Check the values of the two intergers <code>'full'</code> and <code>'capacity'</code>, are you sure they are the correct values.</p>\n<p>Initially, <code>'full'</code> should be set to <code>0</code>,<br>\nand <code>'capacaity'</code> should be set to <code>10</code></p>\n<p>Looking at the code you posted above, you seem to have capacity set at <code>0</code></p>\n\n",
      "PostDate": "2020-07-17T01:11:53.0382026Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6b22a42e-e95a-45d7-925e-67f136c027af",
      "UserId": 451124,
      "Username": "smh479",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "thank you!",
      "EditableFormat": "markdown",
      "HTML": "<p>thank you!</p>\n\n",
      "PostDate": "2020-07-17T13:19:20.4038203Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6e2e5e66-f0be-4f95-849b-dc7e4edede53",
      "UserId": 304102,
      "Username": "Doctor Agon",
      "AvatarUrl": "http://i.imgur.com/Lzd3mOwb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "When I've used this, I've also made a 'water object' in the room as well, which I initially set to invisible, then make visible or invisible, depending on whether the tap is on or off.\r\n\r\nI also put a 'look at' description on the tap as follows\r\n```\r\nThe tap is turned {if bathroom.watersource:on, {object:water} gushes out into the bath}{if not bathroom.watersource:off}.\r\n```\r\n\r\nOn the 'water object', for 'take', I set it to run a script, as follows\r\n```\r\nif (not GetBoolean(game.pov.parent, \"watersource\")) {\r\n  msg (\"There is no water here.\")\r\n}\r\nelse {\r\n  if (Got(bottle)) {\r\n    OutputTextNoBr (\"Using the {object:bottle}: \")\r\n    do (bottle, \"fill\")\r\n  }\r\n  else {\r\n    msg (\"You try to pick up the water, but it unsurprisingly slips through your fingers.\")\r\n  }\r\n}\r\n```\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>When I've used this, I've also made a 'water object' in the room as well, which I initially set to invisible, then make visible or invisible, depending on whether the tap is on or off.</p>\n<p>I also put a 'look at' description on the tap as follows</p>\n<pre><code>The tap is turned {if bathroom.watersource:on, {object:water} gushes out into the bath}{if not bathroom.watersource:off}.\n</code></pre>\n<p>On the 'water object', for 'take', I set it to run a script, as follows</p>\n<pre><code>if (not GetBoolean(game.pov.parent, \"watersource\")) {\n  msg (\"There is no water here.\")\n}\nelse {\n  if (Got(bottle)) {\n    OutputTextNoBr (\"Using the {object:bottle}: \")\n    do (bottle, \"fill\")\n  }\n  else {\n    msg (\"You try to pick up the water, but it unsurprisingly slips through your fingers.\")\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2020-07-17T21:53:55.0834619Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e669df41-2886-4d8b-9e3a-b9775660dce2",
      "UserId": 451124,
      "Username": "smh479",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "thank you all so much",
      "EditableFormat": "markdown",
      "HTML": "<p>thank you all so much</p>\n\n",
      "PostDate": "2020-07-18T15:38:09.9964166Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
