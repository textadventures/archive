{
  "Topic": {
    "TopicId": "5594",
    "ForumId": "10",
    "Title": "How to display a description?",
    "LastUpdated": "2015-11-08T15:03:51+00:00",
    "ReplyCount": 17
  },
  "Posts": [
    {
      "PostId": "38510",
      "UserId": 0,
      "Username": "sez",
      "UserAvatar": null,
      "UserGravatar": "25324ea7a82bce6299242890fe54942c",
      "EditableText": "Hi,\n\nWhat is the best way to print a description of a room and of an object?\n\nAt present I'm using this for rooms:\n\n[code:390mht0x]OutputTextNoBr (&quot;Looking out the front window you see the small-holding outside&#46;&quot;)\nforeach (obj, ScopeVisibleNotHeldForRoom(smallholding)) {\n  if (HasAttribute(obj, &quot;inroomdescription&quot;)) {\n    msg (obj&#46;inroomdescription)\n  }\n}[/code:390mht0x]\n\nBut its horribly over-wrought, and it doesn't expand TextProcessor entries that are in those &quot;inroomdescription&quot; entries.\n\nI don't yet have a solution for objects.\n\nI was sure there'd be some dynamic template or something I could activate?\nUPDATE:  This function FormatObjectList(...) looks like it should be most of a solution but I can't get it to work:\n\n<!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/corelibrary/formatobjectlist.html\">http://docs.textadventures.co.uk/quest/ ... tlist.html</a><!-- m -->\n\nWhen I paste in the exact sample code I get an error\n\n&gt; look out\nError running script&#058; Error evaluating expression 'FormatObjectList(&quot;You can see&quot;, player.parent, &quot;and&quot;, &quot;in this room.&quot;, false)': Index was out of range. Must be non-negative and less than the size of the collection.Parameter name: index",
      "EditableFormat": "bbcode",
      "HTML": "Hi,<br/><br/>What is the best way to print a description of a room and of an object?<br/><br/>At present I'm using this for rooms:<br/><br/><pre><code>OutputTextNoBr (&quot;Looking out the front window you see the small-holding outside&#46;&quot;)<br/>foreach (obj, ScopeVisibleNotHeldForRoom(smallholding)) {<br/>  if (HasAttribute(obj, &quot;inroomdescription&quot;)) {<br/>    msg (obj&#46;inroomdescription)<br/>  }<br/>}</code></pre><br/><br/>But its horribly over-wrought, and it doesn't expand TextProcessor entries that are in those &quot;inroomdescription&quot; entries.<br/><br/>I don't yet have a solution for objects.<br/><br/>I was sure there'd be some dynamic template or something I could activate?<br/>UPDATE:  This function FormatObjectList(...) looks like it should be most of a solution but I can't get it to work:<br/><br/><!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/corelibrary/formatobjectlist.html\">http://docs.textadventures.co.uk/quest/ ... tlist.html</a><!-- m --><br/><br/>When I paste in the exact sample code I get an error<br/><br/>&gt; look out<br/>Error running script&#058; Error evaluating expression 'FormatObjectList(&quot;You can see&quot;, player.parent, &quot;and&quot;, &quot;in this room.&quot;, false)': Index was out of range. Must be non-negative and less than the size of the collection.Parameter name: index",
      "PostDate": "2015-11-03T12:32:49+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38511",
      "UserId": 0,
      "Username": "Pertex",
      "UserAvatar": "5940_1369854251.gif",
      "UserGravatar": "4cc1e52f99452e841ecf4cbee9eadde9",
      "EditableText": "So you want to print the description of a room the player is not in?",
      "EditableFormat": "bbcode",
      "HTML": "So you want to print the description of a room the player is not in?",
      "PostDate": "2015-11-03T13:06:38+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38512",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "I am not sure of a couple of things. Firstly, using msg as you do, the inroomdescription TextProcessor entries should get processed. Is it perhaps an error in the entry that is the issue here?\n\nWhen I first read your post, I thought this was the description when you enter a room (and these things should be built-in), but I think it is actually what the player sees when looking through a window. Is that right?\n\nI suspect this is more-or-less the best way to do it. If you have several windows to look out, you could set a general  LOOK OUT command that checks and uses attributes, so you only need that code once (I can talk you through that if you want), but I cannot think of any better way besides that. Looking out of windows is a bit too specific to individual games.",
      "EditableFormat": "bbcode",
      "HTML": "I am not sure of a couple of things. Firstly, using msg as you do, the inroomdescription TextProcessor entries should get processed. Is it perhaps an error in the entry that is the issue here?<br/><br/>When I first read your post, I thought this was the description when you enter a room (and these things should be built-in), but I think it is actually what the player sees when looking through a window. Is that right?<br/><br/>I suspect this is more-or-less the best way to do it. If you have several windows to look out, you could set a general  LOOK OUT command that checks and uses attributes, so you only need that code once (I can talk you through that if you want), but I cannot think of any better way besides that. Looking out of windows is a bit too specific to individual games.",
      "PostDate": "2015-11-03T13:11:46+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38513",
      "UserId": 0,
      "Username": "sez",
      "UserAvatar": null,
      "UserGravatar": "25324ea7a82bce6299242890fe54942c",
      "EditableText": "Hey guys - yes, its the description of a room the player is not in.  Obviously things in an adjoining room can change - in my case there is a horde of pitchfork waving villagers that will show up.  Also some items - the cart, the donkey - might be moved from there.\n\nRegarding TextProcessor entries - if I go out to the garden and look, the entries embedded in the inroomdescription is displayed just right, nice hyperlinks, all good.  But using the msg command as given not at all.",
      "EditableFormat": "bbcode",
      "HTML": "Hey guys - yes, its the description of a room the player is not in.  Obviously things in an adjoining room can change - in my case there is a horde of pitchfork waving villagers that will show up.  Also some items - the cart, the donkey - might be moved from there.<br/><br/>Regarding TextProcessor entries - if I go out to the garden and look, the entries embedded in the inroomdescription is displayed just right, nice hyperlinks, all good.  But using the msg command as given not at all.",
      "PostDate": "2015-11-03T13:23:55+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38514",
      "UserId": 0,
      "Username": "Pertex",
      "UserAvatar": "5940_1369854251.gif",
      "UserGravatar": "4cc1e52f99452e841ecf4cbee9eadde9",
      "EditableText": "Strange, I copied your code and my text processor tags within inroom descriptions are evaluated. Perhaps you could post a demo game showing your problem?",
      "EditableFormat": "bbcode",
      "HTML": "Strange, I copied your code and my text processor tags within inroom descriptions are evaluated. Perhaps you could post a demo game showing your problem?",
      "PostDate": "2015-11-03T13:29:37+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38515",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "I am fascinated by the difference between how code-experienced players and code-noobs solve problems.  If this were MY game (and I am a code-NOOB...), sez, I would add an object in the current room - let's say a window - and add the command 'look through window; look in window; look at window&quot; that ran a flagged/unflagged script that printed message for whatever you wanted the player to see when looking through the window.\n\nAnyway, I will stop being not helpful. <!-- s:lol: --><img src=\"{SMILIES_PATH}/icon_lol.gif\" alt=\":lol:\" title=\"Laughing\" /><!-- s:lol: -->\n\nGood luck!",
      "EditableFormat": "bbcode",
      "HTML": "I am fascinated by the difference between how code-experienced players and code-noobs solve problems.  If this were MY game (and I am a code-NOOB...), sez, I would add an object in the current room - let's say a window - and add the command 'look through window; look in window; look at window&quot; that ran a flagged/unflagged script that printed message for whatever you wanted the player to see when looking through the window.<br/><br/>Anyway, I will stop being not helpful. <!-- s:lol: --><img src=\"{SMILIES_PATH}/icon_lol.gif\" alt=\":lol:\" title=\"Laughing\" /><!-- s:lol: --><br/><br/>Good luck!",
      "PostDate": "2015-11-03T19:37:48+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38521",
      "UserId": 0,
      "Username": "sez",
      "UserAvatar": null,
      "UserGravatar": "25324ea7a82bce6299242890fe54942c",
      "EditableText": "Hi All,\n\nThanks heaps for your comments.  Its good to know there clever folks out there using Quest, coders and story tellers alike.  Even when concrete solutions do not come flooding forth, venting/sharing frustrations is very helpful!\n\nThere' a demo here of the issue:\n\n<!-- m --><a class=\"postlink\" href=\"http://textadventures.co.uk/games/view/tzcm_qftoeqmbwy_1v8vog/demolookproblem\">http://textadventures.co.uk/games/view/ ... ookproblem</a><!-- m -->\n\nand the code for that is here:\n\n<!-- m --><a class=\"postlink\" href=\"https://gist.github.com/sarah-j-smith/a309e8331613060d3f5a\">https://gist.github.com/sarah-j-smith/a ... 13060d3f5a</a><!-- m -->\n\nYou can see that if you look from the room none of the object links work.\n\nHere's my suspicion - something about the Scope rules is defeating the object links - they only work for objects in this room.  I noticed that {command:blah} links work but anything that tries to interact with something in the next room fails.\n\n@XanMag - your ideas are good.  Nice and straightforward.  The issue that concerns me is that if the garden changes the hard-coded printed messages for looking through the window would not reflect that.  I need a way to print an up-to-date description of the garden while looking at it through the window.\n\nRegarding looking out of windows being too specific.  Well perhaps it is.  But isn't then the whole idea of having a &quot;look only&quot; direction - a special modality for exits that is all about being able to look through them rather an utter waste of time?  \n\nThat flag/check box should probably just be removed if the whole thing is such an perilous rabbit-hole.\n\nOh well!",
      "EditableFormat": "bbcode",
      "HTML": "Hi All,<br/><br/>Thanks heaps for your comments.  Its good to know there clever folks out there using Quest, coders and story tellers alike.  Even when concrete solutions do not come flooding forth, venting/sharing frustrations is very helpful!<br/><br/>There' a demo here of the issue:<br/><br/><!-- m --><a class=\"postlink\" href=\"http://textadventures.co.uk/games/view/tzcm_qftoeqmbwy_1v8vog/demolookproblem\">http://textadventures.co.uk/games/view/ ... ookproblem</a><!-- m --><br/><br/>and the code for that is here:<br/><br/><!-- m --><a class=\"postlink\" href=\"https://gist.github.com/sarah-j-smith/a309e8331613060d3f5a\">https://gist.github.com/sarah-j-smith/a ... 13060d3f5a</a><!-- m --><br/><br/>You can see that if you look from the room none of the object links work.<br/><br/>Here's my suspicion - something about the Scope rules is defeating the object links - they only work for objects in this room.  I noticed that {command:blah} links work but anything that tries to interact with something in the next room fails.<br/><br/>@XanMag - your ideas are good.  Nice and straightforward.  The issue that concerns me is that if the garden changes the hard-coded printed messages for looking through the window would not reflect that.  I need a way to print an up-to-date description of the garden while looking at it through the window.<br/><br/>Regarding looking out of windows being too specific.  Well perhaps it is.  But isn't then the whole idea of having a &quot;look only&quot; direction - a special modality for exits that is all about being able to look through them rather an utter waste of time?  <br/><br/>That flag/check box should probably just be removed if the whole thing is such an perilous rabbit-hole.<br/><br/>Oh well!",
      "PostDate": "2015-11-04T11:59:54+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38522",
      "UserId": 0,
      "Username": "Pertex",
      "UserAvatar": "5940_1369854251.gif",
      "UserGravatar": "4cc1e52f99452e841ecf4cbee9eadde9",
      "EditableText": "[quote=&quot;sez&quot;:3wo6vl36]\nHere's my suspicion - something about the Scope rules is defeating the object links - they only work for objects in this room.  I noticed that {command:blah} links work but anything that tries to interact with something in the next room fails.\n[/quote:3wo6vl36]\n\nThat's right, links are only shown for objects in the player room. It's not a bug, it's a feature",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>sez wrote:</cite><br/>Here's my suspicion - something about the Scope rules is defeating the object links - they only work for objects in this room.  I noticed that {command:blah} links work but anything that tries to interact with something in the next room fails.<br/></blockquote><br/><br/>That's right, links are only shown for objects in the player room. It's not a bug, it's a feature",
      "PostDate": "2015-11-04T12:37:02+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38524",
      "UserId": 0,
      "Username": "sez",
      "UserAvatar": null,
      "UserGravatar": "25324ea7a82bce6299242890fe54942c",
      "EditableText": "OK, cool. I see now.\n\nI might seem like I'm complaining.  I'm actually hugely impressed by what Alex has done with Quest: its a huge project, and there's a lot of functionality here.  Its just a case of running into these road blocks and eventually understanding how it works.  Thanks again for the help.\n\nBy the way here is the work-in-progress on my game:\n\n<!-- m --><a class=\"postlink\" href=\"http://textadventures.co.uk/games/view/we8wx00cwugiyv5rrwqyqg/the-witches-daughter\">http://textadventures.co.uk/games/view/ ... s-daughter</a><!-- m -->\n\nDoes't do much yet.",
      "EditableFormat": "bbcode",
      "HTML": "OK, cool. I see now.<br/><br/>I might seem like I'm complaining.  I'm actually hugely impressed by what Alex has done with Quest: its a huge project, and there's a lot of functionality here.  Its just a case of running into these road blocks and eventually understanding how it works.  Thanks again for the help.<br/><br/>By the way here is the work-in-progress on my game:<br/><br/><!-- m --><a class=\"postlink\" href=\"http://textadventures.co.uk/games/view/we8wx00cwugiyv5rrwqyqg/the-witches-daughter\">http://textadventures.co.uk/games/view/ ... s-daughter</a><!-- m --><br/><br/>Does't do much yet.",
      "PostDate": "2015-11-04T13:00:15+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38525",
      "UserId": 0,
      "Username": "sez",
      "UserAvatar": null,
      "UserGravatar": "25324ea7a82bce6299242890fe54942c",
      "EditableText": "Oh, one more thing - anyone know how to get FormatObjectList(...) to work?  I haven't been able to get it to do anything.",
      "EditableFormat": "bbcode",
      "HTML": "Oh, one more thing - anyone know how to get FormatObjectList(...) to work?  I haven't been able to get it to do anything.",
      "PostDate": "2015-11-04T13:22:31+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38527",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "I have a feeling it has changed, and the documentation has not. It now only takes four parameters, the Boolean at the end has gone.",
      "EditableFormat": "bbcode",
      "HTML": "I have a feeling it has changed, and the documentation has not. It now only takes four parameters, the Boolean at the end has gone.",
      "PostDate": "2015-11-04T16:08:08+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38528",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "Sez, \n\nCheck your in box.  Nice work so far on your WIP, btw.  Good writing!  A look forward to more.",
      "EditableFormat": "bbcode",
      "HTML": "Sez, <br/><br/>Check your in box.  Nice work so far on your WIP, btw.  Good writing!  A look forward to more.",
      "PostDate": "2015-11-04T19:53:15+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38538",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "Meh... I tried to give you a sample of code for what I meant in my previous post but ended up with a full, fun little game.\n\n<!-- m --><a class=\"postlink\" href=\"http://textadventures.co.uk/games/view/wigila8c2k2ugtrddd_ylq/furby-mcquack\">http://textadventures.co.uk/games/view/ ... by-mcquack</a><!-- m -->\n\nGood luck!",
      "EditableFormat": "bbcode",
      "HTML": "Meh... I tried to give you a sample of code for what I meant in my previous post but ended up with a full, fun little game.<br/><br/><!-- m --><a class=\"postlink\" href=\"http://textadventures.co.uk/games/view/wigila8c2k2ugtrddd_ylq/furby-mcquack\">http://textadventures.co.uk/games/view/ ... by-mcquack</a><!-- m --><br/><br/>Good luck!",
      "PostDate": "2015-11-05T11:34:26+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38541",
      "UserId": 0,
      "Username": "sez",
      "UserAvatar": null,
      "UserGravatar": "25324ea7a82bce6299242890fe54942c",
      "EditableText": "That is a very cool little game Mr Xanadu Magoo!  I can see you know your way around Quest, and I like the pot-boiler style.  For a while I didn't realize the world was changing - and I still don't know if it was a timer, or the passage of turns - but then I just went into a &quot;sit back and watch the world unfold outside my windows&quot; state.\n\nRe the sample code - very much appreciated.  I'm not sure how to check my inbox tho' ...?\n\nEDIT: Ah, saw the PM.  Thanks for the idea - will check into it this weekend.",
      "EditableFormat": "bbcode",
      "HTML": "That is a very cool little game Mr Xanadu Magoo!  I can see you know your way around Quest, and I like the pot-boiler style.  For a while I didn't realize the world was changing - and I still don't know if it was a timer, or the passage of turns - but then I just went into a &quot;sit back and watch the world unfold outside my windows&quot; state.<br/><br/>Re the sample code - very much appreciated.  I'm not sure how to check my inbox tho' ...?<br/><br/>EDIT: Ah, saw the PM.  Thanks for the idea - will check into it this weekend.",
      "PostDate": "2015-11-05T12:23:35+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38543",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "@ Sez... Dr. Freud would be would be disappointed in your outcome in my little game.  Perhaps you should watch Inception? =)",
      "EditableFormat": "bbcode",
      "HTML": "@ Sez... Dr. Freud would be would be disappointed in your outcome in my little game.  Perhaps you should watch Inception? =)",
      "PostDate": "2015-11-05T13:52:59+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38569",
      "UserId": 0,
      "Username": "sez",
      "UserAvatar": null,
      "UserGravatar": "25324ea7a82bce6299242890fe54942c",
      "EditableText": "Ah - OK.  I found that a certain command only starts working once its been hinted by text printed in the game, after the second phone call.\n\nIts an interesting puzzle.  Thanks for the hint.",
      "EditableFormat": "bbcode",
      "HTML": "Ah - OK.  I found that a certain command only starts working once its been hinted by text printed in the game, after the second phone call.<br/><br/>Its an interesting puzzle.  Thanks for the hint.",
      "PostDate": "2015-11-07T04:20:58+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38588",
      "UserId": 0,
      "Username": "sez",
      "UserAvatar": null,
      "UserGravatar": "25324ea7a82bce6299242890fe54942c",
      "EditableText": "OK, I figured out how to escape the room with that hint.  Nice little game!\n\nI've added some more to &quot;The Witches Daughter&quot;.  Mostly setup stuff around the story, via conversations with our heroines mother.\n\n<!-- m --><a class=\"postlink\" href=\"http://textadventures.co.uk/games/view/we8wx00cwugiyv5rrwqyqg/the-witches-daughter\">http://textadventures.co.uk/games/view/ ... s-daughter</a><!-- m -->\n\nThanks for ConvLib - nice work there.  Very useful!",
      "EditableFormat": "bbcode",
      "HTML": "OK, I figured out how to escape the room with that hint.  Nice little game!<br/><br/>I've added some more to &quot;The Witches Daughter&quot;.  Mostly setup stuff around the story, via conversations with our heroines mother.<br/><br/><!-- m --><a class=\"postlink\" href=\"http://textadventures.co.uk/games/view/we8wx00cwugiyv5rrwqyqg/the-witches-daughter\">http://textadventures.co.uk/games/view/ ... s-daughter</a><!-- m --><br/><br/>Thanks for ConvLib - nice work there.  Very useful!",
      "PostDate": "2015-11-08T14:00:52+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "38592",
      "UserId": 0,
      "Username": "XanMag",
      "UserAvatar": "7161_1436827710.jpg",
      "UserGravatar": "4b45a3afd18077f76f6569225c422bdb",
      "EditableText": "Just an FYI, which you probably already know about...\n\nWhen I climb the chest I get the following:\n\n&gt; climb chest\nUsing the leather straps as footholds you climb onto the top of the chest.\n\nA chest\n\nyou climb down from theObject: chest_window\n\nat which point I cannot do anything in the game.  Like I said, I assume you know about it being the game is a WIP but thought I should inform.  Everything else looks good.  This seems like it will be a good finished product!\n\nAt this point if you want game testers, you should start a thread on the game announcement page.  We'll be glad to test and offer feedback!\n\nGood luck.\n\nXanMag",
      "EditableFormat": "bbcode",
      "HTML": "Just an FYI, which you probably already know about...<br/><br/>When I climb the chest I get the following:<br/><br/>&gt; climb chest<br/>Using the leather straps as footholds you climb onto the top of the chest.<br/><br/>A chest<br/><br/>you climb down from theObject: chest_window<br/><br/>at which point I cannot do anything in the game.  Like I said, I assume you know about it being the game is a WIP but thought I should inform.  Everything else looks good.  This seems like it will be a good finished product!<br/><br/>At this point if you want game testers, you should start a thread on the game announcement page.  We'll be glad to test and offer feedback!<br/><br/>Good luck.<br/><br/>XanMag",
      "PostDate": "2015-11-08T15:03:51+00:00",
      "LastEditDate": null
    }
  ]
}
