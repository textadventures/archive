{
  "Topic": {
    "TopicId": "6353",
    "ForumId": "10",
    "Title": "Max Volume/Volume Question [SOLVED]",
    "LastUpdated": "2016-05-21T04:54:01+01:00",
    "ReplyCount": 6
  },
  "Posts": [
    {
      "PostId": "42978",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "Okay, so in my game I have a MaxVolume Carry Limit. When it reaches &quot;0&quot; it immobilizes the player. The player starts with a Max Volume of &quot;3&quot; and any items they pick up subtracts from that number (except items listed with a volume of &quot;0&quot;). However, when the player picks up 3 &quot;0&quot; volume items, it still immobilizes them.   \n\nSo I was wondering if it was possible for the game NOT to count items among that limit when they have &quot;0&quot; volume. \n\nFor the record, I have unlimited inventory allowance, so I'm not sure what's going on. Here's the coding. \n\nmaxvolume 3\nchangedmaxvolume\n[code:35as6zwr]if (player&#46;maxvolume &lt; 0) {\n  player&#46;maxvolume = 0\n}[/code:35as6zwr]\n\n[u:35as6zwr]Go Modified Command[/u:35as6zwr]\n[code:35as6zwr]if (GetBoolean (player, &quot;immobilized&quot;)) {\n  if (HasString(player, &quot;immobilizedmessage&quot;)) {\n    msg (player&#46;immobilizedmessage)\n  }\n  else {\n    msg (&quot;&lt;br/&gt;You cannot move! &lt;br/&gt;&quot;)\n  }\n}\nelse if (player&#46;maxvolume &lt; ListCount(GetDirectChildren(player))) {\n  msg (&quot;&lt;br/&gt;{random&#58;You're carrying too much to move!&#58;You're juggling too many items!&#58;You cannot move, things are literally dropping out of your arms with every motion you make!} {once&#58;You'll need to find a container or to drop some of your current items&#46;} &lt;br/&gt;&quot;)\n}\nelse if (exit&#46;locked) {\n  msg (exit&#46;lockmessage)\n}\nelse if (HasScript(exit, &quot;script&quot;)) {\n  do (exit, &quot;script&quot;)\n}\nelse {\n  if (exit&#46;lookonly) {\n    msg (&quot;You can't go there&#46;&quot;)\n  }\n  else {\n    player&#46;parent = exit&#46;to\n  }\n}[/code:35as6zwr]",
      "EditableFormat": "bbcode",
      "HTML": "Okay, so in my game I have a MaxVolume Carry Limit. When it reaches &quot;0&quot; it immobilizes the player. The player starts with a Max Volume of &quot;3&quot; and any items they pick up subtracts from that number (except items listed with a volume of &quot;0&quot;). However, when the player picks up 3 &quot;0&quot; volume items, it still immobilizes them.   <br/><br/>So I was wondering if it was possible for the game NOT to count items among that limit when they have &quot;0&quot; volume. <br/><br/>For the record, I have unlimited inventory allowance, so I'm not sure what's going on. Here's the coding. <br/><br/>maxvolume 3<br/>changedmaxvolume<br/><pre><code>if (player&#46;maxvolume &lt; 0) {<br/>  player&#46;maxvolume = 0<br/>}</code></pre><br/><br/><span style=\"text-decoration:underline;\">Go Modified Command</span><br/><pre><code>if (GetBoolean (player, &quot;immobilized&quot;)) {<br/>  if (HasString(player, &quot;immobilizedmessage&quot;)) {<br/>    msg (player&#46;immobilizedmessage)<br/>  }<br/>  else {<br/>    msg (&quot;&lt;br/&gt;You cannot move! &lt;br/&gt;&quot;)<br/>  }<br/>}<br/>else if (player&#46;maxvolume &lt; ListCount(GetDirectChildren(player))) {<br/>  msg (&quot;&lt;br/&gt;{random&#58;You're carrying too much to move!&#58;You're juggling too many items!&#58;You cannot move, things are literally dropping out of your arms with every motion you make!} {once&#58;You'll need to find a container or to drop some of your current items&#46;} &lt;br/&gt;&quot;)<br/>}<br/>else if (exit&#46;locked) {<br/>  msg (exit&#46;lockmessage)<br/>}<br/>else if (HasScript(exit, &quot;script&quot;)) {<br/>  do (exit, &quot;script&quot;)<br/>}<br/>else {<br/>  if (exit&#46;lookonly) {<br/>    msg (&quot;You can't go there&#46;&quot;)<br/>  }<br/>  else {<br/>    player&#46;parent = exit&#46;to<br/>  }<br/>}</code></pre>",
      "PostDate": "2016-05-20T07:23:47+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42979",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "Not sure I get how this works. This is the relevant line:\n[code:151m8hl4]else if (player&#46;maxvolume &lt; ListCount(GetDirectChildren(player))) {[/code:151m8hl4]\nYou look like you are comparing the maxvolume to the number of items carried, and the number of items carried is not important, is it?\n\nI think if I was doing it I would create a function that adds up the volume carried, CalcVolume. Here is some code; it assumes a volume of 1 if there is none set for an object.\n[code:151m8hl4]vol = 0\nforeach (o, GetDirectChildren(player)) {\n  if (HasInt(o, &quot;volume&quot;))\n    vol = vol + o&#46;volume\n  }\n  else {\n    vol = vol + 1\n  }\n}\nreturn (vol)[/code:151m8hl4]\nThen compare the calculated volume with the maximum.\n[code:151m8hl4]else if (player&#46;maxvolume &lt; CalcVolume())) {[/code:151m8hl4]\nOnly change player.maxvolume if the player picks up or puts down a bag.",
      "EditableFormat": "bbcode",
      "HTML": "Not sure I get how this works. This is the relevant line:<br/><pre><code>else if (player&#46;maxvolume &lt; ListCount(GetDirectChildren(player))) {</code></pre><br/>You look like you are comparing the maxvolume to the number of items carried, and the number of items carried is not important, is it?<br/><br/>I think if I was doing it I would create a function that adds up the volume carried, CalcVolume. Here is some code; it assumes a volume of 1 if there is none set for an object.<br/><pre><code>vol = 0<br/>foreach (o, GetDirectChildren(player)) {<br/>  if (HasInt(o, &quot;volume&quot;))<br/>    vol = vol + o&#46;volume<br/>  }<br/>  else {<br/>    vol = vol + 1<br/>  }<br/>}<br/>return (vol)</code></pre><br/>Then compare the calculated volume with the maximum.<br/><pre><code>else if (player&#46;maxvolume &lt; CalcVolume())) {</code></pre><br/>Only change player.maxvolume if the player picks up or puts down a bag.",
      "PostDate": "2016-05-20T07:51:43+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42984",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "[quote:5lqldid6] I think if I was doing it I would create a function that adds up the volume carried, CalcVolume. Here is some code; it assumes a volume of 1 if there is none set for an object.[/quote:5lqldid6]\n\nThis would ordinarily be a great idea! But I have certain things like &quot;clothing&quot; and &quot;keys&quot; for example, that do not have volume, that way when the player wears something it doesn't count against their inventory capacity.  \n\n[quote:5lqldid6]Only change player.maxvolume if the player picks up or puts down a bag.[/quote:5lqldid6]\n\nI have items with volume subtract from the total of the max carry, so that the player can just look at their description and see how much space they have left. Containers increase that max carry amount <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> It actually works really good!  It works like this....\n\nStarting Player has a Max Carry Capacity of 3. \n[i:5lqldid6]Player picks up clothing or a key[/i:5lqldid6]. MCC still 3.\n[i:5lqldid6]Player pick up item with &quot;1&quot; volume[/i:5lqldid6]. MCC drops to 2. \n[i:5lqldid6]Player drops that item with &quot;1&quot; volume[/i:5lqldid6]. MCC increases to 3. \n[i:5lqldid6]Player picks up &quot;Container&quot;[/i:5lqldid6]. MCC increases to 6\n\nAnd so on. Make sense?\n\n[code:5lqldid6]else if (player&#46;maxvolume &lt; ListCount(GetDirectChildren(player))) {[/code:5lqldid6]\n\nSo what should I do with this, if I don't want it counting &quot;0&quot; or nothing? Since &quot;0&quot; isn't an option after unchecking the limited inventory thing in the game.object under Features.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><p> I think if I was doing it I would create a function that adds up the volume carried, CalcVolume. Here is some code; it assumes a volume of 1 if there is none set for an object.</p></blockquote><br/><br/>This would ordinarily be a great idea! But I have certain things like &quot;clothing&quot; and &quot;keys&quot; for example, that do not have volume, that way when the player wears something it doesn't count against their inventory capacity.  <br/><br/><blockquote><p>Only change player.maxvolume if the player picks up or puts down a bag.</p></blockquote><br/><br/>I have items with volume subtract from the total of the max carry, so that the player can just look at their description and see how much space they have left. Containers increase that max carry amount <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> It actually works really good!  It works like this....<br/><br/>Starting Player has a Max Carry Capacity of 3. <br/><span style=\"font-style:italic;\">Player picks up clothing or a key</span>. MCC still 3.<br/><span style=\"font-style:italic;\">Player pick up item with &quot;1&quot; volume</span>. MCC drops to 2. <br/><span style=\"font-style:italic;\">Player drops that item with &quot;1&quot; volume</span>. MCC increases to 3. <br/><span style=\"font-style:italic;\">Player picks up &quot;Container&quot;</span>. MCC increases to 6<br/><br/>And so on. Make sense?<br/><br/><pre><code>else if (player&#46;maxvolume &lt; ListCount(GetDirectChildren(player))) {</code></pre><br/><br/>So what should I do with this, if I don't want it counting &quot;0&quot; or nothing? Since &quot;0&quot; isn't an option after unchecking the limited inventory thing in the game.object under Features.",
      "PostDate": "2016-05-20T19:34:55+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42985",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "[quote=&quot;Anonynn&quot;:2z2tlo4f]This would ordinarily be a great idea! But I have certain things like &quot;clothing&quot; and &quot;keys&quot; for example, that do not have volume, that way when the player wears something it doesn't count against their inventory capacity.[/quote:2z2tlo4f]\nThat should be fine; give the keys or whatever a volume of zero.\n[quote:2z2tlo4f]I have items with volume subtract from the total of the max carry, so that the player can just look at their description and see how much space they have left. Containers increase that max carry amount <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> It actually works really good!  It works like this....\n\nStarting Player has a Max Carry Capacity of 3. \n[i:2z2tlo4f]Player picks up clothing or a key[/i:2z2tlo4f]. MCC still 3.\n[i:2z2tlo4f]Player pick up item with &quot;1&quot; volume[/i:2z2tlo4f]. MCC drops to 2. \n[i:2z2tlo4f]Player drops that item with &quot;1&quot; volume[/i:2z2tlo4f]. MCC increases to 3. \n[i:2z2tlo4f]Player picks up &quot;Container&quot;[/i:2z2tlo4f]. MCC increases to 6[/quote:2z2tlo4f]\nThat is what I thought. What I suggest is:\n\nStarting Player has a Max Carry Capacity of 3. Carried volume is 0.\n[i:2z2tlo4f]Player picks up clothing or a key[/i:2z2tlo4f]. MCC still 3. Carried volume is 0, because they have a volume of 0.\n[i:2z2tlo4f]Player pick up item with &quot;1&quot; volume[/i:2z2tlo4f]. MCC still 3. Carried volume is now 1. \n[i:2z2tlo4f]Player drops that item with &quot;1&quot; volume[/i:2z2tlo4f]. MCC still 3. Carried volume is 0. \n[i:2z2tlo4f]Player picks up &quot;Container&quot;[/i:2z2tlo4f]. MCC increases to 6.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>Anonynn wrote:</cite>This would ordinarily be a great idea! But I have certain things like &quot;clothing&quot; and &quot;keys&quot; for example, that do not have volume, that way when the player wears something it doesn't count against their inventory capacity.</blockquote><br/>That should be fine; give the keys or whatever a volume of zero.<br/><blockquote><p>I have items with volume subtract from the total of the max carry, so that the player can just look at their description and see how much space they have left. Containers increase that max carry amount <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> It actually works really good!  It works like this....<br/><br/>Starting Player has a Max Carry Capacity of 3. <br/><span style=\"font-style:italic;\">Player picks up clothing or a key</span>. MCC still 3.<br/><span style=\"font-style:italic;\">Player pick up item with &quot;1&quot; volume</span>. MCC drops to 2. <br/><span style=\"font-style:italic;\">Player drops that item with &quot;1&quot; volume</span>. MCC increases to 3. <br/><span style=\"font-style:italic;\">Player picks up &quot;Container&quot;</span>. MCC increases to 6</p></blockquote><br/>That is what I thought. What I suggest is:<br/><br/>Starting Player has a Max Carry Capacity of 3. Carried volume is 0.<br/><span style=\"font-style:italic;\">Player picks up clothing or a key</span>. MCC still 3. Carried volume is 0, because they have a volume of 0.<br/><span style=\"font-style:italic;\">Player pick up item with &quot;1&quot; volume</span>. MCC still 3. Carried volume is now 1. <br/><span style=\"font-style:italic;\">Player drops that item with &quot;1&quot; volume</span>. MCC still 3. Carried volume is 0. <br/><span style=\"font-style:italic;\">Player picks up &quot;Container&quot;</span>. MCC increases to 6.",
      "PostDate": "2016-05-20T19:47:50+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42986",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "[quote:3ewykgg6]Starting Player has a Max Carry Capacity of 3. Carried volume is 0.\nPlayer picks up clothing or a key. MCC still 3. Carried volume is 0, because they have a volume of 0.\nPlayer pick up item with &quot;1&quot; volume. MCC still 3. Carried volume is now 1.\nPlayer drops that item with &quot;1&quot; volume. MCC still 3. Carried volume is 0.\nPlayer picks up &quot;Container&quot;. MCC increases to 6.[/quote:3ewykgg6]\n\nSo...What should I change then? Confused @_@ Aside from not subtracting anything from the MCC.\n\nI ask because that doesn't really solve the problem. The game is counting &quot;0&quot; as &quot;1&quot;. So if the player carries &quot;3&quot; items that have &quot;0&quot; volume, they still get overburdened and can't move.\n\nI was thinking of changing player.maxvolume to player.maxweight --- so nothing gets associated with the game's built-in volume. I dunno.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><p>Starting Player has a Max Carry Capacity of 3. Carried volume is 0.<br/>Player picks up clothing or a key. MCC still 3. Carried volume is 0, because they have a volume of 0.<br/>Player pick up item with &quot;1&quot; volume. MCC still 3. Carried volume is now 1.<br/>Player drops that item with &quot;1&quot; volume. MCC still 3. Carried volume is 0.<br/>Player picks up &quot;Container&quot;. MCC increases to 6.</p></blockquote><br/><br/>So...What should I change then? Confused @_@ Aside from not subtracting anything from the MCC.<br/><br/>I ask because that doesn't really solve the problem. The game is counting &quot;0&quot; as &quot;1&quot;. So if the player carries &quot;3&quot; items that have &quot;0&quot; volume, they still get overburdened and can't move.<br/><br/>I was thinking of changing player.maxvolume to player.maxweight --- so nothing gets associated with the game's built-in volume. I dunno.",
      "PostDate": "2016-05-20T21:23:01+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42990",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "So create the function CalcVolume as in my first post, of the type Int. I found all objects have a default volume of zero, so the code is not as long:\n[code:1i8xqr1p]vol = 0\nforeach (o, GetDirectChildren(player)) {\n  vol = vol + o&#46;volume\n}\nreturn (vol)[/code:1i8xqr1p]\n\nChange this:\nelse if (player.maxvolume &lt; ListCount(GetDirectChildren(player))) {\n... to this (I had an extraneous bracket before, by the way):\nelse if (player.maxvolume &lt; CalcVolume()) {\n\nMake sure all your zero volume items have volume set to zero. When I tried it it works, except that the built in system will not let you even pick up stuff that would take you over the maximum.\n[quote:1i8xqr1p]I was thinking of changing player.maxvolume to player.maxweight --- so nothing gets associated with the game's built-in volume. I dunno.[/quote:1i8xqr1p]\nGood idea. You will need to delete the maxvolume attribute on the player. I would add one called maximumvolume, then use the built-in volume attribute of the objects. The line in Go becomes:\nelse if (player.maximumvolume &lt; CalcVolume()) {",
      "EditableFormat": "bbcode",
      "HTML": "So create the function CalcVolume as in my first post, of the type Int. I found all objects have a default volume of zero, so the code is not as long:<br/><pre><code>vol = 0<br/>foreach (o, GetDirectChildren(player)) {<br/>  vol = vol + o&#46;volume<br/>}<br/>return (vol)</code></pre><br/><br/>Change this:<br/>else if (player.maxvolume &lt; ListCount(GetDirectChildren(player))) {<br/>... to this (I had an extraneous bracket before, by the way):<br/>else if (player.maxvolume &lt; CalcVolume()) {<br/><br/>Make sure all your zero volume items have volume set to zero. When I tried it it works, except that the built in system will not let you even pick up stuff that would take you over the maximum.<br/><blockquote><p>I was thinking of changing player.maxvolume to player.maxweight --- so nothing gets associated with the game's built-in volume. I dunno.</p></blockquote><br/>Good idea. You will need to delete the maxvolume attribute on the player. I would add one called maximumvolume, then use the built-in volume attribute of the objects. The line in Go becomes:<br/>else if (player.maximumvolume &lt; CalcVolume()) {",
      "PostDate": "2016-05-20T23:48:20+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "42992",
      "UserId": 0,
      "Username": "Anonynn",
      "UserAvatar": "7661_1463890118.jpg",
      "UserGravatar": "2eea18890a69714beb5b926a7b559e64",
      "EditableText": "Great! That worked like a charm! Thank you Pix!! Sorry for bothering you with something so dumb @_@",
      "EditableFormat": "bbcode",
      "HTML": "Great! That worked like a charm! Thank you Pix!! Sorry for bothering you with something so dumb @_@",
      "PostDate": "2016-05-21T04:54:01+01:00",
      "LastEditDate": null
    }
  ]
}
