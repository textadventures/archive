{
  "Topic": {
    "TopicId": "b8xwnidaaea2u_di5qn11q",
    "ForumId": "10",
    "Title": "Is there any way to reduce the clutter when objects are listed?",
    "LastUpdated": "2018-10-27T19:19:31.9663464Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "48a58ef4-c98f-4d07-96fd-93b25cd7132d",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "PROBLEM:\r\nI am trying to make a game which pretty much tries to simulate SCUMM interface by removing the command bar and designing the whole game around only 10 words. All the words work nicely, but when I need to use object A with object B through command \"usewith\", I usually get a list of all the objects in the room + all the objects in my inventory to choose from. This is not an issue when I have only a few objects in my inventory, but eventually the list becomes a cluttered mess to the point it is very hard to even find an object I am looking for. \r\n\r\nQUESTION:\r\nIs there any way to reduce the clutter, so that when I use the word USE I get only the list of objects in the room, and when I use word COMBINE that I only get a list of inventory objects to choose from? Or at the very list just sort the listed items so that they are clearly divided into two sections - the ones in the world and the ones in my inventory. Even painting them in different color would be helpful.\r\n\r\nI think this would reduce the clutter a lot! Thanks in advance to anyone who can help me with this.",
      "EditableFormat": "markdown",
      "HTML": "<p>PROBLEM:<br>\nI am trying to make a game which pretty much tries to simulate SCUMM interface by removing the command bar and designing the whole game around only 10 words. All the words work nicely, but when I need to use object A with object B through command \"usewith\", I usually get a list of all the objects in the room + all the objects in my inventory to choose from. This is not an issue when I have only a few objects in my inventory, but eventually the list becomes a cluttered mess to the point it is very hard to even find an object I am looking for.</p>\n<p>QUESTION:<br>\nIs there any way to reduce the clutter, so that when I use the word USE I get only the list of objects in the room, and when I use word COMBINE that I only get a list of inventory objects to choose from? Or at the very list just sort the listed items so that they are clearly divided into two sections - the ones in the world and the ones in my inventory. Even painting them in different color would be helpful.</p>\n<p>I think this would reduce the clutter a lot! Thanks in advance to anyone who can help me with this.</p>\n\n",
      "PostDate": "2018-10-27T19:19:31.9663464Z",
      "LastEditDate": "2018-10-27T19:23:50.9364992Z",
      "link": null
    },
    {
      "PostId": "92b2293d-53a0-44da-b723-bc094d5fe0c6",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Come on guys... please just a bit of help here... ðŸ˜§",
      "EditableFormat": "markdown",
      "HTML": "<p>Come on guys... please just a bit of help here... ðŸ˜§</p>\n\n",
      "PostDate": "2018-10-28T06:10:08.3294781Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8ff556b9-c3d4-44cb-b424-21e1bd1c00f2",
      "UserId": 348994,
      "Username": "CheeseMyBaby",
      "AvatarUrl": "https://i.imgur.com/c5nBbAgb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have no idea how to solve this. I hope you get help though 'cause it sounds cool. Love SCUMM!!",
      "EditableFormat": "markdown",
      "HTML": "<p>I have no idea how to solve this. I hope you get help though 'cause it sounds cool. Love SCUMM!!</p>\n\n",
      "PostDate": "2018-10-28T06:47:33.6767088Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d34c9933-1ee5-427d-b26d-3e546057a6f5",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Well after 7 hours of thinking and searching through these forums, I couldnt find what I was looking for, but then I got a vague idea how I might sidestep this issue. Namely I could upon choosing the USE command make a script that makes all pickable objects invisible and then make them visible again after the action is complete. Then I could do the same with COMBINE command, only I would make the world objects invisible. The problem is, I think this will be very hard to keep track of, because I will need to go retroactively back into every room and change this for every new object I make. I am hoping someone might have a better way how to program it, so I dont have to constantly keep track of things. Like, maybe there is a simple function or code to make all items I am carrying make invisible. I think that would pretty much solve my problem. \r\n\r\nSo basically all I need is one line of code to make my inventory objects invisible and then visible again. And then onle line of code to make all the world objects visible/invisible again. \r\n\r\nAnyone? Please...",
      "EditableFormat": "markdown",
      "HTML": "<p>Well after 7 hours of thinking and searching through these forums, I couldnt find what I was looking for, but then I got a vague idea how I might sidestep this issue. Namely I could upon choosing the USE command make a script that makes all pickable objects invisible and then make them visible again after the action is complete. Then I could do the same with COMBINE command, only I would make the world objects invisible. The problem is, I think this will be very hard to keep track of, because I will need to go retroactively back into every room and change this for every new object I make. I am hoping someone might have a better way how to program it, so I dont have to constantly keep track of things. Like, maybe there is a simple function or code to make all items I am carrying make invisible. I think that would pretty much solve my problem.</p>\n<p>So basically all I need is one line of code to make my inventory objects invisible and then visible again. And then onle line of code to make all the world objects visible/invisible again.</p>\n<p>Anyone? Please...</p>\n\n",
      "PostDate": "2018-10-28T07:58:52.161818Z",
      "LastEditDate": "2018-10-28T08:08:46.6411871Z",
      "link": null
    },
    {
      "PostId": "1b2d4fbb-f8c1-46e6-9a2c-4b7dee99be03",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Are you making your own \"Use\" command, or using the built-in one?\r\n\r\nIf you're using the built in \"use\" command, you can customise the \"what do you want to use it on?\" menu by overriding this function:\r\n```\r\n  <function name=\"CreateUseMenuList\" parameters=\"object\" type=\"objectlist\">\r\n    objectlist = NewObjectList()\r\n    objectlist = ScopeReachableNotHeld()\r\n    excludelist = NewObjectList()\r\n    list add (excludelist, game.pov)\r\n    list add (excludelist, object)\r\n    candidates = NewObjectList()\r\n    candidates = ListExclude(RemoveSceneryObjects(objectlist), excludelist)\r\n    return (candidates)\r\n  </function>\r\n```\r\n\r\nIf you're making your own \"use\" command, you could just change the code so it only displays the objects you want in the menu.\r\n\r\n**Or** if you want to dispense with the menu entirely, you could replace the use command with:\r\n```\r\n<command name=\"use\" template=\"use\"><![CDATA[\r\n  if (HasScript(object, \"use\")) {\r\n    do (object, \"use\")\r\n  }\r\n  else {\r\n    if (GetBoolean(object, \"use\")) {\r\n      candidates = CreateUseMenuList (object)\r\n      if (ListCount(candidates) = 0) {\r\n        msg (Template(\"NoObjectsAvailable\"))\r\n      }\r\n      else {\r\n        if (HasString(object, \"usemenuprompt\")) {\r\n          msg (object.usemenuprompt)\r\n        }\r\n        else {\r\n          msg (\"Now click the object you want to use it on.\")\r\n        }\r\n        game.pov.usemenuobject = object\r\n        game.suppressturnscripts = true\r\n        SetTurnTimeout (2) {\r\n          game.pov.usemenuobject = null\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      msg (DynamicTemplate(\"CantUse\", object))\r\n    }\r\n  }\r\n  ]]></command>\r\n```\r\nand override this function:\r\n```\r\n  <function name=\"GetDisplayVerbs\" parameters=\"object\" type=\"stringlist\">\r\n    if (Contains(game.pov, object)) {\r\n      baselist = object.inventoryverbs\r\n      multiverb = \"combine\"\r\n    }\r\n    else {\r\n      baselist = object.displayverbs\r\n      multiverb = \"use\"\r\n    }\r\n\r\n    if (not game.autodisplayverbs or GetBoolean(object, \"usestandardverblist\") or not HasAttribute(game, \"verbattributes\")) {\r\n      return (baselist)\r\n    }\r\n    else {\r\n      if (HasObject (game.pov, multiverb+\"menuobject\")) {\r\n        multiobj = GetAttribute (game.pov, multiverb+\"menuobject\")\r\n        if (not multiobj = object) {\r\n          baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)\r\n        }\r\n      }\r\n\r\n      if (HasAttribute(object, \"generatedverbslist\")) {\r\n        verbs = object.generatedverbslist\r\n      }\r\n      else {\r\n        verbs = NewStringList()\r\n        foreach (attr, GetAttributeNames(object, false)) {\r\n          if (ListContains(game.verbattributes, attr)) {\r\n            cmd = ObjectDictionaryItem(game.verbattributeslookup, attr)\r\n            if (HasString(cmd, \"displayverb\")) {\r\n              displayverb = CapFirst(cmd.displayverb)\r\n            }\r\n            else {\r\n              displayverb = CapFirst(attr)\r\n            }\r\n            if (not ListContains(baselist, displayverb)) {\r\n              list add (verbs, displayverb)\r\n            }\r\n          }\r\n        }\r\n        object.generatedverbslist = verbs\r\n      }\r\n      if (GetBoolean(object, \"useindividualverblist\")) {\r\n        return (verbs)\r\n      }\r\n      else {\r\n        return (ListCombine(baselist, verbs))\r\n      } \r\n    }\r\n  </function>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Are you making your own \"Use\" command, or using the built-in one?</p>\n<p>If you're using the built in \"use\" command, you can customise the \"what do you want to use it on?\" menu by overriding this function:</p>\n<pre><code>  &lt;function name=\"CreateUseMenuList\" parameters=\"object\" type=\"objectlist\"&gt;\n    objectlist = NewObjectList()\n    objectlist = ScopeReachableNotHeld()\n    excludelist = NewObjectList()\n    list add (excludelist, game.pov)\n    list add (excludelist, object)\n    candidates = NewObjectList()\n    candidates = ListExclude(RemoveSceneryObjects(objectlist), excludelist)\n    return (candidates)\n  &lt;/function&gt;\n</code></pre>\n<p>If you're making your own \"use\" command, you could just change the code so it only displays the objects you want in the menu.</p>\n<p><strong>Or</strong> if you want to dispense with the menu entirely, you could replace the use command with:</p>\n<pre><code>&lt;command name=\"use\" template=\"use\"&gt;&lt;![CDATA[\n  if (HasScript(object, \"use\")) {\n    do (object, \"use\")\n  }\n  else {\n    if (GetBoolean(object, \"use\")) {\n      candidates = CreateUseMenuList (object)\n      if (ListCount(candidates) = 0) {\n        msg (Template(\"NoObjectsAvailable\"))\n      }\n      else {\n        if (HasString(object, \"usemenuprompt\")) {\n          msg (object.usemenuprompt)\n        }\n        else {\n          msg (\"Now click the object you want to use it on.\")\n        }\n        game.pov.usemenuobject = object\n        game.suppressturnscripts = true\n        SetTurnTimeout (2) {\n          game.pov.usemenuobject = null\n        }\n      }\n    }\n    else {\n      msg (DynamicTemplate(\"CantUse\", object))\n    }\n  }\n  ]]&gt;&lt;/command&gt;\n</code></pre>\n<p>and override this function:</p>\n<pre><code>  &lt;function name=\"GetDisplayVerbs\" parameters=\"object\" type=\"stringlist\"&gt;\n    if (Contains(game.pov, object)) {\n      baselist = object.inventoryverbs\n      multiverb = \"combine\"\n    }\n    else {\n      baselist = object.displayverbs\n      multiverb = \"use\"\n    }\n\n    if (not game.autodisplayverbs or GetBoolean(object, \"usestandardverblist\") or not HasAttribute(game, \"verbattributes\")) {\n      return (baselist)\n    }\n    else {\n      if (HasObject (game.pov, multiverb+\"menuobject\")) {\n        multiobj = GetAttribute (game.pov, multiverb+\"menuobject\")\n        if (not multiobj = object) {\n          baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)\n        }\n      }\n\n      if (HasAttribute(object, \"generatedverbslist\")) {\n        verbs = object.generatedverbslist\n      }\n      else {\n        verbs = NewStringList()\n        foreach (attr, GetAttributeNames(object, false)) {\n          if (ListContains(game.verbattributes, attr)) {\n            cmd = ObjectDictionaryItem(game.verbattributeslookup, attr)\n            if (HasString(cmd, \"displayverb\")) {\n              displayverb = CapFirst(cmd.displayverb)\n            }\n            else {\n              displayverb = CapFirst(attr)\n            }\n            if (not ListContains(baselist, displayverb)) {\n              list add (verbs, displayverb)\n            }\n          }\n        }\n        object.generatedverbslist = verbs\n      }\n      if (GetBoolean(object, \"useindividualverblist\")) {\n        return (verbs)\n      }\n      else {\n        return (ListCombine(baselist, verbs))\n      } \n    }\n  &lt;/function&gt;\n</code></pre>\n\n",
      "PostDate": "2018-10-28T10:22:44.49201Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8a90397b-610d-4c92-baf8-66fb3a2110e4",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks for your help again, Mrangel. The option to skip the menus altogether would be perfect, but I am not sure if I know how to do this - even with the script you posted. So if I am getting your instructions correctly, you want me to:\r\nStep 1: Show the hidden library elements\r\nStep 2: Find the \"Use\" command and make a copy of it\r\nStep 3: Copy this over it:\r\n```\r\nif (HasScript(object, \"use\")) {\r\n    do (object, \"use\")\r\n  }\r\n  else {\r\n    if (GetBoolean(object, \"use\")) {\r\n      candidates = CreateUseMenuList (object)\r\n      if (ListCount(candidates) = 0) {\r\n        msg (Template(\"NoObjectsAvailable\"))\r\n      }\r\n      else {\r\n        if (HasString(object, \"usemenuprompt\")) {\r\n          msg (object.usemenuprompt)\r\n        }\r\n        else {\r\n          msg (\"Now click the object you want to use it on.\")\r\n        }\r\n        game.pov.usemenuobject = object\r\n        game.suppressturnscripts = true\r\n        SetTurnTimeout (2) {\r\n          game.pov.usemenuobject = null\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      msg (DynamicTemplate(\"CantUse\", object))\r\n    }\r\n  }\r\n  ]]></command>\r\n```\r\nStep 4: Find the hidden function called \"GetDisplayVerbs\" and copy over it this here part:\r\n```\r\nif (Contains(game.pov, object)) {\r\n      baselist = object.inventoryverbs\r\n      multiverb = \"combine\"\r\n    }\r\n    else {\r\n      baselist = object.displayverbs\r\n      multiverb = \"use\"\r\n    }\r\n\r\n    if (not game.autodisplayverbs or GetBoolean(object, \"usestandardverblist\") or not HasAttribute(game, \"verbattributes\")) {\r\n      return (baselist)\r\n    }\r\n    else {\r\n      if (HasObject (game.pov, multiverb+\"menuobject\")) {\r\n        multiobj = GetAttribute (game.pov, multiverb+\"menuobject\")\r\n        if (not multiobj = object) {\r\n          baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)\r\n        }\r\n      }\r\n\r\n      if (HasAttribute(object, \"generatedverbslist\")) {\r\n        verbs = object.generatedverbslist\r\n      }\r\n      else {\r\n        verbs = NewStringList()\r\n        foreach (attr, GetAttributeNames(object, false)) {\r\n          if (ListContains(game.verbattributes, attr)) {\r\n            cmd = ObjectDictionaryItem(game.verbattributeslookup, attr)\r\n            if (HasString(cmd, \"displayverb\")) {\r\n              displayverb = CapFirst(cmd.displayverb)\r\n            }\r\n            else {\r\n              displayverb = CapFirst(attr)\r\n            }\r\n            if (not ListContains(baselist, displayverb)) {\r\n              list add (verbs, displayverb)\r\n            }\r\n          }\r\n        }\r\n        object.generatedverbslist = verbs\r\n      }\r\n      if (GetBoolean(object, \"useindividualverblist\")) {\r\n        return (verbs)\r\n      }\r\n      else {\r\n        return (ListCombine(baselist, verbs))\r\n      } \r\n    }\r\n  </function>\r\n```\r\nI tried doing that, but when I start the game, I get this error:\r\nFailed to load game.\r\nThe following errors occurred:\r\nError: Error adding script attribute 'script' to element 'use': Function not found: ']]>'\r\n\r\nNow, perhaps I am not really following your instructions correctly, or maybe there is a typo in your script. Either way, I am stuck and this is the last part I need to finally be able to start making the game at a faster pace.\r\n\r\nWould it be too much to ask if you look at my game and try to implement that code into it? Or maybe just try clarifying in a bit more detail what I need to do. It's really frustrating when I spend a weekend pretty much stuck and not being able to move forward. I hoped I would actually be able to make a whole another section for my game. :(\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks for your help again, Mrangel. The option to skip the menus altogether would be perfect, but I am not sure if I know how to do this - even with the script you posted. So if I am getting your instructions correctly, you want me to:<br>\nStep 1: Show the hidden library elements<br>\nStep 2: Find the \"Use\" command and make a copy of it<br>\nStep 3: Copy this over it:</p>\n<pre><code>if (HasScript(object, \"use\")) {\n    do (object, \"use\")\n  }\n  else {\n    if (GetBoolean(object, \"use\")) {\n      candidates = CreateUseMenuList (object)\n      if (ListCount(candidates) = 0) {\n        msg (Template(\"NoObjectsAvailable\"))\n      }\n      else {\n        if (HasString(object, \"usemenuprompt\")) {\n          msg (object.usemenuprompt)\n        }\n        else {\n          msg (\"Now click the object you want to use it on.\")\n        }\n        game.pov.usemenuobject = object\n        game.suppressturnscripts = true\n        SetTurnTimeout (2) {\n          game.pov.usemenuobject = null\n        }\n      }\n    }\n    else {\n      msg (DynamicTemplate(\"CantUse\", object))\n    }\n  }\n  ]]&gt;&lt;/command&gt;\n</code></pre>\n<p>Step 4: Find the hidden function called \"GetDisplayVerbs\" and copy over it this here part:</p>\n<pre><code>if (Contains(game.pov, object)) {\n      baselist = object.inventoryverbs\n      multiverb = \"combine\"\n    }\n    else {\n      baselist = object.displayverbs\n      multiverb = \"use\"\n    }\n\n    if (not game.autodisplayverbs or GetBoolean(object, \"usestandardverblist\") or not HasAttribute(game, \"verbattributes\")) {\n      return (baselist)\n    }\n    else {\n      if (HasObject (game.pov, multiverb+\"menuobject\")) {\n        multiobj = GetAttribute (game.pov, multiverb+\"menuobject\")\n        if (not multiobj = object) {\n          baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)\n        }\n      }\n\n      if (HasAttribute(object, \"generatedverbslist\")) {\n        verbs = object.generatedverbslist\n      }\n      else {\n        verbs = NewStringList()\n        foreach (attr, GetAttributeNames(object, false)) {\n          if (ListContains(game.verbattributes, attr)) {\n            cmd = ObjectDictionaryItem(game.verbattributeslookup, attr)\n            if (HasString(cmd, \"displayverb\")) {\n              displayverb = CapFirst(cmd.displayverb)\n            }\n            else {\n              displayverb = CapFirst(attr)\n            }\n            if (not ListContains(baselist, displayverb)) {\n              list add (verbs, displayverb)\n            }\n          }\n        }\n        object.generatedverbslist = verbs\n      }\n      if (GetBoolean(object, \"useindividualverblist\")) {\n        return (verbs)\n      }\n      else {\n        return (ListCombine(baselist, verbs))\n      } \n    }\n  &lt;/function&gt;\n</code></pre>\n<p>I tried doing that, but when I start the game, I get this error:<br>\nFailed to load game.<br>\nThe following errors occurred:<br>\nError: Error adding script attribute 'script' to element 'use': Function not found: ']]&gt;'</p>\n<p>Now, perhaps I am not really following your instructions correctly, or maybe there is a typo in your script. Either way, I am stuck and this is the last part I need to finally be able to start making the game at a faster pace.</p>\n<p>Would it be too much to ask if you look at my game and try to implement that code into it? Or maybe just try clarifying in a bit more detail what I need to do. It's really frustrating when I spend a weekend pretty much stuck and not being able to move forward. I hoped I would actually be able to make a whole another section for my game. :(</p>\n\n",
      "PostDate": "2018-10-28T11:44:43.7255771Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "61a568ad-f106-45d7-952b-5df86b0ffb0c",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Actually, I managed to get the script to at least run. Now I am testing it. I didnt know which parts to copy from your code, so I copied the whole thing. Didn't know I have to remove the header and footnote section.\r\n\r\nWill report how it goes. Hopefully it works.\r\n\r\n----\r\nEdit: Well, the game works, but I am not noticing any difference. I am not sure what your script changed. I still get a menu and everything works pretty much the same as before.\r\n\r\nAgain, I am probably just doing something wrong. Or maybe I need to use the script in a specific way? Help, please!\r\n\r\n--- \r\n\r\nEdit2: Same thing happens when I try your first suggestion. I dont see any difference.",
      "EditableFormat": "markdown",
      "HTML": "<p>Actually, I managed to get the script to at least run. Now I am testing it. I didnt know which parts to copy from your code, so I copied the whole thing. Didn't know I have to remove the header and footnote section.</p>\n<p>Will report how it goes. Hopefully it works.</p>\n<hr>\n<p>Edit: Well, the game works, but I am not noticing any difference. I am not sure what your script changed. I still get a menu and everything works pretty much the same as before.</p>\n<p>Again, I am probably just doing something wrong. Or maybe I need to use the script in a specific way? Help, please!</p>\n<hr>\n<p>Edit2: Same thing happens when I try your first suggestion. I dont see any difference.</p>\n\n",
      "PostDate": "2018-10-28T11:55:06.0778946Z",
      "LastEditDate": "2018-10-28T12:14:00.8354813Z",
      "link": null
    },
    {
      "PostId": "5fefcee6-1030-464c-a6f0-4529c8452ec5",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Edit3: Still no luck :(",
      "EditableFormat": "markdown",
      "HTML": "<p>Edit3: Still no luck :(</p>\n\n",
      "PostDate": "2018-10-28T13:49:41.8078969Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "68af0a7f-c8ef-4c74-a685-e4d943e6b2b8",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Where are you seeing the menu?\r\n\r\nThose scripts were something I'd thought about for my own game, to be more like how it works in some of the older games (SCUMM and similar). I never got around to testing it, though.\r\n\r\nThe \"use\" command is the one that runs when the player inputs \"use spanner\", whether by typing it in the command bar or by clicking on the spanner. If you have those scripts, when you use an object whose type on the Use/Give tab is \"Display menu of objects this can be used on\", the modified command should mean that rather than showing a menu, it just says \"Now click the object you want to use it on.\"\r\n\r\nThen when you click another non-inventory object, the modified GetDisplayVerbs function would cause \"Use spanner on\" to be added to the beginning of the verbs list (either the drop-down when you click an object name in the text, or the buttons under the 'Places and Objects' pane in the sidebar).\r\n\r\nIf you're still seeing the menu, there must be something I've missed.",
      "EditableFormat": "markdown",
      "HTML": "<p>Where are you seeing the menu?</p>\n<p>Those scripts were something I'd thought about for my own game, to be more like how it works in some of the older games (SCUMM and similar). I never got around to testing it, though.</p>\n<p>The \"use\" command is the one that runs when the player inputs \"use spanner\", whether by typing it in the command bar or by clicking on the spanner. If you have those scripts, when you use an object whose type on the Use/Give tab is \"Display menu of objects this can be used on\", the modified command should mean that rather than showing a menu, it just says \"Now click the object you want to use it on.\"</p>\n<p>Then when you click another non-inventory object, the modified GetDisplayVerbs function would cause \"Use spanner on\" to be added to the beginning of the verbs list (either the drop-down when you click an object name in the text, or the buttons under the 'Places and Objects' pane in the sidebar).</p>\n<p>If you're still seeing the menu, there must be something I've missed.</p>\n\n",
      "PostDate": "2018-10-28T14:51:30.2317882Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f3bd1b2a-e027-4017-8f97-eda431e7913e",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Since I am not using the command bar, the only way I can use objects on their own or on other objects is through making custom  verbs like \"useon\" or \"combinewith\". Then I usually get a menu with all the items I can interact with which are all the objects in the room, all the NPCs and all my inventory items. It's quite a mess as you can imagine. Almost unplayable when you have 15-20 objects in your inventory, so I really need your script to work. :(\r\n\r\nI dont know what you did, but the game behaves exactly as by default. There is no difference from what I am noticing, but then again, maybe I am doing something wrong. I explained to you the steps I made, so you tell me?\r\n\r\nI'm really frustrated. I have spent 2 days on this and no move forward... :(\r\n\r\n---\r\nEdit: I tried making a completely new test game now and I did the steps as I described in my previous post, and again the same resault. Damn! I would really love to skip the menu altogether and use items as in a SCUMM game. There must be something I am missing, or maybe your script isnt working as you were planning.",
      "EditableFormat": "markdown",
      "HTML": "<p>Since I am not using the command bar, the only way I can use objects on their own or on other objects is through making custom  verbs like \"useon\" or \"combinewith\". Then I usually get a menu with all the items I can interact with which are all the objects in the room, all the NPCs and all my inventory items. It's quite a mess as you can imagine. Almost unplayable when you have 15-20 objects in your inventory, so I really need your script to work. :(</p>\n<p>I dont know what you did, but the game behaves exactly as by default. There is no difference from what I am noticing, but then again, maybe I am doing something wrong. I explained to you the steps I made, so you tell me?</p>\n<p>I'm really frustrated. I have spent 2 days on this and no move forward... :(</p>\n<hr>\n<p>Edit: I tried making a completely new test game now and I did the steps as I described in my previous post, and again the same resault. Damn! I would really love to skip the menu altogether and use items as in a SCUMM game. There must be something I am missing, or maybe your script isnt working as you were planning.</p>\n\n",
      "PostDate": "2018-10-28T15:21:38.6516595Z",
      "LastEditDate": "2018-10-28T15:39:41.953798Z",
      "link": null
    },
    {
      "PostId": "720ab6f1-60a4-4af5-8b4b-30fa8439a2b4",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Maybe if you can make a short demo and upload it, i can go in and look what you did? Then I can just copy it into my game. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Maybe if you can make a short demo and upload it, i can go in and look what you did? Then I can just copy it into my game.</p>\n\n",
      "PostDate": "2018-10-28T16:00:21.8362922Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "26d3eac5-4d91-4abe-8167-8ec733e20460",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "There is a default verb \"use\" which can be made to display a list of all objects, asking what you want to use the object on. It then runs the default \"useon\" verb.\r\n\r\nIf you've made your own \"useon\" verb, then whatever menu it displays will be the menu you have told it to display, not the standard 'use on' menu.\r\n\r\nI can tell you how to modify the standard \"use\" command to work as you asked. But I can't tell you how to modify _your_ useon command, because I can't see your useon command.",
      "EditableFormat": "markdown",
      "HTML": "<p>There is a default verb \"use\" which can be made to display a list of all objects, asking what you want to use the object on. It then runs the default \"useon\" verb.</p>\n<p>If you've made your own \"useon\" verb, then whatever menu it displays will be the menu you have told it to display, not the standard 'use on' menu.</p>\n<p>I can tell you how to modify the standard \"use\" command to work as you asked. But I can't tell you how to modify <em>your</em> useon command, because I can't see your useon command.</p>\n\n",
      "PostDate": "2018-10-28T17:54:33.0976328Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "7f201713-1f5f-4661-a155-cae482fa7529",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I tried using the default verb too. I got exactly the same result. Here is my whole code from the new test game, so you can tell me if I did anything wrong. You help me fix this and I'll make you a character in my game :)\r\n```\r\n<!--Saved by Quest 5.8.6836.13983-->\r\n<asl version=\"580\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Test\">\r\n    <gameid>ceb00cba-a4c7-4ce5-82f3-e71892119160</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n  </game>\r\n  <command name=\"use\">\r\n    <pattern>use #object#</pattern>\r\n    <script>\r\n      if (HasScript(object, \"use\")) {\r\n        do (object, \"use\")\r\n      }\r\n      else {\r\n        if (GetBoolean(object, \"use\")) {\r\n          candidates = CreateUseMenuList (object)\r\n          if (ListCount(candidates) = 0) {\r\n            msg (Template(\"NoObjectsAvailable\"))\r\n          }\r\n          else {\r\n            if (HasString(object, \"usemenuprompt\")) {\r\n              msg (object.usemenuprompt)\r\n            }\r\n            else {\r\n              msg (\"Now click the object you want to use it on.\")\r\n            }\r\n            game.pov.usemenuobject = object\r\n            game.suppressturnscripts = true\r\n            SetTurnTimeout (2) {\r\n              game.pov.usemenuobject = null\r\n            }\r\n          }\r\n        }\r\n        else {\r\n          msg (DynamicTemplate(\"CantUse\", object))\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <isroom />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"A\">\r\n      <inherit name=\"editor_object\" />\r\n      <take />\r\n      <feature_usegive />\r\n      <use type=\"script\">\r\n        msg (\"Success on self.\")\r\n      </use>\r\n      <selfuseon type=\"scriptdictionary\">\r\n        <item key=\"B\">\r\n          msg (\"Success on B.\")\r\n        </item>\r\n      </selfuseon>\r\n    </object>\r\n    <object name=\"B\">\r\n      <inherit name=\"editor_object\" />\r\n    </object>\r\n  </object>\r\n  <function name=\"GetDisplayVerbs\" parameters=\"object\" type=\"stringlist\">\r\n    if (Contains(game.pov, object)) {\r\n      baselist = object.inventoryverbs\r\n      multiverb = \"combine\"\r\n    }\r\n    else {\r\n      baselist = object.displayverbs\r\n      multiverb = \"use\"\r\n    }\r\n    if (not game.autodisplayverbs or GetBoolean(object, \"usestandardverblist\") or not HasAttribute(game, \"verbattributes\")) {\r\n      return (baselist)\r\n    }\r\n    else {\r\n      if (HasObject (game.pov, multiverb+\"menuobject\")) {\r\n        multiobj = GetAttribute (game.pov, multiverb+\"menuobject\")\r\n        if (not multiobj = object) {\r\n          baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)\r\n        }\r\n      }\r\n      if (HasAttribute(object, \"generatedverbslist\")) {\r\n        verbs = object.generatedverbslist\r\n      }\r\n      else {\r\n        verbs = NewStringList()\r\n        foreach (attr, GetAttributeNames(object, false)) {\r\n          if (ListContains(game.verbattributes, attr)) {\r\n            cmd = ObjectDictionaryItem(game.verbattributeslookup, attr)\r\n            if (HasString(cmd, \"displayverb\")) {\r\n              displayverb = CapFirst(cmd.displayverb)\r\n            }\r\n            else {\r\n              displayverb = CapFirst(attr)\r\n            }\r\n            if (not ListContains(baselist, displayverb)) {\r\n              list add (verbs, displayverb)\r\n            }\r\n          }\r\n        }\r\n        object.generatedverbslist = verbs\r\n      }\r\n      if (GetBoolean(object, \"useindividualverblist\")) {\r\n        return (verbs)\r\n      }\r\n      else {\r\n        return (ListCombine(baselist, verbs))\r\n      }\r\n    }\r\n  </function>\r\n</asl>\r\n```\r\n\r\n---\r\nEdit: I tried looking a bit deeper into your script and although it's like trying to decipher hieroglyphics to me, I did notice the line: if (GetBoolean(object, \"use\")) {\r\n\r\nThat line in the UI view looks like: if, object has flag, expression: object, flag name: use\r\nSo I tried adding a flag named \"use\" when using the object and I finally made a small breakthrough, but it still doesn't work. I get this error:\r\nNow click the object you want to use it on.\r\nError running script: Error compiling expression 'ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)': Unknown object or variable 'uselist'\r\nError running script: Error evaluating expression 'Join(GetDisplayVerbs(object), \"/\")': Value cannot be null.Parameter name: values\r\nError running script: Error compiling expression 'ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)': Unknown object or variable 'uselist'\r\nError running script: Error compiling expression 'ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)': Unknown object or variable 'uselist'\r\n\r\nAt the very least I managed to get the message: Now click the object you want to use it on. :)",
      "EditableFormat": "markdown",
      "HTML": "<p>I tried using the default verb too. I got exactly the same result. Here is my whole code from the new test game, so you can tell me if I did anything wrong. You help me fix this and I'll make you a character in my game :)</p>\n<pre><code>&lt;!--Saved by Quest 5.8.6836.13983--&gt;\n&lt;asl version=\"580\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Test\"&gt;\n    &lt;gameid&gt;ceb00cba-a4c7-4ce5-82f3-e71892119160&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2018&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;command name=\"use\"&gt;\n    &lt;pattern&gt;use #object#&lt;/pattern&gt;\n    &lt;script&gt;\n      if (HasScript(object, \"use\")) {\n        do (object, \"use\")\n      }\n      else {\n        if (GetBoolean(object, \"use\")) {\n          candidates = CreateUseMenuList (object)\n          if (ListCount(candidates) = 0) {\n            msg (Template(\"NoObjectsAvailable\"))\n          }\n          else {\n            if (HasString(object, \"usemenuprompt\")) {\n              msg (object.usemenuprompt)\n            }\n            else {\n              msg (\"Now click the object you want to use it on.\")\n            }\n            game.pov.usemenuobject = object\n            game.suppressturnscripts = true\n            SetTurnTimeout (2) {\n              game.pov.usemenuobject = null\n            }\n          }\n        }\n        else {\n          msg (DynamicTemplate(\"CantUse\", object))\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;isroom /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;object name=\"A\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;take /&gt;\n      &lt;feature_usegive /&gt;\n      &lt;use type=\"script\"&gt;\n        msg (\"Success on self.\")\n      &lt;/use&gt;\n      &lt;selfuseon type=\"scriptdictionary\"&gt;\n        &lt;item key=\"B\"&gt;\n          msg (\"Success on B.\")\n        &lt;/item&gt;\n      &lt;/selfuseon&gt;\n    &lt;/object&gt;\n    &lt;object name=\"B\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;function name=\"GetDisplayVerbs\" parameters=\"object\" type=\"stringlist\"&gt;\n    if (Contains(game.pov, object)) {\n      baselist = object.inventoryverbs\n      multiverb = \"combine\"\n    }\n    else {\n      baselist = object.displayverbs\n      multiverb = \"use\"\n    }\n    if (not game.autodisplayverbs or GetBoolean(object, \"usestandardverblist\") or not HasAttribute(game, \"verbattributes\")) {\n      return (baselist)\n    }\n    else {\n      if (HasObject (game.pov, multiverb+\"menuobject\")) {\n        multiobj = GetAttribute (game.pov, multiverb+\"menuobject\")\n        if (not multiobj = object) {\n          baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)\n        }\n      }\n      if (HasAttribute(object, \"generatedverbslist\")) {\n        verbs = object.generatedverbslist\n      }\n      else {\n        verbs = NewStringList()\n        foreach (attr, GetAttributeNames(object, false)) {\n          if (ListContains(game.verbattributes, attr)) {\n            cmd = ObjectDictionaryItem(game.verbattributeslookup, attr)\n            if (HasString(cmd, \"displayverb\")) {\n              displayverb = CapFirst(cmd.displayverb)\n            }\n            else {\n              displayverb = CapFirst(attr)\n            }\n            if (not ListContains(baselist, displayverb)) {\n              list add (verbs, displayverb)\n            }\n          }\n        }\n        object.generatedverbslist = verbs\n      }\n      if (GetBoolean(object, \"useindividualverblist\")) {\n        return (verbs)\n      }\n      else {\n        return (ListCombine(baselist, verbs))\n      }\n    }\n  &lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>Edit: I tried looking a bit deeper into your script and although it's like trying to decipher hieroglyphics to me, I did notice the line: if (GetBoolean(object, \"use\")) {</p>\n<p>That line in the UI view looks like: if, object has flag, expression: object, flag name: use<br>\nSo I tried adding a flag named \"use\" when using the object and I finally made a small breakthrough, but it still doesn't work. I get this error:<br>\nNow click the object you want to use it on.<br>\nError running script: Error compiling expression 'ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)': Unknown object or variable 'uselist'<br>\nError running script: Error evaluating expression 'Join(GetDisplayVerbs(object), \"/\")': Value cannot be null.Parameter name: values<br>\nError running script: Error compiling expression 'ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)': Unknown object or variable 'uselist'<br>\nError running script: Error compiling expression 'ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)': Unknown object or variable 'uselist'</p>\n<p>At the very least I managed to get the message: Now click the object you want to use it on. :)</p>\n\n",
      "PostDate": "2018-10-28T18:35:38.9093202Z",
      "LastEditDate": "2018-10-28T18:58:27.260212Z",
      "link": null
    },
    {
      "PostId": "0c36e64f-30b2-4905-991a-dc4494c4be1e",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry, dumb error there. Typing on my phone, I didn't notice autocorrect messing up my code.\r\nThe line:\r\n`baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)`\r\nshould be\r\n`baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), baselist)`\r\n\r\n<hr />\r\n\r\nI also notice you have a script where if you just use an object on its own, it says \"Success on self.\".\r\nWith the default use system, this is where it would ask you what other object you want to use it on.\r\n\r\nIf you want an object to be usable on its own *and* have the ability to use it on other objects, that would require a slightly more complex command, combining the \"use\" and \"useon\" commands.\r\nI think this was how you were trying to do it; probably a better approach. (in my earlier post, I assumed you were using the built-in \"use\" functionality).\r\n\r\nDo you want the verb menu/buttons to have both \"use\" (on its own) and \"use on\" (other object) options? I think I can see a way to do that.",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry, dumb error there. Typing on my phone, I didn't notice autocorrect messing up my code.<br>\nThe line:<br>\n<code>baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)</code><br>\nshould be<br>\n<code>baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), baselist)</code></p>\n<hr>\n<p>I also notice you have a script where if you just use an object on its own, it says \"Success on self.\".<br>\nWith the default use system, this is where it would ask you what other object you want to use it on.</p>\n<p>If you want an object to be usable on its own <em>and</em> have the ability to use it on other objects, that would require a slightly more complex command, combining the \"use\" and \"useon\" commands.<br>\nI think this was how you were trying to do it; probably a better approach. (in my earlier post, I assumed you were using the built-in \"use\" functionality).</p>\n<p>Do you want the verb menu/buttons to have both \"use\" (on its own) and \"use on\" (other object) options? I think I can see a way to do that.</p>\n\n",
      "PostDate": "2018-10-28T21:04:25.6006421Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3cf22f4f-3d29-446f-bb78-abbd43f7d91d",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So I changed:\r\n```\r\nbaselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)\r\n```\r\nto\r\n```\r\nbaselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), baselist)\r\n```\r\nBut I still get the same result.\r\n\r\nYes, I would like to be able to do both use on its own and use on other objects depending on the situation, but I cant even get the first script to work. The priority should be to make \"useon\" command work, because that's how most items will interact with each other. I can always use items by themselves by creating new specific words. But if you can make it so that I can do both with just 2 commands:\r\nUse (on self)\r\nand\r\nUse on another object\r\n\r\nWell... that would be swell.\r\n\r\nDamn... been doing this whole day. Thanks for your help, but I am going to sleep now. I've been looking at the code and testing this thing 12 hours straight. I sure hope you can get it to work. Thanks for all your help so far.",
      "EditableFormat": "markdown",
      "HTML": "<p>So I changed:</p>\n<pre><code>baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)\n</code></pre>\n<p>to</p>\n<pre><code>baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), baselist)\n</code></pre>\n<p>But I still get the same result.</p>\n<p>Yes, I would like to be able to do both use on its own and use on other objects depending on the situation, but I cant even get the first script to work. The priority should be to make \"useon\" command work, because that's how most items will interact with each other. I can always use items by themselves by creating new specific words. But if you can make it so that I can do both with just 2 commands:<br>\nUse (on self)<br>\nand<br>\nUse on another object</p>\n<p>Well... that would be swell.</p>\n<p>Damn... been doing this whole day. Thanks for your help, but I am going to sleep now. I've been looking at the code and testing this thing 12 hours straight. I sure hope you can get it to work. Thanks for all your help so far.</p>\n\n",
      "PostDate": "2018-10-28T21:33:09.509804Z",
      "LastEditDate": "2018-10-28T21:38:01.0468842Z",
      "link": null
    },
    {
      "PostId": "2fd39acb-44f1-4bdd-997c-d07654ef09db",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK, off the top of my head (and now edited a few times, but still untested)â€¦\r\n\r\n(I was dumb enough to start writing code on my phone, in the forum. I'm posting this here because I've got nowhere to save it, but it's not finished yet. If you spot me doing anything dumb, feel free to say)\r\n\r\n<details><summary>Unfinished code</summary>\r\n\r\n```\r\n  <command name=\"useon\">\r\n    <pattern type=\"string\"><![CDATA[^(?<text_verb>use|combine) (?<object1>.* )?(?<text_type>on|with) (?<object2>.+)$]]></pattern>\r\n    <script>\r\n      verb = LCase (Trim (text_verb))\r\n      if (IsDefined (\"object1\")) {\r\n        HandleWithVerb (verb, object1, object2)\r\n      }\r\n      else {\r\n        object = object2\r\n        candidates = ListExclude (ScopeReachableNotHeld(), object)\r\n        if (ListCount(candidates) = 0) {\r\n          msg (Template(\"NoObjectsAvailable\"))\r\n        }\r\n        else {\r\n          if (HasString (object, verb + \"menuprompt\")) {\r\n            msg (GetString (object, verb + \"menuprompt\"))\r\n          }\r\n          else if (HasString(object, \"usemenuprompt\")) {\r\n            msg (object.usemenuprompt)\r\n          }\r\n          else {\r\n            msg (\"Now click the object you want to \"+verb+\" it \"+text_type+\".\")\r\n          }\r\n          game.pov.usemenuobject = object\r\n          game.pov.useonverb = verb\r\n          game.pov.useonconjunction = text_type\r\n          game.suppressturnscripts = true\r\n          SetTurnTimeout (1) {\r\n            game.pov.useonverb = null\r\n            game.pov.usemenuobject = null\r\n            game.pov.useonconjunction = null\r\n          }\r\n        }\r\n      }\r\n    </script>\r\n  </command>\r\n\r\n<command name=\"use\">\r\n  <pattern type=\"string\"><![CDATA[^use (?!on |with )(?<object>.+)$]]></pattern>\r\n  <script><![CDATA[\r\n    if (HasScript(object, \"use\")) {\r\n      do (object, \"use\")\r\n    }\r\n    else if (GetBoolean(object, \"use\")) {\r\n      candidates = ListExclude (ScopeReachableNotHeld(), object)\r\n      if (ListCount(candidates) = 0) {\r\n        msg (Template(\"NoObjectsAvailable\"))\r\n      }\r\n      else {\r\n        if (HasString(object, \"usemenuprompt\")) {\r\n          msg (object.usemenuprompt)\r\n        }\r\n        else {\r\n          msg (\"Now click the object you want to use it with.\")\r\n        }\r\n        game.pov.usemenuobject = object\r\n        game.pov.useonverb = \"use\"\r\n        game.pov.useonconjunction = \"with\"\r\n        game.suppressturnscripts = true\r\n        SetTurnTimeout (1) {\r\n          game.pov.usemenuobject = null\r\n          game.pov.useonverb = null\r\n          game.pov.useonconjunction = null\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      msg (DynamicTemplate(\"CantUse\", object))\r\n    }\r\n  ]]></script>\r\n</command>\r\n\r\n  <function name=\"GetDisplayVerbs\" parameters=\"object\" type=\"stringlist\">\r\n    if (Contains(game.pov, object)) {\r\n      baselist = object.inventoryverbs\r\n      multiverb = \"combine\"\r\n    }\r\n    else {\r\n      baselist = object.displayverbs\r\n      multiverb = \"use\"\r\n    }\r\n    if (not game.autodisplayverbs or GetBoolean(object, \"usestandardverblist\") or not HasAttribute(game, \"verbattributes\")) {\r\n      return (baselist)\r\n    }\r\n    else {\r\n      if (HasObject (game.pov, multiverb+\"menuobject\")) {\r\n        multiobj = GetAttribute (game.pov, multiverb+\"menuobject\")\r\n        if (not multiobj = object) {\r\n          baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)\r\n        }\r\n      }\r\n      if (HasAttribute(object, \"generatedverbslist\")) {\r\n        verbs = object.generatedverbslist\r\n      }\r\n      else {\r\n        verbs = NewStringList()\r\n        foreach (attr, GetAttributeNames(object, false)) {\r\n          if (ListContains(game.verbattributes, attr)) {\r\n            cmd = ObjectDictionaryItem(game.verbattributeslookup, attr)\r\n            if (HasString(cmd, \"displayverb\")) {\r\n              displayverb = CapFirst(cmd.displayverb)\r\n            }\r\n            else {\r\n              displayverb = CapFirst(attr)\r\n            }\r\n            if (not ListContains(baselist, displayverb)) {\r\n              list add (verbs, displayverb)\r\n            }\r\n          }\r\n        }\r\n        object.generatedverbslist = verbs\r\n      }\r\n      if (GetBoolean(object, \"useindividualverblist\")) {\r\n        return (verbs)\r\n      }\r\n      else {\r\n        return (ListCombine(baselist, verbs))\r\n      }\r\n    }\r\n  </function>\r\n\r\n  <function name=\"HandleWithVerb\" parameters=\"verb, object1, object2\">\r\n    handled = false\r\n    params = QuickParams (\"object1\", object1, \"object2\", object2, \"verb\", verb)\r\n    if (HasAttribute (object2, verb + \"on\")) {\r\n      handler = GetAttribute (object2, verb + \"on\")\r\n      dictionary add (params, \"this\", object2)\r\n      dictionary add (params, \"object\", object1)\r\n      switch (TypeOf (handler)) {\r\n        case (\"string\") {\r\n          game.text_processor_variables = params\r\n          msg (handler)\r\n          handled = true\r\n        }\r\n        case (\"scriptdictionary\") {\r\n          if (DictionaryContains (handler, object1.name)) {\r\n            invoke (ScriptDictionaryItem(handler, object1.name), params)\r\n          }\r\n          handled = true\r\n        }\r\n        case (\"script\") {\r\n          invoke (handler, params)\r\n          handled = true\r\n        }\r\n        default {\r\n          error (\"Unexpected type of \"+verb+\"on attribute for \"+object2.name)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (HasScript(object2, verb+\"anything\") and not handled) {\r\n      dictionary add (params, \"object\", object1)\r\n      do (object2, verb + \"anything\", parameters)\r\n      handled = true\r\n    }\r\n\r\n    if (HasAttribute (object1, \"self\" + verb + \"on\") and not handled) {\r\n      handler = GetAttribute (object2, \"self\" + verb + \"on\")\r\n      dictionary add (params, \"this\", object1)\r\n      dictionary add (params, \"object\", object2)\r\n      switch (TypeOf (handler)) {\r\n        case (\"string\") {\r\n          game.text_processor_variables = params\r\n          msg (handler)\r\n          handled = true\r\n        }\r\n        case (\"scriptdictionary\") {\r\n          if (DictionaryContains (handler, object2.name)) {\r\n            invoke (ScriptDictionaryItem(handler, object2.name), params)\r\n          }\r\n          handled = true\r\n        }\r\n        case (\"script\") {\r\n          invoke (handler, params)\r\n          handled = true\r\n        }\r\n        default {\r\n          error (\"Unexpected type of self\"+verb+\"on attribute for \"+object1.name)\r\n        }\r\n      }\r\n    }\r\n\r\n    if (HasScript(object1, \"self\"+verb+\"anything\") and not handled) {\r\n      dictionary add (params, \"object\", object2)\r\n      do (object2, \"self\" + verb + \"anything\", parameters)\r\n      handled = true\r\n    }\r\n    \r\n    if (not handled) {\r\n      msg (DynamicTemplate(\"DefaultUseOn\", object2, object1))\r\n    }\r\n  </function>\r\n```\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>OK, off the top of my head (and now edited a few times, but still untested)â€¦</p>\n<p>(I was dumb enough to start writing code on my phone, in the forum. I'm posting this here because I've got nowhere to save it, but it's not finished yet. If you spot me doing anything dumb, feel free to say)</p>\n<details><summary>Unfinished code</summary>\n<pre><code>  &lt;command name=\"useon\"&gt;\n    &lt;pattern type=\"string\"&gt;&lt;![CDATA[^(?&lt;text_verb&gt;use|combine) (?&lt;object1&gt;.* )?(?&lt;text_type&gt;on|with) (?&lt;object2&gt;.+)$]]&gt;&lt;/pattern&gt;\n    &lt;script&gt;\n      verb = LCase (Trim (text_verb))\n      if (IsDefined (\"object1\")) {\n        HandleWithVerb (verb, object1, object2)\n      }\n      else {\n        object = object2\n        candidates = ListExclude (ScopeReachableNotHeld(), object)\n        if (ListCount(candidates) = 0) {\n          msg (Template(\"NoObjectsAvailable\"))\n        }\n        else {\n          if (HasString (object, verb + \"menuprompt\")) {\n            msg (GetString (object, verb + \"menuprompt\"))\n          }\n          else if (HasString(object, \"usemenuprompt\")) {\n            msg (object.usemenuprompt)\n          }\n          else {\n            msg (\"Now click the object you want to \"+verb+\" it \"+text_type+\".\")\n          }\n          game.pov.usemenuobject = object\n          game.pov.useonverb = verb\n          game.pov.useonconjunction = text_type\n          game.suppressturnscripts = true\n          SetTurnTimeout (1) {\n            game.pov.useonverb = null\n            game.pov.usemenuobject = null\n            game.pov.useonconjunction = null\n          }\n        }\n      }\n    &lt;/script&gt;\n  &lt;/command&gt;\n\n&lt;command name=\"use\"&gt;\n  &lt;pattern type=\"string\"&gt;&lt;![CDATA[^use (?!on |with )(?&lt;object&gt;.+)$]]&gt;&lt;/pattern&gt;\n  &lt;script&gt;&lt;![CDATA[\n    if (HasScript(object, \"use\")) {\n      do (object, \"use\")\n    }\n    else if (GetBoolean(object, \"use\")) {\n      candidates = ListExclude (ScopeReachableNotHeld(), object)\n      if (ListCount(candidates) = 0) {\n        msg (Template(\"NoObjectsAvailable\"))\n      }\n      else {\n        if (HasString(object, \"usemenuprompt\")) {\n          msg (object.usemenuprompt)\n        }\n        else {\n          msg (\"Now click the object you want to use it with.\")\n        }\n        game.pov.usemenuobject = object\n        game.pov.useonverb = \"use\"\n        game.pov.useonconjunction = \"with\"\n        game.suppressturnscripts = true\n        SetTurnTimeout (1) {\n          game.pov.usemenuobject = null\n          game.pov.useonverb = null\n          game.pov.useonconjunction = null\n        }\n      }\n    }\n    else {\n      msg (DynamicTemplate(\"CantUse\", object))\n    }\n  ]]&gt;&lt;/script&gt;\n&lt;/command&gt;\n\n  &lt;function name=\"GetDisplayVerbs\" parameters=\"object\" type=\"stringlist\"&gt;\n    if (Contains(game.pov, object)) {\n      baselist = object.inventoryverbs\n      multiverb = \"combine\"\n    }\n    else {\n      baselist = object.displayverbs\n      multiverb = \"use\"\n    }\n    if (not game.autodisplayverbs or GetBoolean(object, \"usestandardverblist\") or not HasAttribute(game, \"verbattributes\")) {\n      return (baselist)\n    }\n    else {\n      if (HasObject (game.pov, multiverb+\"menuobject\")) {\n        multiobj = GetAttribute (game.pov, multiverb+\"menuobject\")\n        if (not multiobj = object) {\n          baselist = ListCombine (Split(multiverb+\" \"+GetDisplayAlias(multiobj) + \" with\"), uselist)\n        }\n      }\n      if (HasAttribute(object, \"generatedverbslist\")) {\n        verbs = object.generatedverbslist\n      }\n      else {\n        verbs = NewStringList()\n        foreach (attr, GetAttributeNames(object, false)) {\n          if (ListContains(game.verbattributes, attr)) {\n            cmd = ObjectDictionaryItem(game.verbattributeslookup, attr)\n            if (HasString(cmd, \"displayverb\")) {\n              displayverb = CapFirst(cmd.displayverb)\n            }\n            else {\n              displayverb = CapFirst(attr)\n            }\n            if (not ListContains(baselist, displayverb)) {\n              list add (verbs, displayverb)\n            }\n          }\n        }\n        object.generatedverbslist = verbs\n      }\n      if (GetBoolean(object, \"useindividualverblist\")) {\n        return (verbs)\n      }\n      else {\n        return (ListCombine(baselist, verbs))\n      }\n    }\n  &lt;/function&gt;\n\n  &lt;function name=\"HandleWithVerb\" parameters=\"verb, object1, object2\"&gt;\n    handled = false\n    params = QuickParams (\"object1\", object1, \"object2\", object2, \"verb\", verb)\n    if (HasAttribute (object2, verb + \"on\")) {\n      handler = GetAttribute (object2, verb + \"on\")\n      dictionary add (params, \"this\", object2)\n      dictionary add (params, \"object\", object1)\n      switch (TypeOf (handler)) {\n        case (\"string\") {\n          game.text_processor_variables = params\n          msg (handler)\n          handled = true\n        }\n        case (\"scriptdictionary\") {\n          if (DictionaryContains (handler, object1.name)) {\n            invoke (ScriptDictionaryItem(handler, object1.name), params)\n          }\n          handled = true\n        }\n        case (\"script\") {\n          invoke (handler, params)\n          handled = true\n        }\n        default {\n          error (\"Unexpected type of \"+verb+\"on attribute for \"+object2.name)\n        }\n      }\n    }\n\n    if (HasScript(object2, verb+\"anything\") and not handled) {\n      dictionary add (params, \"object\", object1)\n      do (object2, verb + \"anything\", parameters)\n      handled = true\n    }\n\n    if (HasAttribute (object1, \"self\" + verb + \"on\") and not handled) {\n      handler = GetAttribute (object2, \"self\" + verb + \"on\")\n      dictionary add (params, \"this\", object1)\n      dictionary add (params, \"object\", object2)\n      switch (TypeOf (handler)) {\n        case (\"string\") {\n          game.text_processor_variables = params\n          msg (handler)\n          handled = true\n        }\n        case (\"scriptdictionary\") {\n          if (DictionaryContains (handler, object2.name)) {\n            invoke (ScriptDictionaryItem(handler, object2.name), params)\n          }\n          handled = true\n        }\n        case (\"script\") {\n          invoke (handler, params)\n          handled = true\n        }\n        default {\n          error (\"Unexpected type of self\"+verb+\"on attribute for \"+object1.name)\n        }\n      }\n    }\n\n    if (HasScript(object1, \"self\"+verb+\"anything\") and not handled) {\n      dictionary add (params, \"object\", object2)\n      do (object2, \"self\" + verb + \"anything\", parameters)\n      handled = true\n    }\n    \n    if (not handled) {\n      msg (DynamicTemplate(\"DefaultUseOn\", object2, object1))\n    }\n  &lt;/function&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-10-28T22:04:46.4766529Z",
      "LastEditDate": "2018-11-02T15:36:09.2606611Z",
      "link": null
    },
    {
      "PostId": "42461e4e-1deb-40f4-8f65-d8f59247d167",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Mate, there is nothing I can see wrong. But then again I am not a coder. I tried your unfinished version, but I got an error upon starting the game. I guess I have to wait for the finished version. Any idea how long will it take? I wanna jump back to making my game, but I m not sure if I should wait for your script first.",
      "EditableFormat": "markdown",
      "HTML": "<p>Mate, there is nothing I can see wrong. But then again I am not a coder. I tried your unfinished version, but I got an error upon starting the game. I guess I have to wait for the finished version. Any idea how long will it take? I wanna jump back to making my game, but I m not sure if I should wait for your script first.</p>\n\n",
      "PostDate": "2018-10-29T15:27:02.5795983Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "dd820bd4-fb8f-4651-bbc0-09f09383f4c4",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry, my brain's been pretty scrambled lately. Stressing over taxes, lack of people buying my books, new facebook policy changes. Coding's sometimes a way to clear my head, but then I keep bouncing around between different ways of doing the same thing.\r\n\r\nI've edited the code above; but haven't had an opportunity to test it yet (due to not having regular access to a computer capable of running Quest).\r\nRather than having menus, this code would use the existing displayverb system. So for example the player clicks a hammer in their inventory, and chooses the \"use on\" button. Then when they click on a nail in the 'places and objects' sidebar, the first button will be \"Use hammer on\". They click that, and the game processes the command \"use hammer on nail\".\r\n\r\nThis should work for \"use on\", \"use with\", and \"combine with\" commands. It's just a case of putting the relevant verb into an object's displayverbs and/or inventoryverbs lists (on the 'object' tab, I think).\r\nIt uses the \"useon\" and \"selfuseon\" attributes, just like the built in \"use\" command. For 'combine', those attributes would be \"combineon\" and \"selfcombineon\"\r\n\r\nHope that all makes sense.",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry, my brain's been pretty scrambled lately. Stressing over taxes, lack of people buying my books, new facebook policy changes. Coding's sometimes a way to clear my head, but then I keep bouncing around between different ways of doing the same thing.</p>\n<p>I've edited the code above; but haven't had an opportunity to test it yet (due to not having regular access to a computer capable of running Quest).<br>\nRather than having menus, this code would use the existing displayverb system. So for example the player clicks a hammer in their inventory, and chooses the \"use on\" button. Then when they click on a nail in the 'places and objects' sidebar, the first button will be \"Use hammer on\". They click that, and the game processes the command \"use hammer on nail\".</p>\n<p>This should work for \"use on\", \"use with\", and \"combine with\" commands. It's just a case of putting the relevant verb into an object's displayverbs and/or inventoryverbs lists (on the 'object' tab, I think).<br>\nIt uses the \"useon\" and \"selfuseon\" attributes, just like the built in \"use\" command. For 'combine', those attributes would be \"combineon\" and \"selfcombineon\"</p>\n<p>Hope that all makes sense.</p>\n\n",
      "PostDate": "2018-10-31T13:17:01.6700692Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3c39ea11-5547-49c6-85d3-a5098fbfddb8",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks for still trying to work on this, mate. Unfortunately, I can't seem to make it work. Even with your latest updates, I still get the menu and upon choosing from the menu to interact with another object, I get the Error running script: Error compiling expression 'LCase (Trim (text_verb))': Unknown object or variable 'text_verb'\r\n\r\n:(",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks for still trying to work on this, mate. Unfortunately, I can't seem to make it work. Even with your latest updates, I still get the menu and upon choosing from the menu to interact with another object, I get the Error running script: Error compiling expression 'LCase (Trim (text_verb))': Unknown object or variable 'text_verb'</p>\n<p>:(</p>\n\n",
      "PostDate": "2018-10-31T23:12:53.1752041Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f2eacdd4-4133-4ffe-8efe-25a797f53a57",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I can't see how that can happen. text_verb is not an optional parameter; it must be defined. I'll test it myself when I next have access to a Windows computer.\r\nWhich command are you using? Are you choosing \"Use on\" from the dropdown or the sidebar?\r\n\r\nUgh ... one dumb mistake. I've Used the function name \"HandleMultiVerb\", when there's already a function of that name. I didn't realise it was colliding. I'll change that to avoid collisions.",
      "EditableFormat": "markdown",
      "HTML": "<p>I can't see how that can happen. text_verb is not an optional parameter; it must be defined. I'll test it myself when I next have access to a Windows computer.<br>\nWhich command are you using? Are you choosing \"Use on\" from the dropdown or the sidebar?</p>\n<p>Ugh ... one dumb mistake. I've Used the function name \"HandleMultiVerb\", when there's already a function of that name. I didn't realise it was colliding. I'll change that to avoid collisions.</p>\n\n",
      "PostDate": "2018-11-01T09:38:27.5631302Z",
      "LastEditDate": "2018-11-01T10:34:49.2230597Z",
      "link": null
    },
    {
      "PostId": "d11d922c-0dd4-4df2-92f2-bc0dd25f9455",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hej mrangel, I am using the \"useon\" command from the dropdown menu. But I tried both. I tried using it on the sidebar as well and it's the same error.",
      "EditableFormat": "markdown",
      "HTML": "<p>Hej mrangel, I am using the \"useon\" command from the dropdown menu. But I tried both. I tried using it on the sidebar as well and it's the same error.</p>\n\n",
      "PostDate": "2018-11-02T10:11:33.6375096Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "072948cb-f1aa-48f2-b525-e30b6bc2d950",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Are you sure you've got the whole pattern for the useon command?\r\n\r\nI've made a few changes to the code above, but still don't have access to a Windows machine to test this. In this particular case, I can't even test using the web editor because it doesn't allow you to override the GetDisplayVerbs function",
      "EditableFormat": "markdown",
      "HTML": "<p>Are you sure you've got the whole pattern for the useon command?</p>\n<p>I've made a few changes to the code above, but still don't have access to a Windows machine to test this. In this particular case, I can't even test using the web editor because it doesn't allow you to override the GetDisplayVerbs function</p>\n\n",
      "PostDate": "2018-11-02T10:40:03.9570049Z",
      "LastEditDate": "2018-11-02T10:40:57.8954591Z",
      "link": null
    },
    {
      "PostId": "caa48dbe-2d45-4157-a92f-a3fa23119486",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yes, I am sure. Here is a completely new TEST game I made. Here is how it looks like when I try using \"Use on\" command:\r\nYou are in a room.\r\nYou can see an A and a B.\r\n\r\n- take A\r\nYou pick it up.\r\n\r\n- use A\r\nWORKS ON ITSELF!\r\n\r\n- use on A\r\nWith which object?\r\n1: B\r\n\r\nAs you can see, it gives me a menu again. So it works exactly the same as with the original program. The only difference is that if I type \"use A on B\", I get this error:\r\n- use a on b\r\nError running script: Error compiling expression 'LCase (Trim (text_verb))': Unknown object or variable 'text_verb'",
      "EditableFormat": "markdown",
      "HTML": "<p>Yes, I am sure. Here is a completely new TEST game I made. Here is how it looks like when I try using \"Use on\" command:<br>\nYou are in a room.<br>\nYou can see an A and a B.</p>\n<ul>\n<li>\n<p>take A<br>\nYou pick it up.</p>\n</li>\n<li>\n<p>use A<br>\nWORKS ON ITSELF!</p>\n</li>\n<li>\n<p>use on A<br>\nWith which object?<br>\n1: B</p>\n</li>\n</ul>\n<p>As you can see, it gives me a menu again. So it works exactly the same as with the original program. The only difference is that if I type \"use A on B\", I get this error:</p>\n<ul>\n<li>use a on b<br>\nError running script: Error compiling expression 'LCase (Trim (text_verb))': Unknown object or variable 'text_verb'</li>\n</ul>\n\n",
      "PostDate": "2018-11-02T12:53:10.0993125Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "16afd042-51ac-48e4-9242-8ed0fa90a348",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> With which object?\r\n\r\nMy only guess is that \"use on A\" is being parsed as an instruction to use an object named \"on A\", and somehow the parser is correctly mapping that onto A.\r\nI modified the pattern for the \"use\" command in the above post to try to prevent this. But this shouldn't be an issue in any case, because neither the \"use\" nor \"useon\" commands in the above post display a menu. I really can't see where this problem is creeping in. Anyone else have any suggestions?\r\n\r\n> Error running script: Error compiling expression 'LCase (Trim (text_verb))': Unknown object or variable 'text_verb'\r\n\r\nI can test this part myself, using the web editor. I cannot replicate the error; and I really have no idea where it could be coming from.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>With which object?</p>\n</blockquote>\n<p>My only guess is that \"use on A\" is being parsed as an instruction to use an object named \"on A\", and somehow the parser is correctly mapping that onto A.<br>\nI modified the pattern for the \"use\" command in the above post to try to prevent this. But this shouldn't be an issue in any case, because neither the \"use\" nor \"useon\" commands in the above post display a menu. I really can't see where this problem is creeping in. Anyone else have any suggestions?</p>\n<blockquote>\n<p>Error running script: Error compiling expression 'LCase (Trim (text_verb))': Unknown object or variable 'text_verb'</p>\n</blockquote>\n<p>I can test this part myself, using the web editor. I cannot replicate the error; and I really have no idea where it could be coming from.</p>\n\n",
      "PostDate": "2018-11-02T15:49:21.1529374Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6fc96499-6a2a-4162-98f5-480d24e1081b",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I tried your latest update, but still exactly the same result. Maybe I am the one doing something wrong. Could you please explain where to copy/paste your scripts exactly? The way I understood your instructions was to \"show library elements\" and then overwrite the default commands with your scripts.\r\n\r\nThen I just create a verb \"Use on\" on the object A tab (the fourth tab from the left). Then in the assignment section I choose \"require another object\" and I choose object B, and I write a response: \"Works on B\". Then i test the game.\r\n\r\nMaybe I am doing something wrong here?",
      "EditableFormat": "markdown",
      "HTML": "<p>I tried your latest update, but still exactly the same result. Maybe I am the one doing something wrong. Could you please explain where to copy/paste your scripts exactly? The way I understood your instructions was to \"show library elements\" and then overwrite the default commands with your scripts.</p>\n<p>Then I just create a verb \"Use on\" on the object A tab (the fourth tab from the left). Then in the assignment section I choose \"require another object\" and I choose object B, and I write a response: \"Works on B\". Then i test the game.</p>\n<p>Maybe I am doing something wrong here?</p>\n\n",
      "PostDate": "2018-11-03T15:36:02.2476676Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "704e0654-6928-45d9-bdd8-8ceb35d2a7e6",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah, it looks like your verb is overriding both the default use on functionality, and my version. I didn't spot that initially because I most often use the web version, where the default way to make a \"use on\" command is on the \"Use/Give\" tab.\r\n\r\nIf you want to make it a verb rather than a command, I assume there's some way to modify the script of a verb (as they seem to inherit the \"defaultverb\" type). So if you find the verb you've created, it would presumably have a 'script' attribute you can modify. I'm not entirely sure how you'd go about that, I'm afraid.",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah, it looks like your verb is overriding both the default use on functionality, and my version. I didn't spot that initially because I most often use the web version, where the default way to make a \"use on\" command is on the \"Use/Give\" tab.</p>\n<p>If you want to make it a verb rather than a command, I assume there's some way to modify the script of a verb (as they seem to inherit the \"defaultverb\" type). So if you find the verb you've created, it would presumably have a 'script' attribute you can modify. I'm not entirely sure how you'd go about that, I'm afraid.</p>\n\n",
      "PostDate": "2018-11-03T19:14:15.5183925Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d3e704c3-6072-4ed1-a72d-f7e00b075cc2",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "But I tried doing it through the use/give tab too. It doesnt work. Use on itself works as normal. But \"use on\" gives me the message: You cant use it.",
      "EditableFormat": "markdown",
      "HTML": "<p>But I tried doing it through the use/give tab too. It doesnt work. Use on itself works as normal. But \"use on\" gives me the message: You cant use it.</p>\n\n",
      "PostDate": "2018-11-03T21:42:47.5515746Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "98bea5fa-96bd-4b09-88df-d3703e402dcc",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/mBf7TBeb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello.\r\n\r\nTo start small, here's an example game where you can use a bat by itself, or you can use it on a ball.  (I did not add the custom menu stuff from above.  This is just to show how the mechanics work when using USE as a feature rather than creating a USE command.)\r\n\r\n---\r\nYou are in a room.\r\nYou can see a bat and a ball.\r\n\r\n\\> use bat\r\nYou'll have to pick it up first.\r\n\r\n\\> get it\r\nYou pick it up.\r\n\r\n\\> use it\r\nYou swing the bat a few times.\r\n\r\n\\> use it on the ball\r\nYou are not holding the ball.\r\n\r\n\\> get the ball\r\nYou pick it up.\r\n\r\n\\> use the bat on the ball\r\nYou toss the ball up in the air and hit it with the bat. It lands across the room and rolls back to you, just near your feet.\r\n\r\n---\r\nThe example game's code:\r\n\r\n<details>\r\n```\r\n<!--Saved by Quest 5.7.6606.27193-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Use This On That\">\r\n    <gameid>6ffd0714-30d2-4d58-9365-712d73de5709</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2018</firstpublished>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <object name=\"bat\">\r\n      <inherit name=\"editor_object\" />\r\n      <take />\r\n      <feature_usegive />\r\n      <selfuseon type=\"scriptdictionary\">\r\n        <item key=\"ball\">\r\n          if (not bat.parent = game.pov) {\r\n            msg (\"You're not holding the bat.\")\r\n          }\r\n          else {\r\n            if (ball.parent = game.pov) {\r\n              msg (\"You toss the ball up in the air and hit it with the bat.  It lands across the room and rolls back to you, just near your feet.\")\r\n              ball.parent = game.pov.parent\r\n            }\r\n            else {\r\n              msg (\"You are not holding the ball.\")\r\n            }\r\n          }\r\n        </item>\r\n      </selfuseon>\r\n      <use type=\"script\">\r\n        if (bat.parent = game.pov) {\r\n          msg (\"You swing the bat a few times.\")\r\n        }\r\n        else {\r\n          msg (\"You'll have to pick it up first.\")\r\n        }\r\n      </use>\r\n    </object>\r\n    <object name=\"ball\">\r\n      <inherit name=\"editor_object\" />\r\n      <take />\r\n    </object>\r\n  </object>\r\n</asl>\r\n```\r\n\r\n</details>\r\n\r\n\r\n---\r\nAlso, just a guess:\r\n\r\nIn your USE command's script, you could try changing\r\n\r\n```if (GetBoolean(object, \"use\")) {```\r\n\r\nto:\r\n\r\n```if (GetBoolean(object, \"feature_usegive\")) {```\r\n\r\n\r\nIt *could* be throwing an error when it checks for a Boolean under the \"use\" attribute when that attribute is actually a script (which yours is).  (This may not work.  Mrangel may be checking \"use\" for a reason, and I just didn't see it.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello.</p>\n<p>To start small, here's an example game where you can use a bat by itself, or you can use it on a ball.  (I did not add the custom menu stuff from above.  This is just to show how the mechanics work when using USE as a feature rather than creating a USE command.)</p>\n<hr>\n<p>You are in a room.<br>\nYou can see a bat and a ball.</p>\n<p>&gt; use bat<br>\nYou'll have to pick it up first.</p>\n<p>&gt; get it<br>\nYou pick it up.</p>\n<p>&gt; use it<br>\nYou swing the bat a few times.</p>\n<p>&gt; use it on the ball<br>\nYou are not holding the ball.</p>\n<p>&gt; get the ball<br>\nYou pick it up.</p>\n<p>&gt; use the bat on the ball<br>\nYou toss the ball up in the air and hit it with the bat. It lands across the room and rolls back to you, just near your feet.</p>\n<hr>\n<p>The example game's code:</p>\n<details>\n```\n\n\n```\n</details>\n<hr>\n<p>Also, just a guess:</p>\n<p>In your USE command's script, you could try changing</p>\n<p><code>if (GetBoolean(object, \"use\")) {</code></p>\n<p>to:</p>\n<p><code>if (GetBoolean(object, \"feature_usegive\")) {</code></p>\n<p>It <em>could</em> be throwing an error when it checks for a Boolean under the \"use\" attribute when that attribute is actually a script (which yours is).  (This may not work.  Mrangel may be checking \"use\" for a reason, and I just didn't see it.)</p>\n\n",
      "PostDate": "2018-11-04T00:18:55.6871658Z",
      "LastEditDate": "2018-11-04T00:20:51.2090467Z",
      "link": null
    },
    {
      "PostId": "b50ed8b6-d9f8-413c-84b6-aa8673996977",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK, it looks like I've been making this a lot more complex than it needs to be. I didn't realise that defaultverb already did some of what I want it to do.\r\n\r\nSo, starting over. Instead of modifying the \"use\" and \"useon\" commands, it might make more sense to modify the default verb.\r\n\r\n@KV: If I modify the script in a type, will it modify all the commands that inherit it? I would assume so, but can't easily check. If so, then it should only be necessary to change one type and one function:\r\n\r\nFrom looking at the code, this should prevent verbs with \"Require another object\" from generating a menu, instead adding \"Use A on\" to the displayverbs list of everything else.\r\n\r\nI'm not sure I've got this right, because I can't figure out where the patterns of verbs are generated. So this is partly a guess, based on looking at the existing code. I don't know how creating a \"use on\" verb will interact with the default use/give system, or an object's \"use\" alone functionality. But this version of my code shouldn't change that; it should just replace the menu for \"With which object?\" to a different UX.\r\n\r\n<details>\r\n<summary>Modified code</summary>\r\n\r\n```\r\n  <type name=\"defaultverb\">\r\n    <separator>[VerbObjectSeparator]</separator>\r\n    <multiobjectmenu>[MultiObjectVerbMenu]</multiobjectmenu>\r\n    <multiobjectdefault>[DefaultMultiObjectVerb]</multiobjectdefault>\r\n    <multiobjectmenuempty>[NoObjectsAvailable]</multiobjectmenuempty>\r\n    <script type=\"script\">\r\n      <![CDATA[\r\n      if (not IsDefined(\"object2\")) {\r\n        object2 = null\r\n      }\r\n      \r\n      switch (TypeOf(object, this.property)) {\r\n        case (\"script\") {\r\n          if (object2 = null) {\r\n            do (object, this.property)\r\n          }\r\n          else {\r\n            msg (this.multiobjectdefault)\r\n          }\r\n        }\r\n        case (\"string\") {\r\n          if (object2 = null) {\r\n            msg (GetString(object, this.property))\r\n          }\r\n          else {\r\n            msg (this.multiobjectdefault)\r\n          }\r\n        }\r\n        case (\"scriptdictionary\") {\r\n          if (object2 <> null) {\r\n            HandleMultiVerb (object, this.property, object2, this.multiobjectdefault)\r\n          }\r\n          else {\r\n            objectlist = ListCombine (ScopeReachableInventory(), ScopeReachableNotHeld())\r\n            excludelist = NewObjectList()\r\n            list add (excludelist, game.pov)\r\n            list add (excludelist, object)\r\n            candidates = ListExclude(RemoveSceneryObjects(objectlist), excludelist)\r\n            if (ListCount(candidates) = 0) {\r\n              msg (this.multiobjectmenuempty)\r\n            }\r\n            else {\r\n              game.pov.multiverb = this.property\r\n              if (not HasString (this, \"verbstem\")) {\r\n                this.verbstem = this.property\r\n                foreach (word, Split (this.separator)) {\r\n                  this.verbstem = Replace (Trim(LCase(word)), \"\")\r\n                }\r\n              }\r\n              game.pov.multiverbstem = this.verbstem\r\n              game.pov.multiverbseparator = ListItem (Split (this.separator), 0)\r\n              game.pov.multiverbobject = object\r\n              game.pov.multiverbobjectdefault = this.multiobjectdefault\r\n              msg (this.multiobjectmenu)\r\n              SuppressTurnscripts()\r\n              SetTurnTimeout (1) {\r\n                game.pov.multiverb = null\r\n                game.pov.multiverbseparator = null\r\n                game.pov.multiverbobject = null\r\n                game.pov.multiverbobjectdefault = null\r\n              }\r\n            }\r\n          }\r\n        }\r\n        case (\"null\") {\r\n          if (this.defaulttext <> null) {\r\n            msg (this.defaulttext)\r\n          }\r\n          else if (this.defaulttemplate <> null) {\r\n            msg (DynamicTemplate(this.defaulttemplate, object))\r\n          }\r\n          else if (this.defaultexpression <> null) {\r\n            params = NewDictionary()\r\n            dictionary add (params, \"object\", object)\r\n            msg (Eval(this.defaultexpression, params))\r\n          }\r\n          else {\r\n            error (\"No verb response defined\")\r\n          }\r\n        }\r\n        default {\r\n          error (\"No verb response defined\")\r\n        }\r\n      }\r\n      ]]>\r\n    </script>\r\n  </type>\r\n\r\n  <function name=\"GetDisplayVerbs\" parameters=\"object\" type=\"stringlist\">\r\n    if (Contains(game.pov, object)) {\r\n      baselist = object.inventoryverbs\r\n    }\r\n    else {\r\n      baselist = object.displayverbs\r\n    }\r\n    if (not game.autodisplayverbs or GetBoolean(object, \"usestandardverblist\") or not HasAttribute(game, \"verbattributes\")) {\r\n      return (baselist)\r\n    }\r\n    else {\r\n      if (HasAttribute (game.pov, \"multiverb\")) {\r\n        if (not game.pov.multiverbobject = object) {\r\n          newlist = NewStringList()\r\n          list add (newlist, game.pov.multiverb + \" \" + GetDisplayName (game.pov.multiverbobject) + \" \" + game.pov.multiverbseparator)\r\n          foreach (item, baselist) {\r\n            list add (newlist, item)\r\n          }\r\n          baselist = newlist\r\n        }\r\n      }\r\n      if (HasAttribute(object, \"generatedverbslist\")) {\r\n        verbs = object.generatedverbslist\r\n      }\r\n      else {\r\n        verbs = NewStringList()\r\n        foreach (attr, GetAttributeNames(object, false)) {\r\n          if (ListContains(game.verbattributes, attr)) {\r\n            cmd = ObjectDictionaryItem(game.verbattributeslookup, attr)\r\n            if (HasString(cmd, \"displayverb\")) {\r\n              displayverb = CapFirst(cmd.displayverb)\r\n            }\r\n            else {\r\n              displayverb = CapFirst(attr)\r\n            }\r\n            if (not ListContains(baselist, displayverb)) {\r\n              list add (verbs, displayverb)\r\n            }\r\n          }\r\n        }\r\n        object.generatedverbslist = verbs\r\n      }\r\n      if (GetBoolean(object, \"useindividualverblist\")) {\r\n        return (verbs)\r\n      }\r\n      else {\r\n        return (ListCombine(baselist, verbs))\r\n      }\r\n    }\r\n  </function>\r\n```\r\n</details>",
      "EditableFormat": "markdown",
      "HTML": "<p>OK, it looks like I've been making this a lot more complex than it needs to be. I didn't realise that defaultverb already did some of what I want it to do.</p>\n<p>So, starting over. Instead of modifying the \"use\" and \"useon\" commands, it might make more sense to modify the default verb.</p>\n<p>@KV: If I modify the script in a type, will it modify all the commands that inherit it? I would assume so, but can't easily check. If so, then it should only be necessary to change one type and one function:</p>\n<p>From looking at the code, this should prevent verbs with \"Require another object\" from generating a menu, instead adding \"Use A on\" to the displayverbs list of everything else.</p>\n<p>I'm not sure I've got this right, because I can't figure out where the patterns of verbs are generated. So this is partly a guess, based on looking at the existing code. I don't know how creating a \"use on\" verb will interact with the default use/give system, or an object's \"use\" alone functionality. But this version of my code shouldn't change that; it should just replace the menu for \"With which object?\" to a different UX.</p>\n<details>\n<summary>Modified code</summary>\n<pre><code>  &lt;type name=\"defaultverb\"&gt;\n    &lt;separator&gt;[VerbObjectSeparator]&lt;/separator&gt;\n    &lt;multiobjectmenu&gt;[MultiObjectVerbMenu]&lt;/multiobjectmenu&gt;\n    &lt;multiobjectdefault&gt;[DefaultMultiObjectVerb]&lt;/multiobjectdefault&gt;\n    &lt;multiobjectmenuempty&gt;[NoObjectsAvailable]&lt;/multiobjectmenuempty&gt;\n    &lt;script type=\"script\"&gt;\n      &lt;![CDATA[\n      if (not IsDefined(\"object2\")) {\n        object2 = null\n      }\n      \n      switch (TypeOf(object, this.property)) {\n        case (\"script\") {\n          if (object2 = null) {\n            do (object, this.property)\n          }\n          else {\n            msg (this.multiobjectdefault)\n          }\n        }\n        case (\"string\") {\n          if (object2 = null) {\n            msg (GetString(object, this.property))\n          }\n          else {\n            msg (this.multiobjectdefault)\n          }\n        }\n        case (\"scriptdictionary\") {\n          if (object2 &lt;&gt; null) {\n            HandleMultiVerb (object, this.property, object2, this.multiobjectdefault)\n          }\n          else {\n            objectlist = ListCombine (ScopeReachableInventory(), ScopeReachableNotHeld())\n            excludelist = NewObjectList()\n            list add (excludelist, game.pov)\n            list add (excludelist, object)\n            candidates = ListExclude(RemoveSceneryObjects(objectlist), excludelist)\n            if (ListCount(candidates) = 0) {\n              msg (this.multiobjectmenuempty)\n            }\n            else {\n              game.pov.multiverb = this.property\n              if (not HasString (this, \"verbstem\")) {\n                this.verbstem = this.property\n                foreach (word, Split (this.separator)) {\n                  this.verbstem = Replace (Trim(LCase(word)), \"\")\n                }\n              }\n              game.pov.multiverbstem = this.verbstem\n              game.pov.multiverbseparator = ListItem (Split (this.separator), 0)\n              game.pov.multiverbobject = object\n              game.pov.multiverbobjectdefault = this.multiobjectdefault\n              msg (this.multiobjectmenu)\n              SuppressTurnscripts()\n              SetTurnTimeout (1) {\n                game.pov.multiverb = null\n                game.pov.multiverbseparator = null\n                game.pov.multiverbobject = null\n                game.pov.multiverbobjectdefault = null\n              }\n            }\n          }\n        }\n        case (\"null\") {\n          if (this.defaulttext &lt;&gt; null) {\n            msg (this.defaulttext)\n          }\n          else if (this.defaulttemplate &lt;&gt; null) {\n            msg (DynamicTemplate(this.defaulttemplate, object))\n          }\n          else if (this.defaultexpression &lt;&gt; null) {\n            params = NewDictionary()\n            dictionary add (params, \"object\", object)\n            msg (Eval(this.defaultexpression, params))\n          }\n          else {\n            error (\"No verb response defined\")\n          }\n        }\n        default {\n          error (\"No verb response defined\")\n        }\n      }\n      ]]&gt;\n    &lt;/script&gt;\n  &lt;/type&gt;\n\n  &lt;function name=\"GetDisplayVerbs\" parameters=\"object\" type=\"stringlist\"&gt;\n    if (Contains(game.pov, object)) {\n      baselist = object.inventoryverbs\n    }\n    else {\n      baselist = object.displayverbs\n    }\n    if (not game.autodisplayverbs or GetBoolean(object, \"usestandardverblist\") or not HasAttribute(game, \"verbattributes\")) {\n      return (baselist)\n    }\n    else {\n      if (HasAttribute (game.pov, \"multiverb\")) {\n        if (not game.pov.multiverbobject = object) {\n          newlist = NewStringList()\n          list add (newlist, game.pov.multiverb + \" \" + GetDisplayName (game.pov.multiverbobject) + \" \" + game.pov.multiverbseparator)\n          foreach (item, baselist) {\n            list add (newlist, item)\n          }\n          baselist = newlist\n        }\n      }\n      if (HasAttribute(object, \"generatedverbslist\")) {\n        verbs = object.generatedverbslist\n      }\n      else {\n        verbs = NewStringList()\n        foreach (attr, GetAttributeNames(object, false)) {\n          if (ListContains(game.verbattributes, attr)) {\n            cmd = ObjectDictionaryItem(game.verbattributeslookup, attr)\n            if (HasString(cmd, \"displayverb\")) {\n              displayverb = CapFirst(cmd.displayverb)\n            }\n            else {\n              displayverb = CapFirst(attr)\n            }\n            if (not ListContains(baselist, displayverb)) {\n              list add (verbs, displayverb)\n            }\n          }\n        }\n        object.generatedverbslist = verbs\n      }\n      if (GetBoolean(object, \"useindividualverblist\")) {\n        return (verbs)\n      }\n      else {\n        return (ListCombine(baselist, verbs))\n      }\n    }\n  &lt;/function&gt;\n</code></pre>\n</details>\n\n",
      "PostDate": "2018-11-04T09:08:15.4447477Z",
      "LastEditDate": "2018-11-04T14:22:31.1754219Z",
      "link": null
    },
    {
      "PostId": "bca55186-8e61-4657-83e7-fd2f3842d961",
      "UserId": 381278,
      "Username": "Red Knight",
      "AvatarUrl": "https://secure.gravatar.com/avatar/33aaf9c44f9d2feb4a9c1e99280ad2bb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks for not giving up on this mrangel. I tested your modified script on a fresh test game and if I installed it correctly, this is what I get.\r\nYou are in a room.\r\nYou can see an A and a B.\r\n\r\n- use A\r\nWorks on self.\r\n\r\n- use with A\r\nWith which object?\r\n\r\n- usewith an a with; using B\r\nI don't understand your command.\r\n\r\nSo we are making some progress here, because the menu is finally gone. Now when I use \"use on\" or \"use with\" command, I get a question: \"With which object?\" It would be awesome if I could just click on B at this point and be done with it, but unfortunately instead when I click on B I get this weird drop down menu with a very messed up line: \"usewith an A with; using\". \r\n\r\nAnother problem is that when I choose this weird line, I get a response: \"I don't understand your command.\"  instead of the script completing and saying: \"Works on B.\"\r\n\r\nAlso the B object retains \"usewith an A with; using\" dropdown menu even after choosing it. This could be due to the script not finishing its process. Anyway, I think you are on the right track finally.\r\n\r\nAnother thing that perhaps needs to be mentioned is that this does not work at all through the default Use/Give tab. Instead I had to create a new verb called \"Use on\" on the verb tab and then choose \"require another object\" through there.",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks for not giving up on this mrangel. I tested your modified script on a fresh test game and if I installed it correctly, this is what I get.<br>\nYou are in a room.<br>\nYou can see an A and a B.</p>\n<ul>\n<li>\n<p>use A<br>\nWorks on self.</p>\n</li>\n<li>\n<p>use with A<br>\nWith which object?</p>\n</li>\n<li>\n<p>usewith an a with; using B<br>\nI don't understand your command.</p>\n</li>\n</ul>\n<p>So we are making some progress here, because the menu is finally gone. Now when I use \"use on\" or \"use with\" command, I get a question: \"With which object?\" It would be awesome if I could just click on B at this point and be done with it, but unfortunately instead when I click on B I get this weird drop down menu with a very messed up line: \"usewith an A with; using\".</p>\n<p>Another problem is that when I choose this weird line, I get a response: \"I don't understand your command.\"  instead of the script completing and saying: \"Works on B.\"</p>\n<p>Also the B object retains \"usewith an A with; using\" dropdown menu even after choosing it. This could be due to the script not finishing its process. Anyway, I think you are on the right track finally.</p>\n<p>Another thing that perhaps needs to be mentioned is that this does not work at all through the default Use/Give tab. Instead I had to create a new verb called \"Use on\" on the verb tab and then choose \"require another object\" through there.</p>\n\n",
      "PostDate": "2018-11-04T13:23:58.3014285Z",
      "LastEditDate": "2018-11-04T13:44:22.4301089Z",
      "link": null
    },
    {
      "PostId": "d0a01619-7b50-4c37-81c1-c3b7cd828eab",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "OK; I thought it might end up something like that, but I wasn't sure how it assembles the pattern.\r\nThe extra option at the top of the menu should be \"use A with\".\r\n\r\nI'm going to go back now and make a couple of changes to the script; see if that helps.\r\n\r\nOK ... that should work. If it doesn't handle it by itself, then giving the verb a string attribute named 'verbstem' that contains the first part of the verb (\"use\" in this case) might help.\r\n\r\nYou might also find (I'm not sure) that your \"use with\" verb will be expecting a command of the form \"use with A with B\".\r\nIf you get an odd error message, you could try changing the verb's `pattern` attribute to a regular expression: `^use (with (?<object1>.+)|(?<object1>.+) (with|using) (?<object2>.+))$`.\r\n\r\n(I'm assuming you can change the pattern attribute of a verb; I'm not used to the desktop editor)",
      "EditableFormat": "markdown",
      "HTML": "<p>OK; I thought it might end up something like that, but I wasn't sure how it assembles the pattern.<br>\nThe extra option at the top of the menu should be \"use A with\".</p>\n<p>I'm going to go back now and make a couple of changes to the script; see if that helps.</p>\n<p>OK ... that should work. If it doesn't handle it by itself, then giving the verb a string attribute named 'verbstem' that contains the first part of the verb (\"use\" in this case) might help.</p>\n<p>You might also find (I'm not sure) that your \"use with\" verb will be expecting a command of the form \"use with A with B\".<br>\nIf you get an odd error message, you could try changing the verb's <code>pattern</code> attribute to a regular expression: <code>^use (with (?&lt;object1&gt;.+)|(?&lt;object1&gt;.+) (with|using) (?&lt;object2&gt;.+))$</code>.</p>\n<p>(I'm assuming you can change the pattern attribute of a verb; I'm not used to the desktop editor)</p>\n\n",
      "PostDate": "2018-11-04T14:17:14.3934864Z",
      "LastEditDate": "2018-11-04T14:29:18.7382698Z",
      "link": null
    },
    {
      "PostId": "dbab7265-8f37-4b18-bb7c-c44fde897041",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> It would be awesome if I could just click on B at this point and be done with it\r\n\r\nI was originally trying to figure out how to do that. I can see a few ways it might be possible, but they all end up working with awkward combinations of Quest script and javascript.\r\n\r\nOne of my first thoughts was to rebuild the javascript so that instead of verb buttons and menus, clicking an object or command in the sidebar just types in the command bar. So the command bar is there, but the player doesn't type in it. When the played clicks \"Look at\" in the command pane, it types \"Look at\" in the command bar. Then they click on an apple in the inventory pane, and the text in the command bar becomes \"Look at apple\". Maybe with something like that, it would automatically send the command when you click it; whereas for \"use\" it would give the player a choice of either pressing the enter button, or clicking another object to use it on.\r\nI think I can see how that would be done, but I think it would be a more complex task that I'd end up taking some time over.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>It would be awesome if I could just click on B at this point and be done with it</p>\n</blockquote>\n<p>I was originally trying to figure out how to do that. I can see a few ways it might be possible, but they all end up working with awkward combinations of Quest script and javascript.</p>\n<p>One of my first thoughts was to rebuild the javascript so that instead of verb buttons and menus, clicking an object or command in the sidebar just types in the command bar. So the command bar is there, but the player doesn't type in it. When the played clicks \"Look at\" in the command pane, it types \"Look at\" in the command bar. Then they click on an apple in the inventory pane, and the text in the command bar becomes \"Look at apple\". Maybe with something like that, it would automatically send the command when you click it; whereas for \"use\" it would give the player a choice of either pressing the enter button, or clicking another object to use it on.<br>\nI think I can see how that would be done, but I think it would be a more complex task that I'd end up taking some time over.</p>\n\n",
      "PostDate": "2018-11-04T14:36:06.6519922Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
