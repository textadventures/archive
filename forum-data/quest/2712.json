{
  "Topic": {
    "TopicId": "2712",
    "ForumId": "10",
    "Title": "Timers, to use or not to use",
    "LastUpdated": "2011-11-01T09:36:56+00:00",
    "ReplyCount": 1
  },
  "Posts": [
    {
      "PostId": "19154",
      "UserId": 0,
      "Username": "Weiand",
      "UserAvatar": null,
      "UserGravatar": "1b24e04cb86e43beb383d57654334349",
      "EditableText": "I used timers in 2 seperate rooms to make an event happen.\n\nOne room, when first enter room, get msg of floor feels weak, starts a timer, then &quot;fall thru&quot; floor to basement. After that, each time entering room, player &quot;fall thru&quot; to the basement.\nBUT if leave room before timer finishes, then player &quot;falls&quot; to basement from anywhere.\n\n&lt;timer name=&quot;fall&quot;&gt;\n    &lt;interval&gt;10&lt;/interval&gt;\n    &lt;script&gt;\n      DisableTimer (fall)\n      msg (&quot;You feel the floor give way as you drop to the basement below.&quot;)\n      MoveObject (player, RD Basement)\n      msg (&quot;You land on the basement floor feeling very dazed.&quot;)\n      Pause (5)\n      msg (&quot;You feel as if you can stand and move again.&quot;)\n    &lt;/script&gt;\n  &lt;/timer&gt;\n\nI'm guessing either something else is required for if player leaves room before timer finishes, or a timer just won't work here.\n\n\nThe 2nd room is a bit more involved.\nBasic concept is enter room, bum sees player, starts to move toward player, grabs player, beats player up &amp; dazes player, then leaves.\nIF player shoots bum during that time, kills bum &amp; disables timers.\n\nI've ran into a few problems along the way, most I was able to sort out.\n\nInteract &amp; Look at Bum\n\n&lt;object name=&quot;Bum&quot;&gt;\n        &lt;inherit name=&quot;container_open&quot; /&gt;\n        &lt;inherit name=&quot;male&quot; /&gt;\n        &lt;inherit name=&quot;editor_object&quot; /&gt;\n        &lt;look type=&quot;script&quot;&gt;\n          if (not GetBoolean(Bum, &quot;dead&quot;)) {\n            msg (&quot;A very dirty bum. Walks very slow with a limp and looks as though he wants to kill you.&quot;)\n          }\n          else {\n            if (GetBoolean(Bum, &quot;dead&quot;)) {\n              msg (&quot;A very dirty and dead bum.&quot;)\n            }\n          }\n        &lt;/look&gt;\n\n        &lt;drop type=&quot;boolean&quot;&gt;false&lt;/drop&gt;\n        &lt;takemsg&gt;No, you don't want to take the bum&lt;/takemsg&gt;\n        &lt;isopen type=&quot;boolean&quot;&gt;false&lt;/isopen&gt;\n        &lt;openmsg&gt;You check the bums pockets&lt;/openmsg&gt;\n        &lt;displayverbs&gt;Check pockets; Speak to&lt;/displayverbs&gt;\n\n        &lt;CheckPockets type=&quot;script&quot;&gt;\n          if (not GetBoolean(Bum, &quot;dead&quot;)) {\n            msg (&quot;It would be un-wise to check his pockets now&quot;)\n          }\n          else {\n            if (GetBoolean(Bum, &quot;dead&quot;)) {\n              HelperOpenObject (Bum)\n              msg (&quot;You check the bum's pockets&quot;)\n            }\n          }\n        &lt;/CheckPockets&gt;\n\n        &lt;speak type=&quot;script&quot;&gt;\n          if (not GetBoolean(Bum, &quot;dead&quot;)) {\n            msg (&quot;I'm going to kill you for being in my house!&quot;)\n          }\n          else {\n            if (GetBoolean(Bum, &quot;dead&quot;)) {\n              msg (&quot;The bum is dead and won't be talking back now.&quot;)\n            }\n          }\n        &lt;/speak&gt;\n\nFor Room description:\n\n&lt;object name=&quot;RD Kitchen&quot;&gt;\n      &lt;inherit name=&quot;editor_room&quot; /&gt;\n      &lt;alias&gt;Kitchen&lt;/alias&gt;\n      &lt;description type=&quot;script&quot;&gt;&lt;![CDATA[\n        if (Contains (RD Kitchen,Bum)) {\n          if (not GetBoolean(Bum, &quot;dead&quot;)) {\n            msg (&quot;What used to be a kitchen. Looks more like a war zone now. The cabinets have been ripped off the walls and broken into bits. The stove is missing the door and the burners are missing. The ice box is missing the door and it has been laid on its back. You think you see someone.&lt;br/&gt;Front Room - West. Small Room - East.&quot;)\n          }\n          if (Contains (RD Kitchen,Bum)) {\n            if (GetBoolean(Bum, &quot;dead&quot;)) {\n              msg (&quot;What used to be a kitchen. Looks more like a war zone now. The cabinets have been ripped off the walls and broken into bits. The stove is missing the door and the burners are missing. The ice box is missing the door and it has been laid on its back. You see the dead bum on the floor.&lt;br/&gt;Front Room - West. Small Room - East.&quot;)\n            }\n          }\n        }\n        else {\n          if (not Contains (RD Kitchen,Bum)) {\n            msg (&quot;What used to be a kitchen. Looks more like a war zone now. The cabinets have been ripped off the walls and broken into bits. The stove is missing the door and the burners are missing. The ice box is missing the door and it has been laid on its back.&lt;br/&gt;Front Room - West. Small Room - East.&quot;)\n          }\n        }\n      ]]&gt;&lt;/description&gt;\n\n\nIf bum has &quot;run away&quot; I get an error while running the game.\n\n\nFor Enter Room:\n\n      &lt;usedefaultprefix type=&quot;boolean&quot;&gt;false&lt;/usedefaultprefix&gt;\n      &lt;prefix&gt;the&lt;/prefix&gt;\n      &lt;enter type=&quot;script&quot;&gt;&lt;![CDATA[\n        if (Contains (RD Kitchen,Bum)) {\n          if (not GetBoolean(Bum, &quot;dead&quot;)) {\n            EnableTimer (bum 1)\n          }\n          else {\n            if (GetBoolean(Bum, &quot;dead&quot;)) {\n              HelperCloseObject (Bum)\n            }\n          }\n        }\n        else {\n          if (not Contains (RD Kitchen,Bum)) {\n            msg (&quot;What used to be a kitchen. Looks more like a war zone now. The cabinets have been ripped off the walls and broken into bits. The stove is missing the door and the burners are missing. The ice box is missing the door and it has been laid on its back.&lt;br/&gt;Front Room - West. Small Room - East.&quot;)\n          }\n        }\n      ]]&gt;&lt;/enter&gt;\n\n\nTimers for &quot;Bum&quot;\n\n&lt;timer name=&quot;bum 1&quot;&gt;\n    &lt;interval&gt;5&lt;/interval&gt;\n    &lt;script&gt;\n      DisableTimer (bum 1)\n      msg (&quot;The bum notices you and starts to slowly move towards you&quot;)\n      if (not GetBoolean(Bum, &quot;dead&quot;)) {\n        EnableTimer (bum 2)\n      }\n    &lt;/script&gt;\n  &lt;/timer&gt;\n\n\n  &lt;timer name=&quot;bum 2&quot;&gt;\n    &lt;interval&gt;5&lt;/interval&gt;\n    &lt;script&gt;\n      DisableTimer (bum 2)\n      msg (&quot;The bum grabs you! You will die if you don't do something quickly!!&quot;)\n      if (not GetBoolean(Bum, &quot;dead&quot;)) {\n        EnableTimer (bum 3)\n      }\n    &lt;/script&gt;\n  &lt;/timer&gt;\n\n\n  &lt;timer name=&quot;bum 3&quot;&gt;\n    &lt;interval&gt;5&lt;/interval&gt;\n    &lt;script&gt;\n      DisableTimer (bum 3)\n      msg (&quot;The bum kicks your ass like you've never had it kicked before&quot;)\n      destroy (&quot;Bum&quot;)\n      msg (&quot;You lay on the floor dazed and watch the bum seem to disapear&quot;)\n      Pause (7)\n      msg (&quot;Able to stand again, you figure the bum is gone for good, but you know you got your ass kicked. You should have shot him.&quot;)\n    &lt;/script&gt;\n  &lt;/timer&gt;\n\nMOST of what I wanted to be the end result was obtained. But enough wasn't so that the game just doesn't work correctly.\nWhen player shoots bum, current timer finishes. If player doesn't shoot bum until 3rd timer starts, player gets beat up &amp; Bum &quot;leaves&quot;\nIf Bum is &quot;dead&quot; when going back into room, all aspects work properly. If Bum has &quot;left&quot; get 2 errors for unknown obj or Vari\n\nAm I missing something or are timers just not the best way to go here?",
      "EditableFormat": "bbcode",
      "HTML": "I used timers in 2 seperate rooms to make an event happen.<br/><br/>One room, when first enter room, get msg of floor feels weak, starts a timer, then &quot;fall thru&quot; floor to basement. After that, each time entering room, player &quot;fall thru&quot; to the basement.<br/>BUT if leave room before timer finishes, then player &quot;falls&quot; to basement from anywhere.<br/><br/>&lt;timer name=&quot;fall&quot;&gt;<br/>    &lt;interval&gt;10&lt;/interval&gt;<br/>    &lt;script&gt;<br/>      DisableTimer (fall)<br/>      msg (&quot;You feel the floor give way as you drop to the basement below.&quot;)<br/>      MoveObject (player, RD Basement)<br/>      msg (&quot;You land on the basement floor feeling very dazed.&quot;)<br/>      Pause (5)<br/>      msg (&quot;You feel as if you can stand and move again.&quot;)<br/>    &lt;/script&gt;<br/>  &lt;/timer&gt;<br/><br/>I'm guessing either something else is required for if player leaves room before timer finishes, or a timer just won't work here.<br/><br/><br/>The 2nd room is a bit more involved.<br/>Basic concept is enter room, bum sees player, starts to move toward player, grabs player, beats player up &amp; dazes player, then leaves.<br/>IF player shoots bum during that time, kills bum &amp; disables timers.<br/><br/>I've ran into a few problems along the way, most I was able to sort out.<br/><br/>Interact &amp; Look at Bum<br/><br/>&lt;object name=&quot;Bum&quot;&gt;<br/>        &lt;inherit name=&quot;container_open&quot; /&gt;<br/>        &lt;inherit name=&quot;male&quot; /&gt;<br/>        &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>        &lt;look type=&quot;script&quot;&gt;<br/>          if (not GetBoolean(Bum, &quot;dead&quot;)) {<br/>            msg (&quot;A very dirty bum. Walks very slow with a limp and looks as though he wants to kill you.&quot;)<br/>          }<br/>          else {<br/>            if (GetBoolean(Bum, &quot;dead&quot;)) {<br/>              msg (&quot;A very dirty and dead bum.&quot;)<br/>            }<br/>          }<br/>        &lt;/look&gt;<br/><br/>        &lt;drop type=&quot;boolean&quot;&gt;false&lt;/drop&gt;<br/>        &lt;takemsg&gt;No, you don't want to take the bum&lt;/takemsg&gt;<br/>        &lt;isopen type=&quot;boolean&quot;&gt;false&lt;/isopen&gt;<br/>        &lt;openmsg&gt;You check the bums pockets&lt;/openmsg&gt;<br/>        &lt;displayverbs&gt;Check pockets; Speak to&lt;/displayverbs&gt;<br/><br/>        &lt;CheckPockets type=&quot;script&quot;&gt;<br/>          if (not GetBoolean(Bum, &quot;dead&quot;)) {<br/>            msg (&quot;It would be un-wise to check his pockets now&quot;)<br/>          }<br/>          else {<br/>            if (GetBoolean(Bum, &quot;dead&quot;)) {<br/>              HelperOpenObject (Bum)<br/>              msg (&quot;You check the bum's pockets&quot;)<br/>            }<br/>          }<br/>        &lt;/CheckPockets&gt;<br/><br/>        &lt;speak type=&quot;script&quot;&gt;<br/>          if (not GetBoolean(Bum, &quot;dead&quot;)) {<br/>            msg (&quot;I'm going to kill you for being in my house!&quot;)<br/>          }<br/>          else {<br/>            if (GetBoolean(Bum, &quot;dead&quot;)) {<br/>              msg (&quot;The bum is dead and won't be talking back now.&quot;)<br/>            }<br/>          }<br/>        &lt;/speak&gt;<br/><br/>For Room description:<br/><br/>&lt;object name=&quot;RD Kitchen&quot;&gt;<br/>      &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>      &lt;alias&gt;Kitchen&lt;/alias&gt;<br/>      &lt;description type=&quot;script&quot;&gt;&lt;![CDATA[<br/>        if (Contains (RD Kitchen,Bum)) {<br/>          if (not GetBoolean(Bum, &quot;dead&quot;)) {<br/>            msg (&quot;What used to be a kitchen. Looks more like a war zone now. The cabinets have been ripped off the walls and broken into bits. The stove is missing the door and the burners are missing. The ice box is missing the door and it has been laid on its back. You think you see someone.&lt;br/&gt;Front Room - West. Small Room - East.&quot;)<br/>          }<br/>          if (Contains (RD Kitchen,Bum)) {<br/>            if (GetBoolean(Bum, &quot;dead&quot;)) {<br/>              msg (&quot;What used to be a kitchen. Looks more like a war zone now. The cabinets have been ripped off the walls and broken into bits. The stove is missing the door and the burners are missing. The ice box is missing the door and it has been laid on its back. You see the dead bum on the floor.&lt;br/&gt;Front Room - West. Small Room - East.&quot;)<br/>            }<br/>          }<br/>        }<br/>        else {<br/>          if (not Contains (RD Kitchen,Bum)) {<br/>            msg (&quot;What used to be a kitchen. Looks more like a war zone now. The cabinets have been ripped off the walls and broken into bits. The stove is missing the door and the burners are missing. The ice box is missing the door and it has been laid on its back.&lt;br/&gt;Front Room - West. Small Room - East.&quot;)<br/>          }<br/>        }<br/>      ]]&gt;&lt;/description&gt;<br/><br/><br/>If bum has &quot;run away&quot; I get an error while running the game.<br/><br/><br/>For Enter Room:<br/><br/>      &lt;usedefaultprefix type=&quot;boolean&quot;&gt;false&lt;/usedefaultprefix&gt;<br/>      &lt;prefix&gt;the&lt;/prefix&gt;<br/>      &lt;enter type=&quot;script&quot;&gt;&lt;![CDATA[<br/>        if (Contains (RD Kitchen,Bum)) {<br/>          if (not GetBoolean(Bum, &quot;dead&quot;)) {<br/>            EnableTimer (bum 1)<br/>          }<br/>          else {<br/>            if (GetBoolean(Bum, &quot;dead&quot;)) {<br/>              HelperCloseObject (Bum)<br/>            }<br/>          }<br/>        }<br/>        else {<br/>          if (not Contains (RD Kitchen,Bum)) {<br/>            msg (&quot;What used to be a kitchen. Looks more like a war zone now. The cabinets have been ripped off the walls and broken into bits. The stove is missing the door and the burners are missing. The ice box is missing the door and it has been laid on its back.&lt;br/&gt;Front Room - West. Small Room - East.&quot;)<br/>          }<br/>        }<br/>      ]]&gt;&lt;/enter&gt;<br/><br/><br/>Timers for &quot;Bum&quot;<br/><br/>&lt;timer name=&quot;bum 1&quot;&gt;<br/>    &lt;interval&gt;5&lt;/interval&gt;<br/>    &lt;script&gt;<br/>      DisableTimer (bum 1)<br/>      msg (&quot;The bum notices you and starts to slowly move towards you&quot;)<br/>      if (not GetBoolean(Bum, &quot;dead&quot;)) {<br/>        EnableTimer (bum 2)<br/>      }<br/>    &lt;/script&gt;<br/>  &lt;/timer&gt;<br/><br/><br/>  &lt;timer name=&quot;bum 2&quot;&gt;<br/>    &lt;interval&gt;5&lt;/interval&gt;<br/>    &lt;script&gt;<br/>      DisableTimer (bum 2)<br/>      msg (&quot;The bum grabs you! You will die if you don't do something quickly!!&quot;)<br/>      if (not GetBoolean(Bum, &quot;dead&quot;)) {<br/>        EnableTimer (bum 3)<br/>      }<br/>    &lt;/script&gt;<br/>  &lt;/timer&gt;<br/><br/><br/>  &lt;timer name=&quot;bum 3&quot;&gt;<br/>    &lt;interval&gt;5&lt;/interval&gt;<br/>    &lt;script&gt;<br/>      DisableTimer (bum 3)<br/>      msg (&quot;The bum kicks your ass like you've never had it kicked before&quot;)<br/>      destroy (&quot;Bum&quot;)<br/>      msg (&quot;You lay on the floor dazed and watch the bum seem to disapear&quot;)<br/>      Pause (7)<br/>      msg (&quot;Able to stand again, you figure the bum is gone for good, but you know you got your ass kicked. You should have shot him.&quot;)<br/>    &lt;/script&gt;<br/>  &lt;/timer&gt;<br/><br/>MOST of what I wanted to be the end result was obtained. But enough wasn't so that the game just doesn't work correctly.<br/>When player shoots bum, current timer finishes. If player doesn't shoot bum until 3rd timer starts, player gets beat up &amp; Bum &quot;leaves&quot;<br/>If Bum is &quot;dead&quot; when going back into room, all aspects work properly. If Bum has &quot;left&quot; get 2 errors for unknown obj or Vari<br/><br/>Am I missing something or are timers just not the best way to go here?",
      "PostDate": "2011-10-31T02:32:58+00:00",
      "LastEditDate": null
    },
    {
      "PostId": "19157",
      "UserId": 0,
      "Username": "Alex",
      "UserAvatar": null,
      "UserGravatar": "188b72c5e13327f4fde3989dca7d7d53",
      "EditableText": "In your timer script just add an &quot;if&quot;, so for the first one check to see if the player is still in the right room. If they are, run the existing falling-through-the-floor script. If they're not, do nothing.",
      "EditableFormat": "bbcode",
      "HTML": "In your timer script just add an &quot;if&quot;, so for the first one check to see if the player is still in the right room. If they are, run the existing falling-through-the-floor script. If they're not, do nothing.",
      "PostDate": "2011-11-01T09:36:56+00:00",
      "LastEditDate": null
    }
  ]
}
