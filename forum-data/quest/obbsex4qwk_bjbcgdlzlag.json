{
  "Topic": {
    "TopicId": "obbsex4qwk_bjbcgdlzlag",
    "ForumId": "10",
    "Title": "npc question",
    "LastUpdated": "2016-11-13T22:04:28.3113986Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "39b5d109-4cdf-4027-b896-e136324295e9",
      "UserId": 275322,
      "Username": "cyberlinxz",
      "AvatarUrl": "https://secure.gravatar.com/avatar/b4b28e1f2715a54fdce722f3b97e3467?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I am using pixie clothing lib and I an wanting my npc to be able to wear clothing I know that it should be easy to do but I just can seem to come up with it.  Can some one help me plz ",
      "EditableFormat": "markdown",
      "HTML": "<p>I am using pixie clothing lib and I an wanting my npc to be able to wear clothing I know that it should be easy to do but I just can seem to come up with it.  Can some one help me plz</p>\n\n",
      "PostDate": "2016-11-13T22:04:28.3113986Z",
      "LastEditDate": null
    },
    {
      "PostId": "61d5b756-9292-47d6-b157-1b8e7f7fac29",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I am not familiar with Pixie's clothing library, but I am assuming in the look at description you will have flags set on the NPC.\r\n\r\nIf NPC has flag outfit1, then print message \"Hey.  NPC looks to be wearing a tuxedo.\"\r\nElse If, NPC has flag outfit2, then print message \"Look there.  The NPC is wearing a bathing suit.\"\r\nElse If, etc, etc, etc, etc\r\nElse print message \"OMG!  The NPC is totally naked!\"\r\n\r\nYou would of course need to set flag outfit1 on NPC for whatever event you want to trigger the flag and deactivate any flag previously set.\r\n'Sell tuxedo to NPC'.  Print message, \"The NPC loves the tuxedo and throw it on immediately.\"  Set flag NPC outfit1.\r\n'Give bathing suit to NPC'.  Print message, \"The NPC throws on the bathing suit and looks ready for a swim.\"  Set flag NPC outfit2.  Unset flag NPC outfit1.\r\n\r\nI urge you, however, to make sure that your grammar is done properly in a text adventure game.  It is TEXT adventure after all.  I'll assume the forum post is just very informal.  Just a bit of advice - nothing will ruin a text adventure game more than grammar errors.  Take no offense please.  Just trying to help.  =)\r\n\r\nEDIT:  You may want to wait on Pixie (or another) that is familiar with the library.  There may be a different way to handle it based on how the library is set up.",
      "EditableFormat": "markdown",
      "HTML": "<p>I am not familiar with Pixie's clothing library, but I am assuming in the look at description you will have flags set on the NPC.</p>\n<p>If NPC has flag outfit1, then print message \"Hey.  NPC looks to be wearing a tuxedo.\"<br>\nElse If, NPC has flag outfit2, then print message \"Look there.  The NPC is wearing a bathing suit.\"<br>\nElse If, etc, etc, etc, etc<br>\nElse print message \"OMG!  The NPC is totally naked!\"</p>\n<p>You would of course need to set flag outfit1 on NPC for whatever event you want to trigger the flag and deactivate any flag previously set.<br>\n'Sell tuxedo to NPC'.  Print message, \"The NPC loves the tuxedo and throw it on immediately.\"  Set flag NPC outfit1.<br>\n'Give bathing suit to NPC'.  Print message, \"The NPC throws on the bathing suit and looks ready for a swim.\"  Set flag NPC outfit2.  Unset flag NPC outfit1.</p>\n<p>I urge you, however, to make sure that your grammar is done properly in a text adventure game.  It is TEXT adventure after all.  I'll assume the forum post is just very informal.  Just a bit of advice - nothing will ruin a text adventure game more than grammar errors.  Take no offense please.  Just trying to help.  =)</p>\n<p>EDIT:  You may want to wait on Pixie (or another) that is familiar with the library.  There may be a different way to handle it based on how the library is set up.</p>\n\n",
      "PostDate": "2016-11-14T03:02:13.1336197Z",
      "LastEditDate": "2016-11-14T03:02:58.2766895Z"
    },
    {
      "PostId": "12b5a160-20f6-4b1a-96f9-bb381c0730e9",
      "UserId": 275322,
      "Username": "cyberlinxz",
      "AvatarUrl": "https://secure.gravatar.com/avatar/b4b28e1f2715a54fdce722f3b97e3467?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I will try that and I thank you for the advice I am bad at spelling but do you a spell checker on the program to check for spelling and grammer .\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I will try that and I thank you for the advice I am bad at spelling but do you a spell checker on the program to check for spelling and grammer .</p>\n\n",
      "PostDate": "2016-11-14T03:31:17.2532775Z",
      "LastEditDate": null
    },
    {
      "PostId": "8fa86dba-082b-4e8a-b4fb-014a05606c44",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Did you look at the tutorial:\r\nhttps://github.com/ThePix/quest/wiki/Clothing-Library\r\n\r\nThere is no easy way to spell check, but one approach is to open the game with a text editor with spell checker. I use Notepad++ (the spell checker is a plug-in, \"DSpellCheck\"). This means you will be looking through the code, so a minimal familiarity with XML (or HTML) would be useful so you are spell checking text and not the XML tags.",
      "EditableFormat": "markdown",
      "HTML": "<p>Did you look at the tutorial:<br>\nhttps://github.com/ThePix/quest/wiki/Clothing-Library</p>\n<p>There is no easy way to spell check, but one approach is to open the game with a text editor with spell checker. I use Notepad++ (the spell checker is a plug-in, \"DSpellCheck\"). This means you will be looking through the code, so a minimal familiarity with XML (or HTML) would be useful so you are spell checking text and not the XML tags.</p>\n\n",
      "PostDate": "2016-11-14T08:03:46.5961877Z",
      "LastEditDate": "2016-11-14T08:07:15.2525732Z"
    },
    {
      "PostId": "286f7812-4faf-4d2d-978c-f0207d332f5e",
      "UserId": 275322,
      "Username": "cyberlinxz",
      "AvatarUrl": "https://secure.gravatar.com/avatar/b4b28e1f2715a54fdce722f3b97e3467?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I did look at the link before asking but did not understand it. I am new to java and trying to use it but on the link I did not know where to place the if statements that I want.  I am wanting to have it to where if the npc is wearing it, it can not be taken but when it is removed by the npc then it is able to be seen that they are not wearing clothes and it can be taken.  Also have a scene that the npc puts up a fight for a object if it is taken while they have it with a random chance of success or failure and with a chance of it being broken.\r\n\r\nAs for the spellchecking I write the desc. and the story plot on open office to be able to spellcheck I will try and see how it works in notepad ++.   \r\nIf you could help me with this pixie it would be nice I am going to try to see if XanMag way will work for what I need but if you know a easier way that would be nice\r\n\r\nThank you both for your help",
      "EditableFormat": "markdown",
      "HTML": "<p>I did look at the link before asking but did not understand it. I am new to java and trying to use it but on the link I did not know where to place the if statements that I want.  I am wanting to have it to where if the npc is wearing it, it can not be taken but when it is removed by the npc then it is able to be seen that they are not wearing clothes and it can be taken.  Also have a scene that the npc puts up a fight for a object if it is taken while they have it with a random chance of success or failure and with a chance of it being broken.</p>\n<p>As for the spellchecking I write the desc. and the story plot on open office to be able to spellcheck I will try and see how it works in notepad ++.<br>\nIf you could help me with this pixie it would be nice I am going to try to see if XanMag way will work for what I need but if you know a easier way that would be nice</p>\n<p>Thank you both for your help</p>\n\n",
      "PostDate": "2016-11-14T17:09:50.7841586Z",
      "LastEditDate": null
    },
    {
      "PostId": "11214f71-2050-47ad-9602-51f26338e3b9",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thinking about it, the bit on NPCs does not explain much - but that is because I cannot guess what people will want to do with NPCs.\r\n\r\nI guess the best way to do that would be to [override](https://github.com/ThePix/quest/wiki/Overriding-Functions) the `DoTake` function.  If you look in that you should see these lines towards the top:\r\n```\r\nelse if (not ListContains(ScopeReachable(), object)) {\r\n  msg (prefix + DynamicTemplate(\"ObjectNotOpen\", GetBlockingObject(object)))\r\n}\r\n```\r\nSay you have an NPC called Mary, add three lines after them (and you add a further three lines for each NPC):\r\n```\r\nelse if (not ListContains(ScopeReachable(), object)) {\r\n  msg (prefix + DynamicTemplate(\"ObjectNotOpen\", GetBlockingObject(object)))\r\n}\r\nelse if (object.worn and object.parent = Mary) {\r\n  msg (prefix + \"Mary is wearing \" + object.article + \".\" )\r\n}\r\n```\r\nIf you have a lot of NPCs, it would be better to make it more general, but this will be easier and should work fine.\r\n\r\n\r\nIt is not Java, by the way, though it does look similar in many ways; the language is unique to Quest.\r\n\r\n\r\nGuide to spell-checking:\r\nhttps://github.com/ThePix/quest/wiki/Spell-Checking",
      "EditableFormat": "markdown",
      "HTML": "<p>Thinking about it, the bit on NPCs does not explain much - but that is because I cannot guess what people will want to do with NPCs.</p>\n<p>I guess the best way to do that would be to <a href=\"https://github.com/ThePix/quest/wiki/Overriding-Functions\">override</a> the <code>DoTake</code> function.  If you look in that you should see these lines towards the top:</p>\n<pre><code>else if (not ListContains(ScopeReachable(), object)) {\n  msg (prefix + DynamicTemplate(\"ObjectNotOpen\", GetBlockingObject(object)))\n}\n</code></pre>\n<p>Say you have an NPC called Mary, add three lines after them (and you add a further three lines for each NPC):</p>\n<pre><code>else if (not ListContains(ScopeReachable(), object)) {\n  msg (prefix + DynamicTemplate(\"ObjectNotOpen\", GetBlockingObject(object)))\n}\nelse if (object.worn and object.parent = Mary) {\n  msg (prefix + \"Mary is wearing \" + object.article + \".\" )\n}\n</code></pre>\n<p>If you have a lot of NPCs, it would be better to make it more general, but this will be easier and should work fine.</p>\n<p>It is not Java, by the way, though it does look similar in many ways; the language is unique to Quest.</p>\n<p>Guide to spell-checking:<br>\nhttps://github.com/ThePix/quest/wiki/Spell-Checking</p>\n\n",
      "PostDate": "2016-11-15T08:23:46.4413807Z",
      "LastEditDate": "2016-11-15T09:08:03.8801661Z"
    },
    {
      "PostId": "7de3874c-867c-45c9-b4db-191c0d3ae0a4",
      "UserId": 275322,
      "Username": "cyberlinxz",
      "AvatarUrl": "https://secure.gravatar.com/avatar/b4b28e1f2715a54fdce722f3b97e3467?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thank you pixie that is what I needed and thank you \r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Thank you pixie that is what I needed and thank you</p>\n\n",
      "PostDate": "2016-11-15T12:20:47.4275742Z",
      "LastEditDate": "2016-11-15T13:13:50.6682827Z"
    },
    {
      "PostId": "25df3c22-50ee-45c7-95ea-c08ec22c281d",
      "UserId": 275322,
      "Username": "cyberlinxz",
      "AvatarUrl": "https://secure.gravatar.com/avatar/b4b28e1f2715a54fdce722f3b97e3467?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have another question if some one can answer I am placing it here so I do not place to many forms out\r\n\r\nHere is the code I have:\r\n```\r\nif (OutOfAmmo()) {\r\n  do (this, \"outofammo\")\r\n}\r\nelse if (this.dead) {\r\n  // s = GetDisplayAlias(this)\r\n  // msg(\"The \" + Mid(s, 1, LengthOf(s) - 7) + \" is already dead.\")\r\n  msg (\"The \" + GetDisplayAlias(this) + \" is already dead.\")\r\n}\r\nelse {\r\n  SneakUpdate (5)\r\n  do (this, \"settoattack\")\r\n  attackroll = GetRandomInt (1, 20) + GetAttack(this)\r\n  if (this.noncorporeal and GetElement(game.pov.equipped) = null) {\r\n    if (game.pov.equipped.nonweapon) {\r\n      msg (\"You attack the \" + GetDisplayAlias(this) + \", and pass straight through it!\")\r\n    }\r\n    else {\r\n      msg (\"You swing your \" + GetDisplayAlias(game.pov.equipped) + \" and it goes straight through the \" + GetDisplayAlias(this) + \"!\")\r\n    }\r\n  }\r\n  else if (attackroll > 10) {\r\n    damage = GetDamage (game.pov.equipped, game.pov.strength / 2 + this.temp_damage + game.pov.damagebonus, this)\r\n    this.hitpoints = this.hitpoints - damage\r\n    if (this.hitpoints > 0) {\r\n      if (game.pov.equipped.nonweapon) {\r\n        msg (\"You attack and hit, doing \" + damage + \" points of damage (\" + this.hitpoints + \" hits left). \" + this.hurtbyweapon)\r\n      }\r\n      else {\r\n        msg (this.temp_desc + \" \" + GetDisplayAlias(game.pov.equipped) + \" and hit, doing \" + damage + \" points of damage (\" + this.hitpoints + \" hits left). \" + this.hurtbyweapon)\r\n      }\r\n      if (HasScript(this, \"onweaponhit\")) {\r\n        do (this, \"onweaponhit\")\r\n      }\r\n      if (HasObject(game.pov.equipped, \"venom\")) {\r\n        if (this.poisonimmunity) {\r\n          if (HasString(this, \"poisonimmunitymsg\")) {\r\n            msg (this.poisonimmunitymsg)\r\n          }\r\n          else {\r\n            msg (\"The \" + GetDisplayAlias(this) + \" is immune to your blade venom.\")\r\n          }\r\n        }\r\n        else {\r\n          game.pov.target = this\r\n          do (game.pov.equipped.venom, \"effect\")\r\n        }\r\n        game.pov.equipped.venom = null\r\n      }\r\n    }\r\n    else {\r\n      if (game.pov.equipped.nonweapon) {\r\n        msg (\"You attack and hit, doing \" + damage + \" points of damage. \" + this.death)\r\n      }\r\n      else {\r\n        msg (this.temp_desc + \" \" + GetDisplayAlias(game.pov.equipped) + \" and hit, doing \" + damage + \" points of damage. \" + this.death)\r\n      }\r\n      do (this, \"makedead\")\r\n    }\r\n  }\r\n  else {\r\n    if (game.pov.equipped.nonweapon) {\r\n      msg (\"You attack and miss.\")\r\n    }\r\n    else {\r\n      msg (\"You swing your \" + GetDisplayAlias(game.pov.equipped) + \" and miss.\")\r\n    }\r\n  }\r\n  if (HasObject(game.pov, \"secondary_attack\")) {\r\n    do (this, \"secondaryattack\")\r\n  }\r\n  SetTimeout (5) {\r\n    if (goblin.dead = True) {\r\n    }\r\n    else {\r\n      do (goblin, \"doattack\")\r\n    }\r\n  }\r\n}\r\n```\r\nWhat I am trying to do is make it that once you attack the attack kept going till (player is dead, monster is dead, or player leaves room)  \r\nit is under the doattck attributes from pixie's combat lib \r\n\r\nI got it to work for the player but the npc is not fighting back and that is where I am stuck\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>I have another question if some one can answer I am placing it here so I do not place to many forms out</p>\n<p>Here is the code I have:</p>\n<pre><code>if (OutOfAmmo()) {\n  do (this, \"outofammo\")\n}\nelse if (this.dead) {\n  // s = GetDisplayAlias(this)\n  // msg(\"The \" + Mid(s, 1, LengthOf(s) - 7) + \" is already dead.\")\n  msg (\"The \" + GetDisplayAlias(this) + \" is already dead.\")\n}\nelse {\n  SneakUpdate (5)\n  do (this, \"settoattack\")\n  attackroll = GetRandomInt (1, 20) + GetAttack(this)\n  if (this.noncorporeal and GetElement(game.pov.equipped) = null) {\n    if (game.pov.equipped.nonweapon) {\n      msg (\"You attack the \" + GetDisplayAlias(this) + \", and pass straight through it!\")\n    }\n    else {\n      msg (\"You swing your \" + GetDisplayAlias(game.pov.equipped) + \" and it goes straight through the \" + GetDisplayAlias(this) + \"!\")\n    }\n  }\n  else if (attackroll &gt; 10) {\n    damage = GetDamage (game.pov.equipped, game.pov.strength / 2 + this.temp_damage + game.pov.damagebonus, this)\n    this.hitpoints = this.hitpoints - damage\n    if (this.hitpoints &gt; 0) {\n      if (game.pov.equipped.nonweapon) {\n        msg (\"You attack and hit, doing \" + damage + \" points of damage (\" + this.hitpoints + \" hits left). \" + this.hurtbyweapon)\n      }\n      else {\n        msg (this.temp_desc + \" \" + GetDisplayAlias(game.pov.equipped) + \" and hit, doing \" + damage + \" points of damage (\" + this.hitpoints + \" hits left). \" + this.hurtbyweapon)\n      }\n      if (HasScript(this, \"onweaponhit\")) {\n        do (this, \"onweaponhit\")\n      }\n      if (HasObject(game.pov.equipped, \"venom\")) {\n        if (this.poisonimmunity) {\n          if (HasString(this, \"poisonimmunitymsg\")) {\n            msg (this.poisonimmunitymsg)\n          }\n          else {\n            msg (\"The \" + GetDisplayAlias(this) + \" is immune to your blade venom.\")\n          }\n        }\n        else {\n          game.pov.target = this\n          do (game.pov.equipped.venom, \"effect\")\n        }\n        game.pov.equipped.venom = null\n      }\n    }\n    else {\n      if (game.pov.equipped.nonweapon) {\n        msg (\"You attack and hit, doing \" + damage + \" points of damage. \" + this.death)\n      }\n      else {\n        msg (this.temp_desc + \" \" + GetDisplayAlias(game.pov.equipped) + \" and hit, doing \" + damage + \" points of damage. \" + this.death)\n      }\n      do (this, \"makedead\")\n    }\n  }\n  else {\n    if (game.pov.equipped.nonweapon) {\n      msg (\"You attack and miss.\")\n    }\n    else {\n      msg (\"You swing your \" + GetDisplayAlias(game.pov.equipped) + \" and miss.\")\n    }\n  }\n  if (HasObject(game.pov, \"secondary_attack\")) {\n    do (this, \"secondaryattack\")\n  }\n  SetTimeout (5) {\n    if (goblin.dead = True) {\n    }\n    else {\n      do (goblin, \"doattack\")\n    }\n  }\n}\n</code></pre>\n<p>What I am trying to do is make it that once you attack the attack kept going till (player is dead, monster is dead, or player leaves room)<br>\nit is under the doattck attributes from pixie's combat lib</p>\n<p>I got it to work for the player but the npc is not fighting back and that is where I am stuck</p>\n\n",
      "PostDate": "2016-11-15T17:33:03.2193701Z",
      "LastEditDate": null
    },
    {
      "PostId": "9d21a26f-9112-446c-96b9-2189cbdf46aa",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If I understand right...\r\n\r\nThat script will fire once each time the player makes an attack. When it does so, it will start a timer which will cause the goblin to attack 5 seconds later - but only after the player has made an attack.\r\n\r\nWhat you need to do is set up a timer _object_ (right click in the left pane), and have it fire every five seconds. It can then check all the objects in the current room and see if any should be attacking, and if so, do the attack then.",
      "EditableFormat": "markdown",
      "HTML": "<p>If I understand right...</p>\n<p>That script will fire once each time the player makes an attack. When it does so, it will start a timer which will cause the goblin to attack 5 seconds later - but only after the player has made an attack.</p>\n<p>What you need to do is set up a timer <em>object</em> (right click in the left pane), and have it fire every five seconds. It can then check all the objects in the current room and see if any should be attacking, and if so, do the attack then.</p>\n\n",
      "PostDate": "2016-11-16T14:53:36.5907563Z",
      "LastEditDate": null
    }
  ]
}
