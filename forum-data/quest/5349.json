{
  "Topic": {
    "TopicId": "5349",
    "ForumId": "10",
    "Title": "Begging for cash",
    "LastUpdated": "2015-07-09T21:26:47+01:00",
    "ReplyCount": 5
  },
  "Posts": [
    {
      "PostId": "37059",
      "UserId": 0,
      "Username": "senglyyy",
      "UserAvatar": null,
      "UserGravatar": "c2487193d0faf41be9079ef2c2edb32d",
      "EditableText": "Alrighty, total noob here, but I've been playing around with the Quest interface and I can't seem to make this work:\n\nI want to have the player be able to use a &quot;beg&quot; command in a certain area. When they do this, I want to randomize the amount of cash given to the player (somewhere between $0.50 and $5.00) and print a message like: &quot;You got x amount of money from begging.&quot; \n\nShould the cash be a variable or attribute? And if there's any way to show the current amount in the inventory, maybe by making it an object, that would be sweet.\n\nAnyway I honestly have no idea how complicated this is. Can it be done?",
      "EditableFormat": "bbcode",
      "HTML": "Alrighty, total noob here, but I've been playing around with the Quest interface and I can't seem to make this work:<br/><br/>I want to have the player be able to use a &quot;beg&quot; command in a certain area. When they do this, I want to randomize the amount of cash given to the player (somewhere between $0.50 and $5.00) and print a message like: &quot;You got x amount of money from begging.&quot; <br/><br/>Should the cash be a variable or attribute? And if there's any way to show the current amount in the inventory, maybe by making it an object, that would be sweet.<br/><br/>Anyway I honestly have no idea how complicated this is. Can it be done?",
      "PostDate": "2015-07-08T23:56:47+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "37061",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "Cash needs to be an attribute. Variables exist only for a moment while a script or function runs, then disappear, so cannot be used to hold long-term values.\n\nYou could make it an item that starts in the player attribute and cannot be dropped, and have the amount as an attribute on that, then change the alias to reflect how much the player has. It would be easier to do it as a status attribute though (which is described in the tutorial).\n\nHave you considered what will happen if the player begs for money a hundred times in one place? Will she get more and more money?",
      "EditableFormat": "bbcode",
      "HTML": "Cash needs to be an attribute. Variables exist only for a moment while a script or function runs, then disappear, so cannot be used to hold long-term values.<br/><br/>You could make it an item that starts in the player attribute and cannot be dropped, and have the amount as an attribute on that, then change the alias to reflect how much the player has. It would be easier to do it as a status attribute though (which is described in the tutorial).<br/><br/>Have you considered what will happen if the player begs for money a hundred times in one place? Will she get more and more money?",
      "PostDate": "2015-07-09T08:33:33+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "37064",
      "UserId": 0,
      "Username": "HegemonKhan",
      "UserAvatar": null,
      "UserGravatar": "a96cf34d8d97c57de38f54ee22b1759b",
      "EditableText": "not sure if this will work or if it's what you want (as I've never tried working with decimal numbers), but here you go:\n\n<!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/elements/\">http://docs.textadventures.co.uk/quest/elements/</a><!-- m --> (these are your main things in quest)\n<!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/types/\">http://docs.textadventures.co.uk/quest/types/</a><!-- m --> (Attributes)\n\n<!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/getrandomint.html\">http://docs.textadventures.co.uk/quest/ ... omint.html</a><!-- m -->\n<!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/getrandomdouble.html\">http://docs.textadventures.co.uk/quest/ ... ouble.html</a><!-- m -->\n<!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/toint.html\">http://docs.textadventures.co.uk/quest/ ... toint.html</a><!-- m -->\n<!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/todouble.html\">http://docs.textadventures.co.uk/quest/ ... ouble.html</a><!-- m -->\n<!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/tostring.html\">http://docs.textadventures.co.uk/quest/ ... tring.html</a><!-- m -->\n\nfirst, create~add your 'cash_double_attribute' Double Attribute on your 'player' Player Object:\n\n'player' Player Object -&gt; 'Attributes' Tab -&gt; Attributes -&gt; Add -&gt; (see below)\n\n(Object Name: player)\nAttribute Name: cash_double_attribute\nAttribute Type: double\nAttribute Value: 0.00\n\nthen for your 'beg' Scripting Element ( 'whatever' Object's Verb, Command, Function, Turnscript, Timer, etc):\n\nrun as~a script -&gt; add a~new script -&gt; variables -&gt; 'set a variable or attribute' Script -&gt; (see below)\n\nset variable random_cash_double_variable = [expression] ToDouble (ToString (GetRandomInt (0,4))) + GetRandomDouble ()\n\nadd a~new script -&gt; variables -&gt; 'set a variable or attribute' Script -&gt; (see below)\n\nset variable player.cash_double_attribute = [expression] player.cash_double_attribute + random_cash_double_variable\n\nadd a~new script -&gt; output -&gt; 'print a message' Script -&gt; (see below)\n\nprint [expression] &quot;You got &quot; + random_cash_double_variable + &quot; cash from begging.&quot;\n\nto display your cash (via the 'Status' pane, it'll shows up when you create~add the Status Attributes for your Player Objects or the special 'game' Game Object):\n\n'player' Player Object -&gt; 'Attributes' Tab -&gt; Status Attributes -&gt; Add -&gt; (see below)\n\nAttribute Name: cash_double_attribute\nFormat String (Value): Cash: !\n\n-----------\n\nas for the 'area' where the 'beg' command works... are you going to make the 'beg' be a Verb of some Object, or is the 'beg' going to be an actual Command Element ??? Then, I'll need to know what you want done, as I need more info about it, as just saying in a certain area, isn't enough info.\n\nonce I know exactly what you want, then I can help with how to do it.",
      "EditableFormat": "bbcode",
      "HTML": "not sure if this will work or if it's what you want (as I've never tried working with decimal numbers), but here you go:<br/><br/><!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/elements/\">http://docs.textadventures.co.uk/quest/elements/</a><!-- m --> (these are your main things in quest)<br/><!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/types/\">http://docs.textadventures.co.uk/quest/types/</a><!-- m --> (Attributes)<br/><br/><!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/getrandomint.html\">http://docs.textadventures.co.uk/quest/ ... omint.html</a><!-- m --><br/><!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/getrandomdouble.html\">http://docs.textadventures.co.uk/quest/ ... ouble.html</a><!-- m --><br/><!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/toint.html\">http://docs.textadventures.co.uk/quest/ ... toint.html</a><!-- m --><br/><!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/todouble.html\">http://docs.textadventures.co.uk/quest/ ... ouble.html</a><!-- m --><br/><!-- m --><a class=\"postlink\" href=\"http://docs.textadventures.co.uk/quest/functions/tostring.html\">http://docs.textadventures.co.uk/quest/ ... tring.html</a><!-- m --><br/><br/>first, create~add your 'cash_double_attribute' Double Attribute on your 'player' Player Object:<br/><br/>'player' Player Object -&gt; 'Attributes' Tab -&gt; Attributes -&gt; Add -&gt; (see below)<br/><br/>(Object Name: player)<br/>Attribute Name: cash_double_attribute<br/>Attribute Type: double<br/>Attribute Value: 0.00<br/><br/>then for your 'beg' Scripting Element ( 'whatever' Object's Verb, Command, Function, Turnscript, Timer, etc):<br/><br/>run as~a script -&gt; add a~new script -&gt; variables -&gt; 'set a variable or attribute' Script -&gt; (see below)<br/><br/>set variable random_cash_double_variable = [expression] ToDouble (ToString (GetRandomInt (0,4))) + GetRandomDouble ()<br/><br/>add a~new script -&gt; variables -&gt; 'set a variable or attribute' Script -&gt; (see below)<br/><br/>set variable player.cash_double_attribute = [expression] player.cash_double_attribute + random_cash_double_variable<br/><br/>add a~new script -&gt; output -&gt; 'print a message' Script -&gt; (see below)<br/><br/>print [expression] &quot;You got &quot; + random_cash_double_variable + &quot; cash from begging.&quot;<br/><br/>to display your cash (via the 'Status' pane, it'll shows up when you create~add the Status Attributes for your Player Objects or the special 'game' Game Object):<br/><br/>'player' Player Object -&gt; 'Attributes' Tab -&gt; Status Attributes -&gt; Add -&gt; (see below)<br/><br/>Attribute Name: cash_double_attribute<br/>Format String (Value): Cash: !<br/><br/>-----------<br/><br/>as for the 'area' where the 'beg' command works... are you going to make the 'beg' be a Verb of some Object, or is the 'beg' going to be an actual Command Element ??? Then, I'll need to know what you want done, as I need more info about it, as just saying in a certain area, isn't enough info.<br/><br/>once I know exactly what you want, then I can help with how to do it.",
      "PostDate": "2015-07-09T16:48:50+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "37069",
      "UserId": 0,
      "Username": "senglyyy",
      "UserAvatar": null,
      "UserGravatar": "c2487193d0faf41be9079ef2c2edb32d",
      "EditableText": "Your script is working for me, Hegemon, thank you! A couple things though: I followed your instructions and even after begging, the cash number in the inventory pane remains at zero. Also, is there any way to limit the number of decimals to the hundredth place? \n\nRight now, &quot;beg&quot; works as a command that shows up in the area.",
      "EditableFormat": "bbcode",
      "HTML": "Your script is working for me, Hegemon, thank you! A couple things though: I followed your instructions and even after begging, the cash number in the inventory pane remains at zero. Also, is there any way to limit the number of decimals to the hundredth place? <br/><br/>Right now, &quot;beg&quot; works as a command that shows up in the area.",
      "PostDate": "2015-07-09T20:48:00+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "37070",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "[quote:3a31esrb]Also, is there any way to limit the number of decimals to the hundredth place?[/quote:3a31esrb]\nThe only way I can see to do that is to use a string for the status attribute and format it yourself with two (fixed) decimal places. That means you'll need two attributes - one to accumulate the actual numeric value and one to be the formatted string that is shown in the attribute pane - but it should be straightforward enough to manage them both. (Update the numeric value with your addition, and then format that value into your string.)\n\nI would get it working first, though, with the value changing as desired. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> Then you can make the additional step to have a formatted attribute for display. That will make some things easier, as you can keep the internal money attribute in cents. Then you'd just need to put a decimal point in for display.\n\nThe other alternative is to not bother with cents (keep it whole dollars, which would just be an integer), but that might not be what you want.",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><p>Also, is there any way to limit the number of decimals to the hundredth place?</p></blockquote><br/>The only way I can see to do that is to use a string for the status attribute and format it yourself with two (fixed) decimal places. That means you'll need two attributes - one to accumulate the actual numeric value and one to be the formatted string that is shown in the attribute pane - but it should be straightforward enough to manage them both. (Update the numeric value with your addition, and then format that value into your string.)<br/><br/>I would get it working first, though, with the value changing as desired. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> Then you can make the additional step to have a formatted attribute for display. That will make some things easier, as you can keep the internal money attribute in cents. Then you'd just need to put a decimal point in for display.<br/><br/>The other alternative is to not bother with cents (keep it whole dollars, which would just be an integer), but that might not be what you want.",
      "PostDate": "2015-07-09T21:02:56+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "37071",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Just for grins, here is a sample program that has a &quot;beg&quot; command and prints out how much you received and how much you now have. It has a &quot;FormatMoney&quot; function that makes it look dollar-y. (It's used for both the amount you received and how much you have.) Note that internally, the money value is kept as an integer representing cents. Floating point numbers are no good for currency. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->\n\nI didn't bother with the status attribute. That could be added.\n\nSelecting a random value between $0.05 and $5.00 ended up with odd amounts like $3.44, so I took a punt and made it a multiple of 5 cents. You can easily change that if you wish.\n\nThe code is here and attached.\n\n[code:3c9okggr]&lt;!--Saved by Quest 5&#46;6&#46;5621&#46;18142--&gt;\n&lt;asl version=&quot;550&quot;&gt;\n  &lt;include ref=&quot;English&#46;aslx&quot; /&gt;\n  &lt;include ref=&quot;Core&#46;aslx&quot; /&gt;\n  &lt;game name=&quot;FormatCurrency&quot;&gt;\n    &lt;gameid&gt;273c3146-02eb-4c1c-ae6b-971def5458c8&lt;/gameid&gt;\n    &lt;version&gt;1&#46;0&lt;/version&gt;\n    &lt;firstpublished&gt;2015&lt;/firstpublished&gt;\n  &lt;/game&gt;\n  &lt;object name=&quot;room&quot;&gt;\n    &lt;inherit name=&quot;editor_room&quot; /&gt;\n    &lt;object name=&quot;player&quot;&gt;\n      &lt;inherit name=&quot;editor_object&quot; /&gt;\n      &lt;inherit name=&quot;editor_player&quot; /&gt;\n      &lt;money type=&quot;int&quot;&gt;0&lt;/money&gt;\n    &lt;/object&gt;\n  &lt;/object&gt;\n  &lt;command&gt;\n    &lt;pattern&gt;beg&lt;/pattern&gt;\n    &lt;script&gt;\n      amount = GetRandomInt(1, 100) * 5\n      player&#46;money = player&#46;money + amount\n\n      msg(&quot;You received &quot; + FormatMoney(amount) + &quot;&#46; You now have &quot; + FormatMoney(player&#46;money))\n    &lt;/script&gt;\n  &lt;/command&gt;\n  &lt;function name=&quot;FormatMoney&quot; parameters=&quot;cents&quot; type=&quot;string&quot;&gt;\n    &lt;!&#91;CDATA&#91;\n\t  s = ToString(cents)\n\t  if (LengthOf(s) &lt; 3) {\n\t  \ts = Right(&quot;000&quot; + s, 3)\n\t  }\n\t  return(&quot;$&quot; + Left(s, LengthOf(s)-2) + &quot;&#46;&quot; + Right(s, 2))\n      &#93;&#93;&gt;\n  &lt;/function&gt;\n&lt;/asl&gt;[/code:3c9okggr]\nNote: the &quot;if&quot; in that function is handling the case where there aren't enough digits to form at least &quot;X.XX&quot;. If so, it prepends 0's to make it at least 3 digits long. Then it just splits the string to insert a decimal point.",
      "EditableFormat": "bbcode",
      "HTML": "Just for grins, here is a sample program that has a &quot;beg&quot; command and prints out how much you received and how much you now have. It has a &quot;FormatMoney&quot; function that makes it look dollar-y. (It's used for both the amount you received and how much you have.) Note that internally, the money value is kept as an integer representing cents. Floating point numbers are no good for currency. <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --><br/><br/>I didn't bother with the status attribute. That could be added.<br/><br/>Selecting a random value between $0.05 and $5.00 ended up with odd amounts like $3.44, so I took a punt and made it a multiple of 5 cents. You can easily change that if you wish.<br/><br/>The code is here and attached.<br/><br/><pre><code>&lt;!--Saved by Quest 5&#46;6&#46;5621&#46;18142--&gt;<br/>&lt;asl version=&quot;550&quot;&gt;<br/>  &lt;include ref=&quot;English&#46;aslx&quot; /&gt;<br/>  &lt;include ref=&quot;Core&#46;aslx&quot; /&gt;<br/>  &lt;game name=&quot;FormatCurrency&quot;&gt;<br/>    &lt;gameid&gt;273c3146-02eb-4c1c-ae6b-971def5458c8&lt;/gameid&gt;<br/>    &lt;version&gt;1&#46;0&lt;/version&gt;<br/>    &lt;firstpublished&gt;2015&lt;/firstpublished&gt;<br/>  &lt;/game&gt;<br/>  &lt;object name=&quot;room&quot;&gt;<br/>    &lt;inherit name=&quot;editor_room&quot; /&gt;<br/>    &lt;object name=&quot;player&quot;&gt;<br/>      &lt;inherit name=&quot;editor_object&quot; /&gt;<br/>      &lt;inherit name=&quot;editor_player&quot; /&gt;<br/>      &lt;money type=&quot;int&quot;&gt;0&lt;/money&gt;<br/>    &lt;/object&gt;<br/>  &lt;/object&gt;<br/>  &lt;command&gt;<br/>    &lt;pattern&gt;beg&lt;/pattern&gt;<br/>    &lt;script&gt;<br/>      amount = GetRandomInt(1, 100) * 5<br/>      player&#46;money = player&#46;money + amount<br/><br/>      msg(&quot;You received &quot; + FormatMoney(amount) + &quot;&#46; You now have &quot; + FormatMoney(player&#46;money))<br/>    &lt;/script&gt;<br/>  &lt;/command&gt;<br/>  &lt;function name=&quot;FormatMoney&quot; parameters=&quot;cents&quot; type=&quot;string&quot;&gt;<br/>    &lt;!&#91;CDATA&#91;<br/>\t  s = ToString(cents)<br/>\t  if (LengthOf(s) &lt; 3) {<br/>\t  \ts = Right(&quot;000&quot; + s, 3)<br/>\t  }<br/>\t  return(&quot;$&quot; + Left(s, LengthOf(s)-2) + &quot;&#46;&quot; + Right(s, 2))<br/>      &#93;&#93;&gt;<br/>  &lt;/function&gt;<br/>&lt;/asl&gt;</code></pre><br/>Note: the &quot;if&quot; in that function is handling the case where there aren't enough digits to form at least &quot;X.XX&quot;. If so, it prepends 0's to make it at least 3 digits long. Then it just splits the string to insert a decimal point.<div><a href=\"/attachment/1266\">FormatCurrency.aslx</a></div>",
      "PostDate": "2015-07-09T21:26:47+01:00",
      "LastEditDate": null
    }
  ]
}
