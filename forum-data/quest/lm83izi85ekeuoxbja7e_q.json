{
  "Topic": {
    "TopicId": "lm83izi85ekeuoxbja7e_q",
    "ForumId": "10",
    "Title": "How to make a simple, rock-paper-scissors style combat?",
    "LastUpdated": "2023-03-27T07:40:52.5621293Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "84bd00a1-5fab-4954-a86e-e792a7c9214f",
      "UserId": 640480,
      "Username": "hareofhrair",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7cb8c7335656c2712ded2681d655097f?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I want to do a *super* simple combat system- I only really want to do this one fight scene, so I didn't want to do a full combat system, but after charting all the possibilities if I did it as a series of if/then's, I think there's got to be a simpler way to approach it.\r\n\r\n<img src=\"https://file.garden/YjahIGA2LRQTk64R/mechagodzillafight.png\" alt=\"a flow chart i put way too much effort into lmao\" title=\"Title\" />\r\n\r\nBasically, you and your opponent have the same five moves- Bite beats Smash, Smash beats Slam, Slam beats Bite. Blast and Shield beat all of the other three and Shield beats Blast. After you or your opponent use a move once, it's spent. You can't use it again in that fight. Winner is best three out of five. That's it. No health, no ammo, no multiple targets, it's as straightforward as I could manage. \r\n\r\nSo how would you go about turning this into a battle system? I can't seem to break out of the idea of just nested if/thens, it's all I'm good at lmao. There's got to be an easier way, I just can't think my way to it. Any suggestions?",
      "EditableFormat": "markdown",
      "HTML": "<p>I want to do a <em>super</em> simple combat system- I only really want to do this one fight scene, so I didn't want to do a full combat system, but after charting all the possibilities if I did it as a series of if/then's, I think there's got to be a simpler way to approach it.</p>\n<img src=\"https://file.garden/YjahIGA2LRQTk64R/mechagodzillafight.png\" alt=\"a flow chart i put way too much effort into lmao\" title=\"Title\">\n<p>Basically, you and your opponent have the same five moves- Bite beats Smash, Smash beats Slam, Slam beats Bite. Blast and Shield beat all of the other three and Shield beats Blast. After you or your opponent use a move once, it's spent. You can't use it again in that fight. Winner is best three out of five. That's it. No health, no ammo, no multiple targets, it's as straightforward as I could manage.</p>\n<p>So how would you go about turning this into a battle system? I can't seem to break out of the idea of just nested if/thens, it's all I'm good at lmao. There's got to be an easier way, I just can't think my way to it. Any suggestions?</p>\n\n",
      "PostDate": "2023-03-27T07:40:52.5621293Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e4824f9d-4bc7-468a-b1bc-5feab76dd99d",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "To clarify. 1. Is this a 2-player game or is the computer one of the players? 2. If the computer is playing, is move selection random; 3. It seems the outcome can be a draw so do you want to play on until someone wins three moves or allow a draw after 5 moves?",
      "EditableFormat": "markdown",
      "HTML": "<p>To clarify. 1. Is this a 2-player game or is the computer one of the players? 2. If the computer is playing, is move selection random; 3. It seems the outcome can be a draw so do you want to play on until someone wins three moves or allow a draw after 5 moves?</p>\n\n",
      "PostDate": "2023-03-27T12:08:51.3223156Z",
      "LastEditDate": "2023-03-27T14:09:50.9615872Z",
      "link": null
    },
    {
      "PostId": "877cc37b-be72-4ed6-a390-21e648c18ad1",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'd suggest making a function to handle each combat round.\r\n\r\nTo initiate combat, create attributes to hold the number of rounds won for the player and for the enemy; as well as lists of the moves remaining. And then call the combat function.\r\n\r\nThe combat function would prompt the player for their move, pick one for their opponent, and then compare the two. If somebody has won, do whatever comes next, otherwise call the function again.\r\n\r\nSo it could look something like:\r\nScript to start combat:\r\n```\r\ngame.combatWins = Split(\"Bite-Smash;Smash-Slam;Slam-Bite;Shield-Blast;Shield-Bite;Shield-Slam;Shield-Smash;Blast-Bite;Blast-Slam;Blast-Smash\")\r\nenemy_bob.combat_wins = 0\r\nplayer.combat_wins = 0\r\nCombatFunction()\r\n```\r\nAnd the contents of CombatFunction:\r\n```\r\n// Make sure that they all have a list of options (I assume the list refreshes in the case of too many ties)\r\nif (not HasAttribute (player, \"combat_options\")) player.combat_options = Split(\"Bite;Slam;Smash;Shield;Blast\")\r\nif (ListCount (player.combat_options) = 0) player.combat_options = Split(\"Bite;Slam;Smash;Shield;Blast\")\r\nif (not HasAttribute (enemy_bob, \"combat_options\")) enemy_bob.combat_options = Split(\"Bite;Slam;Smash;Shield;Blast\")\r\nif (ListCount (enemy_bob.combat_options) = 0) enemy_bob.combat_options = Split(\"Bite;Slam;Smash;Shield;Blast\")\r\n\r\ncombat_running = true\r\nShowMenu (\"You are fighting Bob! Choose an option!\", player.combat_options, false) {\r\n  player_move = result\r\n  enemy_move = PickOneString (enemy_bob.combat_options)\r\n  list remove (player.combat_options, player_move)\r\n  list remove (enemy_bob.combat_options, enemy_move)\r\n  msg (\"You used \" + player_move + \". Bob used \" + enemy_move + \".\")\r\n  if (ListContains (game.combatWins, player_move + \"-\" + enemy_move)) {\r\n    msg (\"You win this round!\")\r\n    player.combat_wins = player.combat_wins + 1\r\n    if (player.combat_wins >= 3) {\r\n      msg (\"You won the combat! Congratulations!\")\r\n      combat_running = false\r\n      // Do other stuff here\r\n    }\r\n  }\r\n  else if (ListContains (game.combatWins, enemy_move + \"-\" + player_move)) {\r\n    msg (\"You lost this round!\")\r\n    enemy_bob.combat_wins = enemy_bob.combat_wins + 1\r\n    if (enemy_bob.combat_wins >= 3) {\r\n      msg (\"Bob has defeated you.\")\r\n      combat_running = false\r\n      // Do other stuff here\r\n    }\r\n  }\r\n  if (combat_running) {\r\n    msg (\"You have won {player.combat_wins} rounds, and Bob has won {enemy_bob.combat_wins}. Ready for the next round!\")\r\n    CombatFunction()\r\n  }\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>I'd suggest making a function to handle each combat round.</p>\n<p>To initiate combat, create attributes to hold the number of rounds won for the player and for the enemy; as well as lists of the moves remaining. And then call the combat function.</p>\n<p>The combat function would prompt the player for their move, pick one for their opponent, and then compare the two. If somebody has won, do whatever comes next, otherwise call the function again.</p>\n<p>So it could look something like:<br>\nScript to start combat:</p>\n<pre><code>game.combatWins = Split(\"Bite-Smash;Smash-Slam;Slam-Bite;Shield-Blast;Shield-Bite;Shield-Slam;Shield-Smash;Blast-Bite;Blast-Slam;Blast-Smash\")\nenemy_bob.combat_wins = 0\nplayer.combat_wins = 0\nCombatFunction()\n</code></pre>\n<p>And the contents of CombatFunction:</p>\n<pre><code>// Make sure that they all have a list of options (I assume the list refreshes in the case of too many ties)\nif (not HasAttribute (player, \"combat_options\")) player.combat_options = Split(\"Bite;Slam;Smash;Shield;Blast\")\nif (ListCount (player.combat_options) = 0) player.combat_options = Split(\"Bite;Slam;Smash;Shield;Blast\")\nif (not HasAttribute (enemy_bob, \"combat_options\")) enemy_bob.combat_options = Split(\"Bite;Slam;Smash;Shield;Blast\")\nif (ListCount (enemy_bob.combat_options) = 0) enemy_bob.combat_options = Split(\"Bite;Slam;Smash;Shield;Blast\")\n\ncombat_running = true\nShowMenu (\"You are fighting Bob! Choose an option!\", player.combat_options, false) {\n  player_move = result\n  enemy_move = PickOneString (enemy_bob.combat_options)\n  list remove (player.combat_options, player_move)\n  list remove (enemy_bob.combat_options, enemy_move)\n  msg (\"You used \" + player_move + \". Bob used \" + enemy_move + \".\")\n  if (ListContains (game.combatWins, player_move + \"-\" + enemy_move)) {\n    msg (\"You win this round!\")\n    player.combat_wins = player.combat_wins + 1\n    if (player.combat_wins &gt;= 3) {\n      msg (\"You won the combat! Congratulations!\")\n      combat_running = false\n      // Do other stuff here\n    }\n  }\n  else if (ListContains (game.combatWins, enemy_move + \"-\" + player_move)) {\n    msg (\"You lost this round!\")\n    enemy_bob.combat_wins = enemy_bob.combat_wins + 1\n    if (enemy_bob.combat_wins &gt;= 3) {\n      msg (\"Bob has defeated you.\")\n      combat_running = false\n      // Do other stuff here\n    }\n  }\n  if (combat_running) {\n    msg (\"You have won {player.combat_wins} rounds, and Bob has won {enemy_bob.combat_wins}. Ready for the next round!\")\n    CombatFunction()\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2023-03-27T15:48:21.6979037Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c36994a3-e28e-4675-99dd-249b24fc60e6",
      "UserId": 640480,
      "Username": "hareofhrair",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7cb8c7335656c2712ded2681d655097f?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "DavyB - It's single player, and initially the enemy's moves would have been scripted based on the players previous move, but it seems like random is a bit easier. Definitely would have wanted to keep going after a draw until somebody won. I hadn't really thought about draws. Maybe I can add something so when both players choose the same move, the move doesn't get removed from their list? That should make draws impossible unless they both end up with only the same move left on their lists, which maybe I'd just call a win for the player to avoid getting stuck.\r\n\r\nMrAngel - Thank you, this is really great and straightforward! I haven't tried anything with creating functions yet and it was intimidating, but this is surprisingly easy to understand. I dropped it into a test game just to see how it works and it seems perfect. I'm going to test it out in my real game now and mess around with it. Thank you very much!",
      "EditableFormat": "markdown",
      "HTML": "<p>DavyB - It's single player, and initially the enemy's moves would have been scripted based on the players previous move, but it seems like random is a bit easier. Definitely would have wanted to keep going after a draw until somebody won. I hadn't really thought about draws. Maybe I can add something so when both players choose the same move, the move doesn't get removed from their list? That should make draws impossible unless they both end up with only the same move left on their lists, which maybe I'd just call a win for the player to avoid getting stuck.</p>\n<p>MrAngel - Thank you, this is really great and straightforward! I haven't tried anything with creating functions yet and it was intimidating, but this is surprisingly easy to understand. I dropped it into a test game just to see how it works and it seems perfect. I'm going to test it out in my real game now and mess around with it. Thank you very much!</p>\n\n",
      "PostDate": "2023-03-27T18:37:00.9370704Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d8011b15-5374-4f41-ae08-719deb8dcec7",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "\"_Maybe I can add something so when both players choose the same move, the move doesn't get removed from their list?_\"\r\nSounds like a great solution!",
      "EditableFormat": "markdown",
      "HTML": "<p>\"<em>Maybe I can add something so when both players choose the same move, the move doesn't get removed from their list?</em>\"<br>\nSounds like a great solution!</p>\n\n",
      "PostDate": "2023-03-27T20:35:55.161273Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "045422ac-2f58-4ec1-98ed-ad8bb34db637",
      "UserId": 640480,
      "Username": "hareofhrair",
      "AvatarUrl": "https://secure.gravatar.com/avatar/7cb8c7335656c2712ded2681d655097f?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So it's working great, and I did figure out how to make it so when they both choose the same move it just adds that move back to the list. Unfortunately, I can't figure out what to do when both the player and the enemy end up with the same move as the only move left on their list. They get stuck in an infinite loop and I don't know how to fix that. Any ideas?",
      "EditableFormat": "markdown",
      "HTML": "<p>So it's working great, and I did figure out how to make it so when they both choose the same move it just adds that move back to the list. Unfortunately, I can't figure out what to do when both the player and the enemy end up with the same move as the only move left on their list. They get stuck in an infinite loop and I don't know how to fix that. Any ideas?</p>\n\n",
      "PostDate": "2023-03-28T23:00:11.4584173Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9e41a7ca-e990-4037-83a4-d1965583a158",
      "UserId": 260569,
      "Username": "DarkLizerd",
      "AvatarUrl": "https://i.imgur.com/HiZKEtPb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Just call it a tie, and exit the battle loop with no winner.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Just call it a tie, and exit the battle loop with no winner.</p>\n\n",
      "PostDate": "2023-03-29T06:02:08.7742189Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bc946cb6-9b78-4a67-a79d-7cf2ed2b83ff",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Interesting, I didn't think of that possibility! The battle loop certainly has to stop when each participant has the same single move left. If the loop stops when one participant reaches a winning score of 3, it can only mean that the score is 2-2 when the problem occurs. If you don't want a draw, all you can do is restart. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Interesting, I didn't think of that possibility! The battle loop certainly has to stop when each participant has the same single move left. If the loop stops when one participant reaches a winning score of 3, it can only mean that the score is 2-2 when the problem occurs. If you don't want a draw, all you can do is restart.</p>\n\n",
      "PostDate": "2023-03-29T06:45:52.2360816Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a9775172-bded-4ed6-89c9-001dc7b763ed",
      "UserId": 260569,
      "Username": "DarkLizerd",
      "AvatarUrl": "https://i.imgur.com/HiZKEtPb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "You could also call the match when the first player hits 3 points.\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>You could also call the match when the first player hits 3 points.</p>\n\n",
      "PostDate": "2023-03-29T10:41:55.5776826Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "54a6d5ed-7d3b-4c1a-9d26-67ed45e63f8c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> So it's working great, and I did figure out how to make it so when they both choose the same move it just adds that move back to the list. Unfortunately, I can't figure out what to do when both the player and the enemy end up with the same move as the only move left on their list. They get stuck in an infinite loop and I don't know how to fix that. Any ideas?\r\n\r\nThat was why on the version I made, I didn't have special behaviour for ties and just said \"if there are no moves left on the list, give them the full list back\" … means the game can go on for as long as necessary until someone wins.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>So it's working great, and I did figure out how to make it so when they both choose the same move it just adds that move back to the list. Unfortunately, I can't figure out what to do when both the player and the enemy end up with the same move as the only move left on their list. They get stuck in an infinite loop and I don't know how to fix that. Any ideas?</p>\n</blockquote>\n<p>That was why on the version I made, I didn't have special behaviour for ties and just said \"if there are no moves left on the list, give them the full list back\" … means the game can go on for as long as necessary until someone wins.</p>\n\n",
      "PostDate": "2023-03-30T08:06:30.6204315Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
