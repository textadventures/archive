{
  "Topic": {
    "TopicId": "clil-tteqkuabbbo8dguea",
    "ForumId": "10",
    "Title": "How to check if the player has money",
    "LastUpdated": "2017-12-25T14:21:22.8112386Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "862d0307-7b43-4631-a877-108180186549",
      "UserId": 337894,
      "Username": "DerpTrain",
      "AvatarUrl": "https://secure.gravatar.com/avatar/3e9a327cc3d0403c99fe073fa43d05e9?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "My game is a thing where you are trying to find an item, and along the way you run into a vending machine\r\n\r\nThe vending machine has a verb called 'buy something'\r\n\r\nIf you do it subtracts 2 dollars from your money supply\r\n\r\nBut it will even subtract into the negative?\r\n\r\nSo can anyone tell me how to make it so that the computer will tell me 'You cannot buy this' if I don't have 2 dollars?\r\n\r\nThank you all\r\n\r\nI am using the windows edition",
      "EditableFormat": "markdown",
      "HTML": "<p>My game is a thing where you are trying to find an item, and along the way you run into a vending machine</p>\n<p>The vending machine has a verb called 'buy something'</p>\n<p>If you do it subtracts 2 dollars from your money supply</p>\n<p>But it will even subtract into the negative?</p>\n<p>So can anyone tell me how to make it so that the computer will tell me 'You cannot buy this' if I don't have 2 dollars?</p>\n<p>Thank you all</p>\n<p>I am using the windows edition</p>\n\n",
      "PostDate": "2017-12-25T14:21:22.8112386Z",
      "LastEditDate": "2017-12-25T22:58:20.0287657Z",
      "link": null
    },
    {
      "PostId": "cca0ba94-abd5-41d6-8198-6965c01d3358",
      "UserId": 5574,
      "Username": "R2T1",
      "AvatarUrl": "http://i.imgur.com/32ogfqMb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Check your money first and only allow buying if there is sufficient.\r\n\r\npsuedo code -\r\nif player.money >= item.price then buy item else say\"You don't have enough to buy that\"",
      "EditableFormat": "markdown",
      "HTML": "<p>Check your money first and only allow buying if there is sufficient.</p>\n<p>psuedo code -<br>\nif player.money &gt;= item.price then buy item else say\"You don't have enough to buy that\"</p>\n\n",
      "PostDate": "2017-12-26T00:11:30.2149859Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3644066c-3736-483b-a629-b431093e743c",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It's different, but sufficient.\r\n\r\n```\r\nmsg (\"See something that catches your eye?\")\r\noptions = Split(\"Potion (100);Hyper Potion (200);Ammo (40);Ammo (80)\", \";\")\r\nShowMenu (\"Shop\", options, true) {\r\n  switch (result) {\r\n    case (\"Potion (100)\") {\r\n      if (game.hard = true) {\r\n        if (player.gold >= 100) {\r\n          player.gold = player.gold - 100\r\n          player.potion = player.potion + 1\r\n          msg (\"You bought a Potion.\")\r\n        }\r\n        else {\r\n          msg (\"You don't have enough gold.\")\r\n        }\r\n      }\r\n      else {\r\n        msg (\"The person shakes his head. \\\"Sorry, I can't do that. We're all out.\\\"\")\r\n      }\r\n    }\r\n    case (\"Hyper Potion (200)\") {\r\n      if (game.hard = true) {\r\n        if (player.gold >= 200) {\r\n          player.gold = player.gold - 200\r\n          player.hyper_potion = player.hyper_potion + 1\r\n          msg (\"You bought a Hyper Potion.\")\r\n        }\r\n        else {\r\n          msg (\"You don't have enough gold.\")\r\n        }\r\n      }\r\n      else {\r\n        msg (\"The person shakes his head. \\\"Sorry, I can't do that. We're all out.\\\"\")\r\n      }\r\n    }\r\n    case (\"Ammo (40)\") {\r\n      if (player.gold >= 40) {\r\n        player.gold = player.gold - 40\r\n        player.ammo = player.ammo + 20\r\n      }\r\n      else {\r\n        msg (\"You don't have enough gold.\")\r\n      }\r\n    }\r\n    case (\"Ammo (80)\") {\r\n      if (player.gold >= 80) {\r\n        player.gold = player.gold - 80\r\n        player.ammo = player.ammo + 40\r\n      }\r\n      else {\r\n        msg (\"You don't have enough gold.\")\r\n      }\r\n    }\r\n  }\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>It's different, but sufficient.</p>\n<pre><code>msg (\"See something that catches your eye?\")\noptions = Split(\"Potion (100);Hyper Potion (200);Ammo (40);Ammo (80)\", \";\")\nShowMenu (\"Shop\", options, true) {\n  switch (result) {\n    case (\"Potion (100)\") {\n      if (game.hard = true) {\n        if (player.gold &gt;= 100) {\n          player.gold = player.gold - 100\n          player.potion = player.potion + 1\n          msg (\"You bought a Potion.\")\n        }\n        else {\n          msg (\"You don't have enough gold.\")\n        }\n      }\n      else {\n        msg (\"The person shakes his head. \\\"Sorry, I can't do that. We're all out.\\\"\")\n      }\n    }\n    case (\"Hyper Potion (200)\") {\n      if (game.hard = true) {\n        if (player.gold &gt;= 200) {\n          player.gold = player.gold - 200\n          player.hyper_potion = player.hyper_potion + 1\n          msg (\"You bought a Hyper Potion.\")\n        }\n        else {\n          msg (\"You don't have enough gold.\")\n        }\n      }\n      else {\n        msg (\"The person shakes his head. \\\"Sorry, I can't do that. We're all out.\\\"\")\n      }\n    }\n    case (\"Ammo (40)\") {\n      if (player.gold &gt;= 40) {\n        player.gold = player.gold - 40\n        player.ammo = player.ammo + 20\n      }\n      else {\n        msg (\"You don't have enough gold.\")\n      }\n    }\n    case (\"Ammo (80)\") {\n      if (player.gold &gt;= 80) {\n        player.gold = player.gold - 80\n        player.ammo = player.ammo + 40\n      }\n      else {\n        msg (\"You don't have enough gold.\")\n      }\n    }\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2017-12-26T00:14:33.9939045Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ec09f675-28e8-4395-bdfb-4075f3afc42a",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "here's a quick simple example:\r\n\r\n( Here's a link on a detailed guide on quest structure and its code structure, and also on, using Attributes and the 'if' Script, including arithmetic, addition ~ subtraction ~ multiplication ~ division, operations, and transactional, buying ~ selling, operations: http://textadventures.co.uk/forum/samples/topic/5559/attributes-and-if-script-guide-by-hk )\r\n\r\n(ask if you need help with anything)\r\n\r\n```\r\n<object name=\"room\">\r\n\r\n  <inherit name=\"editor_room\" />\r\n\r\n</object>\r\n\r\n<object name=\"player\">\r\n\r\n  <inherit name=\"editor_object\" />\r\n  <inherit name=\"editor_player\" />\r\n\r\n  <attr name=\"parent\" type=\"object\">room</attr>\r\n\r\n  <attr name=\"currency\" type=\"int\">0</attr>\r\n\r\n</object>\r\n\r\n<object name=\"vending_machine\">\r\n\r\n  <inherit name=\"editor_object\" />\r\n\r\n  <attr name=\"parent\" type=\"object\">room</attr>\r\n\r\n  <attr name=\"item_list\" type=\"stringlist\">\r\n    <value>candy</value>\r\n    <value>chocolate</value>\r\n    <value>soup</value>\r\n    <value>hamburger</value>\r\n  </attr>\r\n\r\n  <attr name=\"buy\" type=\"script\">\r\n\r\n    <![CDATA[\r\n\r\n      show menu (\"Which item do you want to buy?\", this.item_list, false) {\r\n\r\n        item_string_variable = result\r\n        item_object_variable = GetObject (result)\r\n\r\n        if (player.currency < item_object_variable.price) {\r\n\r\n          msg (\"Sorry, but you don't have enough currency for the \" + item_string_variable + \" item\")\r\n\r\n        } else {\r\n\r\n          player.currency = player.currency - item_object_variable.price\r\n\r\n          cloned_object_variable = CloneObject (item_object_variable)\r\n          set (cloned_object_variable, \"original_object\", item_object_variable.name)\r\n\r\n          MoveObject (cloned_object_variable, player)\r\n\r\n          msg (\"You've bought the \" + item_string_variable + \" item\")\r\n\r\n        }\r\n\r\n      }\r\n\r\n    ]]>\r\n\r\n  </attr>\r\n\r\n</object>\r\n\r\n<object name=\"vending_machine_items\">\r\n\r\n  <inherit name=\"editor_room\" />\r\n\r\n  <object name=\"candy\">\r\n\r\n    <inherit name=\"editor_object\" />\r\n\r\n    <attr name=\"price\" type=\"int\">5</attr>\r\n\r\n  </object>\r\n\r\n  <object name=\"chocolate\">\r\n\r\n    <inherit name=\"editor_object\" />\r\n\r\n    <attr name=\"price\" type=\"int\">10</attr>\r\n\r\n  </object>\r\n\r\n  <object name=\"soup\">\r\n\r\n    <inherit name=\"editor_object\" />\r\n\r\n    <attr name=\"price\" type=\"int\">15</attr>\r\n\r\n  </object>\r\n\r\n  <object name=\"hamburger\">\r\n\r\n    <inherit name=\"editor_object\" />\r\n\r\n    <attr name=\"price\" type=\"int\">20</attr>\r\n\r\n  </object>\r\n\r\n</object>\r\n\r\n<verb>\r\n\r\n  <property>buy</property>\r\n  <pattern>buy</pattern>\r\n  <defaultexpression>You can't buy that!</defaultexpression>\r\n\r\n</verb>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>here's a quick simple example:</p>\n<p>( Here's a link on a detailed guide on quest structure and its code structure, and also on, using Attributes and the 'if' Script, including arithmetic, addition ~ subtraction ~ multiplication ~ division, operations, and transactional, buying ~ selling, operations: http://textadventures.co.uk/forum/samples/topic/5559/attributes-and-if-script-guide-by-hk )</p>\n<p>(ask if you need help with anything)</p>\n<pre><code>&lt;object name=\"room\"&gt;\n\n  &lt;inherit name=\"editor_room\" /&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"player\"&gt;\n\n  &lt;inherit name=\"editor_object\" /&gt;\n  &lt;inherit name=\"editor_player\" /&gt;\n\n  &lt;attr name=\"parent\" type=\"object\"&gt;room&lt;/attr&gt;\n\n  &lt;attr name=\"currency\" type=\"int\"&gt;0&lt;/attr&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"vending_machine\"&gt;\n\n  &lt;inherit name=\"editor_object\" /&gt;\n\n  &lt;attr name=\"parent\" type=\"object\"&gt;room&lt;/attr&gt;\n\n  &lt;attr name=\"item_list\" type=\"stringlist\"&gt;\n    &lt;value&gt;candy&lt;/value&gt;\n    &lt;value&gt;chocolate&lt;/value&gt;\n    &lt;value&gt;soup&lt;/value&gt;\n    &lt;value&gt;hamburger&lt;/value&gt;\n  &lt;/attr&gt;\n\n  &lt;attr name=\"buy\" type=\"script\"&gt;\n\n    &lt;![CDATA[\n\n      show menu (\"Which item do you want to buy?\", this.item_list, false) {\n\n        item_string_variable = result\n        item_object_variable = GetObject (result)\n\n        if (player.currency &lt; item_object_variable.price) {\n\n          msg (\"Sorry, but you don't have enough currency for the \" + item_string_variable + \" item\")\n\n        } else {\n\n          player.currency = player.currency - item_object_variable.price\n\n          cloned_object_variable = CloneObject (item_object_variable)\n          set (cloned_object_variable, \"original_object\", item_object_variable.name)\n\n          MoveObject (cloned_object_variable, player)\n\n          msg (\"You've bought the \" + item_string_variable + \" item\")\n\n        }\n\n      }\n\n    ]]&gt;\n\n  &lt;/attr&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"vending_machine_items\"&gt;\n\n  &lt;inherit name=\"editor_room\" /&gt;\n\n  &lt;object name=\"candy\"&gt;\n\n    &lt;inherit name=\"editor_object\" /&gt;\n\n    &lt;attr name=\"price\" type=\"int\"&gt;5&lt;/attr&gt;\n\n  &lt;/object&gt;\n\n  &lt;object name=\"chocolate\"&gt;\n\n    &lt;inherit name=\"editor_object\" /&gt;\n\n    &lt;attr name=\"price\" type=\"int\"&gt;10&lt;/attr&gt;\n\n  &lt;/object&gt;\n\n  &lt;object name=\"soup\"&gt;\n\n    &lt;inherit name=\"editor_object\" /&gt;\n\n    &lt;attr name=\"price\" type=\"int\"&gt;15&lt;/attr&gt;\n\n  &lt;/object&gt;\n\n  &lt;object name=\"hamburger\"&gt;\n\n    &lt;inherit name=\"editor_object\" /&gt;\n\n    &lt;attr name=\"price\" type=\"int\"&gt;20&lt;/attr&gt;\n\n  &lt;/object&gt;\n\n&lt;/object&gt;\n\n&lt;verb&gt;\n\n  &lt;property&gt;buy&lt;/property&gt;\n  &lt;pattern&gt;buy&lt;/pattern&gt;\n  &lt;defaultexpression&gt;You can't buy that!&lt;/defaultexpression&gt;\n\n&lt;/verb&gt;\n</code></pre>\n\n",
      "PostDate": "2017-12-26T10:06:16.9729618Z",
      "LastEditDate": "2017-12-26T10:13:26.7578379Z",
      "link": null
    },
    {
      "PostId": "d5525873-efac-491e-bc59-0b8588427220",
      "UserId": 318253,
      "Username": "K.V.",
      "AvatarUrl": "https://i.imgur.com/Te0Y5FPb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Here is a very basic example (in which you can't actually drink the soda, and the machine has no description):\r\n\r\n```\r\n<!--Saved by Quest 5.7.6404.15496-->\r\n<asl version=\"550\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"Simple Vending\">\r\n    <gameid>3a99a835-1723-423d-9bae-22b14f7d9d8c</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2017</firstpublished>\r\n    <showmoney />\r\n  </game>\r\n  <object name=\"break room\">\r\n    <inherit name=\"editor_room\" />\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n      <money type=\"int\">2</money>\r\n    </object>\r\n    <object name=\"vending machine\">\r\n      <inherit name=\"editor_object\" />\r\n      <feature_usegive />\r\n      <use type=\"script\"><![CDATA[\r\n        // Drinks cost 1 dollar in this example\r\n        if (game.pov.money>0) {\r\n          if (soda.parent = vending machine) {\r\n            MoveObjectHere (soda)\r\n            game.pov.money = game.pov.money - 1\r\n            msg (\"You put a dollar into the machine, and a can of {object:soda} appears.\")\r\n          }\r\n          else {\r\n            msg (\"The machine is sold out.\")\r\n          }\r\n        }\r\n        else {\r\n          msg (\"You have no money.\")\r\n        }\r\n      ]]></use>\r\n      <object name=\"soda\">\r\n        <inherit name=\"editor_object\" />\r\n        <alias>soda</alias>\r\n      </object>\r\n    </object>\r\n    <command name=\"buy_drink_command\">\r\n      <pattern>buy something</pattern>\r\n      <script><![CDATA[\r\n        // Drinks cost 1 dollar in this example\r\n        if (game.pov.money>0) {\r\n          if (soda.parent = vending machine) {\r\n            MoveObjectHere (soda)\r\n            game.pov.money = game.pov.money - 1\r\n            msg (\"You put a dollar into the machine, and a can of {object:soda} appears.\")\r\n          }\r\n          else {\r\n            msg (\"The machine is sold out.\")\r\n          }\r\n        }\r\n        else {\r\n          msg (\"You have no money.\")\r\n        }\r\n      ]]></script>\r\n    </command>\r\n  </object>\r\n</asl>\r\n```\r\n\r\n---\r\nWhen I first saw this post (and before anyone else responded), I started working on an example that became a bit complicated.\r\n\r\nThe machine has a slot, and a tray, buttons, etc., and you can drink the drinks.\r\n\r\nhttp://textadventures.co.uk/forum/quest/topic/s9h31_bc-02rdqogqr7q_g/vending-machine-sodas-only-at-the-moment-work-in-progress\r\n\r\n---\r\n**NOTES**\r\n\r\n- The money feature needs to be enabled under the **Game=>Features** tab for my example to work.\r\n\r\n\r\n- R2T1's and HK's examples handle different items with different prices.  You'd probably need to change ```player.currency``` to ```player.money``` in HK's example, though, unless you set up the ```currency``` attribute.\r\n\r\n- JMNE's example depends on many attributes (such as ```player.gold```, ```player.ammo```, and ```player.hyper_potion```), and errors will pop up left and right if those aren't set up in your game.\r\n\r\n---\r\n**ALSO**\r\n\r\nI use ```game.pov``` instead of ```player``` because this will handle the scripts if you can play as more than one character.\r\n\r\nIf you had an object named \"Bob\", and you could play as Bob, changing (or checking) any attributes on **player** while playing as **Bob** would be pointless.  **Bob** and **player** are two totally separate objects.\r\n\r\nSo, I use ```game.pov.money```, and Quest knows it should change (or check) the attributes of whomever I am playing as.  (This works fine if you only play as the **player** object, as well.)",
      "EditableFormat": "markdown",
      "HTML": "<p>Here is a very basic example (in which you can't actually drink the soda, and the machine has no description):</p>\n<pre><code>&lt;!--Saved by Quest 5.7.6404.15496--&gt;\n&lt;asl version=\"550\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"Simple Vending\"&gt;\n    &lt;gameid&gt;3a99a835-1723-423d-9bae-22b14f7d9d8c&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2017&lt;/firstpublished&gt;\n    &lt;showmoney /&gt;\n  &lt;/game&gt;\n  &lt;object name=\"break room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n      &lt;money type=\"int\"&gt;2&lt;/money&gt;\n    &lt;/object&gt;\n    &lt;object name=\"vending machine\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;feature_usegive /&gt;\n      &lt;use type=\"script\"&gt;&lt;![CDATA[\n        // Drinks cost 1 dollar in this example\n        if (game.pov.money&gt;0) {\n          if (soda.parent = vending machine) {\n            MoveObjectHere (soda)\n            game.pov.money = game.pov.money - 1\n            msg (\"You put a dollar into the machine, and a can of {object:soda} appears.\")\n          }\n          else {\n            msg (\"The machine is sold out.\")\n          }\n        }\n        else {\n          msg (\"You have no money.\")\n        }\n      ]]&gt;&lt;/use&gt;\n      &lt;object name=\"soda\"&gt;\n        &lt;inherit name=\"editor_object\" /&gt;\n        &lt;alias&gt;soda&lt;/alias&gt;\n      &lt;/object&gt;\n    &lt;/object&gt;\n    &lt;command name=\"buy_drink_command\"&gt;\n      &lt;pattern&gt;buy something&lt;/pattern&gt;\n      &lt;script&gt;&lt;![CDATA[\n        // Drinks cost 1 dollar in this example\n        if (game.pov.money&gt;0) {\n          if (soda.parent = vending machine) {\n            MoveObjectHere (soda)\n            game.pov.money = game.pov.money - 1\n            msg (\"You put a dollar into the machine, and a can of {object:soda} appears.\")\n          }\n          else {\n            msg (\"The machine is sold out.\")\n          }\n        }\n        else {\n          msg (\"You have no money.\")\n        }\n      ]]&gt;&lt;/script&gt;\n    &lt;/command&gt;\n  &lt;/object&gt;\n&lt;/asl&gt;\n</code></pre>\n<hr>\n<p>When I first saw this post (and before anyone else responded), I started working on an example that became a bit complicated.</p>\n<p>The machine has a slot, and a tray, buttons, etc., and you can drink the drinks.</p>\n<p>http://textadventures.co.uk/forum/quest/topic/s9h31_bc-02rdqogqr7q_g/vending-machine-sodas-only-at-the-moment-work-in-progress</p>\n<hr>\n<p><strong>NOTES</strong></p>\n<ul>\n<li>The money feature needs to be enabled under the <strong>Game=&gt;Features</strong> tab for my example to work.</li>\n</ul>\n<ul>\n<li>\n<p>R2T1's and HK's examples handle different items with different prices.  You'd probably need to change <code>player.currency</code> to <code>player.money</code> in HK's example, though, unless you set up the <code>currency</code> attribute.</p>\n</li>\n<li>\n<p>JMNE's example depends on many attributes (such as <code>player.gold</code>, <code>player.ammo</code>, and <code>player.hyper_potion</code>), and errors will pop up left and right if those aren't set up in your game.</p>\n</li>\n</ul>\n<hr>\n<p><strong>ALSO</strong></p>\n<p>I use <code>game.pov</code> instead of <code>player</code> because this will handle the scripts if you can play as more than one character.</p>\n<p>If you had an object named \"Bob\", and you could play as Bob, changing (or checking) any attributes on <strong>player</strong> while playing as <strong>Bob</strong> would be pointless.  <strong>Bob</strong> and <strong>player</strong> are two totally separate objects.</p>\n<p>So, I use <code>game.pov.money</code>, and Quest knows it should change (or check) the attributes of whomever I am playing as.  (This works fine if you only play as the <strong>player</strong> object, as well.)</p>\n\n",
      "PostDate": "2017-12-26T13:25:58.7981099Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5006545a-0d51-4ead-8b99-26f1fb7a466b",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This help page may also be useful:\r\nhttp://docs.textadventures.co.uk/quest/shop.html",
      "EditableFormat": "markdown",
      "HTML": "<p>This help page may also be useful:<br>\nhttp://docs.textadventures.co.uk/quest/shop.html</p>\n\n",
      "PostDate": "2017-12-26T13:32:12.0467587Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
