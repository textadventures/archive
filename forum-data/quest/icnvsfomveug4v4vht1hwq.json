{
  "Topic": {
    "TopicId": "icnvsfomveug4v4vht1hwq",
    "ForumId": "10",
    "Title": "Need Help With Potions",
    "LastUpdated": "2019-08-15T21:32:47.6085185Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "c0d382ea-4d04-4696-81bb-2ba28b37d4ed",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "(filler text)\r\nI'm working on my pokemom game. I can't get the potions or the money/pokedollars script to work.\r\n\r\nThis is my code.\r\n```\r\nplayer.current_room = player.parent\r\nplayer.old_room = player.current_room\r\nMoveObject (player, Battle Room)\r\nif (HasInt(game, \"crittercount\")) {\r\n  game.crittercount = game.crittercount + 1\r\n}\r\nelse {\r\n  game.crittercount = 1\r\n}\r\ncreate (\"crittercount\" + game.crittercount)\r\nobj = GetObject(\"crittercount\" + game.crittercount)\r\nobj.parent = room\r\nobj.old_parent = room\r\nobj.dead = false\r\nobj.parent = player.parent\r\nobj.displayverbs = Split(\"Look at;Attack;Direct Hit;Stat;Status\", \";\")\r\nobj.changedhitpoints => {\r\n  if (this.hitpoints < 1) {\r\n    this.dead = true\r\n    msg (\"It whited out!\")\r\n    player.exp = player.exp + 20\r\n    player.pokedollar = player.pokedollar + this.old_parent.pokedollar\r\n    RemoveObject (this)\r\n    player.parent = player.old_room\r\n    AddToInventory (Zephyr Badge)\r\n    player.badge = player.badge + 1\r\n  }\r\n}\r\nobj.hero = false\r\nobj.alias = \"Pidgeotto\"\r\nobj.listalias = CapFirst(obj.alias)\r\nobj.look = ProcessText(\"A \" + obj.alias + \". A flying type. A common sight in forests and woods. It's very docile. It flaps its wings at ground level to kick up blinding sand. If threatened, it rapidly flaps its wings in the grass, stirring up a dust cloud that drives insect prey out into the open.\")\r\nobj.hitpoints = 40\r\nobj.max = 40\r\nobj.damage = 9\r\nobj.maxdamage = 9\r\nobj.attack = 6\r\nobj.maxattack = 6\r\nobj.defence = 6\r\nobj.maxdefence = 6\r\nobj.armour = 10\r\nobj.maxarmour = 10\r\nobj.selectweapon => {\r\n  this.weapon = GetObject(PickOneString(\"Tackle;Gust\"))\r\n}\r\nobj.firearmdamage = 12\r\nobj.firearmattack = 6\r\nobj.ammo = 20\r\nobj.ammomax = 20\r\nobj.choosepotion => {\r\n  if (this.hitpoints < this.max / 4) {\r\n    if (RandomChance(25)) {\r\n      if (this.old_parent.potion = 1) {\r\n        this.old_parent.potion = obj.old_parent.potion - 1\r\n        this.hitpoints = this.max\r\n        msg (this.old_parent.potion + \" used an Oran Berry on Hoothoot!<br/>Health was restored!\")\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\nThid code is supposed to make Falkner, the gym leader, the obj.old_parent.\r\n```\r\nobj.parent = room\r\nobj.old_parent = room\r\n```\r\n\r\nWhich is then supposed to be used in this code.\r\n\r\n```\r\nobj.choosepotion => {\r\n  if (this.hitpoints < this.max / 4) {\r\n    if (RandomChance(25)) {\r\n      if (this.old_parent.potion = 1) {\r\n        this.old_parent.potion = obj.old_parent.potion - 1\r\n        this.hitpoints = this.max\r\n        msg (this.old_parent.potion + \" used an Oran Berry on Hoothoot!<br/>Health was restored!\")\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nBut none of it is working! Please help!\r\n\r\nCoincidentally, this code SHOULD work. I haven't had the luck for it to use a potion, bit it got the money right. The parent is the Trainer.\r\n\r\n```\r\nplayer.current_room = player.parent\r\nplayer.old_room = player.current_room\r\nMoveObject (player, Battle Room)\r\nif (HasInt(game, \"crittercount\")) {\r\n  game.crittercount = game.crittercount + 1\r\n}\r\nelse {\r\n  game.crittercount = 1\r\n}\r\ncreate (\"crittercount\" + game.crittercount)\r\nobj = GetObject(\"crittercount\" + game.crittercount)\r\nobj.dead = false\r\nobj.parent = room\r\nobj.parent = obj.old_parent\r\nobj.parent = player.parent\r\nobj.changedhitpoints => {\r\n  if (this.hitpoints < 1) {\r\n    this.dead = true\r\n    msg (\"It whited out!\")\r\n    player.exp = player.exp + 20\r\n    player.pokedollar = player.pokedollar + Trainer.pokedollar\r\n    RemoveObject (this)\r\n    player.parent = player.old_room\r\n  }\r\n}\r\nobj.displayverbs = Split(\"Look at;Attack;Direct Hit;Stat;Status\", \";\")\r\nobj.hero = false\r\nobj.alias = \"Hoothoot\"\r\nobj.listalias = CapFirst(obj.alias)\r\nobj.look = ProcessText(\"A \" + obj.alias + \". A flying type. It has a perfect sense of time. Whatever happens, it keeps rhythm by precisely tilting its head in time. It begins to hoot at the same time every day. Some trainers use them in place of clocks.\")\r\nobj.hitpoints = 25\r\nobj.max = 25\r\nobj.damage = 2\r\nobj.maxdamage = 2\r\nobj.attack = 2\r\nobj.maxattack = 2\r\nobj.defence = 3\r\nobj.maxdefence = 3\r\nobj.armour = 0\r\nobj.maxarmour = 0\r\nobj.selectweapon => {\r\n  this.weapon = GetObject(PickOneString(\"Struggle;Tackle;Peck\"))\r\n}\r\nobj.firearmdamage = 5\r\nobj.firearmattack = 3\r\nobj.ammo = 20\r\nobj.ammomax = 20\r\nobj.choosepotion => {\r\n  if (this.hitpoints < this.max / 8) {\r\n    if (RandomChance(25)) {\r\n      if (Trainer.potion = 1) {\r\n        Trainer.potion = Trainer.potion - 1\r\n        this.hitpoints = this.max\r\n        msg (\"Harrison used an Oran Berry on Hoothoot!<br/>Health was restored!\")\r\n      }\r\n    }\r\n  }\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>(filler text)<br>\nI'm working on my pokemom game. I can't get the potions or the money/pokedollars script to work.</p>\n<p>This is my code.</p>\n<pre><code>player.current_room = player.parent\nplayer.old_room = player.current_room\nMoveObject (player, Battle Room)\nif (HasInt(game, \"crittercount\")) {\n  game.crittercount = game.crittercount + 1\n}\nelse {\n  game.crittercount = 1\n}\ncreate (\"crittercount\" + game.crittercount)\nobj = GetObject(\"crittercount\" + game.crittercount)\nobj.parent = room\nobj.old_parent = room\nobj.dead = false\nobj.parent = player.parent\nobj.displayverbs = Split(\"Look at;Attack;Direct Hit;Stat;Status\", \";\")\nobj.changedhitpoints =&gt; {\n  if (this.hitpoints &lt; 1) {\n    this.dead = true\n    msg (\"It whited out!\")\n    player.exp = player.exp + 20\n    player.pokedollar = player.pokedollar + this.old_parent.pokedollar\n    RemoveObject (this)\n    player.parent = player.old_room\n    AddToInventory (Zephyr Badge)\n    player.badge = player.badge + 1\n  }\n}\nobj.hero = false\nobj.alias = \"Pidgeotto\"\nobj.listalias = CapFirst(obj.alias)\nobj.look = ProcessText(\"A \" + obj.alias + \". A flying type. A common sight in forests and woods. It's very docile. It flaps its wings at ground level to kick up blinding sand. If threatened, it rapidly flaps its wings in the grass, stirring up a dust cloud that drives insect prey out into the open.\")\nobj.hitpoints = 40\nobj.max = 40\nobj.damage = 9\nobj.maxdamage = 9\nobj.attack = 6\nobj.maxattack = 6\nobj.defence = 6\nobj.maxdefence = 6\nobj.armour = 10\nobj.maxarmour = 10\nobj.selectweapon =&gt; {\n  this.weapon = GetObject(PickOneString(\"Tackle;Gust\"))\n}\nobj.firearmdamage = 12\nobj.firearmattack = 6\nobj.ammo = 20\nobj.ammomax = 20\nobj.choosepotion =&gt; {\n  if (this.hitpoints &lt; this.max / 4) {\n    if (RandomChance(25)) {\n      if (this.old_parent.potion = 1) {\n        this.old_parent.potion = obj.old_parent.potion - 1\n        this.hitpoints = this.max\n        msg (this.old_parent.potion + \" used an Oran Berry on Hoothoot!&lt;br/&gt;Health was restored!\")\n      }\n    }\n  }\n}\n</code></pre>\n<p>Thid code is supposed to make Falkner, the gym leader, the obj.old_parent.</p>\n<pre><code>obj.parent = room\nobj.old_parent = room\n</code></pre>\n<p>Which is then supposed to be used in this code.</p>\n<pre><code>obj.choosepotion =&gt; {\n  if (this.hitpoints &lt; this.max / 4) {\n    if (RandomChance(25)) {\n      if (this.old_parent.potion = 1) {\n        this.old_parent.potion = obj.old_parent.potion - 1\n        this.hitpoints = this.max\n        msg (this.old_parent.potion + \" used an Oran Berry on Hoothoot!&lt;br/&gt;Health was restored!\")\n      }\n    }\n  }\n}\n</code></pre>\n<p>But none of it is working! Please help!</p>\n<p>Coincidentally, this code SHOULD work. I haven't had the luck for it to use a potion, bit it got the money right. The parent is the Trainer.</p>\n<pre><code>player.current_room = player.parent\nplayer.old_room = player.current_room\nMoveObject (player, Battle Room)\nif (HasInt(game, \"crittercount\")) {\n  game.crittercount = game.crittercount + 1\n}\nelse {\n  game.crittercount = 1\n}\ncreate (\"crittercount\" + game.crittercount)\nobj = GetObject(\"crittercount\" + game.crittercount)\nobj.dead = false\nobj.parent = room\nobj.parent = obj.old_parent\nobj.parent = player.parent\nobj.changedhitpoints =&gt; {\n  if (this.hitpoints &lt; 1) {\n    this.dead = true\n    msg (\"It whited out!\")\n    player.exp = player.exp + 20\n    player.pokedollar = player.pokedollar + Trainer.pokedollar\n    RemoveObject (this)\n    player.parent = player.old_room\n  }\n}\nobj.displayverbs = Split(\"Look at;Attack;Direct Hit;Stat;Status\", \";\")\nobj.hero = false\nobj.alias = \"Hoothoot\"\nobj.listalias = CapFirst(obj.alias)\nobj.look = ProcessText(\"A \" + obj.alias + \". A flying type. It has a perfect sense of time. Whatever happens, it keeps rhythm by precisely tilting its head in time. It begins to hoot at the same time every day. Some trainers use them in place of clocks.\")\nobj.hitpoints = 25\nobj.max = 25\nobj.damage = 2\nobj.maxdamage = 2\nobj.attack = 2\nobj.maxattack = 2\nobj.defence = 3\nobj.maxdefence = 3\nobj.armour = 0\nobj.maxarmour = 0\nobj.selectweapon =&gt; {\n  this.weapon = GetObject(PickOneString(\"Struggle;Tackle;Peck\"))\n}\nobj.firearmdamage = 5\nobj.firearmattack = 3\nobj.ammo = 20\nobj.ammomax = 20\nobj.choosepotion =&gt; {\n  if (this.hitpoints &lt; this.max / 8) {\n    if (RandomChance(25)) {\n      if (Trainer.potion = 1) {\n        Trainer.potion = Trainer.potion - 1\n        this.hitpoints = this.max\n        msg (\"Harrison used an Oran Berry on Hoothoot!&lt;br/&gt;Health was restored!\")\n      }\n    }\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2019-08-15T21:32:47.6085185Z",
      "LastEditDate": "2019-08-16T17:22:05.0733805Z",
      "link": null
    },
    {
      "PostId": "f22ff941-0add-4d9c-85e7-423dd47af05f",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Anything?",
      "EditableFormat": "markdown",
      "HTML": "<p>Anything?</p>\n\n",
      "PostDate": "2019-08-16T12:47:40.476532Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "d6658774-0947-4124-8ba4-5962b479a04c",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So the variable `room` is the trainer? Why is it called \"room\"?\r\n\r\nIt would be a lot easier to debug your code if you named variables for what they actually are. In this code, you're using the variable \"room\", but we can't see what that is set to.",
      "EditableFormat": "markdown",
      "HTML": "<p>So the variable <code>room</code> is the trainer? Why is it called \"room\"?</p>\n<p>It would be a lot easier to debug your code if you named variables for what they actually are. In this code, you're using the variable \"room\", but we can't see what that is set to.</p>\n\n",
      "PostDate": "2019-08-16T16:48:49.3022134Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cd0132dc-7158-4e96-831f-0641e6674603",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So Falkner (the trainer) is what I want to be the room. That way, Falkner is the obj.old_parent.\r\n\r\nRoom = room\r\n\r\nI already tried object. I'm just testing everything I can think of right now.\r\n\r\nI am simply trying to find a way to store the trainer's name in an attribute. You know how Pokemon are stpred and carried around in pokeballs? The trainer carries the pokeballs. The trainer also carries items, like potions.",
      "EditableFormat": "markdown",
      "HTML": "<p>So Falkner (the trainer) is what I want to be the room. That way, Falkner is the obj.old_parent.</p>\n<p>Room = room</p>\n<p>I already tried object. I'm just testing everything I can think of right now.</p>\n<p>I am simply trying to find a way to store the trainer's name in an attribute. You know how Pokemon are stpred and carried around in pokeballs? The trainer carries the pokeballs. The trainer also carries items, like potions.</p>\n\n",
      "PostDate": "2019-08-16T16:57:43.2279818Z",
      "LastEditDate": "2019-08-16T17:19:37.1115198Z",
      "link": null
    },
    {
      "PostId": "bf23aa54-8183-4f79-a190-888b4a954722",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I revised the code a bit, but not much. It still isn't working. I keep getting the \"cannot use + add arithmetic with object\" error. It thinks obj.old_parent.pokedollar is an object.\r\n\r\n```\r\nplayer.current_room = player.parent\r\nplayer.old_room = player.current_room\r\nMoveObject (player, Battle Room)\r\nif (HasInt(game, \"crittercount\")) {\r\n  game.crittercount = game.crittercount + 1\r\n}\r\nelse {\r\n  game.crittercount = 1\r\n}\r\ncreate (\"crittercount\" + game.crittercount)\r\nobj = GetObject(\"crittercount\" + game.crittercount)\r\nobj.parent = room\r\nobj.old_parent = obj.parent\r\nobj.dead = false\r\nobj.parent = player.parent\r\nobj.displayverbs = Split(\"Look at;Attack;Direct Hit;Stat;Status\", \";\")\r\nobj.changedhitpoints => {\r\n  if (this.hitpoints < 1) {\r\n    this.dead = true\r\n    msg (\"It whited out!\")\r\n    player.exp = player.exp + 20\r\n    player.pokedollar = player.pokedollar + this.old_parent.pokedollar\r\n    RemoveObject (this)\r\n    player.parent = player.old_room\r\n    AddToInventory (Zephyr Badge)\r\n    player.badge = player.badge + 1\r\n  }\r\n}\r\nobj.hero = false\r\nobj.alias = \"Pidgeotto\"\r\nobj.listalias = CapFirst(obj.alias)\r\nobj.look = ProcessText(\"A \" + obj.alias + \". A flying type. A common sight in forests and woods. It's very docile. It flaps its wings at ground level to kick up blinding sand. If threatened, it rapidly flaps its wings in the grass, stirring up a dust cloud that drives insect prey out into the open.\")\r\nobj.hitpoints = 40\r\nobj.max = 40\r\nobj.damage = 9\r\nobj.maxdamage = 9\r\nobj.attack = 6\r\nobj.maxattack = 6\r\nobj.defence = 6\r\nobj.maxdefence = 6\r\nobj.armour = 10\r\nobj.maxarmour = 10\r\nobj.selectweapon => {\r\n  this.weapon = GetObject(PickOneString(\"Tackle;Gust\"))\r\n}\r\nobj.firearmdamage = 12\r\nobj.firearmattack = 6\r\nobj.ammo = 20\r\nobj.ammomax = 20\r\nobj.choosepotion => {\r\n  if (this.hitpoints < this.max / 4) {\r\n    if (RandomChance(25)) {\r\n      if (this.old_parent.potion = 1) {\r\n        this.old_parent.potion = obj.old_parent.potion - 1\r\n        this.hitpoints = this.max\r\n        msg (this.old_parent.potion + \" used an Oran Berry on \" + this.name + \"<br/>Health was restored!\")\r\n      }\r\n    }\r\n  }\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>I revised the code a bit, but not much. It still isn't working. I keep getting the \"cannot use + add arithmetic with object\" error. It thinks obj.old_parent.pokedollar is an object.</p>\n<pre><code>player.current_room = player.parent\nplayer.old_room = player.current_room\nMoveObject (player, Battle Room)\nif (HasInt(game, \"crittercount\")) {\n  game.crittercount = game.crittercount + 1\n}\nelse {\n  game.crittercount = 1\n}\ncreate (\"crittercount\" + game.crittercount)\nobj = GetObject(\"crittercount\" + game.crittercount)\nobj.parent = room\nobj.old_parent = obj.parent\nobj.dead = false\nobj.parent = player.parent\nobj.displayverbs = Split(\"Look at;Attack;Direct Hit;Stat;Status\", \";\")\nobj.changedhitpoints =&gt; {\n  if (this.hitpoints &lt; 1) {\n    this.dead = true\n    msg (\"It whited out!\")\n    player.exp = player.exp + 20\n    player.pokedollar = player.pokedollar + this.old_parent.pokedollar\n    RemoveObject (this)\n    player.parent = player.old_room\n    AddToInventory (Zephyr Badge)\n    player.badge = player.badge + 1\n  }\n}\nobj.hero = false\nobj.alias = \"Pidgeotto\"\nobj.listalias = CapFirst(obj.alias)\nobj.look = ProcessText(\"A \" + obj.alias + \". A flying type. A common sight in forests and woods. It's very docile. It flaps its wings at ground level to kick up blinding sand. If threatened, it rapidly flaps its wings in the grass, stirring up a dust cloud that drives insect prey out into the open.\")\nobj.hitpoints = 40\nobj.max = 40\nobj.damage = 9\nobj.maxdamage = 9\nobj.attack = 6\nobj.maxattack = 6\nobj.defence = 6\nobj.maxdefence = 6\nobj.armour = 10\nobj.maxarmour = 10\nobj.selectweapon =&gt; {\n  this.weapon = GetObject(PickOneString(\"Tackle;Gust\"))\n}\nobj.firearmdamage = 12\nobj.firearmattack = 6\nobj.ammo = 20\nobj.ammomax = 20\nobj.choosepotion =&gt; {\n  if (this.hitpoints &lt; this.max / 4) {\n    if (RandomChance(25)) {\n      if (this.old_parent.potion = 1) {\n        this.old_parent.potion = obj.old_parent.potion - 1\n        this.hitpoints = this.max\n        msg (this.old_parent.potion + \" used an Oran Berry on \" + this.name + \"&lt;br/&gt;Health was restored!\")\n      }\n    }\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2019-08-16T17:29:59.4233379Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5b5dcd10-386e-4ad9-8d80-8c0b48ce380c",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hello.\r\n\r\nI'll give this a shot.\r\n\r\nBreaking the beginning of the code down . . .\r\n\r\nThe first bit:\r\n\r\n```\r\nplayer.current_room = player.parent\r\nplayer.old_room = player.current_room\r\nMoveObject (player, Battle Room)\r\nif (HasInt(game, \"crittercount\")) {\r\n  game.crittercount = game.crittercount + 1\r\n}\r\nelse {\r\n  game.crittercount = 1\r\n}\r\ncreate (\"crittercount\" + game.crittercount)\r\nobj = GetObject(\"crittercount\" + game.crittercount)\r\n```\r\n\r\n---\r\nAt this point, the ```player``` is in ```Battle Room```.\r\n\r\nAlso, the ```obj``` variable is pointing to a newly created object which has no ```parent``` attribute set yet.\r\n\r\nMost importantly, though, a ```room``` variable has <u>not</u> been created.  So, the next line of code will throw an error:\r\n\r\n```\r\nobj.parent = room\r\n```\r\n\r\n---\r\nIt appears that you are writing this code specifically for Pidgeotto.  So, as long as ```Falkner``` is definitely the desired target of ```obj.parent``` in this code, you might as well just change the above line of code to the following:\r\n\r\n```\r\nobj.parent = Falkner\r\n```\r\n\r\n---\r\nAlternatively, you could just do this to set a ```trainer``` attribute which will point to ```Falkner```:\r\n\r\n```\r\nobj.trainer = Falkner\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Hello.</p>\n<p>I'll give this a shot.</p>\n<p>Breaking the beginning of the code down . . .</p>\n<p>The first bit:</p>\n<pre><code>player.current_room = player.parent\nplayer.old_room = player.current_room\nMoveObject (player, Battle Room)\nif (HasInt(game, \"crittercount\")) {\n  game.crittercount = game.crittercount + 1\n}\nelse {\n  game.crittercount = 1\n}\ncreate (\"crittercount\" + game.crittercount)\nobj = GetObject(\"crittercount\" + game.crittercount)\n</code></pre>\n<hr>\n<p>At this point, the <code>player</code> is in <code>Battle Room</code>.</p>\n<p>Also, the <code>obj</code> variable is pointing to a newly created object which has no <code>parent</code> attribute set yet.</p>\n<p>Most importantly, though, a <code>room</code> variable has <u>not</u> been created.  So, the next line of code will throw an error:</p>\n<pre><code>obj.parent = room\n</code></pre>\n<hr>\n<p>It appears that you are writing this code specifically for Pidgeotto.  So, as long as <code>Falkner</code> is definitely the desired target of <code>obj.parent</code> in this code, you might as well just change the above line of code to the following:</p>\n<pre><code>obj.parent = Falkner\n</code></pre>\n<hr>\n<p>Alternatively, you could just do this to set a <code>trainer</code> attribute which will point to <code>Falkner</code>:</p>\n<pre><code>obj.trainer = Falkner\n</code></pre>\n\n",
      "PostDate": "2019-08-16T22:34:39.2134916Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5adf9fba-b55c-4d94-8e05-437e77f2d5d1",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "No KV, ```obj.parent = room``` is the same code the Pixie uses for his zombie apocalypse game, and it's correct.\r\n\r\nobject.parent = Falkner\r\n\r\nYeah, but what am I gonna do for Stacie, Stephanie, Tyler, Jake, Patrick, Paul, Hillary, Zack, Gary....\r\n\r\nPoint is, I need something I can copy-paste.",
      "EditableFormat": "markdown",
      "HTML": "<p>No KV, <code>obj.parent = room</code> is the same code the Pixie uses for his zombie apocalypse game, and it's correct.</p>\n<p>object.parent = Falkner</p>\n<p>Yeah, but what am I gonna do for Stacie, Stephanie, Tyler, Jake, Patrick, Paul, Hillary, Zack, Gary....</p>\n<p>Point is, I need something I can copy-paste.</p>\n\n",
      "PostDate": "2019-08-16T22:44:28.9960103Z",
      "LastEditDate": "2019-08-16T22:50:37.1805041Z",
      "link": null
    },
    {
      "PostId": "a990c4b3-4af5-4dd8-a28a-bf5031a4c1f3",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Most importantly, though, a `room` variable has not been created.\r\n\r\nI think it's a parameter to the function. In which case, check what is being passed to it.\r\n\r\nCalling the variable `room` when it isn't a room is still really dumb, though. Giving variables/attributes names that don't indicate their purpose just makes it harder for anyone who wants to help.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Most importantly, though, a <code>room</code> variable has not been created.</p>\n</blockquote>\n<p>I think it's a parameter to the function. In which case, check what is being passed to it.</p>\n<p>Calling the variable <code>room</code> when it isn't a room is still really dumb, though. Giving variables/attributes names that don't indicate their purpose just makes it harder for anyone who wants to help.</p>\n\n",
      "PostDate": "2019-08-16T23:42:38.6946206Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f20cc8be-accd-47dd-95d3-a7631cd9ffaf",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "And just to complicate things...\r\n```\r\nplayer.current_room = player.parent\r\nplayer.old_room = player.current_room\r\n```\r\nThis code doesn't seem to make sense, as both ```player.current_room``` and ```player.old_room``` will then be identical.  Maybe the order of these lines should be reversed?\r\n```\r\nplayer.old_room = player.current_room\r\nplayer.current_room = player.parent\r\n```\r\nThis way, ```player.current_room``` will be the current room, and ```player.old_room``` will be the last different room (if this code is run as a change script) or last turn's room (if this code is run as a turn script)?",
      "EditableFormat": "markdown",
      "HTML": "<p>And just to complicate things...</p>\n<pre><code>player.current_room = player.parent\nplayer.old_room = player.current_room\n</code></pre>\n<p>This code doesn't seem to make sense, as both <code>player.current_room</code> and <code>player.old_room</code> will then be identical.  Maybe the order of these lines should be reversed?</p>\n<pre><code>player.old_room = player.current_room\nplayer.current_room = player.parent\n</code></pre>\n<p>This way, <code>player.current_room</code> will be the current room, and <code>player.old_room</code> will be the last different room (if this code is run as a change script) or last turn's room (if this code is run as a turn script)?</p>\n\n",
      "PostDate": "2019-08-17T01:13:42.6665238Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cbe30cf8-e67e-430e-8801-316dd8ada2a2",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">Yeah, but what am I gonna do for Stacie, Stephanie, Tyler, Jake, Patrick, Paul, Hillary, Zack, Gary....\r\n\r\nI assumed this line of code (from your script) rendered that question moot:\r\n\r\n```\r\nobj.alias = \"Pidgeotto\"\r\n```\r\n\r\n---\r\n>I think it's a parameter to the function.\r\n\r\nOh.\r\n\r\n---\r\n>I keep getting the \"cannot use + add arithmetic with object\" error.  It thinks obj.old_parent.pokedollar is an object.\r\n\r\nHrmm . . .\r\n\r\nIs ```obj.old_parent``` actually defined?  I think Quest treats undefined attributes as if they were empty objects.\r\n\r\nAnyway, if you were to copy and paste the entire error message for us, that might shed light on something we're not seeing.\r\n\r\n---\r\n> And just to complicate things...\r\n\r\nThat bit of her code runs before moving the ```player```.  So, in this code, it probably works correctly.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Yeah, but what am I gonna do for Stacie, Stephanie, Tyler, Jake, Patrick, Paul, Hillary, Zack, Gary....</p>\n</blockquote>\n<p>I assumed this line of code (from your script) rendered that question moot:</p>\n<pre><code>obj.alias = \"Pidgeotto\"\n</code></pre>\n<hr>\n<blockquote>\n<p>I think it's a parameter to the function.</p>\n</blockquote>\n<p>Oh.</p>\n<hr>\n<blockquote>\n<p>I keep getting the \"cannot use + add arithmetic with object\" error.  It thinks obj.old_parent.pokedollar is an object.</p>\n</blockquote>\n<p>Hrmm . . .</p>\n<p>Is <code>obj.old_parent</code> actually defined?  I think Quest treats undefined attributes as if they were empty objects.</p>\n<p>Anyway, if you were to copy and paste the entire error message for us, that might shed light on something we're not seeing.</p>\n<hr>\n<blockquote>\n<p>And just to complicate things...</p>\n</blockquote>\n<p>That bit of her code runs before moving the <code>player</code>.  So, in this code, it probably works correctly.</p>\n\n",
      "PostDate": "2019-08-17T02:53:02.9540205Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5b66d9bc-790e-4d21-86c7-141dd9b061f9",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@Dcoder KV is right, now anyways. Also, the code came from hegemonkhan, so it isn't the shortest code.",
      "EditableFormat": "markdown",
      "HTML": "<p>@Dcoder KV is right, now anyways. Also, the code came from hegemonkhan, so it isn't the shortest code.</p>\n\n",
      "PostDate": "2019-08-17T03:55:39.2355756Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b377785c-b04c-41dc-a293-f3427674e2bb",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Alright. I printed an expression for obj.old_parent, obj.old_parent is Falkners Gym 6.\r\n\r\nI made new code.\r\n\r\n```\r\nplayer.current_room = player.parent\r\nplayer.old_room = player.current_room\r\nMoveObject (player, Battle Room)\r\nif (HasInt(game, \"crittercount\")) {\r\n  game.crittercount = game.crittercount + 1\r\n}\r\nelse {\r\n  game.crittercount = 1\r\n}\r\ncreate (\"crittercount\" + game.crittercount)\r\nobj = GetObject(\"crittercount\" + game.crittercount)\r\nobj.parent = room\r\nobj.old_parent = obj.parent\r\nGetDirectChildren (obj.parent)\r\nif (HasAttribute(result, \"lose\")) {\r\n  this.name = obj.old_parent\r\n}\r\nobj.dead = false\r\nobj.parent = player.parent\r\nobj.displayverbs = Split(\"Look at;Attack;Direct Hit;Stat;Status\", \";\")\r\nobj.changedhitpoints => {\r\n  if (this.hitpoints < 1) {\r\n    this.dead = true\r\n    msg (\"It whited out!\")\r\n    player.exp = player.exp + 20\r\n    player.pokedollar = player.pokedollar + this.old_parent.pokedollar\r\n    RemoveObject (this)\r\n    player.parent = player.old_room\r\n    AddToInventory (Zephyr Badge)\r\n    player.badge = player.badge + 1\r\n  }\r\n}\r\nobj.hero = false\r\nobj.alias = \"Pidgeotto\"\r\nobj.listalias = CapFirst(obj.alias)\r\nobj.look = ProcessText(\"A \" + obj.alias + \". A flying type. A common sight in forests and woods. It's very docile. It flaps its wings at ground level to kick up blinding sand. If threatened, it rapidly flaps its wings in the grass, stirring up a dust cloud that drives insect prey out into the open.\")\r\nobj.hitpoints = 40\r\nobj.max = 40\r\nobj.damage = 9\r\nobj.maxdamage = 9\r\nobj.attack = 6\r\nobj.maxattack = 6\r\nobj.defence = 6\r\nobj.maxdefence = 6\r\nobj.armour = 10\r\nobj.maxarmour = 10\r\nobj.selectweapon => {\r\n  this.weapon = GetObject(PickOneString(\"Tackle;Gust\"))\r\n}\r\nobj.firearmdamage = 12\r\nobj.firearmattack = 6\r\nobj.ammo = 20\r\nobj.ammomax = 20\r\nobj.choosepotion => {\r\n  if (this.hitpoints < this.max / 4) {\r\n    if (RandomChance(25)) {\r\n      if (this.old_parent.potion = 1) {\r\n        this.old_parent.potion = obj.old_parent.potion - 1\r\n        this.hitpoints = this.max\r\n        msg (this.old_parent.potion + \" used an Oran Berry on \" + this.name + \"<br/>Health was restored!\")\r\n      }\r\n    }\r\n  }\r\n}\r\nmsg (obj.old_parent)\r\n```\r\n\r\nThis code is supposed to fix the issue.\r\n\r\n```\r\nGetDirectChildren (obj.parent)\r\nif (HasAttribute(result, \"lose\")) {\r\n  this.name = obj.old_parent\r\n}\r\n```\r\n\r\nThis code prints the expression.\r\n\r\n```\r\nmsg (obj.old_parent)\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Alright. I printed an expression for obj.old_parent, obj.old_parent is Falkners Gym 6.</p>\n<p>I made new code.</p>\n<pre><code>player.current_room = player.parent\nplayer.old_room = player.current_room\nMoveObject (player, Battle Room)\nif (HasInt(game, \"crittercount\")) {\n  game.crittercount = game.crittercount + 1\n}\nelse {\n  game.crittercount = 1\n}\ncreate (\"crittercount\" + game.crittercount)\nobj = GetObject(\"crittercount\" + game.crittercount)\nobj.parent = room\nobj.old_parent = obj.parent\nGetDirectChildren (obj.parent)\nif (HasAttribute(result, \"lose\")) {\n  this.name = obj.old_parent\n}\nobj.dead = false\nobj.parent = player.parent\nobj.displayverbs = Split(\"Look at;Attack;Direct Hit;Stat;Status\", \";\")\nobj.changedhitpoints =&gt; {\n  if (this.hitpoints &lt; 1) {\n    this.dead = true\n    msg (\"It whited out!\")\n    player.exp = player.exp + 20\n    player.pokedollar = player.pokedollar + this.old_parent.pokedollar\n    RemoveObject (this)\n    player.parent = player.old_room\n    AddToInventory (Zephyr Badge)\n    player.badge = player.badge + 1\n  }\n}\nobj.hero = false\nobj.alias = \"Pidgeotto\"\nobj.listalias = CapFirst(obj.alias)\nobj.look = ProcessText(\"A \" + obj.alias + \". A flying type. A common sight in forests and woods. It's very docile. It flaps its wings at ground level to kick up blinding sand. If threatened, it rapidly flaps its wings in the grass, stirring up a dust cloud that drives insect prey out into the open.\")\nobj.hitpoints = 40\nobj.max = 40\nobj.damage = 9\nobj.maxdamage = 9\nobj.attack = 6\nobj.maxattack = 6\nobj.defence = 6\nobj.maxdefence = 6\nobj.armour = 10\nobj.maxarmour = 10\nobj.selectweapon =&gt; {\n  this.weapon = GetObject(PickOneString(\"Tackle;Gust\"))\n}\nobj.firearmdamage = 12\nobj.firearmattack = 6\nobj.ammo = 20\nobj.ammomax = 20\nobj.choosepotion =&gt; {\n  if (this.hitpoints &lt; this.max / 4) {\n    if (RandomChance(25)) {\n      if (this.old_parent.potion = 1) {\n        this.old_parent.potion = obj.old_parent.potion - 1\n        this.hitpoints = this.max\n        msg (this.old_parent.potion + \" used an Oran Berry on \" + this.name + \"&lt;br/&gt;Health was restored!\")\n      }\n    }\n  }\n}\nmsg (obj.old_parent)\n</code></pre>\n<p>This code is supposed to fix the issue.</p>\n<pre><code>GetDirectChildren (obj.parent)\nif (HasAttribute(result, \"lose\")) {\n  this.name = obj.old_parent\n}\n</code></pre>\n<p>This code prints the expression.</p>\n<pre><code>msg (obj.old_parent)\n</code></pre>\n\n",
      "PostDate": "2019-08-17T04:22:46.1792305Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4a301a68-fe29-4491-91ab-d70ec8171949",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you're still getting the same error, try:\r\n\r\n```\r\nmsg(\"DEBUGGING: Next line will show the value of: obj.old_parent.pokedollar:\")\r\nmsg (obj.old_parent.pokedollar)\r\n```\r\n\r\n---\r\nMy theory is ```Falkners Gym 6``` does not have a defined ```pokedollar``` attribute.  (It's more like a wild guess than a theory.)",
      "EditableFormat": "markdown",
      "HTML": "<p>If you're still getting the same error, try:</p>\n<pre><code>msg(\"DEBUGGING: Next line will show the value of: obj.old_parent.pokedollar:\")\nmsg (obj.old_parent.pokedollar)\n</code></pre>\n<hr>\n<p>My theory is <code>Falkners Gym 6</code> does not have a defined <code>pokedollar</code> attribute.  (It's more like a wild guess than a theory.)</p>\n\n",
      "PostDate": "2019-08-17T05:15:02.6202664Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "25b27cb9-a3fc-4c59-937f-e08e2234d94e",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "PS\r\n\r\nWhen posting a big block of code like that, I make it a \"spoiler\" thingy to make it easier for everyone to read the other important bits in my post.\r\n\r\nLike this:\r\n\r\n---\r\n\r\nHere is the code:\r\n\r\n\r\n\\<details>\r\n\r\n\\```\r\nCODE GOES HERE\r\n\\```\r\n\r\n\\</details>\r\n\r\n---\r\n**That looks like this in the post:**\r\n\r\nHere is the code:\r\n\r\n<details>\r\n\r\n```\r\nCODE GOES HERE\r\n```\r\n\r\n</details>\r\n\r\n---\r\n**NOTE:**\r\n\r\nSometimes I have to add extra line breaks in between the ```<details>``` line and the first line with <code>```</code>",
      "EditableFormat": "markdown",
      "HTML": "<p>PS</p>\n<p>When posting a big block of code like that, I make it a \"spoiler\" thingy to make it easier for everyone to read the other important bits in my post.</p>\n<p>Like this:</p>\n<hr>\n<p>Here is the code:</p>\n<p>&lt;details&gt;</p>\n<p>```<br>\nCODE GOES HERE<br>\n```</p>\n<p>&lt;/details&gt;</p>\n<hr>\n<p><strong>That looks like this in the post:</strong></p>\n<p>Here is the code:</p>\n<details>\n<pre><code>CODE GOES HERE\n</code></pre>\n</details>\n<hr>\n<p><strong>NOTE:</strong></p>\n<p>Sometimes I have to add extra line breaks in between the <code>&lt;details&gt;</code> line and the first line with <code>```</code></p>\n\n",
      "PostDate": "2019-08-17T05:24:04.5866027Z",
      "LastEditDate": "2019-08-17T05:27:34.0153088Z",
      "link": null
    },
    {
      "PostId": "68be91fe-9d9e-425a-a543-e85d16f996dd",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">     GetDirectChildren (obj.parent)\r\n>     if (HasAttribute(result, \"lose\")) {\r\n>       this.name = obj.old_parent\r\n>     }\r\n\r\nWhat is that supposed to do?\r\n\r\nSeriously, it looks like you're deliberately adding complexity just to mess with people.\r\n\r\nGoing through your code line-by-line:\r\n\r\n* `GetDirectChildren (obj.parent)` - Gets a list of objects in the same room as `obj`, then doesn't do anything with it\r\n* `if (HasAttribute(result, \"lose\")) {` - generates an error because there isn't a variable named `result`\r\n  * `this.name = obj.old_parent` - two errors. You can't ever set `this.name` because `name` cannot be changed during a game. And in this case, there's no `this`.\r\n* `}` - this line doesn't have any errors.\r\n\r\nI think what you meant is:\r\n\r\n```\r\nforeach (result, GetDirectChildren (room)) {\r\n  if (HasAttribute (result, \"lose\")) {\r\n    room = result\r\n  }\r\n}\r\n```\r\nThat will change the `room` variable from the room, to the trainer.\r\n\r\n**However** you never use the `room` variable for anything else, so it would make a lot more sense to name it something else.\r\n\r\n**Better solution:**\r\n\r\n**Remove the `room` parameter, and have a `trainer` parameter instead**\r\n\r\nThen you can change `SpawnFalknerPidgeotto (this.parent)` to `SpawnFalknerPidgeotto (Falkner)` or `SpawnFalknerPidgeotto (this)`\r\n\r\nThen you can just do: `obj.trainer = trainer` and you've got the attribute you want.\r\n\r\n(Note that if the parameter to the function is the trainer, I recommend calling it `trainer` rather than `room`, so that anyoone else looking at your code doesn't get confused. And the attribute should be called `obj.trainer`, not `obj.old_parent`, because it isn't the critter's parent. You keep on doing this. You have attributes and variables whose name isn't what they actually contain. Then every time you post a problem you've got a dozen people making suggestions based on incorrect information, and you try to include all their suggestions. By this point, half your game is junk code that attempts to fix what someone thought a problem might have been; code that does nothing but introduce more bugs. Using meaningful names for your variables and attributes would be the first step towards actually fixing the bugs)",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<pre><code>GetDirectChildren (obj.parent)\nif (HasAttribute(result, \"lose\")) {\n  this.name = obj.old_parent\n}\n</code></pre>\n</blockquote>\n<p>What is that supposed to do?</p>\n<p>Seriously, it looks like you're deliberately adding complexity just to mess with people.</p>\n<p>Going through your code line-by-line:</p>\n<ul>\n<li><code>GetDirectChildren (obj.parent)</code> - Gets a list of objects in the same room as <code>obj</code>, then doesn't do anything with it</li>\n<li><code>if (HasAttribute(result, \"lose\")) {</code> - generates an error because there isn't a variable named <code>result</code>\n<ul>\n<li><code>this.name = obj.old_parent</code> - two errors. You can't ever set <code>this.name</code> because <code>name</code> cannot be changed during a game. And in this case, there's no <code>this</code>.</li>\n</ul>\n</li>\n<li><code>}</code> - this line doesn't have any errors.</li>\n</ul>\n<p>I think what you meant is:</p>\n<pre><code>foreach (result, GetDirectChildren (room)) {\n  if (HasAttribute (result, \"lose\")) {\n    room = result\n  }\n}\n</code></pre>\n<p>That will change the <code>room</code> variable from the room, to the trainer.</p>\n<p><strong>However</strong> you never use the <code>room</code> variable for anything else, so it would make a lot more sense to name it something else.</p>\n<p><strong>Better solution:</strong></p>\n<p><strong>Remove the <code>room</code> parameter, and have a <code>trainer</code> parameter instead</strong></p>\n<p>Then you can change <code>SpawnFalknerPidgeotto (this.parent)</code> to <code>SpawnFalknerPidgeotto (Falkner)</code> or <code>SpawnFalknerPidgeotto (this)</code></p>\n<p>Then you can just do: <code>obj.trainer = trainer</code> and you've got the attribute you want.</p>\n<p>(Note that if the parameter to the function is the trainer, I recommend calling it <code>trainer</code> rather than <code>room</code>, so that anyoone else looking at your code doesn't get confused. And the attribute should be called <code>obj.trainer</code>, not <code>obj.old_parent</code>, because it isn't the critter's parent. You keep on doing this. You have attributes and variables whose name isn't what they actually contain. Then every time you post a problem you've got a dozen people making suggestions based on incorrect information, and you try to include all their suggestions. By this point, half your game is junk code that attempts to fix what someone thought a problem might have been; code that does nothing but introduce more bugs. Using meaningful names for your variables and attributes would be the first step towards actually fixing the bugs)</p>\n\n",
      "PostDate": "2019-08-17T09:52:42.7197527Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "35dc5d3b-431e-4782-a1cc-7c5b3c3f3154",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "@KV Thank you! Cool.\r\n@mrangel Thank you! Had I known it was that easy to make a parameter, I would have done it already.",
      "EditableFormat": "markdown",
      "HTML": "<p>@KV Thank you! Cool.<br>\n@mrangel Thank you! Had I known it was that easy to make a parameter, I would have done it already.</p>\n\n",
      "PostDate": "2019-08-17T12:45:30.1291085Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a9963ca0-a2ce-4b69-9221-e4590a1860e2",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The code works for the money, so it should work for the potions! Thank you!",
      "EditableFormat": "markdown",
      "HTML": "<p>The code works for the money, so it should work for the potions! Thank you!</p>\n\n",
      "PostDate": "2019-08-18T22:37:51.5926832Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
