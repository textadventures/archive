{
  "Topic": {
    "TopicId": "4658",
    "ForumId": "10",
    "Title": "show menu use alias while getting object from result",
    "LastUpdated": "2014-10-14T17:45:25+01:00",
    "ReplyCount": 4
  },
  "Posts": [
    {
      "PostId": "30629",
      "UserId": 0,
      "Username": "Avantar",
      "UserAvatar": "7009_1418309433.jpg",
      "UserGravatar": "86de2b95c147252a1c38b8d3996da855",
      "EditableText": "I hope some-one clever might come up with an idea to my limited coding knowledge and logic thinking. I do not have a problem per se, but rather an annoyance - let me try and explain:\n\nI sell weapons in a shop - Example: a Dagger (the alias and name will be Dagger)\nWhen I buy Daggers from the shop, the names will go Dagger1, Dagger2....\nThere will be situations where I will need to equip a weapon whilst in combat (This script loops until either enemy or game.pov dies)\nOn your combat round turn, a menu pops up using 'show menu' of possible choices and these choices outcome is defined by a switch and using cases\nOne of the menu options is: Equip Weapon\n\nA for loop will loop through weapons in your inventory and add them to a list called 'weaponlist' and the actual object's name (Dagger1, Dagger2....) will be added to the list.\nThe next 'show menu' will display this available weapons for you to use and from the result, it will run an attribute script for this weapon.\nThe annoyance is - I do not want the name displayed, but rather the alias - If I do that, it does not find the actual object belonging to the alias (obviously) and I can not think of a work around.\n\nHere is the code for you to follow - might clear up the question (One of the cases for the switch):\n[code:347y4j2y]game&#46;pov&#46;weapon_number = 0\nweaponlist = NewStringList()\nforeach (object, ScopeInventory()) {\n  if (DoesInherit(object, &quot;weapon&quot;) and object&#46;location = &quot;single&quot;) {\n    game&#46;pov&#46;weapon_number = game&#46;pov&#46;weapon_number + 1\n    msg (object + &quot; is a single handed weapon&quot;)\n    list add (weaponlist, object&#46;name)\n  }\n  else if (DoesInherit(object, &quot;weapon&quot;) and object&#46;location = &quot;dhand&quot;) {\n    game&#46;pov&#46;weapon_number = game&#46;pov&#46;weapon_number + 1\n    msg (object + &quot; is a two handed weapon&quot;)\n    list add (weaponlist, object&#46;name)\n  }\n}\nif (game&#46;pov&#46;weapon_number &gt; 0) {\n  show menu (&quot;Which weapon do you want to equip&#58;&quot;, weaponlist, true) {\n    if (result &lt;&gt; null) {\n      object_x = GetObject(result)\n      if (object_x&lt;&gt;null and object_x&#46;location=&quot;dhand&quot;) {\n        msg (&quot;You have chosen to equip your &quot; + result)\n        do (object_x, &quot;equip&quot;)\n      }\n      else if (object_x&lt;&gt;null and object_x&#46;location=&quot;single&quot;) {\n        show menu (&quot;In which hand do you want to equip &quot; + result + &quot;?&quot;, split(&quot;Left hand;Right hand&quot;, &quot;;&quot;), false) {\n          switch (result) {\n            case (&quot;Left hand&quot;) {\n              do (object_x, &quot;equipl&quot;)\n            }\n            case (&quot;Right hand&quot;) {\n              do (object_x, &quot;equipr&quot;)\n            }\n          }\n        }\n      }\n    }\n    else {\n      msg (&quot;You have chosen to press cancel&quot;)\n    }\n  }\n}\nelse {\n  msg (&quot;You do not have any weapon in your inventory to equip!&quot;)\n}[/code:347y4j2y]\n\nThank you in advance - Even if you just say that it is not possible.",
      "EditableFormat": "bbcode",
      "HTML": "I hope some-one clever might come up with an idea to my limited coding knowledge and logic thinking. I do not have a problem per se, but rather an annoyance - let me try and explain:<br/><br/>I sell weapons in a shop - Example: a Dagger (the alias and name will be Dagger)<br/>When I buy Daggers from the shop, the names will go Dagger1, Dagger2....<br/>There will be situations where I will need to equip a weapon whilst in combat (This script loops until either enemy or game.pov dies)<br/>On your combat round turn, a menu pops up using 'show menu' of possible choices and these choices outcome is defined by a switch and using cases<br/>One of the menu options is: Equip Weapon<br/><br/>A for loop will loop through weapons in your inventory and add them to a list called 'weaponlist' and the actual object's name (Dagger1, Dagger2....) will be added to the list.<br/>The next 'show menu' will display this available weapons for you to use and from the result, it will run an attribute script for this weapon.<br/>The annoyance is - I do not want the name displayed, but rather the alias - If I do that, it does not find the actual object belonging to the alias (obviously) and I can not think of a work around.<br/><br/>Here is the code for you to follow - might clear up the question (One of the cases for the switch):<br/><pre><code>game&#46;pov&#46;weapon_number = 0<br/>weaponlist = NewStringList()<br/>foreach (object, ScopeInventory()) {<br/>  if (DoesInherit(object, &quot;weapon&quot;) and object&#46;location = &quot;single&quot;) {<br/>    game&#46;pov&#46;weapon_number = game&#46;pov&#46;weapon_number + 1<br/>    msg (object + &quot; is a single handed weapon&quot;)<br/>    list add (weaponlist, object&#46;name)<br/>  }<br/>  else if (DoesInherit(object, &quot;weapon&quot;) and object&#46;location = &quot;dhand&quot;) {<br/>    game&#46;pov&#46;weapon_number = game&#46;pov&#46;weapon_number + 1<br/>    msg (object + &quot; is a two handed weapon&quot;)<br/>    list add (weaponlist, object&#46;name)<br/>  }<br/>}<br/>if (game&#46;pov&#46;weapon_number &gt; 0) {<br/>  show menu (&quot;Which weapon do you want to equip&#58;&quot;, weaponlist, true) {<br/>    if (result &lt;&gt; null) {<br/>      object_x = GetObject(result)<br/>      if (object_x&lt;&gt;null and object_x&#46;location=&quot;dhand&quot;) {<br/>        msg (&quot;You have chosen to equip your &quot; + result)<br/>        do (object_x, &quot;equip&quot;)<br/>      }<br/>      else if (object_x&lt;&gt;null and object_x&#46;location=&quot;single&quot;) {<br/>        show menu (&quot;In which hand do you want to equip &quot; + result + &quot;?&quot;, split(&quot;Left hand;Right hand&quot;, &quot;;&quot;), false) {<br/>          switch (result) {<br/>            case (&quot;Left hand&quot;) {<br/>              do (object_x, &quot;equipl&quot;)<br/>            }<br/>            case (&quot;Right hand&quot;) {<br/>              do (object_x, &quot;equipr&quot;)<br/>            }<br/>          }<br/>        }<br/>      }<br/>    }<br/>    else {<br/>      msg (&quot;You have chosen to press cancel&quot;)<br/>    }<br/>  }<br/>}<br/>else {<br/>  msg (&quot;You do not have any weapon in your inventory to equip!&quot;)<br/>}</code></pre><br/><br/>Thank you in advance - Even if you just say that it is not possible.",
      "PostDate": "2014-10-14T15:36:41+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "30631",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "Thankfully, it's an easy one! <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> It seems not many people know about the dictionary abilities of show menu and ShowMenu.\n\nYou can use a string dictionary instead of a string list with show menu (or ShowMenu). The *value* for each entry is what's shown in the menu, and the *key* for the entry is what's returned in result. In other words,the value is the &quot;menu display string&quot; for the key.\n\nAs an example, if you do this:\n\n[code:1d2kwdsa]options = NewStringDictionary()\ndictionary add(options, &quot;male&quot;, &quot;I am male&quot;)\ndictionary add(options, &quot;female&quot;, &quot;I am female&quot;)\nshowmenu (&quot;Are you male or female&quot;, options, false) {\n    msg(&quot;result = &quot; result)\n}[/code:1d2kwdsa]\nthen the menu will show:\n\n[quote:1d2kwdsa]I am male\nI am female[/quote:1d2kwdsa]\nand if you pick the first, result will come back &quot;male&quot; and if the second, &quot;female&quot;. \n\nSo for your case, change this:\n\n[code:1d2kwdsa]weaponlist = NewStringList()[/code:1d2kwdsa]\nto this:\n\n[code:1d2kwdsa]weaponlist = NewStringDictionary()[/code:1d2kwdsa]\nand change:\n\n[code:1d2kwdsa]list add (weaponlist, object&#46;name)[/code:1d2kwdsa]\nto\n\n[code:1d2kwdsa]dictionary add (weaponlist, object&#46;name, GetDisplayAlias(object))[/code:1d2kwdsa]\nand it should do what you want.\n\nEdit: Note the GetDisplayAlias(object) can be whatever you want. You could even use something like:\n\nGetDisplayAlias(object) + &quot; (single-handed)&quot;\n\nto add more description into the menu text.",
      "EditableFormat": "bbcode",
      "HTML": "Thankfully, it's an easy one! <!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) --> It seems not many people know about the dictionary abilities of show menu and ShowMenu.<br/><br/>You can use a string dictionary instead of a string list with show menu (or ShowMenu). The *value* for each entry is what's shown in the menu, and the *key* for the entry is what's returned in result. In other words,the value is the &quot;menu display string&quot; for the key.<br/><br/>As an example, if you do this:<br/><br/><pre><code>options = NewStringDictionary()<br/>dictionary add(options, &quot;male&quot;, &quot;I am male&quot;)<br/>dictionary add(options, &quot;female&quot;, &quot;I am female&quot;)<br/>showmenu (&quot;Are you male or female&quot;, options, false) {<br/>    msg(&quot;result = &quot; result)<br/>}</code></pre><br/>then the menu will show:<br/><br/><blockquote><p>I am male<br/>I am female</p></blockquote><br/>and if you pick the first, result will come back &quot;male&quot; and if the second, &quot;female&quot;. <br/><br/>So for your case, change this:<br/><br/><pre><code>weaponlist = NewStringList()</code></pre><br/>to this:<br/><br/><pre><code>weaponlist = NewStringDictionary()</code></pre><br/>and change:<br/><br/><pre><code>list add (weaponlist, object&#46;name)</code></pre><br/>to<br/><br/><pre><code>dictionary add (weaponlist, object&#46;name, GetDisplayAlias(object))</code></pre><br/>and it should do what you want.<br/><br/>Edit: Note the GetDisplayAlias(object) can be whatever you want. You could even use something like:<br/><br/>GetDisplayAlias(object) + &quot; (single-handed)&quot;<br/><br/>to add more description into the menu text.",
      "PostDate": "2014-10-14T16:17:59+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "30632",
      "UserId": 0,
      "Username": "The Pixie",
      "UserAvatar": null,
      "UserGravatar": "cfa37e927f96177bcf6053ae8f108f77",
      "EditableText": "Here is a function that will search though the player inventory for an object withthe given alias, and return the first one found (or null if not found):\n\n[code:1upzrvjx]  &lt;function name=&quot;FindByAlias&quot; parameters=&quot;value&quot; type=&quot;object&quot;&gt;\n    foreach (o, ScopeInventory ()) {\n      if (HasString(o, &quot;alias&quot;)) {\n        if (o&#46;alias = value) {\n          return (o)\n        }\n      }\n    }\n    return (null)\n  &lt;/function&gt;  [/code:1upzrvjx]",
      "EditableFormat": "bbcode",
      "HTML": "Here is a function that will search though the player inventory for an object withthe given alias, and return the first one found (or null if not found):<br/><br/><pre><code>  &lt;function name=&quot;FindByAlias&quot; parameters=&quot;value&quot; type=&quot;object&quot;&gt;<br/>    foreach (o, ScopeInventory ()) {<br/>      if (HasString(o, &quot;alias&quot;)) {<br/>        if (o&#46;alias = value) {<br/>          return (o)<br/>        }<br/>      }<br/>    }<br/>    return (null)<br/>  &lt;/function&gt;  </code></pre>",
      "PostDate": "2014-10-14T16:20:07+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "30636",
      "UserId": 0,
      "Username": "Avantar",
      "UserAvatar": "7009_1418309433.jpg",
      "UserGravatar": "86de2b95c147252a1c38b8d3996da855",
      "EditableText": "Yes...yes...yes!\n\nLike I said: I will leave this for the clever ones.\n\n@jaynabonne: You know my questions are usually easy. <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --> \nI do not think that I have seen a full blown game from you yet. With your knowledge it should be promising....Working on something?\n\nThank you both!",
      "EditableFormat": "bbcode",
      "HTML": "Yes...yes...yes!<br/><br/>Like I said: I will leave this for the clever ones.<br/><br/>@jaynabonne: You know my questions are usually easy. <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --> <br/>I do not think that I have seen a full blown game from you yet. With your knowledge it should be promising....Working on something?<br/><br/>Thank you both!",
      "PostDate": "2014-10-14T17:33:00+01:00",
      "LastEditDate": null
    },
    {
      "PostId": "30637",
      "UserId": 0,
      "Username": "jaynabonne",
      "UserAvatar": "6579_1344778256.jpg",
      "UserGravatar": "379859a7f1952a65399fc63997e68f0b",
      "EditableText": "[quote=&quot;Avantar&quot;:1hmwtftw]@jaynabonne: You know my questions are usually easy. <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --> \nI do not think that I have seen a full blown game from you yet. With your knowledge it should be promising....Working on something?[/quote:1hmwtftw]\n\nFunny you should ask: <!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=5&amp;t=4659\">viewtopic.php?f=5&amp;t=4659</a><!-- l -->\n<!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "EditableFormat": "bbcode",
      "HTML": "<blockquote><cite>Avantar wrote:</cite>@jaynabonne: You know my questions are usually easy. <!-- s:D --><img src=\"{SMILIES_PATH}/icon_biggrin.gif\" alt=\":D\" title=\"Very Happy\" /><!-- s:D --> <br/>I do not think that I have seen a full blown game from you yet. With your knowledge it should be promising....Working on something?</blockquote><br/><br/>Funny you should ask: <!-- l --><a class=\"postlink-local\" href=\"http://forum.textadventures.co.uk/viewtopic.php?f=5&amp;t=4659\">viewtopic.php?f=5&amp;t=4659</a><!-- l --><br/><!-- s:) --><img src=\"{SMILIES_PATH}/icon_smile.gif\" alt=\":)\" title=\"Smile\" /><!-- s:) -->",
      "PostDate": "2014-10-14T17:45:25+01:00",
      "LastEditDate": null
    }
  ]
}
