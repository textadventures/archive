{
  "Topic": {
    "TopicId": "1rywuczink2p7lh_sen7ha",
    "ForumId": "10",
    "Title": "Listing room exits manually",
    "LastUpdated": "2019-10-18T05:38:18.9977965Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "36be21f2-3b53-4091-bba9-5da89f12317c",
      "UserId": 194873,
      "Username": "ShadowsEdge19",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a24333a42009e96c558cb89dc0c26d30?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have the default global setting for listing room exits turned off for my game as I have a specific room type that shouldn't display them and other more traditional rooms that should. \r\n\r\nHow would I go about doing something like I'm seeing in http://textadventures.co.uk/forum/quest/topic/spp_ltyb7e2d82dp3i88eq/changing-room-desciptions-when-multiple-items-are-removed but for exits as well?",
      "EditableFormat": "markdown",
      "HTML": "<p>I have the default global setting for listing room exits turned off for my game as I have a specific room type that shouldn't display them and other more traditional rooms that should.</p>\n<p>How would I go about doing something like I'm seeing in http://textadventures.co.uk/forum/quest/topic/spp_ltyb7e2d82dp3i88eq/changing-room-desciptions-when-multiple-items-are-removed but for exits as well?</p>\n\n",
      "PostDate": "2019-10-18T05:38:18.9977965Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "5b763d8f-4ce1-4546-8fbb-d999c18c02e1",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The function `ScopeExits()` returns a list of exits in the current room. Or `ScopeExitsForRoom(room)` if you want the exits of another room.\r\n\r\nSo if you're putting it in the room description,, you could do `You can go {=FormatList(ScopeExits(), \", \", \", or\", \"nowhere\")}.`\r\n\r\nOr using the function from that other thread:\r\n```\r\n{=FancyObjectList(\"There are exits leading \", ScopeExits(), \".\", \"There is no way out!\")}\r\n```\r\n\r\nYou could also use `GetExitsList()` instead of `ScopeExits()` if you want to list only exits which aren't look-only or scenery.\r\n\r\nOr if there's only one room that shouldn't display them, you could turn the default room description on, and just disable the \"You can go:\" line for that one room. You can put `game.autodescription_youcango = 0` in that room's \"before enter\" script, and `game.autodescription_youcango = 3` (or whatever it was initially set to) in the room's exit script.",
      "EditableFormat": "markdown",
      "HTML": "<p>The function <code>ScopeExits()</code> returns a list of exits in the current room. Or <code>ScopeExitsForRoom(room)</code> if you want the exits of another room.</p>\n<p>So if you're putting it in the room description,, you could do <code>You can go {=FormatList(ScopeExits(), \", \", \", or\", \"nowhere\")}.</code></p>\n<p>Or using the function from that other thread:</p>\n<pre><code>{=FancyObjectList(\"There are exits leading \", ScopeExits(), \".\", \"There is no way out!\")}\n</code></pre>\n<p>You could also use <code>GetExitsList()</code> instead of <code>ScopeExits()</code> if you want to list only exits which aren't look-only or scenery.</p>\n<p>Or if there's only one room that shouldn't display them, you could turn the default room description on, and just disable the \"You can go:\" line for that one room. You can put <code>game.autodescription_youcango = 0</code> in that room's \"before enter\" script, and <code>game.autodescription_youcango = 3</code> (or whatever it was initially set to) in the room's exit script.</p>\n\n",
      "PostDate": "2019-10-18T07:50:52.4091067Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "41a5b2eb-bf12-4665-8079-6dc18ccd8be5",
      "UserId": 194873,
      "Username": "ShadowsEdge19",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a24333a42009e96c558cb89dc0c26d30?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I got this error for my only exit \"out\":\r\n\r\nError running script: Expected 1 parameter(s) in script 'msg (\"You can go out\")'\r\n\r\n```\r\nmsg (\"You begin inside a dark cave, you cannot see anything without the use of your phone's flashlight. You've been travelling in a general forward direction for what seems like forever until you notice a light in the distance that you hope is the exit.\")\r\nmsg (\"You can go {=FormatList(ScopeExits(), \", \", \", or\", \"nowhere\")}\")\r\n```\r\n\r\nOr using that FancyObjectList function:\r\n\r\nError running script: Error compiling expression '\"You can go out.\"': SyntaxError: Unexpected token \"You___SPACE___can___SPACE___go\" <IDENTIFIER>; expected one of <EOF>Line: 1, Column: 22\r\n\r\n```\r\nmsg (\"You begin inside a dark cave, you cannot see anything without the use of your phone's flashlight. You've been travelling in a general forward direction for what seems like forever until you notice a light in the distance that you hope is the exit.\")\r\nmsg (\"{=FancyObjectList (\"You can go \", ScopeExits(), \".\", \"There is no way out!\")}\")\r\n\r\n\r\n  <function name=\"FancyObjectList\" parameters=\"preList, objects, postList, empty\" type=\"string\">\r\n    if (TypeOf (objects) = \"object\") {\r\n      objects = GetDirectChildren (objects)\r\n    }\r\n    if (ListCount (objects) = 0) {\r\n      if (IsDefined (\"empty\")) {\r\n        return (empty)\r\n      }\r\n      else {\r\n        return (\"\")\r\n      }\r\n    }\r\n    else if (ListCount (objects) = 2) {\r\n      return (preList + FormatList (objects, \", \", \" and \", \"\") + postList)\r\n    }\r\n    else {\r\n      return (preList + FormatList (objects, \", \", \", and \", \"\") + postList)\r\n    }\r\n  </function>",
      "EditableFormat": "markdown",
      "HTML": "<p>I got this error for my only exit \"out\":</p>\n<p>Error running script: Expected 1 parameter(s) in script 'msg (\"You can go out\")'</p>\n<pre><code>msg (\"You begin inside a dark cave, you cannot see anything without the use of your phone's flashlight. You've been travelling in a general forward direction for what seems like forever until you notice a light in the distance that you hope is the exit.\")\nmsg (\"You can go {=FormatList(ScopeExits(), \", \", \", or\", \"nowhere\")}\")\n</code></pre>\n<p>Or using that FancyObjectList function:</p>\n<p>Error running script: Error compiling expression '\"You can go out.\"': SyntaxError: Unexpected token \"You___SPACE___can___SPACE___go\" </p>\n<pre><code>msg (\"You begin inside a dark cave, you cannot see anything without the use of your phone's flashlight. You've been travelling in a general forward direction for what seems like forever until you notice a light in the distance that you hope is the exit.\")\nmsg (\"{=FancyObjectList (\"You can go \", ScopeExits(), \".\", \"There is no way out!\")}\")\n\n\n  &lt;function name=\"FancyObjectList\" parameters=\"preList, objects, postList, empty\" type=\"string\"&gt;\n    if (TypeOf (objects) = \"object\") {\n      objects = GetDirectChildren (objects)\n    }\n    if (ListCount (objects) = 0) {\n      if (IsDefined (\"empty\")) {\n        return (empty)\n      }\n      else {\n        return (\"\")\n      }\n    }\n    else if (ListCount (objects) = 2) {\n      return (preList + FormatList (objects, \", \", \" and \", \"\") + postList)\n    }\n    else {\n      return (preList + FormatList (objects, \", \", \", and \", \"\") + postList)\n    }\n  &lt;/function&gt;\n</code></pre>\n\n",
      "PostDate": "2019-10-18T17:31:42.9607373Z",
      "LastEditDate": "2019-10-18T17:33:26.597195Z",
      "link": null
    },
    {
      "PostId": "1f5e33b5-ac1e-4203-8c68-eb679ff8f2bf",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you're passing that string to `msg`, you need to put a `\\` before each `\"`, so Quest knows it's not marking the end of the string. If you were including it in the room description, or in some other text field, the GUI would do that for you.\r\n\r\nSo this line:\r\n```\r\nmsg (\"{=FancyObjectList (\"You can go \", ScopeExits(), \".\", \"There is no way out!\")}\")\r\n```\r\nshould be:\r\n```\r\nmsg (\"{=FancyObjectList (\\\"You can go \\\", ScopeExits(), \\\".\\\", \\\"There is no way out!\\\")}\")\r\n```\r\nor because there's no real need to encapsulate this if you're not putting it in a textual description field, you could use:\r\n```\r\nmsg (FancyObjectList (\"You can go \", ScopeExits(), \".\", \"There is no way out!\"))\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>If you're passing that string to <code>msg</code>, you need to put a <code>\\</code> before each <code>\"</code>, so Quest knows it's not marking the end of the string. If you were including it in the room description, or in some other text field, the GUI would do that for you.</p>\n<p>So this line:</p>\n<pre><code>msg (\"{=FancyObjectList (\"You can go \", ScopeExits(), \".\", \"There is no way out!\")}\")\n</code></pre>\n<p>should be:</p>\n<pre><code>msg (\"{=FancyObjectList (\\\"You can go \\\", ScopeExits(), \\\".\\\", \\\"There is no way out!\\\")}\")\n</code></pre>\n<p>or because there's no real need to encapsulate this if you're not putting it in a textual description field, you could use:</p>\n<pre><code>msg (FancyObjectList (\"You can go \", ScopeExits(), \".\", \"There is no way out!\"))\n</code></pre>\n\n",
      "PostDate": "2019-10-18T18:54:16.8279379Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ce20d744-6210-446f-a78e-950288723c2c",
      "UserId": 194873,
      "Username": "ShadowsEdge19",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a24333a42009e96c558cb89dc0c26d30?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay so that works to display it as text but what about providing an actual link to the exit that the user can click rather than use the compass? So changing FancyObjectList as a whole to provide links to the objects/exits it spits out.",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay so that works to display it as text but what about providing an actual link to the exit that the user can click rather than use the compass? So changing FancyObjectList as a whole to provide links to the objects/exits it spits out.</p>\n\n",
      "PostDate": "2019-10-19T08:07:30.2633832Z",
      "LastEditDate": "2019-10-19T08:12:05.8064973Z",
      "link": null
    },
    {
      "PostId": "790ecd52-db2d-44c3-9879-b4d5fe74e249",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah… does `FormatList` only work with objects?\r\nIn that case, something like…\r\n```\r\n<function name=\"FancyObjectList\" parameters=\"preList, objects, postList, empty, joiner\" type=\"string\">\r\n  if (not IsDefined (\"joiner\")) {\r\n    joiner = \"and\"\r\n  }\r\n  if (TypeOf (objects) = \"object\") {\r\n    objects = GetDirectChildren (objects)\r\n  }\r\n  if (ListCount (objects) = 0) {\r\n    if (IsDefined (\"empty\")) {\r\n      return (empty)\r\n    }\r\n    else {\r\n      return (\"\")\r\n    }\r\n  }\r\n  else {\r\n    result = \"\"\r\n    itemsLeft = ListCount(objects)\r\n    foreach (item, objects) {\r\n      switch (TypeOf(item)) {\r\n        case (\"object\", \"exit\") {\r\n          result = result + GetDisplayNameLink(item, TypeOf(item))\r\n        }\r\n        case (\"string\") {\r\n          result = result + item\r\n        }\r\n        default {\r\n          result = result + ToString (item)\r\n        }\r\n      }\r\n      itemsLeft = itemsLeft - 1\r\n      if (itemsLeft > 0) {\r\n        if (itemsLeft > 1 or (GetBoolean (game, \"oxfordcomma\") and not ListCount (objects) = 2)) {\r\n          result = result + \", \"\r\n        }\r\n        else {\r\n          result = result + \" \"\r\n        }\r\n        if (itemsLeft = 1) {\r\n          result = result + joiner + \" \"\r\n        }\r\n      }\r\n    }\r\n    return (Trim (result))\r\n  }\r\n</function>\r\n```\r\n\r\n(this version will look for a boolean attribute `game.oxfordcomma`, so you can make it use one or not as you see fit)",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah… does <code>FormatList</code> only work with objects?<br>\nIn that case, something like…</p>\n<pre><code>&lt;function name=\"FancyObjectList\" parameters=\"preList, objects, postList, empty, joiner\" type=\"string\"&gt;\n  if (not IsDefined (\"joiner\")) {\n    joiner = \"and\"\n  }\n  if (TypeOf (objects) = \"object\") {\n    objects = GetDirectChildren (objects)\n  }\n  if (ListCount (objects) = 0) {\n    if (IsDefined (\"empty\")) {\n      return (empty)\n    }\n    else {\n      return (\"\")\n    }\n  }\n  else {\n    result = \"\"\n    itemsLeft = ListCount(objects)\n    foreach (item, objects) {\n      switch (TypeOf(item)) {\n        case (\"object\", \"exit\") {\n          result = result + GetDisplayNameLink(item, TypeOf(item))\n        }\n        case (\"string\") {\n          result = result + item\n        }\n        default {\n          result = result + ToString (item)\n        }\n      }\n      itemsLeft = itemsLeft - 1\n      if (itemsLeft &gt; 0) {\n        if (itemsLeft &gt; 1 or (GetBoolean (game, \"oxfordcomma\") and not ListCount (objects) = 2)) {\n          result = result + \", \"\n        }\n        else {\n          result = result + \" \"\n        }\n        if (itemsLeft = 1) {\n          result = result + joiner + \" \"\n        }\n      }\n    }\n    return (Trim (result))\n  }\n&lt;/function&gt;\n</code></pre>\n<p>(this version will look for a boolean attribute <code>game.oxfordcomma</code>, so you can make it use one or not as you see fit)</p>\n\n",
      "PostDate": "2019-10-19T09:54:42.7835485Z",
      "LastEditDate": "2019-10-20T11:17:51.2255869Z",
      "link": null
    },
    {
      "PostId": "0cde15c0-a70b-478c-aa15-8cb64474ef59",
      "UserId": 194873,
      "Username": "ShadowsEdge19",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a24333a42009e96c558cb89dc0c26d30?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm getting this error:\r\n\r\nYou begin inside a dark cave, you cannot see anything without the use of your phone's flashlight. You've been travelling in a general forward direction for what seems like forever until you notice a light in the distance that you hope is the exit.\r\nError running script: Error compiling expression 'and': SyntaxError: Unexpected token \"and\"; expected one of \"NOT\", \"-\", <INTEGER>, <REAL>, <STRING_LITERAL>, \"True\", \"False\", <HEX_LITERAL>, <CHAR_LITERAL>, \"null\", <DATETIME>, <TIMESPAN>, \"(\", <IDENTIFIER>, \"if\", or \"cast\"Line: 1, Column: 1\r\nError running script: Object reference not set to an instance of an object.\r\n\r\n\r\n```\r\n<!--Saved by Quest 5.8.6836.13983-->\r\n<asl version=\"580\">\r\n  <include ref=\"English.aslx\" />\r\n  <include ref=\"Core.aslx\" />\r\n  <game name=\"RPG Battle Engine Test\">\r\n    <gameid>9606deb8-fcbe-4076-bbf4-de25c7066f4b</gameid>\r\n    <version>1.0</version>\r\n    <firstpublished>2019</firstpublished>\r\n    <customstatuspane />\r\n    <feature_advancedscripts />\r\n    <statusandcompassattop type=\"boolean\">false</statusandcompassattop>\r\n    <commandpane type=\"boolean\">false</commandpane>\r\n    <roomenter type=\"script\"><![CDATA[\r\n      // Attacks\r\n      s = \"<style>.button {background-color: red; color: white; padding: 10px 32px; border: 1px solid black; text-align: center; font-size: 14px; width:100%}</style>\"\r\n      s = s + \"<style>.button2 {background-color: red; padding: 10px 32px; border: 1px solid black; text-align: center; font-size: 14px; width:100%} .button2 a { color:white }</style>\"\r\n      s = s + \"<table style=\\\"border-collapse: separate;\\\" width=\\\"100%\\\">\"\r\n      s = s + \"<tr><td style=\\\"text-align:center; text-decoration: underline;\\\" width=\\\"100%\\\"><p>Attacks</p></td></tr>\"\r\n      s = s + \"<tr><td class=\\\"button\\\" onclick=\\\"ASLEvent('StatusLinkAttacks', 'Attack');\\\" style=\\\";cursor:pointer;\\\" title=\\\"Attack\\\">Attack</td></tr>\"\r\n      s = s + \"<tr><td class=\\\"button\\\" onclick=\\\"ASLEvent('StatusLinkAttacks', 'Defend');\\\" style=\\\";cursor:pointer;\\\" title=\\\"Defend\\\">Defend</td></tr>\"\r\n      s = s + \"<tr><td class=\\\"button\\\" onclick=\\\"ASLEvent('StatusLinkAttacks', 'Item');\\\" style=\\\";cursor:pointer;\\\" title=\\\"Item\\\">Item</td></tr>\"\r\n      s = s + \"<tr><td class=\\\"button\\\" onclick=\\\"ASLEvent('StatusLinkAttacks', 'Flee');\\\" style=\\\";cursor:pointer;\\\" title=\\\"Flee\\\">Flee</td></tr>\"\r\n      s = s + \"</table>\"\r\n      JS.setCustomStatus (s)\r\n    ]]></roomenter>\r\n    <start type=\"script\">\r\n    </start>\r\n    <showdescriptiononenter type=\"boolean\">false</showdescriptiononenter>\r\n  </game>\r\n  <object name=\"room\">\r\n    <inherit name=\"editor_room\" />\r\n    <usedefaultprefix type=\"boolean\">false</usedefaultprefix>\r\n    <description type=\"string\"></description>\r\n    <isroom />\r\n    <enter type=\"script\">\r\n      msg (\"You begin inside a dark cave, you cannot see anything without the use of your phone's flashlight. You've been travelling in a general forward direction for what seems like forever until you notice a light in the distance that you hope is the exit.\")\r\n      msg (FancyObjectList (\"You can go \", ScopeExits(), \".\", \"There is no way out!\"))\r\n    </enter>\r\n    <object name=\"player\">\r\n      <inherit name=\"editor_object\" />\r\n      <inherit name=\"editor_player\" />\r\n    </object>\r\n    <exit alias=\"in\" to=\"room2\">\r\n      <inherit name=\"indirection\" />\r\n    </exit>\r\n    <exit alias=\"out\" to=\"room3\">\r\n      <inherit name=\"outdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"room2\">\r\n    <inherit name=\"editor_room\" />\r\n    <exit alias=\"out\" to=\"room\">\r\n      <inherit name=\"outdirection\" />\r\n    </exit>\r\n  </object>\r\n  <object name=\"room3\">\r\n    <inherit name=\"editor_room\" />\r\n  </object>\r\n  <function name=\"StatusLinkAttacks\" parameters=\"AttackName\">\r\n    AttackTheEnemy (player, AttackName)\r\n  </function>\r\n  <function name=\"AttackTheEnemy\" parameters=\"player, attack\" type=\"boolean\">\r\n    ClearScreen\r\n    switch (attack) {\r\n      case (\"Attack\") {\r\n        msg (\"The Player attacks\")\r\n      }\r\n      case (\"Defend\") {\r\n        msg (\"The Player defends\")\r\n      }\r\n      case (\"Item\") {\r\n        msg (\"The Player uses an item\")\r\n      }\r\n      case (\"Flee\") {\r\n        msg (\"You fled the battle\")\r\n      }\r\n    }\r\n  </function>\r\n  <function name=\"FancyObjectList\" parameters=\"preList, objects, postList, empty, joiner\" type=\"string\"><![CDATA[\r\n    if (not IsDefined (\"joiner\")) {\r\n      joiner = AND\r\n    }\r\n    if (TypeOf (objects) = \"object\") {\r\n      objects = GetDirectChildren (objects)\r\n    }\r\n    if (ListCount (objects) = 0) {\r\n      if (IsDefined (\"empty\")) {\r\n        return (empty)\r\n      }\r\n      else {\r\n        return (\"\")\r\n      }\r\n    }\r\n    else {\r\n      result = \"\"\r\n      itemsLeft = ListCount(list)\r\n      foreach (item, list) {\r\n        switch (TypeOf(item)) {\r\n          case (\"object\", \"exit\") {\r\n            result = result + GetDisplayNameLink(item, TypeOf(item))\r\n          }\r\n          case (\"string\") {\r\n            result = result + item\r\n          }\r\n          default {\r\n            result = result + ToString (item)\r\n          }\r\n        }\r\n        itemsLeft = itemsLeft - 1\r\n        if (itemsLeft > 0) {\r\n          if (itemsLeft > 1 or (GetBoolean (game, \"oxfordcomma\") AND ListCount (objects) = 2)) {\r\n            result = result + \", \"\r\n          }\r\n          if (itemsLeft = 1) {\r\n            result = result + joiner + \" \"\r\n          }\r\n        }\r\n      }\r\n      return (Trim (result))\r\n    }\r\n  ]]></function>\r\n</asl>\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm getting this error:</p>\n<p>You begin inside a dark cave, you cannot see anything without the use of your phone's flashlight. You've been travelling in a general forward direction for what seems like forever until you notice a light in the distance that you hope is the exit.<br>\nError running script: Error compiling expression 'and': SyntaxError: Unexpected token \"and\"; expected one of \"NOT\", \"-\", </p>\n<pre><code>&lt;!--Saved by Quest 5.8.6836.13983--&gt;\n&lt;asl version=\"580\"&gt;\n  &lt;include ref=\"English.aslx\" /&gt;\n  &lt;include ref=\"Core.aslx\" /&gt;\n  &lt;game name=\"RPG Battle Engine Test\"&gt;\n    &lt;gameid&gt;9606deb8-fcbe-4076-bbf4-de25c7066f4b&lt;/gameid&gt;\n    &lt;version&gt;1.0&lt;/version&gt;\n    &lt;firstpublished&gt;2019&lt;/firstpublished&gt;\n    &lt;customstatuspane /&gt;\n    &lt;feature_advancedscripts /&gt;\n    &lt;statusandcompassattop type=\"boolean\"&gt;false&lt;/statusandcompassattop&gt;\n    &lt;commandpane type=\"boolean\"&gt;false&lt;/commandpane&gt;\n    &lt;roomenter type=\"script\"&gt;&lt;![CDATA[\n      // Attacks\n      s = \"&lt;style&gt;.button {background-color: red; color: white; padding: 10px 32px; border: 1px solid black; text-align: center; font-size: 14px; width:100%}&lt;/style&gt;\"\n      s = s + \"&lt;style&gt;.button2 {background-color: red; padding: 10px 32px; border: 1px solid black; text-align: center; font-size: 14px; width:100%} .button2 a { color:white }&lt;/style&gt;\"\n      s = s + \"&lt;table style=\\\"border-collapse: separate;\\\" width=\\\"100%\\\"&gt;\"\n      s = s + \"&lt;tr&gt;&lt;td style=\\\"text-align:center; text-decoration: underline;\\\" width=\\\"100%\\\"&gt;&lt;p&gt;Attacks&lt;/p&gt;&lt;/td&gt;&lt;/tr&gt;\"\n      s = s + \"&lt;tr&gt;&lt;td class=\\\"button\\\" onclick=\\\"ASLEvent('StatusLinkAttacks', 'Attack');\\\" style=\\\";cursor:pointer;\\\" title=\\\"Attack\\\"&gt;Attack&lt;/td&gt;&lt;/tr&gt;\"\n      s = s + \"&lt;tr&gt;&lt;td class=\\\"button\\\" onclick=\\\"ASLEvent('StatusLinkAttacks', 'Defend');\\\" style=\\\";cursor:pointer;\\\" title=\\\"Defend\\\"&gt;Defend&lt;/td&gt;&lt;/tr&gt;\"\n      s = s + \"&lt;tr&gt;&lt;td class=\\\"button\\\" onclick=\\\"ASLEvent('StatusLinkAttacks', 'Item');\\\" style=\\\";cursor:pointer;\\\" title=\\\"Item\\\"&gt;Item&lt;/td&gt;&lt;/tr&gt;\"\n      s = s + \"&lt;tr&gt;&lt;td class=\\\"button\\\" onclick=\\\"ASLEvent('StatusLinkAttacks', 'Flee');\\\" style=\\\";cursor:pointer;\\\" title=\\\"Flee\\\"&gt;Flee&lt;/td&gt;&lt;/tr&gt;\"\n      s = s + \"&lt;/table&gt;\"\n      JS.setCustomStatus (s)\n    ]]&gt;&lt;/roomenter&gt;\n    &lt;start type=\"script\"&gt;\n    &lt;/start&gt;\n    &lt;showdescriptiononenter type=\"boolean\"&gt;false&lt;/showdescriptiononenter&gt;\n  &lt;/game&gt;\n  &lt;object name=\"room\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;usedefaultprefix type=\"boolean\"&gt;false&lt;/usedefaultprefix&gt;\n    &lt;description type=\"string\"&gt;&lt;/description&gt;\n    &lt;isroom /&gt;\n    &lt;enter type=\"script\"&gt;\n      msg (\"You begin inside a dark cave, you cannot see anything without the use of your phone's flashlight. You've been travelling in a general forward direction for what seems like forever until you notice a light in the distance that you hope is the exit.\")\n      msg (FancyObjectList (\"You can go \", ScopeExits(), \".\", \"There is no way out!\"))\n    &lt;/enter&gt;\n    &lt;object name=\"player\"&gt;\n      &lt;inherit name=\"editor_object\" /&gt;\n      &lt;inherit name=\"editor_player\" /&gt;\n    &lt;/object&gt;\n    &lt;exit alias=\"in\" to=\"room2\"&gt;\n      &lt;inherit name=\"indirection\" /&gt;\n    &lt;/exit&gt;\n    &lt;exit alias=\"out\" to=\"room3\"&gt;\n      &lt;inherit name=\"outdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room2\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n    &lt;exit alias=\"out\" to=\"room\"&gt;\n      &lt;inherit name=\"outdirection\" /&gt;\n    &lt;/exit&gt;\n  &lt;/object&gt;\n  &lt;object name=\"room3\"&gt;\n    &lt;inherit name=\"editor_room\" /&gt;\n  &lt;/object&gt;\n  &lt;function name=\"StatusLinkAttacks\" parameters=\"AttackName\"&gt;\n    AttackTheEnemy (player, AttackName)\n  &lt;/function&gt;\n  &lt;function name=\"AttackTheEnemy\" parameters=\"player, attack\" type=\"boolean\"&gt;\n    ClearScreen\n    switch (attack) {\n      case (\"Attack\") {\n        msg (\"The Player attacks\")\n      }\n      case (\"Defend\") {\n        msg (\"The Player defends\")\n      }\n      case (\"Item\") {\n        msg (\"The Player uses an item\")\n      }\n      case (\"Flee\") {\n        msg (\"You fled the battle\")\n      }\n    }\n  &lt;/function&gt;\n  &lt;function name=\"FancyObjectList\" parameters=\"preList, objects, postList, empty, joiner\" type=\"string\"&gt;&lt;![CDATA[\n    if (not IsDefined (\"joiner\")) {\n      joiner = AND\n    }\n    if (TypeOf (objects) = \"object\") {\n      objects = GetDirectChildren (objects)\n    }\n    if (ListCount (objects) = 0) {\n      if (IsDefined (\"empty\")) {\n        return (empty)\n      }\n      else {\n        return (\"\")\n      }\n    }\n    else {\n      result = \"\"\n      itemsLeft = ListCount(list)\n      foreach (item, list) {\n        switch (TypeOf(item)) {\n          case (\"object\", \"exit\") {\n            result = result + GetDisplayNameLink(item, TypeOf(item))\n          }\n          case (\"string\") {\n            result = result + item\n          }\n          default {\n            result = result + ToString (item)\n          }\n        }\n        itemsLeft = itemsLeft - 1\n        if (itemsLeft &gt; 0) {\n          if (itemsLeft &gt; 1 or (GetBoolean (game, \"oxfordcomma\") AND ListCount (objects) = 2)) {\n            result = result + \", \"\n          }\n          if (itemsLeft = 1) {\n            result = result + joiner + \" \"\n          }\n        }\n      }\n      return (Trim (result))\n    }\n  ]]&gt;&lt;/function&gt;\n&lt;/asl&gt;\n</code></pre>\n\n",
      "PostDate": "2019-10-20T10:05:01.0862Z",
      "LastEditDate": "2019-10-20T10:10:48.2016187Z",
      "link": null
    },
    {
      "PostId": "81957412-d652-42c9-b3fe-ed780e3758e4",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry, for some reason I had a missing quote.\r\nI assume you already found this error, as you'd changed `joiner = and` to `joiner = AND`.\r\nBut as we're setting a string, it should be <b><code style=\"color: green\">joiner = \"AND\"</code></b>",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry, for some reason I had a missing quote.<br>\nI assume you already found this error, as you'd changed <code>joiner = and</code> to <code>joiner = AND</code>.<br>\nBut as we're setting a string, it should be <b><code style=\"color: green\">joiner = \"AND\"</code></b></p>\n\n",
      "PostDate": "2019-10-20T10:19:43.7314615Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "9803c390-4be8-4a50-b7e1-e121c1ea38d2",
      "UserId": 194873,
      "Username": "ShadowsEdge19",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a24333a42009e96c558cb89dc0c26d30?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay so adding the quotes to AND I now get this:\r\n\r\nError running script: Error compiling expression 'ListCount(list)': Unknown object or variable 'list'\r\nError running script: Object reference not set to an instance of an object.\r\n\r\nThere's a 'preList' and 'postList' parameter but not a 'list' one",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay so adding the quotes to AND I now get this:</p>\n<p>Error running script: Error compiling expression 'ListCount(list)': Unknown object or variable 'list'<br>\nError running script: Object reference not set to an instance of an object.</p>\n<p>There's a 'preList' and 'postList' parameter but not a 'list' one</p>\n\n",
      "PostDate": "2019-10-20T10:44:38.6008536Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "c5a8d39e-c895-4184-8d58-c6d04b63830d",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry, guess I was really not thinking straight when I wrote this. That should be `ListCount (objects)`.",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry, guess I was really not thinking straight when I wrote this. That should be <code>ListCount (objects)</code>.</p>\n\n",
      "PostDate": "2019-10-20T11:06:32.6240007Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "15fdb437-13e7-4c71-9a94-20fec62e3b67",
      "UserId": 194873,
      "Username": "ShadowsEdge19",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a24333a42009e96c558cb89dc0c26d30?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "How would this line work too?\r\n\r\n```\r\nforeach (item, list)\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>How would this line work too?</p>\n<pre><code>foreach (item, list)\n</code></pre>\n\n",
      "PostDate": "2019-10-20T11:19:55.5990849Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a9f32c92-84c3-4346-8e24-60219f9fe30b",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yeah, should be <code style=\"color: green\">foreach (item, <b>objects</b>) {</code> too.\r\nI've updated the code in my post above. Hopefully there's no more silly mistakes I missed.",
      "EditableFormat": "markdown",
      "HTML": "<p>Yeah, should be <code style=\"color: green\">foreach (item, <b>objects</b>) {</code> too.<br>\nI've updated the code in my post above. Hopefully there's no more silly mistakes I missed.</p>\n\n",
      "PostDate": "2019-10-20T11:24:19.1012105Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "abfd6abe-8bbe-4db5-87a8-4b37f70032b9",
      "UserId": 194873,
      "Username": "ShadowsEdge19",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a24333a42009e96c558cb89dc0c26d30?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "It works as plain text but not as a hyperlink despite the game.hyperlink, you also forgot the preList and postList usage.\r\n\r\nhttps://imgur.com/a/89xXPHB\r\n\r\nFancyObjectList (fixed)\r\n\r\n```\r\n<function name=\"FancyObjectList\" parameters=\"preList, objects, postList, empty, joiner\" type=\"string\">\r\n  if (not IsDefined (\"joiner\")) {\r\n    joiner = \"and\"\r\n  }\r\n  if (TypeOf (objects) = \"object\") {\r\n    objects = GetDirectChildren (objects)\r\n  }\r\n  if (ListCount (objects) = 0) {\r\n    if (IsDefined (\"empty\")) {\r\n      return (empty)\r\n    }\r\n    else {\r\n      return (\"\")\r\n    }\r\n  }\r\n  else {\r\n    result = \"\"\r\n    itemsLeft = ListCount(objects)\r\n    foreach (item, objects) {\r\n      switch (TypeOf(item)) {\r\n        case (\"object\", \"exit\") {\r\n          result = result + GetDisplayNameLink(item, TypeOf(item))\r\n        }\r\n        case (\"string\") {\r\n          result = result + item\r\n        }\r\n        default {\r\n          result = result + ToString (item)\r\n        }\r\n      }\r\n      itemsLeft = itemsLeft - 1\r\n      if (itemsLeft > 0) {\r\n        if (itemsLeft > 1 or (GetBoolean(game, \"oxfordcomma\") and not ListCount (objects) = 2)) {\r\n          result = result + \", \"\r\n        }\r\n        else {\r\n          result = result + \" \"\r\n        }\r\n        if (itemsLeft = 1) {\r\n          result = result + joiner + \" \"\r\n        }\r\n      }\r\n    }\r\n\tresult = preList + result + postList\r\n    return (Trim (result))\r\n  }\r\n</function>\r\n```\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>It works as plain text but not as a hyperlink despite the game.hyperlink, you also forgot the preList and postList usage.</p>\n<p>https://imgur.com/a/89xXPHB</p>\n<p>FancyObjectList (fixed)</p>\n<pre><code>&lt;function name=\"FancyObjectList\" parameters=\"preList, objects, postList, empty, joiner\" type=\"string\"&gt;\n  if (not IsDefined (\"joiner\")) {\n    joiner = \"and\"\n  }\n  if (TypeOf (objects) = \"object\") {\n    objects = GetDirectChildren (objects)\n  }\n  if (ListCount (objects) = 0) {\n    if (IsDefined (\"empty\")) {\n      return (empty)\n    }\n    else {\n      return (\"\")\n    }\n  }\n  else {\n    result = \"\"\n    itemsLeft = ListCount(objects)\n    foreach (item, objects) {\n      switch (TypeOf(item)) {\n        case (\"object\", \"exit\") {\n          result = result + GetDisplayNameLink(item, TypeOf(item))\n        }\n        case (\"string\") {\n          result = result + item\n        }\n        default {\n          result = result + ToString (item)\n        }\n      }\n      itemsLeft = itemsLeft - 1\n      if (itemsLeft &gt; 0) {\n        if (itemsLeft &gt; 1 or (GetBoolean(game, \"oxfordcomma\") and not ListCount (objects) = 2)) {\n          result = result + \", \"\n        }\n        else {\n          result = result + \" \"\n        }\n        if (itemsLeft = 1) {\n          result = result + joiner + \" \"\n        }\n      }\n    }\n\tresult = preList + result + postList\n    return (Trim (result))\n  }\n&lt;/function&gt;\n</code></pre>\n\n",
      "PostDate": "2019-10-20T13:10:26.8369544Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6107a8fe-b6f2-41cf-ad2c-0ed02c8bfc02",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> It works as plain text but not as a hyperlink\r\n\r\nAre you sure that `game.enablehyperlinks` is true?\r\n\r\nAlso, double check that the exits are visible; if they're not, then the scripts called by `FinishTurn` will cause the javascript to remove links again.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>It works as plain text but not as a hyperlink</p>\n</blockquote>\n<p>Are you sure that <code>game.enablehyperlinks</code> is true?</p>\n<p>Also, double check that the exits are visible; if they're not, then the scripts called by <code>FinishTurn</code> will cause the javascript to remove links again.</p>\n\n",
      "PostDate": "2019-10-20T20:49:47.9803132Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "78e6cc6e-366e-492a-9698-6801e4b97cbd",
      "UserId": 194873,
      "Username": "ShadowsEdge19",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a24333a42009e96c558cb89dc0c26d30?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "All exits are visible as well as the game.enablehyperlinks, you can check from the full game code I posted earlier, obviously replacing the broken version of the FancyObjectList with the one I posted before this.",
      "EditableFormat": "markdown",
      "HTML": "<p>All exits are visible as well as the game.enablehyperlinks, you can check from the full game code I posted earlier, obviously replacing the broken version of the FancyObjectList with the one I posted before this.</p>\n\n",
      "PostDate": "2019-10-20T22:18:27.1430393Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4b320ce9-3fe9-4673-a70f-c550f7646cc9",
      "UserId": 194873,
      "Username": "ShadowsEdge19",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a24333a42009e96c558cb89dc0c26d30?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "https://imgur.com/a/ltoFbLa\r\n\r\nUpdate: I think there's a way to do it with CommandLink(GetDisplayName(item),GetDisplayName(item)) but it's a bit of a hack and according to the documentation GetDisplayNameLink() should have worked but it's broken.",
      "EditableFormat": "markdown",
      "HTML": "<p>https://imgur.com/a/ltoFbLa</p>\n<p>Update: I think there's a way to do it with CommandLink(GetDisplayName(item),GetDisplayName(item)) but it's a bit of a hack and according to the documentation GetDisplayNameLink() should have worked but it's broken.</p>\n\n",
      "PostDate": "2019-10-21T21:35:32.2247264Z",
      "LastEditDate": "2019-10-21T22:09:18.813031Z",
      "link": null
    },
    {
      "PostId": "825c4b23-c61a-42f4-82d1-976a712fd017",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ugh… can't believe I missed a dumb mistake so many times. `TypeOf (item)` is \"object\" for exits.\r\n\r\nSo\r\n<pre><code style=\"color:brown\">        case (\"object\", \"exit\") {\r\n          result = result + GetDisplayNameLink(item, TypeOf(item))\r\n        }</code></pre>\r\nshould be:\r\n<pre><code style=\"color:green\">        case (\"object\") {\r\n          if (DoesInherit (item, \"defaultexit\")) {\r\n            result = result + GetDisplayNameLink(item, \"exit\")\r\n          }\r\n          else {\r\n            result = result + GetDisplayNameLink(item, \"object\")\r\n          }\r\n        }</code></pre>\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Ugh… can't believe I missed a dumb mistake so many times. <code>TypeOf (item)</code> is \"object\" for exits.</p>\n<p>So</p>\n<pre><code style=\"color: brown\">        case (\"object\", \"exit\") {\n          result = result + GetDisplayNameLink(item, TypeOf(item))\n        }</code></pre>\n<p>should be:</p>\n<pre><code style=\"color: green\">        case (\"object\") {\n          if (DoesInherit (item, \"defaultexit\")) {\n            result = result + GetDisplayNameLink(item, \"exit\")\n          }\n          else {\n            result = result + GetDisplayNameLink(item, \"object\")\n          }\n        }</code></pre>\n\n",
      "PostDate": "2019-10-21T22:39:22.5794983Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fa4d5c32-536f-4dc2-911e-e5a61ac1d8d0",
      "UserId": 194873,
      "Username": "ShadowsEdge19",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a24333a42009e96c558cb89dc0c26d30?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Excellent, that works a treat now.",
      "EditableFormat": "markdown",
      "HTML": "<p>Excellent, that works a treat now.</p>\n\n",
      "PostDate": "2019-10-22T16:02:57.6523464Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
