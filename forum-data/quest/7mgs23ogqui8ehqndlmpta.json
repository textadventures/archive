{
  "Topic": {
    "TopicId": "7mgs23ogqui8ehqndlmpta",
    "ForumId": "10",
    "Title": "Is there a null result to 'get input'?",
    "LastUpdated": "2020-04-24T04:00:37.7351012Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "3c8281d7-5c71-477e-be5b-a3f891ecfdf8",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```\r\nget input {\r\n  if (result = null) {\r\n    HandleSingleCommand (\"Back to the action!\")\r\n  }\r\n  Ask (\"Is this what you want to add to the journal?<br>\" + result) {\r\n    if (result) {\r\n      list add (player.playeraddjournal, game.answer)\r\n      HandleSingleCommand (\"journal\")\r\n      msg (\"<br><center>You have written in your journal.\")\r\n      game.nojournal = True\r\n    }\r\n    else if (result = false) {\r\n      HandleSingleCommand (\"journal\")\r\n    }\r\n  }\r\n}\r\n```\r\nI want the third line ```HandleSingleCommand (\"Back to the action!\")``` to run if the player just presses the \"ENTER\" key.\r\nThere are instructions to do this before this script. \r\n\r\nDoes hitting the \"enter\" key pass a result other than the fact you pushed it?\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<pre><code>get input {\n  if (result = null) {\n    HandleSingleCommand (\"Back to the action!\")\n  }\n  Ask (\"Is this what you want to add to the journal?&lt;br&gt;\" + result) {\n    if (result) {\n      list add (player.playeraddjournal, game.answer)\n      HandleSingleCommand (\"journal\")\n      msg (\"&lt;br&gt;&lt;center&gt;You have written in your journal.\")\n      game.nojournal = True\n    }\n    else if (result = false) {\n      HandleSingleCommand (\"journal\")\n    }\n  }\n}\n</code></pre>\n<p>I want the third line <code>HandleSingleCommand (\"Back to the action!\")</code> to run if the player just presses the \"ENTER\" key.<br>\nThere are instructions to do this before this script.</p>\n<p>Does hitting the \"enter\" key pass a result other than the fact you pushed it?</p>\n\n",
      "PostDate": "2020-04-24T04:00:37.7351012Z",
      "LastEditDate": "2020-04-24T04:01:20.6688121Z",
      "link": null
    },
    {
      "PostId": "de620b08-c824-4879-9b00-fd3fafaa3739",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "```get input``` gives a string result, not an object, so ```null``` wouldn't apply.  Just do for the first three lines:\r\n```\r\nget input {\r\n  if (result = \"\") {\r\n    msg (\"Back to the action!\")\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p><code>get input</code> gives a string result, not an object, so <code>null</code> wouldn't apply.  Just do for the first three lines:</p>\n<pre><code>get input {\n  if (result = \"\") {\n    msg (\"Back to the action!\")\n</code></pre>\n\n",
      "PostDate": "2020-04-24T04:23:51.7710875Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1b4eaef6-6705-4535-b111-1c0c0d3e38ba",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Pretty sure I did this already. Tested it again and nothing happens when I press enter. Took me 8 hours to write this code. 6 of it was trying to solve this.\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Pretty sure I did this already. Tested it again and nothing happens when I press enter. Took me 8 hours to write this code. 6 of it was trying to solve this.</p>\n\n",
      "PostDate": "2020-04-24T05:55:01.2065662Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a52c5a46-46f1-41c5-9e79-a8efed9d9430",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Whole script work but that one dang line\r\n```\r\nViewObjectScreen\r\nrequest (Show, \"Command\")\r\nmsg (\"<center><h2>William's Journal\")\r\nmsg (\"<center><em>{color:silver:--------These are quests added by the game--------}\")\r\nif (ListCount(player.journal) = 0) {\r\n  msg (\"<center>NO ENTRIES YET!\")\r\n}\r\nmsg (\"<center>------------------------------------------\")\r\nforeach (s, player.journal) {\r\n  msg (s)\r\n}\r\nmsg (\"<br><br><center><em>{color:silver:--------These are notes are added by you--------}\")\r\nif (ListCount(player.playeraddjournal) = 0) {\r\n  msg (\"<center>NO ENTRIES YET!\")\r\n}\r\nmsg (\"<center>------------------------------------------\")\r\nforeach (n, player.playeraddjournal) {\r\n  msg (n)\r\n  msg (\"\")\r\n}\r\nmsg (\"<center><small><em><br>Please type in the box below to enter the information if you want to add to your journal notes. Then press ENTER.\")\r\nmsg (\"<center><small><em><br>Press 'ENTER' to close the journal\")\r\nget input {\r\n  game.answer = result\r\n  if (result = \"\") {\r\n    HandleSingleCommand (\"Back to the action!\")\r\n  }\r\n  Ask (\"Is this what you want to add to the journal?<br>\" + result) {\r\n    if (result) {\r\n      list add (player.playeraddjournal, game.answer)\r\n      HandleSingleCommand (\"journal\")\r\n      msg (\"<br><center>You have written in your journal.\")\r\n      game.nojournal = True\r\n    }\r\n    else if (result = false) {\r\n      HandleSingleCommand (\"journal\")\r\n    }\r\n  }\r\n}\r\n```\r\n**EDIT**: Forgot to add this line after get input.\r\n```game.answer = result```\r\n\r\nI did have player type 'exit' and then had the line read:\r\n``` if (result = \"exit\") {```\r\nand that works. just wanted it to be a keypress of 'enter'.\r\n\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Whole script work but that one dang line</p>\n<pre><code>ViewObjectScreen\nrequest (Show, \"Command\")\nmsg (\"&lt;center&gt;&lt;h2&gt;William's Journal\")\nmsg (\"&lt;center&gt;&lt;em&gt;{color:silver:--------These are quests added by the game--------}\")\nif (ListCount(player.journal) = 0) {\n  msg (\"&lt;center&gt;NO ENTRIES YET!\")\n}\nmsg (\"&lt;center&gt;------------------------------------------\")\nforeach (s, player.journal) {\n  msg (s)\n}\nmsg (\"&lt;br&gt;&lt;br&gt;&lt;center&gt;&lt;em&gt;{color:silver:--------These are notes are added by you--------}\")\nif (ListCount(player.playeraddjournal) = 0) {\n  msg (\"&lt;center&gt;NO ENTRIES YET!\")\n}\nmsg (\"&lt;center&gt;------------------------------------------\")\nforeach (n, player.playeraddjournal) {\n  msg (n)\n  msg (\"\")\n}\nmsg (\"&lt;center&gt;&lt;small&gt;&lt;em&gt;&lt;br&gt;Please type in the box below to enter the information if you want to add to your journal notes. Then press ENTER.\")\nmsg (\"&lt;center&gt;&lt;small&gt;&lt;em&gt;&lt;br&gt;Press 'ENTER' to close the journal\")\nget input {\n  game.answer = result\n  if (result = \"\") {\n    HandleSingleCommand (\"Back to the action!\")\n  }\n  Ask (\"Is this what you want to add to the journal?&lt;br&gt;\" + result) {\n    if (result) {\n      list add (player.playeraddjournal, game.answer)\n      HandleSingleCommand (\"journal\")\n      msg (\"&lt;br&gt;&lt;center&gt;You have written in your journal.\")\n      game.nojournal = True\n    }\n    else if (result = false) {\n      HandleSingleCommand (\"journal\")\n    }\n  }\n}\n</code></pre>\n<p><strong>EDIT</strong>: Forgot to add this line after get input.<br>\n<code>game.answer = result</code></p>\n<p>I did have player type 'exit' and then had the line read:<br>\n<code>if (result = \"exit\") {</code><br>\nand that works. just wanted it to be a keypress of 'enter'.</p>\n\n",
      "PostDate": "2020-04-24T05:57:25.8670784Z",
      "LastEditDate": "2020-04-24T06:19:18.0846212Z",
      "link": null
    },
    {
      "PostId": "e1001fa9-b90c-450c-b0fd-4c3b397bc134",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "https://i.imgur.com/O07mlRtb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ok, I just tested out my code and you can't enter (nothing) as the input (although you can enter a blank space).  So you would have to include a message like:\r\n```\r\nmsg (\"Enter X to cancel\")\r\nif (result = \"x\") {\r\n  msg (\"Back to the game\")\r\n}\r\nelse {\r\n  msg (\"Something else happens\")\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Ok, I just tested out my code and you can't enter (nothing) as the input (although you can enter a blank space).  So you would have to include a message like:</p>\n<pre><code>msg (\"Enter X to cancel\")\nif (result = \"x\") {\n  msg (\"Back to the game\")\n}\nelse {\n  msg (\"Something else happens\")\n}\n</code></pre>\n\n",
      "PostDate": "2020-04-24T06:30:28.8252754Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "b43a08a9-fa78-4a67-8bfd-8d3163fed659",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Haven't tried it, but I think putting `JS.eval(\"$(function () {var a=runCommand;runCommand=function(){sendCommand($(\"#txtCommand\").val());runCommand=a;};});\")` immediately before a `get input` should allow the player to input an empty string. (I've made it restore the original behaviour afterwards, because sending an empty string to the parser might cause errors)",
      "EditableFormat": "markdown",
      "HTML": "<p>Haven't tried it, but I think putting <code>JS.eval(\"$(function () {var a=runCommand;runCommand=function(){sendCommand($(\"#txtCommand\").val());runCommand=a;};});\")</code> immediately before a <code>get input</code> should allow the player to input an empty string. (I've made it restore the original behaviour afterwards, because sending an empty string to the parser might cause errors)</p>\n\n",
      "PostDate": "2020-04-24T09:47:43.2334004Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4a35ed8b-09ba-4c4a-8413-945ae34e1a05",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Tried your line of code Mrangel. Throws error of unexpected character, line 1, column 71. It is far beyond me And I would never figure it out.",
      "EditableFormat": "markdown",
      "HTML": "<p>Tried your line of code Mrangel. Throws error of unexpected character, line 1, column 71. It is far beyond me And I would never figure it out.</p>\n\n",
      "PostDate": "2020-04-24T14:05:16.266046Z",
      "LastEditDate": "2020-04-24T14:21:27.4647334Z",
      "link": null
    },
    {
      "PostId": "9eafa79a-be82-4733-92eb-5b84b27762cb",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry, forgot to escape it.\r\n\r\nIf one of my `JS.eval` lines gives that error, the most likely cause is that there's a `\"` or a `\\` in the middle of it somewhere. Either put a `\\` before the offending character, ot change `\"` to `'`.\r\n\r\nSo that line should be either:\r\n<pre><code>JS.eval(\"$(function () {var a=runCommand;runCommand=function(){sendCommand($(<b style=\"border: 1px solid green; color: darkgreen;\">\\\"</b>#txtCommand<b style=\"border: 1px solid green; color: darkgreen;\">\\\"</b>).val());runCommand=a;};});\")</code></pre>\r\nor\r\n<pre><code>JS.eval(\"$(function () {var a=runCommand;runCommand=function(){sendCommand($(<b style=\"border: 1px solid green; color: darkgreen;\">'</b>#txtCommand<b style=\"border: 1px solid green; color: darkgreen;\">'</b>).val());runCommand=a;};});\")</code></pre>\r\n\r\n(When the player presses enter, it triggers the `runCommand` function, which looks at the text in the command bar, and if it's longer than 0 characters passes that to the function `sendCommand`. I replaced it with a modified version:\r\n* `JS.eval(\"` - pass the command to the javascript interpreter\r\n    * `$(function () {` - A guard function. I use this every time I do javascript in Quest, because it prevents a ton of confusing errors that are very hard to debug.\r\n        * `var a = runCommand;` - stores the `runCommand` function in a local variable `a`.\r\n        * `runCommand = function () {` - creates a new runCommand function, which will:\r\n            * `sendCommand (` - send a command to the Quest backend (without checking if it's an empty string)\r\n                * `$('#txtCommand').val()` - current value of the input box with ID \"txtCommand\" (the command bar)\r\n            * `);`\r\n            * `runCommand = a;` - change the runCommand function back to the default one we saved earlier\r\n        * `};`\r\n    * `})` - end of the guard function\r\n* `\")`",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry, forgot to escape it.</p>\n<p>If one of my <code>JS.eval</code> lines gives that error, the most likely cause is that there's a <code>\"</code> or a <code>\\</code> in the middle of it somewhere. Either put a <code>\\</code> before the offending character, ot change <code>\"</code> to <code>'</code>.</p>\n<p>So that line should be either:</p>\n<pre><code>JS.eval(\"$(function () {var a=runCommand;runCommand=function(){sendCommand($(<b style=\"border: 1px solid green; color: darkgreen\">\\\"</b>#txtCommand<b style=\"border: 1px solid green; color: darkgreen\">\\\"</b>).val());runCommand=a;};});\")</code></pre>\n<p>or</p>\n<pre><code>JS.eval(\"$(function () {var a=runCommand;runCommand=function(){sendCommand($(<b style=\"border: 1px solid green; color: darkgreen\">'</b>#txtCommand<b style=\"border: 1px solid green; color: darkgreen\">'</b>).val());runCommand=a;};});\")</code></pre>\n<p>(When the player presses enter, it triggers the <code>runCommand</code> function, which looks at the text in the command bar, and if it's longer than 0 characters passes that to the function <code>sendCommand</code>. I replaced it with a modified version:</p>\n<ul>\n<li><code>JS.eval(\"</code> - pass the command to the javascript interpreter\n<ul>\n<li><code>$(function () {</code> - A guard function. I use this every time I do javascript in Quest, because it prevents a ton of confusing errors that are very hard to debug.\n<ul>\n<li><code>var a = runCommand;</code> - stores the <code>runCommand</code> function in a local variable <code>a</code>.</li>\n<li><code>runCommand = function () {</code> - creates a new runCommand function, which will:\n<ul>\n<li><code>sendCommand (</code> - send a command to the Quest backend (without checking if it's an empty string)\n<ul>\n<li><code>$('#txtCommand').val()</code> - current value of the input box with ID \"txtCommand\" (the command bar)</li>\n</ul>\n</li>\n<li><code>);</code></li>\n<li><code>runCommand = a;</code> - change the runCommand function back to the default one we saved earlier</li>\n</ul>\n</li>\n<li><code>};</code></li>\n</ul>\n</li>\n<li><code>})</code> - end of the guard function</li>\n</ul>\n</li>\n<li><code>\")</code></li>\n</ul>\n\n",
      "PostDate": "2020-04-24T16:23:33.2292112Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e45ab5fd-59d8-4594-a0bb-e148a158838a",
      "UserId": 142763,
      "Username": "Forgewright",
      "AvatarUrl": "http://i.imgur.com/Ea6HecZb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks for the rundown on the code. It line works great so far. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks for the rundown on the code. It line works great so far.</p>\n\n",
      "PostDate": "2020-04-24T19:42:08.9420008Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
