{
  "Topic": {
    "TopicId": "sbvk9t9v5u_zjuqedhhfyw",
    "ForumId": "10",
    "Title": "Game cannot process expression \"this\"",
    "LastUpdated": "2019-05-06T01:17:00.9200744Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "e85edc4c-37d1-4517-8925-92539595b219",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I am trying to get monsters, Pokemon, to spawn in my game. I keep getting errors.\r\n\r\nError running script: Error compiling expression 'this': Unknown object or variable 'this'\r\n\r\nThis is my code.\r\n\r\nhttps://i.imgur.com/hUSbgRP.png\r\nhttps://i.imgur.com/GWOSWcH.png\r\n\r\nGame link.\r\nhttp://textadventures.co.uk/games/view/5jllte-m4e2e2whw4gf5jq/pokemon-type-harley-johto-and-sinnoh",
      "EditableFormat": "markdown",
      "HTML": "<p>I am trying to get monsters, Pokemon, to spawn in my game. I keep getting errors.</p>\n<p>Error running script: Error compiling expression 'this': Unknown object or variable 'this'</p>\n<p>This is my code.</p>\n<p>https://i.imgur.com/hUSbgRP.png<br>\nhttps://i.imgur.com/GWOSWcH.png</p>\n<p>Game link.<br>\nhttp://textadventures.co.uk/games/view/5jllte-m4e2e2whw4gf5jq/pokemon-type-harley-johto-and-sinnoh</p>\n\n",
      "PostDate": "2019-05-06T01:17:00.9200744Z",
      "LastEditDate": "2019-05-07T01:31:07.9280609Z",
      "link": null
    },
    {
      "PostId": "91edd747-5f38-426d-aa68-464e9debbc76",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Could you click on the code view button, and copy-and-paste that? Even if it means nothing to you, it is easier for us (well me) to see what is going on.",
      "EditableFormat": "markdown",
      "HTML": "<p>Could you click on the code view button, and copy-and-paste that? Even if it means nothing to you, it is easier for us (well me) to see what is going on.</p>\n\n",
      "PostDate": "2019-05-06T10:05:36.5685194Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "3e246689-0366-44f8-82b7-c85c53a00bb8",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Okay.\r\n\r\n```\r\nroll = GetRandomInt(1,100)\r\nfirsttime {\r\n  if (roll > 0 and roll < 26) {\r\n    SpawnSentret (this)\r\n  }\r\n  else if (roll > 25 and roll < 51) {\r\n    SpawnHoothoot (this)\r\n  }\r\n  else if (roll > 50 and roll < 76) {\r\n    SpawnSpinarak (this)\r\n  }\r\n}\r\notherwise {\r\n  if (roll > 0 and roll < 21) {\r\n    SpawnSentret (this)\r\n  }\r\n  else if (roll > 20 and roll < 41) {\r\n    SpawnHoothoot (this)\r\n  }\r\n  else if (roll > 40 and roll < 61) {\r\n    SpawnSpinarak (this)\r\n  }\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Okay.</p>\n<pre><code>roll = GetRandomInt(1,100)\nfirsttime {\n  if (roll &gt; 0 and roll &lt; 26) {\n    SpawnSentret (this)\n  }\n  else if (roll &gt; 25 and roll &lt; 51) {\n    SpawnHoothoot (this)\n  }\n  else if (roll &gt; 50 and roll &lt; 76) {\n    SpawnSpinarak (this)\n  }\n}\notherwise {\n  if (roll &gt; 0 and roll &lt; 21) {\n    SpawnSentret (this)\n  }\n  else if (roll &gt; 20 and roll &lt; 41) {\n    SpawnHoothoot (this)\n  }\n  else if (roll &gt; 40 and roll &lt; 61) {\n    SpawnSpinarak (this)\n  }\n}\n</code></pre>\n\n",
      "PostDate": "2019-05-06T17:06:41.6077333Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "fd804437-63ae-4d4b-922e-099f29b8ae3d",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "That looks fine. Could it be in one of the three functions SpawnSentret, etc.?",
      "EditableFormat": "markdown",
      "HTML": "<p>That looks fine. Could it be in one of the three functions SpawnSentret, etc.?</p>\n\n",
      "PostDate": "2019-05-06T18:45:40.5320084Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "bac0d28f-fd61-4f11-bc2c-37bd5427d113",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "In the code shown in your first two screenshots, and in the downloaded game, you use the variable `object` without defining it.\r\n\r\nIn the code in your second post, you change `object` to `this`, which should work fine.\r\n\r\nCan you confirm which one you're testing on?",
      "EditableFormat": "markdown",
      "HTML": "<p>In the code shown in your first two screenshots, and in the downloaded game, you use the variable <code>object</code> without defining it.</p>\n<p>In the code in your second post, you change <code>object</code> to <code>this</code>, which should work fine.</p>\n<p>Can you confirm which one you're testing on?</p>\n\n",
      "PostDate": "2019-05-06T20:08:57.1762737Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1014e4d7-900d-4b38-bd4d-2ec144ba6848",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> Can you confirm which one you're testing on?\r\n\r\nBoth.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Can you confirm which one you're testing on?</p>\n</blockquote>\n<p>Both.</p>\n\n",
      "PostDate": "2019-05-06T22:28:02.2698016Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "4bb97b32-81fc-4760-b0ea-531977cc3f2f",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Can I use something other than \"this\"?",
      "EditableFormat": "markdown",
      "HTML": "<p>Can I use something other than \"this\"?</p>\n\n",
      "PostDate": "2019-05-07T08:31:42.7987539Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "22518bfb-973e-4a9f-8611-a888c38e7c53",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "So, if you use the variable name `this` in the code, you get an error that Quest doesn't know what you mean by `this`.\r\n\r\nIf you use the variable name `object` in the code, you get an error that Quest doesn't know what you mean by `this`.\r\n\r\nThat tells you right away that you're looking in the wrong place for the error. If it says it doesn't know what `this` is, then the error must be somewhere you're using `this`.\r\n\r\nLet's look at your spawn functions.\r\n\r\n```\r\n    obj.hitpoints = 20\r\n    obj.max = 20\r\n    obj.damage = 2\r\n    obj.maxdamage = 2\r\n```\r\nyep, that all looks fine. You've got a variable named `obj` which contains the new Pokemon you're creating, and you're setting its attributes.\r\n\r\nAnd then after a few lines more of that:\r\n<pre><code style=\"color: brown\">    this.firearmdamage = 4\r\n    this.firearmattack = 2</code></pre>\r\n\r\nThere is no variable `this` inside that function. That's your error; it should be `obj` like all the lines above it.",
      "EditableFormat": "markdown",
      "HTML": "<p>So, if you use the variable name <code>this</code> in the code, you get an error that Quest doesn't know what you mean by <code>this</code>.</p>\n<p>If you use the variable name <code>object</code> in the code, you get an error that Quest doesn't know what you mean by <code>this</code>.</p>\n<p>That tells you right away that you're looking in the wrong place for the error. If it says it doesn't know what <code>this</code> is, then the error must be somewhere you're using <code>this</code>.</p>\n<p>Let's look at your spawn functions.</p>\n<pre><code>    obj.hitpoints = 20\n    obj.max = 20\n    obj.damage = 2\n    obj.maxdamage = 2\n</code></pre>\n<p>yep, that all looks fine. You've got a variable named <code>obj</code> which contains the new Pokemon you're creating, and you're setting its attributes.</p>\n<p>And then after a few lines more of that:</p>\n<pre><code style=\"color: brown\">    this.firearmdamage = 4\n    this.firearmattack = 2</code></pre>\n<p>There is no variable <code>this</code> inside that function. That's your error; it should be <code>obj</code> like all the lines above it.</p>\n\n",
      "PostDate": "2019-05-07T08:49:40.827165Z",
      "LastEditDate": "2019-05-07T08:50:38.7902825Z",
      "link": null
    },
    {
      "PostId": "7981e973-6b1f-46ee-ae95-cf0c6614293f",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "\"this\" doesn't work in my other functions either.\r\n\r\nI have a function called \"instantkill.\" It looks like this:\r\n\r\n ```\r\nthis.dead = true\r\nmsg (\"The Pokemon whited out!\")\r\nAddToInventory (this)\r\n```\r\n\r\nmrangel's code doesn't work either. I don't know what's wrong.\r\n\r\nI think my game is just broken somehow.",
      "EditableFormat": "markdown",
      "HTML": "<p>\"this\" doesn't work in my other functions either.</p>\n<p>I have a function called \"instantkill.\" It looks like this:</p>\n<pre><code>this.dead = true\nmsg (\"The Pokemon whited out!\")\nAddToInventory (this)\n</code></pre>\n<p>mrangel's code doesn't work either. I don't know what's wrong.</p>\n<p>I think my game is just broken somehow.</p>\n\n",
      "PostDate": "2019-05-10T03:38:45.6665728Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "96d277bc-5f0b-41cc-a990-80564429a262",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "'this' is a built-in Object Reference/Pointer Variable VARIABLE to the parent Object of the scripting that you use 'this' within\r\n\r\n```\r\n<object name=\"orc\">\r\n\r\n  <attr name=\"attack\" type=\"script\">\r\n    // this = orc\r\n    this.life = this.life - player.damage\r\n  </attr>\r\n\r\n</object>\r\n\r\n<object name=\"ogre\">\r\n\r\n  <attr name=\"attack\" type=\"script\">\r\n    // this = ogre\r\n    this.life = this.life - player.damage\r\n  </attr>\r\n\r\n</object>\r\n```\r\n\r\n------------\r\n\r\nyou can also set 'this' to whatever you want manually as well:\r\n\r\n```\r\n<object name=\"orc\">\r\n\r\n  <attr name=\"attack\" type=\"script\">\r\n    this = ogre\r\n    this.life = this.life - player.damage\r\n  </attr>\r\n\r\n</object>\r\n\r\n<object name=\"ogre\">\r\n\r\n  <attr name=\"attack\" type=\"script\">\r\n    this = orc\r\n    this.life = this.life - player.damage\r\n  </attr>\r\n\r\n</object>\r\n```\r\n\r\n--------------------\r\n\r\n'this' is a Variable VARIABLE, meaning it's a local Variable, so it has a limited and confusing scope\r\n\r\nhttp://docs.textadventures.co.uk/quest/blocks_and_scripts.html (this might have some relevance on helping understanding its scope)\r\n\r\nhopefully, others can explain where/when/what it works vs doesn't work, as I have trouble myself with understanding scope still",
      "EditableFormat": "markdown",
      "HTML": "<p>'this' is a built-in Object Reference/Pointer Variable VARIABLE to the parent Object of the scripting that you use 'this' within</p>\n<pre><code>&lt;object name=\"orc\"&gt;\n\n  &lt;attr name=\"attack\" type=\"script\"&gt;\n    // this = orc\n    this.life = this.life - player.damage\n  &lt;/attr&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"ogre\"&gt;\n\n  &lt;attr name=\"attack\" type=\"script\"&gt;\n    // this = ogre\n    this.life = this.life - player.damage\n  &lt;/attr&gt;\n\n&lt;/object&gt;\n</code></pre>\n<hr>\n<p>you can also set 'this' to whatever you want manually as well:</p>\n<pre><code>&lt;object name=\"orc\"&gt;\n\n  &lt;attr name=\"attack\" type=\"script\"&gt;\n    this = ogre\n    this.life = this.life - player.damage\n  &lt;/attr&gt;\n\n&lt;/object&gt;\n\n&lt;object name=\"ogre\"&gt;\n\n  &lt;attr name=\"attack\" type=\"script\"&gt;\n    this = orc\n    this.life = this.life - player.damage\n  &lt;/attr&gt;\n\n&lt;/object&gt;\n</code></pre>\n<hr>\n<p>'this' is a Variable VARIABLE, meaning it's a local Variable, so it has a limited and confusing scope</p>\n<p>http://docs.textadventures.co.uk/quest/blocks_and_scripts.html (this might have some relevance on helping understanding its scope)</p>\n<p>hopefully, others can explain where/when/what it works vs doesn't work, as I have trouble myself with understanding scope still</p>\n\n",
      "PostDate": "2019-05-10T05:20:56.0372681Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "693a66fe-c9aa-4cd3-bb13-6a1fde93b1b4",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> \"this\" doesn't work in my other functions either.\r\n\r\n**In a verb** `this` means the object the verb is being used on.\r\n\r\n**In a command** `this` means the command\r\n\r\n**In an room's enter/exit script** `this` means the room\r\n\r\n**In a function** `this` is meaningless. You need to specify which object you want to use.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>\"this\" doesn't work in my other functions either.</p>\n</blockquote>\n<p><strong>In a verb</strong> <code>this</code> means the object the verb is being used on.</p>\n<p><strong>In a command</strong> <code>this</code> means the command</p>\n<p><strong>In an room's enter/exit script</strong> <code>this</code> means the room</p>\n<p><strong>In a function</strong> <code>this</code> is meaningless. You need to specify which object you want to use.</p>\n\n",
      "PostDate": "2019-05-10T12:07:15.2793096Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "a2cec08a-462a-40fd-a8d3-173eff691e1a",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm just going to try the room and see what happens.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm just going to try the room and see what happens.</p>\n\n",
      "PostDate": "2019-05-10T17:48:41.5031493Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "df7269f9-7e72-4e14-b373-1a369e26570b",
      "UserId": 301690,
      "Username": "Richard Headkid",
      "AvatarUrl": "http://i.imgur.com/WUGXS8yb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">mrangel's code doesn't work either. I don't know what's wrong.\r\n\r\n![image](https://i.imgur.com/GWOSWcH.png)\r\n\r\nIt looks like you're calling ```SpawnSentret``` with an undefined (or non-existent) variable/parameter (```object```).\r\n\r\nLike mrangel says: *In [a] room's enter/exit script ```this``` means the room*.\r\n\r\nThere is no ```object``` variable in that script, so the function you call throws an error due to a lack of parameter.\r\n\r\nSo, first off, change every instance of ```object``` back to ```this``` in your \"After entering\" script.\r\n\r\nThen, well, I don't know how the function you are calling (```SpawnSentret```) works, but I assume its parameter needs to be a room.\r\n\r\nSo, like . . .\r\n\r\nTime out.\r\n\r\n---\r\n**1 minute later:**\r\n\r\nI just downloaded your game, unzipped it, and opened the aslx file in a text editor.\r\n\r\nHere is the ```SpawnSentret``` function:\r\n\r\n<details>\r\n\r\n```\r\n  <function name=\"SpawnSentret\" parameters=\"room\"><![CDATA[\r\n    if (HasInt(game, \"crittercount\")) {\r\n      game.crittercount = game.crittercount + 1\r\n    }\r\n    else {\r\n      game.crittercount = 1\r\n    }\r\n    create (\"crittercount\" + game.crittercount)\r\n    obj = GetObject(\"crittercount\" + game.crittercount)\r\n    obj.parent = room\r\n    obj.displayverbs = Split(\"Look at;Attack;Direct Hit;Stat;Status\", \";\")\r\n    obj.dead = false\r\n    obj.hero = false\r\n    obj.changedhitpoints => {\r\n      if (this.hitpoints < 1) {\r\n        this.dead = true\r\n        msg (\"It whited out!\")\r\n        player.exp = player.exp + 20\r\n        player.pokedollar = player.pokedollar + 5\r\n        roll2 = GetRandomInt(1,20)\r\n        pokeroll = player.catchrate + roll2\r\n        if (pokeroll > 16) {\r\n          if (player.team > 7) {\r\n            MoveObject (this, PC)\r\n            this.displayverbs = Split(\"Look at;Equip;Reload\", \";\")\r\n            msg (\"object.alias was moved to the PC.\")\r\n          }\r\n          else {\r\n            this.displayverbs = Split(\"Look at;Equip;Reload\", \";\")\r\n            AddToInventory (this)\r\n          }\r\n        }\r\n        else {\r\n          RemoveObject (this)\r\n        }\r\n      }\r\n    }\r\n    obj.element = \"Normal\"\r\n    obj.alias = \"Sentret\"\r\n    obj.listalias = CapFirst(obj.alias)\r\n    obj.look = ProcessText(\"A \" + obj.alias + \". A normal type. A very cautious Pokémon, it raises itself up using its tail to get a better view of its surroundings.\")\r\n    obj.critdesc = \"A well-placed blow by #attacker# sends you reeling (#hits# hits).\"\r\n    obj.attackdesc = \"#Attacker# hits you (#hits# hits).\"\r\n    obj.missdesc = \"#Attacker# misses you.\"\r\n    obj.hitpoints = 20\r\n    obj.max = 20\r\n    obj.damage = 3\r\n    obj.maxdamage = 3\r\n    obj.attack = 1\r\n    obj.maxattack = 1\r\n    obj.defence = 0\r\n    obj.maxdefence = 0\r\n    obj.armour = 0\r\n    obj.maxarmour = 0\r\n    obj.speed = 10\r\n    obj.maxspeed = 10\r\n    obj.contestpoints = 100\r\n    obj.maxcontestpoints = 100\r\n    obj.tough = 5\r\n    obj.maxtough = 5\r\n    obj.beauty = 6\r\n    obj.maxbeauty = 6\r\n    obj.cool = 4\r\n    obj.cool = 4\r\n    obj.smart = 2\r\n    obj.smart = 2\r\n    obj.cute = 4\r\n    obj.cute = 4\r\n    obj.trainerpoke = false\r\n    obj.faint = false\r\n    obj.element1 = \"normal\"\r\n    obj.selectweapon => {\r\n      this.weapon = GetObject(PickOneString(\"Struggle;Quick Attack;Scratch\"))\r\n    }\r\n    obj.selectattack => {\r\n      this.weapon = GetObject(PickOneString(\"Struggle;Quick Attack;Scratch\"))\r\n    }\r\n    this.firearmdamage = 4\r\n    this.firearmattack = 2\r\n    this.ammo = 20\r\n    this.ammomax = 20\r\n    // ProcessText(\"A \" + obj.alias + \",t}.\")\r\n  ]]></function>\r\n\r\n\r\n```\r\n</details>\r\n\r\n\r\n---\r\nI see the same thing mrangel and HK and Pixie see.  These are your last 12 lines of code in that function:\r\n```\r\n    obj.element1 = \"normal\"\r\n    obj.selectweapon => {\r\n      this.weapon = GetObject(PickOneString(\"Struggle;Quick Attack;Scratch\"))\r\n    }\r\n    obj.selectattack => {\r\n      this.weapon = GetObject(PickOneString(\"Struggle;Quick Attack;Scratch\"))\r\n    }\r\n    this.firearmdamage = 4\r\n    this.firearmattack = 2\r\n    this.ammo = 20\r\n    this.ammomax = 20\r\n    // ProcessText(\"A \" + obj.alias + \",t}.\")\r\n```\r\n\r\n\r\nAs others have pointed out, you define the variable ```obj``` early in the code, but the variable ```this``` does not exist in this script.\r\n\r\nI see how someone could easily get confused, though (because it seems like ```this``` exists in the \"After entering\" script):\r\n```\r\n    obj.selectattack => {\r\n      this.weapon = GetObject(PickOneString(\"Struggle;Quick Attack;Scratch\"))\r\n    }\r\n```\r\n\r\nThat bit of code is actually creating a ```selectattack``` script for whatever ```obj``` points to.  In that ```selectattack``` script, ```this``` will work because that script is an attribute on an object.  As others have said, when a script is an attribute on an object (like a verb script), ```this``` will point to the object to which the script attribute belongs.\r\n\r\nBut ```this``` is not defined in your \"After entering room\" script.  So, like others said, those last 4 lines of code (not counting the last line -- which is commented out) should use the ```obj``` variable (which you definitely do define in this script), like this:\r\n\r\n\r\n```\r\n    obj.firearmdamage = 4\r\n    obj.firearmattack = 2\r\n    obj.ammo = 20\r\n    obj.ammomax = 20\r\n    // ProcessText(\"A \" + obj.alias + \",t}.\")\r\n```\r\n\r\n---\r\n>I think my game is just broken somehow.\r\n\r\nWell...\r\n\r\nIf you weren't playing Solitaire and watching two YouTube videos while you were editing the game, it would probably work better!  (Just kidding!!!)",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>mrangel's code doesn't work either. I don't know what's wrong.</p>\n</blockquote>\n<p><img src=\"https://i.imgur.com/GWOSWcH.png\" alt=\"image\"></p>\n<p>It looks like you're calling <code>SpawnSentret</code> with an undefined (or non-existent) variable/parameter (<code>object</code>).</p>\n<p>Like mrangel says: <em>In [a] room's enter/exit script <code>this</code> means the room</em>.</p>\n<p>There is no <code>object</code> variable in that script, so the function you call throws an error due to a lack of parameter.</p>\n<p>So, first off, change every instance of <code>object</code> back to <code>this</code> in your \"After entering\" script.</p>\n<p>Then, well, I don't know how the function you are calling (<code>SpawnSentret</code>) works, but I assume its parameter needs to be a room.</p>\n<p>So, like . . .</p>\n<p>Time out.</p>\n<hr>\n<p><strong>1 minute later:</strong></p>\n<p>I just downloaded your game, unzipped it, and opened the aslx file in a text editor.</p>\n<p>Here is the <code>SpawnSentret</code> function:</p>\n<details>\n<pre><code>  &lt;function name=\"SpawnSentret\" parameters=\"room\"&gt;&lt;![CDATA[\n    if (HasInt(game, \"crittercount\")) {\n      game.crittercount = game.crittercount + 1\n    }\n    else {\n      game.crittercount = 1\n    }\n    create (\"crittercount\" + game.crittercount)\n    obj = GetObject(\"crittercount\" + game.crittercount)\n    obj.parent = room\n    obj.displayverbs = Split(\"Look at;Attack;Direct Hit;Stat;Status\", \";\")\n    obj.dead = false\n    obj.hero = false\n    obj.changedhitpoints =&gt; {\n      if (this.hitpoints &lt; 1) {\n        this.dead = true\n        msg (\"It whited out!\")\n        player.exp = player.exp + 20\n        player.pokedollar = player.pokedollar + 5\n        roll2 = GetRandomInt(1,20)\n        pokeroll = player.catchrate + roll2\n        if (pokeroll &gt; 16) {\n          if (player.team &gt; 7) {\n            MoveObject (this, PC)\n            this.displayverbs = Split(\"Look at;Equip;Reload\", \";\")\n            msg (\"object.alias was moved to the PC.\")\n          }\n          else {\n            this.displayverbs = Split(\"Look at;Equip;Reload\", \";\")\n            AddToInventory (this)\n          }\n        }\n        else {\n          RemoveObject (this)\n        }\n      }\n    }\n    obj.element = \"Normal\"\n    obj.alias = \"Sentret\"\n    obj.listalias = CapFirst(obj.alias)\n    obj.look = ProcessText(\"A \" + obj.alias + \". A normal type. A very cautious Pokémon, it raises itself up using its tail to get a better view of its surroundings.\")\n    obj.critdesc = \"A well-placed blow by #attacker# sends you reeling (#hits# hits).\"\n    obj.attackdesc = \"#Attacker# hits you (#hits# hits).\"\n    obj.missdesc = \"#Attacker# misses you.\"\n    obj.hitpoints = 20\n    obj.max = 20\n    obj.damage = 3\n    obj.maxdamage = 3\n    obj.attack = 1\n    obj.maxattack = 1\n    obj.defence = 0\n    obj.maxdefence = 0\n    obj.armour = 0\n    obj.maxarmour = 0\n    obj.speed = 10\n    obj.maxspeed = 10\n    obj.contestpoints = 100\n    obj.maxcontestpoints = 100\n    obj.tough = 5\n    obj.maxtough = 5\n    obj.beauty = 6\n    obj.maxbeauty = 6\n    obj.cool = 4\n    obj.cool = 4\n    obj.smart = 2\n    obj.smart = 2\n    obj.cute = 4\n    obj.cute = 4\n    obj.trainerpoke = false\n    obj.faint = false\n    obj.element1 = \"normal\"\n    obj.selectweapon =&gt; {\n      this.weapon = GetObject(PickOneString(\"Struggle;Quick Attack;Scratch\"))\n    }\n    obj.selectattack =&gt; {\n      this.weapon = GetObject(PickOneString(\"Struggle;Quick Attack;Scratch\"))\n    }\n    this.firearmdamage = 4\n    this.firearmattack = 2\n    this.ammo = 20\n    this.ammomax = 20\n    // ProcessText(\"A \" + obj.alias + \",t}.\")\n  ]]&gt;&lt;/function&gt;\n\n\n</code></pre>\n</details>\n<hr>\n<p>I see the same thing mrangel and HK and Pixie see.  These are your last 12 lines of code in that function:</p>\n<pre><code>    obj.element1 = \"normal\"\n    obj.selectweapon =&gt; {\n      this.weapon = GetObject(PickOneString(\"Struggle;Quick Attack;Scratch\"))\n    }\n    obj.selectattack =&gt; {\n      this.weapon = GetObject(PickOneString(\"Struggle;Quick Attack;Scratch\"))\n    }\n    this.firearmdamage = 4\n    this.firearmattack = 2\n    this.ammo = 20\n    this.ammomax = 20\n    // ProcessText(\"A \" + obj.alias + \",t}.\")\n</code></pre>\n<p>As others have pointed out, you define the variable <code>obj</code> early in the code, but the variable <code>this</code> does not exist in this script.</p>\n<p>I see how someone could easily get confused, though (because it seems like <code>this</code> exists in the \"After entering\" script):</p>\n<pre><code>    obj.selectattack =&gt; {\n      this.weapon = GetObject(PickOneString(\"Struggle;Quick Attack;Scratch\"))\n    }\n</code></pre>\n<p>That bit of code is actually creating a <code>selectattack</code> script for whatever <code>obj</code> points to.  In that <code>selectattack</code> script, <code>this</code> will work because that script is an attribute on an object.  As others have said, when a script is an attribute on an object (like a verb script), <code>this</code> will point to the object to which the script attribute belongs.</p>\n<p>But <code>this</code> is not defined in your \"After entering room\" script.  So, like others said, those last 4 lines of code (not counting the last line -- which is commented out) should use the <code>obj</code> variable (which you definitely do define in this script), like this:</p>\n<pre><code>    obj.firearmdamage = 4\n    obj.firearmattack = 2\n    obj.ammo = 20\n    obj.ammomax = 20\n    // ProcessText(\"A \" + obj.alias + \",t}.\")\n</code></pre>\n<hr>\n<blockquote>\n<p>I think my game is just broken somehow.</p>\n</blockquote>\n<p>Well...</p>\n<p>If you weren't playing Solitaire and watching two YouTube videos while you were editing the game, it would probably work better!  (Just kidding!!!)</p>\n\n",
      "PostDate": "2019-05-10T22:05:51.8849694Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e485ed07-2093-4b4c-bd7f-de63c6c61849",
      "UserId": 267336,
      "Username": "jmnevil54",
      "AvatarUrl": "https://secure.gravatar.com/avatar/5d73d7ec1dbe20a5cb46f02a6d53f187?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I just set it to \"Route 24\", the room name, and it worked.\r\n\r\nThank you all.",
      "EditableFormat": "markdown",
      "HTML": "<p>I just set it to \"Route 24\", the room name, and it worked.</p>\n<p>Thank you all.</p>\n\n",
      "PostDate": "2019-05-12T07:52:38.4866145Z",
      "LastEditDate": "2019-05-12T07:53:02.3011333Z",
      "link": null
    }
  ]
}
