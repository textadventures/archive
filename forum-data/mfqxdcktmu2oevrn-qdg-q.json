{
  "Topic": {
    "TopicId": "mfqxdcktmu2oevrn-qdg-q",
    "ForumId": "10",
    "Title": "Creating exits to rooms that don't exist yet",
    "LastUpdated": "2017-02-19T13:59:08.5810987Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "f6c3f6d6-a500-4dfa-a813-7cf7faddcbe4",
      "UserId": 244858,
      "Username": "themerchantsguild",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4437fd3cde4a16a5cbcadf944edc0103?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Hi, I've been reading and trying things from the forum for a while, but this is my first question that I can't seem to crack.  There might be a really simple answer.\r\n\r\nI want the player to enter a room, and then this creates a new room with an exit so the player can get to the new room.  I can create the room OK, but I can't seem to work out how to refer to the new room in the create exit part.  I tried doing it like this (I'm naming the rooms based on a coordinate position):\r\n\r\ncreate (\"World\" + player.nextxn + \"_\" + player.nextyn + \"\", \"New Room\")\r\nplayer.nextroomn = \"World\" + player.nextxn + \"_\" + player.nextyn + \"\"\r\ncreate exit (\"north\", player.parent, player.nextroomn) \r\n\r\nThe problem seems to be that Quest isn't recognising 'player.nextroomn' as an object - even though the wording is the same and it is recognising player.parent as an object - and I can't work out how to define that attribute as an object.  I tried referring to the new room directly using the same code as the name:\r\n\r\ncreate exit (\"north\", player.parent, \"World\" + player.nextxn + \"_\" + player.nextyn + \"\") \r\n\r\nbut that doesn't seem to work either.\r\n\r\nOr am I missing something simple here?\r\nThanks for your help!\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Hi, I've been reading and trying things from the forum for a while, but this is my first question that I can't seem to crack.  There might be a really simple answer.</p>\n<p>I want the player to enter a room, and then this creates a new room with an exit so the player can get to the new room.  I can create the room OK, but I can't seem to work out how to refer to the new room in the create exit part.  I tried doing it like this (I'm naming the rooms based on a coordinate position):</p>\n<p>create (\"World\" + player.nextxn + \"<em>\" + player.nextyn + \"\", \"New Room\")<br>\nplayer.nextroomn = \"World\" + player.nextxn + \"</em>\" + player.nextyn + \"\"<br>\ncreate exit (\"north\", player.parent, player.nextroomn)</p>\n<p>The problem seems to be that Quest isn't recognising 'player.nextroomn' as an object - even though the wording is the same and it is recognising player.parent as an object - and I can't work out how to define that attribute as an object.  I tried referring to the new room directly using the same code as the name:</p>\n<p>create exit (\"north\", player.parent, \"World\" + player.nextxn + \"_\" + player.nextyn + \"\")</p>\n<p>but that doesn't seem to work either.</p>\n<p>Or am I missing something simple here?<br>\nThanks for your help!</p>\n\n",
      "PostDate": "2017-02-19T13:59:08.5810987Z",
      "LastEditDate": null
    },
    {
      "PostId": "91c35bb3-54c3-416a-bf7e-dfb26a2b0c11",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Your second line needs to be this:\r\n```\r\nplayer.nextroomn = GetObject(\"World\" + player.nextxn + \"\" + player.nextyn + \"\")\r\n```\r\nAs it is you ae setting it to the name of the room (i.e., a string), you need to set it to an object with that name.",
      "EditableFormat": "markdown",
      "HTML": "<p>Your second line needs to be this:</p>\n<pre><code>player.nextroomn = GetObject(\"World\" + player.nextxn + \"\" + player.nextyn + \"\")\n</code></pre>\n<p>As it is you ae setting it to the name of the room (i.e., a string), you need to set it to an object with that name.</p>\n\n",
      "PostDate": "2017-02-19T14:52:00.8033326Z",
      "LastEditDate": null
    },
    {
      "PostId": "ca61b55c-720b-4273-8007-da31365d0ae2",
      "UserId": 244858,
      "Username": "themerchantsguild",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4437fd3cde4a16a5cbcadf944edc0103?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Ah - thought it might be something as simple as that, I just didn't know what it was.\r\n\r\nThanks for taking the time to help!  Glad I asked!",
      "EditableFormat": "markdown",
      "HTML": "<p>Ah - thought it might be something as simple as that, I just didn't know what it was.</p>\n<p>Thanks for taking the time to help!  Glad I asked!</p>\n\n",
      "PostDate": "2017-02-19T16:52:31.7121146Z",
      "LastEditDate": null
    },
    {
      "PostId": "4bc3af9b-5955-4e0f-84c4-08068e3fb120",
      "UserId": 244858,
      "Username": "themerchantsguild",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4437fd3cde4a16a5cbcadf944edc0103?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Follow up question (inevitably):\r\n\r\nThis creates the exit and the room OK but I'm having trouble getting the room to appear on the map.  When you move into it nothing happens on the map at all.\r\n\r\nI wondered if this was something to do with the attributes of the new room / exit; using types I tried to define them the same as any other room but the only difference seems to be grid_render - and when I mark this as true it returns a lot of error messages when you move into it.\r\n\r\nAny thoughts on getting a newly created room to appear on the map as normal?\r\n\r\nThanks again!",
      "EditableFormat": "markdown",
      "HTML": "<p>Follow up question (inevitably):</p>\n<p>This creates the exit and the room OK but I'm having trouble getting the room to appear on the map.  When you move into it nothing happens on the map at all.</p>\n<p>I wondered if this was something to do with the attributes of the new room / exit; using types I tried to define them the same as any other room but the only difference seems to be grid_render - and when I mark this as true it returns a lot of error messages when you move into it.</p>\n<p>Any thoughts on getting a newly created room to appear on the map as normal?</p>\n<p>Thanks again!</p>\n\n",
      "PostDate": "2017-02-20T10:20:48.0124669Z",
      "LastEditDate": null
    },
    {
      "PostId": "d9008af4-d857-427e-b1a8-58df7b3f29e5",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I have never really used the map, but it is likely there are attributes on the room that Quest is expecting to draw it, such as its width and height.  Are you creating the rooms of the type \"defaultobject\"? I would _guess_ that would fix it.\r\n\r\nIf you are using the desktop version, look at the attributes for any room; all the ones in grey come from \"defaultobject\", and several look to be grid-related.",
      "EditableFormat": "markdown",
      "HTML": "<p>I have never really used the map, but it is likely there are attributes on the room that Quest is expecting to draw it, such as its width and height.  Are you creating the rooms of the type \"defaultobject\"? I would <em>guess</em> that would fix it.</p>\n<p>If you are using the desktop version, look at the attributes for any room; all the ones in grey come from \"defaultobject\", and several look to be grid-related.</p>\n\n",
      "PostDate": "2017-02-20T11:00:57.6727186Z",
      "LastEditDate": null
    },
    {
      "PostId": "61453d2a-082e-4cc0-8af7-957b1e9f57da",
      "UserId": 244858,
      "Username": "themerchantsguild",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4437fd3cde4a16a5cbcadf944edc0103?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks for the reply - I'm afraid that doesn't do it.  The new room gets the defaultobject attributes anyway and it doesn't seem to make any difference if I specify all the grid attributes as a new type.\r\n\r\nI do think it has something to do with type attributes though as I did get it working for a while, but then somehow lost it again!",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks for the reply - I'm afraid that doesn't do it.  The new room gets the defaultobject attributes anyway and it doesn't seem to make any difference if I specify all the grid attributes as a new type.</p>\n<p>I do think it has something to do with type attributes though as I did get it working for a while, but then somehow lost it again!</p>\n\n",
      "PostDate": "2017-02-20T12:15:15.6041297Z",
      "LastEditDate": null
    },
    {
      "PostId": "4eb75dad-e93e-42e5-b402-7f27d01b3dfd",
      "UserId": 56551,
      "Username": "XanMag",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4b45a3afd18077f76f6569225c422bdb?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Can't you just make exit visible after an event triggers it?",
      "EditableFormat": "markdown",
      "HTML": "<p>Can't you just make exit visible after an event triggers it?</p>\n\n",
      "PostDate": "2017-02-20T13:10:07.2149116Z",
      "LastEditDate": null
    },
    {
      "PostId": "9f70d787-f736-4b19-8848-e98984349a89",
      "UserId": 32920,
      "Username": "Father",
      "AvatarUrl": "http://i.imgur.com/ogRXH9lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Why does the room not have to exist if the player has never been there?  Only you the author,would know anyway. ",
      "EditableFormat": "markdown",
      "HTML": "<p>Why does the room not have to exist if the player has never been there?  Only you the author,would know anyway.</p>\n\n",
      "PostDate": "2017-02-20T15:25:00.8751744Z",
      "LastEditDate": null
    },
    {
      "PostId": "92aefc59-4eb2-4983-8477-985379514ef5",
      "UserId": 244858,
      "Username": "themerchantsguild",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4437fd3cde4a16a5cbcadf944edc0103?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Yes of course (that would be simpler), but then I would have to define all the rooms and exits before the game runs and that's not quite what I'm after in this case.",
      "EditableFormat": "markdown",
      "HTML": "<p>Yes of course (that would be simpler), but then I would have to define all the rooms and exits before the game runs and that's not quite what I'm after in this case.</p>\n\n",
      "PostDate": "2017-02-20T15:28:45.6166923Z",
      "LastEditDate": null
    },
    {
      "PostId": "35a0e6a8-084f-470f-b108-fe86d1ae05b7",
      "UserId": 1346,
      "Username": "The Pixie",
      "AvatarUrl": "https://secure.gravatar.com/avatar/cfa37e927f96177bcf6053ae8f108f77?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "If you are using the desktop version, start playing, and click on the Debugger at the top, leftish. Check what attributes a room normally has, compared to those your created rooms have. You can list attributes alphabetically by clicking the top of the column. In particular, check those that start \"grid\" (there looks to be eleven of them).",
      "EditableFormat": "markdown",
      "HTML": "<p>If you are using the desktop version, start playing, and click on the Debugger at the top, leftish. Check what attributes a room normally has, compared to those your created rooms have. You can list attributes alphabetically by clicking the top of the column. In particular, check those that start \"grid\" (there looks to be eleven of them).</p>\n\n",
      "PostDate": "2017-02-20T15:45:12.4150422Z",
      "LastEditDate": null
    },
    {
      "PostId": "9ec90a94-e347-452d-9fda-3e59116beffe",
      "UserId": 244858,
      "Username": "themerchantsguild",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4437fd3cde4a16a5cbcadf944edc0103?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Thanks - checked and they're identical, but the new room just isn't on the map.  Same for the exits.  Is there some internal command to draw the room getting missed or something?",
      "EditableFormat": "markdown",
      "HTML": "<p>Thanks - checked and they're identical, but the new room just isn't on the map.  Same for the exits.  Is there some internal command to draw the room getting missed or something?</p>\n\n",
      "PostDate": "2017-02-20T16:10:44.1594601Z",
      "LastEditDate": null
    },
    {
      "PostId": "c72e295d-f67a-4ac1-ae52-873514e37f7e",
      "UserId": 244858,
      "Username": "themerchantsguild",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4437fd3cde4a16a5cbcadf944edc0103?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This is the error message I get when grid.render is set as True (and then I think it is trying to draw the room but this happens):\r\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.\r\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.\r\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.\r\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.\r\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.\r\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.\r\n\r\nDoes this give a clue to anyone?!  Appreciate your suggestions.",
      "EditableFormat": "markdown",
      "HTML": "<p>This is the error message I get when grid.render is set as True (and then I think it is trying to draw the room but this happens):<br>\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.<br>\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.<br>\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.<br>\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.<br>\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.<br>\nError running script: Error evaluating expression 'DictionaryItem(coordinates, coordinate)': The given key was not present in the dictionary.</p>\n<p>Does this give a clue to anyone?!  Appreciate your suggestions.</p>\n\n",
      "PostDate": "2017-02-20T16:18:43.603253Z",
      "LastEditDate": null
    },
    {
      "PostId": "983559b7-a449-41fb-a12f-cc6e26187056",
      "UserId": 247325,
      "Username": "hegemonkhan",
      "AvatarUrl": "https://secure.gravatar.com/avatar/a96cf34d8d97c57de38f54ee22b1759b?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "you could try turning off the map/grid, creating and moving-to the new room, and then turning back on the map, as this comes up when using scripting to move to rooms (no Exit usage) and using the map/grid.",
      "EditableFormat": "markdown",
      "HTML": "<p>you could try turning off the map/grid, creating and moving-to the new room, and then turning back on the map, as this comes up when using scripting to move to rooms (no Exit usage) and using the map/grid.</p>\n\n",
      "PostDate": "2017-02-20T17:08:51.1598073Z",
      "LastEditDate": "2017-02-20T17:09:51.7149426Z"
    },
    {
      "PostId": "d267db4e-c458-438b-854b-48d394cbc4be",
      "UserId": 244858,
      "Username": "themerchantsguild",
      "AvatarUrl": "https://secure.gravatar.com/avatar/4437fd3cde4a16a5cbcadf944edc0103?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Got it sorted!  Turns out the problem was that the script for creating the new room and exits needed to be before entering the previous room and not after.  I think that meant the exit wasn't completely created before you tried to use it so it wasn't behaving properly.  Don't fully understand why that made a difference but glad to have resolved it!  With a bit of extra coding I've now got myself infinite rooms going in one direction which is what I was after.\r\n\r\nThanks for your help!",
      "EditableFormat": "markdown",
      "HTML": "<p>Got it sorted!  Turns out the problem was that the script for creating the new room and exits needed to be before entering the previous room and not after.  I think that meant the exit wasn't completely created before you tried to use it so it wasn't behaving properly.  Don't fully understand why that made a difference but glad to have resolved it!  With a bit of extra coding I've now got myself infinite rooms going in one direction which is what I was after.</p>\n<p>Thanks for your help!</p>\n\n",
      "PostDate": "2017-02-21T10:06:46.7552746Z",
      "LastEditDate": null
    },
    {
      "PostId": "ceda522d-3f63-4967-b5d1-8e39f567f98b",
      "UserId": 288307,
      "Username": "crystalwizard",
      "AvatarUrl": "http://i.imgur.com/3AxpbN7b.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">Don't fully understand why that made a difference\r\n\r\nmissing pointers. The map didn't have any idea which way it came from/went to until you created the exit.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Don't fully understand why that made a difference</p>\n</blockquote>\n<p>missing pointers. The map didn't have any idea which way it came from/went to until you created the exit.</p>\n\n",
      "PostDate": "2017-02-22T18:27:32.6607299Z",
      "LastEditDate": null
    }
  ]
}
