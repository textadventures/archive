{
  "Topic": {
    "TopicId": "hgnbrziap0uiswctr2xpla",
    "ForumId": "10",
    "Title": "Centering the Map [SOLVED]",
    "LastUpdated": "2018-05-08T13:07:45.04411Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "856d07c3-b4f6-485d-9705-be0e04b8ef38",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": " I've only just discovered the facility to turn the map off and on dynamically using JS.ShowGrid (0) and JS.ShowGrid (300). This works very well at the beginning of a game, as a play option, but if the map is switched on after the player has moved, the map is no longer centred on the player.  This is fixed automatically when the player makes the next move but I can't see how to do it when the map is opened. Help!",
      "EditableFormat": "markdown",
      "HTML": "<p>I've only just discovered the facility to turn the map off and on dynamically using JS.ShowGrid (0) and JS.ShowGrid (300). This works very well at the beginning of a game, as a play option, but if the map is switched on after the player has moved, the map is no longer centred on the player.  This is fixed automatically when the player makes the next move but I can't see how to do it when the map is opened. Help!</p>\n\n",
      "PostDate": "2018-05-08T13:07:45.04411Z",
      "LastEditDate": "2018-05-08T13:48:35.0192351Z",
      "link": null
    },
    {
      "PostId": "12c73b84-3426-4c4d-98b3-93e7b80f9849",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Take a look at some of the \"Grid_\" functions here (under Internal Core.aslx Functions):  http://docs.textadventures.co.uk/quest/functions/\r\n\r\nThere is a ```Grid_SetCentre``` function, but you have to input the player's x/y coordinates to work it.  Yes, there needs to be more documentation on explaining and using the various map functions.",
      "EditableFormat": "markdown",
      "HTML": "<p>Take a look at some of the \"Grid_\" functions here (under Internal Core.aslx Functions):  http://docs.textadventures.co.uk/quest/functions/</p>\n<p>There is a <code>Grid_SetCentre</code> function, but you have to input the player's x/y coordinates to work it.  Yes, there needs to be more documentation on explaining and using the various map functions.</p>\n\n",
      "PostDate": "2018-05-08T13:18:53.6095064Z",
      "LastEditDate": "2018-05-08T13:20:03.9893151Z",
      "link": null
    },
    {
      "PostId": "94ef9707-142b-4c6f-8c58-18292e96047a",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry Dcoder, I've already been down that route and couldn't find the co-ordinates for the player. There seem to be attributes ```grid_parent_offset_x``` and ```grid_parent_offset_y``` for the player but these had no effect when I used them as parameters to ```Grid_SetCentre```",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry Dcoder, I've already been down that route and couldn't find the co-ordinates for the player. There seem to be attributes <code>grid_parent_offset_x</code> and <code>grid_parent_offset_y</code> for the player but these had no effect when I used them as parameters to <code>Grid_SetCentre</code></p>\n\n",
      "PostDate": "2018-05-08T13:29:53.9653982Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "33ee858a-c390-49ab-8e50-95ef1189f05c",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "The best way to (sort of) understand how those map functions work is to check Filter --> Show Library Elements at the bottom left of the editor and then search for the function in question.  You can copy the function (top right corner) to allow overwriting of its default scripting.  Make sure to do this in a copy of your game first.",
      "EditableFormat": "markdown",
      "HTML": "<p>The best way to (sort of) understand how those map functions work is to check Filter --&gt; Show Library Elements at the bottom left of the editor and then search for the function in question.  You can copy the function (top right corner) to allow overwriting of its default scripting.  Make sure to do this in a copy of your game first.</p>\n\n",
      "PostDate": "2018-05-08T13:30:29.6409869Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "f5fea31a-30c0-4a5d-9f54-b28845dcfb41",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I think the ```grid_parent_offset``` stuff just draws the player not in the center of the room.  Not much help, I know.\r\n\r\nDoes ```Grid_DrawPlayerInRoom (game.pov.parent)``` center the player?",
      "EditableFormat": "markdown",
      "HTML": "<p>I think the <code>grid_parent_offset</code> stuff just draws the player not in the center of the room.  Not much help, I know.</p>\n<p>Does <code>Grid_DrawPlayerInRoom (game.pov.parent)</code> center the player?</p>\n\n",
      "PostDate": "2018-05-08T13:42:04.8085916Z",
      "LastEditDate": "2018-05-08T13:46:50.4447717Z",
      "link": null
    },
    {
      "PostId": "fe50a30a-0bb9-47b5-96d2-393983f81bbb",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": ">Does Grid_DrawPlayerInRoom (game.pov) center the player?\r\n\r\nIndeed it does! Thanks Dcoder.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>Does Grid_DrawPlayerInRoom (game.pov) center the player?</p>\n</blockquote>\n<p>Indeed it does! Thanks Dcoder.</p>\n\n",
      "PostDate": "2018-05-08T13:48:05.3536166Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "6a808728-011f-4c78-8811-b899acb49ba2",
      "UserId": 277074,
      "Username": "Dcoder",
      "AvatarUrl": "http://i.imgur.com/d9UrZ6lb.jpg",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry, that should have been ```(game.pov.parent)```, not ```(game.pov)```.  Glad it worked : )",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry, that should have been <code>(game.pov.parent)</code>, not <code>(game.pov)</code>.  Glad it worked : )</p>\n\n",
      "PostDate": "2018-05-08T13:58:43.5310387Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "8400c7b0-d717-4f30-87bf-7052dd4db947",
      "UserId": 199273,
      "Username": "DavyB",
      "AvatarUrl": "http://i.imgur.com/8BcaZCyb.png",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry, I corrected it without thinking! Just in case anyone else is planning to use this facility, my approach was to introduce a new Boolean attribute to game: 'map_on' (initially false), and a MAP command which simply switches between the map being visible and invisible (initially invisible):\r\n\r\n```\r\nif (game.map_on) {\r\n  JS.ShowGrid (0)\r\n  game.map_on = false\r\n  msg (\"The map has been hidden. Type MAP again to restore it.\")\r\n}\r\nelse {\r\n  JS.ShowGrid (300)\r\n  Grid_DrawPlayerInRoom (game.pov.parent)\r\n  game.map_on = true\r\n  msg (\"The map has been restored. Type MAP again to hide it.\")\r\n}\r\n```",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry, I corrected it without thinking! Just in case anyone else is planning to use this facility, my approach was to introduce a new Boolean attribute to game: 'map_on' (initially false), and a MAP command which simply switches between the map being visible and invisible (initially invisible):</p>\n<pre><code>if (game.map_on) {\n  JS.ShowGrid (0)\n  game.map_on = false\n  msg (\"The map has been hidden. Type MAP again to restore it.\")\n}\nelse {\n  JS.ShowGrid (300)\n  Grid_DrawPlayerInRoom (game.pov.parent)\n  game.map_on = true\n  msg (\"The map has been restored. Type MAP again to hide it.\")\n}\n</code></pre>\n\n",
      "PostDate": "2018-05-08T14:07:18.0027175Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
