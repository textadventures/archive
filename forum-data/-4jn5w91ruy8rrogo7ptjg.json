{
  "Topic": {
    "TopicId": "-4jn5w91ruy8rrogo7ptjg",
    "ForumId": "10",
    "Title": "[Solved] Struggling to get NPCs spawned and patrol on a randomly generated map",
    "LastUpdated": "2022-01-31T13:15:58.1777141Z",
    "ReplyCount": 0
  },
  "Posts": [
    {
      "PostId": "3085ce29-05f8-4b5c-b188-6669304e94ed",
      "UserId": 326173,
      "Username": "Curt A. P.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/bc1d5d57408cf4d13f9d9f23c1e3dc56?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "For map regeneration I use this script from a previous post: https://textadventures.co.uk/forum/quest/topic/td5yfgkdpu__qojdlp1xmq/solved-the-compass-doesnt-show-diagonal-exits-directions\r\n(With a bug fix since then)\r\n\r\nI try to find a way to spawn NPCs at random in the <b>Before first enter script</b> for each room. I have it working with stackable items, but I don't find a good way to spawn a random amount of NPC that don't stack.\r\nIn my first try I want to <b>clone and move</b> a random amount of sheep. Then when they are cloned and moved I want to implement the patrolling script, but first things first. For now I want to get them spawned. So far I didn't get any errors, but also no sheep spawning.\r\n\r\nBefore first enter called by a script attribute:\r\n```\r\nforeach (obj, GetDirectChildren( z_vault_npc_peaceful)) {\r\n  if (obj.spawn_plains > 0) {\r\n    random_chance = GetRandomInt(1,1000)\r\n    if (random_chance <= obj.spawn_plains) {\r\n      obj.amount_to_spawn = GetRandomInt(obj.spawn_plains_amount_min, obj.spawn_plains_amount_max)\r\n    }\r\n  }\r\n}\r\n```\r\nThis is what I have to get the chance and amount and I struggle to spawn a few sheep.",
      "EditableFormat": "markdown",
      "HTML": "<p>For map regeneration I use this script from a previous post: https://textadventures.co.uk/forum/quest/topic/td5yfgkdpu__qojdlp1xmq/solved-the-compass-doesnt-show-diagonal-exits-directions<br>\n(With a bug fix since then)</p>\n<p>I try to find a way to spawn NPCs at random in the <b>Before first enter script</b> for each room. I have it working with stackable items, but I don't find a good way to spawn a random amount of NPC that don't stack.<br>\nIn my first try I want to <b>clone and move</b> a random amount of sheep. Then when they are cloned and moved I want to implement the patrolling script, but first things first. For now I want to get them spawned. So far I didn't get any errors, but also no sheep spawning.</p>\n<p>Before first enter called by a script attribute:</p>\n<pre><code>foreach (obj, GetDirectChildren(&nbsp;z_vault_npc_peaceful)) {\n  if (obj.spawn_plains &gt; 0) {\n    random_chance = GetRandomInt(1,1000)\n    if (random_chance &lt;= obj.spawn_plains) {\n      obj.amount_to_spawn = GetRandomInt(obj.spawn_plains_amount_min, obj.spawn_plains_amount_max)\n    }\n  }\n}\n</code></pre>\n<p>This is what I have to get the chance and amount and I struggle to spawn a few sheep.</p>\n\n",
      "PostDate": "2022-01-31T13:15:58.1777141Z",
      "LastEditDate": "2022-02-17T08:19:37.0845476Z",
      "link": null
    },
    {
      "PostId": "ee9e3f6f-cfa3-4118-ae03-d10015763729",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I assume that `z_valut_npc_peaceful` is a room/container containing the prototype sheep?\r\n\r\nThat all seems valid.\r\n\r\n> So far I didn't get any errors, but also no sheep spawning.\r\n\r\nYou didn't show us the code that's supposed to spawn the sheep. So far, you're picking a couple of random numbers. I would have expected it to be something like:\r\n<pre><code>foreach (obj, GetDirectChildren( z_vault_npc_peaceful)) {\r\n  if (obj.spawn_plains > 0) {\r\n    random_chance = GetRandomInt(1,1000)\r\n    if (random_chance &lt;= obj.spawn_plains) {\r\n      obj.amount_to_spawn = GetRandomInt(obj.spawn_plains_amount_min, obj.spawn_plains_amount_max)\r\n      <b>for (n, 1, obj.amount_to_spawn) {\r\n        newclone = CloneObjectAndMove(obj, this)\r\n        <em style=\"font-family: initial; color: green\">// \"start patrolling\" or path initialisation code would go here if needed</em>\r\n      }</b>\r\n    }\r\n  }\r\n}</code></pre>",
      "EditableFormat": "markdown",
      "HTML": "<p>I assume that <code>z_valut_npc_peaceful</code> is a room/container containing the prototype sheep?</p>\n<p>That all seems valid.</p>\n<blockquote>\n<p>So far I didn't get any errors, but also no sheep spawning.</p>\n</blockquote>\n<p>You didn't show us the code that's supposed to spawn the sheep. So far, you're picking a couple of random numbers. I would have expected it to be something like:</p>\n<pre><code>foreach (obj, GetDirectChildren( z_vault_npc_peaceful)) {\n  if (obj.spawn_plains &gt; 0) {\n    random_chance = GetRandomInt(1,1000)\n    if (random_chance &lt;= obj.spawn_plains) {\n      obj.amount_to_spawn = GetRandomInt(obj.spawn_plains_amount_min, obj.spawn_plains_amount_max)\n      <b>for (n, 1, obj.amount_to_spawn) {\n        newclone = CloneObjectAndMove(obj, this)\n        <em style=\"font-family: initial; color: green\">// \"start patrolling\" or path initialisation code would go here if needed</em>\n      }</b>\n    }\n  }\n}</code></pre>\n\n",
      "PostDate": "2022-01-31T13:50:02.8466626Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "feef6aea-3170-4bf4-be0a-a2b79b910b9e",
      "UserId": 326173,
      "Username": "Curt A. P.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/bc1d5d57408cf4d13f9d9f23c1e3dc56?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> I assume that z_valut_npc_peaceful is a room/container containing the prototype sheep?\r\n\r\nThat's correct.\r\n\r\n> You didn't show us the code that's supposed to spawn the sheep. So far, you're picking a couple of random numbers.\r\n\r\nYes, because I couldn't figure out how to to do it in the same script. \r\nSo, and I have no clue what the <code>for</code> function is doing. I took a look at it every now and then over the last years but never understood...",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>I assume that z_valut_npc_peaceful is a room/container containing the prototype sheep?</p>\n</blockquote>\n<p>That's correct.</p>\n<blockquote>\n<p>You didn't show us the code that's supposed to spawn the sheep. So far, you're picking a couple of random numbers.</p>\n</blockquote>\n<p>Yes, because I couldn't figure out how to to do it in the same script.<br>\nSo, and I have no clue what the <code>for</code> function is doing. I took a look at it every now and then over the last years but never understood...</p>\n\n",
      "PostDate": "2022-01-31T14:13:56.8154471Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "ada4405a-4671-4dd2-8c4f-99de14b906a8",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> So, and I have no clue what the for function is doing. I took a look at it every now and then over the last years but never understood...\r\n\r\nIt's like `foreach`, but instead of going over a list of objects it's just doing numbers.\r\n\r\nIn this case, if `obj.amount_to_spawn` is 5, the stuff inside the loop will be run once with `n` being `1`, then `2`, `3`, `4`, and `5`. So… it does the contents of the loop 5 times. I assume that's what \"amount to spawn\" is for.",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>So, and I have no clue what the for function is doing. I took a look at it every now and then over the last years but never understood...</p>\n</blockquote>\n<p>It's like <code>foreach</code>, but instead of going over a list of objects it's just doing numbers.</p>\n<p>In this case, if <code>obj.amount_to_spawn</code> is 5, the stuff inside the loop will be run once with <code>n</code> being <code>1</code>, then <code>2</code>, <code>3</code>, <code>4</code>, and <code>5</code>. So… it does the contents of the loop 5 times. I assume that's what \"amount to spawn\" is for.</p>\n\n",
      "PostDate": "2022-01-31T15:16:58.0953654Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "cb9a9941-557e-4ec3-9726-6967b1f6abeb",
      "UserId": 326173,
      "Username": "Curt A. P.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/bc1d5d57408cf4d13f9d9f23c1e3dc56?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "> In this case, if obj.amount_to_spawn is 5, the stuff inside the loop will be run once with n being 1, then 2, 3, 4, and 5. So… it does the contents of the loop 5 times.\r\n\r\n\r\n```\r\nfor (n, 1, obj.amount_to_spawn) \r\n```\r\nThen, what's <code>n</code> and what's <code>1</code>  referring to? Just need to understand a bit more... ",
      "EditableFormat": "markdown",
      "HTML": "<blockquote>\n<p>In this case, if obj.amount_to_spawn is 5, the stuff inside the loop will be run once with n being 1, then 2, 3, 4, and 5. So… it does the contents of the loop 5 times.</p>\n</blockquote>\n<pre><code>for (n, 1, obj.amount_to_spawn) \n</code></pre>\n<p>Then, what's <code>n</code> and what's <code>1</code>  referring to? Just need to understand a bit more...</p>\n\n",
      "PostDate": "2022-01-31T15:23:11.6544199Z",
      "LastEditDate": "2022-01-31T15:30:49.2360035Z",
      "link": null
    },
    {
      "PostId": "9d47d568-b351-4e94-a89c-57fa8a2e2afb",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "`n` is a variable that contains the number.\r\nThe second parameter, 1, is where the count starts.\r\n\r\nSo for example,\r\n```\r\nfor (number, 4, 9) {\r\n  msg (\"The variable is \" + number)\r\n}\r\n```\r\nwould give you the output:\r\n\r\n> The variable is 4\r\nThe variable is 5\r\nThe variable is 6\r\nThe variable is 7\r\nThe variable is 8\r\nThe variable is 9\r\n\r\nIn the spawning example, we never use `n` inside the function because we just want to do the same thing several times.\r\n\r\nThere's also an optional \"step\" parameter, which isn't often used. It lets you have the number increase by different amounts. For example, you could make it negative to count backwards:\r\n```\r\nfor (countdown, 5, 1, -1) {\r\n  msg (\"Launching in \" + countdown)\r\n}\r\n```\r\nwould give you:\r\n> Launching in 5\r\n> Launching in 4\r\n> Launching in 3\r\n> Launching in 2\r\n> Launching in 1",
      "EditableFormat": "markdown",
      "HTML": "<p><code>n</code> is a variable that contains the number.<br>\nThe second parameter, 1, is where the count starts.</p>\n<p>So for example,</p>\n<pre><code>for (number, 4, 9) {\n  msg (\"The variable is \" + number)\n}\n</code></pre>\n<p>would give you the output:</p>\n<blockquote>\n<p>The variable is 4<br>\nThe variable is 5<br>\nThe variable is 6<br>\nThe variable is 7<br>\nThe variable is 8<br>\nThe variable is 9</p>\n</blockquote>\n<p>In the spawning example, we never use <code>n</code> inside the function because we just want to do the same thing several times.</p>\n<p>There's also an optional \"step\" parameter, which isn't often used. It lets you have the number increase by different amounts. For example, you could make it negative to count backwards:</p>\n<pre><code>for (countdown, 5, 1, -1) {\n  msg (\"Launching in \" + countdown)\n}\n</code></pre>\n<p>would give you:</p>\n<blockquote>\n<p>Launching in 5<br>\nLaunching in 4<br>\nLaunching in 3<br>\nLaunching in 2<br>\nLaunching in 1</p>\n</blockquote>\n\n",
      "PostDate": "2022-01-31T17:20:16.5878369Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "0369b065-42eb-41f6-be70-af38da572f09",
      "UserId": 326173,
      "Username": "Curt A. P.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/bc1d5d57408cf4d13f9d9f23c1e3dc56?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Oh man, I had a great time figuring out why the script wasn't working... I had some typos and wondered why I didn't get any error messages. Well, because I have the screen cleared when moving. So, found some more typos thanks to the error messages and it is working.\r\n\r\nStill, I can't say I understand the \"for\" function completely... does the variable matters for anything else? And don't know where the variable gets it number from... \r\nThe first parameter is where the count starts, but I don't know what's being counted. I really try to understand this function... Sorry\r\n\r\n<hr>\r\n\r\nSo, now I have sheep spawning and want them to patrol.\r\n\r\n```\r\nthis.patrol => {\r\n  exit = PickOneUnlockedExit (this.parent)\r\n  this.parent = exit.to \r\n```\r\n\r\nI want to add a convenient way to call the script after a certain amount of time has passed. I am still using the in-game clock via the game.epoch attribute.\r\n\r\n```\r\nthis.move_turn_created = false\r\nthis.changedmove_turn_created => {\r\n  create turnscript (this.name + \"_patrol_turnscript\")\r\n}\r\n```\r\nThese are just some snippets how I wanted it to work but I don't find a way to start the cycle. \r\n```\r\nif (StartsWith(this.parent name, \"area_rdm_plains\")) {\r\n  this.old_epoch_patrol = game.epoch   \r\n  this.time_staying_here = GetRandomInt(1800,43200)\r\n   SetTurnScript (this.name + \"_patrol_turnscript\") {\r\n      if (this.time_staying_here >= this.old_epoch_moving + this.time_staying_here) {\r\n        do (this, \"patrol\")\r\n        }\r\n    EnableTurnScript (this.name + \"_turnscript\")\r\n    }\r\n}\r\n```\r\nOr, is a turnscript even a good way to do this?\r\n",
      "EditableFormat": "markdown",
      "HTML": "<p>Oh man, I had a great time figuring out why the script wasn't working... I had some typos and wondered why I didn't get any error messages. Well, because I have the screen cleared when moving. So, found some more typos thanks to the error messages and it is working.</p>\n<p>Still, I can't say I understand the \"for\" function completely... does the variable matters for anything else? And don't know where the variable gets it number from...<br>\nThe first parameter is where the count starts, but I don't know what's being counted. I really try to understand this function... Sorry</p>\n<hr>\n<p>So, now I have sheep spawning and want them to patrol.</p>\n<pre><code>this.patrol =&gt; {\n  exit = PickOneUnlockedExit (this.parent)\n  this.parent = exit.to \n</code></pre>\n<p>I want to add a convenient way to call the script after a certain amount of time has passed. I am still using the in-game clock via the game.epoch attribute.</p>\n<pre><code>this.move_turn_created = false\nthis.changedmove_turn_created =&gt; {\n  create turnscript (this.name + \"_patrol_turnscript\")\n}\n</code></pre>\n<p>These are just some snippets how I wanted it to work but I don't find a way to start the cycle.</p>\n<pre><code>if (StartsWith(this.parent name, \"area_rdm_plains\")) {\n  this.old_epoch_patrol = game.epoch   \n  this.time_staying_here = GetRandomInt(1800,43200)\n   SetTurnScript (this.name + \"_patrol_turnscript\") {\n      if (this.time_staying_here &gt;= this.old_epoch_moving + this.time_staying_here) {\n        do (this, \"patrol\")\n        }\n    EnableTurnScript (this.name + \"_turnscript\")\n    }\n}\n</code></pre>\n<p>Or, is a turnscript even a good way to do this?</p>\n\n",
      "PostDate": "2022-02-02T13:58:00.9538044Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "1fc467db-be26-4ec0-82f2-de4b8f91effd",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I'm not sure what all the variables in this script are for.\r\nIf you're using an epoch time system and want multiple NPCs to be patrolling, I suspect it would be simpler to use one changescript to handle all of them.\r\n\r\nAn example of how I'd handle it:\r\nScript to spawn an NPC:\r\n<pre><code>foreach (obj, GetDirectChildren( z_vault_npc_peaceful)) {\r\n  if (obj.spawn_plains > 0) {\r\n    random_chance = GetRandomInt(1,1000)\r\n    if (random_chance &lt;= obj.spawn_plains) {\r\n      obj.amount_to_spawn = GetRandomInt(obj.spawn_plains_amount_min, obj.spawn_plains_amount_max)\r\n      for (n, 1, obj.amount_to_spawn) {\r\n        newclone = CloneObjectAndMove(obj, this)\r\n        <b style=\"color: green\">newclone.patrol_after = game.epoch + GetRandomInt(obj.min_patrol_wait, obj.max_patrol_wait)</b>\r\n      }\r\n    }\r\n  }\r\n}</code></pre>\r\n\r\nAnd in `game.changedepoch`:\r\n```\r\nforeach (obj, AllObjects()) {\r\n  if (HasInt (obj, \"patrol_after\")) {\r\n    while (game.epoch > obj.patrol_after) {\r\n      params = QuickParams (\"patrol_time\", obj.patrol_after)\r\n      obj.patrol_after = obj.patrol_after + GetRandomInt(obj.min_patrol_wait, obj.max_patrol_wait)\r\n      if (HasScript (obj, \"patrol\")) {\r\n        do (obj, \"patrol, params)\r\n      }\r\n      else {\r\n        exit = PickOneUnlockedExit (obj.parent)\r\n        if (not exit = null and HasObject(exit, \"to\")) {\r\n          obj.parent = exit.to \r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nGiving an object a `patrol_after` attribute causes it to move after the epoch reaches that number.\r\nThis makes a patrolling object move through a random unlocked exit. If you want a particular NPC to have keys for unlocking doors or similar, you can give it a \"patrol\" script attribute and it will use that instead.\r\n\r\nI made this slightly more complex to allow different NPCs to patrol  at different speeds using the same script. Just give them numeric `min_patrol_wait` and `max_patrol_wait` attributes. I also let the `patrol` scripts for NPCs have access to a variable named `patrol_time` which gives the epoch value for the time they moved at. This means that they can override their own patrol_after attribute if you want them to wait longer in particular rooms or something.",
      "EditableFormat": "markdown",
      "HTML": "<p>I'm not sure what all the variables in this script are for.<br>\nIf you're using an epoch time system and want multiple NPCs to be patrolling, I suspect it would be simpler to use one changescript to handle all of them.</p>\n<p>An example of how I'd handle it:<br>\nScript to spawn an NPC:</p>\n<pre><code>foreach (obj, GetDirectChildren( z_vault_npc_peaceful)) {\n  if (obj.spawn_plains &gt; 0) {\n    random_chance = GetRandomInt(1,1000)\n    if (random_chance &lt;= obj.spawn_plains) {\n      obj.amount_to_spawn = GetRandomInt(obj.spawn_plains_amount_min, obj.spawn_plains_amount_max)\n      for (n, 1, obj.amount_to_spawn) {\n        newclone = CloneObjectAndMove(obj, this)\n        <b style=\"color: green\">newclone.patrol_after = game.epoch + GetRandomInt(obj.min_patrol_wait, obj.max_patrol_wait)</b>\n      }\n    }\n  }\n}</code></pre>\n<p>And in <code>game.changedepoch</code>:</p>\n<pre><code>foreach (obj, AllObjects()) {\n  if (HasInt (obj, \"patrol_after\")) {\n    while (game.epoch &gt; obj.patrol_after) {\n      params = QuickParams (\"patrol_time\", obj.patrol_after)\n      obj.patrol_after = obj.patrol_after + GetRandomInt(obj.min_patrol_wait, obj.max_patrol_wait)\n      if (HasScript (obj, \"patrol\")) {\n        do (obj, \"patrol, params)\n      }\n      else {\n        exit = PickOneUnlockedExit (obj.parent)\n        if (not exit = null and HasObject(exit, \"to\")) {\n          obj.parent = exit.to \n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>Giving an object a <code>patrol_after</code> attribute causes it to move after the epoch reaches that number.<br>\nThis makes a patrolling object move through a random unlocked exit. If you want a particular NPC to have keys for unlocking doors or similar, you can give it a \"patrol\" script attribute and it will use that instead.</p>\n<p>I made this slightly more complex to allow different NPCs to patrol  at different speeds using the same script. Just give them numeric <code>min_patrol_wait</code> and <code>max_patrol_wait</code> attributes. I also let the <code>patrol</code> scripts for NPCs have access to a variable named <code>patrol_time</code> which gives the epoch value for the time they moved at. This means that they can override their own patrol_after attribute if you want them to wait longer in particular rooms or something.</p>\n\n",
      "PostDate": "2022-02-02T15:56:12.9565814Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "e1d7a682-a890-42c0-af71-7d3465baa1d0",
      "UserId": 326173,
      "Username": "Curt A. P.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/bc1d5d57408cf4d13f9d9f23c1e3dc56?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "This line is genius. So simple against what I tried to get the same\r\n```\r\n        newclone.patrol_after = game.epoch + GetRandomInt(obj.min_patrol_wait, obj.max_patrol_wait)\r\n```\r\n<hr>\r\nWhat does <code>while ()</code> do?\r\n\r\n<b> while</b>\r\n<i>while (expression) { script }\r\nRun a script while the given expression returns true.</i>\r\n<hr>\r\n\r\n```\r\n        do (obj, \"patrol\", params) // had a small typo \r\n```\r\nThe test yesterday with sheep spawning before adding the patrol scripts went well. \r\nThe patrol scripts are working fine but the game's running significantly slower as soon as 1-5 sheep are spawned. 1 sheep slow. 4 sheep veeeeeery slow. Where I generated dozens of rooms with many more sheeps in yesterday's test, now I got very long loading times from the start. (When sheeps are spawned). Not sure what to thing of it...",
      "EditableFormat": "markdown",
      "HTML": "<p>This line is genius. So simple against what I tried to get the same</p>\n<pre><code>        newclone.patrol_after = game.epoch + GetRandomInt(obj.min_patrol_wait, obj.max_patrol_wait)\n</code></pre>\n<hr>\nWhat does <code>while ()</code> do?\n<p><b> while</b><br>\n<i>while (expression) { script }<br>\nRun a script while the given expression returns true.</i></p>\n<hr>\n<pre><code>        do (obj, \"patrol\", params) // had a small typo \n</code></pre>\n<p>The test yesterday with sheep spawning before adding the patrol scripts went well.<br>\nThe patrol scripts are working fine but the game's running significantly slower as soon as 1-5 sheep are spawned. 1 sheep slow. 4 sheep veeeeeery slow. Where I generated dozens of rooms with many more sheeps in yesterday's test, now I got very long loading times from the start. (When sheeps are spawned). Not sure what to thing of it...</p>\n\n",
      "PostDate": "2022-02-03T09:49:15.5395319Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "752cb652-4bdf-4f3f-ba17-b6d46a096478",
      "UserId": 319917,
      "Username": "mrangel",
      "AvatarUrl": "https://secure.gravatar.com/avatar/?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "I used `while` instead of `if` because I don't know if you have any occasions where the epoch will increase by a lot (like the player is asleep for 8 hours). It makes the NPCs keep on patrolling until their `patrol_after` time is in the future again, taking multiple steps if necessary.\r\n\r\n> The patrol scripts are working fine but the game's running significantly slower as soon as 1-5 sheep are spawned.\r\n\r\nI'm not sure why that would happen. Have you got the game somewhere I can take a look at it?",
      "EditableFormat": "markdown",
      "HTML": "<p>I used <code>while</code> instead of <code>if</code> because I don't know if you have any occasions where the epoch will increase by a lot (like the player is asleep for 8 hours). It makes the NPCs keep on patrolling until their <code>patrol_after</code> time is in the future again, taking multiple steps if necessary.</p>\n<blockquote>\n<p>The patrol scripts are working fine but the game's running significantly slower as soon as 1-5 sheep are spawned.</p>\n</blockquote>\n<p>I'm not sure why that would happen. Have you got the game somewhere I can take a look at it?</p>\n\n",
      "PostDate": "2022-02-03T09:58:37.9357881Z",
      "LastEditDate": null,
      "link": null
    },
    {
      "PostId": "48648121-78d4-4673-b2ce-0c52f3dac0a8",
      "UserId": 326173,
      "Username": "Curt A. P.",
      "AvatarUrl": "https://secure.gravatar.com/avatar/bc1d5d57408cf4d13f9d9f23c1e3dc56?d=retro",
      "UserAvatar": null,
      "UserGravatar": null,
      "EditableText": "Sorry for the late answer. I moved into a new apartment and didn't find the time to continue this project.\r\n\r\n> I'm not sure why that would happen. Have you got the game somewhere I can take a look at it?\r\n\r\nI just tested it again and now it seems to be running fine. Normal loading times, so I assume it was just a server sided issue (?)",
      "EditableFormat": "markdown",
      "HTML": "<p>Sorry for the late answer. I moved into a new apartment and didn't find the time to continue this project.</p>\n<blockquote>\n<p>I'm not sure why that would happen. Have you got the game somewhere I can take a look at it?</p>\n</blockquote>\n<p>I just tested it again and now it seems to be running fine. Normal loading times, so I assume it was just a server sided issue (?)</p>\n\n",
      "PostDate": "2022-02-17T08:19:06.9848415Z",
      "LastEditDate": null,
      "link": null
    }
  ]
}
